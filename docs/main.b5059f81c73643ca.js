"use strict";(self.webpackChunkfriendly_time=self.webpackChunkfriendly_time||[]).push([[792],{7925:(yt,U,G)=>{function x(n,e){return Object.is(n,e)}let Z=null,D=!1,he=1;const ce=Symbol("SIGNAL");function te(n){const e=Z;return Z=n,e}const z={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $(n){if(D)throw new Error("");if(null===Z)return;Z.consumerOnSignalRead(n);const e=Z.nextProducerIndex++;gt(Z),e<Z.producerNode.length&&Z.producerNode[e]!==n&&Ot(Z)&&Tt(Z.producerNode[e],Z.producerIndexOfThis[e]),Z.producerNode[e]!==n&&(Z.producerNode[e]=n,Z.producerIndexOfThis[e]=Ot(Z)?Ct(n,Z,e):0),Z.producerLastReadVersion[e]=n.version}function Ae(n){if((!Ot(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==he)){if(!n.producerMustRecompute(n)&&!Wt(n))return n.dirty=!1,void(n.lastCleanEpoch=he);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=he}}function Fe(n){if(void 0===n.liveConsumerNode)return;const e=D;D=!0;try{for(const t of n.liveConsumerNode)t.dirty||Qe(t)}finally{D=e}}function et(){return!1!==Z?.consumerAllowSignalWrites}function Qe(n){n.dirty=!0,Fe(n),n.consumerMarkedDirty?.(n)}function Ze(n){return n&&(n.nextProducerIndex=0),te(n)}function Je(n,e){if(te(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ot(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tt(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Wt(n){gt(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ae(t),r!==t.version))return!0}return!1}function Zt(n){if(gt(n),Ot(n))for(let e=0;e<n.producerNode.length;e++)Tt(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ct(n,e,t){if(Et(n),0===n.liveConsumerNode.length&&Le(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Ct(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Tt(n,e){if(Et(n),1===n.liveConsumerNode.length&&Le(n))for(let r=0;r<n.producerNode.length;r++)Tt(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];gt(i),i.producerIndexOfThis[r]=e}}function Ot(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function gt(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Et(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Le(n){return void 0!==n.producerNode}const nt=Symbol("UNSET"),vt=Symbol("COMPUTING"),jt=Symbol("ERRORED"),Cn={...z,value:nt,dirty:!0,error:null,equal:x,producerMustRecompute:n=>n.value===nt||n.value===vt,producerRecomputeValue(n){if(n.value===vt)throw new Error("Detected cycle in computations.");const e=n.value;n.value=vt;const t=Ze(n);let r;try{r=n.computation()}catch(i){r=jt,n.error=i}finally{Je(n,t)}e!==nt&&e!==jt&&r!==jt&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let Ir=function Tn(){throw new Error};function An(){Ir()}let dr=null;function se(n,e){et()||An(),n.equal(n.value,e)||(n.value=e,function ot(n){n.version++,function ue(){he++}(),Fe(n),dr?.()}(n))}const pe={...z,equal:x,value:void 0};const Dn=()=>{},It={...z,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Dn};function pt(n){return"function"==typeof n}function Zr(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Jt=Zr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function en(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class St{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(pt(r))try{r()}catch(s){e=s instanceof Jt?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Nr(s)}catch(o){e=e??[],o instanceof Jt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Jt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Nr(e);else{if(e instanceof St){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&en(t,e)}remove(e){const{_finalizers:t}=this;t&&en(t,e),e instanceof St&&e._removeParent(this)}}St.EMPTY=(()=>{const n=new St;return n.closed=!0,n})();const Jr=St.EMPTY;function wi(n){return n instanceof St||n&&"closed"in n&&pt(n.remove)&&pt(n.add)&&pt(n.unsubscribe)}function Nr(n){pt(n)?n():n.unsubscribe()}const ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},so={setTimeout(n,e,...t){const{delegate:r}=so;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=so;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Fa(n){so.setTimeout(()=>{const{onUnhandledError:e}=ei;if(!e)throw n;e(n)})}function gs(){}const Bs=Us("C",void 0,void 0);function Us(n,e,t){return{kind:n,value:e,error:t}}let ci=null;function ca(n){if(ei.useDeprecatedSynchronousErrorHandling){const e=!ci;if(e&&(ci={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ci;if(ci=null,t)throw r}}else n()}class os extends St{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wi(e)&&e.add(this)):this.destination=vs}static create(e,t,r){return new Hi(e,t,r)}next(e){this.isStopped?ui(function la(n){return Us("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ui(function oo(n){return Us("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ui(Bs,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ko=Function.prototype.bind;function _s(n,e){return ko.call(n,e)}class Nn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ys(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ys(r)}else ys(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ys(t)}}}class Hi extends os{constructor(e,t,r){let i;if(super(),pt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ei.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_s(e.next,s),error:e.error&&_s(e.error,s),complete:e.complete&&_s(e.complete,s)}):i=e}this.destination=new Nn(i)}}function ys(n){ei.useDeprecatedSynchronousErrorHandling?function js(n){ei.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=n)}(n):Fa(n)}function ui(n,e){const{onStoppedNotification:t}=ei;t&&so.setTimeout(()=>t(n,e))}const vs={closed:!0,next:gs,error:function yl(n){throw n},complete:gs},ao="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ri(n){return n}function ua(n){return 0===n.length?Ri:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Vt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Ce(n){return n&&n instanceof os||function We(n){return n&&pt(n.next)&&pt(n.error)&&pt(n.complete)}(n)&&wi(n)}(t)?t:new Hi(t,r,i);return ca(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=lc(r))((i,s)=>{const o=new Hi({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ao](){return this}pipe(...t){return ua(t)(this)}toPromise(t){return new(t=lc(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function lc(n){var e;return null!==(e=n??ei.Promise)&&void 0!==e?e:Promise}const C=Zr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class n extends Vt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new S(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new C}next(t){ca(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ca(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ca(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Jr:(this.currentObservers=null,s.push(t),new St(()=>{this.currentObservers=null,en(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Vt;return t.source=this,t}}return n.create=(e,t)=>new S(e,t),n})();class S extends E{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Jr}}class F extends E{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function j(n){return pt(n?.lift)}function me(n){return e=>{if(j(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(n,e,t,r,i){return new mt(n,e,t,r,i)}class mt extends os{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ve(n,e){return me((t,r)=>{let i=0;t.subscribe(ke(r,s=>{r.next(n.call(e,s,i++))}))})}const wr="https://g.co/ng/security#xss";class K extends Error{constructor(e,t){super(function Qn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function lo(n){return{toString:n}.toString()}const mu="__parameters__";function _u(n,e,t){return lo(()=>{const r=function Rp(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(mu)?l[mu]:Object.defineProperty(l,mu,{value:[]})[mu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const Wn=globalThis;function On(n){for(let e in n)if(n[e]===On)return e;throw Error("Could not find renamed property on target object.")}function Cr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ti(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ti).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function cc(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const hy=On({__forward_ref__:On});function Gn(n){return n.__forward_ref__=Gn,n.toString=function(){return ti(this())},n}function At(n){return Mp(n)?n():n}function Mp(n){return"function"==typeof n&&n.hasOwnProperty(hy)&&n.__forward_ref__===Gn}function Ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function yu(n){return kp(n,uc)||kp(n,Hw)}function kp(n,e){return n.hasOwnProperty(e)?n[e]:null}function vu(n){return n&&(n.hasOwnProperty(oh)||n.hasOwnProperty(py))?n[oh]:null}const uc=On({\u0275prov:On}),oh=On({\u0275inj:On}),Hw=On({ngInjectableDef:On}),py=On({ngInjectorDef:On});class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function No(n){return n&&!!n.\u0275providers}const dc=On({\u0275cmp:On}),vy=On({\u0275dir:On}),co=On({\u0275pipe:On}),Gw=On({\u0275mod:On}),Oo=On({\u0275fac:On}),lh=On({__NG_ELEMENT_ID__:On}),Fp=On({__NG_ENV_ID__:On});function kt(n){return"string"==typeof n?n:null==n?"":String(n)}function Ey(n,e){throw new K(-201,!1)}var Bt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Bt||{});let qw;function Lp(){return qw}function Or(n){const e=qw;return qw=n,e}function hc(n,e,t){const r=yu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Bt.Optional?null:void 0!==e?e:void Ey()}const ch={},Iy="__NG_DI_FLAG__",Bp="ngTempTokenPath",gR=/\n/gm,Kw="__source";let fc;function di(n){const e=fc;return fc=n,e}function Qw(n,e=Bt.Default){if(void 0===fc)throw new K(-203,!1);return null===fc?hc(n,void 0,e):fc.get(n,e&Bt.Optional?null:void 0,e)}function Se(n,e=Bt.Default){return(Lp()||Qw)(At(n),e)}function k(n,e=Bt.Default){return Se(n,uh(e))}function uh(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zp(n){const e=[];for(let t=0;t<n.length;t++){const r=At(n[t]);if(Array.isArray(r)){if(0===r.length)throw new K(900,!1);let i,s=Bt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Cy(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Se(i,s))}else e.push(Se(r))}return e}function dh(n,e){return n[Iy]=e,n.prototype[Iy]=e,n}function Cy(n){return n[Iy]}const Mi=dh(_u("Optional"),8),pc=dh(_u("SkipSelf"),4);function Ba(n,e){return n.hasOwnProperty(Oo)?n[Oo]:null}function mc(n,e){n.forEach(t=>Array.isArray(t)?mc(t,e):e(t))}function Wp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pi(n,e,t){let r=vl(n,e);return r>=0?n[1|r]=t:(r=~r,function Jw(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function fh(n,e){const t=vl(n,e);if(t>=0)return n[1|t]}function vl(n,e){return function Gp(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const uo={},vn=[],ho=new ye(""),t0=new ye("",-1),ph=new ye("");class qp{get(e,t=ch){if(t===ch){const r=new Error(`NullInjectorError: No provider for ${ti(e)}!`);throw r.name="NullInjectorError",r}return t}}var wu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(wu||{}),fo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(fo||{}),da=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(da||{});function _R(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function mh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Kp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function n0(n){return 3===n||4===n||6===n}function Kp(n){return 64===n.charCodeAt(0)}function gh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||r0(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function r0(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Qp="ng-template";function yR(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==_R(e[i+1].toLowerCase(),t,0))return!0}else if(xy(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function xy(n){return 4===n.type&&n.value!==Qp}function Ry(n,e,t){return e===(4!==n.type||t?n.value:Qp)}function vR(n,e,t){let r=4;const i=n.attrs,s=null!==i?function My(n){for(let e=0;e<n.length;e++)if(n0(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Ry(n,l,t)||""===l&&1===e.length){if(Hs(r))return!1;o=!0}}else if(8&r){if(null===i||!yR(n,i,l,t)){if(Hs(r))return!1;o=!0}}else{const c=e[++a],u=bR(l,i,xy(n),t);if(-1===u){if(Hs(r))return!1;o=!0;continue}if(""!==c){let d;if(d=u>s?"":i[u+1].toLowerCase(),2&r&&c!==d){if(Hs(r))return!1;o=!0}}}}else{if(!o&&!Hs(r)&&!Hs(l))return!1;if(o&&Hs(l))continue;o=!1,r=l|1&r}}return Hs(r)||o}function Hs(n){return!(1&n)}function bR(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function IR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Yp(n,e,t=!1){for(let r=0;r<e.length;r++)if(vR(n,e[r],t))return!0;return!1}function Py(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function s0(n,e){return n?":not("+e.trim()+")":e}function ky(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Hs(o)&&(e+=s0(s,i),i=""),r=o,s=s||!Hs(r);t++}return""!==i&&(e+=s0(s,i)),e}function qn(n){return lo(()=>{const e=TR(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||fo.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""};AR(t);const r=n.dependencies;return t.directiveDefs=Oy(r,!1),t.pipeDefs=Oy(r,!0),t.id=function SR(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function CR(n){return Qt(n)||hi(n)}function o0(n){return null!==n}function Ut(n){return lo(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function a0(n,e){if(null==n)return uo;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=da.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==da.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Xe(n){return lo(()=>{const e=TR(n);return AR(e),e})}function ki(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qt(n){return n[dc]||null}function hi(n){return n[vy]||null}function Ni(n){return n[co]||null}function Wi(n,e){const t=n[Gw]||null;if(!t&&!0===e)throw new Error(`Type ${ti(n)} does not have '\u0275mod' property.`);return t}function TR(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||uo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:a0(n.inputs,e),outputs:a0(n.outputs),debugInfo:null}}function AR(n){n.features?.forEach(e=>e(n))}function Oy(n,e){if(!n)return null;const t=e?Ni:CR;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(o0)}function El(n){return{\u0275providers:n}}function DR(...n){return{\u0275providers:l0(0,n),\u0275fromNgModule:!0}}function l0(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return mc(e,o=>{const a=o;Ly(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&xR(i,s),t}function xR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];c0(i,s=>{e(s,r)})}}function Ly(n,e,t,r){if(!(n=At(n)))return!1;let i=null,s=vu(n);const o=!s&&Qt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=vu(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Ly(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{mc(s.imports,u=>{Ly(u,e,t,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&xR(c,e)}if(!a){const c=Ba(i)||(()=>new i);e({provide:i,useFactory:c,deps:vn},i),e({provide:ph,useValue:i,multi:!0},i),e({provide:ho,useValue:()=>Se(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;c0(l,u=>{e(u,c)})}}}return i!==n&&void 0!==n.providers}function c0(n,e){for(let t of n)No(t)&&(t=t.\u0275providers),Array.isArray(t)?c0(t,e):e(t)}const Vy=On({provide:String,useValue:On});function Ua(n){return null!==n&&"object"==typeof n&&Vy in n}function gc(n){return"function"==typeof n}const d0=new ye(""),Zp={},MR={};let _h;function Cu(){return void 0===_h&&(_h=new qp),_h}class Oi{}class ja extends Oi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uy(e,o=>this.processProvider(o)),this.records.set(t0,_c(void 0,this)),i.has("environment")&&this.records.set(Oi,_c(void 0,this));const s=this.records.get(d0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ph,vn,Bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=te(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=di(this),r=Or(void 0);try{return e()}finally{di(t),Or(r)}}get(e,t=ch,r=Bt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Fp))return e[Fp](this);r=uh(r);const s=di(this),o=Or(void 0);try{if(!(r&Bt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function OR(n){return"function"==typeof n||"object"==typeof n&&n instanceof ye}(e)&&yu(e);l=c&&this.injectableDefInScope(c)?_c(Jp(e),Zp):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&Bt.Self?Cu():this.parent).get(e,t=r&Bt.Optional&&t===ch?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Bp]=a[Bp]||[]).unshift(ti(e)),s)throw a;return function Ty(n,e,t,r){const i=n[Bp];throw e[Kw]&&i.unshift(e[Kw]),n.message=function Ay(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ti(e);if(Array.isArray(e))i=e.map(ti).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ti(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(gR,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Bp]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Or(o),di(s)}}resolveInjectorInitializers(){const e=te(null),t=di(this),r=Or(void 0);try{const s=this.get(ho,vn,Bt.Self);for(const o of s)o()}finally{di(t),Or(r),te(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ti(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){let t=gc(e=At(e))?e:At(e&&e.provide);const r=function kR(n){return Ua(n)?_c(void 0,n.useValue):_c(NR(n),Zp)}(e);if(!gc(e)&&!0===e.multi){let i=this.records.get(t);i||(i=_c(void 0,Zp,!0),i.factory=()=>zp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=te(null);try{return t.value===Zp&&(t.value=MR,t.value=t.factory()),"object"==typeof t.value&&t.value&&function By(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=At(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Jp(n){const e=yu(n),t=null!==e?e.factory:Ba(n);if(null!==t)return t;if(n instanceof ye)throw new K(204,!1);if(n instanceof Function)return function PR(n){if(n.length>0)throw new K(204,!1);const t=function fR(n){return n&&(n[uc]||n[Hw])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new K(204,!1)}function NR(n,e,t){let r;if(gc(n)){const i=At(n);return Ba(i)||Jp(i)}if(Ua(n))r=()=>At(n.useValue);else if(function u0(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...zp(n.deps||[]));else if(function Xp(n){return!(!n||!n.useExisting)}(n))r=()=>Se(At(n.useExisting));else{const i=At(n&&(n.useClass||n.provide));if(!function KH(n){return!!n.deps}(n))return Ba(i)||Jp(i);r=()=>new i(...zp(n.deps))}return r}function _c(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Uy(n,e){for(const t of n)Array.isArray(t)?Uy(t,e):t&&No(t)?Uy(t.\u0275providers,e):e(t)}function Is(n,e){n instanceof ja&&n.assertNotDestroyed();const r=di(n),i=Or(void 0);try{return e()}finally{di(r),Or(i)}}function h0(){return void 0!==Lp()||null!=function wy(){return fc}()}function Fr(n){if(!h0())throw new K(-203,!1)}const Yn=0,Ue=1,dt=2,Gr=3,Fo=4,Fi=5,ws=6,yc=7,Xn=8,ni=9,ha=10,Dt=11,Eh=12,Ih=13,Su=14,hr=15,vc=16,Il=17,za=18,Du=19,m0=20,wl=21,wh=22,po=23,ct=25,zy=1,fa=7,Ru=9,Tr=10;var nm=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(nm||{});function qr(n){return Array.isArray(n)&&"object"==typeof n[zy]}function fi(n){return Array.isArray(n)&&!0===n[zy]}function Ch(n){return!!(4&n.flags)}function Ec(n){return n.componentOffset>-1}function Mu(n){return!(1&~n.flags)}function Lo(n){return!!n.template}function Vo(n){return!!(512&n[dt])}class I0{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function w0(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function as(){return lm}function lm(n){return n.type.prototype.ngOnChanges&&(n.setInput=$R),HR}function HR(){const n=C0(this),e=n?.current;if(e){const t=n.previous;if(t===uo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function $R(n,e,t,r,i){const s=this.declaredInputs[r],o=C0(n)||function WR(n,e){return n[cm]=e}(n,{previous:uo,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new I0(c&&c.currentValue,t,l===uo),w0(n,e,i,t)}as.ngInherit=!0;const cm="__ngSimpleChanges__";function C0(n){return n[cm]||null}const mo=function(n,e,t){},um="svg";function fn(n){for(;Array.isArray(n);)n=n[Yn];return n}function Sh(n,e){return fn(e[n])}function Gi(n,e){return fn(e[n.index])}function Pu(n,e){return n.data[e]}function Ic(n,e){return n[e]}function Cs(n,e){const t=e[n];return qr(t)?t:t[Yn]}function Gy(n){return!(128&~n[dt])}function go(n,e){return null==e?null:n[e]}function hm(n){n[Il]=0}function A0(n){1024&n[dt]||(n[dt]|=1024,Gy(n)&&wc(n))}function Dh(n){return!!(9216&n[dt]||n[po]?.dirty)}function qy(n){n[ha].changeDetectionScheduler?.notify(8),64&n[dt]&&(n[dt]|=1024),Dh(n)&&wc(n)}function wc(n){n[ha].changeDetectionScheduler?.notify(0);let e=Ha(n);for(;null!==e&&!(8192&e[dt])&&(e[dt]|=8192,Gy(e));)e=Ha(e)}function fm(n,e){if(!(256&~n[dt]))throw new K(911,!1);null===n[wl]&&(n[wl]=[]),n[wl].push(e)}function Ha(n){const e=n[Gr];return fi(e)?e[Gr]:e}const xt={lFrame:fe(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let D0=!1;function x0(){return xt.bindingsEnabled}function Cc(){return null!==xt.skipHydrationRootTNode}function Ie(){return xt.lFrame.lView}function Gt(){return xt.lFrame.tView}function fr(n){return xt.lFrame.contextLView=n,n[Xn]}function pr(n){return xt.lFrame.contextLView=null,n}function Fn(){let n=mm();for(;null!==n&&64===n.type;)n=n.parent;return n}function mm(){return xt.lFrame.currentTNode}function _o(n,e){const t=xt.lFrame;t.currentTNode=n,t.isParent=e}function gm(){return xt.lFrame.isParent}function Rh(){xt.lFrame.isParent=!1}function Mh(){return D0}function Zy(n){D0=n}function qi(){const n=xt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Bo(){return xt.lFrame.bindingIndex++}function Wa(n){const e=xt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function tM(n,e){const t=xt.lFrame;t.bindingIndex=t.bindingRootIndex=n,ev(e)}function ev(n){xt.lFrame.currentDirectiveIndex=n}function h(){return xt.lFrame.currentQueryIndex}function f(n){xt.lFrame.currentQueryIndex=n}function _(n){const e=n[Ue];return 2===e.type?e.declTNode:1===e.type?n[Fi]:null}function w(n,e,t){if(t&Bt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Bt.Host||(i=_(s),null===i||(s=s[Su],10&i.type))););if(null===i)return!1;e=i,n=s}const r=xt.lFrame=Y();return r.currentTNode=e,r.lView=n,!0}function R(n){const e=Y(),t=n[Ue];xt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Y(){const n=xt.lFrame,e=null===n?null:n.child;return null===e?fe(n):e}function fe(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Re(){const n=xt.lFrame;return xt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const tt=Re;function ut(){const n=Re();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function xn(){return xt.lFrame.selectedIndex}function Ts(n){xt.lFrame.selectedIndex=n}function Ln(){const n=xt.lFrame;return Pu(n.tView,n.selectedIndex)}function Uo(){xt.lFrame.currentNamespace=um}function Ph(){!function N0(){xt.lFrame.currentNamespace=null}()}let nv=!0;function ku(){return nv}function yo(n){nv=n}function ym(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Nu(n,e,t){i4(n,e,3,t)}function vm(n,e,t,r){(3&n[dt])===t&&i4(n,e,t,r)}function rM(n,e){let t=n[dt];(3&t)===e&&(t&=16383,t+=1,n[dt]=t)}function i4(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Il]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Il]+=65536),(a<s||-1==s)&&(lle(n,t,e,l),n[Il]=(4294901760&n[Il])+l+2),l++}function s4(n,e){mo(4,n,e);const t=te(null);try{e.call(n)}finally{te(t),mo(5,n,e)}}function lle(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[dt]>>14<n[Il]>>16&&(3&n[dt])===e&&(n[dt]+=16384,s4(a,s)):s4(a,s)}const bm=-1;class rv{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const sM={};class kh{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=uh(r);const i=this.injector.get(e,sM,r);return i!==sM||t===sM?i:this.parentInjector.get(e,t,r)}}function oM(n){return n!==bm}function iv(n){return 32767&n}function sv(n,e){let t=function fle(n){return n>>16}(n),r=e;for(;t>0;)r=r[Su],t--;return r}let aM=!0;function F0(n){const e=aM;return aM=n,e}const a4=255,l4=5;let mle=0;const Cl={};function L0(n,e){const t=c4(n,e);if(-1!==t)return t;const r=e[Ue];r.firstCreatePass&&(n.injectorIndex=e.length,lM(r.data,n),lM(e,null),lM(r.blueprint,null));const i=V0(n,e),s=n.injectorIndex;if(oM(i)){const o=iv(i),a=sv(i,e),l=a[Ue].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function lM(n,e){n.push(0,0,0,0,0,0,0,0,e)}function c4(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function V0(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=g4(i),null===r)return bm;if(t++,i=i[Su],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return bm}function cM(n,e,t){!function gle(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(lh)&&(r=t[lh]),null==r&&(r=t[lh]=mle++);const i=r&a4;e.data[n+(i>>l4)]|=1<<i}(n,e,t)}function u4(n,e,t){if(t&Bt.Optional||void 0!==n)return n;Ey()}function d4(n,e,t,r){if(t&Bt.Optional&&void 0===r&&(r=null),!(t&(Bt.Self|Bt.Host))){const i=n[ni],s=Or(void 0);try{return i?i.get(e,r,t&Bt.Optional):hc(e,r,t&Bt.Optional)}finally{Or(s)}}return u4(r,0,t)}function h4(n,e,t,r=Bt.Default,i){if(null!==n){if(2048&e[dt]&&!(r&Bt.Self)){const o=function Ele(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[dt]&&!(512&o[dt]);){const a=f4(s,o,t,r|Bt.Self,Cl);if(a!==Cl)return a;let l=s.parent;if(!l){const c=o[m0];if(c){const u=c.get(t,Cl,r);if(u!==Cl)return u}l=g4(o),o=o[Su]}s=l}return i}(n,e,t,r,Cl);if(o!==Cl)return o}const s=f4(n,e,t,r,Cl);if(s!==Cl)return s}return d4(e,t,r,i)}function f4(n,e,t,r,i){const s=function vle(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(lh)?n[lh]:void 0;return"number"==typeof e?e>=0?e&a4:ble:e}(t);if("function"==typeof s){if(!w(e,n,r))return r&Bt.Host?u4(i,0,r):d4(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Bt.Optional)return o;Ey()}finally{tt()}}else if("number"==typeof s){let o=null,a=c4(n,e),l=bm,c=r&Bt.Host?e[hr][Fi]:null;for((-1===a||r&Bt.SkipSelf)&&(l=-1===a?V0(n,e):e[a+8],l!==bm&&m4(r,!1)?(o=e[Ue],a=iv(l),e=sv(l,e)):a=-1);-1!==a;){const u=e[Ue];if(p4(s,a,u.data)){const d=yle(a,e,t,o,r,c);if(d!==Cl)return d}l=e[a+8],l!==bm&&m4(r,e[Ue].data[a+8]===c)&&p4(s,a,e)?(o=u,a=iv(l),e=sv(l,e)):a=-1}}return i}function yle(n,e,t,r,i,s){const o=e[Ue],a=o.data[n+8],u=B0(a,o,t,null==r?Ec(a)&&aM:r!=o&&!!(3&a.type),i&Bt.Host&&s===a);return null!==u?Nh(e,o,u,a):Cl}function B0(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,m=i?a+u:n.directiveEnd;for(let y=r?a:a+u;y<m;y++){const b=o[y];if(y<l&&t===b||y>=l&&b.type===t)return y}if(i){const y=o[l];if(y&&Lo(y)&&y.type===t)return l}return null}function Nh(n,e,t,r){let i=n[t];const s=e.data;if(function cle(n){return n instanceof rv}(i)){const o=i;o.resolving&&function by(n,e){throw e&&e.join(" > "),new K(-200,n)}(function yn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():kt(n)}(s[t]));const a=F0(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Or(o.injectImpl):null;w(n,r,Bt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function O0(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=lm(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Or(c),F0(a),o.resolving=!1,tt()}}return i}function p4(n,e,t){return!!(t[e+(n>>l4)]&1<<n)}function m4(n,e){return!(n&Bt.Self||n&Bt.Host&&e)}class Li{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return h4(this._tNode,this._lView,e,uh(r),t)}}function ble(){return new Li(Fn(),Ie())}function Kr(n){return lo(()=>{const e=n.prototype.constructor,t=e[Oo]||uM(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Oo]||uM(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function uM(n){return Mp(n)?()=>{const e=uM(At(n));return e&&e()}:Ba(n)}function g4(n){const e=n[Ue],t=e.type;return 2===t?e.declTNode:1===t?n[Fi]:null}function E4(n,e=null,t=null,r){const i=I4(n,e,t,r);return i.resolveInjectorInitializers(),i}function I4(n,e=null,t=null,r,i=new Set){const s=[t||vn,DR(n)];return r=r||("object"==typeof n?void 0:ti(n)),new ja(s,e||Cu(),r||null,i)}class Sn{static{this.THROW_IF_NOT_FOUND=ch}static{this.NULL=new qp}static create(e,t){if(Array.isArray(e))return E4({name:""},t,e,"");{const r=e.name??"";return E4({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Ne({token:Sn,providedIn:"any",factory:()=>Se(t0)})}static{this.__NG_ELEMENT_ID__=-1}}class xle{constructor(e){this.attributeName=e,this.__NG_ELEMENT_ID__=()=>function ov(n){return function _le(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(n0(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Fn(),n)}(this.attributeName)}toString(){return`HostAttributeToken ${this.attributeName}`}}new ye("").__NG_ELEMENT_ID__=n=>{const e=Fn();if(null===e)throw new K(204,!1);if(2&e.type)return e.value;if(n&Bt.Optional)return null;throw new K(204,!1)};function hM(n){return n.ngOriginalError}const C4=!0;let av=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ple}static{this.__NG_ENV_ID__=t=>t}}return n})();class Mle extends av{constructor(e){super(),this._lView=e}onDestroy(e){return fm(this._lView,e),()=>function Ky(n,e){if(null===n[wl])return;const t=n[wl].indexOf(e);-1!==t&&n[wl].splice(t,1)}(this._lView,e)}}function Ple(){return new Mle(Ie())}let Tc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();const un=class kle extends E{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,h0()&&(this.destroyRef=k(av,{optional:!0})??void 0,this.pendingTasks=k(Tc,{optional:!0})??void 0)}emit(e){const t=te(null);try{super.next(e)}finally{te(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof St&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function j0(...n){}function T4(n){let e,t;function r(){n=j0;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function A4(n){return queueMicrotask(()=>n()),()=>{n=j0}}const fM="isAngularZone",z0=fM+"_ID";let Nle=0;class _t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new un(!1),this.onMicrotaskEmpty=new un(!1),this.onStable=new un(!1),this.onError=new un(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=C4}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function Lle(n){const e=()=>{!function Fle(n){function e(){T4(()=>{n.callbackScheduled=!1,mM(n),n.isCheckStableRunning=!0,pM(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),mM(n))}(n)},t=Nle++;n._inner=n._inner.fork({name:"angular",properties:{[fM]:!0,[z0]:t,[z0+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(function Vle(n){return x4(n,"__ignore_ng_zone__")}(l))return r.invokeTask(s,o,a,l);try{return S4(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),D4(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return S4(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function Ble(n){return x4(n,"__scheduler_tick__")}(l)&&e(),D4(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,mM(n),pM(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(fM)}static assertInAngularZone(){if(!_t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(_t.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ole,j0,j0);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Ole={};function pM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function mM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function S4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function D4(n){n._nesting--,pM(n)}class gM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new un,this.onMicrotaskEmpty=new un,this.onStable=new un,this.onError=new un}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function x4(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class jo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&hM(e);for(;t&&hM(t);)t=hM(t);return t||null}}const jle=new ye("",{providedIn:"root",factory:()=>{const n=k(_t),e=k(jo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function zle(){return wm(Fn(),Ie())}function wm(n,e){return new Vn(Gi(n,e))}let Vn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=zle}}return n})();function M4(n){return n instanceof Vn?n.nativeElement:n}function Hle(){return this._results[Symbol.iterator]()}class Oh{get changes(){return this._changes??=new un}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Oh.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Hle)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function $i(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function $p(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function cv(n){return!(128&~n.flags)}const yM=new Map;let Wle=0;function vM(n){yM.delete(n[Du])}const H0="__ngContext__";function As(n,e){qr(e)?(n[H0]=e[Du],function qle(n){yM.set(n[Du],n)}(e)):n[H0]=e}function j4(n){return H4(n[Eh])}function z4(n){return H4(n[Fo])}function H4(n){for(;null!==n&&!fi(n);)n=n[Fo];return n}let EM;const Fh=new ye("",{providedIn:"root",factory:()=>uce}),uce="ng",X4=new ye(""),$s=new ye("",{providedIn:"platform",factory:()=>"unknown"}),Tl=new ye(""),IM=new ye("",{providedIn:"root",factory:()=>function Ou(){if(void 0!==EM)return EM;if(typeof document<"u")return document;throw new K(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Z4=()=>null;function xM(n,e,t=!1){return Z4(n,e,t)}const o$=new ye("",{providedIn:"root",factory:()=>!1});let X0;function Sm(n){return function NM(){if(void 0===X0&&(X0=null,Wn.trustedTypes))try{X0=Wn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return X0}()?.createHTML(n)||n}class Vh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wr})`}}class Cce extends Vh{getTypeName(){return"HTML"}}class Tce extends Vh{getTypeName(){return"Style"}}class Ace extends Vh{getTypeName(){return"Script"}}class Sce extends Vh{getTypeName(){return"URL"}}class Dce extends Vh{getTypeName(){return"ResourceURL"}}function zo(n){return n instanceof Vh?n.changingThisBreaksApplicationSecurity:n}function Al(n,e){const t=function xce(n){return n instanceof Vh&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wr})`)}return t===e}class Oce{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Sm(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}}class Fce{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Sm(e),t}}const Vce=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function J0(n){return(n=String(n)).match(Vce)?n:"unsafe:"+n}function Ac(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function gv(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const f$=Ac("area,br,col,hr,img,wbr"),p$=Ac("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m$=Ac("rp,rt"),FM=gv(f$,gv(p$,Ac("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gv(m$,Ac("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gv(m$,p$)),LM=Ac("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),g$=gv(LM,Ac("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ac("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Bce=Ac("script,style,template");class Uce{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=Hce(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=zce(t);if(s){t=s;break}t=i.pop()}return this.buf.join("")}startElement(e){const t=_$(e).toLowerCase();if(!FM.hasOwnProperty(t))return this.sanitizedSomething=!0,!Bce.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!g$.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;LM[a]&&(l=J0(l)),this.buf.push(" ",o,'="',v$(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=_$(e).toLowerCase();FM.hasOwnProperty(t)&&!f$.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(v$(e))}}function zce(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw y$(e);return e}function Hce(n){const e=n.firstChild;if(e&&function jce(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw y$(e);return e}function _$(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function y$(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const $ce=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wce=/([^\#-~ |!])/g;function v$(n){return n.replace(/&/g,"&amp;").replace($ce,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Wce,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let eC;function b$(n,e){let t=null;try{eC=eC||function h$(n){const e=new Fce(n);return function Lce(){try{return!!(new window.DOMParser).parseFromString(Sm(""),"text/html")}catch{return!1}}()?new Oce(e):e}(n);let r=e?String(e):"";t=eC.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=eC.getInertBodyElement(r)}while(r!==s);return Sm((new Uce).sanitizeChildren(VM(t)||t))}finally{if(t){const r=VM(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function VM(n){return"content"in n&&function Gce(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ls=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ls||{});function Ws(n){const e=function _v(){const n=Ie();return n&&n[ha].sanitizer}();return e?e.sanitize(ls.URL,n)||"":Al(n,"URL")?zo(n):J0(kt(n))}const Jce=/^>|^->|<!--|-->|--!>|<!-$/g,eue=/(<|>)/g,tue="\u200b$1\u200b";function Ho(n){return n instanceof Function?n():n}function $o(n){return"browser"===(n??k(Sn)).get($s)}var Fu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Fu||{});let jM;function zM(n,e){return jM(n,e)}function xm(n,e,t,r,i){if(null!=r){let s,o=!1;fi(r)?s=r:qr(r)&&(o=!0,r=r[Yn]);const a=fn(r);0===n&&null!==t?null==i?O$(e,t,a):Bh(e,t,a,i||null,!0):1===n&&null!==t?Bh(e,t,a,i||null,!0):2===n?function vv(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Eue(n,e,t,r,i){const s=t[fa];s!==fn(t)&&xm(e,n,r,s,i);for(let a=Tr;a<t.length;a++){const l=t[a];oC(l[Ue],l,n,e,r,s)}}(e,n,s,t,i)}}function $M(n,e){return n.createComment(function w$(n){return n.replace(Jce,e=>e.replace(eue,tue))}(e))}function rC(n,e,t){return n.createElement(e,t)}function P$(n,e){e[ha].changeDetectionScheduler?.notify(9),oC(n,e,e[Dt],2,null,null)}function k$(n,e){const t=n[Ru],r=e[Gr];(qr(r)||e[hr]!==r[Gr][hr])&&(n[dt]|=nm.HasTransplantedViews),null===t?n[Ru]=[e]:t.push(e)}function WM(n,e){const t=n[Ru],r=t.indexOf(e);t.splice(r,1)}function yv(n,e){if(n.length<=Tr)return;const t=Tr+e,r=n[t];if(r){const i=r[vc];null!==i&&i!==n&&WM(i,r),e>0&&(n[t-1][Fo]=r[Fo]);const s=hh(n,Tr+e);!function fue(n,e){P$(n,e),e[Yn]=null,e[Fi]=null}(r[Ue],r);const o=s[za];null!==o&&o.detachView(s[Ue]),r[Gr]=null,r[Fo]=null,r[dt]&=-129}return r}function iC(n,e){if(!(256&e[dt])){const t=e[Dt];t.destroyNode&&oC(n,e,t,3,null,null),function mue(n){let e=n[Eh];if(!e)return GM(n[Ue],n);for(;e;){let t=null;if(qr(e))t=e[Eh];else{const r=e[Tr];r&&(t=r)}if(!t){for(;e&&!e[Fo]&&e!==n;)qr(e)&&GM(e[Ue],e),e=e[Gr];null===e&&(e=n),qr(e)&&GM(e[Ue],e),t=e&&e[Fo]}e=t}}(e)}}function GM(n,e){if(256&e[dt])return;const t=te(null);try{e[dt]&=-129,e[dt]|=256,e[po]&&Zt(e[po]),function yue(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof rv)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];mo(4,a,l);try{l.call(a)}finally{mo(5,a,l)}}else{mo(4,i,s);try{s.call(i)}finally{mo(5,i,s)}}}}}(n,e),function _ue(n,e){const t=n.cleanup,r=e[yc];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[yc]=null);const i=e[wl];if(null!==i){e[wl]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Ue].type&&e[Dt].destroy();const r=e[vc];if(null!==r&&fi(e[Gr])){r!==e[Gr]&&WM(r,e);const i=e[za];null!==i&&i.detachView(n)}vM(e)}finally{te(t)}}function qM(n,e,t){return function N$(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[Yn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===fo.None||s===fo.Emulated)return null}return Gi(r,t)}}(n,e.parent,t)}function Bh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function O$(n,e,t){n.appendChild(e,t)}function F$(n,e,t,r,i){null!==r?Bh(n,e,t,r,i):O$(n,e,t)}function KM(n,e){return n.parentNode(e)}function L$(n,e,t){return B$(n,e,t)}let QM,B$=function V$(n,e,t){return 40&n.type?Gi(n,t):null};function sC(n,e,t,r){const i=qM(n,r,e),s=e[Dt],a=L$(r.parent||e[Fi],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)F$(s,i,t[l],a,!1);else F$(s,i,t,a,!1);void 0!==QM&&QM(s,r,e,t,i)}function Uh(n,e){if(null!==e){const t=e.type;if(3&t)return Gi(e,n);if(4&t)return YM(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Uh(n,r);{const i=n[e.index];return fi(i)?YM(-1,i):fn(i)}}if(128&t)return Uh(n,e.next);if(32&t)return zM(e,n)()||fn(n[e.index]);{const r=j$(n,e);return null!==r?Array.isArray(r)?r[0]:Uh(Ha(n[hr]),r):Uh(n,e.next)}}return null}function j$(n,e){return null!==e?n[hr][Fi].projection[e.projection]:null}function YM(n,e){const t=Tr+n+1;if(t<e.length){const r=e[t],i=r[Ue].firstChild;if(null!==i)return Uh(r,i)}return e[fa]}function XM(n,e,t,r,i,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],l=t.type;if(o&&0===e&&(a&&As(fn(a),r),t.flags|=2),32&~t.flags)if(8&l)XM(n,e,t.child,r,i,s,!1),xm(e,n,i,a,s);else if(32&l){const c=zM(t,r);let u;for(;u=c();)xm(e,n,i,u,s);xm(e,n,i,a,s)}else 16&l?H$(n,e,r,t,i,s):xm(e,n,i,a,s);t=o?t.projectionNext:t.next}}function oC(n,e,t,r,i,s){XM(t,r,n.firstChild,e,i,s,!1)}function H$(n,e,t,r,i,s){const o=t[hr],l=o[Fi].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)xm(e,n,i,l[c],s);else{let c=l;const u=o[Gr];cv(r)&&(c.flags|=128),XM(n,e,c,u,i,s,!0)}}function $$(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function W$(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&mh(n,e,r),null!==i&&$$(n,e,i),null!==s&&function wue(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Ft={};function xe(n=1){G$(Gt(),Ie(),xn()+n,!1)}function G$(n,e,t,r){if(!r)if(3&~e[dt]){const s=n.preOrderHooks;null!==s&&vm(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Nu(e,s,t)}Ts(t)}function Me(n,e=Bt.Default){const t=Ie();return null===t?Se(n,e):h4(Fn(),t,At(n),e)}function K$(n,e,t,r,i,s){const o=te(null);try{let a=null;i&da.SignalBased&&(a=e[r][ce]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&da.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):w0(e,a,r,s)}finally{te(o)}}function aC(n,e,t,r,i,s,o,a,l,c,u){const d=e.blueprint.slice();return d[Yn]=i,d[dt]=204|r,(null!==c||n&&2048&n[dt])&&(d[dt]|=2048),hm(d),d[Gr]=d[Su]=n,d[Xn]=t,d[ha]=o||n&&n[ha],d[Dt]=a||n&&n[Dt],d[ni]=l||n&&n[ni]||null,d[Fi]=s,d[Du]=function Gle(){return Wle++}(),d[ws]=u,d[m0]=c,d[hr]=2==e.type?n[hr]:d,d}function jh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function ZM(n,e,t,r,i){const s=mm(),o=gm(),l=n.data[e]=function Mue(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Cc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function eM(){return xt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function xh(){const n=xt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _o(s,!0),s}function bv(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Q$(n,e,t,r,i){const s=xn(),o=2&r;try{Ts(-1),o&&e.length>ct&&G$(n,e,ct,!1),mo(o?2:0,i),t(r,i)}finally{Ts(s),mo(o?3:1,i)}}function JM(n,e,t){if(Ch(e)){const r=te(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{te(r)}}}function eP(n,e,t){x0()&&(function Vue(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ec(t)&&function Wue(n,e,t){const r=Gi(e,n),i=Y$(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=lC(n,aC(n,i,null,o,r,e,null,n[ha].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||L0(t,e),As(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Nh(e,n,a,t);As(c,e),null!==o&&Gue(0,a-i,c,l,0,o),Lo(l)&&(Cs(t.index,e)[Xn]=Nh(e,n,a,t))}}(n,e,t,Gi(t,e)),!(64&~t.flags)&&tW(n,e,t))}function tP(n,e,t=Gi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function Y$(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=nP(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function nP(n,e,t,r,i,s,o,a,l,c,u){const d=ct+r,m=d+i,y=function Tue(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ft);return t}(d,m),b="function"==typeof c?c():c;return y[Ue]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:u}}let X$=()=>null;function Z$(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,l=da.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==i){if(!i.hasOwnProperty(s))continue;c=i[s]}0===n?J$(r,t,c,a,l):J$(r,t,c,a)}return r}function J$(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function bo(n,e,t,r,i,s,o,a){const l=Gi(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(aP(n,t,u,r,i),Ec(e)&&function Nue(n,e){const t=Cs(e,n);16&t[dt]||(t[dt]|=64)}(t,e.index)):3&e.type&&(r=function kue(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function rP(n,e,t,r){if(x0()){const i=null===r?null:{"":-1},s=function Uue(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Yp(e,o.selectors,!1))if(r||(r=[]),Lo(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),iP(n,e,a.length)}else r.unshift(o),iP(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&eW(n,e,t,o,i,a),i&&function jue(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new K(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=gh(t.mergedAttrs,t.attrs)}function eW(n,e,t,r,i,s){for(let c=0;c<r.length;c++)cM(L0(t,e),n,r[c].type);!function Hue(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=bv(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=gh(t.mergedAttrs,u.hostAttrs),$ue(n,t,e,l,u),zue(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function Pue(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const d=s[u],m=t?t.get(d):null,b=m?m.outputs:null;l=Z$(0,d.inputs,u,l,m?m.inputs:null),c=Z$(1,d.outputs,u,c,b);const T=null===l||null===o||xy(e)?null:que(l,u,o);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function tW(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function nM(){return xt.lFrame.currentDirectiveIndex}();try{Ts(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];ev(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Bue(l,c)}}finally{Ts(-1),ev(o)}}function Bue(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function iP(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function zue(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Lo(e)&&(t[""]=n)}}function $ue(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ba(i.type)),o=new rv(s,Lo(i),Me);n.blueprint[r]=o,t[r]=o,function Fue(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Lue(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,bv(n,t,i.hostVars,Ft),i)}function Sl(n,e,t,r,i,s){const o=Gi(n,e);!function sP(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?kt(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Dt],o,s,n.value,t,r,i)}function Gue(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)K$(r,t,o[a++],o[a++],o[a++],o[a++])}function que(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function nW(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function rW(n,e){const t=n.contentQueries;if(null!==t){const r=te(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];f(t[i]),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function lC(n,e){return n[Eh]?n[Ih][Fo]=e:n[Eh]=e,n[Ih]=e,e}function oP(n,e,t){f(0);const r=te(null);try{e(n,t)}finally{te(r)}}function iW(n){return n[yc]??=[]}function sW(n){return n.cleanup??=[]}function cC(n,e){const t=n[ni],r=t?t.get(jo,null):null;r&&r.handleError(e)}function aP(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=t[s++];K$(n.data[o],e[o],r,a,l,i)}}function Kue(n,e){const t=Cs(e,n),r=t[Ue];!function Que(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Yn];null!==i&&null===t[ws]&&(t[ws]=xM(i,t[ni])),lP(r,t,t[Xn])}function lP(n,e,t){R(e);try{const r=n.viewQuery;null!==r&&oP(1,r,t);const i=n.template;null!==i&&Q$(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[za]?.finishViewCreation(n),n.staticContentQueries&&rW(n,e),n.staticViewQueries&&oP(2,n.viewQuery,t);const s=n.components;null!==s&&function Yue(n,e){for(let t=0;t<e.length;t++)Kue(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[dt]&=-5,ut()}}function Rm(n,e,t,r){const i=te(null);try{const s=e.tView,l=aC(n,s,t,4096&n[dt]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[vc]=n[e.index];const u=n[za];return null!==u&&(l[za]=u.createEmbeddedView(s)),lP(s,l,t),l}finally{te(i)}}function zh(n,e){return!e||null===e.firstChild||cv(n)}function Mm(n,e,t,r=!0){const i=e[Ue];if(function gue(n,e,t,r){const i=Tr+r,s=t.length;r>0&&(t[i-1][Fo]=e),r<s-Tr?(e[Fo]=t[i],Wp(t,Tr+r,e)):(t.push(e),e[Fo]=null),e[Gr]=t;const o=e[vc];null!==o&&t!==o&&k$(o,e);const a=e[za];null!==a&&a.insertView(n),qy(e),e[dt]|=128}(i,e,n,t),r){const o=YM(t,n),a=e[Dt],l=KM(a,n[fa]);null!==l&&function pue(n,e,t,r,i,s){r[Yn]=i,r[Fi]=e,oC(n,r,t,1,i,s)}(i,n[Fi],a,e,l,o)}const s=e[ws];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function Ev(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&r.push(fn(s)),fi(s)&&lW(s,r);const o=t.type;if(8&o)Ev(n,e,t.child,r);else if(32&o){const a=zM(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=j$(e,t);if(Array.isArray(a))r.push(...a);else{const l=Ha(e[hr]);Ev(l[Ue],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function lW(n,e){for(let t=Tr;t<n.length;t++){const r=n[t],i=r[Ue].firstChild;null!==i&&Ev(r[Ue],r,i,e)}n[fa]!==n[Yn]&&e.push(n[fa])}let cW=[];const ede={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wc(n.lView)},consumerOnSignalRead(){this.lView[po]=this}},nde={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ha(n.lView);for(;e&&!uW(e[Ue]);)e=Ha(e);e&&A0(e)},consumerOnSignalRead(){this.lView[po]=this}};function uW(n){return 2!==n.type}const rde=100;function uC(n,e=!0,t=0){const r=n[ha],i=r.rendererFactory;i.begin?.();try{!function ide(n,e){const t=Mh();try{Zy(!0),uP(n,e);let r=0;for(;Dh(n);){if(r===rde)throw new K(103,!1);r++,uP(n,1)}}finally{Zy(t)}}(n,t)}catch(o){throw e&&cC(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function sde(n,e,t,r){const i=e[dt];if(!(256&~i))return;e[ha].inlineEffectRunner?.flush(),R(e);let a=!0,l=null,c=null;uW(n)?(c=function Xue(n){return n[po]??function Zue(n){const e=cW.pop()??Object.create(ede);return e.lView=n,e}(n)}(e),l=Ze(c)):null===function we(){return Z}()?(a=!1,c=function tde(n){const e=n[po]??Object.create(nde);return e.lView=n,e}(e),l=Ze(c)):e[po]&&(Zt(e[po]),e[po]=null);try{hm(e),function k0(n){return xt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Q$(n,e,t,2,r);const u=!(3&~i);if(u){const y=n.preOrderCheckHooks;null!==y&&Nu(e,y,null)}else{const y=n.preOrderHooks;null!==y&&vm(e,y,0,null),rM(e,0)}if(function ode(n){for(let e=j4(n);null!==e;e=z4(e)){if(!(e[dt]&nm.HasTransplantedViews))continue;const t=e[Ru];for(let r=0;r<t.length;r++)A0(t[r])}}(e),hW(e,0),null!==n.contentQueries&&rW(n,e),u){const y=n.contentCheckHooks;null!==y&&Nu(e,y)}else{const y=n.contentHooks;null!==y&&vm(e,y,1),rM(e,1)}!function Cue(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ts(~i);else{const s=i,o=t[++r],a=t[++r];tM(o,s),a(2,e[s])}}}finally{Ts(-1)}}(n,e);const d=n.components;null!==d&&pW(e,d,0);const m=n.viewQuery;if(null!==m&&oP(2,m,r),u){const y=n.viewCheckHooks;null!==y&&Nu(e,y)}else{const y=n.viewHooks;null!==y&&vm(e,y,2),rM(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[wh]){for(const y of e[wh])y();e[wh]=null}e[dt]&=-73}catch(u){throw wc(e),u}finally{null!==c&&(Je(c,l),a&&function Jue(n){n.lView[po]!==n&&(n.lView=null,cW.push(n))}(c)),ut()}}function hW(n,e){for(let t=j4(n);null!==t;t=z4(t))for(let r=Tr;r<t.length;r++)fW(t[r],e)}function ade(n,e,t){fW(Cs(e,n),t)}function fW(n,e){Gy(n)&&uP(n,e)}function uP(n,e){const r=n[Ue],i=n[dt],s=n[po];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!Wt(s)),o||=!1,s&&(s.dirty=!1),n[dt]&=-9217,o)sde(r,n,r.template,n[Xn]);else if(8192&i){hW(n,1);const a=r.components;null!==a&&pW(n,a,1)}}function pW(n,e,t){for(let r=0;r<e.length;r++)ade(n,e[r],t)}function Iv(n,e){const t=Mh()?64:1088;for(n[ha].changeDetectionScheduler?.notify(e);n;){n[dt]|=t;const r=Ha(n);if(Vo(n)&&!r)return n;n=r}return null}class wv{get rootNodes(){const e=this._lView,t=e[Ue];return Ev(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xn]}set context(e){this._lView[Xn]=e}get destroyed(){return!(256&~this._lView[dt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Gr];if(fi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(yv(e,r),hh(t,r))}this._attachedToViewContainer=!1}iC(this._lView[Ue],this._lView)}onDestroy(e){fm(this._lView,e)}markForCheck(){Iv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[dt]&=-129}reattach(){qy(this._lView),this._lView[dt]|=128}detectChanges(){this._lView[dt]|=1024,uC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Vo(this._lView),t=this._lView[vc];null!==t&&!e&&WM(t,this._lView),P$(this._lView[Ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;const t=Vo(this._lView),r=this._lView[vc];null!==r&&!t&&k$(r,this._lView),qy(this._lView)}}let pa=(()=>{class n{static{this.__NG_ELEMENT_ID__=ude}}return n})();const lde=pa,cde=class extends lde{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Rm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wv(i)}};function ude(){return dC(Fn(),Ie())}function dC(n,e){return 4&n.type?new cde(e,n,wm(n,e)):null}let OW=()=>null;function $h(n,e){return OW(n,e)}class km{}const Mv=new ye("",{providedIn:"root",factory:()=>!1}),FW=new ye(""),EP=new ye("");class nhe{}class LW{}class ihe{resolveComponentFactory(e){throw function rhe(n){const e=Error(`No component factory found for ${ti(n)}.`);return e.ngComponent=n,e}(e)}}class _C{static{this.NULL=new ihe}}class Wh{}let Ga=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function she(){const n=Ie(),t=Cs(Fn().index,n);return(qr(t)?t:n)[Dt]}()}}return n})(),ohe=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>null})}}return n})();function vC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=cc(i,a):2==s&&(r=cc(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class jW extends _C{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Qt(e);return new Nv(t,this.ngModule)}}function zW(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;t.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:da.None)&da.SignalBased)}:{propName:o,templateName:r})}return t}class Nv extends LW{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=zW(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return zW(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function wR(n){return n.map(ky).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=te(null);try{let o=(i=i||this.ngModule)instanceof Oi?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new kh(e,o):e,l=a.get(Wh,null);if(null===l)throw new K(407,!1);const d={rendererFactory:l,sanitizer:a.get(ohe,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(km,null)},m=l.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?function Aue(n,e,t,r){const s=r.get(o$,!1)||t===fo.ShadowDom,o=n.selectRootElement(e,s);return function Sue(n){X$(n)}(o),o}(m,r,this.componentDef.encapsulation,a):rC(m,y,function che(n){const e=n.toLowerCase();return"svg"===e?um:"math"===e?"math":null}(y));let T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let M=null;null!==b&&(M=xM(b,a,!0));const B=nP(0,null,null,1,0,null,null,null,null,null,null),V=aC(null,B,null,T,null,null,d,m,a,null,M);R(V);let Q,be,Be=null;try{const je=this.componentDef;let H,L=null;je.findHostDirectiveDefs?(H=[],L=new Map,je.findHostDirectiveDefs(je,H,L),H.push(je)):H=[je];const W=function dhe(n,e){const t=n[Ue],r=ct;return n[r]=e,jh(t,r,2,"#host",null)}(V,b);Be=function hhe(n,e,t,r,i,s,o){const a=i[Ue];!function fhe(n,e,t,r){for(const i of n)e.mergedAttrs=gh(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(vC(e,e.mergedAttrs,!0),null!==t&&W$(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=xM(e,i[ni]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=aC(i,Y$(t),null,u,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&iP(a,n,r.length-1),lC(i,d),i[n.index]=d}(W,b,je,H,V,d,m),be=Pu(B,ct),b&&function mhe(n,e,t,r){if(r)mh(n,t,["ng-version","18.2.13"]);else{const{attrs:i,classes:s}=function Ny(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Hs(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&mh(n,t,i),s&&s.length>0&&$$(n,t,s.join(" "))}}(m,je,b,r),void 0!==t&&function ghe(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(be,this.ngContentSelectors,t),Q=function phe(n,e,t,r,i,s){const o=Fn(),a=i[Ue],l=Gi(o,i);eW(a,i,o,t,null,r);for(let u=0;u<t.length;u++)As(Nh(i,a,o.directiveStart+u,o),i);tW(a,i,o),l&&As(l,i);const c=Nh(i,a,o.directiveStart+o.componentOffset,o);if(n[Xn]=i[Xn]=c,null!==s)for(const u of s)u(c,e);return JM(a,o,i),c}(Be,je,H,L,V,[_he]),lP(B,V,null)}catch(je){throw null!==Be&&vM(Be),vM(V),je}finally{ut()}return new uhe(this.componentType,Q,wm(be,V),V,be)}finally{te(s)}}}class uhe extends nhe{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new wv(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;aP(s[Ue],s,i,e,t),this.previousInputValues.set(e,t),Iv(Cs(this._tNode.index,s),1)}}get injector(){return new Li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function _he(){const n=Fn();ym(Ie()[Ue],n)}let Eo=(()=>{class n{static{this.__NG_ELEMENT_ID__=yhe}}return n})();function yhe(){return WW(Fn(),Ie())}const vhe=Eo,HW=class extends vhe{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return wm(this._hostTNode,this._hostLView)}get injector(){return new Li(this._hostTNode,this._hostLView)}get parentInjector(){const e=V0(this._hostTNode,this._hostLView);if(oM(e)){const t=sv(e,this._hostLView),r=iv(e);return new Li(t[Ue].data[r+8],t)}return new Li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=$W(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Tr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=$h(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,zh(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function Au(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const l=o?e:new Nv(Qt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const T=(o?c:this.parentInjector).get(Oi,null);T&&(s=T)}const u=Qt(l.componentType??{}),d=$h(this._lContainer,u?.id??null),y=l.create(c,i,d?.firstChild??null,s);return this.insertImpl(y.hostView,a,zh(this._hostTNode,d)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function qR(n){return fi(n[Gr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[Gr],c=new HW(l,l[Fi],l[Gr]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return Mm(o,i,s,r),e.attachToViewContainerRef(),Wp(CP(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=$W(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=yv(this._lContainer,t);r&&(hh(CP(this._lContainer),t),iC(r[Ue],r))}detach(e){const t=this._adjustIndex(e,-1),r=yv(this._lContainer,t);return r&&null!=hh(CP(this._lContainer),t)?new wv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function $W(n){return n[8]}function CP(n){return n[8]||(n[8]=[])}function WW(n,e){let t;const r=e[n.index];return fi(r)?t=r:(t=nW(r,e,null,n),e[n.index]=t,lC(e,t)),GW(t,e,n,r),new HW(t,n,e)}let GW=function KW(n,e,t,r){if(n[fa])return;let i;i=8&t.type?fn(r):function bhe(n,e){const t=n[Dt],r=t.createComment(""),i=Gi(e,n);return Bh(t,KM(t,i),r,function vue(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[fa]=i},TP=()=>!1;class AP{constructor(e){this.queryList=e,this.matches=null}clone(){return new AP(this.queryList)}setDirty(){this.queryList.setDirty()}}class SP{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new SP(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==PP(e,t).matches&&this.queries[t].setDirty()}}class QW{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function Dhe(n){return n.split(",").map(e=>e.trim())}(e):e}}class DP{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new DP(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class xP{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new xP(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,Che(t,s)),this.matchTNodeWithReadOption(e,t,B0(t,e,s,!1,!1))}else r===pa?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,B0(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Vn||i===Eo||i===pa&&4&t.type)this.addMatch(t.index,-2);else{const s=B0(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Che(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Ahe(n,e,t,r){return-1===t?function The(n,e){return 11&n.type?wm(n,e):4&n.type?dC(n,e):null}(e,n):-2===t?function She(n,e,t){return t===Vn?wm(e,n):t===pa?dC(e,n):t===Eo?WW(e,n):void 0}(n,e,r):Nh(n,n[Ue],t,e)}function YW(n,e,t,r){const i=e[za].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:Ahe(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function RP(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=YW(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=Tr;d<u.length;d++){const m=u[d];m[vc]===m[Gr]&&RP(m[Ue],m,c,r)}if(null!==u[Ru]){const d=u[Ru];for(let m=0;m<d.length;m++){const y=d[m];RP(y[Ue],y,c,r)}}}}}return r}function XW(n,e,t){const r=new Oh(!(4&~t));return function Rue(n,e,t,r){const i=iW(e);i.push(t),n.firstCreatePass&&sW(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[za]??=new SP).queries.push(new AP(r))-1}function e3(n,e,t){null===n.queries&&(n.queries=new DP),n.queries.track(new xP(e,t))}function PP(n,e){return n.queries.getByIndex(e)}function t3(n,e){const t=n[Ue],r=PP(t,e);return r.crossesNgTemplate?RP(t,n,e,[]):YW(t,n,r,e)}const n3=new Set;function Gs(n){n3.has(n)||(n3.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Ov(n){return"function"==typeof n&&void 0!==n[ce]}function Gh(n,e){Gs("NgSignals");const t=function $r(n){const e=Object.create(pe);e.value=n;const t=()=>($(e),e.value);return t[ce]=e,t}(n),r=t[ce];return e?.equal&&(r.equal=e.equal),t.set=i=>se(r,i),t.update=i=>function ae(n,e){et()||An(),se(n,e(n.value))}(r,i),t.asReadonly=r3.bind(t),t}function r3(){const n=this[ce];if(void 0===n.readonlyFn){const e=()=>this();e[ce]=n,n.readonlyFn=e}return n.readonlyFn}function i3(n){return Ov(n)&&"function"==typeof n.set}function bn(n){let e=function m3(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Lo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=EC(n.inputs),o.inputTransforms=EC(n.inputTransforms),o.declaredInputs=EC(n.declaredInputs),o.outputs=EC(n.outputs);const a=i.hostBindings;a&&Hhe(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&jhe(n,l),c&&zhe(n,c),Bhe(n,i),Cr(n.outputs,i.outputs),Lo(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===bn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Uhe(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=gh(i.hostAttrs,t=gh(t,i.hostAttrs))}}(r)}function Bhe(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function EC(n){return n===uo?{}:n===vn?[]:n}function jhe(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function zhe(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Hhe(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function g3(n){const e=t=>{const r=Array.isArray(n);null===t.hostDirectives?(t.findHostDirectiveDefs=_3,t.hostDirectives=r?n.map(NP):[n]):r?t.hostDirectives.unshift(...n.map(NP)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function _3(n,e,t){if(null!==n.hostDirectives)for(const r of n.hostDirectives)if("function"==typeof r){const i=r();for(const s of i)y3(NP(s),e,t)}else y3(r,e,t)}function y3(n,e,t){const r=hi(n.directive);(function qhe(n,e){for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=n[t])})(r.declaredInputs,n.inputs),_3(r,e,t),t.set(r,n),e.push(r)}function NP(n){return"function"==typeof n?{directive:At(n),inputs:uo,outputs:uo}:{directive:At(n.directive),inputs:v3(n.inputs),outputs:v3(n.outputs)}}function v3(n){if(void 0===n||0===n.length)return uo;const e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function Dl(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class Dc{}class E3{}class OP extends Dc{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jW(this);const s=Wi(e);this._bootstrapComponents=Ho(s.bootstrap),this._r3Injector=I4(e,t,[{provide:Dc,useValue:this},{provide:_C,useValue:this.componentFactoryResolver},...r],ti(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class FP extends E3{constructor(e){super(),this.moduleType=e}create(e){return new OP(this.moduleType,e,[])}}class I3 extends Dc{constructor(e){super(),this.componentFactoryResolver=new jW(this),this.instance=null;const t=new ja([...e.providers,{provide:Dc,useValue:this},{provide:_C,useValue:this.componentFactoryResolver}],e.parent||Cu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function IC(n,e,t=null){return new I3({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function wC(n){return!!LP(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function LP(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function xl(n,e,t){return n[e]=t}function pi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function qh(n,e,t,r){const i=pi(n,e,t);return pi(n,e+1,r)||i}function Vv(n,e,t,r,i,s,o,a,l,c){const u=t+ct,d=e.firstCreatePass?function efe(n,e,t,r,i,s,o,a,l){const c=e.consts,u=jh(e,n,4,o||null,a||null);rP(e,t,u,go(c,l)),ym(e,u);const d=u.tView=nP(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,e,n,r,i,s,o,a,l):e.data[u];_o(d,!1);const m=w3(e,n,d,t);ku()&&sC(e,n,m,d),As(m,n);const y=nW(m,n,m,d);return n[u]=y,lC(n,y),function qW(n,e,t){return TP(n,e,t)}(y,d,n),Mu(d)&&eP(e,n,d),null!=l&&tP(n,d,c),d}function Rt(n,e,t,r,i,s,o,a){const l=Ie(),c=Gt();return Vv(l,c,n,e,t,r,i,go(c.consts,s),o,a),Rt}let w3=function C3(n,e,t,r){return yo(!0),e[Dt].createComment("")};var Lm=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Lm||{});let R3=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();class jv{constructor(){this.ngZone=k(_t),this.scheduler=k(km),this.errorHandler=k(jo,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Lm.EarlyRead,Lm.Write,Lm.MixedReadWrite,Lm.Read]}execute(){this.executing=!0;for(const e of jv.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Ne({token:jv,providedIn:"root",factory:()=>new jv})}}class ife{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function xc(n,e){!e?.injector&&Fr();const t=e?.injector??k(Sn);return $o(t)?(Gs("NgAfterNextRender"),P3(n,t,e,!0)):k3}function P3(n,e,t,r){const i=e.get(R3);i.impl??=e.get(jv);const s=t?.phase??Lm.MixedReadWrite,o=!0!==t?.manualCleanup?e.get(av):null,a=new ife(i.impl,function sfe(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),r,o);return i.impl.register(a),a}const k3={destroy(){}};function Zn(n,e,t,r){const i=Ie();return pi(i,Bo(),e)&&(Gt(),Sl(Ln(),i,n,e,t,r)),Zn}function $m(n,e,t,r){return pi(n,Bo(),t)?e+kt(t)+r:Ft}function RC(n,e){return n<<17|e<<2}function Uu(n){return n>>17&32767}function KP(n){return 2|n}function Qh(n){return(131068&n)>>2}function QP(n,e){return-131069&n|e<<2}function YP(n){return 1|n}function sG(n,e,t,r){const i=n[t+1],s=null===e;let o=r?Uu(i):Qh(i),a=!1;for(;0!==o&&(!1===a||s);){const c=n[o+1];jfe(n[o],e)&&(a=!0,n[o+1]=r?YP(c):KP(c)),o=r?Uu(c):Qh(c)}a&&(n[t+1]=r?KP(i):YP(i))}function jfe(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&vl(n,e)>=0}const Vi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function oG(n){return n.substring(Vi.key,Vi.keyEnd)}function aG(n,e){const t=Vi.textEnd;return t===e?-1:(e=Vi.keyEnd=function Wfe(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Vi.key=e,t),Zm(n,e,t))}function Zm(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Ye(n,e,t){const r=Ie();return pi(r,Bo(),e)&&bo(Gt(),Ln(),r,n,e,r[Dt],t,!1),Ye}function XP(n,e,t,r,i){const o=i?"class":"style";aP(n,t,e.inputs[o],o,r)}function Hv(n,e,t){return qa(n,e,t,!1),Hv}function _i(n,e){return qa(n,e,null,!0),_i}function Yh(n){Ka(epe,Ml,n,!0)}function Ml(n,e){for(let t=function Hfe(n){return function cG(n){Vi.key=0,Vi.keyEnd=0,Vi.value=0,Vi.valueEnd=0,Vi.textEnd=n.length}(n),aG(n,Zm(n,0,Vi.textEnd))}(e);t>=0;t=aG(e,t))Pi(n,oG(e),!0)}function qa(n,e,t,r){const i=Ie(),s=Gt(),o=Wa(2);s.firstUpdatePass&&fG(s,n,o,r),e!==Ft&&pi(i,o,e)&&mG(s,s.data[xn()],i,i[Dt],n,i[o+1]=function npe(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ti(zo(n)))),n}(e,t),r,o)}function Ka(n,e,t,r){const i=Gt(),s=Wa(2);i.firstUpdatePass&&fG(i,null,s,r);const o=Ie();if(t!==Ft&&pi(o,s,t)){const a=i.data[xn()];if(_G(a,r)&&!hG(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=cc(l,t||"")),XP(i,a,o,t,r)}else!function tpe(n,e,t,r,i,s,o,a){i===Ft&&(i=vn);let l=0,c=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const m=l<i.length?i[l+1]:void 0,y=c<s.length?s[c+1]:void 0;let T,b=null;u===d?(l+=2,c+=2,m!==y&&(b=d,T=y)):null===d||null!==u&&u<d?(l+=2,b=u):(c+=2,b=d,T=y),null!==b&&mG(n,e,t,r,b,T,o,a),u=l<i.length?i[l]:null,d=c<s.length?s[c]:null}}(i,a,o,o[Dt],o[s+1],o[s+1]=function Jfe(n,e,t){if(null==t||""===t)return vn;const r=[],i=zo(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}function hG(n,e){return e>=n.expandoStartIndex}function fG(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[xn()],o=hG(n,t);_G(s,r)&&null===e&&!o&&(e=!1),e=function Qfe(n,e,t,r){const i=function g(n){const e=xt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=$v(t=ZP(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=ZP(i,n,e,t,r),null===s){let l=function Yfe(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Qh(r))return n[Uu(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=ZP(null,n,e,l[1],r),l=$v(l,e.attrs,r),function Xfe(n,e,t,r){n[Uu(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function Zfe(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=$v(r,n[s].hostAttrs,t);return $v(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Bfe(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Uu(o),l=Qh(o);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||vl(t,u)>0)&&(c=!0)):u=t,i)if(0!==l){const m=Uu(n[a+1]);n[r+1]=RC(m,a),0!==m&&(n[m+1]=QP(n[m+1],r)),n[a+1]=function Lfe(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=RC(a,0),0!==a&&(n[a+1]=QP(n[a+1],r)),a=r;else n[r+1]=RC(l,0),0===a?a=r:n[l+1]=QP(n[l+1],r),l=r;c&&(n[r+1]=KP(n[r+1])),sG(n,u,r,!0),sG(n,u,r,!1),function Ufe(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&vl(s,e)>=0&&(t[r+1]=YP(t[r+1]))}(e,u,n,r,s),o=RC(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function ZP(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=$v(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function $v(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pi(n,o,!!t||e[++s]))}return void 0===n?null:n}function epe(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Pi(n,r,t)}function mG(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function Vfe(n){return!(1&~n)}(c)?gG(l,e,t,i,Qh(c),o):void 0;MC(u)||(MC(s)||function Ffe(n){return!(2&~n)}(c)&&(s=gG(l,null,t,i,a,o)),function Iue(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Fu.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Fu.Important),n.setStyle(t,r,i,s))}}(r,o,Sh(xn(),t),i,s))}function gG(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let m=t[i+1];m===Ft&&(m=d?vn:void 0);let y=d?fh(m,r):u===r?m:void 0;if(c&&!MC(y)&&(y=fh(l,r)),MC(y)&&(a=y,o))return a;const b=n[i+1];i=o?Uu(b):Qh(b)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=fh(l,r))}return a}function MC(n){return void 0!==n}function _G(n,e){return!!(n.flags&(e?8:16))}function JP(n,e,t){Ka(Pi,Ml,$m(Ie(),n,e,t),!0)}function Wv(n,e){Gs("NgControlFlow");const t=Ie(),r=Bo(),i=t[r]!==Ft?t[r]:-1,s=-1!==i?PC(t,ct+i):void 0;if(pi(t,r,n)){const a=te(null);try{if(void 0!==s&&function cP(n,e){const t=yv(n,e);return void 0!==t&&iC(t[Ue],t),t}(s,0),-1!==n){const l=ct+n,c=PC(t,l),u=function nk(n,e){return Pu(n,e)}(t[Ue],l),d=$h(c,u.tView.ssrId);Mm(c,Rm(t,u,e,{dehydratedView:d}),0,zh(u,d))}}finally{te(a)}}else if(void 0!==s){const a=function aW(n,e){const t=Tr+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Xn]=e)}}function PC(n,e){return n[e]}function Te(n,e,t,r){const i=Ie(),s=Gt(),o=ct+n,a=i[Dt],l=s.firstCreatePass?function wpe(n,e,t,r,i,s){const o=e.consts,l=jh(e,n,2,r,go(o,i));return rP(e,t,l,go(o,s)),null!==l.attrs&&vC(l,l.attrs,!1),null!==l.mergedAttrs&&vC(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=EG(s,i,l,a,e,n);i[o]=c;const u=Mu(l);return _o(l,!0),W$(a,c,l),!function Om(n){return!(32&~n.flags)}(l)&&ku()&&sC(s,i,c,l),0===function Yy(){return xt.lFrame.elementDepthCount}()&&As(c,i),function KR(){xt.lFrame.elementDepthCount++}(),u&&(eP(s,i,l),JM(s,l,i)),null!==r&&tP(i,l),Te}function De(){let n=Fn();gm()?Rh():(n=n.parent,_o(n,!1));const e=n;(function YR(n){return xt.skipHydrationRootTNode===n})(e)&&function JR(){xt.skipHydrationRootTNode=null}(),function QR(){xt.lFrame.elementDepthCount--}();const t=Gt();return t.firstCreatePass&&(ym(t,n),Ch(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function dle(n){return!!(8&n.flags)}(e)&&XP(t,e,Ie(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function hle(n){return!!(16&n.flags)}(e)&&XP(t,e,Ie(),e.stylesWithoutHost,!1),De}function qt(n,e,t,r){return Te(n,e,t,r),De(),qt}let EG=(n,e,t,r,i,s)=>(yo(!0),rC(r,i,function _m(){return xt.lFrame.currentNamespace}()));function ga(n,e,t){const r=Ie(),i=Gt(),s=n+ct,o=i.firstCreatePass?function Ape(n,e,t,r,i){const s=e.consts,o=go(s,r),a=jh(e,n,8,"ng-container",o);return null!==o&&vC(a,o,!0),rP(e,t,a,go(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];_o(o,!0);const a=IG(i,r,o,n);return r[s]=a,ku()&&sC(i,r,a,o),As(a,r),Mu(o)&&(eP(i,r,o),JM(i,o,r)),null!=t&&tP(r,o),ga}function _a(){let n=Fn();const e=Gt();return gm()?Rh():(n=n.parent,_o(n,!1)),e.firstCreatePass&&(ym(e,n),Ch(n)&&e.queries.elementEnd(n)),_a}function Gv(n,e,t){return ga(n,e,t),_a(),Gv}let IG=(n,e,t,r)=>(yo(!0),$M(e[Dt],""));function ya(){return Ie()}function qv(n,e,t){const r=Ie();return pi(r,Bo(),e)&&bo(Gt(),Ln(),r,n,e,r[Dt],t,!0),qv}const kC="en-US";let AG=kC,$G=(n,e,t)=>{};function dn(n,e,t,r){const i=Ie(),s=Gt(),o=Fn();return sk(s,i,i[Dt],o,n,e,r),dn}function sk(n,e,t,r,i,s,o){const a=Mu(r),c=n.firstCreatePass&&sW(n),u=e[Xn],d=iW(e);let m=!0;if(3&r.type||o){const T=Gi(r,e),M=o?o(T):T,B=d.length,V=o?be=>o(fn(be[r.index])):r.index;let Q=null;if(!o&&a&&(Q=function vme(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[yc],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,m=!1;else{s=KG(r,e,u,s),$G(T,i,s);const be=t.listen(M,i,s);d.push(s,be),c&&c.push(i,V,B,B+1)}}else s=KG(r,e,u,s);const y=r.outputs;let b;if(m&&null!==y&&(b=y[i])){const T=b.length;if(T)for(let M=0;M<T;M+=2){const Be=e[b[M]][b[M+1]].subscribe(s),je=d.length;d.push(s,Be),c&&c.push(i,r.index,je,-(je+1))}}}function qG(n,e,t,r){const i=te(null);try{return mo(6,e,t),!1!==t(r)}catch(s){return cC(n,s),!1}finally{mo(7,e,t),te(i)}}function KG(n,e,t,r){return function i(s){if(s===Function)return r;Iv(n.componentOffset>-1?Cs(n.index,e):e,5);let a=qG(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)a=qG(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function rt(n=1){return function tn(n){return(xt.lFrame.contextLView=function S0(n,e){for(;n>0;)e=e[Su],n--;return e}(n,xt.lFrame.contextLView))[Xn]}(n)}function bme(n,e){let t=null;const r=function ER(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Yp(n,s,!0):Py(r,s))return i}else t=i}return t}function Qa(n){const e=Ie()[hr][Fi];if(!e.projection){const r=e.projection=function Iu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){if(128!==s.type){const o=n?bme(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Ki(n,e=0,t,r,i,s){const o=Ie(),a=Gt(),l=r?n+1:null;null!==l&&Vv(o,a,l,r,i,s,null,t);const c=jh(a,ct+n,16,null,t||null);null===c.projection&&(c.projection=e),Rh();const d=!o[ws]||Cc();null===o[hr][Fi].projection[c.projection]&&null!==l?function Eme(n,e,t){const r=ct+t,i=e.data[r],s=n[r],o=$h(s,i.tView.ssrId);Mm(s,Rm(n,i,void 0,{dehydratedView:o}),0,zh(i,o))}(o,a,l):d&&32&~c.flags&&function bue(n,e,t){H$(e[Dt],0,e,t,qM(n,t,e),L$(t.parent||e[Fi],t,e))}(a,o,c)}function eg(n,e,t){return Jv(n,"",e,"",t),eg}function Jv(n,e,t,r,i){const s=Ie(),o=$m(s,e,t,r);return o!==Ft&&bo(Gt(),Ln(),s,n,o,s[Dt],i,!1),Jv}function ju(n,e,t,r){!function JW(n,e,t,r){const i=Gt();if(i.firstCreatePass){const s=Fn();e3(i,new QW(e,t,r),s.index),function xhe(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return XW(i,Ie(),t)}(n,e,t,r)}function Zh(n,e,t){!function ZW(n,e,t){const r=Gt();return r.firstCreatePass&&(e3(r,new QW(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),XW(r,Ie(),e)}(n,e,t)}function wo(n){const e=Ie(),t=Gt(),r=h();f(r+1);const i=PP(t,r);if(n.dirty&&function Wy(n){return!(4&~n[dt])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=t3(e,r);n.reset(s,M4),n.notifyOnChanges()}return!0}return!1}function Co(){return function MP(n,e){return n[za].queries[e].queryList}(Ie(),h())}function LC(n){return Ic(function M0(){return xt.lFrame.contextLView}(),ct+n)}function at(n,e=""){const t=Ie(),r=Gt(),i=n+ct,s=r.firstCreatePass?jh(r,i,1,e,null):r.data[i],o=h5(r,t,s,e,n);t[i]=o,ku()&&sC(r,t,o,s),_o(s,!1)}let h5=(n,e,t,r,i)=>(yo(!0),function HM(n,e){return n.createText(e)}(e[Dt],r));function Ya(n){return Rn("",n,""),Ya}function Rn(n,e,t){const r=Ie(),i=$m(r,n,e,t);return i!==Ft&&function Sc(n,e,t){const r=Sh(e,n);!function M$(n,e,t){n.setValue(e,t)}(n[Dt],r,t)}(r,xn(),i),Rn}function ak(n,e,t){i3(e)&&(e=e());const r=Ie();return pi(r,Bo(),e)&&bo(Gt(),Ln(),r,n,e,r[Dt],t,!1),ak}function lk(n,e){const t=Ie(),r=Gt(),i=Fn();return sk(r,t,t[Dt],i,n,e),lk}function ck(n,e,t,r,i){if(n=At(n),Array.isArray(n))for(let s=0;s<n.length;s++)ck(n[s],e,t,r,i);else{const s=Gt(),o=Ie(),a=Fn();let l=gc(n)?n:At(n.provide);const c=NR(n),u=1048575&a.providerIndexes,d=a.directiveStart,m=a.providerIndexes>>20;if(gc(n)||!n.multi){const y=new rv(c,i,Me),b=dk(l,e,i?u:u+m,d);-1===b?(cM(L0(a,o),s,l),uk(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[b]=y,o[b]=y)}else{const y=dk(l,e,u+m,d),b=dk(l,e,u,u+m),M=b>=0&&t[b];if(i&&!M||!i&&!(y>=0&&t[y])){cM(L0(a,o),s,l);const B=function jme(n,e,t,r,i){const s=new rv(n,t,Me);return s.multi=[],s.index=e,s.componentProviders=0,C5(s,i,r&&!t),s}(i?Ume:Bme,t.length,i,r,c);!i&&M&&(t[b].providerFactory=B),uk(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),o.push(B)}else uk(s,n,y>-1?y:b,C5(t[i?b:y],c,!i&&r));!i&&r&&M&&t[b].componentProviders++}}}function uk(n,e,t,r){const i=gc(e),s=function RR(n){return!!n.useClass}(e);if(i||s){const l=(s?At(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function C5(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dk(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Bme(n,e,t,r){return hk(this.multi,[])}function Ume(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Nh(t,t[Ue],this.providerFactory.index,r);s=a.slice(0,o),hk(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],hk(i,s);return s}function hk(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function rr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Vme(n,e,t){const r=Gt();if(r.firstCreatePass){const i=Lo(n);ck(t,r.data,r.blueprint,i,!0),ck(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let zme=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=l0(0,t.type),i=r.length>0?IC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ne({token:n,providedIn:"environment",factory:()=>new n(Se(Oi))})}}return n})();function yi(n){Gs("NgStandalone"),n.getStandaloneInjector=e=>e.get(zme).getOrCreateStandaloneInjector(n)}function fk(n,e,t,r){return S5(Ie(),qi(),n,e,t,r)}function eb(n,e){const t=n[e];return t===Ft?void 0:t}function S5(n,e,t,r,i,s){const o=e+t;return pi(n,o,i)?xl(n,o+1,s?r.call(s,i):r(i)):eb(n,o+1)}function x5(n,e,t,r,i,s,o,a){const l=e+t;return function CC(n,e,t,r,i){const s=qh(n,e,t,r);return pi(n,e+2,i)||s}(n,l,i,s,o)?xl(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):eb(n,l+3)}function Go(n,e){const t=Gt();let r;const i=n+ct;t.firstCreatePass?(r=function tge(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ba(r.type)),a=Or(Me);try{const l=F0(!1),c=s();return F0(l),function ok(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Ie(),i,c),c}finally{Or(a)}}function zu(n,e,t){const r=n+ct,i=Ie(),s=Ic(i,r);return tb(i,r)?S5(i,qi(),e,s.transform,t,s):s.transform(t)}function UC(n,e,t,r){const i=n+ct,s=Ie(),o=Ic(s,i);return tb(s,i)?function D5(n,e,t,r,i,s,o){const a=e+t;return qh(n,a,i,s)?xl(n,a+2,o?r.call(o,i,s):r(i,s)):eb(n,a+2)}(s,qi(),e,o.transform,t,r,o):o.transform(t,r)}function pk(n,e,t,r,i){const s=n+ct,o=Ie(),a=Ic(o,s);return tb(o,s)?x5(o,qi(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function tb(n,e){return n[Ue].data[e].pure}function P5(n,e){return dC(n,e)}class Jh{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const K5=new Jh("18.2.13");let Q5=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const e6=new ye(""),HC=new ye("");let Ik,bk=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Ik||(function Yge(n){Ik=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(Se(_t),Se(Ek),Se(HC))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),Ek=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Ik?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function ib(n){return!!n&&"function"==typeof n.then}function t6(n){return!!n&&"function"==typeof n.subscribe}const $C=new ye("");let n6=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k($C,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(ib(s))t.push(s);else if(t6(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const WC=new ye("");function i6(n,e){return Array.isArray(e)?e.reduce(i6,n):{...n,...e}}let va=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(jle),this.afterRenderManager=k(R3),this.zonelessEnabled=k(Mv),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new E,this.afterTick=new E,this.componentTypes=[],this.components=[],this.isStable=k(Tc).hasPendingTasks.pipe(Ve(t=>!t)),this._injector=k(Oi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof LW;if(!this._injector.get(n6).done)throw!i&&function bl(n){const e=Qt(n)||hi(n)||Ni(n);return null!==e&&e.standalone}(t),new K(405,!1);let o;o=i?t:this._injector.get(_C).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Xge(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Dc),c=o.create(Sn.NULL,[],r||o.selector,a),u=c.location.nativeElement,d=c.injector.get(e6,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),GC(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);const t=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Wh,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)e_e(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Dh(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;GC(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(WC,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>GC(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function e_e(n,e,t,r){(t||Dh(n))&&uC(n,e,t&&!r?0:1)}class t_e{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let o6=(()=>{class n{compileModuleSync(t){return new FP(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ho(Wi(t).declarations).reduce((o,a)=>{const l=Qt(a);return l&&o.push(new Nv(l)),o},[]);return new t_e(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),i_e=(()=>{class n{constructor(){this.zone=k(_t),this.changeDetectionScheduler=k(km),this.applicationRef=k(va)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wk({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _t({...Ck(),scheduleInRootZone:t}),[{provide:_t,useFactory:n},{provide:ho,multi:!0,useFactory:()=>{const r=k(i_e,{optional:!0});return()=>r.initialize()}},{provide:ho,multi:!0,useFactory:()=>{const r=k(o_e);return()=>{r.initialize()}}},!0===e?{provide:FW,useValue:!0}:[],{provide:EP,useValue:t??C4}]}function Ck(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let o_e=(()=>{class n{constructor(){this.subscription=new St,this.initialized=!1,this.zone=k(_t),this.pendingTasks=k(Tc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_t.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sb=(()=>{class n{constructor(){this.appRef=k(va),this.taskService=k(Tc),this.ngZone=k(_t),this.zonelessEnabled=k(Mv),this.disableScheduling=k(FW,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new St,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(z0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(EP,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gM||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?A4:T4;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(z0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,A4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Rc=new ye("",{providedIn:"root",factory:()=>k(Rc,Bt.Optional|Bt.SkipSelf)||function a_e(){return typeof $localize<"u"&&$localize.locale||kC}()}),KC=new ye("");function QC(n){return!n.moduleRef}let h6=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[wk({ngZoneFactory:()=>function Ule(n="zone.js",e){return"noop"===n?new gM:"zone.js"===n?new _t(e):n}(r?.ngZone,{...Ck({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:o}),{provide:km,useExisting:sb}],l=function Qhe(n,e,t){return new OP(n,e,t,!1)}(t.moduleType,this.injector,a);return function d6(n){const e=QC(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_t);return t.run(()=>{QC(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(jo,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),QC(n)){const s=()=>e.destroy(),o=n.platformInjector.get(KC);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(KC);o.add(s),n.moduleRef.onDestroy(()=>{GC(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return function Jge(n,e,t){try{const r=t();return ib(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const s=e.get(n6);return s.runInitializers(),s.donePromise.then(()=>{if(function Ope(n){"string"==typeof n&&(AG=n.toLowerCase().replace(/_/g,"-"))}(e.get(Rc,kC)||kC),QC(n)){const a=e.get(va);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function f_e(n,e){const t=n.injector.get(va);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new K(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){const i=i6({},r);return function r_e(n,e,t){const r=new FP(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(KC,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(Se(Sn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Hu=null;const f6=new ye("");function p6(n,e,t=[]){const r=`Platform: ${e}`,i=new ye(r);return(s=[])=>{let o=Ak();if(!o||o.injector.get(f6,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function p_e(n){if(Hu&&!Hu.get(f6,!1))throw new K(400,!1);(function r6(){!function nr(n){Ir=n}(()=>{throw new K(600,!1)})})(),Hu=n;const e=n.get(h6);(function g6(n){n.get(X4,null)?.forEach(t=>t())})(n)}(function m6(n=[],e){return Sn.create({name:e,providers:[{provide:d0,useValue:"platform"},{provide:KC,useValue:new Set([()=>Hu=null])},...n]})}(a,r))}return function m_e(){const e=Ak();if(!e)throw new K(401,!1);return e}()}}function Ak(){return Hu?.get(h6)??null}let ba=(()=>{class n{static{this.__NG_ELEMENT_ID__=__e}}return n})();function __e(n){return function y_e(n,e,t){if(Ec(n)&&!t){const r=Cs(n.index,e);return new wv(r,r)}return 175&n.type?new wv(e[hr],e):null}(Fn(),Ie(),!(16&~n))}class I6{constructor(){}supports(e){return wC(e)}create(e){return new w_e(e)}}const I_e=(n,e)=>e;class w_e{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||I_e}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<C6(r,i,s)?t:r,a=C6(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,b=y+m;u<=b&&b<c&&(s[m]=y+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!wC(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Zhe(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new C_e(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new w6),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new w6),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class C_e{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class T_e{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class w6{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new T_e,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function C6(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class T6{constructor(){}supports(e){return e instanceof Map||LP(e)}create(){return new A_e}}class A_e{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||LP(e)))throw new K(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new S_e(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class S_e{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function A6(){return new Mk([new I6])}let Mk=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:A6})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||A6()),deps:[[n,new pc,new Mi]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new K(901,!1)}}return n})();function S6(){return new ZC([new T6])}let ZC=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:S6})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||S6()),deps:[[n,new pc,new Mi]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();const R_e=p6(null,"core",[]);let M_e=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(Se(va))}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({})}}return n})();function ri(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Nk(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}function cb(n,e){Gs("NgSignals");const t=function ie(n){const e=Object.create(Cn);e.computation=n;const t=()=>{if(Ae(e),$(e),e.value===jt)throw e.error;return e.value};return t[ce]=e,t}(n);return e?.equal&&(t[ce].equal=e.equal),t}function Xa(n){const e=te(null);try{return n()}finally{te(e)}}const cye=new ye("",{providedIn:"root",factory:()=>k(uye)});let uye=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new dye})}}return n})();class dye{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=k(Tc),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){const t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}class hye{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=function Mt(n,e,t){const r=Object.create(It);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=l=>{r.cleanupFn=l};return r.ref={notify:()=>Qe(r),run:()=>{if(null===r.fn)return;if(function ee(){return D}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Wt(r))return;r.hasRun=!0;const l=Ze(r);try{r.cleanupFn(),r.cleanupFn=Dn,r.fn(i)}finally{Je(r,l)}},cleanup:()=>r.cleanupFn(),destroy:()=>function o(l){(function s(l){return null===l.fn&&null===l.schedule})(l)||(Zt(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Dn)}(r),[ce]:r},r.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(jo,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function X6(n,e){const t=Qt(n),r=e.elementInjector||Cu();return new Nv(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}let Z6=null;function $u(){return Z6}class mye{}const pn=new ye("");let Ok=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>k(_ye),providedIn:"platform"})}}return n})();const gye=new ye("");let _ye=(()=>{class n extends Ok{constructor(){super(),this._doc=k(pn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $u().getBaseHref(this._doc)}onPopState(t){const r=$u().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=$u().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Fk(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function J6(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Mc(n){return n&&"?"!==n[0]?"?"+n:n}let tf=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>k(t7),providedIn:"root"})}}return n})();const e7=new ye("");let t7=(()=>{class n extends tf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(pn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Fk(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Mc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Mc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Mc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(Ok),Se(e7,8))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yye=(()=>{class n extends tf{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Fk(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Mc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Mc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(Ok),Se(e7,8))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),rg=(()=>{class n{constructor(t){this._subject=new un,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Eye(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(J6(n7(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mc(r))}normalize(t){return n.stripTrailingSlash(function bye(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,n7(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Mc}static{this.joinWithSlash=Fk}static{this.stripTrailingSlash=J6}static{this.\u0275fac=function(r){return new(r||n)(Se(tf))}}static{this.\u0275prov=Ne({token:n,factory:()=>function vye(){return new rg(Se(tf))}(),providedIn:"root"})}}return n})();function n7(n){return n.replace(/\/index.html$/,"")}function d7(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class ave{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gT=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ave(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),p7(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{p7(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Me(Eo),Me(pa),Me(Mk))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function p7(n,e){n.context.$implicit=e.item}let sg=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new lve,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){m7("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){m7("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Me(Eo),Me(pa))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class lve{constructor(){this.$implicit=null,this.ngIf=null}}function m7(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ti(e)}'.`)}let _7=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Fu.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Me(Vn),Me(ZC),Me(Ga))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),y7=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static{this.\u0275fac=function(r){return new(r||n)(Me(Eo))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[as]})}}return n})();function Ja(n,e){return new K(2100,!1)}class hve{createSubscription(e,t){return Xa(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Xa(()=>e.unsubscribe())}}class fve{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const pve=new fve,mve=new hve;let v7=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ib(t))return pve;if(t6(t))return mve;throw Ja()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Me(ba,16))}}static{this.\u0275pipe=ki({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),E7=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Ja();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"slice",type:n,pure:!1,standalone:!0})}}return n})(),I7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({})}}return n})();const w7="browser";function C7(n){return n===w7}function _T(n){return"server"===n}let Nve=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>C7(k($s))?new Ove(k(pn),window):new Lve})}}return n})();class Ove{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Fve(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class Lve{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class T7{}class dbe extends mye{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class eN extends dbe{static makeCurrent(){!function pye(n){Z6??=n}(new eN)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hbe(){return fb=fb||document.querySelector("base"),fb?fb.getAttribute("href"):null}();return null==t?null:function fbe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){fb=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return d7(document.cookie,e)}}let fb=null,mbe=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const tN=new ye("");let F7=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Se(tN),Se(_t))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class L7{constructor(e){this._doc=e}}const nN="ng-app-id";let V7=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_T(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${nN}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(nN),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(nN,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Se(pn),Se(Fh),Se(IM,8),Se($s))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const rN={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},iN=/%COMP%/g,vbe=new ye("",{providedIn:"root",factory:()=>!0});function U7(n,e){return e.map(t=>t.replace(iN,n))}let sN=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=_T(a),this.defaultRenderer=new oN(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===fo.ShadowDom&&(r={...r,encapsulation:fo.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof z7?i.applyToHost(t):i instanceof aN&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case fo.Emulated:s=new z7(l,c,r,this.appId,u,o,a,d);break;case fo.ShadowDom:return new wbe(l,c,t,r,o,a,this.nonce,d);default:s=new aN(l,c,r,u,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Se(F7),Se(V7),Se(Fh),Se(vbe),Se(pn),Se($s),Se(_t),Se(IM))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class oN{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(rN[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(j7(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(j7(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=rN[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=rN[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Fu.DashCase|Fu.Important)?e.style.setProperty(t,r,i&Fu.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Fu.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=$u().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function j7(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class wbe extends oN{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=U7(i.id,i.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class aN extends oN{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?U7(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class z7 extends aN{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function bbe(n){return"_ngcontent-%COMP%".replace(iN,n)}(c),this.hostAttr=function Ebe(n){return"_nghost-%COMP%".replace(iN,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Cbe=(()=>{class n extends L7{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Se(pn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const H7=["alt","control","meta","shift"],Tbe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Abe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sbe=(()=>{class n extends L7{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$u().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),H7.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=Tbe[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),H7.forEach(o=>{o!==i&&(0,Abe[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Se(pn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const Mbe=p6(R_e,"browser",[{provide:$s,useValue:w7},{provide:X4,useValue:function Dbe(){eN.makeCurrent()},multi:!0},{provide:pn,useFactory:function Rbe(){return function cce(n){EM=n}(document),document},deps:[]}]),Pbe=new ye(""),G7=[{provide:HC,useClass:class pbe{addToWindow(e){Wn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new K(5103,!1);return s},Wn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wn.getAllAngularRootElements=()=>e.getAllRootElements(),Wn.frameworkStabilizers||(Wn.frameworkStabilizers=[]),Wn.frameworkStabilizers.push(r=>{const i=Wn.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?$u().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:e6,useClass:bk,deps:[_t,Ek,HC]},{provide:bk,useClass:bk,deps:[_t,Ek,HC]}],q7=[{provide:d0,useValue:"root"},{provide:jo,useFactory:function xbe(){return new jo},deps:[]},{provide:tN,useClass:Cbe,multi:!0,deps:[pn,_t,$s]},{provide:tN,useClass:Sbe,multi:!0,deps:[pn]},sN,V7,F7,{provide:Wh,useExisting:sN},{provide:T7,useClass:mbe,deps:[]},[]];let K7=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Fh,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(Se(Pbe,12))}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({providers:[...q7,...G7],imports:[I7,M_e]})}}return n})(),kbe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Se(pn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:function(r){let i=null;return i=r?new(r||n):Se(Lbe),i},providedIn:"root"})}}return n})(),Lbe=(()=>{class n extends lN{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case ls.NONE:return r;case ls.HTML:return Al(r,"HTML")?zo(r):b$(this._doc,String(r)).toString();case ls.STYLE:return Al(r,"Style")?zo(r):r;case ls.SCRIPT:if(Al(r,"Script"))return zo(r);throw new K(5200,!1);case ls.URL:return Al(r,"URL")?zo(r):J0(String(r));case ls.RESOURCE_URL:if(Al(r,"ResourceURL"))return zo(r);throw new K(5201,!1);default:throw new K(5202,!1)}}bypassSecurityTrustHtml(t){return function Rce(n){return new Cce(n)}(t)}bypassSecurityTrustStyle(t){return function Mce(n){return new Tce(n)}(t)}bypassSecurityTrustScript(t){return function Pce(n){return new Ace(n)}(t)}bypassSecurityTrustUrl(t){return function kce(n){return new Sce(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Nce(n){return new Dce(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(pn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O=G(467);function X7(n){return n&&pt(n.schedule)}function cN(n){return n[n.length-1]}function uN(n){return pt(cN(n))?n.pop():void 0}function pb(n){return X7(cN(n))?n.pop():void 0}var Nc=G(1635);const dN=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Z7(n){return pt(n?.then)}function J7(n){return pt(n[ao])}function eq(n){return Symbol.asyncIterator&&pt(n?.[Symbol.asyncIterator])}function tq(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const nq=function Bbe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function rq(n){return pt(n?.[nq])}function iq(n){return(0,Nc.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Nc.N3)(t.read());if(i)return yield(0,Nc.N3)(void 0);yield yield(0,Nc.N3)(r)}}finally{t.releaseLock()}})}function sq(n){return pt(n?.getReader)}function Ys(n){if(n instanceof Vt)return n;if(null!=n){if(J7(n))return function Ube(n){return new Vt(e=>{const t=n[ao]();if(pt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(dN(n))return function jbe(n){return new Vt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Z7(n))return function zbe(n){return new Vt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Fa)})}(n);if(eq(n))return oq(n);if(rq(n))return function Hbe(n){return new Vt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(sq(n))return function $be(n){return oq(iq(n))}(n)}throw tq(n)}function oq(n){return new Vt(e=>{(function Wbe(n,e){var t,r,i,s;return(0,Nc.sH)(this,void 0,void 0,function*(){try{for(t=(0,Nc.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Oc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Wu(n,e=0){return me((t,r)=>{t.subscribe(ke(r,i=>Oc(r,n,()=>r.next(i),e),()=>Oc(r,n,()=>r.complete(),e),i=>Oc(r,n,()=>r.error(i),e)))})}function rf(n,e=0){return me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function aq(n,e){if(!n)throw new Error("Iterable cannot be null");return new Vt(t=>{Oc(t,e,()=>{const r=n[Symbol.asyncIterator]();Oc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function zn(n,e){return e?function Xbe(n,e){if(null!=n){if(J7(n))return function Gbe(n,e){return Ys(n).pipe(rf(e),Wu(e))}(n,e);if(dN(n))return function Kbe(n,e){return new Vt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Z7(n))return function qbe(n,e){return Ys(n).pipe(rf(e),Wu(e))}(n,e);if(eq(n))return aq(n,e);if(rq(n))return function Qbe(n,e){return new Vt(t=>{let r;return Oc(t,e,()=>{r=n[nq](),Oc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>pt(r?.return)&&r.return()})}(n,e);if(sq(n))return function Ybe(n,e){return aq(iq(n),e)}(n,e)}throw tq(n)}(n,e):Ys(n)}function qe(...n){return zn(n,pb(n))}function Qi(n,e,t=1/0){return pt(e)?Qi((r,i)=>Ve((s,o)=>e(r,s,i,o))(Ys(n(r,i))),t):("number"==typeof e&&(t=e),me((r,i)=>function Zbe(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const m=()=>{d&&!l.length&&!c&&e.complete()},y=T=>c<r?b(T):l.push(T),b=T=>{s&&e.next(T),c++;let M=!1;Ys(t(T,u++)).subscribe(ke(e,B=>{i?.(B),s?y(B):e.next(B)},()=>{M=!0},void 0,()=>{if(M)try{for(c--;l.length&&c<r;){const B=l.shift();o?Oc(e,o,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(ke(e,y,()=>{d=!0,m()})),()=>{a?.()}}(r,i,n,t)))}function ag(n,e){return pt(e)?Qi(n,e,1):Qi(n,1)}function Qr(n,e){return me((t,r)=>{let i=0;t.subscribe(ke(r,s=>n.call(e,s,i++)&&r.next(s)))})}function lg(n){return me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Yt(n,e){return me((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ke(r,l=>{i?.unsubscribe();let c=0;const u=s++;Ys(n(l,u)).subscribe(i=ke(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}class IT{}class wT{}class wa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof wa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new wa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof wa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Jbe{encodeKey(e){return lq(e)}encodeValue(e){return lq(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tEe=/%(\d[a-f0-9])/gi,nEe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lq(n){return encodeURIComponent(n).replace(tEe,(e,t)=>nEe[t]??e)}function CT(n){return`${n}`}class Pl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Jbe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eEe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(CT):[CT(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Pl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(CT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(CT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rEe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function cq(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uq(n){return typeof Blob<"u"&&n instanceof Blob}function dq(n){return typeof FormData<"u"&&n instanceof FormData}class mb{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function iEe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new wa,this.context??=new rEe,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Pl,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||cq(this.body)||uq(this.body)||dq(this.body)||function sEe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Pl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dq(this.body)?null:uq(this.body)?this.body.type||null:cq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Pl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),u)),new mb(t,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}}var Gu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Gu||{});class hN{constructor(e,t=200,r="OK"){this.headers=e.headers||new wa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class TT extends hN{constructor(e={}){super(e),this.type=Gu.ResponseHeader}clone(e={}){return new TT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sf extends hN{constructor(e={}){super(e),this.type=Gu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new sf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cg extends hN{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function fN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let gb=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof mb)s=t;else{let l,c;l=i.headers instanceof wa?i.headers:new wa(i.headers),i.params&&(c=i.params instanceof Pl?i.params:new Pl({fromObject:i.params})),s=new mb(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=qe(s).pipe(ag(l=>this.handler.handle(l)));if(t instanceof mb||"events"===i.observe)return o;const a=o.pipe(Qr(l=>l instanceof sf));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ve(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ve(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ve(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ve(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Pl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,fN(i,r))}post(t,r,i={}){return this.request("POST",t,fN(i,r))}put(t,r,i={}){return this.request("PUT",t,fN(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Se(IT))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const lEe=/^\)\]\}',?\n/;function fq(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let pN=(()=>{class n{constructor(){this.fetchImpl=k(uEe,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=k(_t)}handle(t){return new Vt(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(mN,s=>r.error(new cg({error:s}))),()=>i.abort()})}doRequest(t,r,i){var s=this;return(0,O.A)(function*(){const o=s.createRequestInit(t);let a;try{const b=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:r,...o}));(function dEe(n){n.then(mN,mN)})(b),i.next({type:Gu.Sent}),a=yield b}catch(b){return void i.error(new cg({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}))}const l=new wa(a.headers),c=a.statusText,u=fq(a)??t.urlWithParams;let d=a.status,m=null;if(t.reportProgress&&i.next(new TT({headers:l,status:d,statusText:c,url:u})),a.body){const b=a.headers.get("content-length"),T=[],M=a.body.getReader();let V,Q,B=0;const be=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,O.A)(function*(){for(;;){const{done:je,value:H}=yield M.read();if(je)break;if(T.push(H),B+=H.length,t.reportProgress){Q="text"===t.responseType?(Q??"")+(V??=new TextDecoder).decode(H,{stream:!0}):void 0;const L=()=>i.next({type:Gu.DownloadProgress,total:b?+b:void 0,loaded:B,partialText:Q});be?be.run(L):L()}}}));const Be=s.concatChunks(T,B);try{const je=a.headers.get("Content-Type")??"";m=s.parseBody(t,Be,je)}catch(je){return void i.error(new cg({error:je,headers:new wa(a.headers),status:a.status,statusText:a.statusText,url:fq(a)??t.urlWithParams}))}}0===d&&(d=m?200:0),d>=200&&d<300?(i.next(new sf({body:m,headers:l,status:d,statusText:c,url:u})),i.complete()):i.error(new cg({error:m,headers:l,status:d,statusText:c,url:u}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const s=(new TextDecoder).decode(r).replace(lEe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let s=0;for(const o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class uEe{}function mN(){}function pq(n,e){return e(n)}function hEe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const pEe=new ye(""),_b=new ye(""),mq=new ye(""),gq=new ye("",{providedIn:"root",factory:()=>!0});function mEe(){let n=null;return(e,t)=>{null===n&&(n=(k(pEe,{optional:!0})??[]).reduceRight(hEe,pq));const r=k(Tc);if(k(gq)){const s=r.add();return n(e,t).pipe(lg(()=>r.remove(s)))}return n(e,t)}}let _q=(()=>{class n extends IT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=k(Tc),this.contributeToStability=k(gq)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(_b),...this.injector.get(mq,[])]));this.chain=r.reduceRight((i,s)=>function fEe(n,e,t){return(r,i)=>Is(t,()=>e(r,s=>n(s,i)))}(i,s,this.injector),pq)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(lg(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Se(wT),Se(Oi))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const bEe=/^\)\]\}',?\n/;let vq=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new K(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?zn(r.\u0275loadImpl()):qe(null)).pipe(Yt(()=>new Vt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((T,M)=>o.setRequestHeader(T,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const T=t.detectContentTypeHeader();null!==T&&o.setRequestHeader("Content-Type",T)}if(t.responseType){const T=t.responseType.toLowerCase();o.responseType="json"!==T?T:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const T=o.statusText||"OK",M=new wa(o.getAllResponseHeaders()),B=function EEe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new TT({headers:M,status:o.status,statusText:T,url:B}),l},u=()=>{let{headers:T,status:M,statusText:B,url:V}=c(),Q=null;204!==M&&(Q=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=Q?200:0);let be=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof Q){const Be=Q;Q=Q.replace(bEe,"");try{Q=""!==Q?JSON.parse(Q):null}catch(je){Q=Be,be&&(be=!1,Q={error:je,text:Q})}}be?(s.next(new sf({body:Q,headers:T,status:M,statusText:B,url:V||void 0})),s.complete()):s.error(new cg({error:Q,headers:T,status:M,statusText:B,url:V||void 0}))},d=T=>{const{url:M}=c(),B=new cg({error:T,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(B)};let m=!1;const y=T=>{m||(s.next(c()),m=!0);let M={type:Gu.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(M.total=T.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},b=T=>{let M={type:Gu.UploadProgress,loaded:T.loaded};T.lengthComputable&&(M.total=T.total),s.next(M)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:Gu.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Se(T7))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const gN=new ye(""),bq=new ye("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Eq=new ye("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Iq{}let CEe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=d7(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Se(pn),Se($s),Se(bq))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function TEe(n,e){const t=n.url.toLowerCase();if(!k(gN)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=k(Iq).getToken(),i=k(Eq);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var qu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(qu||{});function af(n,e){return{\u0275kind:n,\u0275providers:e}}function AEe(...n){const e=[gb,vq,_q,{provide:IT,useExisting:_q},{provide:wT,useFactory:()=>k(pN,{optional:!0})??k(vq)},{provide:_b,useValue:TEe,multi:!0},{provide:gN,useValue:!0},{provide:Iq,useClass:CEe}];for(const t of n)e.push(...t.\u0275providers);return El(e)}const wq=new ye(""),{isArray:FEe}=Array,{getPrototypeOf:LEe,prototype:VEe,keys:BEe}=Object;function Mq(n){if(1===n.length){const e=n[0];if(FEe(e))return{args:e,keys:null};if(function UEe(n){return n&&"object"==typeof n&&LEe(n)===VEe}(e)){const t=BEe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:jEe}=Array;function _N(n){return Ve(e=>function zEe(n,e){return jEe(e)?n(...e):n(e)}(n,e))}function Pq(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function yN(...n){const e=uN(n),{args:t,keys:r}=Mq(n),i=new Vt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Ys(t[u]).subscribe(ke(s,m=>{d||(d=!0,c--),a[u]=m},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?Pq(r,a):a),s.complete())}))}});return e?i.pipe(_N(e)):i}let kq=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Me(Ga),Me(Vn))}}static{this.\u0275dir=Xe({type:n})}}return n})(),lf=(()=>{class n extends kq{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,features:[bn]})}}return n})();const el=new ye(""),$Ee={provide:el,useExisting:Gn(()=>yb),multi:!0},GEe=new ye("");let yb=(()=>{class n extends kq{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function WEe(){const n=$u()?$u().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Me(Ga),Me(Vn),Me(GEe,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&dn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[rr([$Ee]),bn]})}}return n})();function Ku(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Oq(n){return null!=n&&"number"==typeof n.length}const Ss=new ye(""),Qu=new ye(""),qEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ST{static min(e){return function Fq(n){return e=>{if(Ku(e.value)||Ku(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Lq(n){return e=>{if(Ku(e.value)||Ku(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Vq(n){return Ku(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Bq(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Uq(n){return Ku(n.value)||qEe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function jq(n){return e=>Ku(e.value)||!Oq(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function zq(n){return e=>Oq(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Hq(n){if(!n)return DT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ku(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Qq(e)}static composeAsync(e){return Yq(e)}}function DT(n){return null}function $q(n){return null!=n}function Wq(n){return ib(n)?zn(n):n}function Gq(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function qq(n,e){return e.map(t=>t(n))}function Kq(n){return n.map(e=>function KEe(n){return!n.validate}(e)?e:t=>e.validate(t))}function Qq(n){if(!n)return null;const e=n.filter($q);return 0==e.length?null:function(t){return Gq(qq(t,e))}}function vN(n){return null!=n?Qq(Kq(n)):null}function Yq(n){if(!n)return null;const e=n.filter($q);return 0==e.length?null:function(t){return yN(qq(t,e).map(Wq)).pipe(Ve(Gq))}}function bN(n){return null!=n?Yq(Kq(n)):null}function Xq(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Zq(n){return n._rawValidators}function Jq(n){return n._rawAsyncValidators}function EN(n){return n?Array.isArray(n)?n:[n]:[]}function xT(n,e){return Array.isArray(n)?n.includes(e):n===e}function e8(n,e){const t=EN(e);return EN(n).forEach(i=>{xT(t,i)||t.push(i)}),t}function t8(n,e){return EN(e).filter(t=>!xT(n,t))}class n8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Xs extends n8{get formDirective(){return null}get path(){return null}}class Yu extends n8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class r8{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let IN=(()=>{class n extends r8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Me(Yu,2))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&_i("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[bn]})}}return n})(),wN=(()=>{class n extends r8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Me(Xs,10))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&_i("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[bn]})}}return n})();const vb="VALID",MT="INVALID",ug="PENDING",bb="DISABLED";class dg{}class s8 extends dg{constructor(e,t){super(),this.value=e,this.source=t}}class AN extends dg{constructor(e,t){super(),this.pristine=e,this.source=t}}class SN extends dg{constructor(e,t){super(),this.touched=e,this.source=t}}class PT extends dg{constructor(e,t){super(),this.status=e,this.source=t}}class JEe extends dg{constructor(e){super(),this.source=e}}class eIe extends dg{constructor(e){super(),this.source=e}}function DN(n){return(kT(n)?n.validators:n)||null}function xN(n,e){return(kT(e)?e.asyncValidators:n)||null}function kT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function o8(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[t])throw new K(1001,"")}function a8(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new K(1002,"")})}class NT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=cb(()=>this.statusReactive()),this.statusReactive=Gh(void 0),this._pristine=cb(()=>this.pristineReactive()),this.pristineReactive=Gh(!0),this._touched=cb(()=>this.touchedReactive()),this.touchedReactive=Gh(!1),this._events=new E,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xa(this.statusReactive)}set status(e){Xa(()=>this.statusReactive.set(e))}get valid(){return this.status===vb}get invalid(){return this.status===MT}get pending(){return this.status==ug}get disabled(){return this.status===bb}get enabled(){return this.status!==bb}get pristine(){return Xa(this.pristineReactive)}set pristine(e){Xa(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Xa(this.touchedReactive)}set touched(e){Xa(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(e8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(e8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(t8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(t8(e,this._rawAsyncValidators))}hasValidator(e){return xT(this._rawValidators,e)}hasAsyncValidator(e){return xT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new SN(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new SN(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new AN(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new AN(!0,r))}markAsPending(e={}){this.status=ug;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new PT(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bb,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new s8(this.value,r)),this._events.next(new PT(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vb,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vb||this.status===ug)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new s8(this.value,t)),this._events.next(new PT(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bb:vb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ug,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=Wq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new PT(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new un,this.statusChanges=new un}_calculateStatus(){return this._allControlsDisabled()?bb:this.errors?MT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ug)?ug:this._anyControlsHaveStatus(MT)?MT:vb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new AN(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new SN(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function tIe(n){return Array.isArray(n)?vN(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function nIe(n){return Array.isArray(n)?bN(n):n||null}(this._rawAsyncValidators)}}class cf extends NT{constructor(e,t,r){super(DN(t),xN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){a8(this,0,e),Object.keys(e).forEach(r=>{o8(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class l8 extends cf{}const uf=new ye("CallSetDisabledState",{providedIn:"root",factory:()=>Eb}),Eb="always";function OT(n,e){return[...e.path,n]}function Ib(n,e,t=Eb){RN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function iIe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&c8(n,e)})}(n,e),function oIe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sIe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&c8(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rIe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function FT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),VT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function LT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function RN(n,e){const t=Zq(n);null!==e.validator?n.setValidators(Xq(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Jq(n);null!==e.asyncValidator?n.setAsyncValidators(Xq(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();LT(e._rawValidators,i),LT(e._rawAsyncValidators,i)}function VT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Zq(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Jq(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return LT(e._rawValidators,r),LT(e._rawAsyncValidators,r),t}function c8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function u8(n,e){RN(n,e)}function PN(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function d8(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===yb?t=s:function cIe(n){return Object.getPrototypeOf(n.constructor)===lf}(s)?r=s:i=s}),i||r||t||null}const dIe={provide:Xs,useExisting:Gn(()=>BT)},wb=Promise.resolve();let BT=(()=>{class n extends Xs{get submitted(){return Xa(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=cb(()=>this.submittedReactive()),this.submittedReactive=Gh(!1),this._directives=new Set,this.ngSubmit=new un,this.form=new cf({},vN(t),bN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){wb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ib(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){wb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){wb.then(()=>{const r=this._findContainer(t.path),i=new cf({});u8(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){wb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){wb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),d8(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Me(Ss,10),Me(Qu,10),Me(uf,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&dn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rr([dIe]),bn]})}}return n})();function h8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function f8(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const hg=class extends NT{constructor(e=null,t,r){super(DN(t),xN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=f8(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){h8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){h8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){f8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},pIe={provide:Yu,useExisting:Gn(()=>NN)},g8=Promise.resolve();let NN=(()=>{class n extends Yu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new hg,this._registered=!1,this.name="",this.update=new un,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kN(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),PN(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ib(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){g8.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&ri(r);g8.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?OT(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Me(Xs,9),Me(Ss,10),Me(Qu,10),Me(el,10),Me(ba,8),Me(uf,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rr([pIe]),bn,as]})}}return n})(),ON=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const FN=new ye(""),bIe={provide:Xs,useExisting:Gn(()=>UT)};let UT=(()=>{class n extends Xs{get submitted(){return Xa(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=cb(()=>this._submittedReactive()),this._submittedReactive=Gh(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new un,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(VT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ib(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){FT(t.control||null,t,!1),function uIe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),d8(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new JEe(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new eIe(this.form))}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(FT(r||null,t),(n=>n instanceof hg)(i)&&(Ib(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);u8(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function aIe(n,e){return VT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){RN(this.form,this),this._oldForm&&VT(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||n)(Me(Ss,10),Me(Qu,10),Me(uf,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&dn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rr([bIe]),bn,as]})}}return n})();const wIe={provide:Yu,useExisting:Gn(()=>BN)};let BN=(()=>{class n extends Yu{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new un,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kN(0,s)}ngOnChanges(t){this._added||this._setUpControl(),PN(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return OT(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Me(Xs,13),Me(Ss,10),Me(Qu,10),Me(el,10),Me(FN,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[rr([wIe]),bn,as]})}}return n})(),k8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({})}}return n})();class N8 extends NT{constructor(e,t,r){super(DN(t),xN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){a8(this,0,e),e.forEach((r,i)=>{o8(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function O8(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let VIe=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return O8(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new cf(i,s)}record(t,r=null){const i=this._reduceControls(t);return new l8(i,r)}control(t,r,i){let s={};return this.useNonNullable?(O8(r)?s=r:(s.validators=r,s.asyncValidators=i),new hg(t,{...s,nonNullable:!0})):new hg(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new N8(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof hg||t instanceof NT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),F8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uf,useValue:t.callSetDisabledState??Eb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({imports:[k8]})}}return n})(),L8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:FN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:uf,useValue:t.callSetDisabledState??Eb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({imports:[k8]})}}return n})();function jT(...n){const e=pb(n),t=uN(n),{args:r,keys:i}=Mq(n);if(0===r.length)return zn([],e);const s=new Vt(function BIe(n,e,t=Ri){return r=>{V8(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)V8(e,()=>{const c=zn(n[l],e);let u=!1;c.subscribe(ke(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Pq(i,o):Ri));return t?s.pipe(_N(t)):s}function V8(n,e,t){n?Oc(t,n,e):e()}const zT=Zr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function fg(n=1/0){return Qi(Ri,n)}function Cb(...n){return function UIe(){return fg(1)}()(zn(n,pb(n)))}function Tb(n){return new Vt(e=>{Ys(n()).subscribe(e)})}function Ab(n,e){const t=pt(n)?n:()=>n,r=i=>i.error(t());return new Vt(e?i=>e.schedule(r,0,i):r)}const tl=new Vt(n=>n.complete());function $N(){return me((n,e)=>{let t=null;n._refCount++;const r=ke(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class B8 extends Vt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,j(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new St;const t=this.getSubject();e.add(this.source.subscribe(ke(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=St.EMPTY)}return e}refCount(){return $N()(this)}}function Yi(n){return n<=0?()=>tl:me((e,t)=>{let r=0;e.subscribe(ke(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function nl(...n){const e=pb(n);return me((t,r)=>{(e?Cb(n,t,e):Cb(n,t)).subscribe(r)})}function HT(n){return me((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function U8(n=zIe){return me((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zIe(){return new zT}function Xu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qr((i,s)=>n(i,s,r)):Ri,Yi(1),t?HT(e):U8(()=>new zT))}function ii(n,e,t){const r=pt(n)||e||t?{next:n,error:e,complete:t}:n;return r?me((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ke(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Ri}function Zu(n){return me((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ke(t,void 0,void 0,o=>{s=Ys(n(o,Zu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function pg(n,e){return me(function HIe(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ke(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function WN(n){return n<=0?()=>tl:me((e,t)=>{let r=[];e.subscribe(ke(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function j8(n){return Ve(()=>n)}function mg(n){return me((e,t)=>{Ys(n).subscribe(ke(t,()=>t.complete(),gs)),!t.closed&&e.subscribe(t)})}const Xt="primary",Sb=Symbol("RouteTitle");class WIe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gg(n){return new WIe(n)}function GIe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function kl(n,e){const t=n?GN(n):void 0,r=e?GN(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!z8(n[i],e[i]))return!1;return!0}function GN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function z8(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function H8(n){return n.length>0?n[n.length-1]:null}function Ju(n){return function HN(n){return!!n&&(n instanceof Vt||pt(n.lift)&&pt(n.subscribe))}(n)?n:ib(n)?zn(Promise.resolve(n)):qe(n)}const KIe={exact:function G8(n,e,t){if(!ff(n.segments,e.segments)||!$T(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!G8(n.children[r],e.children[r],t))return!1;return!0},subset:q8},$8={exact:function QIe(n,e){return kl(n,e)},subset:function YIe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>z8(n[t],e[t]))},ignored:()=>!0};function W8(n,e,t){return KIe[t.paths](n.root,e.root,t.matrixParams)&&$8[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function q8(n,e,t){return K8(n,e,e.segments,t)}function K8(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ff(i,t)||e.hasChildren()||!$T(i,t,r))}if(n.segments.length===t.length){if(!ff(n.segments,t)||!$T(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!q8(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ff(n.segments,i)&&$T(n.segments,i,r)&&n.children[Xt])&&K8(n.children[Xt],e,s,r)}}function $T(n,e,t){return e.every((r,i)=>$8[t](n[i].parameters,r.parameters))}class hf{constructor(e=new Jn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gg(this.queryParams),this._queryParamMap}toString(){return JIe.serialize(this)}}class Jn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return GT(this)}}class Db{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gg(this.parameters),this._parameterMap}toString(){return X8(this)}}function ff(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let _g=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>new WT,providedIn:"root"})}}return n})();class WT{parse(e){const t=new uwe(e);return new hf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${xb(e.root,!0)}`,r=function nwe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${qT(t)}=${qT(i)}`).join("&"):`${qT(t)}=${qT(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ewe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const JIe=new WT;function GT(n){return n.segments.map(e=>X8(e)).join("/")}function xb(n,e){if(!n.hasChildren())return GT(n);if(e){const t=n.children[Xt]?xb(n.children[Xt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Xt&&r.push(`${i}:${xb(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ZIe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Xt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Xt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Xt?[xb(n.children[Xt],!1)]:[`${i}:${xb(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${GT(n)}/${t[0]}`:`${GT(n)}/(${t.join("//")})`}}function Q8(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qT(n){return Q8(n).replace(/%3B/gi,";")}function qN(n){return Q8(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function KT(n){return decodeURIComponent(n)}function Y8(n){return KT(n.replace(/\+/g,"%20"))}function X8(n){return`${qN(n.path)}${function twe(n){return Object.entries(n).map(([e,t])=>`;${qN(e)}=${qN(t)}`).join("")}(n.parameters)}`}const rwe=/^[^\/()?;#]+/;function KN(n){const e=n.match(rwe);return e?e[0]:""}const iwe=/^[^\/()?;=#]+/,owe=/^[^=?&#]+/,lwe=/^[^&#]+/;class uwe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jn([],{}):new Jn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new Jn(e,t)),r}parseSegment(){const e=KN(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Db(KT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function swe(n){const e=n.match(iwe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=KN(this.remaining);i&&(r=i,this.capture(r))}e[KT(t)]=KT(r)}parseQueryParam(e){const t=function awe(n){const e=n.match(owe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function cwe(n){const e=n.match(lwe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Y8(t),s=Y8(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=KN(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Xt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Xt]:new Jn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}}function Z8(n){return n.segments.length>0?new Jn([],{[Xt]:n}):n}function J8(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=J8(i);if(r===Xt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function dwe(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new Jn(n.segments.concat(e.segments),e.children)}return n}(new Jn(n.segments,e))}function pf(n){return n instanceof hf}function e9(n){let e;const i=Z8(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new Jn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function t9(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return QN(i,i,i,t,r);const s=function fwe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new r9(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new r9(t,e,r)}(e);if(s.toRoot())return QN(i,i,new Jn([],{}),t,r);const o=function pwe(n,e,t){if(n.isAbsolute)return new YT(e,!0,0);if(!t)return new YT(e,!1,NaN);if(null===t.parent)return new YT(t,!0,0);const r=QT(n.commands[0])?0:1;return function mwe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new YT(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Mb(o.segmentGroup,o.index,s.commands):i9(o.segmentGroup,o.index,s.commands);return QN(i,o.segmentGroup,a,t,r)}function QT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rb(n){return"object"==typeof n&&null!=n&&n.outlets}function QN(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:n9(n,e,t);const a=Z8(J8(o));return new hf(a,s,i)}function n9(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:n9(s,e,t)}),new Jn(n.segments,r)}class r9{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&QT(r[0]))throw new K(4003,!1);const i=r.find(Rb);if(i&&i!==H8(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class YT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function i9(n,e,t){if(n??=new Jn([],{}),0===n.segments.length&&n.hasChildren())return Mb(n,e,t);const r=function _we(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Rb(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!o9(l,c,o))return s;r+=2}else{if(!o9(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Jn(n.segments.slice(0,r.pathIndex),{});return s.children[Xt]=new Jn(n.segments.slice(r.pathIndex),n.children),Mb(s,0,i)}return r.match&&0===i.length?new Jn(n.segments,{}):r.match&&!n.hasChildren()?YN(n,e,t):r.match?Mb(n,0,i):YN(n,e,t)}function Mb(n,e,t){if(0===t.length)return new Jn(n.segments,{});{const r=function gwe(n){return Rb(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Xt)&&n.children[Xt]&&1===n.numberOfChildren&&0===n.children[Xt].segments.length){const s=Mb(n.children[Xt],e,t);return new Jn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=i9(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Jn(n.segments,i)}}function YN(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Rb(s)){const l=ywe(s.outlets);return new Jn(r,l)}if(0===i&&QT(t[0])){r.push(new Db(n.segments[e].path,s9(t[0]))),i++;continue}const o=Rb(s)?s.outlets[Xt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&QT(a)?(r.push(new Db(o,s9(a))),i+=2):(r.push(new Db(o,{})),i++)}return new Jn(r,{})}function ywe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=YN(new Jn([],{}),0,r))}),e}function s9(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function o9(n,e,t){return n==t.path&&kl(e,t.parameters)}const Pb="imperative";var En=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(En||{});class Nl{constructor(e,t){this.id=e,this.url=t}}class XT extends Nl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=En.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fc extends Nl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=En.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ko=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ko||{}),ZT=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ZT||{});class mf extends Nl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=En.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yg extends Nl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=En.NavigationSkipped}}class XN extends Nl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=En.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class a9 extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=En.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vwe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=En.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bwe extends Nl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=En.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ewe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=En.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Iwe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=En.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wwe{constructor(e){this.route=e,this.type=En.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Cwe{constructor(e){this.route=e,this.type=En.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Twe{constructor(e){this.snapshot=e,this.type=En.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Awe{constructor(e){this.snapshot=e,this.type=En.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Swe{constructor(e){this.snapshot=e,this.type=En.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dwe{constructor(e){this.snapshot=e,this.type=En.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l9{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=En.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ZN{}class JT{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function rl(n){return n.outlet||Xt}function kb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Nwe{get injector(){return kb(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Nb(this.rootInjector),this.attachRef=null}}let Nb=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Nwe(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Se(Oi))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class c9{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=JN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=JN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=e1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return e1(e,this._root).map(t=>t.value)}}function JN(n,e){if(n===e.value)return e;for(const t of e.children){const r=JN(n,t);if(r)return r}return null}function e1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=e1(n,t);if(r.length)return r.unshift(e),r}return[]}class il{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class u9 extends c9{constructor(e,t){super(e),this.snapshot=t,t1(this,e)}toString(){return this.snapshot.toString()}}function d9(n){const e=function Owe(n){const s=new tA([],{},{},"",{},Xt,n,null,{});return new h9("",new il(s,[]))}(n),t=new F([new Db("",{})]),r=new F({}),i=new F({}),s=new F({}),o=new F(""),a=new bg(t,r,s,o,i,Xt,n,e.root);return a.snapshot=e.root,new u9(new il(a,[]),e)}class bg{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ve(c=>c[Sb]))??qe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(e=>gg(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(e=>gg(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function eA(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&p9(i)&&(r.resolve[Sb]=i.title),r}class tA{get title(){return this.data?.[Sb]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gg(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gg(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class h9 extends c9{constructor(e,t){super(t),this.url=e,t1(this,t)}toString(){return f9(this._root)}}function t1(n,e){e.value._routerState=n,e.children.forEach(t=>t1(n,t))}function f9(n){const e=n.children.length>0?` { ${n.children.map(f9).join(", ")} } `:"";return`${n.value}${e}`}function n1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kl(e.params,t.params)||n.paramsSubject.next(t.params),function qIe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),kl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function r1(n,e){const t=kl(n.params,e.params)&&function XIe(n,e){return ff(n,e)&&n.every((t,r)=>kl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||r1(n.parent,e.parent))}function p9(n){return"string"==typeof n.title||null===n.title}let s1=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new un,this.deactivateEvents=new un,this.attachEvents=new un,this.detachEvents=new un,this.parentContexts=k(Nb),this.location=k(Eo),this.changeDetector=k(ba),this.inputBinder=k(nA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new o1(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[as]})}}return n})();class o1{__ngOutletInjector(e){return new o1(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bg?this.route:e===Nb?this.childContexts:this.parent.get(e,t)}}const nA=new ye("");let m9=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=jT([r.queryParams,r.params,r.data]).pipe(Yt(([s,o,a],l)=>(a={...s,...o,...a},0===l?qe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function fye(n){const e=Qt(n);if(!e)return null;const t=new Nv(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function Ob(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Lwe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ob(n,r,i);return Ob(n,r)})}(n,e,t);return new il(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ob(n,a)),o}}const r=function Vwe(n){return new bg(new F(n.url),new F(n.params),new F(n.queryParams),new F(n.fragment),new F(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Ob(n,s));return new il(r,i)}}class a1{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const g9="ngNavigationCancelingError";function rA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=pf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_9(!1,Ko.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function _9(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[g9]=!0,t.cancellationCode=e,t}function y9(n){return!!n&&n[g9]}class jwe{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),n1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=vg(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=vg(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Dwe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Awe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(n1(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),n1(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class v9{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class iA{constructor(e,t){this.component=e,this.route=t}}function zwe(n,e,t){const r=n._root;return Fb(r,e?e._root:null,t,[r.value])}function Eg(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function hR(n){return null!==yu(n)}(n)?e.get(n):n:r}function Fb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=vg(e);return n.children.forEach(o=>{(function $we(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Wwe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ff(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ff(n.url,e.url)||!kl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!r1(n,e)||!kl(n.queryParams,e.queryParams);default:return!r1(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new v9(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Fb(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new iA(a.outlet.component,o))}else o&&Lb(e,a,i),i.canActivateChecks.push(new v9(r)),Fb(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Lb(a,t.getContext(o),i)),i}function Lb(n,e,t){const r=vg(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Lb(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new iA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Vb(n){return"function"==typeof n}function b9(n){return n instanceof zT||"EmptyError"===n?.name}const sA=Symbol("INITIAL_VALUE");function Ig(){return Yt(n=>jT(n.map(e=>e.pipe(Yi(1),nl(sA)))).pipe(Ve(e=>{for(const t of e)if(!0!==t){if(t===sA)return sA;if(!1===t||Zwe(t))return t}return!0}),Qr(e=>e!==sA),Yi(1)))}function Zwe(n){return pf(n)||n instanceof a1}function E9(n){return function La(...n){return ua(n)}(ii(e=>{if("boolean"!=typeof e)throw rA(0,e)}),Ve(e=>!0===e))}class l1{constructor(e){this.segmentGroup=e||null}}class oA extends Error{constructor(e){super(),this.urlTree=e}}function wg(n){return Ab(new l1(n))}class d0e{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return qe(r);if(i.numberOfChildren>1||!i.children[Xt])return Ab(new K(4e3,!1));i=i.children[Xt]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:m,params:y,data:b,title:T}=i,M=Is(s,()=>a({params:y,data:b,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:m,title:T}));if(M instanceof hf)throw new oA(M);t=M}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new oA(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new hf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Jn(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const c1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function h0e(n,e,t,r,i){const s=I9(n,e,t);return s.matched?(r=function xwe(n,e){return n.providers&&!n._injector&&(n._injector=IC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function l0e(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?qe(i.map(o=>{const a=Eg(o,n);return Ju(function Xwe(n){return n&&Vb(n.canMatch)}(a)?a.canMatch(e,t):Is(n,()=>a(e,t)))})).pipe(Ig(),E9()):qe(!0)}(r,e,t).pipe(Ve(o=>!0===o?s:{...c1}))):qe(s)}function I9(n,e,t){if("**"===e.path)return function f0e(n){return{matched:!0,parameters:n.length>0?H8(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...c1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||GIe)(t,n,e);if(!i)return{...c1};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function w9(n,e,t,r){return t.length>0&&function g0e(n,e,t){return t.some(r=>aA(n,e,r)&&rl(r)!==Xt)}(n,t,r)?{segmentGroup:new Jn(e,m0e(r,new Jn(t,n.children))),slicedSegments:[]}:0===t.length&&function _0e(n,e,t){return t.some(r=>aA(n,e,r))}(n,t,r)?{segmentGroup:new Jn(n.segments,p0e(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Jn(n.segments,n.children),slicedSegments:t}}function p0e(n,e,t,r){const i={};for(const s of t)if(aA(n,e,s)&&!r[rl(s)]){const o=new Jn([],{});i[rl(s)]=o}return{...r,...i}}function m0e(n,e){const t={};t[Xt]=e;for(const r of n)if(""===r.path&&rl(r)!==Xt){const i=new Jn([],{});t[rl(r)]=i}return t}function aA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class v0e{}class I0e{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new d0e(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){const e=w9(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ve(({children:t,rootSnapshot:r})=>{const i=new il(r,t),s=new h9("",i),o=function hwe(n,e,t=null,r=null){return t9(e9(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new tA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Xt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Xt,t).pipe(Ve(r=>({children:r,rootSnapshot:t})),Zu(r=>{if(r instanceof oA)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof l1?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Ve(o=>o instanceof il?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return zn(s).pipe(ag(o=>{const a=r.children[o],l=function kwe(n,e){const t=n.filter(r=>rl(r)===e);return t.push(...n.filter(r=>rl(r)!==e)),t}(t,o);return this.processSegmentGroup(e,l,a,o,i)}),pg((o,a)=>(o.push(...a),o)),HT(null),function $Ie(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qr((i,s)=>n(i,s,r)):Ri,WN(1),t?HT(e):U8(()=>new zT))}(),Qi(o=>{if(null===o)return wg(r);const a=C9(o);return function w0e(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),qe(a)}))}processSegment(e,t,r,i,s,o,a){return zn(t).pipe(ag(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(Zu(c=>{if(c instanceof l1)return qe(null);throw c}))),Xu(l=>!!l),Zu(l=>{if(b9(l))return function y0e(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?qe(new v0e):wg(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return rl(r)===o||o!==Xt&&aA(i,s,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):wg(i):wg(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:m}=I9(t,i,s);if(!l)return wg(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const y=new tA(s,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,T9(i),rl(i),i.component??i._loadedComponent??null,i,A9(i)),b=eA(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);const T=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,y,e);return this.applyRedirects.lineralizeSegments(i,T).pipe(Qi(M=>this.processSegment(e,r,t,M.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=h0e(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(Yt(l=>l.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Yt(({routes:c})=>{const u=r._loadedInjector??e,{parameters:d,consumedSegments:m,remainingSegments:y}=l,b=new tA(m,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,T9(r),rl(r),r.component??r._loadedComponent??null,r,A9(r)),T=eA(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(T.params),b.data=Object.freeze(T.data);const{segmentGroup:M,slicedSegments:B}=w9(t,m,y,c);if(0===B.length&&M.hasChildren())return this.processChildren(u,c,M,b).pipe(Ve(Q=>new il(b,Q)));if(0===c.length&&0===B.length)return qe(new il(b,[]));const V=rl(r)===s;return this.processSegment(u,c,M,B,V?Xt:s,!0,b).pipe(Ve(Q=>new il(b,Q instanceof il?[Q]:[])))})):wg(t)))}getChildConfig(e,t,r){return t.children?qe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function a0e(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?qe(!0):qe(i.map(o=>{const a=Eg(o,n);return Ju(function qwe(n){return n&&Vb(n.canLoad)}(a)?a.canLoad(e,t):Is(n,()=>a(e,t)))})).pipe(Ig(),E9())}(e,t,r).pipe(Qi(i=>i?this.configLoader.loadChildren(e,t).pipe(ii(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function u0e(){return Ab(_9(!1,Ko.GuardRejected))}())):qe({routes:[],injector:e})}}function C0e(n){const e=n.value.routeConfig;return e&&""===e.path}function C9(n){const e=[],t=new Set;for(const r of n){if(!C0e(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=C9(r.children);e.push(new il(r.value,i))}return e.filter(r=>!t.has(r))}function T9(n){return n.data||{}}function A9(n){return n.resolve||{}}function S9(n){const e=n.children.map(t=>S9(t)).flat();return[n,...e]}function u1(n){return Yt(e=>{const t=n(e);return t?zn(t).pipe(Ve(()=>e)):qe(e)})}let D9=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Xt);return r}getResolvedTitleForRoute(t){return t.data[Sb]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>k(R0e),providedIn:"root"})}}return n})(),R0e=(()=>{class n extends D9{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Se(kbe))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Cg=new ye("",{providedIn:"root",factory:()=>({})});let x9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qn({type:n,selectors:[["ng-component"]],standalone:!0,features:[yi],decls:1,vars:0,template:function(r,i){1&r&&qt(0,"router-outlet")},dependencies:[s1],encapsulation:2})}}return n})();function d1(n){const e=n.children&&n.children.map(d1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=x9),t}const Tg=new ye("");let h1=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(o6)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ju(t.loadComponent()).pipe(Ve(R9),ii(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),lg(()=>{this.componentLoaders.delete(t)})),i=new B8(r,()=>new E).pipe($N());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return qe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function M0e(n,e,t,r){return Ju(n.loadChildren()).pipe(Ve(R9),Qi(i=>i instanceof E3||Array.isArray(i)?qe(i):zn(e.compileModuleAsync(i))),Ve(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Tg,[],{optional:!0,self:!0}).flat()),{routes:o.map(d1),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(lg(()=>{this.childrenLoaders.delete(r)})),o=new B8(s,()=>new E).pipe($N());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R9(n){return function P0e(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let f1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>k(k0e),providedIn:"root"})}}return n})(),k0e=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const M9=new ye(""),P9=new ye("");function N0e(n,e,t){const r=n.get(P9),i=n.get(pn);return n.get(_t).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s;const o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),function O0e(n){return new Promise(e=>{xc({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:l}=r;return l&&Is(n,()=>l({transition:a,from:e,to:t})),o})}const k9=new ye("");let lA=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new E,this.transitionAbortSubject=new E,this.configLoader=k(h1),this.environmentInjector=k(Oi),this.urlSerializer=k(_g),this.rootContexts=k(Nb),this.location=k(rg),this.inputBindingEnabled=null!==k(nA,{optional:!0}),this.titleStrategy=k(D9),this.options=k(Cg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(f1),this.createViewTransition=k(M9,{optional:!0}),this.navigationErrorHandler=k(k9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>qe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Cwe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new wwe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new F({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Pb,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qr(s=>0!==s.id),Ve(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Yt(s=>{let o=!1,a=!1;return qe(s).pipe(Yt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ko.SupersededByNewNavigation),tl;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:"string"==typeof l.extras.browserUrl?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new yg(l.id,this.urlSerializer.serialize(l.rawUrl),d,ZT.IgnoredSameUrlNavigation)),l.resolve(!1),tl}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return qe(l).pipe(Yt(d=>{const m=this.transitions?.getValue();return this.events.next(new XT(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions?.getValue()?tl:Promise.resolve(d)}),function T0e(n,e,t,r,i,s){return Qi(o=>function b0e(n,e,t,r,i,s,o="emptyOnly"){return new I0e(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Ve(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ii(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const m=new a9(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:d,extractedUrl:m,source:y,restoredState:b,extras:T}=l,M=new XT(d,this.urlSerializer.serialize(m),y,b);this.events.next(M);const B=d9(this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:B,urlAfterRedirects:m,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=m,qe(s)}{const d="";return this.events.next(new yg(l.id,this.urlSerializer.serialize(l.extractedUrl),d,ZT.IgnoredByUrlHandlingStrategy)),l.resolve(!1),tl}}),ii(l=>{const c=new vwe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Ve(l=>(this.currentTransition=s={...l,guards:zwe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Jwe(n,e){return Qi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?qe({...t,guardsResult:!0}):function e0e(n,e,t,r){return zn(n).pipe(Qi(i=>function o0e(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?qe(s.map(a=>{const l=kb(e)??i,c=Eg(a,l);return Ju(function Ywe(n){return n&&Vb(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):Is(l,()=>c(n,e,t,r))).pipe(Xu())})).pipe(Ig()):qe(!0)}(i.component,i.route,t,e,r)),Xu(i=>!0!==i,!0))}(o,r,i,n).pipe(Qi(a=>a&&function Gwe(n){return"boolean"==typeof n}(a)?function t0e(n,e,t,r){return zn(e).pipe(ag(i=>Cb(function r0e(n,e){return null!==n&&e&&e(new Twe(n)),qe(!0)}(i.route.parent,r),function n0e(n,e){return null!==n&&e&&e(new Swe(n)),qe(!0)}(i.route,r),function s0e(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Hwe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Tb(()=>qe(o.guards.map(l=>{const c=kb(o.node)??t,u=Eg(l,c);return Ju(function Qwe(n){return n&&Vb(n.canActivateChild)}(u)?u.canActivateChild(r,n):Is(c,()=>u(r,n))).pipe(Xu())})).pipe(Ig())));return qe(s).pipe(Ig())}(n,i.path,t),function i0e(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return qe(!0);const i=r.map(s=>Tb(()=>{const o=kb(e)??t,a=Eg(s,o);return Ju(function Kwe(n){return n&&Vb(n.canActivate)}(a)?a.canActivate(e,n):Is(o,()=>a(e,n))).pipe(Xu())}));return qe(i).pipe(Ig())}(n,i.route,t))),Xu(i=>!0!==i,!0))}(r,s,n,e):qe(a)),Ve(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),ii(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw rA(0,l.guardsResult);const c=new bwe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Qr(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",Ko.GuardRejected),!1)),u1(l=>{if(l.guards.canActivateChecks.length)return qe(l).pipe(ii(c=>{const u=new Ewe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Yt(c=>{let u=!1;return qe(c).pipe(function A0e(n,e){return Qi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return qe(t);const s=new Set(i.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const c of S9(l))o.add(c);let a=0;return zn(o).pipe(ag(l=>s.has(l)?function S0e(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!p9(i)&&(s[Sb]=i.title),function D0e(n,e,t,r){const i=GN(n);if(0===i.length)return qe({});const s={};return zn(i).pipe(Qi(o=>function x0e(n,e,t,r){const i=kb(e)??r,s=Eg(n,i);return Ju(s.resolve?s.resolve(e,t):Is(i,()=>s(e,t)))}(n[o],e,t,r).pipe(Xu(),ii(a=>{if(a instanceof a1)throw rA(new WT,a);s[o]=a}))),WN(1),j8(s),Zu(o=>b9(o)?tl:Ab(o)))}(s,n,e,r).pipe(Ve(o=>(n._resolvedData=o,n.data=eA(n,n.parent,t).resolve,null)))}(l,r,n,e):(l.data=eA(l,l.parent,n).resolve,qe(void 0))),ii(()=>a++),WN(1),Qi(l=>a===o.size?qe(t):tl))})}(this.paramsInheritanceStrategy,this.environmentInjector),ii({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Ko.NoDataFromResolver)}}))}),ii(c=>{const u=new Iwe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),u1(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(ii(m=>{u.component=m}),Ve(()=>{})));for(const m of u.children)d.push(...c(m));return d};return jT(c(l.targetSnapshot.root)).pipe(HT(null),Yi(1))}),u1(()=>this.afterPreactivation()),Yt(()=>{const{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?zn(u).pipe(Ve(()=>s)):qe(s)}),Ve(l=>{const c=function Fwe(n,e,t){const r=Ob(n,e._root,t?t._root:void 0);return new u9(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,s}),ii(()=>{this.events.next(new ZN)}),((n,e,t,r)=>Ve(i=>(new jwe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Yi(1),ii({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),mg(this.transitionAbortSubject.pipe(ii(l=>{throw l}))),lg(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ko.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zu(l=>{if(a=!0,y9(l))this.events.next(new mf(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function Bwe(n){return y9(n)&&pf(n.url)}(l)?this.events.next(new JT(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{const c=new XN(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{const u=Is(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof a1){const{message:d,cancellationCode:m}=rA(0,u);this.events.next(new mf(s.id,this.urlSerializer.serialize(s.extractedUrl),d,m)),this.events.next(new JT(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);const d=t.errorHandler(l);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return tl}))}))}cancelNavigationTransition(t,r,i){const s=new mf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F0e(n){return n!==Pb}let L0e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>k(B0e),providedIn:"root"})}}return n})();class V0e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let B0e=(()=>{class n extends V0e{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})()}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),N9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>k(U0e),providedIn:"root"})}}return n})(),U0e=(()=>{class n extends N9{constructor(){super(...arguments),this.location=k(rg),this.urlSerializer=k(_g),this.options=k(Cg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(f1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=d9(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof XT)this.stateMemento=this.createStateMemento();else if(t instanceof yg)this.rawUrlTree=r.initialUrl;else if(t instanceof a9){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ZN?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof mf&&(t.code===Ko.GuardRejected||t.code===Ko.NoDataFromResolver)?this.restoreHistory(r):t instanceof XN?this.restoreHistory(r,!0):t instanceof Fc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof hf?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})()}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Bb=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Bb||{});function O9(n,e){n.events.pipe(Qr(t=>t instanceof Fc||t instanceof mf||t instanceof XN||t instanceof yg),Ve(t=>t instanceof Fc||t instanceof yg?Bb.COMPLETE:t instanceof mf&&(t.code===Ko.Redirect||t.code===Ko.SupersededByNewNavigation)?Bb.REDIRECTING:Bb.FAILED),Qr(t=>t!==Bb.REDIRECTING),Yi(1)).subscribe(()=>{e()})}function j0e(n){throw n}const z0e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},H0e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ol=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(Q5),this.stateManager=k(N9),this.options=k(Cg,{optional:!0})||{},this.pendingTasks=k(Tc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(lA),this.urlSerializer=k(_g),this.location=k(rg),this.urlHandlingStrategy=k(f1),this._events=new E,this.errorHandler=this.options.errorHandler||j0e,this.navigated=!1,this.routeReuseStrategy=k(L0e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Tg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(nA,{optional:!0}),this.eventsSubscription=new St,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof mf&&r.code!==Ko.Redirect&&r.code!==Ko.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fc)this.navigated=!0;else if(r instanceof JT){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||F0e(i.source),...o};this.scheduleNavigation(a,Pb,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function W0e(n){return!(n instanceof ZN||n instanceof JT)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pb,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(d1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=e9(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),d=this.currentUrlTree.root}return t9(d,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=pf(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Pb,null,r)}navigate(t,r={skipLocationChange:!1}){return function $0e(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new K(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...z0e}:!1===r?{...H0e}:r,pf(t))return W8(this.currentUrlTree,t,i);const s=this.parseUrl(t);return W8(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,m)=>{a=d,l=m});const u=this.pendingTasks.add();return O9(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class F9{}let K0e=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Qr(t=>t instanceof Fc),ag(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=IC(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return zn(i).pipe(fg())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):qe(null);const s=i.pipe(Qi(o=>null===o?qe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?zn([s,this.loader.loadComponent(r)]).pipe(fg()):s})}static{this.\u0275fac=function(r){return new(r||n)(Se(Ol),Se(o6),Se(Oi),Se(F9),Se(h1))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const m1=new ye("");let L9=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof XT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof yg&&t.code===ZT.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof l9&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new l9(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function q$(){throw new Error("invalid")}()}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function Fl(n,e){return{\u0275kind:n,\u0275providers:e}}function B9(){const n=k(Sn);return e=>{const t=n.get(va);if(e!==t.components[0])return;const r=n.get(Ol),i=n.get(U9);1===n.get(g1)&&r.initialNavigation(),n.get(j9,null,Bt.Optional)?.setUpPreloading(),n.get(m1,null,Bt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const U9=new ye("",{factory:()=>new E}),g1=new ye("",{providedIn:"root",factory:()=>1}),j9=new ye("");function Z0e(n){return Fl(0,[{provide:j9,useExisting:K0e},{provide:F9,useExisting:n}])}function eCe(n){return Fl(9,[{provide:M9,useValue:N0e},{provide:P9,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const z9=new ye("ROUTER_FORROOT_GUARD"),tCe=[rg,{provide:_g,useClass:WT},Ol,Nb,{provide:bg,useFactory:function V9(n){return n.routerState.root},deps:[Ol]},h1,[]];let H9=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[tCe,[],{provide:Tg,multi:!0,useValue:t},{provide:z9,useFactory:sCe,deps:[[Ol,new Mi,new pc]]},{provide:Cg,useValue:r||{}},r?.useHash?{provide:tf,useClass:yye}:{provide:tf,useClass:t7},{provide:m1,useFactory:()=>{const n=k(Nve),e=k(_t),t=k(Cg),r=k(lA),i=k(_g);return t.scrollOffset&&n.setOffset(t.scrollOffset),new L9(i,r,n,e,t)}},r?.preloadingStrategy?Z0e(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?oCe(r):[],r?.bindToComponentInputs?Fl(8,[m9,{provide:nA,useExisting:m9}]).\u0275providers:[],r?.enableViewTransitions?eCe().\u0275providers:[],[{provide:$9,useFactory:B9},{provide:WC,multi:!0,useExisting:$9}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Tg,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Se(z9,8))}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({})}}return n})();function sCe(n){return"guarded"}function oCe(n){return["disabled"===n.initialNavigation?Fl(3,[{provide:$C,multi:!0,useFactory:()=>{const e=k(Ol);return()=>{e.setUpLocationChangeListener()}}},{provide:g1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fl(2,[{provide:g1,useValue:0},{provide:$C,multi:!0,deps:[Sn],useFactory:e=>{const t=e.get(gye,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ol),s=e.get(U9);O9(i,()=>{r(!0)}),e.get(lA).afterPreactivation=()=>(r(!0),s.closed?qe(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const $9=new ye("");function W9(n){return null!=n&&"false"!=`${n}`}function G9(n,e=0){return function lCe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):2===arguments.length?e:0}function cA(n){return Array.isArray(n)?n:[n]}function Ai(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ag(n){return n instanceof Vn?n.nativeElement:n}const cCe=["addListener","removeListener"],uCe=["addEventListener","removeEventListener"],dCe=["on","off"];function uA(n,e,t,r){if(pt(t)&&(r=t,t=void 0),r)return uA(n,e,t).pipe(_N(r));const[i,s]=function pCe(n){return pt(n.addEventListener)&&pt(n.removeEventListener)}(n)?uCe.map(o=>a=>n[o](e,a,t)):function hCe(n){return pt(n.addListener)&&pt(n.removeListener)}(n)?cCe.map(q9(n,e)):function fCe(n){return pt(n.on)&&pt(n.off)}(n)?dCe.map(q9(n,e)):[];if(!i&&dN(n))return Qi(o=>uA(o,e,t))(Ys(n));if(!i)throw new TypeError("Invalid event target");return new Vt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function q9(n,e){return t=>r=>n[t](e,r)}class mCe extends St{constructor(e,t){super()}schedule(e,t=0){return this}}const dA={setInterval(n,e,...t){const{delegate:r}=dA;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=dA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class hA extends mCe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return dA.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&dA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,en(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Ub={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Ub;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new St(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Ub;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Ub;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},_1={now:()=>(_1.delegate||Date).now(),delegate:void 0};class jb{constructor(e,t=jb.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}jb.now=_1.now;class fA extends jb{constructor(e,t=jb.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class _Ce extends fA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class gCe extends hA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Ub.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(Ub.cancelAnimationFrame(t),e._scheduled=void 0)}});let y1,vCe=1;const pA={};function K9(n){return n in pA&&(delete pA[n],!0)}const bCe={setImmediate(n){const e=vCe++;return pA[e]=!0,y1||(y1=Promise.resolve()),y1.then(()=>K9(e)&&n()),e},clearImmediate(n){K9(n)}},{setImmediate:ECe,clearImmediate:ICe}=bCe,mA={setImmediate(...n){const{delegate:e}=mA;return(e?.setImmediate||ECe)(...n)},clearImmediate(n){const{delegate:e}=mA;return(e?.clearImmediate||ICe)(n)},delegate:void 0},gf=(new class CCe extends fA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class wCe extends hA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=mA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(mA.clearImmediate(t),e._scheduled=void 0)}}),new fA(hA)),ACe=gf;function Q9(n=0,e,t=ACe){let r=-1;return null!=e&&(X7(e)?t=e:r=e),new Vt(i=>{let s=function DCe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Y9(n,e=gf){return function SCe(n){return me((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(ke(t,c=>{r=!0,i=c,s||Ys(n(c)).subscribe(s=ke(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>Q9(n,e))}let v1;try{v1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{v1=!1}let zb,Ds=(()=>{class n{_platformId=k($s);isBrowser=this._platformId?C7(this._platformId):"object"==typeof document&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!(!window.chrome&&!v1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Dg(n){return function xCe(){if(null==zb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zb=!0}))}finally{zb=zb||!1}return zb}()?n:!!n.capture}var Ll=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Ll||{});let gA,_f,b1;function Z9(){if(null==_f){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return _f=!1,_f;if("scrollBehavior"in document.documentElement.style)_f=!0;else{const n=Element.prototype.scrollTo;_f=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return _f}function Hb(){if("object"!=typeof document||!document)return Ll.NORMAL;if(null==gA){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),gA=Ll.NORMAL,0===n.scrollLeft&&(n.scrollLeft=1,gA=0===n.scrollLeft?Ll.NEGATED:Ll.INVERTED),n.remove()}return gA}function E1(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Vl(n){return n.composedPath?n.composedPath()[0]:n.target}function J9(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const PCe=new ye("cdk-dir-doc",{providedIn:"root",factory:function kCe(){return k(pn)}}),NCe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let xg=(()=>{class n{value="ltr";change=new un;constructor(){const t=k(PCe,{optional:!0});t&&(this.value=function OCe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?NCe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$b=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({})}return n})(),eK=(()=>{class n{_ngZone=k(_t);_platform=k(Ds);_document=k(pn,{optional:!0});constructor(){}_scrolled=new E;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Vt(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(Y9(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):qe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Qr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Ag(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>uA(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LCe=(()=>{class n{elementRef=k(Vn);scrollDispatcher=k(eK);ngZone=k(_t);dir=k(xg,{optional:!0});_destroyed=new E;_elementScrolled=new Vt(t=>this.ngZone.runOutsideAngular(()=>uA(this.elementRef.nativeElement,"scroll").pipe(mg(this._destroyed)).subscribe(t)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&Hb()!=Ll.NORMAL?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),Hb()==Ll.INVERTED?t.left=t.right:Hb()==Ll.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;Z9()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?i:r:"end"==t&&(t=o?r:i),o&&Hb()==Ll.INVERTED?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Hb()==Ll.NEGATED?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),I1=(()=>{class n{_platform=k(Ds);_listeners;_viewportSize;_change=new E;_document=k(pn,{optional:!0});constructor(){const t=k(_t),r=k(Wh).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){const i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Y9(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({})}return n})(),tK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[$b,Wb,$b,Wb]})}return n})();class w1{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class C1 extends w1{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=s}}class _A extends w1{templateRef;viewContainerRef;context;injector;constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class BCe extends w1{element;constructor(e){super(),this.element=e instanceof Vn?e.nativeElement:e}}class T1{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof C1?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof _A?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof BCe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class UCe extends T1{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,r,i,s){super(),this.outletElement=e,this._appRef=r,this._defaultInjector=i,this._document=s}attachComponentPortal(e){let t;if(e.viewContainerRef){const r=e.injector||e.viewContainerRef.injector,i=r.get(Dc,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else t=X6(e.component,{elementInjector:e.injector||this._defaultInjector||Sn.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(t.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(t.hostView),t.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}attachDomPortal=e=>{const t=e.element,r=this._document.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let A1=(()=>{class n extends T1{_moduleRef=k(Dc,{optional:!0});_document=k(pn);_viewContainerRef=k(Eo);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new un;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,i=r.createComponent(t.component,{index:r.length,injector:t.injector||r.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=t=>{const r=t.element,i=this._document.createComment("dom-portal");t.setAttachedHost(this),r.parentNode.insertBefore(i,r),this._getRootNode().appendChild(r),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(r,i)})};_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[bn]})}return n})(),yA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({})}return n})();const vA=new WeakMap;let ed=(()=>{class n{_appRef;_injector=k(Sn);_environmentInjector=k(Oi);load(t){const r=this._appRef=this._appRef||this._injector.get(va);let i=vA.get(r);i||(i={loaders:new Set,refs:[]},vA.set(r,i),r.onDestroy(()=>{vA.get(r)?.refs.forEach(s=>s.destroy()),vA.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(X6(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],standalone:!0,features:[yi],decls:0,vars:0,template:function(r,i){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function td(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function sK(n,e=gf){return me((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(ke(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function oK(n){return Qr((e,t)=>n<=t)}function M1(n,e=Ri){return n=n??eTe,me((t,r)=>{let i,s=!0;t.subscribe(ke(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function eTe(n,e){return n===e}let tTe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[tTe]})}return n})();const cK=new Set;let yf,nTe=(()=>{class n{_platform=k(Ds);_nonce=k(IM,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):iTe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function rTe(n,e){if(!cK.has(n))try{yf||(yf=document.createElement("style"),e&&yf.setAttribute("nonce",e),yf.setAttribute("type","text/css"),document.head.appendChild(yf)),yf.sheet&&(yf.sheet.insertRule(`@media ${n} {body{ }}`,0),cK.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iTe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let uK=(()=>{class n{_mediaMatcher=k(nTe);_zone=k(_t);_queries=new Map;_destroySubject=new E;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return dK(cA(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=jT(dK(cA(t)).map(o=>this._registerQuery(o).observable));return s=Cb(s.pipe(Yi(1)),s.pipe(oK(1),sK(0))),s.pipe(Ve(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Vt(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(nl(r),Ve(({matches:o})=>({query:t,matches:o})),mg(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dK(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function fK(n,e,t){const r=pK(n,e);t=t.trim(),!r.some(i=>i.trim()===t)&&(r.push(t),n.setAttribute(e,r.join(" ")))}function P1(n,e,t){const r=pK(n,e);t=t.trim();const i=r.filter(s=>s!==t);i.length?n.setAttribute(e,i.join(" ")):n.removeAttribute(e)}function pK(n,e){return n.getAttribute(e)?.match(/\S+/g)??[]}class mK{_letterKeyStream=new E;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new E;selectedItem=this._selectedItem;constructor(e,t){const r="number"==typeof t?.debounceInterval?t.debounceInterval:200;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){const t=e.keyCode;e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(ii(t=>this._pressedLetters.push(t)),sK(e),Qr(()=>this._pressedLetters.length>0),Ve(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let r=1;r<this._items.length+1;r++){const s=this._items[(this._selectedItemIndex+r)%this._items.length];if(!this._skipPredicateFn?.(s)&&0===s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)){this._selectedItem.next(s);break}}this._pressedLetters=[]})}}class gK{_items;_activeItemIndex=-1;_activeItem=Gh(null);_wrap=!1;_typeaheadSubscription=St.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof Oh?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):Ov(e)&&(this._effectRef=function Y6(n,e){Gs("NgSignals"),!e?.injector&&Fr();const t=e?.injector??k(Sn),r=!0!==e?.manualCleanup?t.get(av):null,i=new hye(t.get(cye),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(ba,null,{optional:!0});return s&&8&s._lView[dt]?(s._lView[wh]??=[]).push(i.watcher.notify):i.watcher.notify(),i}(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new E;change=new E;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();const t=this._getItemsArray();return this._typeahead=new mK(t,{debounceInterval:"number"==typeof e?e:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((i||td(e,"shiftKey"))&&this._typeahead?.handleKey(e))}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem.set(t[r]??null),this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return Ov(this._items)?this._items():this._items instanceof Oh?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);const t=this._activeItem();if(t){const r=e.indexOf(t);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r))}}}class cTe extends gK{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class uTe extends gK{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let vK=(()=>{class n{_platform=k(Ds);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function mTe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function pTe(n){try{return n.frameElement}catch{return null}}(function wTe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===EK(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=EK(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function ETe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function ITe(n){return!function _Te(n){return function vTe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function gTe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function yTe(n){return function bTe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||bK(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bK(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function EK(n){if(!bK(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class IK{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,r,i,s=!1,o){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._injector=o,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?xc(e,{injector:this._injector}):setTimeout(e)}}let CTe=(()=>{class n{_checker=k(vK);_ngZone=k(_t);_document=k(pn);_injector=k(Sn);constructor(){k(ed).load(nK)}create(t,r=!1){return new IK(t,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function k1(n){return 0===n.buttons||0===n.detail}function N1(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const TTe=new ye("cdk-input-modality-detector-options"),ATe={ignoreKeys:[18,17,224,91,16]},Rg=Dg({passive:!0,capture:!0});let STe=(()=>{class n{_platform=k(Ds);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new F(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Vl(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(k1(t)?"keyboard":"mouse"),this._mostRecentTarget=Vl(t))};_onTouchstart=t=>{N1(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vl(t))};constructor(){const t=k(_t),r=k(pn),i=k(TTe,{optional:!0});this._options={...ATe,...i},this.modalityDetected=this._modality.pipe(oK(1)),this.modalityChanged=this.modalityDetected.pipe(M1()),this._platform.isBrowser&&t.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Rg),r.addEventListener("mousedown",this._onMousedown,Rg),r.addEventListener("touchstart",this._onTouchstart,Rg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Rg),document.removeEventListener("mousedown",this._onMousedown,Rg),document.removeEventListener("touchstart",this._onTouchstart,Rg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var EA=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(EA||{});const xTe=new ye("cdk-focus-monitor-default-options"),IA=Dg({passive:!0,capture:!0});let wA=(()=>{class n{_ngZone=k(_t);_platform=k(Ds);_inputModalityDetector=k(STe);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=k(pn,{optional:!0});_stopInputModalityDetector=new E;constructor(){const t=k(xTe,{optional:!0});this._detectionMode=t?.detectionMode||EA.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{for(let i=Vl(t);i;i=i.parentElement)"focus"===t.type?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){const i=Ag(t);if(!this._platform.isBrowser||1!==i.nodeType)return qe();const s=function MCe(n){if(function RCe(){if(null==b1){const n=typeof document<"u"?document.head:null;b1=!(!n||!n.createShadowRoot&&!n.attachShadow)}return b1}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new E,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Ag(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Ag(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===EA.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===EA.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Vl(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,IA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,IA)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(mg(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,IA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,IA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vf=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(vf||{});const CK="cdk-high-contrast-black-on-white",TK="cdk-high-contrast-white-on-black",O1="cdk-high-contrast-active";let AK=(()=>{class n{_platform=k(Ds);_hasCheckedHighContrastMode;_document=k(pn);_breakpointSubscription;constructor(){this._breakpointSubscription=k(uK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return vf.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return vf.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return vf.BLACK_ON_WHITE}return vf.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(O1,CK,TK),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===vf.BLACK_ON_WHITE?t.add(O1,CK):r===vf.WHITE_ON_BLACK&&t.add(O1,TK)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RTe=(()=>{class n{constructor(){k(AK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[lK]})}return n})();const F1={};let bf=(()=>{class n{_appId=k(Fh);getId(t){return"ng"!==this._appId&&(t+=this._appId),F1.hasOwnProperty(t)||(F1[t]=0),`${t}${F1[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sl(...n){const e=pb(n),t=function Vbe(n,e){return"number"==typeof cN(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ys(r[0]):fg(t)(zn(r,e)):tl}const SK=Z9();class MTe{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ai(-this._previousScrollPosition.left),e.style.top=Ai(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),SK&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),SK&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class PTe{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Qr(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}class DK{enable(){}disable(){}attach(){}}function L1(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function xK(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class kTe{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();L1(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let NTe=(()=>{class n{_scrollDispatcher=k(eK);_viewportRuler=k(I1);_ngZone=k(_t);_document=k(pn);constructor(){}noop=()=>new DK;close=t=>new PTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,t);block=()=>new MTe(this._viewportRuler,this._document);reposition=t=>new kTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,t);static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class CA{positionStrategy;scrollStrategy=new DK;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class OTe{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let RK=(()=>{class n{_attachedOverlays=[];_document=k(pn);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FTe=(()=>{class n extends RK{_ngZone=k(_t);_renderer=k(Wh).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{const r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LTe=(()=>{class n extends RK{_platform=k(Ds);_ngZone=k(_t,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=t=>{this._pointerDownEventTarget=Vl(t)};_clickListener=t=>{const r=Vl(t),i="click"===t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;const s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){const a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(MK(a.overlayElement,r)||MK(a.overlayElement,i))break;const l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MK(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let PK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],standalone:!0,features:[yi],decls:0,vars:0,template:function(r,i){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),V1=(()=>{class n{_platform=k(Ds);_containerElement;_document=k(pn);_styleLoader=k(ed);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||J9()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),J9()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(PK)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class B1{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropElement=null;_backdropTimeout;_backdropClick=new E;_attachments=new E;_detachments=new E;_positionStrategy;_scrollStrategy;_locationChanges=St.EMPTY;_cleanupBackdropClick;_cleanupBackdropTransitionEnd;_previousHostParent;_keydownEvents=new E;_outsidePointerEvents=new E;_renders=new E;_afterRenderRef;_afterNextRenderRef;constructor(e,t,r,i,s,o,a,l,c,u=!1,d,m){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=m,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=Xa(()=>function M3(n,e){!e?.injector&&Fr();const t=e?.injector??k(Sn);return $o(t)?(Gs("NgAfterRender"),P3(n,t,e,!1)):k3}(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=xc(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ai(this._config.width),e.height=Ai(this._config.height),e.minWidth=Ai(this._config.minWidth),e.minHeight=Ai(this._config.minHeight),e.maxWidth=Ai(this._config.maxWidth),e.maxHeight=Ai(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._cleanupBackdropClick?.(),this._cleanupBackdropClick=this._renderer.listen(this._backdropElement,"click",t=>this._backdropClick.next(t)),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{this._cleanupBackdropTransitionEnd?.(),this._cleanupBackdropTransitionEnd=this._renderer.listen(e,"transitionend",t=>{this._disposeBackdrop(t.target)})}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=cA(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(mg(sl(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){this._cleanupBackdropClick?.(),this._cleanupBackdropTransitionEnd?.(),e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const kK="cdk-overlay-connected-position-bounding-box",VTe=/([A-Za-z%]+)$/;class BTe{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new E;_resizeSubscription=St.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(kK),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ef(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(kK),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=OK(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let m=0-a,y=a+s.height-r.height,b=this._subtractOverflows(s.width,0-o,o+s.width-r.width),T=this._subtractOverflows(s.height,m,y),M=b*T;return{visibleArea:M,isCompletelyWithinViewport:s.width*s.height===M,fitsInViewportVertically:T===s.height,fitsInViewportHorizontally:b==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=NK(this._overlayRef.getConfig().minHeight),a=NK(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=OK(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,d=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,d=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function UTe(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,r)){const i=new OTe(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,d,m;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const y=Math.min(r.bottom-e.y+r.top,e.y),b=this._lastBoundingBoxSize.height;s=2*y,o=e.y-y,s>b&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-b/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)m=r.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)d=e.x,u=r.right-e.x;else{const y=Math.min(r.right-e.x+r.left,e.x),b=this._lastBoundingBoxSize.width;u=2*y,d=e.x-y,u>b&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-b/2)}return{top:o,left:d,bottom:a,right:m,width:u,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Ai(r.height),i.top=Ai(r.top),i.bottom=Ai(r.bottom),i.width=Ai(r.width),i.left=Ai(r.left),i.right=Ai(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Ai(s)),o&&(i.maxWidth=Ai(o))}this._lastBoundingBoxSize=r,Ef(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Ef(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ef(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();Ef(r,this._getExactOverlayY(t,e,u)),Ef(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Ai(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Ai(o.maxWidth):s&&(r.maxWidth="")),Ef(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Ai(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Ai(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:xK(e,r),isOriginOutsideView:L1(e,r),isOverlayClipped:xK(t,r),isOverlayOutsideView:L1(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&cA(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Vn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Ef(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function NK(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(VTe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function OK(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const FK="cdk-global-overlay-wrapper";class jTe{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(FK),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let y="",b="",T="";l?T="flex-start":"center"===u?(T="center",m?b=d:y=d):m?"left"===u||"end"===u?(T="flex-end",y=d):("right"===u||"start"===u)&&(T="flex-start",b=d):"left"===u||"start"===u?(T="flex-start",y=d):("right"===u||"end"===u)&&(T="flex-end",b=d),e.position=this._cssPosition,e.marginLeft=l?"0":y,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":b,t.justifyContent=T,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(FK),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let zTe=(()=>{class n{_viewportRuler=k(I1);_document=k(pn);_platform=k(Ds);_overlayContainer=k(V1);constructor(){}global(){return new jTe}flexibleConnectedTo(t){return new BTe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cs=(()=>{class n{scrollStrategies=k(NTe);_overlayContainer=k(V1);_positionBuilder=k(zTe);_keyboardDispatcher=k(FTe);_injector=k(Sn);_ngZone=k(_t);_document=k(pn);_directionality=k(xg);_location=k(rg);_outsideClickDispatcher=k(LTe);_animationsModuleType=k(Tl,{optional:!0});_idGenerator=k(bf);_renderer=k(Wh).createRenderer(null,null);_appRef;_styleLoader=k(ed);constructor(){}create(t){this._styleLoader.load(PK);const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new CA(t);return o.direction=o.direction||this._directionality.value,new B1(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(Oi),this._renderer)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id=this._idGenerator.getId("cdk-overlay-"),r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(va)),new UCe(t,null,this._appRef,this._injector,this._document)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const WTe={provide:new ye("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.reposition()}}),deps:[cs],useFactory:function $Te(n){return()=>n.scrollStrategies.reposition()}};let qb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[cs,WTe],imports:[$b,yA,tK,tK]})}return n})();function GTe(n,e){}class Kb{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext}let LK=(()=>{class n extends T1{_elementRef=k(Vn);_focusTrapFactory=k(CTe);_config;_interactivityChecker=k(vK);_ngZone=k(_t);_overlayRef=k(B1);_focusMonitor=k(wA);_renderer=k(Ga);_platform=k(Ds);_document=k(pn,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=k(ba);_injector=k(Sn);_isDestroyed=!1;constructor(){super(),this._config=k(Kb,{optional:!0})||new Kb,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}attachDomPortal=t=>{this._portalOutlet.hasAttached();const r=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{s(),o(),t.removeAttribute("tabindex")},s=this._renderer.listen(t,"blur",i),o=this._renderer.listen(t,"mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){this._isDestroyed||xc(()=>{const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=E1(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=E1();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=E1()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&Zh(A1,7),2&r){let s;wo(s=Co())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&Zn("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},standalone:!0,features:[bn,yi],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&Rt(0,GTe,0,0,"ng-template",0)},dependencies:[A1],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class U1{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new E;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!td(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const VK=new ye("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.block()}}),qTe=new ye("DialogData"),KTe=new ye("DefaultDialogConfig");let BK=(()=>{class n{_overlay=k(cs);_injector=k(Sn);_defaultOptions=k(KTe,{optional:!0});_parentDialog=k(n,{optional:!0,skipSelf:!0});_overlayContainer=k(V1);_idGenerator=k(bf);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;_ariaHiddenElements=new Map;_scrollStrategy=k(VK);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Tb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(nl(void 0)));constructor(){}open(t,r){(r={...this._defaultOptions||new Kb,...r}).id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),o=this._overlay.create(s),a=new U1(o,r),l=this._attachContainer(o,a,r);return a.containerInstance=l,this._attachDialogContent(t,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){j1(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){j1(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),j1(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new CA({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,o=[{provide:Kb,useValue:i},{provide:U1,useValue:r},{provide:B1,useValue:t}];let a;i.container?"function"==typeof i.container?a=i.container:(a=i.container.type,o.push(...i.container.providers(i))):a=LK;const l=new C1(a,i.viewContainerRef,Sn.create({parent:s||this._injector,providers:o}));return t.attach(l).instance}_attachDialogContent(t,r,i,s){if(t instanceof pa){const o=this._createInjector(s,r,i,void 0);let a={$implicit:s.data,dialogRef:r};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new _A(t,null,a,o))}else{const o=this._createInjector(s,r,i,this._injector),a=i.attachComponentPortal(new C1(t,s.viewContainerRef,o));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,i,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:qTe,useValue:t.data},{provide:U1,useValue:r}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(r,t,i)):a.push(...t.providers)),t.direction&&(!o||!o.get(xg,null,{optional:!0}))&&a.push({provide:xg,useValue:{value:t.direction,change:qe()}}),Sn.create({parent:o||s,providers:a})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j1(n,e){let t=n.length;for(;t--;)e(n[t])}let YTe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[BK],imports:[qb,yA,RTe,yA]})}return n})();const XTe=["text"],ZTe=[[["mat-icon"]],"*"],JTe=["mat-icon","*"];function eAe(n,e){if(1&n&&qt(0,"mat-pseudo-checkbox",1),2&n){const t=rt();Ye("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function tAe(n,e){1&n&&qt(0,"mat-pseudo-checkbox",3),2&n&&Ye("disabled",rt().disabled)}function nAe(n,e){if(1&n&&(Te(0,"span",4),at(1),De()),2&n){const t=rt();xe(),Rn("(",t.group.label,")")}}let or=(()=>{class n{constructor(){k(AK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[$b,$b]})}return n})(),z1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["structural-styles"]],standalone:!0,features:[yi],decls:0,vars:0,template:function(r,i){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var Ca=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Ca||{});class lAe{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ca.HIDDEN;constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}}const UK=Dg({passive:!0,capture:!0});class cAe{_events=new Map;addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,UK)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,UK)))}_delegateEventHandler=e=>{const t=Vl(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}const TA={enterDuration:225,exitDuration:150},jK=Dg({passive:!0,capture:!0}),zK=["mousedown","touchstart"],HK=["mouseup","mouseleave","touchend","touchcancel"];let dAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],standalone:!0,features:[yi],decls:0,vars:0,template:function(r,i){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})();class Yb{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new cAe;constructor(e,t,r,i,s){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=Ag(r)),s&&s.get(ed).load(dAe)}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...TA,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function hAe(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),y=d.transitionDuration,b="none"===d.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,T=new lAe(this,u,r,b);u.style.transform="scale3d(1, 1, 1)",T.state=Ca.FADING_IN,r.persistent||(this._mostRecentTransientRipple=T);let M=null;return!b&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const B=()=>{M&&(M.fallbackTimer=null),clearTimeout(Q),this._finishRippleTransition(T)},V=()=>this._destroyRipple(T),Q=setTimeout(V,c+100);u.addEventListener("transitionend",B),u.addEventListener("transitioncancel",V),M={onTransitionEnd:B,onTransitionCancel:V,fallbackTimer:Q}}),this._activeRipples.set(T,M),(b||!c)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(e.state===Ca.FADING_OUT||e.state===Ca.HIDDEN)return;const t=e.element,r={...TA,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Ca.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ag(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,zK.forEach(r=>{Yb._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{HK.forEach(t=>{this._triggerElement.addEventListener(t,this,jK)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ca.FADING_IN?this._startFadeOutTransition(e):e.state===Ca.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Ca.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ca.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=k1(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!N1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Ca.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ca.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(zK.forEach(t=>Yb._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(HK.forEach(t=>e.removeEventListener(t,this,jK)),this._pointerUpEventsRegistered=!1))}}const $K=new ye("mat-ripple-global-options");let WK=(()=>{class n{_elementRef=k(Vn);_animationMode=k(Tl,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){const t=k(_t),r=k(Ds),i=k($K,{optional:!0}),s=k(Sn);this._globalOptions=i||{},this._rippleRenderer=new Yb(this,t,this._elementRef,r,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&_i("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),H1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or,or]})}return n})(),fAe=(()=>{class n{_animationMode=k(Tl,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,i){2&r&&_i("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[yi],decls:0,vars:0,template:function(r,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})(),pAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or]})}return n})();const GK=new ye("MAT_OPTION_PARENT_COMPONENT"),qK=new ye("MatOptgroup");class KK{source;isUserInput;constructor(e,t=!1){this.source=e,this.isUserInput=t}}let QK=(()=>{class n{_element=k(Vn);_changeDetectorRef=k(ba);_parent=k(GK,{optional:!0});group=k(qK,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=k(bf).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=t}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}onSelectionChange=new un;_text;_stateChanges=new E;constructor(){k(ed).load(z1),k(ed).load(nK),this._signalDisableRipple=!!this._parent&&Ov(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!td(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new KK(this,t))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["mat-option"]],viewQuery:function(r,i){if(1&r&&Zh(XTe,7),2&r){let s;wo(s=Co())&&(i._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,i){1&r&&dn("click",function(){return i._selectViaInteraction()})("keydown",function(o){return i._handleKeydown(o)}),2&r&&(qv("id",i.id),Zn("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),_i("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",ri]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Dl,yi],ngContentSelectors:JTe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,i){1&r&&(Qa(ZTe),Rt(0,eAe,1,2,"mat-pseudo-checkbox",1),Ki(1),Te(2,"span",2,0),Ki(4,1),De(),Rt(5,tAe,1,1,"mat-pseudo-checkbox",3)(6,nAe,2,1,"span",4),qt(7,"div",5)),2&r&&(Wv(i.multiple?0:-1),xe(5),Wv(i.multiple||!i.selected||i.hideSingleSelectionIndicator?-1:5),xe(),Wv(i.group&&i.group._inert?6:-1),xe(),Ye("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[fAe,WK],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),Pg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[H1,or,pAe]})}return n})();const YK={capture:!0},XK=["focus","mousedown","mouseenter","touchstart"],$1="mat-ripple-loader-uninitialized",W1="mat-ripple-loader-class-name",ZK="mat-ripple-loader-centered",AA="mat-ripple-loader-disabled";let _Ae=(()=>{class n{_document=k(pn,{optional:!0});_animationMode=k(Tl,{optional:!0});_globalRippleOptions=k($K,{optional:!0});_platform=k(Ds);_ngZone=k(_t);_injector=k(Sn);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(const t of XK)this._document?.addEventListener(t,this._onInteraction,YK)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of XK)this._document?.removeEventListener(r,this._onInteraction,YK)}configureRipple(t,r){t.setAttribute($1,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(W1))&&t.setAttribute(W1,r.className||""),r.centered&&t.setAttribute(ZK,""),r.disabled&&t.setAttribute(AA,"")}setDisabled(t,r){const i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(AA,""):t.removeAttribute(AA)}_onInteraction=t=>{const r=Vl(t);if(r instanceof HTMLElement){const i=r.closest(`[${$1}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(W1)),t.append(r);const i="NoopAnimations"===this._animationMode,s=this._globalRippleOptions,o=i?0:s?.animation?.enterDuration??TA.enterDuration,a=i?0:s?.animation?.exitDuration??TA.exitDuration,l={rippleDisabled:i||s?.disabled||t.hasAttribute(AA),rippleConfig:{centered:t.hasAttribute(ZK),terminateOnPointerUp:s?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:a}}},c=new Yb(l,this._ngZone,r,this._platform,this._injector),u=!l.rippleDisabled;u&&c.setupTriggerEvents(t),this._hosts.set(t,{target:l,renderer:c,hasSetUpEvents:u}),t.removeAttribute($1)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Pt||{});const Lc="*";function If(n,e){return{type:Pt.Trigger,name:n,definitions:e,options:{}}}function ol(n,e=null){return{type:Pt.Animate,styles:e,timings:n}}function G1(n,e=null){return{type:Pt.Group,steps:n,options:e}}function Si(n){return{type:Pt.Style,styles:n,offset:null}}function wf(n,e,t){return{type:Pt.State,name:n,styles:e,options:t}}function al(n,e,t=null){return{type:Pt.Transition,expr:n,animation:e,options:t}}class Xb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class JK{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function wAe(n,e){}class eQ{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration}const Y1="mdc-dialog--open",tQ="mdc-dialog--opening",nQ="mdc-dialog--closing";let rQ=(()=>{class n extends LK{_animationMode=k(Tl,{optional:!0});_animationStateChanged=new un;_animationsEnabled="NoopAnimations"!==this._animationMode;_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?sQ(this._config.enterAnimationDuration)??150:0;_exitAnimationDuration=this._animationsEnabled?sQ(this._config.exitAnimationDuration)??75:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(iQ,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(tQ,Y1)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Y1),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Y1),this._animationsEnabled?(this._hostElement.style.setProperty(iQ,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(nQ)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(tQ,nQ)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275cmp=qn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){2&r&&(qv("id",i._config.id),Zn("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),_i("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},standalone:!0,features:[bn,yi],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"div",1),Rt(2,wAe,0,0,"ng-template",2),De()())},dependencies:[A1],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})();const iQ="--mat-dialog-transition-duration";function sQ(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?G9(n.substring(0,n.length-2)):n.endsWith("s")?1e3*G9(n.substring(0,n.length-1)):"0"===n?0:null}var SA=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(SA||{});class Zb{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new E;_beforeClosed=new E;_result;_closeFallbackTimeout;_state=SA.OPEN;_closeInteractionType;constructor(e,t,r){this._ref=e,this._containerInstance=r,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(Qr(i=>"opened"===i.state),Yi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Qr(i=>"closed"===i.state),Yi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),sl(this.backdropClick(),this.keydownEvents().pipe(Qr(i=>27===i.keyCode&&!this.disableClose&&!td(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function oQ(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Qr(t=>"closing"===t.state),Yi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=SA.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=SA.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const aQ=new ye("MatMdcDialogData"),AAe=new ye("mat-mdc-dialog-default-options"),lQ=new ye("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.block()}});let kg=(()=>{class n{_overlay=k(cs);_defaultOptions=k(AAe,{optional:!0});_scrollStrategy=k(lQ);_parentDialog=k(n,{optional:!0,skipSelf:!0});_idGenerator=k(bf);_dialog=k(BK);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;dialogConfigClass=eQ;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Tb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(nl(void 0)));constructor(){this._dialogRefConstructor=Zb,this._dialogContainerType=rQ,this._dialogDataToken=aQ}open(t,r){let i;(r={...this._defaultOptions||new eQ,...r}).id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:Kb,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(o,a,l)=>(i=new this._dialogRefConstructor(o,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=s.componentRef,i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cQ=(()=>{class n{_dialogRef=k(Zb,{optional:!0});_elementRef=k(Vn);_dialog=k(kg);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=function dQ(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,standalone:!0})}return n})(),X1=(()=>{class n extends cQ{id=k(bf).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Xe({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,i){2&r&&qv("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[bn]})}return n})(),uQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[g3([LCe])]})}return n})();let RAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[kg],imports:[YTe,qb,yA,or,or]})}return n})();function MAe(n,e){1&n&&qt(0,"img",8),2&n&&Ye("src",rt().imgPath,Ws)}let Ng=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r,this.title=r.title||"\u63d0\u793a",this.message=r.message||"\u8acb\u7a0d\u5f8c\u518d\u8a66",this.imgPath=r.imgPath||"",this.closeMessage=r.closeMessage||"\u95dc\u9589"}close(){this.dialogRef.close()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(Me(Zb),Me(aQ))}}static{this.\u0275cmp=qn({type:n,selectors:[["app-message-dialog"]],decls:11,vars:4,consts:[["mat-dialog-title","",1,"text-xl","font-semibold","text-primary-default","mb-4"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],[1,"flex","w-4/5","items-center","justify-start"],["alt","\u7121\u641c\u5c0b\u7d50\u679c","class","w-24 h-24 sm:w-16 sm:h-16 md:w-24 md:h-24",3,"src",4,"ngIf"],[1,"text-primary-default","sm:text-xl","font-bold","ml-2","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],[1,"text-primary-default","lg:text-md","sm:text-xl"],[1,"flex","items-center","bg-primary-white","justify-center","py-3"],[1,"px-2","py-2","text-white","bg-success","rounded-full","hover:bg-primary-default","focus:outline-none","focus:ring-2","focus:ring-primary-light",3,"click"],["alt","\u7121\u641c\u5c0b\u7d50\u679c",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24",3,"src"]],template:function(r,i){1&r&&(Te(0,"h1",0),at(1),De(),Te(2,"div",1)(3,"div",2),Rt(4,MAe,1,1,"img",3),Te(5,"h5",4)(6,"div",5),at(7),De()()()(),Te(8,"div",6)(9,"button",7),dn("click",function(){return i.close()}),at(10),De()()),2&r&&(xe(),Rn(" ",i.title,"\n"),xe(3),Ye("ngIf",i.imgPath),xe(3),Rn(" ",i.message," "),xe(3),Rn(" ",i.closeMessage," "))},dependencies:[sg,X1]})}}return n})();const xs_familyMartUrl_icon="https://www.family.com.tw/NewEnterprise/CSR/images/favicon.ico",xs_familyMartUrl_base="https://stamp.family.com.tw/api/maps",xs_familyMartUrl_endpoint={mapClassificationInfo:"/MapClassificationInfo",mapProductInfo:"/MapProductInfo"},xs_sevenElevenUrl_icon="https://www.7-11.com.tw/favicon.ico",xs_sevenElevenUrl_base="https://lovefood.openpoint.com.tw/LoveFood/api/",xs_sevenElevenUrl_endpoint={accessToken:"Auth/FrontendAuth/AccessToken",getList:"Master/FrontendItemCategory/GetList",getStoreByAddress:"Master/FrontendStore/GetStoreByAddress",getNearbyStoreList:"Search/FrontendStoreItemStock/GetNearbyStoreList",getStoreDetail:"Search/FrontendStoreItemStock/GetStoreDetail"},xs_sevenElevenUrl_params={mid_v:"W0_DiF4DlgU5OeQoRswrRcaaNHMWOL7K3ra3389ocJQv-rdOWS6Zu4AtGa7-7pjiccl0C5gm0u5UNONXuVUXcJCidRjIv9dsUd8PocNr5moiuJJ8hZla5iV0H3-8dZfASc7GgEm74679LYK2hBB-Sam6D0LAnYK9Lb0DZjaSctnHS5yYugtrYNdWoWk"},xs_firebaseConfig={apiKey:"AIzaSyA3i_YLXpXuHNrmrHULrqnsIj5Z919aCfw",authDomain:"friendly-cat-for-you.firebaseapp.com",databaseURL:"https://friendly-cat-for-you-default-rtdb.firebaseio.com",projectId:"friendly-cat-for-you",storageBucket:"friendly-cat-for-you.firebasestorage.app",messagingSenderId:"614210455616",appId:"1:614210455616:web:cedabfd68dca95ae4337a5",measurementId:"G-3V3740GPG7"};var nd=G(2541);let PAe=(()=>{class n{constructor(){}getCurrentPosition(){return new Promise((t,r)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>t(i),i=>r(i)):r(new Error("\u700f\u89bd\u5668\u4e0d\u652f\u63f4\u5730\u7406\u4f4d\u7f6e\u529f\u80fd"))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fQ=(()=>{class n{constructor(t){this.http=t}get(t,r={}){let i=new Pl;for(const s in r)r.hasOwnProperty(s)&&(i=i.set(s,r[s]));return this.http.get(t,{params:i})}post(t,r,i){let s=new Pl;if(r)for(const o in r)r.hasOwnProperty(o)&&(s=s.set(o,r[o]));return this.http.post(t,i||{},{params:s})}static{this.\u0275fac=function(r){return new(r||n)(Se(gb))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pQ=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=xs_sevenElevenUrl_base}getAccessToken(){return this.requestService.post(this.baseUrl+xs_sevenElevenUrl_endpoint.accessToken,xs_sevenElevenUrl_params)}getStoreByAddress(t){const r=this.baseUrl+xs_sevenElevenUrl_endpoint.getStoreByAddress,i={token:sessionStorage.getItem("711Token"),keyword:t};return this.requestService.post(r,i)}getNearByStoreList(t){const r=this.baseUrl+xs_sevenElevenUrl_endpoint.getNearbyStoreList,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,t)}getFoodCategory(){const t=this.baseUrl+xs_sevenElevenUrl_endpoint.getList,r={token:sessionStorage.getItem("711Token")};return this.requestService.post(t,r)}getItemsByStoreNo(t){const r=this.baseUrl+xs_sevenElevenUrl_endpoint.getStoreDetail,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,{storeNo:t,CurrentLocation:{Latitude:25.0375197,Longitude:121.5636704}})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/seven_eleven_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Se(fQ))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kAe=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=xs_familyMartUrl_base}getStores(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/family_mart_stores.json")}getNearByStoreList(t){return this.requestService.post(this.baseUrl+xs_familyMartUrl_endpoint.mapProductInfo,null,{ProjectCode:"202106302",OldPKeys:[],PostInfo:"",Latitude:t.Latitude,Longitude:t.Longitude})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/family_mart_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Se(fQ))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jn=G(1631);(0,jn.registerVersion)("firebase","10.14.1","app");const VAe=new class LAe extends fA{}(class FAe extends hA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),rd=new Jh("ANGULARFIRE2_VERSION");function mQ(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Z1=(n,e)=>{const t=e?[e]:(0,jn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class DA{constructor(){return Z1(UAe)}}const UAe="app-check";function Og(){}class gQ{zone;delegate;constructor(e,t=VAe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class jAe{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Og,{},Og,Og)),t.pipe(ii({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fg=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new gQ(Zone.current)),this.insideAngular=t.run(()=>new gQ(Zone.current,gf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Se(_t))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lg(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Cf(n){return Lg().ngZone.run(()=>n())}function Ui(n){return function HAe(n){return function(t){return(t=t.lift(new jAe(n.ngZone))).pipe(rf(n.outsideAngular),Wu(n.insideAngular))}}(Lg())(n)}const $Ae=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Cf(()=>n.apply(void 0,r))},Vc=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Cf(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Og,{},Og,Og))),r[s]=$Ae(r[s],t));const i=function zAe(n){return Lg().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Vt){const s=Lg();return i.pipe(rf(s.outsideAngular),Wu(s.insideAngular))}return Cf(()=>i)}return i instanceof Vt?i.pipe(Ui):i instanceof Promise?Cf(()=>new Promise((s,o)=>i.then(a=>Cf(()=>s(a)),a=>Cf(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Cf(()=>i)};class Jb{constructor(e){return e}}class J1{constructor(){return(0,jn.getApps)()}}const eO=new ye("angularfire2._apps"),GAe={provide:Jb,useFactory:function WAe(n){return n&&1===n.length?n[0]:new Jb((0,jn.getApp)())},deps:[[new Mi,eO]]},qAe={provide:J1,deps:[[new Mi,eO]]};function KAe(n){return(e,t)=>{const r=t.get($s);(0,jn.registerVersion)("angularfire",rd.full,"core"),(0,jn.registerVersion)("angularfire",rd.full,"app"),(0,jn.registerVersion)("angular",K5.full,r.toString());const i=e.runOutsideAngular(()=>n(t));return new Jb(i)}}function QAe(n,...e){return El([GAe,qAe,{provide:eO,useFactory:KAe(n),multi:!0,deps:[_t,Sn,Fg,...e]}])}const YAe=Vc(jn.initializeApp,!0);var id=G(443),N=G(1401),To=G(5398),Qo=G(8779);class xA{constructor(e){return e}}const tO=new ye("angularfire2.auth-instances");function JAe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new xA(r)}}const eSe={provide:class XAe{constructor(){return Z1("auth")}},deps:[[new Mi,tO]]},tSe={provide:xA,useFactory:function ZAe(n,e){const t=mQ("auth",n,e);return t&&new xA(t)},deps:[[new Mi,tO],Jb]};function nSe(n,...e){return(0,jn.registerVersion)("angularfire",rd.full,"auth"),El([tSe,eSe,{provide:tO,useFactory:JAe(n),multi:!0,deps:[_t,Sn,Fg,J1,[new Mi,DA],...e]}])}const rSe=Vc(id.aa,!0),iSe=Vc(id.o,!0),sSe=Vc(id.y,!0),nO=Vc(id.ag,!0),oSe=Vc(id.ab,!0),aSe=Vc(id.c,!0),lSe=Vc(id.ak,!0),ze=function(n,e){if(!n)throw Vg(e)},Vg=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},yQ=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},iO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let m=(15&a)<<2|c>>6,y=63&c;l||(y=64,o||(m=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yQ(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new uSe;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uSe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vQ=function(n){const e=yQ(n);return iO.encodeByteArray(e,!0)},RA=function(n){return vQ(n).replace(/\./g,"")},MA=function(n){try{return iO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dSe(n){return bQ(void 0,n)}function bQ(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!hSe(t)||(n[t]=bQ(n[t],e[t]));return n}function hSe(n){return"__proto__"!==n}const PA=()=>{try{return function fSe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&MA(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},EQ=n=>{var e,t;return null===(t=null===(e=PA())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},IQ=()=>{var n;return null===(n=PA())||void 0===n?void 0:n.config},wQ=n=>{var e;return null===(e=PA())||void 0===e?void 0:e[`_${n}`]};class kA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function us(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function sO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(us())}function CQ(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class sd extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,sd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eE.prototype.create)}}class eE{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function SSe(n,e){return n.replace(DSe,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new sd(i,`${this.serviceName}: ${o} (${i}).`,r)}}const DSe=/\{\$([^}]+)}/g;function tE(n){return JSON.parse(n)}function ji(n){return JSON.stringify(n)}const NA=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=tE(MA(s[0])||""),t=tE(MA(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Bl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Bg(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function oO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function OA(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function FA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(TQ(s)&&TQ(o)){if(!FA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function TQ(n){return null!==n&&"object"==typeof n}function Ug(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class MSe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const m=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(m<<1|m>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const m=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class kSe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function NSe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=aO),void 0===i.error&&(i.error=aO),void 0===i.complete&&(i.complete=aO);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aO(){}function jg(n,e){return`${n} failed: ${e} argument `}const LA=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function Ta(n){return n&&n._delegate?n._delegate:n}class Tf{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Af="[DEFAULT]";class jSe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new kA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function HSe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Af})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Af){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,O.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Af){return this.instances.has(e)}getOptions(e=Af){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Af?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Af){return this.component?this.component.multipleInstances?e:Af:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class $Se{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jSe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const lO=[];var er=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(er||{});const AQ={debug:er.DEBUG,verbose:er.VERBOSE,info:er.INFO,warn:er.WARN,error:er.ERROR,silent:er.SILENT},WSe=er.INFO,GSe={[er.DEBUG]:"log",[er.VERBOSE]:"log",[er.INFO]:"info",[er.WARN]:"warn",[er.ERROR]:"error"},qSe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=GSe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class cO{constructor(e){this.name=e,this._logLevel=WSe,this._logHandler=qSe,this._userLogHandler=null,lO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in er))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?AQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,er.DEBUG,...e),this._logHandler(this,er.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,er.VERBOSE,...e),this._logHandler(this,er.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,er.INFO,...e),this._logHandler(this,er.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,er.WARN,...e),this._logHandler(this,er.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,er.ERROR,...e),this._logHandler(this,er.ERROR,...e)}}var SQ=G(6749);class KSe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function QSe(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const VA="@firebase/app",uO="0.10.17",Uc=new cO("@firebase/app"),YSe="@firebase/app-compat",XSe="@firebase/analytics-compat",ZSe="@firebase/analytics",JSe="@firebase/app-check-compat",eDe="@firebase/app-check",tDe="@firebase/auth",nDe="@firebase/auth-compat",rDe="@firebase/database",iDe="@firebase/data-connect",sDe="@firebase/database-compat",oDe="@firebase/functions",aDe="@firebase/functions-compat",lDe="@firebase/installations",cDe="@firebase/installations-compat",uDe="@firebase/messaging",dDe="@firebase/messaging-compat",hDe="@firebase/performance",fDe="@firebase/performance-compat",pDe="@firebase/remote-config",mDe="@firebase/remote-config-compat",gDe="@firebase/storage",_De="@firebase/storage-compat",yDe="@firebase/firestore",vDe="@firebase/vertexai",bDe="@firebase/firestore-compat",EDe="firebase",BA="[DEFAULT]",wDe={[VA]:"fire-core",[YSe]:"fire-core-compat",[ZSe]:"fire-analytics",[XSe]:"fire-analytics-compat",[eDe]:"fire-app-check",[JSe]:"fire-app-check-compat",[tDe]:"fire-auth",[nDe]:"fire-auth-compat",[rDe]:"fire-rtdb",[iDe]:"fire-data-connect",[sDe]:"fire-rtdb-compat",[oDe]:"fire-fn",[aDe]:"fire-fn-compat",[lDe]:"fire-iid",[cDe]:"fire-iid-compat",[uDe]:"fire-fcm",[dDe]:"fire-fcm-compat",[hDe]:"fire-perf",[fDe]:"fire-perf-compat",[pDe]:"fire-rc",[mDe]:"fire-rc-compat",[gDe]:"fire-gcs",[_De]:"fire-gcs-compat",[yDe]:"fire-fst",[bDe]:"fire-fst-compat",[vDe]:"fire-vertex","fire-js":"fire-js",[EDe]:"fire-js-all"},Sf=new Map,nE=new Map,rE=new Map;function DQ(n,e){try{n.container.addComponent(e)}catch(t){Uc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zg(n){const e=n.name;if(rE.has(e))return Uc.debug(`There were multiple attempts to register component ${e}.`),!1;rE.set(e,n);for(const t of Sf.values())DQ(t,n);for(const t of nE.values())DQ(t,n);return!0}function UA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function od(n){return void 0!==n.settings}const Aa=new eE("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xQ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Aa.create("app-deleted",{appName:this._name})}}const Hg="11.1.0";function RQ(n=BA){const e=Sf.get(n);if(!e&&n===BA&&IQ())return function SDe(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:BA,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Aa.create("bad-app-name",{appName:String(i)});if(t||(t=IQ()),!t)throw Aa.create("no-options");const s=Sf.get(i);if(s){if(FA(t,s.options)&&FA(r,s.config))return s;throw Aa.create("duplicate-app",{appName:i})}const o=new $Se(i);for(const l of rE.values())o.addComponent(l);const a=new xQ(t,r,o);return Sf.set(i,a),a}();if(!e)throw Aa.create("no-app",{appName:n});return e}function ad(n,e,t){var r;let i=null!==(r=wDe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Uc.warn(a.join(" "))}zg(new Tf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const xDe="firebase-heartbeat-database",RDe=1,iE="firebase-heartbeat-store";let hO=null;function MQ(){return hO||(hO=(0,SQ.P2)(xDe,RDe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(iE)}catch(t){console.warn(t)}}}).catch(n=>{throw Aa.create("idb-open",{originalErrorMessage:n.message})})),hO}function fO(){return(fO=(0,O.A)(function*(n){try{const t=(yield MQ()).transaction(iE),r=yield t.objectStore(iE).get(kQ(n));return yield t.done,r}catch(e){if(e instanceof sd)Uc.warn(e.message);else{const t=Aa.create("idb-get",{originalErrorMessage:e?.message});Uc.warn(t.message)}}})).apply(this,arguments)}function PQ(n,e){return pO.apply(this,arguments)}function pO(){return(pO=(0,O.A)(function*(n,e){try{const r=(yield MQ()).transaction(iE,"readwrite");yield r.objectStore(iE).put(e,kQ(n)),yield r.done}catch(t){if(t instanceof sd)Uc.warn(t.message);else{const r=Aa.create("idb-set",{originalErrorMessage:t?.message});Uc.warn(r.message)}}})).apply(this,arguments)}function kQ(n){return`${n.name}!${n.options.appId}`}class NDe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new FDe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,O.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=NQ();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Uc.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,O.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=NQ(),{heartbeatsToSend:i,unsentEntries:s}=function ODe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),OQ(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),OQ(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=RA(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Uc.warn(r),""}})()}}function NQ(){return(new Date).toISOString().substring(0,10)}class FDe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,O.A)(function*(){return!!function CSe(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function TSe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,O.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function MDe(n){return fO.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,O.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return PQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,O.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return PQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function OQ(n){return RA(JSON.stringify({version:2,heartbeats:n})).length}!function LDe(n){zg(new Tf("platform-logger",e=>new KSe(e),"PRIVATE")),zg(new Tf("heartbeat",e=>new NDe(e),"PRIVATE")),ad(VA,uO,n),ad(VA,uO,"esm2017"),ad("fire-js","")}("");const FQ="@firebase/database";let mO="";class VDe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ji(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:tE(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class BDe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Bl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const BQ=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new VDe(e)}}catch{}return new BDe},Df=BQ("localStorage"),gO=BQ("sessionStorage"),$g=new cO("@firebase/database"),UQ=function(){let n=1;return function(){return n++}}(),jQ=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ze(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new MSe;t.update(e);const r=t.digest();return iO.encodeByteArray(r)},sE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=sE.apply(null,r):e+="object"==typeof r?ji(r):r,e+=" "}return e};let xf=null,zQ=!0;const Xi=function(...n){if(!0===zQ&&(zQ=!1,null===xf&&!0===gO.get("logging_enabled")&&function(n,e){ze(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($g.logLevel=er.VERBOSE,xf=$g.log.bind($g),e&&gO.set("logging_enabled",!0)):"function"==typeof n?xf=n:(xf=null,gO.remove("logging_enabled"))}(!0)),xf){const e=sE.apply(null,n);xf(e)}},oE=function(n){return function(...e){Xi(n,...e)}},_O=function(...n){const e="FIREBASE INTERNAL ERROR: "+sE(...n);$g.error(e)},Ul=function(...n){const e=`FIREBASE FATAL ERROR: ${sE(...n)}`;throw $g.error(e),new Error(e)},Rs=function(...n){const e="FIREBASE WARNING: "+sE(...n);$g.warn(e)},jA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ld="[MIN_NAME]",jc="[MAX_NAME]",Rf=function(n,e){if(n===e)return 0;if(n===ld||e===jc)return-1;if(e===ld||n===jc)return 1;{const t=GQ(n),r=GQ(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},zDe=function(n,e){return n===e?0:n<e?-1:1},aE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ji(e))},yO=function(n){if("object"!=typeof n||null===n)return ji(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=ji(e[r]),t+=":",t+=yO(n[e[r]]);return t+="}",t},$Q=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Zi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const WQ=function(n){ze(!jA(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),d+=m}return d.toLowerCase()},GDe=new RegExp("^-?(0*)\\d{1,10}$"),GQ=function(n){if(GDe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Wg=function(n){try{n()}catch(e){setTimeout(()=>{throw Rs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},lE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class YDe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XDe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rs(e)}}let cE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const XQ=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eY="websocket",tY="long_polling";class bO{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Df.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Df.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nY(n,e,t){let r;if(ze("string"==typeof e,"typeof type must == string"),ze("object"==typeof t,"typeof params must == object"),e===eY)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==tY)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function ZDe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Zi(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class JDe{constructor(){this.counters_={}}incrementCounter(e,t=1){Bl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return dSe(this.counters_)}}const EO={},IO={};function wO(n){const e=n.toString();return EO[e]||(EO[e]=new JDe),EO[e]}class txe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cd{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oE(e),this.stats_=wO(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),nY(t,tY,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new txe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new CO((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&XQ.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cd.forceAllow_=!0}static forceDisallow(){cd.forceDisallow_=!0}static isAvailable(){return!(!cd.forceAllow_&&(cd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ji(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=vQ(t),i=$Q(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ji(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class CO{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=UQ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=CO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xi("frame writing exception"),a.stack&&Xi(a.stack),Xi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Xi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Xi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let HA=null;typeof MozWebSocket<"u"?HA=MozWebSocket:typeof WebSocket<"u"&&(HA=WebSocket);let Gg=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oE(this.connId),this.stats_=wO(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&XQ.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),nY(t,eY,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Df.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new HA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==HA&&!n.forceDisallow_}static previouslyFailed(){return Df.isInMemoryStorage||!0===Df.get("previous_websocket_failure")}markConnectionHealthy(){Df.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=tE(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ze(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=ji(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=$Q(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cY=(()=>{class n{static get ALL_TRANSPORTS(){return[cd,Gg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=Gg&&Gg.isAvailable();let i=r&&!Gg.previouslyFailed();if(t.webSocketOnly&&(r||Rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Gg];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class gY{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oE("c:"+this.id+":"),this.transportManager_=new cY(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=lE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=aE("t",e),r=aE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=aE("t",e),r=aE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=aE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?_O("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_O("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),lE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Df.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _Y{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class yY{constructor(e){this.allowedEvents_=e,this.listeners_={},ze(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){ze(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class $A extends yY{static getInstance(){return new $A}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sO()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ze("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Hn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new Hn("")}function nn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ud(n){return n.pieces_.length-n.pieceNum_}function ar(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Hn(n.pieces_,e)}function AO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function uE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function EY(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Hn(e,0)}function Lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Hn(t,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function Zs(n,e){const t=nn(n),r=nn(e);if(null===t)return e;if(t===r)return Zs(ar(n),ar(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function SO(n,e){if(ud(n)!==ud(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Sa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ud(n)>ud(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Cxe{constructor(e,t){this.errorPrefix_=t,this.parts_=uE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=LA(this.parts_[r]);IY(this)}}function IY(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Mf(n))}function Mf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class DO extends yY{static getInstance(){return new DO}constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ze("visible"===e,"Unknown event type: "+e),[this.visible_]}}const dE=1e3;let GA,Pf=(()=>{class n extends _Y{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=oE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");DO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&$A.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(ji(o)),ze(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new kA,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ze(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ze(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Bl(t,"w")){const i=Bg(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=NA(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=NA(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),ze(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ji(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):_O("Unrecognized action received from server: "+ji(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ze(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){ze(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?Xi("getToken() completed but was canceled"):(Xi("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new gY(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{Rs(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&Rs(y),u())}}})()}interrupt(t){Xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],oO(this.interruptReasons_)&&(this.reconnectDelay_=dE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>yO(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Hn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Xi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Xi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+mO.replace(/\./g,"-")]=1,sO()?t["framework.cordova"]=1:CQ()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=$A.getInstance().currentlyOnline();return oO(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class WA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new an(ld,e),i=new an(ld,t);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class TY extends WA{static get __EMPTY_NODE(){return GA}static set __EMPTY_NODE(e){GA=e}compare(e,t){return Rf(e.name,t.name)}isDefinedOn(e){throw Vg("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(jc,GA)}makePost(e,t){return ze("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,GA)}toString(){return".key"}}const jl=new TY;class qA{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let RO,ll=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Ao.EMPTY_NODE,this.right=o??Ao.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ao.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ao.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ao{constructor(e,t=Ao.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ao(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ll.BLACK,null,null))}remove(e){return new Ao(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ll.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new qA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new qA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new qA(this.root_,null,this.comparator_,!0,e)}}function Pxe(n,e){return Rf(n.name,e.name)}function xO(n,e){return Rf(n,e)}Ao.EMPTY_NODE=new class Mxe{copy(e,t,r,i,s){return this}insert(e,t,r){return new ll(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const AY=function(n){return"number"==typeof n?"number:"+WQ(n):"string:"+n},SY=function(n){if(n.isLeafNode()){const e=n.val();ze("string"==typeof e||"number"==typeof e||"object"==typeof e&&Bl(e,".sv"),"Priority must be a string or number.")}else ze(n===RO||n.isEmpty(),"priority of unexpected type.");ze(n===RO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let DY,xY,RY,qg=(()=>{class n{static set __childrenNodeConstructor(t){DY=t}static get __childrenNodeConstructor(){return DY}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,ze(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),SY(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return rn(t)?this:".priority"===nn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=nn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(ze(".priority"!==i||1===ud(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ar(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+AY(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?WQ(this.value_):this.value_,this.lazyHash_=jQ(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(ze(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return ze(s>=0,"Unknown leaf type: "+r),ze(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _r=new class Fxe extends WA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Rf(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(jc,new qg("[PRIORITY-POST]",RY))}makePost(e,t){const r=xY(e);return new an(t,new qg("[PRIORITY-POST]",r))}toString(){return".priority"}},Lxe=Math.log(2);class Vxe{constructor(e){this.count=parseInt(Math.log(e+1)/Lxe,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const KA=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let d,m;if(0===u)return null;if(1===u)return d=n[l],m=t?t(d):d,new ll(m,d.node,ll.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return d=n[y],m=t?t(d):d,new ll(m,d.node,ll.BLACK,b,T)}},a=function(l){let c=null,u=null,d=n.length;const m=function(b,T){const M=d-b,B=d;d-=b;const V=i(M+1,B),Q=n[M],be=t?t(Q):Q;y(new ll(be,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),M=Math.pow(2,l.count-(b+1));T?m(M,ll.BLACK):(m(M,ll.BLACK),m(M,ll.RED))}return u}(new Vxe(n.length));return new Ao(r||e,a)};let MO;const Kg={};class zc{static get Default(){return ze(Kg&&_r,"ChildrenNode.ts has not been loaded"),MO=MO||new zc({".priority":Kg},{".priority":_r}),MO}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Bg(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ao?t:null}hasIndex(e){return Bl(this.indexSet_,e.toString())}addIndex(e,t){ze(e!==jl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(an.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?KA(r,e.getCompare()):Kg;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new zc(u,c)}addToIndexes(e,t){const r=OA(this.indexes_,(i,s)=>{const o=Bg(this.indexSet_,s);if(ze(o,"Missing index implementation for "+s),i===Kg){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(an.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),KA(a,o.getCompare())}return Kg}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new an(e.name,a))),l.insert(e,e.node)}});return new zc(r,this.indexSet_)}removeFromIndexes(e,t){const r=OA(this.indexes_,i=>{if(i===Kg)return i;{const s=t.get(e.name);return s?i.remove(new an(e.name,s)):i}});return new zc(r,this.indexSet_)}}let hE,Ht=(()=>{class n{static get EMPTY_NODE(){return hE||(hE=new n(new Ao(xO),null,zc.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SY(this.priorityNode_),this.children_.isEmpty()&&ze(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?hE:r}}getChild(t){const r=nn(t);return null===r?this:this.getImmediateChild(r).getChild(ar(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(ze(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new an(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?hE:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=nn(t);if(null===i)return r;{ze(".priority"!==nn(t)||1===ud(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ar(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(_r,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+AY(this.getPriority().val())+":"),this.forEachChild(_r,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":jQ(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new an(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new an(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new an(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,an.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fE?-1:0}withIndex(t){if(t===jl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===jl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(_r),s=r.getIterator(_r);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===jl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const fE=new class Bxe extends Ht{constructor(){super(new Ao(xO),Ht.EMPTY_NODE,zc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(an,{MIN:{value:new an(ld,Ht.EMPTY_NODE)},MAX:{value:new an(jc,fE)}}),TY.__EMPTY_NODE=Ht.EMPTY_NODE,qg.__childrenNodeConstructor=Ht,function kxe(n){RO=n}(fE),function Oxe(n){RY=n}(fE);const Uxe=!0;function Yr(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),ze(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new qg(n,Yr(e));if(n instanceof Array||!Uxe){let t=Ht.EMPTY_NODE;return Zi(n,(r,i)=>{if(Bl(n,r)&&"."!==r.substring(0,1)){const s=Yr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Yr(e))}{const t=[];let r=!1;if(Zi(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Yr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new an(o,l)))}}),0===t.length)return Ht.EMPTY_NODE;const s=KA(t,Pxe,o=>o.name,xO);if(r){const o=KA(t,_r.getCompare());return new Ht(s,Yr(e),new zc({".priority":o},{".priority":_r}))}return new Ht(s,Yr(e),zc.Default)}}!function Nxe(n){xY=n}(Yr);class PO extends WA{constructor(e){super(),this.indexPath_=e,ze(!rn(e)&&".priority"!==nn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Rf(e.name,t.name):s}makePost(e,t){const r=Yr(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,fE);return new an(jc,e)}toString(){return uE(this.indexPath_,0).join("/")}}const kO=new class jxe extends WA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Rf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const r=Yr(e);return new an(t,r)}toString(){return".value"}};function MY(n){return{type:"value",snapshotNode:n}}function Qg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function pE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function mE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class NO{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){ze(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(pE(t,a)):ze(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Qg(t,r)):o.trackChildChange(mE(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(_r,(i,s)=>{t.hasChild(i)||r.trackChildChange(pE(i,s))}),t.isLeafNode()||t.forEachChild(_r,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(mE(i,s,o))}else r.trackChildChange(Qg(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gE{constructor(e){this.indexedFilter_=new NO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gE.getStartPost_(e),this.endPost_=gE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new an(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const s=this;return t.forEachChild(_r,(o,a)=>{s.matches(new an(o,a))||(i=i.updateImmediateChild(o,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Hxe{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new an(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Ht.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(m,y)=>d(y,m)}else o=this.index_.getCompare();const a=e;ze(a.numChildren()===this.limit_,"");const l=new an(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(mE(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(pE(t,d));const T=a.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Qg(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(pE(c.name,c.node)),s.trackChildChange(Qg(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,Ht.EMPTY_NODE)):e}}class OO{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_r}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ze(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ze(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ld}hasEnd(){return this.endSet_}getIndexEndValue(){return ze(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ze(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ze(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_r}copy(){const e=new OO;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function PY(n){const e={};if(n.isDefault())return e;let t;if(n.index_===_r?t="$priority":n.index_===kO?t="$value":n.index_===jl?t="$key":(ze(n.index_ instanceof PO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ji(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=ji(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+ji(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=ji(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+ji(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function kY(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_r&&(e.i=n.index_.toString()),e}class YA extends _Y{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(ze(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=oE("p:rest:"),this.listens_={}}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=YA.getListenId_(e,r),a={};this.listens_[o]=a;const l=PY(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),Bg(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=YA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=PY(e._queryParams),r=e._path.toString(),i=new kA;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ug(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=tE(a.responseText)}catch{Rs("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Rs("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Qxe{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function XA(){return{value:null,children:new Map}}function Yg(n,e,t){if(rn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=nn(e);n.children.has(r)||n.children.set(r,XA()),Yg(n.children.get(r),e=ar(e),t)}}function BO(n,e,t){null!==n.value?t(e,n.value):function Yxe(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{BO(i,new Hn(e.toString()+"/"+r),t)})}class Xxe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class eRe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Xxe(e);const r=1e4+2e4*Math.random();lE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Zi(e,(i,s)=>{s>0&&Bl(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),lE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zl=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(zl||{});function zO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ZA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(rn(this.path)){if(null!=this.affectedTree.value)return ze(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Hn(e));return new ZA(Mn(),t,this.revert)}}return ze(nn(this.path)===e,"operationForChild called for unrelated child."),new ZA(ar(this.path),this.affectedTree,this.revert)}}class _E{constructor(e,t){this.source=e,this.path=t,this.type=zl.LISTEN_COMPLETE}operationForChild(e){return rn(this.path)?new _E(this.source,Mn()):new _E(this.source,ar(this.path))}}class kf{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zl.OVERWRITE}operationForChild(e){return rn(this.path)?new kf(this.source,Mn(),this.snap.getImmediateChild(e)):new kf(this.source,ar(this.path),this.snap)}}class Xg{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zl.MERGE}operationForChild(e){if(rn(this.path)){const t=this.children.subtree(new Hn(e));return t.isEmpty()?null:t.value?new kf(this.source,Mn(),t.value):new Xg(this.source,Mn(),t)}return ze(nn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xg(this.source,ar(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rn(e))return this.isFullyInitialized()&&!this.filtered_;const t=nn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class tRe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yE(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function iRe(n,e,t){if(null==e.childName||null==t.childName)throw Vg("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function rRe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function JA(n,e){return{eventCache:n,serverCache:e}}function vE(n,e,t,r){return JA(new dd(e,t,r),n.serverCache)}function OY(n,e,t,r){return JA(n.eventCache,new dd(e,t,r))}function eS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Nf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let HO;class yr{static fromObject(e){let t=new yr(null);return Zi(e,(r,i)=>{t=t.set(new Hn(r),i)}),t}constructor(e,t=(()=>(HO||(HO=new Ao(zDe)),HO))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(rn(e))return null;{const r=nn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(ar(e),t);return null!=s?{path:Lr(new Hn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rn(e))return this;{const t=nn(e),r=this.children.get(t);return null!==r?r.subtree(ar(e)):new yr(null)}}set(e,t){if(rn(e))return new yr(t,this.children);{const r=nn(e),s=(this.children.get(r)||new yr(null)).set(ar(e),t),o=this.children.insert(r,s);return new yr(this.value,o)}}remove(e){if(rn(e))return this.children.isEmpty()?new yr(null):new yr(null,this.children);{const t=nn(e),r=this.children.get(t);if(r){const i=r.remove(ar(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new yr(null):new yr(this.value,s)}return this}}get(e){if(rn(e))return this.value;{const t=nn(e),r=this.children.get(t);return r?r.get(ar(e)):null}}setTree(e,t){if(rn(e))return t;{const r=nn(e),s=(this.children.get(r)||new yr(null)).setTree(ar(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new yr(this.value,o)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(rn(e))return null;{const s=nn(e),o=this.children.get(s);return o?o.findOnPath_(ar(e),Lr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,r){if(rn(e))return this;{this.value&&r(t,this.value);const i=nn(e),s=this.children.get(i);return s?s.foreachOnPath_(ar(e),Lr(t,i),r):new yr(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class cl{constructor(e){this.writeTree_=e}static empty(){return new cl(new yr(null))}}function bE(n,e,t){if(rn(e))return new cl(new yr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Zs(i,e);return s=s.updateChild(o,t),new cl(n.writeTree_.set(i,s))}{const i=new yr(t),s=n.writeTree_.setTree(e,i);return new cl(s)}}}function $O(n,e,t){let r=n;return Zi(t,(i,s)=>{r=bE(r,Lr(e,i),s)}),r}function FY(n,e){if(rn(e))return cl.empty();{const t=n.writeTree_.setTree(e,new yr(null));return new cl(t)}}function WO(n,e){return null!=Of(n,e)}function Of(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Zs(t.path,e)):null}function LY(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_r,(r,i)=>{e.push(new an(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function hd(n,e){if(rn(e))return n;{const t=Of(n,e);return new cl(null!=t?new yr(t):n.writeTree_.subtree(e))}}function GO(n){return n.writeTree_.isEmpty()}function Zg(n,e){return VY(Mn(),n.writeTree_,e)}function VY(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(ze(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=VY(Lr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Lr(n,".priority"),r)),t}}function tS(n,e){return HY(e,n)}function uRe(n,e){if(n.snap)return Sa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Sa(Lr(n.path,t),e))return!0;return!1}function hRe(n){return n.visible}function BY(n,e,t){let r=cl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Sa(t,o)?(a=Zs(t,o),r=bE(r,a,s.snap)):Sa(o,t)&&(a=Zs(o,t),r=bE(r,Mn(),s.snap.getChild(a)));else{if(!s.children)throw Vg("WriteRecord should have .snap or .children");if(Sa(t,o))a=Zs(t,o),r=$O(r,a,s.children);else if(Sa(o,t))if(a=Zs(o,t),rn(a))r=$O(r,Mn(),s.children);else{const l=Bg(s.children,nn(a));if(l){const c=l.getChild(ar(a));r=bE(r,Mn(),c)}}}}}return r}function UY(n,e,t,r,i){if(r||i){const s=hd(n.visibleWrites,e);return!i&&GO(s)?t:i||null!=t||WO(s,Mn())?Zg(BY(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Sa(c.path,e)||Sa(e,c.path))},e),t||Ht.EMPTY_NODE):null}{const s=Of(n.visibleWrites,e);if(null!=s)return s;{const o=hd(n.visibleWrites,e);return GO(o)?t:null!=t||WO(o,Mn())?Zg(o,t||Ht.EMPTY_NODE):null}}}function nS(n,e,t,r){return UY(n.writeTree,n.treePath,e,t,r)}function qO(n,e){return function fRe(n,e,t){let r=Ht.EMPTY_NODE;const i=Of(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_r,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=hd(n.visibleWrites,e);return t.forEachChild(_r,(o,a)=>{const l=Zg(hd(s,new Hn(o)),a);r=r.updateImmediateChild(o,l)}),LY(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return LY(hd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function jY(n,e,t,r){return function pRe(n,e,t,r,i){ze(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Lr(e,t);if(WO(n.visibleWrites,s))return null;{const o=hd(n.visibleWrites,s);return GO(o)?i.getChild(t):Zg(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function rS(n,e){return function gRe(n,e){return Of(n.visibleWrites,e)}(n.writeTree,Lr(n.treePath,e))}function KO(n,e,t){return function mRe(n,e,t,r){const i=Lr(e,t),s=Of(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Zg(hd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function zY(n,e){return HY(Lr(n.treePath,e),n.writeTree)}function HY(n,e){return{treePath:n,writeTree:e}}class bRe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ze("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ze(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,mE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,pE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Qg(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Vg("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,mE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const $Y=new class ERe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class QO{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new dd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return KO(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Nf(this.viewCache_),s=function vRe(n,e,t,r,i,s){return function _Re(n,e,t,r,i,s,o){let a;const l=hd(n.visibleWrites,e),c=Of(l,Mn());if(null!=c)a=c;else{if(null==t)return[];a=Zg(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==d(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function WY(n,e,t,r,i,s){const o=e.eventCache;if(null!=rS(r,t))return e;{let a,l;if(rn(t))if(ze(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Nf(e),d=qO(r,c instanceof Ht?c:Ht.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=nS(r,Nf(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=nn(t);if(".priority"===c){ze(1===ud(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=jY(r,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=ar(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=jY(r,t,o.getNode(),l);d=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else d=KO(r,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return vE(e,a,o.isFullyInitialized()||rn(t),n.filter.filtersNodes())}}function iS(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(rn(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=nn(t);if(!l.isCompleteForPath(t)&&ud(t)>1)return e;const b=ar(t),M=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),M):u.updateChild(l.getNode(),y,M,b,$Y,null)}const d=OY(e,c,l.isFullyInitialized()||rn(t),u.filtersNodes());return WY(n,d,t,i,new QO(i,d,s),a)}function YO(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new QO(i,e,s);if(rn(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=vE(e,c,!0,n.filter.filtersNodes());else{const d=nn(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=vE(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=ar(t),y=a.getNode().getImmediateChild(d);let b;if(rn(m))b=r;else{const T=u.getCompleteChild(d);b=null!=T?".priority"===AO(m)&&T.getChild(EY(m)).isEmpty()?T:T.updateChild(m,r):Ht.EMPTY_NODE}l=y.equals(b)?e:vE(e,n.filter.updateChild(a.getNode(),d,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function GY(n,e){return n.eventCache.isCompleteForChild(e)}function qY(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function XO(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=rn(t)?r:new yr(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,m)=>{if(u.hasChild(d)){const b=qY(0,e.serverCache.getNode().getImmediateChild(d),m);l=iS(n,l,new Hn(d),b,i,s,o,a)}}),c.children.inorderTraversal((d,m)=>{const y=!e.serverCache.isCompleteForChild(d)&&null===m.value;if(!u.hasChild(d)&&!y){const T=qY(0,e.serverCache.getNode().getImmediateChild(d),m);l=iS(n,l,new Hn(d),T,i,s,o,a)}}),l}class RRe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new NO(r.getIndex()),s=function $xe(n){return n.loadsAllData()?new NO(n.getIndex()):n.hasLimit()?new Hxe(n):new gE(n)}(r);this.processor_=function IRe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Ht.EMPTY_NODE,a.getNode(),null),u=new dd(l,o.isFullyInitialized(),i.filtersNodes()),d=new dd(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=JA(d,u),this.eventGenerator_=new tRe(this.query_)}get query(){return this.query_}}function kRe(n,e){const t=Nf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rn(e)&&!t.getImmediateChild(nn(e)).isEmpty())?t.getChild(e):null}function KY(n){return 0===n.eventRegistrations_.length}function QY(n,e,t){const r=[];if(t){ze(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function YY(n,e,t,r){e.type===zl.MERGE&&null!==e.source.queryId&&(ze(Nf(n.viewCache_),"We should always have a full cache before handling merges"),ze(eS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function CRe(n,e,t,r,i){const s=new bRe;let o,a;if(t.type===zl.OVERWRITE){const c=t;c.source.fromUser?o=YO(n,e,c.path,c.snap,r,i,s):(ze(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!rn(c.path),o=iS(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===zl.MERGE){const c=t;c.source.fromUser?o=function ARe(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Lr(t,l);GY(e,nn(u))&&(a=YO(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Lr(t,l);GY(e,nn(u))||(a=YO(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(ze(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=XO(n,e,c.path,c.children,r,i,a,s))}else if(t.type===zl.ACK_USER_WRITE){const c=t;o=c.revert?function xRe(n,e,t,r,i,s){let o;if(null!=rS(r,t))return e;{const a=new QO(r,e,i),l=e.eventCache.getNode();let c;if(rn(t)||".priority"===nn(t)){let u;if(e.serverCache.isFullyInitialized())u=nS(r,Nf(e));else{const d=e.serverCache.getNode();ze(d instanceof Ht,"serverChildren would be complete if leaf node"),u=qO(r,d)}c=n.filter.updateFullNode(l,u,s)}else{const u=nn(t);let d=KO(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,ar(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,Ht.EMPTY_NODE,ar(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=nS(r,Nf(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=rS(r,Mn()),vE(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function SRe(n,e,t,r,i,s,o){if(null!=rS(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(rn(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return iS(n,e,t,l.getNode().getChild(t),i,s,a,o);if(rn(t)){let c=new yr(null);return l.getNode().forEachChild(jl,(u,d)=>{c=c.set(new Hn(u),d)}),XO(n,e,t,c,i,s,a,o)}return e}{let c=new yr(null);return r.foreach((u,d)=>{const m=Lr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),XO(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==zl.LISTEN_COMPLETE)throw Vg("Unknown operation type: "+t.type);o=function DRe(n,e,t,r,i){const s=e.serverCache;return WY(n,OY(e,s.getNode(),s.isFullyInitialized()||rn(t),s.isFiltered()),t,r,$Y,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function TRe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=eS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(MY(eS(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function wRe(n,e){ze(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ze(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),ze(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,XY(n,s.changes,s.viewCache.eventCache.getNode(),null)}function XY(n,e,t,r){return function nRe(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function zxe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),yE(n,i,"child_removed",e,r,t),yE(n,i,"child_added",e,r,t),yE(n,i,"child_moved",s,r,t),yE(n,i,"child_changed",e,r,t),yE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let sS,aS;class ZY{constructor(){this.views=new Map}}function ZO(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return ze(null!=s,"SyncTree gave us an op for an invalid query."),YY(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(YY(o,e,t,r));return s}}function JY(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=nS(t,i?r:null),l=!1;a?l=!0:r instanceof Ht?(a=qO(t,r),l=!1):(a=Ht.EMPTY_NODE,l=!1);const c=JA(new dd(a,l,!1),new dd(r,i,!1));return new RRe(e,c)}return o}function eX(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function fd(n,e){let t=null;for(const r of n.views.values())t=t||kRe(r,e);return t}function tX(n,e){return e._queryParams.loadsAllData()?oS(n):n.views.get(e._queryIdentifier)}function nX(n,e){return null!=tX(n,e)}function pd(n){return null!=oS(n)}function oS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let HRe=1;class rX{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yr(null),this.pendingWriteTree_=function yRe(){return{visibleWrites:cl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JO(n,e,t,r,i){return function oRe(n,e,t,r,i){ze(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=bE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Jg(n,new kf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function md(n,e,t=!1){const r=function lRe(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function cRe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);ze(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&uRe(a,r.path)?i=!1:Sa(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function dRe(n){n.visibleWrites=BY(n.allWrites,hRe,Mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=FY(n.visibleWrites,r.path):Zi(r.children,l=>{n.visibleWrites=FY(n.visibleWrites,Lr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new yr(null);return null!=r.snap?s=s.set(Mn(),!0):Zi(r.children,o=>{s=s.set(new Hn(o),!0)}),Jg(n,new ZA(r.path,s,t))}return[]}function EE(n,e,t){return Jg(n,new kf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function lS(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||nX(o,e))){const l=function URe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=pd(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(QY(c,t,r)),KY(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(QY(l,t,r)),KY(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!pd(n)&&s.push(new(function LRe(){return ze(sS,"Reference.ts has not been loaded"),sS}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function VRe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(m,y)=>pd(y));if(u&&!d){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function YRe(n){return n.fold((e,t,r)=>{if(t&&pd(t))return[oS(t)];{let i=[];return t&&(i=eX(t)),Zi(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],M=T.query,B=aX(n,T);n.listenProvider_.startListening(wE(M),IE(n,M),B.hashFn,B.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(wE(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(uS(m));n.listenProvider_.stopListening(wE(m),y)}))}!function XRe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=uS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function iX(n,e,t,r){const i=tF(n,r);if(null!=i){const s=nF(i),o=s.path,a=s.queryId,l=Zs(o,e);return rF(n,o,new kf(zO(a),l,t))}return[]}function eF(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=Zs(m,i);s=s||fd(y,b),o=o||pd(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||pd(a),s=s||fd(a,Mn())):(a=new ZY,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=Ht.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=fd(b,Mn());T&&(s=s.updateImmediateChild(y,T))}));const c=nX(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=uS(e);ze(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function ZRe(){return HRe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let d=function BRe(n,e,t,r,i,s){const o=JY(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function NRe(n,e){n.eventRegistrations_.push(e)}(o,t),function ORe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_r,(s,o)=>{r.push(Qg(s,o))}),t.isFullyInitialized()&&r.push(MY(t.getNode())),XY(n,r,t.getNode(),e)}(o,t)}(a,e,t,tS(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=tX(a,e);d=d.concat(function JRe(n,e,t){const r=e._path,i=IE(n,e),s=aX(n,t),o=n.listenProvider_.startListening(wE(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)ze(!pd(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!rn(c)&&u&&pd(u))return[oS(u).query];{let m=[];return u&&(m=m.concat(eX(u).map(y=>y.query))),Zi(d,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(wE(u),IE(n,u))}}return o}(n,e,m))}return d}function cS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=fd(a,Zs(o,e));if(c)return c});return UY(i,e,s,t,!0)}function Jg(n,e){return sX(e,n.syncPointTree_,null,tS(n.pendingWriteTree_,Mn()))}function sX(n,e,t,r){if(rn(n.path))return oX(n,e,t,r);{const i=e.get(Mn());null==t&&null!=i&&(t=fd(i,Mn()));let s=[];const o=nn(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=zY(r,o);s=s.concat(sX(a,l,c,u))}return i&&(s=s.concat(ZO(i,n,r,t))),s}}function oX(n,e,t,r){const i=e.get(Mn());null==t&&null!=i&&(t=fd(i,Mn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=zY(r,o),u=n.operationForChild(o);u&&(s=s.concat(oX(u,a,l,c)))}),i&&(s=s.concat(ZO(i,n,r,t))),s}function aX(n,e){const t=e.query,r=IE(n,t);return{hashFn:()=>(function MRe(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function qRe(n,e,t){const r=tF(n,t);if(r){const i=nF(r),s=i.path,o=i.queryId,a=Zs(s,e);return rF(n,s,new _E(zO(o),a))}return[]}(n,t._path,r):function GRe(n,e){return Jg(n,new _E({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function WDe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return lS(n,t,null,s)}}}}function IE(n,e){const t=uS(e);return n.queryToTagMap.get(t)}function uS(n){return n._path.toString()+"$"+n._queryIdentifier}function tF(n,e){return n.tagToQueryMap.get(e)}function nF(n){const e=n.indexOf("$");return ze(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Hn(n.substr(0,e))}}function rF(n,e,t){const r=n.syncPointTree_.get(e);return ze(r,"Missing sync point for query tag that we're tracking"),ZO(r,t,tS(n.pendingWriteTree_,e),null)}function wE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function zRe(){return ze(aS,"Reference.ts has not been loaded"),aS}())(n._repo,n._path):n}class iF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new iF(t)}node(){return this.node_}}class sF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Lr(this.path_,e);return new sF(this.syncTree_,t)}node(){return cS(this.syncTree_,this.path_)}}const eMe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},lX=function(n,e,t){return n&&"object"==typeof n?(ze(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?tMe(n[".sv"],e,t):"object"==typeof n[".sv"]?nMe(n[".sv"],e):void ze(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},tMe=function(n,e,t){if("timestamp"===n)return t.timestamp;ze(!1,"Unexpected server value: "+n)},nMe=function(n,e,t){n.hasOwnProperty("increment")||ze(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&ze(!1,"Unexpected increment value: "+r);const i=e.node();if(ze(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},cX=function(n,e,t,r){return aF(e,new sF(t,n),r)},oF=function(n,e,t){return aF(n,new iF(e),t)};function aF(n,e,t){const r=n.getPriority().val(),i=lX(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=lX(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new qg(a,Yr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new qg(i))),o.forEachChild(_r,(a,l)=>{const c=aF(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class lF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function dS(n,e){let t=e instanceof Hn?e:new Hn(e),r=n,i=nn(t);for(;null!==i;){const s=Bg(r.node.children,i)||{children:{},childCount:0};r=new lF(i,r,s),t=ar(t),i=nn(t)}return r}function Ff(n){return n.node.value}function cF(n,e){n.node.value=e,uF(n)}function uX(n){return n.node.childCount>0}function hS(n,e){Zi(n.node.children,(t,r)=>{e(new lF(t,n,r))})}function dX(n,e,t,r){t&&!r&&e(n),hS(n,i=>{dX(i,e,!0,r)}),t&&r&&e(n)}function CE(n){return new Hn(null===n.parent?n.name:CE(n.parent)+"/"+n.name)}function uF(n){null!==n.parent&&function sMe(n,e,t){const r=function rMe(n){return void 0===Ff(n)&&!uX(n)}(t),i=Bl(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,uF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,uF(n))}(n.parent,n.name,n)}const oMe=/[\[\].#$\/\u0000-\u001F\u007F]/,aMe=/[\[\].#$\u0000-\u001F\u007F]/,dF=10485760,fS=function(n){return"string"==typeof n&&0!==n.length&&!oMe.test(n)},hX=function(n){return"string"==typeof n&&0!==n.length&&!aMe.test(n)},AE=function(n,e,t){const r=t instanceof Hn?new Cxe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Mf(r));if("function"==typeof e)throw new Error(n+"contains a function "+Mf(r)+" with contents = "+e.toString());if(jA(e))throw new Error(n+"contains "+e.toString()+" "+Mf(r));if("string"==typeof e&&e.length>dF/3&&LA(e)>dF)throw new Error(n+"contains a string greater than "+dF+" utf8 bytes "+Mf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Zi(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!fS(o)))throw new Error(n+" contains an invalid key ("+o+") "+Mf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Txe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=LA(e),IY(n)})(r,o),AE(n,a,r),function Axe(n){const e=n.parts_.pop();n.byteLength_-=LA(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Mf(r)+" in addition to actual children.")}},fF=function(n,e,t,r){if(!(r&&void 0===t||hX(t)))throw new Error(jg(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},uMe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),fF(n,e,t,r)};class dMe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Yo(n,e,t){(function pS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!SO(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function gX(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(hMe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Sa(r,e)||Sa(e,r))}function hMe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();xf&&Xi("event: "+t.toString()),Wg(r)}}}const fMe=25;class pMe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dMe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=XA(),this.transactionQueueTree_=new lF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yX(n){const t=n.infoData_.getNode(new Hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function DE(n){return eMe({timestamp:yX(n)})}function vX(n,e,t,r,i){n.dataUpdateCount++;const s=new Hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=OA(t,c=>Yr(c));o=function KRe(n,e,t,r){const i=tF(n,r);if(i){const s=nF(i),o=s.path,a=s.queryId,l=Zs(o,e),c=yr.fromObject(t);return rF(n,o,new Xg(zO(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Yr(t);o=iX(n.serverSyncTree_,s,l,i)}else if(r){const l=OA(t,c=>Yr(c));o=function WRe(n,e,t){const r=yr.fromObject(t);return Jg(n,new Xg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Yr(t);o=EE(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=t_(n,s)),Yo(n.eventQueue_,a,o)}function bX(n,e){pF(n,"connected",e),!1===e&&function vMe(n){e_(n,"onDisconnectEvents");const e=DE(n),t=XA();BO(n.onDisconnect_,Mn(),(i,s)=>{const o=cX(i,s,n.serverSyncTree_,e);Yg(t,i,o)});let r=[];BO(t,Mn(),(i,s)=>{r=r.concat(EE(n.serverSyncTree_,i,s));const o=function yF(n,e){const t=CE(wX(n,e)),r=dS(n.transactionQueueTree_,e);return function iMe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{vF(n,i)}),vF(n,r),dX(r,i=>{vF(n,i)}),t}(n,i);t_(n,o)}),n.onDisconnect_=XA(),Yo(n.eventQueue_,Mn(),r)}(n)}function pF(n,e,t){const r=new Hn("/.info/"+e),i=Yr(t);n.infoData_.updateSnapshot(r,i);const s=EE(n.infoSyncTree_,r,i);Yo(n.eventQueue_,r,s)}function mS(n){return n.nextWriteId_++}function e_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Xi(t,...e)}function _F(n,e,t){return cS(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function gS(n,e=n.transactionQueueTree_){if(e||_S(n,e),Ff(e)){const t=CX(n,e);ze(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function AMe(n,e,t){const r=t.map(c=>c.currentWriteId),i=_F(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];ze(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Zs(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{e_(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(md(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&d.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();_S(n,dS(n.transactionQueueTree_,e)),gS(n,n.transactionQueueTree_),Yo(n.eventQueue_,e,u);for(let m=0;m<d.length;m++)Wg(d[m])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Rs("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}t_(n,e)}},o)}(n,CE(e),t)}else uX(e)&&hS(e,t=>{gS(n,t)})}function t_(n,e){const t=wX(n,e),r=CE(t);return function SMe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Zs(t,l.path);let d,u=!1;if(ze(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,i=i.concat(md(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=fMe)u=!0,d="maxretry",i=i.concat(md(n.serverSyncTree_,l.currentWriteId,!0));else{const m=_F(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){AE("transaction failed: Data returned ",y,l.path);let b=Yr(y);"object"==typeof y&&null!=y&&Bl(y,".priority")||(b=b.updatePriority(m.getPriority()));const M=l.currentWriteId,B=DE(n),V=oF(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=mS(n),o.splice(o.indexOf(M),1),i=i.concat(JO(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(md(n.serverSyncTree_,M,!0))}else u=!0,d="nodata",i=i.concat(md(n.serverSyncTree_,l.currentWriteId,!0))}Yo(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}_S(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Wg(r[a]);gS(n,n.transactionQueueTree_)}(n,CX(n,t),r),r}function wX(n,e){let t,r=n.transactionQueueTree_;for(t=nn(e);null!==t&&void 0===Ff(r);)r=dS(r,t),t=nn(e=ar(e));return r}function CX(n,e){const t=[];return TX(n,e,t),t.sort((r,i)=>r.order-i.order),t}function TX(n,e,t){const r=Ff(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);hS(e,i=>{TX(n,i,t)})}function _S(n,e){const t=Ff(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,cF(e,t.length>0?t:void 0)}hS(e,r=>{_S(n,r)})}function vF(n,e){const t=Ff(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(ze(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(ze(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(md(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?cF(e,void 0):t.length=s+1,Yo(n.eventQueue_,CE(e),i);for(let o=0;o<r.length;o++)Wg(r[o])}}const bF=function(n,e){const t=RMe(n),r=t.namespace;return"firebase.com"===t.domain&&Ul(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ul("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new bO(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Hn(t.pathString)}},RMe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=function DMe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,d)));const m=function xMe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class SX{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ji(this.snapshot.exportVal())}}class DX{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class EF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ze(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Xo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return rn(this._path)?null:AO(this._path)}get ref(){return new ul(this._repo,this._path)}get _queryIdentifier(){const e=kY(this._queryParams),t=yO(e);return"{}"===t?"default":t}get _queryObject(){return kY(this._queryParams)}isEqual(e){if(!((e=Ta(e))instanceof Xo))return!1;const t=this._repo===e._repo,r=SO(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ixe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ul extends Xo{constructor(e,t){super(e,t,new OO,!1)}get parent(){const e=EY(this._path);return null===e?null:new ul(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Lf{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Hn(e),r=n_(this.ref,e);return new Lf(this._node.getChild(t),r,_r)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Lf(i,n_(this.ref,r),_r)))}hasChild(e){const t=new Hn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function n_(n,e){return null===nn((n=Ta(n))._path)?uMe("child","path",e,!1):fF("child","path",e,!1),new ul(n._repo,Lr(n._path,e))}function kMe(n){n=Ta(n);const e=new EF(()=>{}),t=new xE(e);return function _Me(n,e,t){const r=function QRe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=Zs(c,t);r=r||fd(u,d)});let i=n.syncPointTree_.get(t);i?r=r||fd(i,Mn()):(i=new ZY,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new dd(r,!0,!1):null;return function PRe(n){return eS(n.viewCache_)}(JY(i,e,tS(n.pendingWriteTree_,e._path),s?o.getNode():Ht.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Yr(i).withIndex(e._queryParams.getIndex());let o;if(eF(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=EE(n.serverSyncTree_,e._path,s);else{const a=IE(n.serverSyncTree_,e);o=iX(n.serverSyncTree_,e._path,s,a)}return Yo(n.eventQueue_,e._path,o),lS(n.serverSyncTree_,e,t,null,!0),s},i=>(e_(n,"get for query "+ji(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Lf(r,new ul(n._repo,n._path),n._queryParams.getIndex()))}class xE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new SX("value",this,new Lf(e.snapshotNode,new ul(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new DX(this,e,t):null}matches(e){return e instanceof xE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function FRe(n){ze(!sS,"__referenceConstructor has already been defined"),sS=n})(ul),function jRe(n){ze(!aS,"__referenceConstructor has already been defined"),aS=n}(ul);const IF={};function NX(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ul("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=bF(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=bF(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new cE(cE.OWNER):new XDe(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!fS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hX(n)}(t))throw new Error(jg(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),rn(o.path)||Ul("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function qMe(n,e,t,r){let i=IF[e.name];i||(i={},IF[e.name]=i);let s=i[n.toURLString()];return s&&Ul("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pMe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new YDe(n.name,t));return new QMe(d,n)}class QMe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function mMe(n,e,t){if(n.stats_=wO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new YA(n.repoInfo_,(r,i,s,o)=>{vX(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>bX(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ji(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Pf(n.repoInfo_,e,(r,i,s,o)=>{vX(n,r,i,s,o)},r=>{bX(n,r)},r=>{!function gMe(n,e){Zi(e,(t,r)=>{pF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function exe(n,e){const t=n.toString();return IO[t]||(IO[t]=e()),IO[t]}(n.repoInfo_,()=>new eRe(n.stats_,n.server_)),n.infoData_=new Qxe,n.infoSyncTree_=new rX({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=EE(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),pF(n,"connected",!1),n.serverSyncTree_=new rX({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Yo(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ul(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function GMe(n,e){const t=IF[e];(!t||t[n.key]!==n)&&Ul(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function IX(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ul("Cannot call "+e+" on a deleted database.")}}Pf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function ZMe(n){(function VQ(n){mO=n})(Hg),zg(new Tf("database",(e,{instanceIdentifier:t})=>NX(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),ad(FQ,"1.0.10",n),ad(FQ,"1.0.10","esm2017")}();const tPe=function FX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},LX=new eE("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ES=new cO("@firebase/auth");function IS(n,...e){ES.logLevel<=er.ERROR&&ES.error(`Auth (${Hg}): ${n}`,...e)}function So(n,...e){throw CF(n,...e)}function Da(n,...e){return CF(n,...e)}function wF(n,e,t){const r=Object.assign(Object.assign({},tPe()),{[e]:t});return new eE("auth","Firebase",r).create(e,{appName:n.name})}function Ji(n){return wF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CF(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return LX.create(n,...e)}function He(n,e,...t){if(!n)throw CF(e,...t)}function Wl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw IS(e),new Error(e)}function yd(n,e){n||Wl(e)}function ME(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function TF(){return"http:"===VX()||"https:"===VX()}function VX(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class PE{constructor(e,t){this.shortDelay=e,this.longDelay=t,yd(t>e,"Short delay should be less than long delay!"),this.isMobile=sO()||CQ()}get(){return function rPe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(TF()||function ISe(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function AF(n,e){yd(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class BX{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sPe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oPe=new PE(3e4,6e4);function Ar(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Sr(n,e,t,r){return SF.apply(this,arguments)}function SF(){return(SF=(0,O.A)(function*(n,e,t,r,i={}){return UX(n,i,(0,O.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Ug(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return function ESe(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(c.referrerPolicy="no-referrer"),BX.fetch()(jX(n,n.config.apiHost,t,a),c)}))})).apply(this,arguments)}function UX(n,e,t){return DF.apply(this,arguments)}function DF(){return(DF=(0,O.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},sPe),e);try{const i=new lPe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw kE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw kE(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw kE(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw kE(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw wF(n,u,c);So(n,u)}}catch(i){if(i instanceof sd)throw i;So(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function xF(){return(xF=(0,O.A)(function*(n,e,t,r,i={}){const s=yield Sr(n,e,t,r,i);return"mfaPendingCredential"in s&&So(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function jX(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?AF(n.config,i):`${n.config.apiScheme}://${i}`}class lPe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Da(this.auth,"network-request-failed")),oPe.get())})}}function kE(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Da(n,e,r);return i.customData._tokenResponse=t,i}function PF(){return(PF=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function GX(n,e){return NF.apply(this,arguments)}function NF(){return(NF=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function NE(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function OF(){return(OF=(0,O.A)(function*(n,e=!1){const t=Ta(n),r=yield t.getIdToken(e),i=wS(r);He(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:NE(FF(i.auth_time)),issuedAtTime:NE(FF(i.iat)),expirationTime:NE(FF(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function FF(n){return 1e3*Number(n)}function wS(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return IS("JWT malformed, contained fewer than 3 sections"),null;try{const i=MA(t);return i?JSON.parse(i):(IS("Failed to decode base64 JWT payload"),null)}catch(i){return IS("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qX(n){const e=wS(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $c(n,e){return LF.apply(this,arguments)}function LF(){return(LF=(0,O.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof sd&&function fPe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class pPe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,O.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,O.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class VF{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=NE(this.lastLoginAt),this.creationTime=NE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function OE(n){return BF.apply(this,arguments)}function BF(){return(BF=(0,O.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield $c(n,GX(t,{idToken:r}));He(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?KX(s.providerUserInfo):[],a=function gPe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new VF(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})).apply(this,arguments)}function UF(){return(UF=(0,O.A)(function*(n){const e=Ta(n);yield OE(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function KX(n){return n.map(e=>{var{providerId:t}=e,r=(0,Nc.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function jF(){return(jF=(0,O.A)(function*(n,e){const t=yield UX(n,{},(0,O.A)(function*(){const r=Ug({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=jX(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",BX.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function zF(){return(zF=(0,O.A)(function*(n,e){return Sr(n,"POST","/v2/accounts:revokeToken",Ar(n,e))})).apply(this,arguments)}class i_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qX(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(0!==e.length,"internal-error");const t=qX(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,O.A)(function*(){return t||!r.accessToken||r.isExpired?(He(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,O.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function _Pe(n,e){return jF.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new i_;return r&&(He("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(He("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(He("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new i_,this.toJSON())}_performRefresh(){return Wl("not implemented")}}function vd(n,e){He("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Wc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Nc.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pPe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new VF(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,O.A)(function*(){const r=yield $c(t,t.stsTokenManager.getToken(t.auth,e));return He(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function hPe(n){return OF.apply(this,arguments)}(this,e)}reload(){return function mPe(n){return UF.apply(this,arguments)}(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,O.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield OE(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,O.A)(function*(){if(od(e.auth.app))return Promise.reject(Ji(e.auth));const t=yield e.getIdToken();return yield $c(e,function uPe(n,e){return PF.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,m=null!==(i=t.email)&&void 0!==i?i:void 0,y=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,b=null!==(o=t.photoURL)&&void 0!==o?o:void 0,T=null!==(a=t.tenantId)&&void 0!==a?a:void 0,M=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,B=null!==(c=t.createdAt)&&void 0!==c?c:void 0,V=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:Q,emailVerified:be,isAnonymous:Be,providerData:je,stsTokenManager:H}=t;He(Q&&H,e,"internal-error");const L=i_.fromJSON(this.name,H);He("string"==typeof Q,e,"internal-error"),vd(d,e.name),vd(m,e.name),He("boolean"==typeof be,e,"internal-error"),He("boolean"==typeof Be,e,"internal-error"),vd(y,e.name),vd(b,e.name),vd(T,e.name),vd(M,e.name),vd(B,e.name),vd(V,e.name);const W=new Wc({uid:Q,auth:e,email:m,emailVerified:be,displayName:d,isAnonymous:Be,photoURL:b,phoneNumber:y,tenantId:T,stsTokenManager:L,createdAt:B,lastLoginAt:V});return je&&Array.isArray(je)&&(W.providerData=je.map(J=>Object.assign({},J))),M&&(W._redirectEventId=M),W}static _fromIdTokenResponse(e,t,r=!1){return(0,O.A)(function*(){const i=new i_;i.updateFromServerResponse(t);const s=new Wc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield OE(s),s})()}static _fromGetAccountInfoResponse(e,t,r){return(0,O.A)(function*(){const i=t.users[0];He(void 0!==i.localId,"internal-error");const s=void 0!==i.providerUserInfo?KX(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||s?.length),a=new i_;a.updateFromIdToken(r);const l=new Wc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new VF(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||s?.length)};return Object.assign(l,c),l})()}}const QX=new Map;function Gc(n){yd(n instanceof Function,"Expected a class definition");let e=QX.get(n);return e?(yd(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,QX.set(n,e),e)}const YX=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,O.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,O.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,O.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function CS(n,e,t){return`firebase:${n}:${e}:${t}`}class s_{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=CS(this.userKey,i.apiKey,s),this.fullPersistenceKey=CS("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,O.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Wc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,O.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,O.A)(function*(){if(!t.length)return new s_(Gc(YX),e,r);const i=(yield Promise.all(t.map(function(){var c=(0,O.A)(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Gc(YX);const o=CS(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const d=Wc._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=(0,O.A)(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return c.apply(this,arguments)}}())),new s_(s,e,r)):new s_(s,e,r)})()}}function XX(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tZ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rZ(e))return"Blackberry";if(iZ(e))return"Webos";if(JX(e))return"Safari";if((e.includes("chrome/")||eZ(e))&&!e.includes("edge/"))return"Chrome";if(nZ(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function ZX(n=us()){return/firefox\//i.test(n)}function JX(n=us()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eZ(n=us()){return/crios\//i.test(n)}function tZ(n=us()){return/iemobile/i.test(n)}function nZ(n=us()){return/android/i.test(n)}function rZ(n=us()){return/blackberry/i.test(n)}function iZ(n=us()){return/webos/i.test(n)}function HF(n=us()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sZ(n=us()){return HF(n)||nZ(n)||iZ(n)||rZ(n)||/windows phone/i.test(n)||tZ(n)}function oZ(n,e=[]){let t;switch(n){case"Browser":t=XX(us());break;case"Worker":t=`${XX(us())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hg}/${r}`}class EPe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,O.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function $F(){return($F=(0,O.A)(function*(n,e={}){return Sr(n,"GET","/v2/passwordPolicy",Ar(n,e))})).apply(this,arguments)}class CPe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=null===(t=l.meetsMinPasswordLength)||void 0===t||t),l.isValid&&(l.isValid=null===(r=l.meetsMaxPasswordLength)||void 0===r||r),l.isValid&&(l.isValid=null===(i=l.containsLowercaseLetter)||void 0===i||i),l.isValid&&(l.isValid=null===(s=l.containsUppercaseLetter)||void 0===s||s),l.isValid&&(l.isValid=null===(o=l.containsNumericCharacter)||void 0===o||o),l.isValid&&(l.isValid=null===(a=l.containsNonAlphanumericCharacter)||void 0===a||a),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class TPe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aZ(this),this.idTokenSubscription=new aZ(this),this.beforeStateQueue=new EPe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Gc(t)),this._initializationPromise=this.queue((0,O.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield s_.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,O.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,O.A)(function*(){try{const r=yield GX(t,{idToken:e}),i=yield Wc._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,O.A)(function*(){var r;if(od(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(l,l))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=s?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return He(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,O.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,O.A)(function*(){try{yield OE(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function iPe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,O.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,O.A)(function*(){if(od(t.app))return Promise.reject(Ji(t));const r=e?Ta(e):null;return r&&He(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,O.A)(function*(){if(!r._deleted)return e&&He(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,O.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,O.A)(function*(){return od(e.app)?Promise.reject(Ji(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return od(this.app)?Promise.reject(Ji(this)):this.queue((0,O.A)(function*(){yield t.assertedPersistence.setPersistence(Gc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,O.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,O.A)(function*(){const t=yield function IPe(n){return $F.apply(this,arguments)}(e),r=new CPe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new eE("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,O.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function yPe(n,e){return zF.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,O.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,O.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Gc(e)||t._popupRedirectResolver;He(r,t,"argument-error"),t.redirectPersistenceManager=yield s_.create(t,[Gc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,O.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,O.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,O.A)(function*(){if(e===t.currentUser)return t.queue((0,O.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}{const l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){var t=this;return(0,O.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oZ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,O.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,O.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function nPe(n,...e){ES.logLevel<=er.WARN&&ES.warn(`Auth (${Hg}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function vi(n){return Ta(n)}class aZ{constructor(e){this.auth=e,this.observer=null,this.addObserver=function PSe(n,e){const t=new kSe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let FE={loadJS:()=>(0,O.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lZ(n){return`__${n}${Math.floor(1e6*Math.random())}`}function dZ(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function hZ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class BE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wl("not implemented")}_getIdTokenResponse(e){return Wl("not implemented")}_linkToIdToken(e,t){return Wl("not implemented")}_getReauthenticationResolver(e){return Wl("not implemented")}}function qc(n,e){return lL.apply(this,arguments)}function lL(){return(lL=(0,O.A)(function*(n,e){return function Hc(n,e,t,r){return xF.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Ar(n,e))})).apply(this,arguments)}class Kc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class oke extends Kc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,O.A)(function*(){const s=yield Wc._fromIdTokenResponse(e,r,i),o=_Z(r);return new xa({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,O.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=_Z(r);return new xa({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function _Z(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class xS extends sd{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,xS.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new xS(e,t,r,i)}}function yZ(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?xS._fromErrorAndOperation(n,s,e,r):s})}function yL(){return(yL=(0,O.A)(function*(n,e,t=!1){const r=yield $c(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return xa._forOperation(n,"link",r)})).apply(this,arguments)}function bL(){return(bL=(0,O.A)(function*(n,e,t=!1){const{auth:r}=n;if(od(r.app))return Promise.reject(Ji(r));const i="reauthenticate";try{const s=yield $c(n,yZ(r,i,e,n),t);He(s.idToken,r,"internal-error");const o=wS(s.idToken);He(o,r,"internal-error");const{sub:a}=o;return He(n.uid===a,r,"user-mismatch"),xa._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&So(r,"user-mismatch"),s}})).apply(this,arguments)}function EL(){return(EL=(0,O.A)(function*(n,e,t=!1){if(od(n.app))return Promise.reject(Ji(n));const r="signIn",i=yield yZ(n,r,e),s=yield xa._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function UL(){return(UL=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:createAuthUri",Ar(n,e))})).apply(this,arguments)}function jL(){return jL=(0,O.A)(function*(n,e){const r={identifier:e,continueUri:TF()?ME():"http://localhost"},{signinMethods:i}=yield function fke(n,e){return UL.apply(this,arguments)}(Ta(n),r);return i||[]}),jL.apply(this,arguments)}const PS="__sak";class TZ{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(PS,"1"),this.storage.removeItem(PS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dke=(()=>{class n extends TZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sZ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function bPe(){return function wSe(){const n=us();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,O.A)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,O.A)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,O.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),AZ=(()=>{class n extends TZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let Rke=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,O.A)(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=(0,O.A)(function*(m){return m(i.origin,a)});return function(m){return d.apply(this,arguments)}}()),u=yield function xke(n){return Promise.all(n.map(function(){var e=(0,O.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function ZL(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class Mke{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,O.A)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=ZL("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(y.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Di(){return window}function JL(){return typeof Di().WorkerGlobalScope<"u"&&"function"==typeof Di().importScripts}function eV(){return(eV=(0,O.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const SZ="firebaseLocalStorageDb",kS="firebaseLocalStorage",DZ="fbase_key";class $E{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function NS(n,e){return n.transaction([kS],e?"readwrite":"readonly").objectStore(kS)}function tV(){const n=indexedDB.open(SZ,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(kS,{keyPath:DZ})}catch(i){t(i)}}),n.addEventListener("success",(0,O.A)(function*(){const r=n.result;r.objectStoreNames.contains(kS)?e(r):(r.close(),yield function Lke(){const n=indexedDB.deleteDatabase(SZ);return new $E(n).toPromise()}(),e(yield tV()))}))})}function xZ(n,e,t){return nV.apply(this,arguments)}function nV(){return(nV=(0,O.A)(function*(n,e,t){const r=NS(n,!0).put({[DZ]:e,value:t});return new $E(r).toPromise()})).apply(this,arguments)}function rV(){return(rV=(0,O.A)(function*(n,e){const t=NS(n,!1).get(e),r=yield new $E(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function RZ(n,e){const t=NS(n,!0).delete(e);return new $E(t).toPromise()}const jke=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,O.A)(function*(){return t.db||(t.db=yield tV()),t.db})()}_withRetries(t){var r=this;return(0,O.A)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,O.A)(function*(){return JL()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,O.A)(function*(){t.receiver=Rke._getInstance(function Oke(){return JL()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,O.A)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,O.A)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,O.A)(function*(){var r,i;if(t.activeServiceWorker=yield function kke(){return eV.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new Mke(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,O.A)(function*(){if(r.sender&&r.activeServiceWorker&&function Nke(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,O.A)(function*(){try{if(!indexedDB)return!1;const t=yield tV();return yield xZ(t,PS,"1"),yield RZ(t,PS),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,O.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,O.A)(function*(){return i._withPendingWrite((0,O.A)(function*(){return yield i._withRetries(s=>xZ(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,O.A)(function*(){const i=yield r._withRetries(s=>function Vke(n,e){return rV.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,O.A)(function*(){return r._withPendingWrite((0,O.A)(function*(){return yield r._withRetries(i=>RZ(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,O.A)(function*(){const r=yield t._withRetries(o=>{const a=NS(o,!1).getAll();return new $E(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;if(0!==r.length)for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,O.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();lZ("rcb"),new PE(3e4,6e4);class pV extends BE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Yke(n){return function EZ(n,e){return EL.apply(this,arguments)}(n.auth,new pV(n),n.bypassAuthState)}function Xke(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),function bZ(n,e){return bL.apply(this,arguments)}(t,new pV(n),n.bypassAuthState)}function Zke(n){return mV.apply(this,arguments)}function mV(){return(mV=(0,O.A)(function*(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),function _L(n,e){return yL.apply(this,arguments)}(t,new pV(n),n.bypassAuthState)})).apply(this,arguments)}class Jke{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,O.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,O.A)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yke;case"linkViaPopup":case"linkViaRedirect":return Zke;case"reauthViaPopup":case"reauthViaRedirect":return Xke;default:So(this.auth,"internal-error")}}resolve(e){yd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new PE(2e3,1e4);const eNe="pendingRedirect",GE=new Map;class tNe extends Jke{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,O.A)(function*(){let r=GE.get(t.auth._key());if(!r){try{const s=(yield function nNe(n,e){return bV.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}GE.set(t.auth._key(),r)}return t.bypassAuthState||GE.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,O.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,O.A)(function*(){})()}cleanUp(){}}function bV(){return(bV=(0,O.A)(function*(n,e){const t=function kZ(n){return CS(eNe,n.config.apiKey,n.name)}(e),r=function PZ(n){return Gc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function rNe(n,e){GE.set(n._key(),e)}function NZ(n,e){return SV.apply(this,arguments)}function SV(){return(SV=(0,O.A)(function*(n,e,t=!1){if(od(n.app))return Promise.reject(Ji(n));const r=vi(n),i=function Bf(n,e){return e?Gc(e):(He(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),o=yield new tNe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class lNe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function cNe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LZ(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!LZ(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Da(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(FZ(e))}saveEventToCache(e){this.cachedEventUids.add(FZ(e)),this.lastProcessedEventTime=Date.now()}}function FZ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function LZ({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function xV(){return(xV=(0,O.A)(function*(n,e={}){return Sr(n,"GET","/v1/projects",e)})).apply(this,arguments)}const dNe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hNe=/^https?/;function RV(){return RV=(0,O.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function uNe(n){return xV.apply(this,arguments)}(n);for(const t of e)try{if(pNe(t))return}catch{}So(n,"unauthorized-domain")}),RV.apply(this,arguments)}function pNe(n){const e=ME(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!hNe.test(t))return!1;if(dNe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const mNe=new PE(3e4,6e4);function VZ(){const n=Di().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function gNe(n){return new Promise((e,t)=>{var r,i,s;function o(){VZ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VZ(),t(Da(n,"network-request-failed"))},timeout:mNe.get()})}if(null!==(i=null===(r=Di().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Di().gapi)||void 0===s||!s.load){const a=lZ("iframefcb");return Di()[a]=()=>{gapi.load?o():t(Da(n,"network-request-failed"))},function WF(n){return FE.loadJS(n)}(`${function xPe(){return FE.gapiScript}()}?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw OS=null,e})}let OS=null;const yNe=new PE(5e3,15e3),vNe="__/auth/iframe",bNe="emulator/auth/iframe",ENe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},INe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wNe(n){const e=n.config;He(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?AF(e,bNe):`https://${n.config.authDomain}/${vNe}`,r={apiKey:e.apiKey,appName:n.name,v:Hg},i=INe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ug(r).slice(1)}`}function MV(){return MV=(0,O.A)(function*(n){const e=yield function _Ne(n){return OS=OS||gNe(n),OS}(n),t=Di().gapi;return He(t,n,"internal-error"),e.open({where:document.body,url:wNe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ENe,dontclear:!0},r=>new Promise(function(){var i=(0,O.A)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Da(n,"network-request-failed"),l=Di().setTimeout(()=>{o(a)},yNe.get());function c(){Di().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),MV.apply(this,arguments)}const TNe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class BZ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const PNe="__/auth/handler",kNe="emulator/auth/handler",NNe=encodeURIComponent("fac");function UZ(n,e,t,r,i,s){return PV.apply(this,arguments)}function PV(){return(PV=(0,O.A)(function*(n,e,t,r,i,s){He(n.config.authDomain,n,"auth-domain-config-required"),He(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Hg,eventId:i};if(e instanceof Kc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",oO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof oke){const u=e.getScopes().filter(d=>""!==d);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield n._getAppCheckToken(),c=l?`#${NNe}=${encodeURIComponent(l)}`:"";return`${function ONe({config:n}){return n.emulator?AF(n,kNe):`https://${n.authDomain}/${PNe}`}(n)}?${Ug(a).slice(1)}${c}`})).apply(this,arguments)}const kV="webStorageSupport",LNe=class FNe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AZ,this._completeRedirectFn=NZ,this._overrideRedirectResult=rNe}_openPopup(e,t,r,i){var s=this;return(0,O.A)(function*(){var o;yd(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield UZ(e,t,r,ME(),i);return function RNe(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},TNe),{width:r.toString(),height:i.toString(),top:s,left:o}),c=us().toLowerCase();t&&(a=eZ(c)?"_blank":t),ZX(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(function vPe(n=us()){var e;return HF(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function MNe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new BZ(null);const d=window.open(e||"",a,u);He(d,n,"popup-blocked");try{d.focus()}catch{}return new BZ(d)}(e,a,ZL())})()}_openRedirect(e,t,r,i){var s=this;return(0,O.A)(function*(){return yield s._originValidation(e),function Pke(n){Di().location.href=n}(yield UZ(e,t,r,ME(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(yd(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,O.A)(function*(){const r=yield function CNe(n){return MV.apply(this,arguments)}(e),i=new lNe(e);return r.register("authEvent",s=>(He(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kV,{type:kV},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[kV];void 0!==o&&t(!!o),So(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function fNe(n){return RV.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sZ()||JX()||HF()}};var $Z="@firebase/auth";class VNe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,O.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const zNe=wQ("authIdTokenMaxAge")||300;let GZ=null;const HNe=n=>function(){var e=(0,O.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>zNe)return;const s=r?.token;GZ!==s&&(GZ=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function $Ne(n=RQ()){const e=UA(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function VPe(n,e){const t=UA(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(FA(t.getOptions(),e??{}))return i;So(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:LNe,persistence:[jke,Dke,AZ]}),r=wQ("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=HNe(s.toString());(function Ike(n,e,t){Ta(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function Eke(n,e,t,r){Ta(n).onIdTokenChanged(e,t,r)}(t,a=>o(a))}}const i=EQ("auth");return i&&function UPe(n,e,t){const r=vi(n);He(r._canInitEmulator,r,"emulator-config-failed"),He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=dZ(e),{host:o,port:a}=function jPe(n){const e=dZ(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:hZ(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:hZ(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function zPe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function APe(n){FE=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Da("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function WNe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function UNe(n){zg(new Tf("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;He(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oZ(n)},c=new TPe(r,i,s,l);return function BPe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Gc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zg(new Tf("auth-internal",e=>{const t=vi(e.getProvider("auth").getImmediate());return new VNe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ad($Z,"1.8.1",function BNe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),ad($Z,"1.8.1","esm2017")}("Browser"),G(5046);var Gl=G(9574);Gl.A.registerVersion("firebase","10.14.1","app-compat");const KNe=["ngOnDestroy"];class qZ{constructor(e){return e}}const qE=new ye("angularfire2.app.options"),KE=new ye("angularfire2.app.name");function LS(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Gl.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Gl.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;XNe("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new qZ(o)}const XNe=(n,...e)=>{},ZNe={provide:qZ,useFactory:LS,deps:[qE,_t,[new Mi,KE]]};let JNe=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:qE,useValue:t},{provide:KE,useValue:r}]}}constructor(t){Gl.A.registerVersion("angularfire",rd.full,"core"),Gl.A.registerVersion("angularfire",rd.full,"app-compat"),Gl.A.registerVersion("angular",K5.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Se($s))};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[ZNe]})}return n})();function OV(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function e1e(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(KZ("error",`${e} was already initialized on the ${t} Firebase App with different settings.${t1e?" You may need to reload as Firebase is not HMR aware.":""}`),KZ("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const t1e=typeof module<"u"&&!!module.hot,KZ=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class n1e extends E{constructor(e=1/0,t=1/0,r=_1){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function FV(n={}){const{connector:e=()=>new E,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=l=void 0,u=d=!1},b=()=>{const T=o;y(),T?.unsubscribe()};return me((T,M)=>{c++,!d&&!u&&m();const B=l=l??e();M.add(()=>{c--,0===c&&!d&&!u&&(a=LV(b,i))}),B.subscribe(M),!o&&c>0&&(o=new Hi({next:V=>B.next(V),error:V=>{d=!0,m(),a=LV(y,t,V),B.error(V)},complete:()=>{u=!0,m(),a=LV(y,r),B.complete()}}),Ys(T).subscribe(o))})(s)}}function LV(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Hi({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function QZ(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,FV({connector:()=>new n1e(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function YZ(n,e){return pt(e)?Yt(()=>n,e):Yt(()=>n)}const VV=new ye("angularfire2.auth.use-emulator"),BV=new ye("angularfire2.auth.settings"),UV=new ye("angularfire2.auth.tenant-id"),jV=new ye("angularfire2.auth.langugage-code"),zV=new ye("angularfire2.auth.use-device-language"),HV=new ye("angularfire.auth.persistence"),$V=(n,e,t,r,i,s,o,a)=>OV(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let QE=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,u,d,m,y){const b=new E,T=qe(void 0).pipe(Wu(o.outsideAngular),Yt(()=>s.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,5046)))),Ve(()=>LS(t,s,r)),Ve(M=>$V(M,s,a,c,u,d,l,m)),QZ({bufferSize:1,refCount:!1}));if(_T(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=qe(null);else{T.pipe(Xu()).subscribe();const M=T.pipe(Yt(Q=>Q.getRedirectResult().then(be=>be,()=>null)),Ui,QZ({bufferSize:1,refCount:!1})),B=T.pipe(Yt(Q=>new Vt(be=>({unsubscribe:s.runOutsideAngular(()=>Q.onAuthStateChanged(Be=>be.next(Be),Be=>be.error(Be),()=>be.complete()))})))),V=T.pipe(Yt(Q=>new Vt(be=>({unsubscribe:s.runOutsideAngular(()=>Q.onIdTokenChanged(Be=>be.next(Be),Be=>be.error(Be),()=>be.complete()))}))));this.authState=M.pipe(YZ(B),rf(o.outsideAngular),Wu(o.insideAngular)),this.user=M.pipe(YZ(V),rf(o.outsideAngular),Wu(o.insideAngular)),this.idToken=this.user.pipe(Yt(Q=>Q?zn(Q.getIdToken()):qe(null))),this.idTokenResult=this.user.pipe(Yt(Q=>Q?zn(Q.getIdTokenResult()):qe(null))),this.credential=sl(M,b,this.authState.pipe(Qr(Q=>!Q))).pipe(Ve(Q=>Q?.user?Q:null),rf(o.outsideAngular),Wu(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(KNe.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const d=u?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,d),d})})})}))(this,T,s,{spy:{apply:(M,B,V)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&V.then(Q=>b.next(Q))}}})}static \u0275fac=function(r){return new(r||n)(Se(qE),Se(KE,8),Se($s),Se(_t),Se(Fg),Se(VV,8),Se(BV,8),Se(UV,8),Se(jV,8),Se(zV,8),Se(HV,8),Se(DA,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),i1e=(()=>{class n{constructor(){Gl.A.registerVersion("angularfire",rd.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[QE]})}return n})(),WV=(()=>{class n{constructor(t,r){this.auth=t,this.afAuth=r}get user(){return this.afAuth.authState}login(t,r){return oSe(this.auth,t,r)}register(t,r,i){return rSe(this.auth,t,r).then(s=>{const o=s.user;return o?(lSe(o,{displayName:i}).then(()=>{console.log("\u4f7f\u7528\u8005\u540d\u7a31\u5df2\u66f4\u65b0:",i)}),nO(o).then(()=>{console.log("\u9a57\u8b49\u4fe1\u5df2\u767c\u9001\u81f3:",t)}),o):Promise.reject("\u4f7f\u7528\u8005\u8a3b\u518a\u5931\u6557")})}loginWithGoogle(){const t=new id.X;return aSe(this.auth,t)}isLoggedIn(){return this.afAuth.authState.pipe(Ve(t=>null!==t))}getUser(){return new Vt(t=>{sSe(this.auth,r=>{t.next(r)})})}logout(){this.afAuth.signOut()}getAuthState(){return this.afAuth.authState}getUserData(t){return kMe(function xX(n,e){return(n=Ta(n))._checkNotDeleted("ref"),void 0!==e?n_(n._root,e):n._root}(function YMe(n=RQ(),e){const t=UA(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(()=>{const e=EQ("database");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();r&&function XMe(n,e,t,r={}){(n=Ta(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ul("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ul('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new cE(cE.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:function ySe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[RA(JSON.stringify({alg:"none",type:"JWT"})),RA(JSON.stringify(o)),""].join(".")}(r.mockUserToken,n.app.options.projectId);s=new cE(o)}!function WMe(n,e,t,r){n.repoInfo_=new bO(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}(),`users/${t}`)).then(s=>s.val())}sendVerificationEmail(t){return nO(t)}resendVerificationEmail(t){const r=$Ne();return function pke(n,e){return jL.apply(this,arguments)}(r,t).then(i=>{if(i.includes("password")){const s=r.currentUser;return s?nO(s):Promise.reject(new Error("\u8acb\u5148\u767b\u5165\u4ee5\u5bc4\u9001\u9a57\u8b49\u4fe1\u3002"))}return Promise.reject(new Error("\u6b64\u96fb\u5b50\u90f5\u4ef6\u672a\u8a3b\u518a\u3002"))})}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{console.log("\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001")}).catch(r=>{throw console.error("\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u767c\u9001\u5931\u6557",r),r})}static{this.\u0275fac=function(r){return new(r||n)(Se(xA),Se(QE))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),s1e=(()=>{class n{constructor(){this.loadingSubject=new F(!1),this.messageSubject=new F(""),this.loading$=this.loadingSubject.asObservable(),this.message$=this.messageSubject.asObservable()}show(t){this.loadingSubject.next(!0),this.messageSubject.next(t)}hide(){this.loadingSubject.next(!1),this.messageSubject.next("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GV(){return me((n,e)=>{let t,r=!1;n.subscribe(ke(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Uf,JZ,XZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZZ={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(H,L,W){W||(W=0);var J=Array(16);if("string"==typeof L)for(var ne=0;16>ne;++ne)J[ne]=L.charCodeAt(W++)|L.charCodeAt(W++)<<8|L.charCodeAt(W++)<<16|L.charCodeAt(W++)<<24;else for(ne=0;16>ne;++ne)J[ne]=L[W++]|L[W++]<<8|L[W++]<<16|L[W++]<<24;var re=H.g[3],q=(L=H.g[0])+(re^(W=H.g[1])&((ne=H.g[2])^re))+J[0]+3614090360&4294967295;q=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=W+(q<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[1]+3905402710&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[2]+606105819&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[3]+3250441966&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[4]+4118548399&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[5]+1200080426&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[6]+2821735955&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[7]+4249261313&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[8]+1770035416&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[9]+2336552879&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[10]+4294925233&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[11]+2304563134&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[12]+1804603682&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[13]+4254626195&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[14]+2792965006&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[15]+1236535329&4294967295)<<22&4294967295|q>>>10))+((q=L+(ne^re&(W^ne))+J[1]+4129170786&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[6]+3225465664&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[11]+643717713&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[0]+3921069994&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[5]+3593408605&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[10]+38016083&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[15]+3634488961&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[4]+3889429448&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[9]+568446438&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[14]+3275163606&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[3]+4107603335&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[8]+1163531501&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[13]+2850285829&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[2]+4243563512&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[7]+1735328473&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[12]+2368359562&4294967295)<<20&4294967295|q>>>12))+((q=L+(W^ne^re)+J[5]+4294588738&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[8]+2272392833&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[11]+1839030562&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[14]+4259657740&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[1]+2763975236&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[4]+1272893353&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[7]+4139469664&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[10]+3200236656&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[13]+681279174&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[0]+3936430074&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[3]+3572445317&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[6]+76029189&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[9]+3654602809&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[12]+3873151461&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[15]+530742520&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[2]+3299628645&4294967295)<<23&4294967295|q>>>9))+((q=L+(ne^(W|~re))+J[0]+4096336452&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[7]+1126891415&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[14]+2878612391&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[5]+4237533241&4294967295)<<21&4294967295|q>>>11))+((q=L+(ne^(W|~re))+J[12]+1700485571&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[3]+2399980690&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[10]+4293915773&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[1]+2240044497&4294967295)<<21&4294967295|q>>>11))+((q=L+(ne^(W|~re))+J[8]+1873313359&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[15]+4264355552&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[6]+2734768916&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[13]+1309151649&4294967295)<<21&4294967295|q>>>11))+((re=(L=W+((q=L+(ne^(W|~re))+J[4]+4149444226&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[11]+3174756917&4294967295)<<10&4294967295|q>>>22))^((ne=re+((q=ne+(L^(re|~W))+J[2]+718787259&4294967295)<<15&4294967295|q>>>17))|~L))+J[9]+3951481745&4294967295,H.g[0]=H.g[0]+L&4294967295,H.g[1]=H.g[1]+(ne+(q<<21&4294967295|q>>>11))&4294967295,H.g[2]=H.g[2]+ne&4294967295,H.g[3]=H.g[3]+re&4294967295}function o(H,L){this.h=L;for(var W=[],J=!0,ne=H.length-1;0<=ne;ne--){var re=0|H[ne];J&&re==L||(W[ne]=re,J=!1)}this.g=W}(function e(H,L){function W(){}W.prototype=L.prototype,H.D=L.prototype,H.prototype=new W,H.prototype.constructor=H,H.C=function(J,ne,re){for(var q=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)q[Hr-2]=arguments[Hr];return L.prototype[ne].apply(J,q)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(H,L){void 0===L&&(L=H.length);for(var W=L-this.blockSize,J=this.B,ne=this.h,re=0;re<L;){if(0==ne)for(;re<=W;)i(this,H,re),re+=this.blockSize;if("string"==typeof H){for(;re<L;)if(J[ne++]=H.charCodeAt(re++),ne==this.blockSize){i(this,J),ne=0;break}}else for(;re<L;)if(J[ne++]=H[re++],ne==this.blockSize){i(this,J),ne=0;break}}this.h=ne,this.o+=L},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var L=1;L<H.length-8;++L)H[L]=0;var W=8*this.o;for(L=H.length-8;L<H.length;++L)H[L]=255&W,W/=256;for(this.u(H),H=Array(16),L=W=0;4>L;++L)for(var J=0;32>J;J+=8)H[W++]=this.g[L]>>>J&255;return H};var a={};function l(H){return-128<=H&&128>H?function s(H,L){var W=a;return Object.prototype.hasOwnProperty.call(W,H)?W[H]:W[H]=L(H)}(H,function(L){return new o([0|L],0>L?-1:0)}):new o([0|H],0>H?-1:0)}function c(H){if(isNaN(H)||!isFinite(H))return d;if(0>H)return M(c(-H));for(var L=[],W=1,J=0;H>=W;J++)L[J]=H/W|0,W*=4294967296;return new o(L,0)}var d=l(0),m=l(1),y=l(16777216);function b(H){if(0!=H.h)return!1;for(var L=0;L<H.g.length;L++)if(0!=H.g[L])return!1;return!0}function T(H){return-1==H.h}function M(H){for(var L=H.g.length,W=[],J=0;J<L;J++)W[J]=~H.g[J];return new o(W,~H.h).add(m)}function B(H,L){return H.add(M(L))}function V(H,L){for(;(65535&H[L])!=H[L];)H[L+1]+=H[L]>>>16,H[L]&=65535,L++}function Q(H,L){this.g=H,this.h=L}function be(H,L){if(b(L))throw Error("division by zero");if(b(H))return new Q(d,d);if(T(H))return L=be(M(H),L),new Q(M(L.g),M(L.h));if(T(L))return L=be(H,M(L)),new Q(M(L.g),L.h);if(30<H.g.length){if(T(H)||T(L))throw Error("slowDivide_ only works with positive integers.");for(var W=m,J=L;0>=J.l(H);)W=Be(W),J=Be(J);var ne=je(W,1),re=je(J,1);for(J=je(J,2),W=je(W,2);!b(J);){var q=re.add(J);0>=q.l(H)&&(ne=ne.add(W),re=q),J=je(J,1),W=je(W,1)}return L=B(H,ne.j(L)),new Q(ne,L)}for(ne=d;0<=H.l(L);){for(W=Math.max(1,Math.floor(H.m()/L.m())),J=48>=(J=Math.ceil(Math.log(W)/Math.LN2))?1:Math.pow(2,J-48),q=(re=c(W)).j(L);T(q)||0<q.l(H);)q=(re=c(W-=J)).j(L);b(re)&&(re=m),ne=ne.add(re),H=B(H,q)}return new Q(ne,H)}function Be(H){for(var L=H.g.length+1,W=[],J=0;J<L;J++)W[J]=H.i(J)<<1|H.i(J-1)>>>31;return new o(W,H.h)}function je(H,L){var W=L>>5;L%=32;for(var J=H.g.length-W,ne=[],re=0;re<J;re++)ne[re]=0<L?H.i(re+W)>>>L|H.i(re+W+1)<<32-L:H.i(re+W);return new o(ne,H.h)}(n=o.prototype).m=function(){if(T(this))return-M(this).m();for(var H=0,L=1,W=0;W<this.g.length;W++){var J=this.i(W);H+=(0<=J?J:4294967296+J)*L,L*=4294967296}return H},n.toString=function(H){if(2>(H=H||10)||36<H)throw Error("radix out of range: "+H);if(b(this))return"0";if(T(this))return"-"+M(this).toString(H);for(var L=c(Math.pow(H,6)),W=this,J="";;){var ne=be(W,L).g,re=((0<(W=B(W,ne.j(L))).g.length?W.g[0]:W.h)>>>0).toString(H);if(b(W=ne))return re+J;for(;6>re.length;)re="0"+re;J=re+J}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h},n.l=function(H){return T(H=B(this,H))?-1:b(H)?0:1},n.abs=function(){return T(this)?M(this):this},n.add=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0,ne=0;ne<=L;ne++){var re=J+(65535&this.i(ne))+(65535&H.i(ne)),q=(re>>>16)+(this.i(ne)>>>16)+(H.i(ne)>>>16);J=q>>>16,W[ne]=(q&=65535)<<16|(re&=65535)}return new o(W,-2147483648&W[W.length-1]?-1:0)},n.j=function(H){if(b(this)||b(H))return d;if(T(this))return T(H)?M(this).j(M(H)):M(M(this).j(H));if(T(H))return M(this.j(M(H)));if(0>this.l(y)&&0>H.l(y))return c(this.m()*H.m());for(var L=this.g.length+H.g.length,W=[],J=0;J<2*L;J++)W[J]=0;for(J=0;J<this.g.length;J++)for(var ne=0;ne<H.g.length;ne++){var re=this.i(J)>>>16,q=65535&this.i(J),Hr=H.i(ne)>>>16,oa=65535&H.i(ne);W[2*J+2*ne]+=q*oa,V(W,2*J+2*ne),W[2*J+2*ne+1]+=re*oa,V(W,2*J+2*ne+1),W[2*J+2*ne+1]+=q*Hr,V(W,2*J+2*ne+1),W[2*J+2*ne+2]+=re*Hr,V(W,2*J+2*ne+2)}for(J=0;J<L;J++)W[J]=W[2*J+1]<<16|W[2*J];for(J=L;J<2*L;J++)W[J]=0;return new o(W,0)},n.A=function(H){return be(this,H).h},n.and=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)&H.i(J);return new o(W,this.h&H.h)},n.or=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)|H.i(J);return new o(W,this.h|H.h)},n.xor=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)^H.i(J);return new o(W,this.h^H.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JZ=ZZ.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(H,L){if(0==H.length)throw Error("number format error: empty string");if(2>(L=L||10)||36<L)throw Error("radix out of range: "+L);if("-"==H.charAt(0))return M(u(H.substring(1),L));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var W=c(Math.pow(L,8)),J=d,ne=0;ne<H.length;ne+=8){var re=Math.min(8,H.length-ne),q=parseInt(H.substring(ne,ne+re),L);8>re?(re=c(Math.pow(L,re)),J=J.j(re).add(c(q))):J=(J=J.j(W)).add(c(q))}return J},Uf=ZZ.Integer=o}).apply(typeof XZ<"u"?XZ:typeof self<"u"?self:typeof window<"u"?window:{});var eJ,YE,tJ,BS,qV,nJ,rJ,iJ,VS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,v,I){return p==Array.prototype||p==Object.prototype||(p[v]=I.value),p},r=function t(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof VS&&VS];for(var v=0;v<p.length;++v){var I=p[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(p,v){if(v)e:{var I=r;p=p.split(".");for(var P=0;P<p.length-1;P++){var oe=p[P];if(!(oe in I))break e;I=I[oe]}(v=v(P=I[p=p[p.length-1]]))!=P&&null!=v&&e(I,p,{configurable:!0,writable:!0,value:v})}}("Array.prototype.values",function(p){return p||function(){return function s(p,v){p instanceof String&&(p+="");var I=0,P=!1,oe={next:function(){if(!P&&I<p.length){var Ee=I++;return{value:v(Ee,p[Ee]),done:!1}}return P=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}(this,function(v,I){return I})}});var o=o||{},a=this||self;function l(p){var v=typeof p;return"array"==(v="object"!=v?v:p?Array.isArray(p)?"array":v:"null")||"object"==v&&"number"==typeof p.length}function c(p){var v=typeof p;return"object"==v&&null!=p||"function"==v}function u(p,v,I){return p.call.apply(p.bind,arguments)}function d(p,v,I){if(!p)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,P),p.apply(v,oe)}}return function(){return p.apply(v,arguments)}}function m(p,v,I){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:d).apply(null,arguments)}function y(p,v){var I=Array.prototype.slice.call(arguments,1);return function(){var P=I.slice();return P.push.apply(P,arguments),p.apply(this,P)}}function b(p,v){function I(){}I.prototype=v.prototype,p.aa=v.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function(P,oe,Ee){for(var Ge=Array(arguments.length-2),ur=2;ur<arguments.length;ur++)Ge[ur-2]=arguments[ur];return v.prototype[oe].apply(P,Ge)}}function T(p){const v=p.length;if(0<v){const I=Array(v);for(let P=0;P<v;P++)I[P]=p[P];return I}return[]}function M(p,v){for(let I=1;I<arguments.length;I++){const P=arguments[I];if(l(P)){const oe=p.length||0,Ee=P.length||0;p.length=oe+Ee;for(let Ge=0;Ge<Ee;Ge++)p[oe+Ge]=P[Ge]}else p.push(P)}}function V(p){return/^[\s\xa0]*$/.test(p)}function Q(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function be(p){return be[" "](p),p}be[" "]=function(){};var Be=!(-1==Q().indexOf("Gecko")||-1!=Q().toLowerCase().indexOf("webkit")&&-1==Q().indexOf("Edge")||-1!=Q().indexOf("Trident")||-1!=Q().indexOf("MSIE")||-1!=Q().indexOf("Edge"));function je(p,v,I){for(const P in p)v.call(I,p[P],P,p)}function L(p){const v={};for(const I in p)v[I]=p[I];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(p,v){let I,P;for(let oe=1;oe<arguments.length;oe++){for(I in P=arguments[oe],P)p[I]=P[I];for(let Ee=0;Ee<W.length;Ee++)I=W[Ee],Object.prototype.hasOwnProperty.call(P,I)&&(p[I]=P[I])}}function ne(p){var v=1;p=p.split(":");const I=[];for(;0<v&&p.length;)I.push(p.shift()),v--;return p.length&&I.push(p.join(":")),I}function re(p){a.setTimeout(()=>{throw p},0)}function q(){var p=hn;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}var oa=new class B{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}(()=>new st,p=>p.reset());class st{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,bt=!1,hn=new class Hr{constructor(){this.h=this.g=null}add(v,I){const P=oa.get();P.set(v,I),this.h?this.h.next=P:this.g=P,this.h=P}},Ii=()=>{const p=a.Promise.resolve(void 0);ft=()=>{p.then(Oa)}};var Oa=()=>{for(var p;p=q();){try{p.h.call(p.g)}catch(I){re(I)}var v=oa;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}bt=!1};function oi(){this.s=this.s,this.C=this.C}function Mr(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}oi.prototype.s=!1,oi.prototype.ma=function(){this.s||(this.s=!0,this.N())},oi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Mr.prototype.h=function(){this.defaultPrevented=!0};var Pr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};a.addEventListener("test",I,v),a.removeEventListener("test",I,v)}catch{}return p}();function Jd(p,v){if(Mr.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,P=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(Be){e:{try{be(v.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(v=null)}}else"mouseover"==I?v=p.fromElement:"mouseout"==I&&(v=p.toElement);this.relatedTarget=v,P?(this.clientX=void 0!==P.clientX?P.clientX:P.pageX,this.clientY=void 0!==P.clientY?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:hH[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Jd.aa.h.call(this)}}b(Jd,Mr);var hH={2:"touch",3:"pen",4:"mouse"};Jd.prototype.h=function(){Jd.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ai="closure_listenable_"+(1e6*Math.random()|0),uu=0;function Po(p,v,I,P,oe){this.listener=p,this.proxy=null,this.src=v,this.type=I,this.capture=!!P,this.ha=oe,this.key=++uu,this.da=this.fa=!1}function du(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function eh(p){this.src=p,this.g={},this.h=0}function fH(p,v){var I=v.type;if(I in p.g){var Ee,P=p.g[I],oe=Array.prototype.indexOf.call(P,v,void 0);(Ee=0<=oe)&&Array.prototype.splice.call(P,oe,1),Ee&&(du(v),0==p.g[I].length&&(delete p.g[I],p.h--))}}function pH(p,v,I,P){for(var oe=0;oe<p.length;++oe){var Ee=p[oe];if(!Ee.da&&Ee.listener==v&&Ee.capture==!!I&&Ee.ha==P)return oe}return-1}eh.prototype.add=function(p,v,I,P,oe){var Ee=p.toString();(p=this.g[Ee])||(p=this.g[Ee]=[],this.h++);var Ge=pH(p,v,P,oe);return-1<Ge?(v=p[Ge],I||(v.fa=!1)):((v=new Po(v,this.src,Ee,!!P,oe)).fa=I,p.push(v)),v};var mH="closure_lm_"+(1e6*Math.random()|0),gH={};function oae(p,v,I,P,oe){if(P&&P.once)return lae(p,v,I,P,oe);if(Array.isArray(v)){for(var Ee=0;Ee<v.length;Ee++)oae(p,v[Ee],I,P,oe);return null}return I=bH(I),p&&p[ai]?p.K(v,I,c(P)?!!P.capture:!!P,oe):aae(p,v,I,!1,P,oe)}function aae(p,v,I,P,oe,Ee){if(!v)throw Error("Invalid event type");var Ge=c(oe)?!!oe.capture:!!oe,ur=yH(p);if(ur||(p[mH]=ur=new eh(p)),(I=ur.add(v,I,P,Ge,Ee)).proxy)return I;if(P=function OGe(){const v=FGe;return function p(I){return v.call(p.src,p.listener,I)}}(),I.proxy=P,P.src=p,P.listener=I,p.addEventListener)Pr||(oe=Ge),void 0===oe&&(oe=!1),p.addEventListener(v.toString(),P,oe);else if(p.attachEvent)p.attachEvent(uae(v.toString()),P);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(P)}return I}function lae(p,v,I,P,oe){if(Array.isArray(v)){for(var Ee=0;Ee<v.length;Ee++)lae(p,v[Ee],I,P,oe);return null}return I=bH(I),p&&p[ai]?p.L(v,I,c(P)?!!P.capture:!!P,oe):aae(p,v,I,!0,P,oe)}function cae(p,v,I,P,oe){if(Array.isArray(v))for(var Ee=0;Ee<v.length;Ee++)cae(p,v[Ee],I,P,oe);else P=c(P)?!!P.capture:!!P,I=bH(I),p&&p[ai]?(p=p.i,(v=String(v).toString())in p.g&&-1<(I=pH(Ee=p.g[v],I,P,oe))&&(du(Ee[I]),Array.prototype.splice.call(Ee,I,1),0==Ee.length&&(delete p.g[v],p.h--))):p&&(p=yH(p))&&(v=p.g[v.toString()],p=-1,v&&(p=pH(v,I,P,oe)),(I=-1<p?v[p]:null)&&_H(I))}function _H(p){if("number"!=typeof p&&p&&!p.da){var v=p.src;if(v&&v[ai])fH(v.i,p);else{var I=p.type,P=p.proxy;v.removeEventListener?v.removeEventListener(I,P,p.capture):v.detachEvent?v.detachEvent(uae(I),P):v.addListener&&v.removeListener&&v.removeListener(P),(I=yH(v))?(fH(I,p),0==I.h&&(I.src=null,v[mH]=null)):du(p)}}}function uae(p){return p in gH?gH[p]:gH[p]="on"+p}function FGe(p,v){if(p.da)p=!0;else{v=new Jd(v,this);var I=p.listener,P=p.ha||p.src;p.fa&&_H(p),p=I.call(P,v)}return p}function yH(p){return(p=p[mH])instanceof eh?p:null}var vH="__closure_events_fn_"+(1e9*Math.random()>>>0);function bH(p){return"function"==typeof p?p:(p[vH]||(p[vH]=function(v){return p.handleEvent(v)}),p[vH])}function Fs(){oi.call(this),this.i=new eh(this),this.M=this,this.F=null}function ro(p,v){var I,P=p.F;if(P)for(I=[];P;P=P.F)I.push(P);if(p=p.M,P=v.type||v,"string"==typeof v)v=new Mr(v,p);else if(v instanceof Mr)v.target=v.target||p;else{var oe=v;J(v=new Mr(P,p),oe)}if(oe=!0,I)for(var Ee=I.length-1;0<=Ee;Ee--){var Ge=v.g=I[Ee];oe=$x(Ge,P,!0,v)&&oe}if(oe=$x(Ge=v.g=p,P,!0,v)&&oe,oe=$x(Ge,P,!1,v)&&oe,I)for(Ee=0;Ee<I.length;Ee++)oe=$x(Ge=v.g=I[Ee],P,!1,v)&&oe}function $x(p,v,I,P){if(!(v=p.i.g[String(v)]))return!0;v=v.concat();for(var oe=!0,Ee=0;Ee<v.length;++Ee){var Ge=v[Ee];if(Ge&&!Ge.da&&Ge.capture==I){var ur=Ge.listener,ms=Ge.ha||Ge.src;Ge.fa&&fH(p.i,Ge),oe=!1!==ur.call(ms,P)&&oe}}return oe&&!P.defaultPrevented}function dae(p,v,I){if("function"==typeof p)I&&(p=m(p,I));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=m(p.handleEvent,p)}return 2147483647<Number(v)?-1:a.setTimeout(p,v||0)}function hae(p){p.g=dae(()=>{p.g=null,p.i&&(p.i=!1,hae(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}b(Fs,oi),Fs.prototype[ai]=!0,Fs.prototype.removeEventListener=function(p,v,I,P){cae(this,p,v,I,P)},Fs.prototype.N=function(){if(Fs.aa.N.call(this),this.i){var v,p=this.i;for(v in p.g){for(var I=p.g[v],P=0;P<I.length;P++)du(I[P]);delete p.g[v],p.h--}}this.F=null},Fs.prototype.K=function(p,v,I,P){return this.i.add(String(p),v,!1,I,P)},Fs.prototype.L=function(p,v,I,P){return this.i.add(String(p),v,!0,I,P)};class LGe extends oi{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:hae(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cw(p){oi.call(this),this.h=p,this.g={}}b(Cw,oi);var fae=[];function pae(p){je(p.g,function(v,I){this.g.hasOwnProperty(I)&&_H(v)},p),p.g={}}Cw.prototype.N=function(){Cw.aa.N.call(this),pae(this)},Cw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var EH=a.JSON.stringify,VGe=a.JSON.parse,BGe=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function IH(){}function gae(){}IH.prototype.h=null;var Tw={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wH(){Mr.call(this,"d")}function CH(){Mr.call(this,"c")}b(wH,Mr),b(CH,Mr);var Ap={},_ae=null;function Wx(){return _ae=_ae||new Fs}function yae(p){Mr.call(this,Ap.La,p)}function Aw(p){const v=Wx();ro(v,new yae(v))}function vae(p,v){Mr.call(this,Ap.STAT_EVENT,p),this.stat=v}function io(p){const v=Wx();ro(v,new vae(v,p))}function bae(p,v){Mr.call(this,Ap.Ma,p),this.size=v}function Sw(p,v){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},v)}function Dw(){this.g=!0}function oy(p,v,I,P){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+function HGe(p,v){if(!p.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I)for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var P=I[p];if(!(2>P.length)){var oe=P[1];if(Array.isArray(oe)&&!(1>oe.length)){var Ee=oe[0];if("noop"!=Ee&&"stop"!=Ee&&"close"!=Ee)for(var Ge=1;Ge<oe.length;Ge++)oe[Ge]=""}}}return EH(I)}catch{return v}}(p,I)+(P?" "+P:"")})}Ap.La="serverreachability",b(yae,Mr),Ap.STAT_EVENT="statevent",b(vae,Mr),Ap.Ma="timingevent",b(bae,Mr),Dw.prototype.xa=function(){this.g=!1},Dw.prototype.info=function(){};var TH,Gx={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Eae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function qx(){}function th(p,v,I,P){this.j=p,this.i=v,this.l=I,this.R=P||1,this.U=new Cw(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Iae}function Iae(){this.i=null,this.g="",this.h=!1}b(qx,IH),qx.prototype.g=function(){return new XMLHttpRequest},qx.prototype.i=function(){return{}},TH=new qx;var wae={},AH={};function SH(p,v,I){p.L=1,p.v=Xx(hu(v)),p.m=I,p.P=!0,Cae(p,null)}function Cae(p,v){p.F=Date.now(),Kx(p),p.A=hu(p.v);var I=p.A,P=p.R;Array.isArray(P)||(P=[String(P)]),Vae(I.i,"t",P),p.C=0,I=p.j.J,p.h=new Iae,p.g=nle(p.j,I?v:null,!p.m),0<p.O&&(p.M=new LGe(m(p.Y,p,p.g),p.O)),v=p.U,I=p.g,P=p.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(fae[0]=oe.toString()),oe=fae);for(var Ee=0;Ee<oe.length;Ee++){var Ge=oae(I,oe[Ee],P||v.handleEvent,!1,v.h||v);if(!Ge)break;v.g[Ge.key]=Ge}v=p.H?L(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),Aw(),function UGe(p,v,I,P,oe,Ee){p.info(function(){if(p.g)if(Ee)for(var Ge="",ur=Ee.split("&"),ms=0;ms<ur.length;ms++){var kn=ur[ms].split("=");if(1<kn.length){var Ls=kn[0];kn=kn[1];var Vs=Ls.split("_");Ge=2<=Vs.length&&"type"==Vs[1]?Ge+(Ls+"=")+kn+"&":Ge+(Ls+"=redacted&")}}else Ge=null;else Ge=Ee;return"XMLHTTP REQ ("+P+") [attempt "+oe+"]: "+v+"\n"+I+"\n"+Ge})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Tae(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function $Ge(p,v){var I=p.C,P=v.indexOf("\n",I);return-1==P?AH:(I=Number(v.substring(I,P)),isNaN(I)?wae:(P+=1)+I>v.length?AH:(v=v.slice(P,P+I),p.C=P+I,v))}function Kx(p){p.S=Date.now()+p.I,Aae(p,p.I)}function Aae(p,v){if(null!=p.B)throw Error("WatchDog timer not null");p.B=Sw(m(p.ba,p),v)}function DH(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function xw(p){0==p.j.G||p.J||Zae(p.j,p)}function Sp(p){DH(p);var v=p.M;v&&"function"==typeof v.ma&&v.ma(),p.M=null,pae(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function xH(p,v){try{var I=p.j;if(0!=I.G&&(I.g==p||RH(I.h,p)))if(!p.K&&RH(I.h,p)&&3==I.G){try{var P=I.Da.g.parse(v)}catch{P=null}if(Array.isArray(P)&&3==P.length){var oe=P;if(0==oe[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<p.F))break e;nR(I),eR(I)}NH(I),io(18)}}else I.za=oe[1],0<I.za-I.T&&37500>oe[2]&&I.F&&0==I.v&&!I.C&&(I.C=Sw(m(I.Za,I),6e3));if(1>=xae(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else xp(I,11)}else if((p.K||I.g==p)&&nR(I),!V(v))for(oe=I.Da.g.parse(v),v=0;v<oe.length;v++){let kn=oe[v];if(I.T=kn[0],kn=kn[1],2==I.G)if("c"==kn[0]){I.K=kn[1],I.ia=kn[2];const Ls=kn[3];null!=Ls&&(I.la=Ls,I.j.info("VER="+I.la));const Vs=kn[4];null!=Vs&&(I.Aa=Vs,I.j.info("SVER="+I.Aa));const cy=kn[5];null!=cy&&"number"==typeof cy&&0<cy&&(I.L=P=1.5*cy,I.j.info("backChannelRequestTimeoutMs_="+P)),P=I;const _l=p.g;if(_l){const iR=_l.g?_l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iR){var Ee=P.h;Ee.g||-1==iR.indexOf("spdy")&&-1==iR.indexOf("quic")&&-1==iR.indexOf("h2")||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(MH(Ee,Ee.h),Ee.h=null))}if(P.D){const FH=_l.g?_l.g.getResponseHeader("X-HTTP-Session-Id"):null;FH&&(P.ya=FH,kr(P.I,P.D,FH))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Ge=p;if((P=I).qa=tle(P,P.J?P.ia:null,P.W),Ge.K){Rae(P.h,Ge);var ur=Ge,ms=P.L;ms&&(ur.I=ms),ur.B&&(DH(ur),Kx(ur)),P.g=Ge}else Yae(P);0<I.i.length&&tR(I)}else"stop"!=kn[0]&&"close"!=kn[0]||xp(I,7);else 3==I.G&&("stop"==kn[0]||"close"==kn[0]?"stop"==kn[0]?xp(I,7):kH(I):"noop"!=kn[0]&&I.l&&I.l.ta(kn),I.v=0)}Aw()}catch{}}th.prototype.ca=function(p){p=p.target;const v=this.M;v&&3==fu(p)?v.j():this.Y(p)},th.prototype.Y=function(p){try{if(p==this.g)e:{const Vs=fu(this.g);var v=this.g.Ba();if(this.g.Z(),!(3>Vs)&&(3!=Vs||this.g&&(this.h.h||this.g.oa()||Wae(this.g)))){this.J||4!=Vs||7==v||Aw(),DH(this);var I=this.g.Z();this.X=I;t:if(Tae(this)){var P=Wae(this.g);p="";var oe=P.length,Ee=4==fu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Sp(this),xw(this);var Ge="";break t}this.h.i=new a.TextDecoder}for(v=0;v<oe;v++)this.h.h=!0,p+=this.h.i.decode(P[v],{stream:!(Ee&&v==oe-1)});P.length=0,this.h.g+=p,this.C=0,Ge=this.h.g}else Ge=this.g.oa();if(this.o=200==I,function jGe(p,v,I,P,oe,Ee,Ge){p.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+oe+"]: "+v+"\n"+I+"\n"+Ee+" "+Ge})}(this.i,this.u,this.A,this.l,this.R,Vs,I),this.o){if(this.T&&!this.K){t:{if(this.g){var ur,ms=this.g;if((ur=ms.g?ms.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(ur)){var kn=ur;break t}}kn=null}if(!(I=kn)){this.o=!1,this.s=3,io(12),Sp(this),xw(this);break e}oy(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xH(this,I)}if(this.P){let _l;for(I=!0;!this.J&&this.C<Ge.length;){if(_l=$Ge(this,Ge),_l==AH){4==Vs&&(this.s=4,io(14),I=!1),oy(this.i,this.l,null,"[Incomplete Response]");break}if(_l==wae){this.s=4,io(15),oy(this.i,this.l,Ge,"[Invalid Chunk]"),I=!1;break}oy(this.i,this.l,_l,null),xH(this,_l)}if(Tae(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Vs||0!=Ge.length||this.h.h||(this.s=1,io(16),I=!1),this.o=this.o&&I,I){if(0<Ge.length&&!this.W){this.W=!0;var Ls=this.j;Ls.g==this&&Ls.ba&&!Ls.M&&(Ls.j.info("Great, no buffering proxy detected. Bytes received: "+Ge.length),OH(Ls),Ls.M=!0,io(11))}}else oy(this.i,this.l,Ge,"[Invalid Chunked Response]"),Sp(this),xw(this)}else oy(this.i,this.l,Ge,null),xH(this,Ge);4==Vs&&Sp(this),this.o&&!this.J&&(4==Vs?Zae(this.j,this):(this.o=!1,Kx(this)))}else(function a5e(p){const v={};p=(p.g&&2<=fu(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let P=0;P<p.length;P++){if(V(p[P]))continue;var I=ne(p[P]);const oe=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const Ee=v[oe]||[];v[oe]=Ee,Ee.push(I)}!function H(p,v){for(const I in p)v.call(void 0,p[I],I,p)}(v,function(P){return P.join(", ")})})(this.g),400==I&&0<Ge.indexOf("Unknown SID")?(this.s=3,io(12)):(this.s=0,io(13)),Sp(this),xw(this)}}}catch{}},th.prototype.cancel=function(){this.J=!0,Sp(this)},th.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function zGe(p,v){p.info(function(){return"TIMEOUT: "+v})}(this.i,this.A),2!=this.L&&(Aw(),io(17)),Sp(this),this.s=2,xw(this)):Aae(this,this.S-p)};var WGe=class{constructor(p,v){this.g=p,this.map=v}};function Sae(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dae(p){return!!p.h||!!p.g&&p.g.size>=p.j}function xae(p){return p.h?1:p.g?p.g.size:0}function RH(p,v){return p.h?p.h==v:!!p.g&&p.g.has(v)}function MH(p,v){p.g?p.g.add(v):p.h=v}function Rae(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}function Mae(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let v=p.i;for(const I of p.g.values())v=v.concat(I.D);return v}return T(p.i)}function Pae(p,v){if(p.forEach&&"function"==typeof p.forEach)p.forEach(v,void 0);else if(l(p)||"string"==typeof p)Array.prototype.forEach.call(p,v,void 0);else for(var I=function qGe(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||"string"==typeof p){var v=[];p=p.length;for(var I=0;I<p;I++)v.push(I);return v}v=[],I=0;for(const P in p)v[I++]=P;return v}}}(p),P=function GGe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(l(p)){for(var v=[],I=p.length,P=0;P<I;P++)v.push(p[P]);return v}for(P in v=[],I=0,p)v[I++]=p[P];return v}(p),oe=P.length,Ee=0;Ee<oe;Ee++)v.call(void 0,P[Ee],I&&I[Ee],p)}Sae.prototype.cancel=function(){if(this.i=Mae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var kae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dp(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Dp){this.h=p.h,Qx(this,p.j),this.o=p.o,this.g=p.g,Yx(this,p.s),this.l=p.l;var v=p.i,I=new Pw;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),Nae(this,I),this.m=p.m}else p&&(v=String(p).match(kae))?(this.h=!1,Qx(this,v[1]||"",!0),this.o=Rw(v[2]||""),this.g=Rw(v[3]||"",!0),Yx(this,v[4]),this.l=Rw(v[5]||"",!0),Nae(this,v[6]||"",!0),this.m=Rw(v[7]||"")):(this.h=!1,this.i=new Pw(null,this.h))}function hu(p){return new Dp(p)}function Qx(p,v,I){p.j=I?Rw(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function Yx(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function Nae(p,v,I){v instanceof Pw?(p.i=v,function e5e(p,v){v&&!p.j&&(nh(p),p.i=null,p.g.forEach(function(I,P){var oe=P.toLowerCase();P!=oe&&(Fae(this,P),Vae(this,oe,I))},p)),p.j=v}(p.i,p.h)):(I||(v=Mw(v,ZGe)),p.i=new Pw(v,p.h))}function kr(p,v,I){p.i.set(v,I)}function Xx(p){return kr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Rw(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Mw(p,v,I){return"string"==typeof p?(p=encodeURI(p).replace(v,QGe),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function QGe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Dp.prototype.toString=function(){var p=[],v=this.j;v&&p.push(Mw(v,Oae,!0),":");var I=this.g;return(I||"file"==v)&&(p.push("//"),(v=this.o)&&p.push(Mw(v,Oae,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&p.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&p.push("/"),p.push(Mw(I,"/"==I.charAt(0)?XGe:YGe,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",Mw(I,JGe)),p.join("")};var Oae=/[#\/\?@]/g,YGe=/[#\?:]/g,XGe=/[#\?]/g,ZGe=/[#\?@]/g,JGe=/#/g;function Pw(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function nh(p){p.g||(p.g=new Map,p.h=0,p.i&&function KGe(p,v){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var P=p[I].indexOf("="),oe=null;if(0<=P){var Ee=p[I].substring(0,P);oe=p[I].substring(P+1)}else Ee=p[I];v(Ee,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}(p.i,function(v,I){p.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}function Fae(p,v){nh(p),v=ay(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function Lae(p,v){return nh(p),v=ay(p,v),p.g.has(v)}function Vae(p,v,I){Fae(p,v),0<I.length&&(p.i=null,p.g.set(ay(p,v),T(I)),p.h+=I.length)}function ay(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function rh(p,v,I,P,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),P(I)}catch{}}function r5e(){this.g=new BGe}function i5e(p,v,I){const P=I||"";try{Pae(p,function(oe,Ee){let Ge=oe;c(oe)&&(Ge=EH(oe)),v.push(P+Ee+"="+encodeURIComponent(Ge))})}catch(oe){throw v.push(P+"type="+encodeURIComponent("_badmap")),oe}}function kw(p){this.l=p.Ub||null,this.j=p.eb||!1}function Zx(p,v){Fs.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bae(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Nw(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Ow(p)}function Ow(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function Uae(p){let v="";return je(p,function(I,P){v+=P,v+=":",v+=I,v+="\r\n"}),v}function PH(p,v,I){e:{for(P in I){var P=!1;break e}P=!0}P||(I=Uae(I),"string"==typeof p?null!=I&&encodeURIComponent(String(I)):kr(p,v,I))}function li(p){Fs.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Pw.prototype).add=function(p,v){nh(this),this.i=null,p=ay(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(v),this.h+=1,this},n.forEach=function(p,v){nh(this),this.g.forEach(function(I,P){I.forEach(function(oe){p.call(v,oe,P,this)},this)},this)},n.na=function(){nh(this);const p=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let P=0;P<v.length;P++){const oe=p[P];for(let Ee=0;Ee<oe.length;Ee++)I.push(v[P])}return I},n.V=function(p){nh(this);let v=[];if("string"==typeof p)Lae(this,p)&&(v=v.concat(this.g.get(ay(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)v=v.concat(p[I])}return v},n.set=function(p,v){return nh(this),this.i=null,Lae(this,p=ay(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},n.get=function(p,v){return p&&0<(p=this.V(p)).length?String(p[0]):v},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var P=v[I];const Ee=encodeURIComponent(String(P)),Ge=this.V(P);for(P=0;P<Ge.length;P++){var oe=Ee;""!==Ge[P]&&(oe+="="+encodeURIComponent(String(Ge[P]))),p.push(oe)}}return this.i=p.join("&")},b(kw,IH),kw.prototype.g=function(){return new Zx(this.l,this.j)},kw.prototype.i=function(p){return function(){return p}}({}),b(Zx,Fs),(n=Zx.prototype).open=function(p,v){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,Ow(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nw(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Ow(this)),this.g&&(this.readyState=3,Ow(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bae(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?Nw(this):Ow(this),3==this.readyState&&Bae(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Nw(this))},n.Qa=function(p){this.g&&(this.response=p,Nw(this))},n.ga=function(){this.g&&Nw(this)},n.setRequestHeader=function(p,v){this.u.append(p,v)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var I=v.next();!I.done;)p.push((I=I.value)[0]+": "+I[1]),I=v.next();return p.join("\r\n")},Object.defineProperty(Zx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),b(li,Fs);var s5e=/^https?$/i,o5e=["POST","PUT"];function jae(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,zae(p),Jx(p)}function zae(p){p.A||(p.A=!0,ro(p,"complete"),ro(p,"error"))}function Hae(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=fu(p)||2!=p.Z()))if(p.u&&4==fu(p))dae(p.Ea,0,p);else if(ro(p,"readystatechange"),4==fu(p)){p.h=!1;try{const Ge=p.Z();e:switch(Ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var I;if(!(I=v)){var P;if(P=0===Ge){var oe=String(p.D).match(kae)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),P=!s5e.test(oe?oe.toLowerCase():"")}I=P}if(I)ro(p,"complete"),ro(p,"success");else{p.m=6;try{var Ee=2<fu(p)?p.g.statusText:""}catch{Ee=""}p.l=Ee+" ["+p.Z()+"]",zae(p)}}finally{Jx(p)}}}function Jx(p,v){if(p.g){$ae(p);const I=p.g,P=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||ro(p,"ready");try{I.onreadystatechange=P}catch{}}}function $ae(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function fu(p){return p.g?p.g.readyState:0}function Wae(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Fw(p,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||v}function Gae(p){this.Aa=0,this.i=[],this.j=new Dw,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fw("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fw("baseRetryDelayMs",5e3,p),this.cb=Fw("retryDelaySeedMs",1e4,p),this.Wa=Fw("forwardChannelMaxRetries",2,p),this.wa=Fw("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Sae(p&&p.concurrentRequestLimit),this.Da=new r5e,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function kH(p){if(qae(p),3==p.G){var v=p.U++,I=hu(p.I);if(kr(I,"SID",p.K),kr(I,"RID",v),kr(I,"TYPE","terminate"),Lw(p,I),(v=new th(p,p.j,v)).L=2,v.v=Xx(hu(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=v.v,I=!0),I||(v.g=nle(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Kx(v)}ele(p)}function eR(p){p.g&&(OH(p),p.g.cancel(),p.g=null)}function qae(p){eR(p),p.u&&(a.clearTimeout(p.u),p.u=null),nR(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function tR(p){if(!Dae(p.h)&&!p.s){p.s=!0;var v=p.Ga;ft||Ii(),bt||(ft(),bt=!0),hn.add(v,p),p.B=0}}function Kae(p,v){var I;I=v?v.l:p.U++;const P=hu(p.I);kr(P,"SID",p.K),kr(P,"RID",I),kr(P,"AID",p.T),Lw(p,P),p.m&&p.o&&PH(P,p.m,p.o),I=new th(p,p.j,I,p.B+1),null===p.m&&(I.H=p.o),v&&(p.i=v.D.concat(p.i)),v=Qae(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),MH(p.h,I),SH(I,P,v)}function Lw(p,v){p.H&&je(p.H,function(I,P){kr(v,P,I)}),p.l&&Pae({},function(I,P){kr(v,P,I)})}function Qae(p,v,I){I=Math.min(p.i.length,I);var P=p.l?m(p.l.Na,p.l,p):null;e:{var oe=p.i;let Ee=-1;for(;;){const Ge=["count="+I];-1==Ee?0<I?(Ee=oe[0].g,Ge.push("ofs="+Ee)):Ee=0:Ge.push("ofs="+Ee);let ur=!0;for(let ms=0;ms<I;ms++){let kn=oe[ms].g;const Ls=oe[ms].map;if(kn-=Ee,0>kn)Ee=Math.max(0,oe[ms].g-100),ur=!1;else try{i5e(Ls,Ge,"req"+kn+"_")}catch{P&&P(Ls)}}if(ur){P=Ge.join("&");break e}}}return p=p.i.splice(0,I),v.D=p,P}function Yae(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;ft||Ii(),bt||(ft(),bt=!0),hn.add(v,p),p.v=0}}function NH(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=Sw(m(p.Fa,p),Jae(p,p.v)),p.v++,0))}function OH(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function Xae(p){p.g=new th(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var v=hu(p.qa);kr(v,"RID","rpc"),kr(v,"SID",p.K),kr(v,"AID",p.T),kr(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&kr(v,"TO",p.ja),kr(v,"TYPE","xmlhttp"),Lw(p,v),p.m&&p.o&&PH(v,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=Xx(hu(v)),I.m=null,I.P=!0,Cae(I,p)}function nR(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function Zae(p,v){var I=null;if(p.g==v){nR(p),OH(p),p.g=null;var P=2}else{if(!RH(p.h,v))return;I=v.D,Rae(p.h,v),P=1}if(0!=p.G)if(v.o)if(1==P){I=v.m?v.m.length:0,v=Date.now()-v.F;var oe=p.B;ro(P=Wx(),new bae(P,I)),tR(p)}else Yae(p);else if(3==(oe=v.s)||0==oe&&0<v.X||!(1==P&&function l5e(p,v){return!(xae(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=v.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=Sw(m(p.Ga,p,v),Jae(p,p.B)),p.B++,0)))}(p,v)||2==P&&NH(p)))switch(I&&0<I.length&&(v=p.h,v.i=v.i.concat(I)),oe){case 1:xp(p,5);break;case 4:xp(p,10);break;case 3:xp(p,6);break;default:xp(p,2)}}function Jae(p,v){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*v}function xp(p,v){if(p.j.info("Error code "+v),2==v){var I=m(p.fb,p),P=p.Xa;const oe=!P;P=new Dp(P||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Qx(P,"https"),Xx(P),oe?function t5e(p,v){const I=new Dw;if(a.Image){const P=new Image;P.onload=y(rh,I,"TestLoadImage: loaded",!0,v,P),P.onerror=y(rh,I,"TestLoadImage: error",!1,v,P),P.onabort=y(rh,I,"TestLoadImage: abort",!1,v,P),P.ontimeout=y(rh,I,"TestLoadImage: timeout",!1,v,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=p}else v(!1)}(P.toString(),I):function n5e(p,v){new Dw;const P=new AbortController,oe=setTimeout(()=>{P.abort(),rh(0,0,!1,v)},1e4);fetch(p,{signal:P.signal}).then(Ee=>{clearTimeout(oe),rh(0,0,!!Ee.ok,v)}).catch(()=>{clearTimeout(oe),rh(0,0,!1,v)})}(P.toString(),I)}else io(2);p.G=0,p.l&&p.l.sa(v),ele(p),qae(p)}function ele(p){if(p.G=0,p.ka=[],p.l){const v=Mae(p.h);(0!=v.length||0!=p.i.length)&&(M(p.ka,v),M(p.ka,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.ra()}}function tle(p,v,I){var P=I instanceof Dp?hu(I):new Dp(I);if(""!=P.g)v&&(P.g=v+"."+P.g),Yx(P,P.s);else{var oe=a.location;P=oe.protocol,v=v?v+"."+oe.hostname:oe.hostname,oe=+oe.port;var Ee=new Dp(null);P&&Qx(Ee,P),v&&(Ee.g=v),oe&&Yx(Ee,oe),I&&(Ee.l=I),P=Ee}return v=p.ya,(I=p.D)&&v&&kr(P,I,v),kr(P,"VER",p.la),Lw(p,P),P}function nle(p,v,I){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(v=new li(p.Ca&&!p.pa?new kw({eb:I}):p.pa)).Ha(p.J),v}function rle(){}function rR(){}function aa(p,v){Fs.call(this),this.g=new Gae(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!V(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,null!==(p=this.h)&&v in p&&v in(p=this.h)&&delete p[v]),this.j=new ly(this)}function ile(p){wH.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const I in v){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,v=null!==v&&p in v?v[p]:void 0),this.data=v}else this.data=p}function sle(){CH.call(this),this.status=1}function ly(p){this.g=p}(n=li.prototype).Ha=function(p){this.J=p},n.ea=function(p,v,I,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():TH.g(),this.v=function mae(p){return p.h||(p.h=p.i())}(this.o?this.o:TH),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(Ee){return void jae(this,Ee)}if(p=I||"",I=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var oe in P)I.set(oe,P[oe]);else{if("function"!=typeof P.keys||"function"!=typeof P.get)throw Error("Unknown input type for opt_headers: "+String(P));for(const Ee of P.keys())I.set(Ee,P.get(Ee))}P=Array.from(I.keys()).find(Ee=>"content-type"==Ee.toLowerCase()),oe=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(o5e,v,void 0))||P||oe||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Ge]of I)this.g.setRequestHeader(Ee,Ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$ae(this),this.u=!0,this.g.send(p),this.u=!1}catch(Ee){jae(this,Ee)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,ro(this,"complete"),ro(this,"abort"),Jx(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jx(this,!0)),li.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Hae(this):this.bb())},n.bb=function(){Hae(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<fu(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&0==v.indexOf(p)&&(v=v.substring(p.length)),VGe(v)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Gae.prototype).la=8,n.G=1,n.connect=function(p,v,I,P){io(0),this.W=p,this.H=v||{},I&&void 0!==P&&(this.H.OSID=I,this.H.OAID=P),this.F=this.X,this.I=tle(this,null,this.W),tR(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const oe=new th(this,this.j,p);let Ee=this.o;if(this.S&&(Ee?(Ee=L(Ee),J(Ee,this.S)):Ee=this.S),null!==this.m||this.O||(oe.H=Ee,Ee=null),this.P)e:{for(var v=0,I=0;I<this.i.length;I++){var P=this.i[I];if(void 0===(P="__data__"in P.map&&"string"==typeof(P=P.map.__data__)?P.length:void 0))break;if(4096<(v+=P)){v=I;break e}if(4096===v||I===this.i.length-1){v=I+1;break e}}v=1e3}else v=1e3;v=Qae(this,oe,v),kr(I=hu(this.I),"RID",p),kr(I,"CVER",22),this.D&&kr(I,"X-HTTP-Session-Id",this.D),Lw(this,I),Ee&&(this.O?v="headers="+encodeURIComponent(String(Uae(Ee)))+"&"+v:this.m&&PH(I,this.m,Ee)),MH(this.h,oe),this.Ua&&kr(I,"TYPE","init"),this.P?(kr(I,"$req",v),kr(I,"SID","null"),oe.T=!0,SH(oe,I,null)):SH(oe,I,v),this.G=2}}else 3==this.G&&(p?Kae(this,p):0==this.i.length||Dae(this.h)||Kae(this))},n.Fa=function(){if(this.u=null,Xae(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Sw(m(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,io(10),eR(this),Xae(this))},n.Za=function(){null!=this.C&&(this.C=null,eR(this),NH(this),io(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),io(2)):(this.j.info("Failed to ping google.com"),io(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=rle.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},rR.prototype.g=function(p,v){return new aa(p,v)},b(aa,Fs),aa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},aa.prototype.close=function(){kH(this.g)},aa.prototype.o=function(p){var v=this.g;if("string"==typeof p){var I={};I.__data__=p,p=I}else this.u&&((I={}).__data__=EH(p),p=I);v.i.push(new WGe(v.Ya++,p)),3==v.G&&tR(v)},aa.prototype.N=function(){this.g.l=null,delete this.j,kH(this.g),delete this.g,aa.aa.N.call(this)},b(ile,wH),b(sle,CH),b(ly,rle),ly.prototype.ua=function(){ro(this.g,"a")},ly.prototype.ta=function(p){ro(this.g,new ile(p))},ly.prototype.sa=function(p){ro(this.g,new sle)},ly.prototype.ra=function(){ro(this.g,"b")},rR.prototype.createWebChannel=rR.prototype.g,aa.prototype.send=aa.prototype.o,aa.prototype.open=aa.prototype.m,aa.prototype.close=aa.prototype.close,iJ=Qc.createWebChannelTransport=function(){return new rR},rJ=Qc.getStatEventTarget=function(){return Wx()},nJ=Qc.Event=Ap,qV=Qc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gx.NO_ERROR=0,Gx.TIMEOUT=8,Gx.HTTP_ERROR=6,BS=Qc.ErrorCode=Gx,Eae.COMPLETE="complete",tJ=Qc.EventType=Eae,gae.EventType=Tw,Tw.OPEN="a",Tw.CLOSE="b",Tw.ERROR="c",Tw.MESSAGE="d",Fs.prototype.listen=Fs.prototype.K,YE=Qc.WebChannel=gae,Qc.FetchXmlHttpFactory=kw,li.prototype.listenOnce=li.prototype.L,li.prototype.getLastError=li.prototype.Ka,li.prototype.getLastErrorCode=li.prototype.Ba,li.prototype.getStatus=li.prototype.Z,li.prototype.getResponseJson=li.prototype.Oa,li.prototype.getResponseText=li.prototype.oa,li.prototype.send=li.prototype.ea,li.prototype.setWithCredentials=li.prototype.Ha,eJ=Qc.XhrIo=li}).apply(typeof VS<"u"?VS:typeof self<"u"?self:typeof window<"u"?window:{});const sJ="@firebase/firestore";class es{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let a_="10.14.0";const Ed=new To.Vy("@firebase/firestore");function l_(){return Ed.logLevel}function Oe(n,...e){if(Ed.logLevel<=To.$b.DEBUG){const t=e.map(KV);Ed.debug(`Firestore (${a_}): ${n}`,...t)}}function bi(n,...e){if(Ed.logLevel<=To.$b.ERROR){const t=e.map(KV);Ed.error(`Firestore (${a_}): ${n}`,...t)}}function Zo(n,...e){if(Ed.logLevel<=To.$b.WARN){const t=e.map(KV);Ed.warn(`Firestore (${a_}): ${n}`,...t)}}function KV(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${a_}) INTERNAL ASSERTION FAILED: `+n;throw bi(e),new Error(e)}function lt(n,e){n||it()}function $e(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends N.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class oJ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c1e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(es.UNAUTHENTICATED))}shutdown(){}}class u1e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class d1e{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;lt(void 0===this.o);let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ts,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,O.A)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ts)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt("string"==typeof r.accessToken),new oJ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(null===e||"string"==typeof e),new es(e)}}class h1e{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=es.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class f1e{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new h1e(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p1e{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){lt(void 0===this.o);const r=s=>{null!=s.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt("string"==typeof t.token),this.R=t.token,new aJ(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function m1e(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class lJ{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=m1e(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function c_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function cJ(n){return n+"\0"}class Vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vr.fromMillis(Date.now())}static fromDate(e){return Vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Vr(0,0))}static max(){return new ht(new Vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class XE{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===XE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof XE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends XE{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const g1e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends XE{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return g1e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Pe(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Pe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Pe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Pe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(mn.fromString(e))}static fromName(e){return new Ke(mn.fromString(e).popFirst(5))}static empty(){return new Ke(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new mn(e.slice()))}}class u_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function QV(n){return n.fields.find(e=>2===e.kind)}function jf(n){return n.fields.filter(e=>2!==e.kind)}u_.UNKNOWN_ID=-1;class zf{constructor(e,t){this.fieldPath=e,this.kind=t}}class d_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new d_(0,Jo.min())}}function uJ(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(1e9===r?new Vr(t+1,0):new Vr(t,r));return new Jo(i,Ke.empty(),e)}function dJ(n){return new Jo(n.readTime,n.key,-1)}class Jo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Jo(ht.min(),Ke.empty(),-1)}static max(){return new Jo(ht.max(),Ke.empty(),-1)}}function YV(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const hJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Id(n){return XV.apply(this,arguments)}function XV(){return(XV=(0,O.A)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==hJ)throw n;Oe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new le((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class US{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ts,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ZE(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=ZV(r.target.error);this.V.reject(new ZE(e,i))}}static open(e,t,r,i){try{return new US(t,e.transaction(i,r))}catch(s){throw new ZE(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new b1e(t)}}class ql{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ql.S((0,N.ZQ)())&&bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Hf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,N.zW)())return!1;if(ql.v())return!0;const e=(0,N.ZQ)(),t=ql.S(e),r=0<t&&t<10,i=pJ(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,O.A)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new ZE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Pe(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Pe(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new ZE(e,a))},s.onupgradeneeded=o=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,O.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=US.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),le.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(Oe("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function pJ(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class v1e{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Hf(this.B.delete())}}class ZE extends Pe{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wd(n){return"IndexedDbTransactionError"===n.name}class b1e{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hf(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Hf(this.store.add(e))}get(e){return Hf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Hf(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Hf(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new le((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=s=>{const o=ZV(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new v1e(a),c=t(a.primaryKey,a.value,l);if(c instanceof le){const u=c.catch(d=>(l.done(),le.reject(d)));r.push(u)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hf(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ZV(r.target.error);t(i)}})}let mJ=!1;function ZV(n){const e=ql.S((0,N.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mJ||(mJ=!0,setTimeout(()=>{throw r},0)),r}}return n}class E1e{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Oe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,O.A)(function*(){t.task=null;try{Oe("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){wd(r)?Oe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Id(r)}yield t.X(6e4)}))}}class I1e{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,O.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return le.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Oe("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Oe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=dJ(s);YV(o,r)>0&&(r=o)}),new Jo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ea=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function JE(n){return null==n}function eI(n){return 0===n&&1/n==-1/0}function gJ(n){return"number"==typeof n&&Number.isInteger(n)&&!eI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ms(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_J(e)),e=w1e(n.get(t),e);return _J(e)}function w1e(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function _J(n){return n+"\x01\x01"}function Kl(n){const e=n.length;if(lt(e>=2),2===e)return lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&it(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:it()}s=o+2}return new mn(r)}const yJ=["userId","batchId"];function jS(n,e){return[n,Ms(e)]}function vJ(n,e,t){return[n,Ms(e),t]}const C1e={},T1e=["prefixPath","collectionGroup","readTime","documentId"],A1e=["prefixPath","collectionGroup","documentId"],S1e=["collectionGroup","readTime","prefixPath","documentId"],D1e=["canonicalId","targetId"],x1e=["targetId","path"],R1e=["path","targetId"],M1e=["collectionId","parent"],P1e=["indexId","uid"],k1e=["uid","sequenceNumber"],N1e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],O1e=["indexId","uid","orderedDocumentKey"],F1e=["userId","collectionPath","documentId"],L1e=["userId","collectionPath","largestBatchId"],V1e=["userId","collectionGroup","largestBatchId"],bJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],B1e=[...bJ,"documentOverlays"],EJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IJ=EJ,JV=[...IJ,"indexConfiguration","indexState","indexEntries"],U1e=JV,j1e=[...JV,"globals"];class e2 extends fJ{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function zi(n,e){const t=$e(n);return ql.F(t._e,e)}function wJ(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TJ(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vr{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zS(this.root,e,this.comparator,!1)}getReverseIterator(){return new zS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zS(this.root,e,this.comparator,!0)}}class zS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ds.RED,this.left=i??ds.EMPTY,this.right=s??ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ds(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ds.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ds(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tr{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AJ(this.data.getIterator())}getIteratorFrom(e){return new AJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tr(this.comparator);return t.data=e,t}}class AJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function h_(n){return n.hasNext()?n.getNext():void 0}class Do{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new Do([])}unionWith(e){let t=new tr(Dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Do(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return c_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class SJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SJ("Invalid base64 string: "+s):s}}(e);return new si(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}si.EMPTY_BYTE_STRING=new si("");const H1e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yc(n){if(lt(!!n),"string"==typeof n){let e=0;const t=H1e.exec(n);if(lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Br(n.seconds),nanos:Br(n.nanos)}}function Br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xc(n){return"string"==typeof n?si.fromBase64String(n):si.fromUint8Array(n)}function HS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $S(n){const e=n.mapValue.fields.__previous_value__;return HS(e)?$S(e):e}function tI(n){const e=Yc(n.mapValue.fields.__local_write_time__.timestampValue);return new Vr(e.seconds,e.nanos)}class $1e{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Td{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Td("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Td&&e.projectId===this.projectId&&e.database===this.database}}const Ad={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},WS={nullValue:"NULL_VALUE"};function Sd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?HS(n)?4:PJ(n)?9007199254740991:KS(n)?10:11:it()}function Ql(n,e){if(n===e)return!0;const t=Sd(n);if(t!==Sd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tI(n).isEqual(tI(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yc(i.timestampValue),a=Yc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Xc(n.bytesValue).isEqual(Xc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Br(i.geoPointValue.latitude)===Br(s.geoPointValue.latitude)&&Br(i.geoPointValue.longitude)===Br(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Br(i.integerValue)===Br(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Br(i.doubleValue),a=Br(s.doubleValue);return o===a?eI(o)===eI(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return c_(n.arrayValue.values||[],e.arrayValue.values||[],Ql);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(wJ(o)!==wJ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Ql(o[l],a[l])))return!1;return!0}(n,e);default:return it()}var s}function nI(n,e){return void 0!==(n.values||[]).find(t=>Ql(t,e))}function Dd(n,e){if(n===e)return 0;const t=Sd(n),r=Sd(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Br(s.integerValue||s.doubleValue),l=Br(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return DJ(n.timestampValue,e.timestampValue);case 4:return DJ(tI(n),tI(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Xc(s),l=Xc(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Nt(a[c],l[c]);if(0!==u)return u}return Nt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Nt(Br(s.latitude),Br(o.latitude));return 0!==a?a:Nt(Br(s.longitude),Br(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return xJ(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const y=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(l=(o.fields||{}).value)||void 0===l?void 0:l.arrayValue,T=Nt((null===(c=y?.values)||void 0===c?void 0:c.length)||0,(null===(u=b?.values)||void 0===u?void 0:u.length)||0);return 0!==T?T:xJ(y,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ad.mapValue&&o===Ad.mapValue)return 0;if(s===Ad.mapValue)return 1;if(o===Ad.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const m=Nt(l[d],u[d]);if(0!==m)return m;const y=Dd(a[l[d]],c[u[d]]);if(0!==y)return y}return Nt(l.length,u.length)}(n.mapValue,e.mapValue);default:throw it()}}function DJ(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Yc(n),r=Yc(e),i=Nt(t.seconds,r.seconds);return 0!==i?i:Nt(t.nanos,r.nanos)}function xJ(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Dd(t[i],r[i]);if(s)return s}return Nt(t.length,r.length)}function f_(n){return t2(n)}function t2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xc(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=t2(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${t2(t.fields[o])}`;return i+"}"}(n.mapValue):it()}function $f(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function n2(n){return!!n&&"integerValue"in n}function rI(n){return!!n&&"arrayValue"in n}function RJ(n){return!!n&&"nullValue"in n}function MJ(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qS(n){return!!n&&"mapValue"in n}function KS(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function iI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=iI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=iI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PJ(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const kJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function W1e(n){return"nullValue"in n?WS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$f(Td.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?KS(n)?kJ:{mapValue:{}}:it()}function G1e(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$f(Td.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?kJ:"mapValue"in n?KS(n)?{mapValue:{}}:Ad:it()}function NJ(n,e){const t=Dd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function OJ(n,e){const t=Dd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iI(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=iI(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());qS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ql(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new hs(iI(this.value))}}function FJ(n){const e=[];return Cd(n.fields,(t,r)=>{const i=new Dr([t]);if(qS(r)){const s=FJ(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Do(e)}class xr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xr(e,0,ht.min(),ht.min(),ht.min(),hs.empty(),0)}static newFoundDocument(e,t,r,i){return new xr(e,1,t,ht.min(),r,i,0)}static newNoDocument(e,t){return new xr(e,2,t,ht.min(),ht.min(),hs.empty(),0)}static newUnknownDocument(e,t){return new xr(e,3,t,ht.min(),ht.min(),hs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xd{constructor(e,t){this.position=e,this.inclusive=t}}function LJ(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Ke.comparator(Ke.fromName(o.referenceValue),t.key):Dd(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function VJ(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ql(n.position[t],e.position[t]))return!1;return!0}class sI{constructor(e,t="asc"){this.field=e,this.dir=t}}function q1e(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class BJ{}class gn extends BJ{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new K1e(e,t,r):"array-contains"===t?new X1e(e,r):"in"===t?new WJ(e,r):"not-in"===t?new Z1e(e,r):"array-contains-any"===t?new J1e(e,r):new gn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Q1e(e,r):new Y1e(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dd(t,this.value)):null!==t&&Sd(this.value)===Sd(t)&&this.matchesComparison(Dd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends BJ{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Kn(e,t)}matches(e){return p_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function p_(n){return"and"===n.op}function r2(n){return"or"===n.op}function s2(n){return UJ(n)&&p_(n)}function UJ(n){for(const e of n.filters)if(e instanceof Kn)return!1;return!0}function o2(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+f_(n.value);if(s2(n))return n.filters.map(e=>o2(e)).join(",");{const e=n.filters.map(t=>o2(t)).join(",");return`${n.op}(${e})`}}function jJ(n,e){return n instanceof gn?(r=n,(i=e)instanceof gn&&r.op===i.op&&r.field.isEqual(i.field)&&Ql(r.value,i.value)):n instanceof Kn?function(r,i){return i instanceof Kn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&jJ(o,i.filters[a]),!0)}(n,e):void it();var r,i}function zJ(n,e){const t=n.filters.concat(e);return Kn.create(t,n.op)}function HJ(n){return n instanceof gn?`${(t=n).field.canonicalString()} ${t.op} ${f_(t.value)}`:n instanceof Kn?function(t){return t.op.toString()+" {"+t.getFilters().map(HJ).join(" ,")+"}"}(n):"Filter";var t}class K1e extends gn{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class Q1e extends gn{constructor(e,t){super(e,"in",t),this.keys=$J(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Y1e extends gn{constructor(e,t){super(e,"not-in",t),this.keys=$J(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $J(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class X1e extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rI(t)&&nI(t.arrayValue,this.value)}}class WJ extends gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&nI(this.value.arrayValue,t)}}class Z1e extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(nI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!nI(this.value.arrayValue,t)}}class J1e extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>nI(this.value.arrayValue,r))}}class eOe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function a2(n,e=null,t=[],r=[],i=null,s=null,o=null){return new eOe(n,e,t,r,i,s,o)}function Wf(n){const e=$e(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>o2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),JE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>f_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>f_(r)).join(",")),e.ue=t}return e.ue}function oI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!q1e(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jJ(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VJ(n.startAt,e.startAt)&&VJ(n.endAt,e.endAt)}function QS(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function YS(n,e){return n.filters.filter(t=>t instanceof gn&&t.field.isEqual(e))}function GJ(n,e,t){let r=WS,i=!0;for(const s of YS(n,e)){let o=WS,a=!0;switch(s.op){case"<":case"<=":o=W1e(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=WS}NJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];NJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function qJ(n,e,t){let r=Ad,i=!0;for(const s of YS(n,e)){let o=Ad,a=!0;switch(s.op){case">=":case">":o=G1e(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ad}OJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];OJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Zc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function KJ(n,e,t,r,i,s,o,a){return new Zc(n,e,t,r,i,s,o,a)}function m_(n){return new Zc(n)}function QJ(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function l2(n){return null!==n.collectionGroup}function g_(n){const e=$e(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tr(Dr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new sI(s,r))}),t.has(Dr.keyField().canonicalString())||e.ce.push(new sI(Dr.keyField(),r))}return e.ce}function Ps(n){const e=$e(n);return e.le||(e.le=function XJ(n,e){if("F"===n.limitType)return a2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new sI(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new xd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xd(n.startAt.position,n.startAt.inclusive):null;return a2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,g_(n))),e.le}function c2(n,e){const t=n.filters.concat([e]);return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function XS(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function aI(n,e){return oI(Ps(n),Ps(e))&&n.limitType===e.limitType}function ZJ(n){return`${Wf(Ps(n))}|lt:${n.limitType}`}function __(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>HJ(i)).join(", ")}]`),JE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>f_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>f_(i)).join(",")),`Target(${r})`}(Ps(n))}; limitType=${n.limitType})`}function lI(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ke.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of g_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=LJ(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,g_(r),i)||r.endAt&&!function(o,a,l){const c=LJ(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,g_(r),i)));var r,i}function JJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eee(n){return(e,t)=>{let r=!1;for(const i of g_(n)){const s=tOe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function tOe(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Dd(l,c):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class Jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return TJ(this.inner)}size(){return this.innerSize}}const nOe=new vr(Ke.comparator);function xo(){return nOe}const tee=new vr(Ke.comparator);function cI(...n){let e=tee;for(const t of n)e=e.insert(t.key,t);return e}function nee(n){let e=tee;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yl(){return uI()}function ree(){return uI()}function uI(){return new Jc(n=>n.toString(),(n,e)=>n.isEqual(e))}const rOe=new vr(Ke.comparator),iOe=new tr(Ke.comparator);function Kt(...n){let e=iOe;for(const t of n)e=e.add(t);return e}const sOe=new tr(Nt);function u2(){return sOe}function d2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eI(e)?"-0":e}}function iee(n){return{integerValue:""+n}}function see(n,e){return gJ(e)?iee(e):d2(n,e)}class ZS{constructor(){this._=void 0}}function oOe(n,e,t){return n instanceof y_?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&HS(s)&&(s=$S(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Gf?aee(n,e):n instanceof qf?lee(n,e):function(i,s){const o=oee(i,s),a=cee(o)+cee(i.Pe);return n2(o)&&n2(i.Pe)?iee(a):d2(i.serializer,a)}(n,e)}function aOe(n,e,t){return n instanceof Gf?aee(n,e):n instanceof qf?lee(n,e):t}function oee(n,e){return n instanceof v_?n2(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class y_ extends ZS{}class Gf extends ZS{constructor(e){super(),this.elements=e}}function aee(n,e){const t=uee(e);for(const r of n.elements)t.some(i=>Ql(i,r))||t.push(r);return{arrayValue:{values:t}}}class qf extends ZS{constructor(e){super(),this.elements=e}}function lee(n,e){let t=uee(e);for(const r of n.elements)t=t.filter(i=>!Ql(i,r));return{arrayValue:{values:t}}}class v_ extends ZS{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function cee(n){return Br(n.integerValue||n.doubleValue)}function uee(n){return rI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class dI{constructor(e,t){this.field=e,this.transform=t}}class cOe{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function JS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class eD{}function dee(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new E_(n.key,Ur.none()):new b_(n.key,n.data,Ur.none());{const t=n.data,r=hs.empty();let i=new tr(Dr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new eu(n.key,r,new Do(i.toArray()),Ur.none())}}function uOe(n,e,t){n instanceof b_?function(i,s,o){const a=i.value.clone(),l=pee(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof eu?function(i,s,o){if(!JS(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=pee(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(fee(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function hI(n,e,t,r){return n instanceof b_?function(s,o,a,l){if(!JS(s.precondition,o))return a;const c=s.value.clone(),u=mee(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof eu?function(s,o,a,l){if(!JS(s.precondition,o))return a;const c=mee(s.fieldTransforms,l,o),u=o.data;return u.setAll(fee(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):(a=t,JS(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function dOe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=oee(r.transform,i||null);null!=s&&(null===t&&(t=hs.empty()),t.set(r.field,s))}return t||null}function hee(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&c_(r,i,(s,o)=>function lOe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Gf&&i instanceof Gf||r instanceof qf&&i instanceof qf?c_(r.elements,i.elements,Ql):r instanceof v_&&i instanceof v_?Ql(r.Pe,i.Pe):r instanceof y_&&i instanceof y_);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class b_ extends eD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eu extends eD{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fee(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pee(n,e,t){const r=new Map;lt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,aOe(o,a,t[i]))}return r}function mee(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,oOe(s,o,e))}return r}class E_ extends eD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h2 extends eD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class f2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&uOe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=hI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=hI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ree();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=dee(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&c_(this.mutations,e.mutations,(t,r)=>hee(t,r))&&c_(this.baseMutations,e.baseMutations,(t,r)=>hee(t,r))}}class p2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){lt(e.mutations.length===r.length);let i=function(){return rOe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new p2(e,t,r,i)}}class m2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hOe{constructor(e,t){this.count=e,this.unchangedNames=t}}var xi,wn;function _ee(n){switch(n){default:return it();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function yee(n){if(void 0===n)return bi("GRPC error has no .code"),ve.UNKNOWN;switch(n){case xi.OK:return ve.OK;case xi.CANCELLED:return ve.CANCELLED;case xi.UNKNOWN:return ve.UNKNOWN;case xi.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case xi.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case xi.INTERNAL:return ve.INTERNAL;case xi.UNAVAILABLE:return ve.UNAVAILABLE;case xi.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case xi.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case xi.NOT_FOUND:return ve.NOT_FOUND;case xi.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case xi.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case xi.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case xi.ABORTED:return ve.ABORTED;case xi.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case xi.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case xi.DATA_LOSS:return ve.DATA_LOSS;default:return it()}}(wn=xi||(xi={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";function vee(){return new TextEncoder}const fOe=new Uf([4294967295,4294967295],0);function bee(n){const e=vee().encode(n),t=new JZ;return t.update(e),new Uint8Array(t.digest())}function Eee(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Uf([t,r],0),new Uf([i,s],0)]}class g2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fI(`Invalid padding: ${t}`);if(r<0)throw new fI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new fI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new fI(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Uf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Uf.fromNumber(r)));return 1===i.compare(fOe)&&(i=new Uf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=bee(e),[r,i]=Eee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new g2(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=bee(e),[r,i]=Eee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class fI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pI{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,mI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new pI(ht.min(),i,new vr(Nt),xo(),Kt())}}class mI{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mI(r,t,Kt(),Kt(),Kt())}}class nD{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Iee{constructor(e,t){this.targetId=e,this.me=t}}class wee{constructor(e,t,r=si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Cee{constructor(){this.fe=0,this.ge=Aee(),this.pe=si.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Kt(),t=Kt(),r=Kt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new mI(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Aee()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pOe{constructor(e){this.Le=e,this.Be=new Map,this.ke=xo(),this.qe=Tee(),this.Qe=new vr(Nt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(QS(s))if(0===r){const o=new Ke(s.path);this.Ue(t,o,xr.newNoDocument(o,ht.min()))}else lt(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Xc(r).toUint8Array()}catch(l){if(l instanceof SJ)return Zo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new g2(o,i,s)}catch(l){return Zo(l instanceof fI?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&QS(a.target)){const l=new Ke(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,xr.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Kt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new pI(e,t,this.Qe,this.ke,r);return this.ke=xo(),this.qe=Tee(),this.Qe=new vr(Nt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Cee,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tr(Nt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cee),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Tee(){return new vr(Ke.comparator)}function Aee(){return new vr(Ke.comparator)}const mOe={asc:"ASCENDING",desc:"DESCENDING"},gOe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_Oe={and:"AND",or:"OR"};class yOe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _2(n,e){return n.useProto3Json||JE(e)?e:{value:e}}function I_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function See(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vOe(n,e){return I_(n,e.toTimestamp())}function Ei(n){return lt(!!n),ht.fromTimestamp(function(t){const r=Yc(t);return new Vr(r.seconds,r.nanos)}(n))}function y2(n,e){return v2(n,e).canonicalString()}function v2(n,e){const t=(i=n,new mn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function Dee(n){const e=mn.fromString(n);return lt(Bee(e)),e}function gI(n,e){return y2(n.databaseId,e.path)}function Xl(n,e){const t=Dee(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(Mee(t))}function xee(n,e){return y2(n.databaseId,e)}function Ree(n){const e=Dee(n);return 4===e.length?mn.emptyPath():Mee(e)}function b2(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mee(n){return lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Pee(n,e,t){return{name:gI(n,e),fields:t.value.mapValue.fields}}function kee(n,e,t){const r=Xl(n,e.name),i=Ei(e.updateTime),s=e.createTime?Ei(e.createTime):ht.min(),o=new hs({mapValue:{fields:e.fields}}),a=xr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function _I(n,e){let t;if(e instanceof b_)t={update:Pee(n,e.key,e.value)};else if(e instanceof E_)t={delete:gI(n,e.key)};else if(e instanceof eu)t={update:Pee(n,e.key,e.data),updateMask:SOe(e.fieldMask)};else{if(!(e instanceof h2))return it();t={verify:gI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof y_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof v_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:vOe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:it()),t;var s}function E2(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Ur.updateTime(Ei(s.updateTime)):void 0!==s.exists?Ur.exists(s.exists):Ur.none():Ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(lt("REQUEST_TIME"===a.setToServerValue),l=new y_):"appendMissingElements"in a?l=new Gf(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new qf(a.removeAllFromArray.values||[]):"increment"in a?l=new v_(o,a.increment):it();const c=Dr.fromServerFormat(a.fieldPath);return new dI(c,l)}(n,i)):[];var s;if(e.update){const i=Xl(n,e.update.name),s=new hs({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Do((e.updateMask.fieldPaths||[]).map(u=>Dr.fromServerFormat(u)));return new eu(i,s,o,t,r)}return new b_(i,s,t,r)}if(e.delete){const i=Xl(n,e.delete);return new E_(i,t)}if(e.verify){const i=Xl(n,e.verify);return new h2(i,t)}return it()}function Nee(n,e){return{documents:[xee(n,e.path)]}}function rD(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xee(n,i);const s=function(c){if(0!==c.length)return Vee(Kn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:Rd((m=u).field),direction:COe(m.dir)};var m})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=_2(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function Fee(n){let e=Ree(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){lt(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){const m=Lee(d);return m instanceof Kn&&s2(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new sI(w_((b=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(d){let m;return m="object"==typeof d?d.value:d,JE(m)?null:m}(t.limit));let l=null;var d;t.startAt&&(l=new xd((d=t.startAt).values||[],!!d.before));let c=null;return t.endAt&&(c=function(d){return new xd(d.values||[],!d.before)}(t.endAt)),KJ(e,i,o,s,a,"F",l,c)}function Lee(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=w_(t.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=w_(t.unaryFilter.field);return gn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=w_(t.unaryFilter.field);return gn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=w_(t.unaryFilter.field);return gn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?gn.create(w_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Kn.create(t.compositeFilter.filters.map(r=>Lee(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return it()}}(t.compositeFilter.op))}(n):it();var t}function COe(n){return mOe[n]}function TOe(n){return gOe[n]}function AOe(n){return _Oe[n]}function Rd(n){return{fieldPath:n.canonicalString()}}function w_(n){return Dr.fromServerFormat(n.fieldPath)}function Vee(n){return n instanceof gn?function(t){if("=="===t.op){if(MJ(t.value))return{unaryFilter:{field:Rd(t.field),op:"IS_NAN"}};if(RJ(t.value))return{unaryFilter:{field:Rd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(MJ(t.value))return{unaryFilter:{field:Rd(t.field),op:"IS_NOT_NAN"}};if(RJ(t.value))return{unaryFilter:{field:Rd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rd(t.field),op:TOe(t.op),value:t.value}}}(n):n instanceof Kn?function(t){const r=t.getFilters().map(i=>Vee(i));return 1===r.length?r[0]:{compositeFilter:{op:AOe(t.op),filters:r}}}(n):it()}function SOe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Bee(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class tu{constructor(e,t,r,i,s=ht.min(),o=ht.min(),a=si.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Uee{constructor(e){this.ct=e}}function jee(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:iD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:gI(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:I_(s,o.version.toTimestamp()),createTime:I_(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kf(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Kf(e.version)}}var s,o;return r}function iD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qf(n){const e=new Vr(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function Yf(n,e){const t=(e.baseMutations||[]).map(s=>E2(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>E2(n.ct,s)),i=Vr.fromMillis(e.localWriteTimeMs);return new f2(e.batchId,i,t,r)}function yI(n){const e=Qf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qf(n.lastLimboFreeSnapshotVersion):ht.min();let r;return r=void 0!==n.query.documents?(lt(1===(s=n.query).documents.length),Ps(m_(Ree(s.documents[0])))):function(s){return Ps(Fee(s))}(n.query),new tu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,si.fromBase64String(n.resumeToken));var s}function zee(n,e){const t=Kf(e.snapshotVersion),r=Kf(e.lastLimboFreeSnapshotVersion);let i;i=QS(e.target)?Nee(n.ct,e.target):rD(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function I2(n){const e=Fee({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?XS(e,e.limit,"L"):e}function w2(n,e){return new m2(e.largestBatchId,E2(n.ct,e.overlayMutation))}function Hee(n,e){const t=e.path.lastSegment();return[n,Ms(e.path.popLast()),t]}function $ee(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Kf(r.readTime),documentKey:Ms(r.documentKey.path),largestBatchId:r.largestBatchId}}class xOe{getBundleMetadata(e,t){return Wee(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Qf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Wee(e).put({bundleId:(i=t).id,createTime:Kf(Ei(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Gee(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:I2(s.bundledQuery),readTime:Qf(s.readTime)};var s})}saveNamedQuery(e,t){return Gee(e).put({name:(i=t).name,readTime:Kf(Ei(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Wee(n){return zi(n,"bundles")}function Gee(n){return zi(n,"namedQueries")}class sD{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new sD(e,t.uid||"")}getOverlay(e,t){return vI(e).get(Hee(this.userId,t)).next(r=>r?w2(this.serializer,r):null)}getOverlays(e,t){const r=Yl();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new m2(t,o);i.push(this.ht(e,a))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Ms(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(vI(e).j("collectionPathOverlayIndex",a))}),le.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Yl(),s=Ms(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return vI(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=w2(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Yl();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vI(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=w2(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,t){return vI(e).put(function(i,s,o){const[a,l,c]=Hee(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_I(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function vI(n){return zi(n,"documentOverlays")}class ROe{Pt(e){return zi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?si.fromUint8Array(r):si.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Xf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Br(e.integerValue));else if("doubleValue"in e){const r=Br(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),eI(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Yc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?PJ(e)?this.dt(t,Number.MAX_SAFE_INTEGER):KS(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):it()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Br(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Ke.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function MOe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function qee(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=MOe(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Xf.vt=new Xf;class POe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=qee(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=qee(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class kOe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class NOe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class bI{constructor(){this.jt=new POe,this.Ht=new kOe(this.jt),this.Jt=new NOe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Zf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zf(this.indexId,this.documentKey,this.arrayValue,r)}}function Md(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Kee(n.arrayValue,e.arrayValue),0!==t?t:(t=Kee(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function Kee(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Qee{constructor(e){this.Xt=new tr((t,r)=>Dr.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(lt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=QV(e);if(void 0!==t&&!this.sn(t))return!1;const r=jf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new tr(Dr.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new zf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new zf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new zf(r.field,"asc"===r.dir?0:1)));return new u_(u_.UNKNOWN_ID,this.collectionId,t,d_.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Yee(n){var e,t;if(lt(n instanceof gn||n instanceof Kn),n instanceof gn){if(n instanceof WJ){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>gn.create(n.field,"==",s)))||[];return Kn.create(i,"or")}return n}const r=n.filters.map(i=>Yee(i));return Kn.create(r,n.op)}function OOe(n){if(0===n.getFilters().length)return[];const e=A2(Yee(n));return lt(Xee(e)),C2(e)||T2(e)?[e]:e.getFilters()}function C2(n){return n instanceof gn}function T2(n){return n instanceof Kn&&s2(n)}function Xee(n){return C2(n)||T2(n)||function(t){if(t instanceof Kn&&r2(t)){for(const r of t.getFilters())if(!C2(r)&&!T2(r))return!1;return!0}return!1}(n)}function A2(n){if(lt(n instanceof gn||n instanceof Kn),n instanceof gn)return n;if(1===n.filters.length)return A2(n.filters[0]);const e=n.filters.map(r=>A2(r));let t=Kn.create(e,n.op);return t=oD(t),Xee(t)?t:(lt(t instanceof Kn),lt(p_(t)),lt(t.filters.length>1),t.filters.reduce((r,i)=>S2(r,i)))}function S2(n,e){let t;return lt(n instanceof gn||n instanceof Kn),lt(e instanceof gn||e instanceof Kn),t=n instanceof gn?e instanceof gn?Kn.create([n,e],"and"):Zee(n,e):e instanceof gn?Zee(e,n):function(i,s){if(lt(i.filters.length>0&&s.filters.length>0),p_(i)&&p_(s))return zJ(i,s.getFilters());const o=r2(i)?i:s,a=r2(i)?s:i,l=o.filters.map(c=>S2(c,a));return Kn.create(l,"or")}(n,e),oD(t)}function Zee(n,e){if(p_(e))return zJ(e,n.getFilters());{const t=e.filters.map(r=>S2(n,r));return Kn.create(t,"or")}}function oD(n){if(lt(n instanceof gn||n instanceof Kn),n instanceof gn)return n;const e=n.getFilters();if(1===e.length)return oD(e[0]);if(UJ(n))return n;const t=e.map(i=>oD(i)),r=[];return t.forEach(i=>{i instanceof gn?r.push(i):i instanceof Kn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Kn.create(r,n.op)}class FOe{constructor(){this.un=new D2}addToCollectionParentIndex(e,t){return this.un.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Jo.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Jo.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class D2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tr(mn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tr(mn.comparator)).toArray()}}const aD=new Uint8Array(0);class LOe{constructor(e,t){this.databaseId=t,this.cn=new D2,this.ln=new Jc(r=>Wf(r),(r,i)=>oI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Ms(i)};return Jee(e).put(s)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[cJ(t),""],!1,!0);return Jee(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Kl(o.parent))}return r})}addFieldIndex(e,t){const r=EI(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=T_(e);return s.next(a=>{o.put($ee(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=EI(e),i=T_(e),s=C_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=EI(e),r=C_(e),i=T_(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return le.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Qee(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=C_(e);let i=!0;const s=new Map;return le.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Kt();const a=[];return le.forEach(s,(l,c)=>{var Q;Oe("IndexedDbIndexManager",`Using index ${Q=l,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(be=>`${be.fieldPath}:${be.kind}`).join(",")}`} to execute ${Wf(t)}`);const u=function(Q,be){const Be=QV(be);if(void 0===Be)return null;for(const je of YS(Q,Be.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(c,l),d=function(Q,be){const Be=new Map;for(const je of jf(be))for(const H of YS(Q,je.fieldPath))switch(H.op){case"==":case"in":Be.set(je.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return Be.set(je.fieldPath.canonicalString(),H.value),Array.from(Be.values())}return null}(c,l),m=function(Q,be){const Be=[];let je=!0;for(const H of jf(be)){const L=0===H.kind?GJ(Q,H.fieldPath,Q.startAt):qJ(Q,H.fieldPath,Q.startAt);Be.push(L.value),je&&(je=L.inclusive)}return new xd(Be,je)}(c,l),y=function(Q,be){const Be=[];let je=!0;for(const H of jf(be)){const L=0===H.kind?qJ(Q,H.fieldPath,Q.endAt):GJ(Q,H.fieldPath,Q.endAt);Be.push(L.value),je&&(je=L.inclusive)}return new xd(Be,je)}(c,l),b=this.In(l,c,m),T=this.In(l,c,y),M=this.Tn(l,c,d),B=this.En(l.indexId,u,b,m.inclusive,T,y.inclusive,M);return le.forEach(B,V=>r.G(V,t.limit).next(Q=>{Q.forEach(be=>{const Be=Ke.fromSegments(be.documentKey);o.has(Be)||(o=o.add(Be),a.push(Be))})}))}).next(()=>a)}return le.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:OOe(Kn.create(e.filters,"and")).map(r=>a2(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let d=0;d<l;++d){const m=t?this.dn(t[d/c]):aD,y=this.An(e,m,r[d%c],i),b=this.Rn(e,m,s[d%c],o),T=a.map(M=>this.An(e,m,M,!0));u.push(...this.createRange(y,b,T))}return u}An(e,t,r,i){const s=new Zf(e,Ke.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Zf(e,Ke.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new Qee(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return le.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new tr(Dr.comparator),u=!1;for(const d of l.filters)for(const m of d.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?u=!0:c=c.add(m.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new bI;for(const i of jf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);Xf.vt.It(s,o)}return r.zt()}dn(e){const t=new bI;return Xf.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new bI;return Xf.vt.It($f(this.databaseId,t),r.Yt(function(s){const o=jf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new bI);let s=0;for(const o of jf(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&rI(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);Xf.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new bI;l.seed(a.zt()),Xf.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof gn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=EI(e),i=T_(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return le.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){const m=d?new d_(d.sequenceNumber,new Jo(Qf(d.readTime),new Ke(Kl(d.documentKey)),d.largestBatchId)):d_.empty(),y=u.fields.map(([b,T])=>new zf(Dr.fromServerFormat(b),T));return new u_(u.indexId,u.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Nt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=EI(e),s=T_(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>le.forEach(a,l=>s.put($ee(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?le.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),le.forEach(a,l=>this.wn(e,i,l).next(c=>{const u=this.Sn(s,l);return c.isEqual(u)?le.resolve():this.bn(e,s,l,c,u)}))))})}Dn(e,t,r,i){return C_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return C_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=C_(e);let s=new tr(Md);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Zf(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new tr(Md);const i=this.Vn(t,e);if(null==i)return r;const s=QV(t);if(null!=s){const o=e.data.field(s.fieldPath);if(rI(o))for(const a of o.arrayValue.values||[])r=r.add(new Zf(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Zf(t.indexId,e.key,aD,i));return r}bn(e,t,r,i,s){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,u,d,m){const y=l.getIterator(),b=c.getIterator();let T=h_(y),M=h_(b);for(;T||M;){let B=!1,V=!1;if(T&&M){const Q=u(T,M);Q<0?V=!0:Q>0&&(B=!0)}else null!=T?V=!0:B=!0;B?(d(M),M=h_(b)):V?(m(T),T=h_(y)):(T=h_(y),M=h_(b))}}(i,s,Md,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),le.waitFor(o)}yn(e){let t=1;return T_(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Md(o,a)).filter((o,a,l)=>!a||0!==Md(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=Md(o,e),l=Md(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,aD,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,aD,[]]))}return s}Cn(e,t){return Md(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ete)}getMinOffset(e,t){return le.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||it())).next(ete)}}function Jee(n){return zi(n,"collectionParents")}function C_(n){return zi(n,"indexEntries")}function EI(n){return zi(n,"indexConfiguration")}function T_(n){return zi(n,"indexState")}function ete(n){lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;YV(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Jo(e.readTime,e.documentKey,t)}const tte={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ks{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ks(e,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nte(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(u,d,m)=>(a++,m.delete()));s.push(l.next(()=>{lt(1===a)}));const c=[];for(const u of t.mutations){const d=vJ(e,u.key.path,t.batchId);s.push(i.delete(d)),c.push(u.key)}return le.waitFor(s).next(()=>c)}function lD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);class cD{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){lt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new cD(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pd(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=A_(e),o=Pd(e);return o.add({}).next(a=>{lt("number"==typeof a);const l=new f2(a,t,r,i),c=function(y,b,T){const M=T.baseMutations.map(V=>_I(y.ct,V)),B=T.mutations.map(V=>_I(y.ct,V));return{userId:b,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:M,mutations:B}}(this.serializer,this.userId,l),u=[];let d=new tr((m,y)=>Nt(m.canonicalString(),y.canonicalString()));for(const m of i){const y=vJ(this.userId,m.key.path,a);d=d.add(m.key.path.popLast()),u.push(o.put(c)),u.push(s.put(y,C1e))}return d.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),le.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return Pd(e).get(t).next(r=>r?(lt(r.userId===this.userId),Yf(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?le.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Pd(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(lt(a.batchId>=r),s=Yf(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Pd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pd(e).U("userMutationsIndex",t).next(r=>r.map(i=>Yf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return A_(e).J({range:i},(o,a,l)=>{const[c,u,d]=o,m=Kl(u);if(c===this.userId&&t.path.isEqual(m))return Pd(e).get(d).next(y=>{if(!y)throw it();lt(y.userId===this.userId),s.push(Yf(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tr(Nt);const i=[];return t.forEach(s=>{const o=jS(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=A_(e).J({range:a},(c,u,d)=>{const[m,y,b]=c,T=Kl(y);m===this.userId&&s.path.isEqual(T)?r=r.add(b):d.done()});i.push(l)}),le.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=jS(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new tr(Nt);return A_(e).J({range:o},(l,c,u)=>{const[d,m,y]=l,b=Kl(m);d===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):u.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Pd(e).get(s).next(o=>{if(null===o)throw it();lt(o.userId===this.userId),r.push(Yf(this.serializer,o))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return nte(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return A_(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Kl(s[1]);i.push(l)}else a.done()}).next(()=>{lt(0===i.length)})})}containsKey(e,t){return rte(e,this.userId,t)}Nn(e){return ite(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rte(n,e,t){const r=jS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return A_(n).J({range:s,H:!0},(a,l,c)=>{const[u,d,m]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Pd(n){return zi(n,"mutations")}function A_(n){return zi(n,"documentMutations")}function ite(n){return zi(n,"mutationQueues")}class Jf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Jf(0)}static kn(){return new Jf(-1)}}class VOe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Jf(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ht.fromTimestamp(new Vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>S_(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(lt(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return S_(e).J((o,a)=>{const l=yI(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>le.waitFor(s)).next(()=>i)}forEachTarget(e,t){return S_(e).J((r,i)=>{const s=yI(i);t(s)})}qn(e){return ste(e).get("targetGlobalKey").next(t=>(lt(null!==t),t))}Qn(e,t){return ste(e).put("targetGlobalKey",t)}Kn(e,t){return S_(e).put(zee(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return S_(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=yI(a);oI(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=kd(e);return t.forEach(o=>{const a=Ms(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=kd(e);return le.forEach(t,s=>{const o=Ms(s.path);return le.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=kd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=kd(e);let s=Kt();return i.J({range:r,H:!0},(o,a,l)=>{const c=Kl(o[1]),u=new Ke(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const r=Ms(t.path),i=IDBKeyRange.bound([r],[cJ(r)],!1,!0);let s=0;return kd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return S_(e).get(t).next(r=>r?yI(r):null)}}function S_(n){return zi(n,"targets")}function ste(n){return zi(n,"targetGlobal")}function kd(n){return zi(n,"targetDocuments")}function ote([n,e],[t,r]){const i=Nt(n,t);return 0===i?Nt(e,r):i}class BOe{constructor(e){this.Un=e,this.buffer=new tr(ote),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ote(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ate{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,O.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){wd(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Id(r)}yield t.Hn(3e5)}))}}class UOe{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(ea.oe);const r=new BOe(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(tte)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tte):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),l_()<=To.$b.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}class jOe{constructor(e,t){this.db=e,this.garbageCollector=function lte(n,e){return new UOe(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return uD(e,r)}removeReference(e,t,r){return uD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uD(e,t)}nr(e,t){return function(i,s){let o=!1;return ite(i).Y(a=>rte(i,a,s).next(l=>(l&&(o=!0),le.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ht.min()),kd(e).delete([0,Ms(o.path)])))});i.push(l)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uD(e,t)}tr(e,t){const r=kd(e);let i,s=ea.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==ea.oe&&t(new Ke(Kl(i)),s),s=c,i=l):s=ea.oe}).next(()=>{s!==ea.oe&&t(new Ke(Kl(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uD(n,e){return kd(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ms(e.path),sequenceNumber:i}));var i}class cte{constructor(){this.changes=new Jc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zOe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ep(e).put(r)}removeEntry(e,t,r){return ep(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],iD(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=xr.newInvalidDocument(t);return ep(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(II(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:xr.newInvalidDocument(t)};return ep(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(II(t))},(i,s)=>{r={document:this.ir(t,s),size:lD(s)}}).next(()=>r)}getEntries(e,t){let r=xo();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=xo(),i=new vr(Ke.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,lD(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return le.resolve();let i=new tr(fte);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(II(i.first()),II(i.last())),o=i.getIterator();let a=o.getNext();return ep(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=Ke.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&fte(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(II(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),iD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ep(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=xo();for(const d of c){const m=this.ir(Ke.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);m.isFoundDocument()&&(lI(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let s=xo();const o=hte(t,r),a=hte(t,Jo.max());return ep(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.ir(Ke.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new HOe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dte(e).get("remoteDocumentGlobalKey").next(t=>(lt(!!t),t))}rr(e,t){return dte(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function DOe(n,e){let t;if(e.document)t=kee(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Qf(e.noDocument.readTime);t=xr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ke.fromSegments(e.unknownDocument.path),i=Qf(e.unknownDocument.version);t=xr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Vr(i[0],i[1]);return ht.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ht.min()))return r}return xr.newInvalidDocument(e)}}function ute(n){return new zOe(n)}class HOe extends cte{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Jc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new tr((s,o)=>Nt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=jee(this.cr.serializer,o);i=i.add(s.path.popLast());const c=lD(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=jee(this.cr.serializer,o.convertToNoDocument(ht.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function dte(n){return zi(n,"remoteDocumentGlobal")}function ep(n){return zi(n,"remoteDocumentsV14")}function II(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hte(n,e){const t=e.documentKey.path.toArray();return[n,iD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fte(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Nt(t[s],r[s]),i)return i;return i=Nt(t.length,r.length),i||(i=Nt(t[t.length-2],r[r.length-2]),i||Nt(t[t.length-1],r[r.length-1]))}class $Oe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pte{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&hI(r.mutation,i,Do.empty(),Vr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=Yl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=cI();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Yl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=xo();const o=uI(),a=uI();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof eu)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),hI(u.mutation,c,u.mutation.getFieldMask(),Vr.now())):o.set(c.key,Do.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new $Oe(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=uI();let i=new vr((o,a)=>o-a),s=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||Do.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||Kt()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=ree();u.forEach(m=>{if(!s.has(m)){const y=dee(t.get(m),r.get(m));null!==y&&d.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ke.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):l2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):le.resolve(Yl());let a=-1,l=s;return o.next(c=>le.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?le.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Kt())).next(u=>({batchId:a,changes:nee(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=cI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=cI();return this.indexManager.getCollectionParents(e,s).next(a=>le.forEach(a,l=>{const c=(d=t,m=l.child(s),new Zc(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,m;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,xr.newInvalidDocument(u)))});let a=cI();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&hI(u.mutation,c,Do.empty(),Vr.now()),lI(t,c)&&(a=a.insert(l,c))}),a})}}class WOe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return le.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Ei(i.createTime)}),le.resolve();var i}getNamedQuery(e,t){return le.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:I2(i.bundledQuery),readTime:Ei(i.readTime)}),le.resolve();var i}}class GOe{constructor(){this.overlays=new vr(Ke.comparator),this.Ir=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Yl();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Yl(),s=t.length+1,o=new Ke(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new vr((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=Yl(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Yl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return le.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new m2(t,r));let s=this.Ir.get(t);void 0===s&&(s=Kt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class qOe{constructor(){this.sessionToken=si.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}class x2{constructor(){this.Tr=new tr(ns.Er),this.dr=new tr(ns.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new ns(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ns(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ke(new mn([])),r=new ns(t,e),i=new ns(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ke(new mn([])),r=new ns(t,e),i=new ns(t,e+1);let s=Kt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ns(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ns{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ke.comparator(e.key,t.key)||Nt(e.wr,t.wr)}static Ar(e,t){return Nt(e.wr,t.wr)||Ke.comparator(e.key,t.key)}}class KOe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new tr(ns.Er)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new f2(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ns(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,t){return le.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ns(t,0),i=new ns(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tr(Nt);return t.forEach(i=>{const s=new ns(i,0),o=new ns(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),le.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ke.isDocumentKey(s)||(s=s.child(""));const o=new ns(new Ke(s),0);let a=new tr(Nt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),le.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){lt(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return le.forEach(t.mutations,i=>{const s=new ns(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new ns(t,0),i=this.br.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class QOe{constructor(e){this.Mr=e,this.docs=new vr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():xr.newInvalidDocument(t))}getEntries(e,t){let r=xo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=xo();const o=t.path,a=new Ke(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||YV(dJ(u),r)<=0||(i.has(u.key)||lI(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,t,r,i){it()}Or(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YOe(this)}getSize(e){return le.resolve(this.size)}}class YOe extends cte{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class XOe{constructor(e){this.persistence=e,this.Nr=new Jc(t=>Wf(t),oI),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Lr=0,this.Br=new x2,this.targetCount=0,this.kr=Jf.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),le.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Jf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Kn(t),le.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Br.containsKey(t))}}class R2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ea(0),this.Kr=!1,this.Kr=!0,this.$r=new qOe,this.referenceDelegate=e(this),this.Ur=new XOe(this),this.indexManager=new FOe,this.remoteDocumentCache=new QOe(r=>this.referenceDelegate.Wr(r)),this.serializer=new Uee(t),this.Gr=new WOe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GOe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new KOe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new ZOe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return le.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class ZOe extends fJ{constructor(e){super(),this.currentSequenceNumber=e}}class dD{constructor(e){this.persistence=e,this.Jr=new x2,this.Yr=null}static Zr(e){return new dD(e)}get Xr(){if(this.Yr)return this.Yr;throw it()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),le.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xr,r=>{const i=Ke.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ht.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return le.or([()=>le.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class JOe{constructor(e){this.serializer=e}O(e,t,r,i){const s=new US("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yJ,{unique:!0}),l.createObjectStore("documentMutations"),mte(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=le.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),mte(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yJ,{unique:!0});const d=c.store("mutations"),m=u.map(y=>d.put(y));return le.waitFor(m)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:F1e});c.createIndex("collectionPathOverlayIndex",L1e,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",V1e,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:T1e});c.createIndex("documentKeyIndex",A1e),c.createIndex("collectionGroupIndex",S1e)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:P1e}).createIndex("sequenceNumberIndex",k1e,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:N1e}).createIndex("documentKeyIndex",O1e,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(l){l.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=lD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>le.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>le.forEach(a,l=>{lt(l.userId===s.userId);const c=Yf(this.serializer,l);return nte(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new mn(o),c=[0,Ms(l)];s.push(t.get(c).next(u=>u?le.resolve():t.put({targetId:0,path:Ms(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:M1e});const r=t.store("collectionParents"),i=new D2,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Ms(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new mn(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=Kl(a);return s(u.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=yI(i),o=zee(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(d=o,d.document?new Ke(mn.fromString(d.document.name).popFirst(5)):d.noDocument?Ke.fromSegments(d.noDocument.path):d.unknownDocument?Ke.fromSegments(d.unknownDocument.path):it()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var d;i.push(a.put(c))}).next(()=>le.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=ute(this.serializer),s=new R2(dD.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Kt();Yf(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),le.forEach(a,(l,c)=>{const u=new es(c),d=sD.lt(this.serializer,u),m=s.getIndexManager(u),y=cD.lt(u,this.serializer,m,s.referenceDelegate);return new pte(i,y,d,m).recalculateAndSaveOverlaysForDocumentKeys(new e2(t,ea.oe),l).next()})})}}function mte(n){n.createObjectStore("targetDocuments",{keyPath:x1e}).createIndex("documentTargetsIndex",R1e,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",D1e,{unique:!0}),n.createObjectStore("targetGlobal")}const M2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class P2{constructor(e,t,r,i,s,o,a,l,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!P2.D())throw new Pe(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jOe(this,i),this.Ai=t+"main",this.serializer=new Uee(l),this.Ri=new ql(this.Ai,this.hi,new JOe(this.serializer)),this.$r=new ROe,this.Ur=new VOe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ute(this.serializer),this.Gr=new xOe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===u&&bi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ve.FAILED_PRECONDITION,M2);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ea(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,O.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,O.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,O.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(wd(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return wI(e).get("owner").next(t=>le.resolve(this.vi(t)))}Ci(e){return fD(e).delete(this.clientId)}Fi(){var e=this;return(0,O.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zi(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return le.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?le.resolve(!0):wI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Pe(ve.FAILED_PRECONDITION,M2);return!1}}return!(!this.networkEnabled||!this.inForeground)||fD(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,O.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new e2(t,ea.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>fD(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return cD.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LOe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return sD.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(l=this.hi)?j1e:16===l?U1e:15===l?JV:14===l?IJ:13===l?EJ:12===l?B1e:11===l?bJ:void it();var l;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new e2(a,this.Qr?this.Qr.next():ea.oe),"readwrite-primary"===t?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw bi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Pe(ve.FAILED_PRECONDITION,hJ);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return wI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ve.FAILED_PRECONDITION,M2)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wI(e).put("owner",t)}static D(){return ql.D()}bi(e){const t=wI(e);return t.get("owner").next(r=>this.vi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(bi(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,N.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){bi("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wI(n){return zi(n,"owner")}function fD(n){return zi(n,"clientMetadata")}function k2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class N2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Kt(),i=Kt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new N2(e,t.fromCache,r,i)}}class eFe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gte{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,N.nr)()?8:pJ((0,N.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new eFe;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(l_()<=To.$b.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",__(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),le.resolve()):(l_()<=To.$b.DEBUG&&Oe("QueryEngine","Query:",__(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(l_()<=To.$b.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",__(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(t))):le.resolve())}Yi(e,t){if(QJ(t))return le.resolve(null);let r=Ps(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=XS(t,null,"F"),r=Ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Kt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,XS(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return QJ(t)||i.isEqual(ht.min())?le.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?le.resolve(null):(l_()<=To.$b.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),__(t)),this.rs(e,o,t,uJ(i,-1)).next(a=>a))})}ts(e,t){let r=new tr(eee(e));return t.forEach((i,s)=>{lI(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return l_()<=To.$b.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",__(t)),this.Ji.getDocumentsMatchingQuery(e,t,Jo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class tFe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new vr(Nt),this._s=new Jc(s=>Wf(s),oI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pte(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function _te(n,e,t,r){return new tFe(n,e,t,r)}function yte(n,e){return O2.apply(this,arguments)}function O2(){return(O2=(0,O.A)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Kt();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function vte(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function bte(n,e,t){let r=Kt(),i=Kt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=xo();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ht.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Oe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function iFe(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function D_(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new tu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function x_(n,e,t){return F2.apply(this,arguments)}function F2(){return(F2=(0,O.A)(function*(n,e,t){const r=$e(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!wd(o))throw o;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function pD(n,e,t){const r=$e(n);let i=ht.min(),s=Kt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=$e(l),m=d._s.get(u);return void 0!==m?le.resolve(d.os.get(m)):d.Ur.getTargetData(c,u)}(r,o,Ps(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ht.min(),t?s:Kt())).next(a=>(wte(r,JJ(e),a),{documents:a,Ts:s})))}function Ete(n,e){const t=$e(n),r=$e(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function Ite(n,e){const t=$e(n),r=t.us.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,uJ(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wte(t,e,i),i))}function wte(n,e,t){let r=n.us.get(e)||ht.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function L2(){return(L2=(0,O.A)(function*(n,e,t,r){const i=$e(n);let s=Kt(),o=xo();for(const c of t){const u=e.Es(c.metadata.name);c.document&&(s=s.add(u));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),o=o.insert(u,d)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=yield D_(i,(u=r,Ps(m_(mn.fromString(`__bundle__/docs/${u}`)))));var u;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>bte(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))})).apply(this,arguments)}function oFe(n,e){return V2.apply(this,arguments)}function V2(){return(V2=(0,O.A)(function*(n,e,t=Kt()){const r=yield D_(n,Ps(I2(e.bundledQuery))),i=$e(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ei(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(si.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function Cte(n,e){return`firestore_clients_${n}_${e}`}function Tte(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function B2(n,e){return`firestore_targets_${n}_${e}`}class mD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Pe(i.error.code,i.error.message))),o?new mD(e,t,i.state,s):(bi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pe(r.error.code,r.error.message))),s?new CI(e,r.state,i):(bi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=u2();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=gJ(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new gD(e,s):(bi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class U2{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new U2(t.clientId,t.onlineState):(bi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class j2{constructor(){this.activeTargetIds=u2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z2{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new vr(Nt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Cte(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new j2),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,O.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(Cte(e.persistenceKey,i));if(s){const o=gD.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(B2(this.persistenceKey,e));if(i){const s=CI.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(B2(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void bi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,O.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=ea.oe;if(null!=o)try{const l=JSON.parse(o);lt("number"==typeof l),a=l}catch(l){bi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==ea.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new mD(this.currentUser,e,t,r),s=Tte(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=Tte(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=B2(this.persistenceKey,e),s=new CI(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return gD.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return mD.Rs(new es(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return CI.Rs(i,t)}Ls(e){return U2.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,O.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=u2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Ate{constructor(){this.so=new j2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new j2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class aFe{_o(e){}shutdown(){}}class Ste{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _D=null;function H2(){return null===_D?_D=268435456+Math.round(2147483648*Math.random()):_D++,"0x"+_D.toString(16)}const lFe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cFe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ns="WebChannelConnection";class uFe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=H2(),l=this.xo(t,r.toUriEncodedString());Oe("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(u=>(Oe("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw Zo("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+a_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${lFe[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=H2();return new Promise((o,a)=>{const l=new eJ;l.setWithCredentials(!0),l.listenOnce(tJ.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case BS.NO_ERROR:const u=l.getResponseJson();Oe(Ns,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case BS.TIMEOUT:Oe(Ns,`RPC '${e}' ${s} timed out`),a(new Pe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case BS.HTTP_ERROR:const d=l.getStatus();if(Oe(Ns,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const b=function(M){const B=M.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(B)>=0?B:ve.UNKNOWN}(y.status);a(new Pe(b,y.message))}else a(new Pe(ve.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Pe(ve.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Oe(Ns,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Oe(Ns,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=H2(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iJ(),a=rJ(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");Oe(Ns,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let m=!1,y=!1;const b=new cFe({Io:M=>{y?Oe(Ns,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(Oe(Ns,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),Oe(Ns,`RPC '${e}' stream ${i} sending:`,M),d.send(M))},To:()=>d.close()}),T=(M,B,V)=>{M.listen(B,Q=>{try{V(Q)}catch(be){setTimeout(()=>{throw be},0)}})};return T(d,YE.EventType.OPEN,()=>{y||(Oe(Ns,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),T(d,YE.EventType.CLOSE,()=>{y||(y=!0,Oe(Ns,`RPC '${e}' stream ${i} transport closed`),b.So())}),T(d,YE.EventType.ERROR,M=>{y||(y=!0,Zo(Ns,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new Pe(ve.UNAVAILABLE,"The operation could not be completed")))}),T(d,YE.EventType.MESSAGE,M=>{var B;if(!y){const V=M.data[0];lt(!!V);const be=V.error||(null===(B=V[0])||void 0===B?void 0:B.error);if(be){Oe(Ns,`RPC '${e}' stream ${i} received error:`,be);const Be=be.status;let je=function(W){const J=xi[W];if(void 0!==J)return yee(J)}(Be),H=be.message;void 0===je&&(je=ve.INTERNAL,H="Unknown error status: "+Be+" with message "+be.message),y=!0,b.So(new Pe(je,H)),d.close()}else Oe(Ns,`RPC '${e}' stream ${i} received:`,V),b.bo(V)}}),T(a,nJ.STAT_EVENT,M=>{M.stat===qV.PROXY?Oe(Ns,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===qV.NOPROXY&&Oe(Ns,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Dte(){return typeof window<"u"?window:null}function yD(){return typeof document<"u"?document:null}function TI(n){return new yOe(n,!0)}class $2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class xte{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $2(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,O.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,O.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,O.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Pe(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,O.A)(function*(){e.state=0,e.start()}))}I_(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dFe extends xte{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function EOe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:it(),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(lt(void 0===u||"string"==typeof u),si.fromBase64String(u||"")):(lt(void 0===u||u instanceof Buffer||u instanceof Uint8Array),si.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?ve.UNKNOWN:yee(c.code);return new Pe(u,c.message||"")}(o);t=new wee(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Xl(n,r.document.name),s=Ei(r.document.updateTime),o=r.document.createTime?Ei(r.document.createTime):ht.min(),a=new hs({mapValue:{fields:r.document.fields}}),l=xr.newFoundDocument(i,s,o,a);t=new nD(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Xl(n,r.document),s=r.readTime?Ei(r.readTime):ht.min(),o=xr.newNoDocument(i,s);t=new nD([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Xl(n,r.document);t=new nD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new hOe(i,s);t=new Iee(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ht.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ht.min():o.readTime?Ei(o.readTime):ht.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=b2(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=QS(l)?{documents:Nee(s,l)}:{query:rD(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=See(s,o.resumeToken);const c=_2(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ht.min())>0){a.readTime=I_(s,o.snapshotVersion.toTimestamp());const c=_2(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function wOe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=b2(this.serializer),t.removeTarget=e,this.a_(t)}}class hFe extends xte{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return lt(!!e.streamToken),this.lastStreamToken=e.streamToken,lt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function IOe(n,e){return n&&n.length>0?(lt(void 0!==e),n.map(t=>function(i,s){let o=Ei(i.updateTime?i.updateTime:s);return o.isEqual(ht.min())&&(o=Ei(s)),new cOe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=b2(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_I(this.serializer,r))};this.a_(t)}}class fFe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Pe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,v2(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(ve.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,v2(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ve.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pFe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bi(t),this.D_=!1):Oe("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class mFe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,O.A)(function*(){var l;Nd(o)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,O.A)(function*(u){const d=$e(u);d.L_.add(4),yield R_(d),d.q_.set("Unknown"),d.L_.delete(4),yield AI(d)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.q_=new pFe(r,i)}}function AI(n){return W2.apply(this,arguments)}function W2(){return(W2=(0,O.A)(function*(n){if(Nd(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function R_(n){return G2.apply(this,arguments)}function G2(){return(G2=(0,O.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function vD(n,e){const t=$e(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Q2(t)?K2(t):k_(t).r_()&&q2(t,e))}function M_(n,e){const t=$e(n),r=k_(t);t.N_.delete(e),r.r_()&&Rte(t,e),0===t.N_.size&&(r.r_()?r.o_():Nd(t)&&t.q_.set("Unknown"))}function q2(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}k_(n).A_(e)}function Rte(n,e){n.Q_.xe(e),k_(n).R_(e)}function K2(n){n.Q_=new pOe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),k_(n).start(),n.q_.v_()}function Q2(n){return Nd(n)&&!k_(n).n_()&&n.N_.size>0}function Nd(n){return 0===$e(n).L_.size}function Mte(n){n.Q_=void 0}function gFe(n){return Y2.apply(this,arguments)}function Y2(){return(Y2=(0,O.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function _Fe(n){return X2.apply(this,arguments)}function X2(){return(X2=(0,O.A)(function*(n){n.N_.forEach((e,t)=>{q2(n,e)})})).apply(this,arguments)}function yFe(n,e){return Z2.apply(this,arguments)}function Z2(){return(Z2=(0,O.A)(function*(n,e){Mte(n),Q2(n)?(n.q_.M_(e),K2(n)):n.q_.set("Unknown")})).apply(this,arguments)}function vFe(n,e,t){return J2.apply(this,arguments)}function J2(){return J2=(0,O.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof wee&&2===e.state&&e.cause)try{yield(r=(0,O.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bD(n,r)}else if(e instanceof nD?n.Q_.Ke(e):e instanceof Iee?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ht.min()))try{const r=yield vte(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(si.EMPTY_BYTE_STRING,u.snapshotVersion)),Rte(s,l);const d=new tu(u.target,l,c,u.sequenceNumber);q2(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield bD(n,r)}var r}),J2.apply(this,arguments)}function bD(n,e,t){return eB.apply(this,arguments)}function eB(){return(eB=(0,O.A)(function*(n,e,t){if(!wd(e))throw e;n.L_.add(1),yield R_(n),n.q_.set("Offline"),t||(t=()=>vte(n.localStore)),n.asyncQueue.enqueueRetryable((0,O.A)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield AI(n)}))})).apply(this,arguments)}function Pte(n,e){return e().catch(t=>bD(n,t,e))}function P_(n){return tB.apply(this,arguments)}function tB(){return(tB=(0,O.A)(function*(n){const e=$e(n),t=Od(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bFe(e);)try{const i=yield iFe(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,EFe(e,i)}catch(i){yield bD(e,i)}kte(e)&&Nte(e)})).apply(this,arguments)}function bFe(n){return Nd(n)&&n.O_.length<10}function EFe(n,e){n.O_.push(e);const t=Od(n);t.r_()&&t.V_&&t.m_(e.mutations)}function kte(n){return Nd(n)&&!Od(n).n_()&&n.O_.length>0}function Nte(n){Od(n).start()}function IFe(n){return nB.apply(this,arguments)}function nB(){return(nB=(0,O.A)(function*(n){Od(n).p_()})).apply(this,arguments)}function wFe(n){return rB.apply(this,arguments)}function rB(){return(rB=(0,O.A)(function*(n){const e=Od(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function CFe(n,e,t){return iB.apply(this,arguments)}function iB(){return(iB=(0,O.A)(function*(n,e,t){const r=n.O_.shift(),i=p2.from(r,e,t);yield Pte(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield P_(n)})).apply(this,arguments)}function TFe(n,e){return sB.apply(this,arguments)}function sB(){return sB=(0,O.A)(function*(n,e){var t;e&&Od(n).V_&&(yield(t=(0,O.A)(function*(i,s){if(_ee(a=s.code)&&a!==ve.ABORTED){const o=i.O_.shift();Od(i).s_(),yield Pte(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield P_(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),kte(n)&&Nte(n)}),sB.apply(this,arguments)}function Ote(n,e){return oB.apply(this,arguments)}function oB(){return(oB=(0,O.A)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Nd(t);t.L_.add(3),yield R_(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield AI(t)})).apply(this,arguments)}function aB(n,e){return lB.apply(this,arguments)}function lB(){return(lB=(0,O.A)(function*(n,e){const t=$e(n);e?(t.L_.delete(2),yield AI(t)):e||(t.L_.add(2),yield R_(t),t.q_.set("Unknown"))})).apply(this,arguments)}function k_(n){return n.K_||(n.K_=function(t,r,i){const s=$e(t);return s.w_(),new dFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:gFe.bind(null,n),Ro:_Fe.bind(null,n),mo:yFe.bind(null,n),d_:vFe.bind(null,n)}),n.B_.push(function(){var e=(0,O.A)(function*(t){t?(n.K_.s_(),Q2(n)?K2(n):n.q_.set("Unknown")):(yield n.K_.stop(),Mte(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Od(n){return n.U_||(n.U_=function(t,r,i){const s=$e(t);return s.w_(),new hFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:IFe.bind(null,n),mo:TFe.bind(null,n),f_:wFe.bind(null,n),g_:CFe.bind(null,n)}),n.B_.push(function(){var e=(0,O.A)(function*(t){t?(n.U_.s_(),yield P_(n)):(yield n.U_.stop(),n.O_.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class cB{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new cB(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N_(n,e){if(bi("AsyncQueue",`${e}: ${n}`),wd(n))return new Pe(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class O_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=cI(),this.sortedSet=new vr(this.comparator)}static emptySet(e){return new O_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof O_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new O_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Fte{constructor(){this.W_=new vr(Ke.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):it():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class F_{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new F_(e,t,O_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&aI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class AFe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class SFe{constructor(){this.queries=Lte(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=$e(t),s=i.queries;i.queries=Lte(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})}(this,new Pe(ve.ABORTED,"Firestore shutting down"))}}function Lte(){return new Jc(n=>ZJ(n),aI)}function uB(n,e){return dB.apply(this,arguments)}function dB(){return(dB=(0,O.A)(function*(n,e){const t=$e(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new AFe,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=N_(o,`Initialization of query '${__(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&pB(t)})).apply(this,arguments)}function hB(n,e){return fB.apply(this,arguments)}function fB(){return(fB=(0,O.A)(function*(n,e){const t=$e(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function DFe(n,e){const t=$e(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&pB(t)}function xFe(n,e,t){const r=$e(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function pB(n){n.Y_.forEach(e=>{e.next()})}var mB,Vte;(Vte=mB||(mB={})).ea="default",Vte.Cache="cache";class gB{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new F_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=F_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==mB.Cache}}class RFe{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class Bte{constructor(e){this.serializer=e}Es(e){return Xl(this.serializer,e)}ds(e){return e.metadata.exists?kee(this.serializer,e.document,!1):xr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ei(e)}}class MFe{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ute(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=mn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new Bte(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Kt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,O.A)(function*(){const t=yield function sFe(n,e,t,r){return L2.apply(this,arguments)}(e.localStore,new Bte(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield oFe(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function Ute(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jte{constructor(e){this.key=e}}class zte{constructor(e){this.key=e}}class Hte{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Kt(),this.mutatedKeys=Kt(),this.Aa=eee(e),this.Ra=new O_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Fte,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const m=i.get(u),y=lI(this.query,d)?d:null,b=!!m&&this.mutatedKeys.has(m.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?b!==T&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(l||c)&&(a=!0)),M&&(y?(o=o.add(y),s=T?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(y,b){const T=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return T(y)-T(b)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],l=0===this.da.size&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,0!==o.length||c?{snapshot:new F_(this.query,e.Ra,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Fte,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Kt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new zte(r))}),this.da.forEach(r=>{e.has(r)||t.push(new jte(r))}),t}ba(e){this.Ta=e.Ts,this.da=Kt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return F_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class PFe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kFe{constructor(e){this.key=e,this.va=!1}}class NFe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Jc(a=>ZJ(a),aI),this.Ma=new Map,this.xa=new Set,this.Oa=new vr(Ke.comparator),this.Na=new Map,this.La=new x2,this.Ba={},this.ka=new Map,this.qa=Jf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function OFe(n,e){return _B.apply(this,arguments)}function _B(){return(_B=(0,O.A)(function*(n,e,t=!0){const r=ED(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield $te(r,e,t,!0),i})).apply(this,arguments)}function FFe(n,e){return yB.apply(this,arguments)}function yB(){return(yB=(0,O.A)(function*(n,e){const t=ED(n);yield $te(t,e,!0,!1)})).apply(this,arguments)}function $te(n,e,t,r){return vB.apply(this,arguments)}function vB(){return(vB=(0,O.A)(function*(n,e,t,r){const i=yield D_(n.localStore,Ps(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield bB(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&vD(n.remoteStore,i),a})).apply(this,arguments)}function bB(n,e,t,r,i){return EB.apply(this,arguments)}function EB(){return EB=(0,O.A)(function*(n,e,t,r,i){n.Ka=(d,m,y)=>{return(b=(0,O.A)(function*(M,B,V,Q){let be=B.view.ma(V);be.ns&&(be=yield pD(M.localStore,B.query,!1).then(({documents:L})=>B.view.ma(L,be)));const Be=Q&&Q.targetChanges.get(B.targetId),je=Q&&null!=Q.targetMismatches.get(B.targetId),H=B.view.applyChanges(be,M.isPrimaryClient,Be,je);return PB(M,B.targetId,H.wa),H.snapshot}),function T(M,B,V,Q){return b.apply(this,arguments)})(n,d,m,y);var b};const s=yield pD(n.localStore,e,!0),o=new Hte(e,s.Ts),a=o.ma(s.documents),l=mI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);PB(n,t,c.wa);const u=new PFe(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),EB.apply(this,arguments)}function LFe(n,e,t){return IB.apply(this,arguments)}function IB(){return(IB=(0,O.A)(function*(n,e,t){const r=$e(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!aI(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield x_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&M_(r.remoteStore,i.targetId),L_(r,i.targetId)}).catch(Id))):(L_(r,i.targetId),yield x_(r.localStore,i.targetId,!0))})).apply(this,arguments)}function VFe(n,e){return wB.apply(this,arguments)}function wB(){return(wB=(0,O.A)(function*(n,e){const t=$e(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),M_(t.remoteStore,r.targetId))})).apply(this,arguments)}function CB(){return(CB=(0,O.A)(function*(n,e,t){const r=HB(n);try{const i=yield function(o,a){const l=$e(o),c=Vr.now(),u=a.reduce((y,b)=>y.add(b.key),Kt());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=xo(),T=Kt();return l.cs.getEntries(y,u).next(M=>{b=M,b.forEach((B,V)=>{V.isValidDocument()||(T=T.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(M=>{d=M;const B=[];for(const V of a){const Q=dOe(V,d.get(V.key).overlayedDocument);null!=Q&&B.push(new eu(V.key,Q,FJ(Q.value.mapValue),Ur.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,B,a)}).next(M=>{m=M;const B=M.applyToLocalDocumentSet(d,T);return l.documentOverlayCache.saveOverlays(y,M.batchId,B)})}).then(()=>({batchId:m.batchId,changes:nee(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new vr(Nt)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),yield nu(r,i.changes),yield P_(r.remoteStore)}catch(i){const s=N_(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function Wte(n,e){return TB.apply(this,arguments)}function TB(){return(TB=(0,O.A)(function*(n,e){const t=$e(n);try{const r=yield function rFe(n,e){const t=$e(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((u,d)=>{const m=i.get(d);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,d)));let y=m.withSequenceNumber(s.currentSequenceNumber);var T,M,B;null!==e.targetMismatches.get(d)?y=y.withResumeToken(si.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,r)),i=i.insert(d,y),M=y,B=u,(0===(T=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,y))});let l=xo(),c=Kt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(bte(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(ht.min())){const u=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return le.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?lt(o.va):i.removedDocuments.size>0&&(lt(o.va),o.va=!1))}),yield nu(t,r,e)}catch(r){yield Id(r)}})).apply(this,arguments)}function Gte(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=$e(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const m of d.j_)m.Z_(a)&&(c=!0)}),c&&pB(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UFe(n,e,t){return AB.apply(this,arguments)}function AB(){return(AB=(0,O.A)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new vr(Ke.comparator);o=o.insert(s,xr.newNoDocument(s,ht.min()));const a=Kt().add(s),l=new pI(ht.min(),new Map,new vr(Nt),o,a);yield Wte(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),kB(r)}else yield x_(r.localStore,e,!1).then(()=>L_(r,e,t)).catch(Id)})).apply(this,arguments)}function jFe(n,e){return SB.apply(this,arguments)}function SB(){return(SB=(0,O.A)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const i=yield function nFe(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,m=d.keys();let y=le.resolve();return m.forEach(b=>{y=y.next(()=>u.getEntry(l,b)).next(T=>{const M=c.docVersions.get(b);lt(null!==M),T.version.compareTo(M)<0&&(d.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),u.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Kt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);MB(t,r,null),RB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nu(t,i)}catch(i){yield Id(i)}})).apply(this,arguments)}function zFe(n,e,t){return DB.apply(this,arguments)}function DB(){return(DB=(0,O.A)(function*(n,e,t){const r=$e(n);try{const i=yield function(o,a){const l=$e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(lt(null!==d),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);MB(r,e,t),RB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nu(r,i)}catch(i){yield Id(i)}})).apply(this,arguments)}function xB(){return(xB=(0,O.A)(function*(n,e){const t=$e(n);Nd(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=$e(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=N_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function RB(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function MB(n,e,t){const r=$e(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function L_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||qte(n,r)})}function qte(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(M_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),kB(n))}function PB(n,e,t){for(const r of t)r instanceof jte?(n.La.addReference(r.key,e),$Fe(n,r)):r instanceof zte?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||qte(n,r.key)):it()}function $Fe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.xa.add(r),kB(n))}function kB(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ke(mn.fromString(e)),r=n.qa.next();n.Na.set(r,new kFe(t)),n.Oa=n.Oa.insert(t,r),vD(n.remoteStore,new tu(Ps(m_(t.path)),r,"TargetPurposeLimboResolution",ea.oe))}}function nu(n,e,t){return NB.apply(this,arguments)}function NB(){return NB=(0,O.A)(function*(n,e,t){const r=$e(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:null===(u=t?.targetChanges.get(l.targetId))||void 0===u?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=N2.Wi(l.targetId,c);s.push(d)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,O.A)(function*(c,u){const d=$e(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>le.forEach(u,y=>le.forEach(y.$i,b=>d.persistence.referenceDelegate.addReference(m,y.targetId,b)).next(()=>le.forEach(y.Ui,b=>d.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))}catch(m){if(!wd(m))throw m;Oe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const y=m.targetId;if(!m.fromCache){const b=d.os.get(y),M=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);d.os=d.os.insert(y,M)}}}),function l(c,u){return a.apply(this,arguments)})(r.localStore,s))}),NB.apply(this,arguments)}function WFe(n,e){return OB.apply(this,arguments)}function OB(){return(OB=(0,O.A)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield yte(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(l=>{l.reject(new Pe(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nu(t,r.hs)}var s})).apply(this,arguments)}function GFe(n,e){const t=$e(n),r=t.Na.get(e);if(r&&r.va)return Kt().add(r.key);{let i=Kt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function qFe(n,e){return FB.apply(this,arguments)}function FB(){return(FB=(0,O.A)(function*(n,e){const t=$e(n),r=yield pD(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&PB(t,e.targetId,i.wa),i})).apply(this,arguments)}function KFe(n,e){return LB.apply(this,arguments)}function LB(){return(LB=(0,O.A)(function*(n,e){const t=$e(n);return Ite(t.localStore,e).then(r=>nu(t,r))})).apply(this,arguments)}function QFe(n,e,t,r){return VB.apply(this,arguments)}function VB(){return(VB=(0,O.A)(function*(n,e,t,r){const i=$e(n),s=yield function(a,l){const c=$e(a),u=$e(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Mn(d,l).next(m=>m?c.localDocuments.getDocuments(d,m):le.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield P_(i.remoteStore):"acknowledged"===t||"rejected"===t?(MB(i,e,r||null),RB(i,e),l=e,$e($e(i.localStore).mutationQueue).On(l)):it(),yield nu(i,s)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function BB(){return(BB=(0,O.A)(function*(n,e){const t=$e(n);if(ED(t),HB(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Kte(t,r.toArray());t.Qa=!0,yield aB(t.remoteStore,!0);for(const s of i)vD(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(L_(t,o),x_(t.localStore,o,!0))),M_(t.remoteStore,o)}),yield i,yield Kte(t,r),function(o){const a=$e(o);a.Na.forEach((l,c)=>{M_(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new vr(Ke.comparator)}(t),t.Qa=!1,yield aB(t.remoteStore,!1)}})).apply(this,arguments)}function Kte(n,e,t){return UB.apply(this,arguments)}function UB(){return(UB=(0,O.A)(function*(n,e,t){const r=$e(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&0!==l.length){a=yield D_(r.localStore,Ps(l[0]));for(const c of l){const u=r.Fa.get(c),d=yield qFe(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=yield Ete(r.localStore,o);a=yield D_(r.localStore,c),yield bB(r,Qte(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function Qte(n){return KJ(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function XFe(n){return t=$e(n).localStore,$e($e(t).persistence).Qi();var t}function ZFe(n,e,t,r){return jB.apply(this,arguments)}function jB(){return(jB=(0,O.A)(function*(n,e,t,r){const i=$e(n);if(i.Qa)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield Ite(i.localStore,JJ(s[0])),a=pI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,si.EMPTY_BYTE_STRING);yield nu(i,o,a);break}case"rejected":yield x_(i.localStore,e,!0),L_(i,e,r);break;default:it()}})).apply(this,arguments)}function JFe(n,e,t){return zB.apply(this,arguments)}function zB(){return(zB=(0,O.A)(function*(n,e,t){const r=ED(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const s=yield Ete(r.localStore,i),o=yield D_(r.localStore,s);yield bB(r,Qte(s),o.targetId,!1,o.resumeToken),vD(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield x_(r.localStore,i,!1).then(()=>{M_(r.remoteStore,i),L_(r,i)}).catch(Id))}})).apply(this,arguments)}function ED(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wte.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GFe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UFe.bind(null,e),e.Ca.d_=DFe.bind(null,e.eventManager),e.Ca.$a=xFe.bind(null,e.eventManager),e}function HB(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jFe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zFe.bind(null,e),e}let V_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,O.A)(function*(){r.serializer=TI(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return _te(this.persistence,new gte,t.initialUser,this.serializer)}Ga(t){return new R2(dD.Zr,this.serializer)}Wa(t){return new Ate}terminate(){var t=this;return(0,O.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class $B extends V_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,O.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield HB(r.Ja.syncEngine),yield P_(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return _te(this.persistence,new gte,e.initialUser,this.serializer)}ja(e,t){return new ate(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new I1e(t,this.persistence);return new E1e(e.asyncQueue,r)}Ga(e){const t=k2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new P2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Dte(),yD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ate}}class Yte extends $B{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,O.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof z2&&(r.sharedClientState.syncEngine={no:QFe.bind(null,i),ro:ZFe.bind(null,i),io:JFe.bind(null,i),Qi:XFe.bind(null,i),eo:KFe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,O.A)(function*(o){yield function YFe(n,e){return BB.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=Dte();if(!z2.D(t))throw new Pe(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=k2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new z2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let B_=(()=>{class n{initialize(t,r){var i=this;return(0,O.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>Gte(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=WFe.bind(null,i.syncEngine),yield aB(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new SFe}createDatastore(t){const r=TI(t.databaseInfo.databaseId),i=new uFe(t.databaseInfo);return new fFe(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>Gte(this.syncEngine,r,0),l=Ste.D()?new Ste:new aFe,new mFe(i,s,o,a,l);var i,s,o,a,l}createSyncEngine(t,r){return function(s,o,a,l,c,u,d){const m=new NFe(s,o,a,l,c,u);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,O.A)(function*(){var r,i,s;yield(s=(0,O.A)(function*(a){const l=$e(a);Oe("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield R_(l),l.k_.shutdown(),l.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function Xte(n,e=10240){let t=0;return{read:()=>(0,O.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,O.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ID{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class nLe{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ts,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,O.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,O.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,O.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new RFe(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,O.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,O.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,O.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rLe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,O.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Pe(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,O.A)(function*(o,a){const l=$e(o),c={documents:a.map(y=>gI(l.serializer,y))},u=yield l.Lo("BatchGetDocuments",l.serializer.databaseId,mn.emptyPath(),c,a.length),d=new Map;u.forEach(y=>{const b=function bOe(n,e){return"found"in e?function(r,i){lt(!!i.found);const s=Xl(r,i.found.name),o=Ei(i.found.updateTime),a=i.found.createTime?Ei(i.found.createTime):ht.min(),l=new hs({mapValue:{fields:i.found.fields}});return xr.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){lt(!!i.missing),lt(!!i.readTime);const s=Xl(r,i.missing),o=Ei(i.readTime);return xr.newNoDocument(s,o)}(n,e):it()}(l.serializer,y);d.set(b.key.toString(),b)});const m=[];return a.forEach(y=>{const b=d.get(y.toString());lt(!!b),m.push(b)}),m}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new E_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,O.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ke.fromPath(i);e.mutations.push(new h2(s,e.precondition(s)))}),yield(r=(0,O.A)(function*(s,o){const a=$e(s),l={writes:o.map(c=>_I(a.serializer,c))};yield a.Mo("Commit",a.serializer.databaseId,mn.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?Ur.exists(!1):Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new Pe(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iLe{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new $2(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,O.A)(function*(){const t=new rLe(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!JE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!_ee(t)}return!1}}class sLe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=es.UNAUTHENTICATED,this.clientId=lJ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,O.A)(function*(l){Oe("FirestoreClient","Received user=",l.uid),yield o.authCredentialListener(l),o.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Oe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,O.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=N_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function WB(n,e){return GB.apply(this,arguments)}function GB(){return GB=(0,O.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,O.A)(function*(s){r.isEqual(s)||(yield yte(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),GB.apply(this,arguments)}function Zte(n,e){return qB.apply(this,arguments)}function qB(){return(qB=(0,O.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield KB(n);Oe("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ote(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ote(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function KB(n){return QB.apply(this,arguments)}function QB(){return(QB=(0,O.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield WB(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Zo("Error using user provided cache. Falling back to memory cache: "+e),yield WB(n,new V_)}}else Oe("FirestoreClient","Using default OfflineComponentProvider"),yield WB(n,new V_);var i;return n._offlineComponents})).apply(this,arguments)}function wD(n){return YB.apply(this,arguments)}function YB(){return(YB=(0,O.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zte(n,n._uninitializedComponentsProvider._online)):(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield Zte(n,new B_))),n._onlineComponents})).apply(this,arguments)}function Jte(n){return KB(n).then(e=>e.persistence)}function U_(n){return KB(n).then(e=>e.localStore)}function ene(n){return wD(n).then(e=>e.remoteStore)}function XB(n){return wD(n).then(e=>e.syncEngine)}function j_(n){return ZB.apply(this,arguments)}function ZB(){return(ZB=(0,O.A)(function*(n){const e=yield wD(n),t=e.eventManager;return t.onListen=OFe.bind(null,e.syncEngine),t.onUnlisten=LFe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FFe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VFe.bind(null,e.syncEngine),t})).apply(this,arguments)}function nne(n,e,t={}){const r=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function(s,o,a,l,c){const u=new ID({next:m=>{u.Za(),o.enqueueAndForget(()=>hB(s,d));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Pe(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&"server"===l.source?c.reject(new Pe(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new gB(m_(a.path),u,{includeMetadataChanges:!0,_a:!0});return uB(s,d)}(yield j_(n),n.asyncQueue,e,t,r)})),r.promise}function rne(n,e,t={}){const r=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function(s,o,a,l,c){const u=new ID({next:m=>{u.Za(),o.enqueueAndForget(()=>hB(s,d)),m.fromCache&&"server"===l.source?c.reject(new Pe(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new gB(a,u,{includeMetadataChanges:!0,_a:!0});return uB(s,d)}(yield j_(n),n.asyncQueue,e,t,r)})),r.promise}function ine(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const sne=new Map;function JB(n,e,t){if(!t)throw new Pe(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function one(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ane(n){if(!Ke.isDocumentKey(n))throw new Pe(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lne(n){if(Ke.isDocumentKey(n))throw new Pe(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":it()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=CD(n);throw new Pe(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cne(n,e){if(e<=0)throw new Pe(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class une{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}one("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ine(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Pe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class SI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new une({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new une(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new c1e;switch(r.type){case"firstParty":return new f1e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,O.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=sne.get(t);r&&(Oe("ComponentProvider","Removing Datastore"),sne.delete(t),r.terminate())}(this),Promise.resolve()}}class fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class Rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}}class Zl extends fs{constructor(e,t,r){super(e,t,m_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new Ke(e))}withConverter(e){return new Zl(this.firestore,e,this._path)}}function hne(n,e,...t){if(n=(0,N.Ku)(n),JB("collection","path",e),n instanceof SI){const r=mn.fromString(e,...t);return lne(r),new Zl(n,null,r)}{if(!(n instanceof Rr||n instanceof Zl))throw new Pe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return lne(r),new Zl(n.firestore,null,r)}}function TD(n,e,...t){if(n=(0,N.Ku)(n),1===arguments.length&&(e=lJ.newId()),JB("doc","path",e),n instanceof SI){const r=mn.fromString(e,...t);return ane(r),new Rr(n,null,new Ke(r))}{if(!(n instanceof Rr||n instanceof Zl))throw new Pe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return ane(r),new Rr(n.firestore,n instanceof Zl?n.converter:null,new Ke(r))}}function fne(n,e){return n=(0,N.Ku)(n),e=(0,N.Ku)(e),(n instanceof Rr||n instanceof Zl)&&(e instanceof Rr||e instanceof Zl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function eU(n,e){return n=(0,N.Ku)(n),e=(0,N.Ku)(e),n instanceof fs&&e instanceof fs&&n.firestore===e.firestore&&aI(n._query,e._query)&&n.converter===e.converter}class pne{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $2(this,"async_queue_retry"),this.Vu=()=>{const r=yD();r&&Oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=yD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=yD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ts;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,O.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!wd(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,bi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=cB.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&it()}verifyOperationInProgress(){}wu(){var e=this;return(0,O.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function tU(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class yLe{constructor(){this._progressObserver={},this._taskCompletionResolver=new ts,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class lr extends SI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new pne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,O.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new pne(t),e._firestoreClient=void 0,yield t}})()}}function jr(n){if(n._terminated)throw new Pe(ve.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mne(n),n._firestoreClient}function mne(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $1e(n._databaseId,l,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,ine(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new sLe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function nU(){return(nU=(0,O.A)(function*(n){Zo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();gne(n,B_.provider,{build:t=>new Yte(t,e.cacheSizeBytes)})})).apply(this,arguments)}function gne(n,e,t){if((n=ln(n,lr))._firestoreClient||n._terminated)throw new Pe(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Pe(ve.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},mne(n)}class Jl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jl(si.fromBase64String(e))}catch(t){throw new Pe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jl(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ru{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tp{constructor(e){this._methodName=e}}class AD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}class SD{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const xLe=/^__.*__$/;class RLe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new b_(e,this.data,t,this.fieldTransforms)}}class _ne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yne(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class DD{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new DD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return MD(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(yne(this.Cu)&&xLe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class MLe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||TI(e)}Qu(e,t,r,i=!1){return new DD({Cu:e,methodName:t,qu:r,path:Dr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function np(n){const e=n._freezeSettings(),t=TI(n._databaseId);return new MLe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xD(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);cU("Data must be an object, but it was:",o,r);const a=Ene(r,o);let l,c;if(s.merge)l=new Do(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const m=RI(e,d,t);if(!o.contains(m))throw new Pe(ve.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wne(u,m)||u.push(m)}l=new Do(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new RLe(new hs(a),l,c)}class xI extends tp{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xI}}function vne(n,e,t){return new DD({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rU extends tp{_toFieldTransform(e){return new dI(e.path,new y_)}isEqual(e){return e instanceof rU}}class iU extends tp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=vne(this,e,!0),r=this.Ku.map(s=>rp(s,t)),i=new Gf(r);return new dI(e.path,i)}isEqual(e){return e instanceof iU&&(0,N.bD)(this.Ku,e.Ku)}}class sU extends tp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=vne(this,e,!0),r=this.Ku.map(s=>rp(s,t)),i=new qf(r);return new dI(e.path,i)}isEqual(e){return e instanceof sU&&(0,N.bD)(this.Ku,e.Ku)}}class oU extends tp{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new v_(e.serializer,see(e.serializer,this.$u));return new dI(e.path,t)}isEqual(e){return e instanceof oU&&this.$u===e.$u}}function aU(n,e,t,r){const i=n.Qu(1,e,t);cU("Data must be an object, but it was:",i,r);const s=[],o=hs.empty();Cd(r,(l,c)=>{const u=RD(e,l,t);c=(0,N.Ku)(c);const d=i.Nu(u);if(c instanceof xI)s.push(u);else{const m=rp(c,d);null!=m&&(s.push(u),o.set(u,m))}});const a=new Do(s);return new _ne(o,a,i.fieldTransforms)}function lU(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[RI(e,r,t)],l=[i];if(s.length%2!=0)throw new Pe(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(RI(e,s[m])),l.push(s[m+1]);const c=[],u=hs.empty();for(let m=a.length-1;m>=0;--m)if(!wne(c,a[m])){const y=a[m];let b=l[m];b=(0,N.Ku)(b);const T=o.Nu(y);if(b instanceof xI)c.push(y);else{const M=rp(b,T);null!=M&&(c.push(y),u.set(y,M))}}const d=new Do(c);return new _ne(u,d,o.fieldTransforms)}function bne(n,e,t,r=!1){return rp(t,n.Qu(r?4:3,e))}function rp(n,e){if(Ine(n=(0,N.Ku)(n)))return cU("Unsupported field value:",e,n),Ene(n,e);if(n instanceof tp)return function(r,i){if(!yne(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=rp(a,i.Lu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,N.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return see(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Vr.fromDate(r);return{timestampValue:I_(i.serializer,s)}}if(r instanceof Vr){const s=new Vr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:I_(i.serializer,s)}}if(r instanceof AD)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jl)return{bytesValue:See(i.serializer,r._byteString)};if(r instanceof Rr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:y2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof SD)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(l=>{if("number"!=typeof l)throw a.Bu("VectorValues must only contain numeric values.");return d2(a.serializer,l)})}}}}};var a;throw i.Bu(`Unsupported field value: ${CD(r)}`)}(n,e)}function Ene(n,e){const t={};return TJ(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cd(n,(r,i)=>{const s=rp(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Ine(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vr||n instanceof AD||n instanceof Jl||n instanceof Rr||n instanceof tp||n instanceof SD)}function cU(n,e,t){if(!Ine(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=CD(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function RI(n,e,t){if((e=(0,N.Ku)(e))instanceof ru)return e._internalPath;if("string"==typeof e)return RD(n,e);throw MD("Field path arguments must be of type string or ",n,!1,void 0,t)}const PLe=new RegExp("[~\\*/\\[\\]]");function RD(n,e,t){if(e.search(PLe)>=0)throw MD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ru(...e.split("."))._internalPath}catch{throw MD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function MD(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Pe(ve.INVALID_ARGUMENT,a+n+l)}function wne(n,e){return n.some(t=>t.isEqual(e))}class MI{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kLe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(PD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kLe extends MI{data(){return super.data()}}function PD(n,e){return"string"==typeof e?RD(n,e):e instanceof ru?e._internalPath:e._delegate._internalPath}function Cne(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uU{}class PI extends uU{}function Fd(n,e,...t){let r=[];e instanceof uU&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof z_).length,a=s.filter(l=>l instanceof kI).length;if(o>1||o>0&&a>0)throw new Pe(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class kI extends PI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new kI(e,t,r)}_apply(e){const t=this._parse(e);return Dne(e._query,t),new fs(e.firestore,e.converter,c2(e._query,t))}_parse(e){const t=np(e.firestore);return function(s,o,a,l,c,u,d){let m;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Pe(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){Sne(d,u);const y=[];for(const b of d)y.push(Ane(l,s,b));m={arrayValue:{values:y}}}else m=Ane(l,s,d)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||Sne(d,u),m=bne(a,"where",d,"in"===u||"not-in"===u);return gn.create(c,u,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class z_ extends uU{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new z_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Dne(o,l),o=c2(o,l)}(e._query,t),new fs(e.firestore,e.converter,c2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dU extends PI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dU(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Pe(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sI(s,o)}(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class kD extends PI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new kD(e,t,r)}_apply(e){return new fs(e.firestore,e.converter,XS(e._query,this._limit,this._limitType))}}class ND extends PI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ND(e,t,r)}_apply(e){const t=Tne(e,this.type,this._docOrFields,this._inclusive);return new fs(e.firestore,e.converter,(s=t,new Zc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class OD extends PI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new OD(e,t,r)}_apply(e){const t=Tne(e,this.type,this._docOrFields,this._inclusive);return new fs(e.firestore,e.converter,(s=t,new Zc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function Tne(n,e,t,r){if(t[0]=(0,N.Ku)(t[0]),t[0]instanceof MI)return function(s,o,a,l,c){if(!l)throw new Pe(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const d of g_(s))if(d.field.isKeyField())u.push($f(o,l.key));else{const m=l.data.field(d.field);if(HS(m))throw new Pe(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=d.field.canonicalString();throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}u.push(m)}return new xd(u,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=np(n.firestore);return function(o,a,l,c,u,d){const m=o.explicitOrderBy;if(u.length>m.length)throw new Pe(ve.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let b=0;b<u.length;b++){const T=u[b];if(m[b].field.isKeyField()){if("string"!=typeof T)throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!l2(o)&&-1!==T.indexOf("/"))throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const M=o.path.child(mn.fromString(T));if(!Ke.isDocumentKey(M))throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const B=new Ke(M);y.push($f(a,B))}else{const M=bne(l,c,T);y.push(M)}}return new xd(y,d)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Ane(n,e,t){if("string"==typeof(t=(0,N.Ku)(t))){if(""===t)throw new Pe(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!l2(e)&&-1!==t.indexOf("/"))throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Ke.isDocumentKey(r))throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $f(n,new Ke(r))}if(t instanceof Rr)return $f(n,t._key);throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CD(t)}.`)}function Sne(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dne(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(ve.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hU{convertValue(e,t="none"){switch(Sd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Cd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Br(o.doubleValue));return new SD(s)}convertGeoPoint(e){return new AD(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$S(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tI(e));default:return null}}convertTimestamp(e){const t=Yc(e);return new Vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);lt(Bee(r));const i=new Td(r.get(1),r.get(3)),s=new Ke(r.popFirst(5));return i.isEqual(t)||bi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function FD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class zLe extends hU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,t)}}class ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iu extends MI{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new NI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(PD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class NI extends iu{data(e={}){return super.data(e)}}class Ld{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ip(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new NI(this._firestore,this._userDataWriter,r.key,r,new ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new NI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ip(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new NI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ip(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:$Le(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $Le(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function Rne(n,e){return n instanceof iu&&e instanceof iu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ld&&e instanceof Ld&&n._firestore===e._firestore&&eU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Vd extends hU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,t)}}function Mne(n,e,t){n=ln(n,Rr);const r=ln(n.firestore,lr),i=FD(n.converter,e,t);return H_(r,[xD(np(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ur.none())])}function Pne(n,e,t,...r){n=ln(n,Rr);const i=ln(n.firestore,lr),s=np(i);let o;return o="string"==typeof(e=(0,N.Ku)(e))||e instanceof ru?lU(s,"updateDoc",n._key,e,t,r):aU(s,"updateDoc",n._key,e),H_(i,[o.toMutation(n._key,Ur.exists(!0))])}function kne(n,...e){var t,r,i;n=(0,N.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||tU(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(tU(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let l,c,u;if(n instanceof Rr)c=ln(n.firestore,lr),u=m_(n._key.path),l={next:d=>{e[o]&&e[o](fU(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=ln(n,fs);c=ln(d.firestore,lr),u=d._query;const m=new Vd(c);l={next:y=>{e[o]&&e[o](new Ld(c,m,d,y))},error:e[o+1],complete:e[o+2]},Cne(n._query)}return function(m,y,b,T){const M=new ID(T),B=new gB(y,M,b);return m.asyncQueue.enqueueAndForget((0,O.A)(function*(){return uB(yield j_(m),B)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget((0,O.A)(function*(){return hB(yield j_(m),B)}))}}(jr(c),u,a,l)}function H_(n,e){return function(r,i){const s=new ts;return r.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function BFe(n,e,t){return CB.apply(this,arguments)}(yield XB(r),i,s)})),s.promise}(jr(n),e)}function fU(n,e,t){const r=t.docs.get(e._key),i=new Vd(n);return new iu(n,i,e._key,r,new ip(t.hasPendingWrites,t.fromCache),e.converter)}const lVe={maxAttempts:5};class Nne{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=np(e)}set(e,t,r){this._verifyNotCommitted();const i=Bd(e,this._firestore),s=FD(i.converter,t,r),o=xD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Bd(e,this._firestore);let o;return o="string"==typeof(t=(0,N.Ku)(t))||t instanceof ru?lU(this._dataReader,"WriteBatch.update",s._key,t,r,i):aU(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bd(e,this._firestore);return this._mutations=this._mutations.concat(new E_(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bd(n,e){if((n=(0,N.Ku)(n)).firestore!==e)throw new Pe(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cVe extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=np(t)}get(t){const r=Bd(t,this._firestore),i=new zLe(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return it();const o=s[0];if(o.isFoundDocument())return new MI(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new MI(this._firestore,i,r._key,null,r.converter);throw it()})}set(t,r,i){const s=Bd(t,this._firestore),o=FD(s.converter,r,i),a=xD(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Bd(t,this._firestore);let a;return a="string"==typeof(r=(0,N.Ku)(r))||r instanceof ru?lU(this._dataReader,"Transaction.update",o._key,r,i,s):aU(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Bd(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bd(e,this._firestore),r=new Vd(this._firestore);return super.get(e).then(i=>new iu(this._firestore,r,t._key,i._document,new ip(!1,!1),t.converter))}}function mU(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vne(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function Bne(){if(!function z1e(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){a_=jn.SDK_VERSION,(0,jn._registerComponent)(new Qo.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new lr(new d1e(r.getProvider("auth-internal")),new p1e(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Pe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,jn.registerVersion)(sJ,"4.7.3",e),(0,jn.registerVersion)(sJ,"4.7.3","esm2017")}();class OI{constructor(e){this._delegate=e}static fromBase64String(e){return Bne(),new OI(Jl.fromBase64String(e))}static fromUint8Array(e){return Vne(),new OI(Jl.fromUint8Array(e))}toBase64(){return Bne(),this._delegate.toBase64()}toUint8Array(){return Vne(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gU(n){return function vVe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bVe{enableIndexedDbPersistence(e,t){return function bLe(n,e){Zo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return gne(n,B_.provider,{build:r=>new $B(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ELe(n){return nU.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function ILe(n){if(n._initialized&&!n._terminated)throw new Pe(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ts;return n._queue.enqueueAndForgetEvenWhileRestricted((0,O.A)(function*(){try{yield(t=(0,O.A)(function*(i){if(!ql.D())return Promise.resolve();const s=i+"main";yield ql.delete(s)}),function r(i){return t.apply(this,arguments)})(k2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Une{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Td||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function dne(n,e,t,r={}){var i;const s=(n=ln(n,SI))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=es.MOCK_USER;else{a=(0,N.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Pe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new es(c)}n._authCredentials=new u1e(new oJ(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function CLe(n){return function oLe(n){return n.asyncQueue.enqueue((0,O.A)(function*(){const e=yield Jte(n),t=yield ene(n);return e.setNetworkEnabled(!0),function(i){const s=$e(i);return s.L_.delete(0),AI(s)}(t)}))}(jr(n=ln(n,lr)))}(this._delegate)}disableNetwork(){return function TLe(n){return function aLe(n){return n.asyncQueue.enqueue((0,O.A)(function*(){const e=yield Jte(n),t=yield ene(n);return e.setNetworkEnabled(!1),(r=(0,O.A)(function*(s){const o=$e(s);o.L_.add(0),yield R_(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(jr(n=ln(n,lr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,one("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function wLe(n){return function(t){const r=new ts;return t.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function HFe(n,e){return xB.apply(this,arguments)}(yield XB(t),r)})),r.promise}(jr(n=ln(n,lr)))}(this._delegate)}onSnapshotsInSync(e){return function JLe(n,e){return function dLe(n,e){const t=new ID(e);return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return i=yield j_(n),s=t,$e(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return i=yield j_(n),s=t,void $e(i).Y_.delete(s);var i,s}))}}(jr(n=ln(n,lr)),tU(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $_(this,hne(this._delegate,e))}catch(t){throw Js(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ra(this,TD(this._delegate,e))}catch(t){throw Js(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,function _Le(n,e){if(n=ln(n,SI),JB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fs(n,null,(r=e,new Zc(mn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Js(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uVe(n,e,t){n=ln(n,lr);const r=Object.assign(Object.assign({},lVe),t);return function(s){if(s.maxAttempts<1)throw new Pe(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new ts;return s.asyncQueue.enqueueAndForget((0,O.A)(function*(){const c=yield function tne(n){return wD(n).then(e=>e.datastore)}(s);new iLe(s.asyncQueue,c,a,o,l).au()})),l.promise}(jr(n),i=>e(new cVe(n,i)),r)}(this._delegate,t=>e(new jne(this,t)))}batch(){return jr(this._delegate),new zne(new Nne(this._delegate,e=>H_(this._delegate,e)))}loadBundle(e){return function ALe(n,e){const t=jr(n=ln(n,lr)),r=new yLe;return function hLe(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?vee().encode(o):o,u=function(u,d){if(u instanceof Uint8Array)return Xte(u,d);if(u instanceof ArrayBuffer)return Xte(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new nLe(u,a);var u}(t,TI(e));n.asyncQueue.enqueueAndForget((0,O.A)(function*(){!function eLe(n,e,t){const r=$e(n);var i;(i=(0,O.A)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(b,T){const M=$e(b),B=Ei(T.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",V=>M.Gr.getBundleMetadata(V,T.id)).then(V=>!!V&&V.createTime.compareTo(B)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(b=c).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);l._updateProgress(Ute(c));const u=new MFe(c,o.localStore,a.serializer);let d=yield a.Ua();for(;d;){const y=yield u.la(d);y&&l._updateProgress(y),d=yield a.Ua()}const m=yield u.complete();return yield nu(o,m.Ia,void 0),yield function(b,T){const M=$e(b);return M.persistence.runTransaction("Save bundle","readwrite",B=>M.Gr.saveBundleMetadata(B,T))}(o.localStore,c),l._completeWith(m.progress),Promise.resolve(m.Pa)}catch(c){return Zo("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var b}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield XB(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function SLe(n,e){return function fLe(n,e){return n.asyncQueue.enqueue((0,O.A)(function*(){return function(r,i){const s=$e(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield U_(n),e)}))}(jr(n=ln(n,lr)),e).then(t=>t?new fs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new eo(this,t):null)}}class VD extends hU{constructor(e){super(),this.firestore=e}convertBytes(e){return new OI(new Jl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ra.forKey(t,this.firestore,null)}}class jne{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}get(e){const t=op(e);return this._delegate.get(t).then(r=>new FI(this._firestore,new iu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=op(e);return r?(mU("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=op(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=op(e);return this._delegate.delete(t),this}}class zne{constructor(e){this._delegate=e}set(e,t,r){const i=op(e);return r?(mU("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=op(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new NI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new LI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new sp(e,new VD(e),t),i.set(t,s)),s}}sp.INSTANCES=new WeakMap;class Ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ra(t,new Rr(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Ra(t,new Rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $_(this.firestore,hne(this._delegate,e))}catch(t){throw Js(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.Ku)(e))instanceof Rr&&fne(this._delegate,e)}set(e,t){t=mU("DocumentReference.set",t);try{return t?Mne(this._delegate,e,t):Mne(this._delegate,e)}catch(r){throw Js(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Pne(this._delegate,e):Pne(this._delegate,e,t,...r)}catch(i){throw Js(i,"updateDoc()","DocumentReference.update()")}}delete(){return function XLe(n){return H_(ln(n.firestore,lr),[new E_(n._key,Ur.none())])}(this._delegate)}onSnapshot(...e){const t=Hne(e),r=$ne(e,i=>new FI(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return kne(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function GLe(n){n=ln(n,Rr);const e=ln(n.firestore,lr),t=jr(e),r=new Vd(e);return function lLe(n,e){const t=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return(r=(0,O.A)(function*(s,o,a){try{const l=yield function(u,d){const m=$e(u);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,d))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Pe(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=N_(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield U_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new iu(e,r,n._key,i,new ip(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function qLe(n){n=ln(n,Rr);const e=ln(n.firestore,lr);return nne(jr(e),n._key,{source:"server"}).then(t=>fU(e,n,t))}(this._delegate):function WLe(n){n=ln(n,Rr);const e=ln(n.firestore,lr);return nne(jr(e),n._key).then(t=>fU(e,n,t))}(this._delegate),t.then(r=>new FI(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ra(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function Js(n,e,t){return n.message=n.message.replace(e,t),n}function Hne(n){for(const e of n)if("object"==typeof e&&!gU(e))return e;return{}}function $ne(n,e){var t,r;let i;return i=gU(n[0])?n[0]:gU(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class FI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Rne(this._delegate,e._delegate)}}class LI extends FI{data(e){const t=this._delegate.data(e);return this._delegate._converter||function l1e(n){n||it()}(void 0!==t),t}}class eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}where(e,t,r){try{return new eo(this.firestore,Fd(this._delegate,function NLe(n,e,t){const r=e,i=PD("where",n);return kI._create(i,r,t)}(e,t,r)))}catch(i){throw Js(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new eo(this.firestore,Fd(this._delegate,function OLe(n,e="asc"){const t=e,r=PD("orderBy",n);return dU._create(r,t)}(e,t)))}catch(r){throw Js(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new eo(this.firestore,Fd(this._delegate,function FLe(n){return cne("limit",n),kD._create("limit",n,"F")}(e)))}catch(t){throw Js(t,"limit()","Query.limit()")}}limitToLast(e){try{return new eo(this.firestore,Fd(this._delegate,function LLe(n){return cne("limitToLast",n),kD._create("limitToLast",n,"L")}(e)))}catch(t){throw Js(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new eo(this.firestore,Fd(this._delegate,function VLe(...n){return ND._create("startAt",n,!0)}(...e)))}catch(t){throw Js(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new eo(this.firestore,Fd(this._delegate,function BLe(...n){return ND._create("startAfter",n,!1)}(...e)))}catch(t){throw Js(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new eo(this.firestore,Fd(this._delegate,function ULe(...n){return OD._create("endBefore",n,!1)}(...e)))}catch(t){throw Js(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new eo(this.firestore,Fd(this._delegate,function jLe(...n){return OD._create("endAt",n,!0)}(...e)))}catch(t){throw Js(t,"endAt()","Query.endAt()")}}isEqual(e){return eU(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function QLe(n){n=ln(n,fs);const e=ln(n.firestore,lr),t=jr(e),r=new Vd(e);return function cLe(n,e){const t=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return(r=(0,O.A)(function*(s,o,a){try{const l=yield pD(s,o,!0),c=new Hte(o,l.Ts),u=c.ma(l.documents),d=c.applyChanges(u,!1);a.resolve(d.snapshot)}catch(l){const c=N_(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield U_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ld(e,r,n,i))}(this._delegate):"server"===e?.source?function YLe(n){n=ln(n,fs);const e=ln(n.firestore,lr),t=jr(e),r=new Vd(e);return rne(t,n._query,{source:"server"}).then(i=>new Ld(e,r,n,i))}(this._delegate):function KLe(n){n=ln(n,fs);const e=ln(n.firestore,lr),t=jr(e),r=new Vd(e);return Cne(n._query),rne(t,n._query).then(i=>new Ld(e,r,n,i))}(this._delegate),t.then(r=>new _U(this.firestore,new Ld(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Hne(e),r=$ne(e,i=>new _U(this.firestore,new Ld(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return kne(this._delegate,t,r)}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}class IVe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new LI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _U{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new LI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new IVe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new LI(this._firestore,r))})}isEqual(e){return Rne(this._delegate,e._delegate)}}class $_ extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ra(this.firestore,e):null}doc(e){try{return new Ra(this.firestore,void 0===e?TD(this._delegate):TD(this._delegate,e))}catch(t){throw Js(t,"doc()","CollectionReference.doc()")}}add(e){return function ZLe(n,e){const t=ln(n.firestore,lr),r=TD(n),i=FD(n.converter,e);return H_(t,[xD(np(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ra(this.firestore,t))}isEqual(e){return fne(this._delegate,e._delegate)}withConverter(e){return new $_(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function op(n){return ln(n,Rr)}class yU{constructor(...e){this._delegate=new ru(...e)}static documentId(){return new yU(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,N.Ku)(e))instanceof ru&&this._delegate._internalPath.isEqual(e._internalPath)}}class ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hVe(){return new rU("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ap(e)}static delete(){const e=function dVe(){return new xI("deleteField")}();return e._methodName="FieldValue.delete",new ap(e)}static arrayUnion(...e){const t=function fVe(...n){return new iU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ap(t)}static arrayRemove(...e){const t=function pVe(...n){return new sU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ap(t)}static increment(e){const t=function mVe(n){return new oU("increment",n)}(e);return t._methodName="FieldValue.increment",new ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wVe={Firestore:Une,GeoPoint:AD,Timestamp:Vr,Blob:OI,Transaction:jne,WriteBatch:zne,DocumentReference:Ra,DocumentSnapshot:FI,Query:eo,QueryDocumentSnapshot:LI,QuerySnapshot:_U,CollectionReference:$_,FieldPath:yU,FieldValue:ap,setLogLevel:function EVe(n){!function a1e(n){Ed.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Wne(n,e){return function AVe(n,e=gf){return new Vt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function vU(n,e){return Wne(n,e).pipe(Ve(t=>({payload:t,type:"query"})))}!function TVe(n){(function CVe(n,e){n.INTERNAL.registerComponent(new Qo.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},wVe)))})(n,(e,t)=>new Une(e,t,new bVe)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Gl.A);class Gne{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Yne(r,t);return new Qne(i,s,this.afs)}snapshotChanges(){return function SVe(n,e){return Wne(n,e).pipe(nl(void 0),GV(),Ve(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return this.snapshotChanges().pipe(Ve(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return zn(this.ref.get(e)).pipe(Ui)}}function BD(n,e){return vU(n,e).pipe(nl(void 0),GV(),Ve(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(d=>d.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function qne(n,e,t){return BD(n,t).pipe(pg((r,i)=>function DVe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xVe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bU(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bU(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bU(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),M1(),Ve(r=>r.map(i=>({type:i.type,payload:i}))))}function bU(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Kne(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Qne{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=BD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ve(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(nl(void 0),GV(),Qr(([r,i])=>i.length>0||!r),Ve(([,r])=>r),Ui)}auditTrail(e){return this.stateChanges(e).pipe(pg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Kne(e);return qne(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return vU(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ui)}get(e){return zn(this.query.get(e)).pipe(Ui)}add(e){return this.ref.add(e)}doc(e){return new Gne(this.ref.doc(e),this.afs)}}class RVe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?BD(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qr(t=>t.length>0),Ui):BD(this.query,this.afs.schedulers.outsideAngular).pipe(Ui)}auditTrail(e){return this.stateChanges(e).pipe(pg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Kne(e);return qne(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return vU(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ui)}get(e){return zn(this.query.get(e)).pipe(Ui)}}const MVe=new ye("angularfire2.enableFirestorePersistence"),PVe=new ye("angularfire2.firestore.persistenceSettings"),kVe=new ye("angularfire2.firestore.settings"),NVe=new ye("angularfire2.firestore.use-emulator");function Yne(n,e=t=>t){return{query:e(n),ref:n}}let OVe=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,u,d,m,y,b,T,M,B,V){this.schedulers=l;const Q=LS(t,a,r),be=u;d&&$V(Q,a,m,b,T,M,y,B),[this.firestore,this.persistenceEnabled$]=OV(`${Q.name}.firestore`,"AngularFirestore",Q.name,()=>{const Be=a.runOutsideAngular(()=>Q.firestore());if(s&&Be.settings(s),be&&Be.useEmulator(...be),i&&!_T(o)){const je=()=>{try{return zn(Be.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(H){return typeof console<"u"&&console.warn(H),qe(!1)}};return[Be,a.runOutsideAngular(je)]}return[Be,qe(!1)]},[s,be,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Yne(i,r),a=this.schedulers.ngZone.run(()=>s);return new Qne(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new RVe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Gne(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Se(qE),Se(KE,8),Se(MVe,8),Se(kVe,8),Se($s),Se(_t),Se(Fg),Se(PVe,8),Se(NVe,8),Se(QE,8),Se(VV,8),Se(BV,8),Se(UV,8),Se(jV,8),Se(zV,8),Se(HV,8),Se(DA,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const FVe=["determinateSpinner"];function LVe(n,e){if(1&n&&(Uo(),Te(0,"svg",11),qt(1,"circle",12),De()),2&n){const t=rt();Zn("viewBox",t._viewBox()),xe(),Hv("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Zn("r",t._circleRadius())}}const VVe=new ye("mat-progress-spinner-default-options",{providedIn:"root",factory:function BVe(){return{diameter:Xne}}}),Xne=100;let jVe=(()=>{class n{_elementRef=k(Vn);_noopAnimations;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";_determinateCircle;constructor(){const t=k(Tl,{optional:!0}),r=k(VVe);this._noopAnimations="NoopAnimations"===t&&!!r&&!r._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}_value=0;get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}_diameter=Xne;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,i){if(1&r&&Zh(FVe,5),2&r){let s;wo(s=Co())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,i){2&r&&(Zn("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),Yh("mat-"+i.color),Hv("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),_i("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Nk],diameter:[2,"diameter","diameter",Nk],strokeWidth:[2,"strokeWidth","strokeWidth",Nk]},exportAs:["matProgressSpinner"],standalone:!0,features:[Dl,yi],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,i){if(1&r&&(Rt(0,LVe,2,8,"ng-template",null,0,P5),Te(2,"div",2,1),Uo(),Te(4,"svg",3),qt(5,"circle",4),De()(),Ph(),Te(6,"div",5)(7,"div",6)(8,"div",7),Gv(9,8),De(),Te(10,"div",9),Gv(11,8),De(),Te(12,"div",10),Gv(13,8),De()()()),2&r){const s=LC(1);xe(4),Zn("viewBox",i._viewBox()),xe(),Hv("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),Zn("r",i._circleRadius()),xe(4),Ye("ngTemplateOutlet",s),xe(2),Ye("ngTemplateOutlet",s),xe(2),Ye("ngTemplateOutlet",s)}},dependencies:[y7],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return n})(),Zne=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or]})}return n})();const KVe=new ye("MatFormField");let VI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or,lK,or]})}return n})();function Jne(n,e){return e?t=>Cb(e.pipe(Yi(1),function QVe(){return me((n,e)=>{n.subscribe(ke(e,gs))})}()),t.pipe(Jne(n))):Qi((t,r)=>n(t,r).pipe(Yi(1),j8(t)))}const XVe=["panel"],ZVe=["*"];function JVe(n,e){if(1&n){const t=ya();Te(0,"div",1,0),dn("@panelAnimation.done",function(i){return fr(t),pr(rt()._animationDone.next(i))}),Ki(2),De()}if(2&n){const t=e.id,r=rt();Yh(r._classList),_i("mat-mdc-autocomplete-visible",r.showPanel)("mat-mdc-autocomplete-hidden",!r.showPanel)("mat-primary","primary"===r._color)("mat-accent","accent"===r._color)("mat-warn","warn"===r._color),Ye("id",r.id)("@panelAnimation",r.isOpen?"visible":"hidden"),Zn("aria-label",r.ariaLabel||null)("aria-labelledby",r._getPanelAriaLabelledby(t))}}const e2e=If("panelAnimation",[wf("void, hidden",Si({opacity:0,transform:"scaleY(0.8)"})),al(":enter, hidden => visible",[G1([ol("0.03s linear",Si({opacity:1})),ol("0.12s cubic-bezier(0, 0, 0.2, 1)",Si({transform:"scaleY(1)"}))])]),al(":leave, visible => hidden",[ol("0.075s linear",Si({opacity:0}))])]);class t2e{source;option;constructor(e,t){this.source=e,this.option=t}}const ere=new ye("mat-autocomplete-default-options",{providedIn:"root",factory:function n2e(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let r2e=(()=>{class n{_changeDetectorRef=k(ba);_elementRef=k(Vn);_defaults=k(ere);_activeOptionChanges=St.EMPTY;_animationDone=new un;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(t){this._color=t,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new un;opened=new un;closed=new un;optionActivated=new un;set classList(t){this._classList=t,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}id=k(bf).getId("mat-autocomplete-");inertGroups;constructor(){const t=k(Ds);this.inertGroups=t?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new cTe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const r=new t2e(this,t);this.optionSelected.emit(r)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_skipPredicate(){return!1}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(r,i,s){if(1&r&&(ju(s,QK,5),ju(s,qK,5)),2&r){let o;wo(o=Co())&&(i.options=o),wo(o=Co())&&(i.optionGroups=o)}},viewQuery:function(r,i){if(1&r&&(Zh(pa,7),Zh(XVe,5)),2&r){let s;wo(s=Co())&&(i.template=s.first),wo(s=Co())&&(i.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",ri],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",ri],requireSelection:[2,"requireSelection","requireSelection",ri],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",ri],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ri]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[rr([{provide:GK,useExisting:n}]),Dl,yi],ngContentSelectors:ZVe,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(r,i){1&r&&(Qa(),Rt(0,JVe,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[e2e]},changeDetection:0})}return n})();const i2e={provide:el,useExisting:Gn(()=>nre),multi:!0},tre=new ye("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.reposition()}}),o2e={provide:tre,deps:[cs],useFactory:function s2e(n){return()=>n.scrollStrategies.reposition()}};let nre=(()=>{class n{_injector=k(Sn);_element=k(Vn);_overlay=k(cs);_viewContainerRef=k(Eo);_zone=k(_t);_changeDetectorRef=k(ba);_dir=k(xg,{optional:!0});_formField=k(KVe,{optional:!0,host:!0});_document=k(pn);_viewportRuler=k(I1);_scrollStrategy=k(tre);_renderer=k(Ga);_defaults=k(ere,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new E;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=St.EMPTY;_breakpointObserver=k(uK);_handsetLandscapeSubscription=St.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new E;_windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&P1(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return sl(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Qr(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Qr(()=>this._overlayAttached)):qe()).pipe(Ve(t=>t instanceof KK?t:null))}optionSelections=Tb(()=>{const t=this.autocomplete?this.autocomplete.options:null;return t?t.changes.pipe(nl(t),Yt(()=>sl(...t.map(r=>r.onSelectionChange)))):this._initialized.pipe(Yt(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Vt(t=>{const r=s=>{const o=Vl(s),a=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,l=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&o!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!a||!a.contains(o))&&(!l||!l.contains(o))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(o)&&t.next(s)},i=[this._renderer.listen("document","click",r),this._renderer.listen("document","auxclick",r),this._renderer.listen("document","touchend",r)];return()=>{i.forEach(s=>s())}})}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const r=t.keyCode,i=td(t);if(27===r&&!i&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===r&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===r||40===r;9===r||o&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let r=t.target,i=r.value;if("number"===r.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),i){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&i!==this._getDisplayValue(s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===t.target){const s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const t=new Vt(i=>{xc(()=>{i.next()},{injector:this._injector})}),r=this.autocomplete.options.changes.pipe(ii(()=>this._positionStrategy.reapplyLastPosition()),function YVe(n,e=gf){const t=Q9(n,e);return Jne(()=>t)}(0));return sl(t,r).pipe(Yt(()=>this._zone.run(()=>{const i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Yi(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(t){const r=this.autocomplete;return r&&r.displayWith?r.displayWith(t):t}_assignOptionValue(t){const r=this._getDisplayValue(t);null==t&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(r??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const r=this.autocomplete,i=t?t.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),r._emitSelectEvent(i),this._element.nativeElement.focus()):r.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),r._animationDone?r._animationDone.pipe(Yi(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,r){this.autocomplete?.options?.forEach(i=>{i!==t&&i.selected&&i.deselect(r)})}_openPanelInternal(t=this._element.nativeElement.value){this._attachOverlay(t),this._floatLabel(),this._trackedModal&&fK(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(t){let r=this._overlayRef;r?(this._positionStrategy.setOrigin(this._getConnectedElement()),r.updateSize({width:this._getPanelWidth()})):(this._portal=new _A(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),r=this._overlay.create(this._getOverlayConfig()),this._overlayRef=r,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&r&&r.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe("(max-width: 959.98px) and (orientation: landscape)").subscribe(s=>{s.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),r&&!r.hasAttached()&&(r.attach(this._portal),this._valueOnAttach=t,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=t=>{(27===t.keyCode&&!td(t)||38===t.keyCode&&td(t,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),t.stopPropagation(),t.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new CA({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const r=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}];let o;o="above"===this.position?s:"below"===this.position?r:[...r,...s],t.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let r=-1;for(let i=0;i<t.options.length;i++)if(!t.options.get(i).disabled){r=i;break}t._keyManager.setActiveItem(r)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_scrollToOption(t){const r=this.autocomplete,i=function mAe(n,e,t){if(t.length){let r=e.toArray(),i=t.toArray(),s=0;for(let o=0;o<n+1;o++)r[o].group&&r[o].group===i[s]&&s++;return s}return 0}(t,r.options,r.optionGroups);if(0===t&&1===i)r._setScrollTop(0);else if(r.panel){const s=r.options.toArray()[t];if(s){const o=s._getHostElement(),a=function gAe(n,e,t,r){return n<t?n:n+e>t+r?Math.max(0,n-r+e):t}(o.offsetTop,o.offsetHeight,r._getScrollTop(),r.panel.nativeElement.offsetHeight);r._setScrollTop(a)}}}_trackedModal=null;_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const r=this.autocomplete.id;this._trackedModal&&P1(this._trackedModal,"aria-owns",r),fK(t,"aria-owns",r),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(P1(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(r,i){1&r&&dn("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(o){return i._handleInput(o)})("keydown",function(o){return i._handleKeydown(o)})("click",function(){return i._handleClick()}),2&r&&Zn("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",ri]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[rr([i2e]),Dl,as]})}return n})(),a2e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[o2e],imports:[qb,Pg,or,Wb,Pg,or]})}return n})();function su(n){return Array.isArray?Array.isArray(n):"[object Array]"===sre(n)}function ec(n){return"string"==typeof n}function rre(n){return"number"==typeof n}function ire(n){return"object"==typeof n}function ta(n){return null!=n}function EU(n){return!n.trim().length}function sre(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const g2e=n=>`Missing ${n} property in key`,_2e=n=>`Property 'weight' in key '${n}' must be a positive integer`,ore=Object.prototype.hasOwnProperty;class y2e{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=are(r);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function are(n){let e=null,t=null,r=null,i=1,s=null;if(ec(n)||su(n))r=n,e=lre(n),t=IU(n);else{if(!ore.call(n,"name"))throw new Error(g2e("name"));const o=n.name;if(r=o,ore.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(_2e(o));e=lre(o),t=IU(o),s=n.getFn}return{path:e,id:t,weight:i,src:r,getFn:s}}function lre(n){return su(n)?n:n.split(".")}function IU(n){return su(n)?n.join("."):n}var Lt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function v2e(n,e){let t=[],r=!1;const i=(s,o,a)=>{if(ta(s))if(o[a]){const c=s[o[a]];if(!ta(c))return;if(a===o.length-1&&(ec(c)||rre(c)||function d2e(n){return!0===n||!1===n||function h2e(n){return ire(n)&&null!==n}(n)&&"[object Boolean]"==sre(n)}(c)))t.push(function u2e(n){return null==n?"":function c2e(n){if("string"==typeof n)return n;let e=n+"";return"0"==e&&1/n==-1/0?"-0":e}(n)}(c));else if(su(c)){r=!0;for(let u=0,d=c.length;u<d;u+=1)i(c[u],o,a+1)}else o.length&&i(c,o,a+1)}else t.push(s)};return i(n,ec(e)?e.split("."):e,0),r?t:t[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const b2e=/[^ ]+/g;class wU{constructor({getFn:e=Lt.getFn,fieldNormWeight:t=Lt.fieldNormWeight}={}){this.norm=function E2e(n=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(b2e).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*n),a=parseFloat(Math.round(o*r)/r);return t.set(s,a),a},clear(){t.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ec(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();ec(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!ta(e)||EU(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(ta(o))if(su(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(ta(u))if(ec(u)&&!EU(u)){let d={v:u,i:c,n:this.norm.get(u)};a.push(d)}else su(u)&&u.forEach((d,m)=>{l.push({nestedArrIndex:m,value:d})})}r.$[s]=a}else if(ec(o)&&!EU(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function cre(n,e,{getFn:t=Lt.getFn,fieldNormWeight:r=Lt.fieldNormWeight}={}){const i=new wU({getFn:t,fieldNormWeight:r});return i.setKeys(n.map(are)),i.setSources(e),i.create(),i}function I2e(n,{getFn:e=Lt.getFn,fieldNormWeight:t=Lt.fieldNormWeight}={}){const{keys:r,records:i}=n,s=new wU({getFn:e,fieldNormWeight:t});return s.setKeys(r),s.setIndexRecords(i),s}function UD(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=Lt.distance,ignoreLocation:s=Lt.ignoreLocation}={}){const o=e/n.length;if(s)return o;const a=Math.abs(r-t);return i?o+a/i:a?1:o}function T2e(n){let e={};for(let t=0,r=n.length;t<r;t+=1){const i=n.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}class ure{constructor(e,{location:t=Lt.location,threshold:r=Lt.threshold,distance:i=Lt.distance,includeMatches:s=Lt.includeMatches,findAllMatches:o=Lt.findAllMatches,minMatchCharLength:a=Lt.minMatchCharLength,isCaseSensitive:l=Lt.isCaseSensitive,ignoreLocation:c=Lt.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(m,y)=>{this.chunks.push({pattern:m,alphabet:T2e(m),startIndex:y})},d=this.pattern.length;if(d>32){let m=0;const y=d%32,b=d-y;for(;m<b;)u(this.pattern.substr(m,32),m),m+=32;if(y){const T=d-32;u(this.pattern.substr(T),T)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let b={isMatch:!0,score:0};return r&&(b.indices=[[0,e.length-1]]),b}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:T,startIndex:M})=>{const{isMatch:B,score:V,indices:Q}=function C2e(n,e,t,{location:r=Lt.location,distance:i=Lt.distance,threshold:s=Lt.threshold,findAllMatches:o=Lt.findAllMatches,minMatchCharLength:a=Lt.minMatchCharLength,includeMatches:l=Lt.includeMatches,ignoreLocation:c=Lt.ignoreLocation}={}){if(e.length>32)throw new Error("Pattern length exceeds max of 32.");const u=e.length,d=n.length,m=Math.max(0,Math.min(r,d));let y=s,b=m;const T=a>1||l,M=T?Array(d):[];let B;for(;(B=n.indexOf(e,b))>-1;){let H=UD(e,{currentLocation:B,expectedLocation:m,distance:i,ignoreLocation:c});if(y=Math.min(H,y),b=B+u,T){let L=0;for(;L<u;)M[B+L]=1,L+=1}}b=-1;let V=[],Q=1,be=u+d;const Be=1<<u-1;for(let H=0;H<u;H+=1){let L=0,W=be;for(;L<W;)UD(e,{errors:H,currentLocation:m+W,expectedLocation:m,distance:i,ignoreLocation:c})<=y?L=W:be=W,W=Math.floor((be-L)/2+L);be=W;let J=Math.max(1,m-W+1),ne=o?d:Math.min(m+W,d)+u,re=Array(ne+2);re[ne+1]=(1<<H)-1;for(let Hr=ne;Hr>=J;Hr-=1){let oa=Hr-1,st=t[n.charAt(oa)];if(T&&(M[oa]=+!!st),re[Hr]=(re[Hr+1]<<1|1)&st,H&&(re[Hr]|=(V[Hr+1]|V[Hr])<<1|1|V[Hr+1]),re[Hr]&Be&&(Q=UD(e,{errors:H,currentLocation:oa,expectedLocation:m,distance:i,ignoreLocation:c}),Q<=y)){if(y=Q,b=oa,b<=m)break;J=Math.max(1,2*m-b)}}if(UD(e,{errors:H+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:c})>y)break;V=re}const je={isMatch:b>=0,score:Math.max(.001,Q)};if(T){const H=function w2e(n=[],e=Lt.minMatchCharLength){let t=[],r=-1,i=-1,s=0;for(let o=n.length;s<o;s+=1){let a=n[s];a&&-1===r?r=s:!a&&-1!==r&&(i=s-1,i-r+1>=e&&t.push([r,i]),r=-1)}return n[s-1]&&s-r>=e&&t.push([r,s-1]),t}(M,a);H.length?l&&(je.indices=H):je.isMatch=!1}return je}(e,b,T,{location:i+M,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});B&&(m=!0),d+=V,B&&Q&&(u=[...u,...Q])});let y={isMatch:m,score:m?d/this.chunks.length:1};return m&&r&&(y.indices=u),y}}class Ud{constructor(e){this.pattern=e}static isMultiMatch(e){return dre(e,this.multiRegex)}static isSingleMatch(e){return dre(e,this.singleRegex)}search(){}}function dre(n,e){const t=n.match(e);return t?t[1]:null}class hre extends Ud{constructor(e,{location:t=Lt.location,threshold:r=Lt.threshold,distance:i=Lt.distance,includeMatches:s=Lt.includeMatches,findAllMatches:o=Lt.findAllMatches,minMatchCharLength:a=Lt.minMatchCharLength,isCaseSensitive:l=Lt.isCaseSensitive,ignoreLocation:c=Lt.ignoreLocation}={}){super(e),this._bitapSearch=new ure(e,{location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class fre extends Ud{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r,t=0;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+s,i.push([r,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const CU=[class A2e extends Ud{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},fre,class D2e extends Ud{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class x2e extends Ud{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class M2e extends Ud{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class R2e extends Ud{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class S2e extends Ud{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=-1===e.indexOf(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},hre],pre=CU.length,P2e=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,O2e=new Set([hre.type,fre.type]),TU=[];function AU(n,e){for(let t=0,r=TU.length;t<r;t+=1){let i=TU[t];if(i.condition(n,e))return new i(n,e)}return new ure(n,e)}const jD_AND="$and",DU=n=>!(!n.$and&&!n.$or),mre=n=>({[jD_AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function gre(n,e,{auto:t=!0}={}){const r=i=>{let s=Object.keys(i);const o=(n=>!!n.$path)(i);if(!o&&s.length>1&&!DU(i))return r(mre(i));if((n=>!su(n)&&ire(n)&&!DU(n))(i)){const l=o?i.$path:s[0],c=o?i.$val:i[l];if(!ec(c))throw new Error((n=>`Invalid value for key ${n}`)(l));const u={keyId:IU(l),pattern:c};return t&&(u.searcher=AU(c,e)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=i[l];su(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return DU(n)||(n=mre(n)),r(n)}function j2e(n,e){const t=n.matches;e.matches=[],ta(t)&&t.forEach(r=>{if(!ta(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function z2e(n,e){e.score=n.score}let xU=(()=>{class n{constructor(t,r={},i){this.options={...Lt,...r},this._keyStore=new y2e(this.options.keys),this.setCollection(t,i)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof wU))throw new Error("Incorrect 'index' type");this._myIndex=r||cre(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ta(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let i=0,s=this._docs.length;i<s;i+=1){const o=this._docs[i];t(o,i)&&(this.removeAt(i),i-=1,s-=1,r.push(o))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options;let c=ec(t)?ec(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function U2e(n,{ignoreFieldNorm:e=Lt.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=r})}(c,{ignoreFieldNorm:l}),o&&c.sort(a),rre(r)&&r>-1&&(c=c.slice(0,r)),function H2e(n,e,{includeMatches:t=Lt.includeMatches,includeScore:r=Lt.includeScore}={}){const i=[];return t&&i.push(j2e),r&&i.push(z2e),n.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}(c,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(t){const r=AU(t,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:o,i:a,n:l})=>{if(!ta(o))return;const{isMatch:c,score:u,indices:d}=r.searchIn(o);c&&s.push({item:o,idx:a,matches:[{score:u,value:o,norm:l,indices:d}]})}),s}_searchLogical(t){const r=gre(t,this.options),i=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:y}=l,b=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:y});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}const d=[];for(let m=0,y=l.children.length;m<y;m+=1){const T=i(l.children[m],c,u);if(T.length)d.push(...T);else if("$and"===l.operator)return[]}return d},o={},a=[];return this._myIndex.records.forEach(({$:l,i:c})=>{if(ta(l)){let u=i(r,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},a.push(o[c])),u.forEach(({matches:d})=>{o[c].matches.push(...d)}))}}),a}_searchObjectList(t){const r=AU(t,this.options),{keys:i,records:s}=this._myIndex,o=[];return s.forEach(({$:a,i:l})=>{if(!ta(a))return;let c=[];i.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:a[d],searcher:r}))}),c.length&&o.push({idx:l,item:a,matches:c})}),o}_findMatches({key:t,value:r,searcher:i}){if(!ta(r))return[];let s=[];if(su(r))r.forEach(({v:o,i:a,n:l})=>{if(!ta(o))return;const{isMatch:c,score:u,indices:d}=i.searchIn(o);c&&s.push({score:u,key:t,value:o,idx:a,norm:l,indices:d})});else{const{v:o,n:a}=r,{isMatch:l,score:c,indices:u}=i.searchIn(o);l&&s.push({score:c,key:t,value:o,norm:a,indices:u})}return s}}return n.version="7.0.0",n.createIndex=cre,n.parseIndex=I2e,n.config=Lt,n})();xU.parseQuery=gre,function L2e(...n){TU.push(...n)}(class F2e{constructor(e,{isCaseSensitive:t=Lt.isCaseSensitive,includeMatches:r=Lt.includeMatches,minMatchCharLength:i=Lt.minMatchCharLength,ignoreLocation:s=Lt.ignoreLocation,findAllMatches:o=Lt.findAllMatches,location:a=Lt.location,threshold:l=Lt.threshold,distance:c=Lt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function N2e(n,e={}){return n.split("|").map(t=>{let r=t.trim().split(P2e).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,c=-1;for(;!l&&++c<pre;){const u=CU[c];let d=u.isMultiMatch(a);d&&(i.push(new u(d,e)),l=!0)}if(!l)for(c=-1;++c<pre;){const u=CU[c];let d=u.isSingleMatch(a);if(d){i.push(new u(d,e));break}}}return i})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const u=t[l];o.length=0,s=0;for(let d=0,m=u.length;d<m;d+=1){const y=u[d],{isMatch:b,indices:T,score:M}=y.search(e);if(!b){a=0,s=0,o.length=0;break}s+=1,a+=M,r&&(O2e.has(y.constructor.type)?o=[...o,...T]:o.push(T))}if(s){let d={isMatch:!0,score:a/s};return r&&(d.indices=o),d}}return{isMatch:!1,score:1}}});let _re=(()=>{class n{transform(t,r=0){const i=parseFloat(t);return isNaN(i)?t:-1===r?`${i.toFixed(0)} \u5143`:i<1e3?`${i.toFixed(r)} \u516c\u5c3a`:`${(i/1e3).toFixed(r)} \u516c\u91cc`}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"round",type:n,pure:!0})}}return n})(),$2e=(()=>{class n{transform(t){return null==t||""===t?"\u66ab\u7121\u8cc7\u8a0a":t.toString()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"emptyInfo",type:n,pure:!0})}}return n})();function W2e(n,e){1&n&&(Te(0,"div",17),at(1," \u65b0\u54c1 "),De())}function G2e(n,e){1&n&&(Te(0,"div",18),at(1," \u7279\u50f9\u4e2d "),De())}function q2e(n,e){if(1&n&&(Te(0,"div")(1,"div",19)(2,"span",20),at(3,"\u50f9\u683c(NT$): "),De(),Te(4,"span",21),at(5),De(),Te(6,"span",22),at(7,"\u2192"),De(),Te(8,"span",23),at(9),Go(10,"round"),De()(),Te(11,"p",24),at(12),Go(13,"emptyInfo"),De(),Te(14,"p",24),at(15),Go(16,"emptyInfo"),De()()),2&n){const t=rt().$implicit,r=rt(5);xe(5),Ya(r.getFoodDetail711(t).originalPrice),xe(4),Rn(" ",UC(10,4,r.getFoodDetail711(t).discountedPrice,-1)," "),xe(3),Rn("\u5546\u54c1\u63cf\u8ff0: ",zu(13,7,r.getFoodDetail711(t).content),""),xe(3),Rn("\u5361\u8def\u91cc(kcal): ",zu(16,9,r.getFoodDetail711(t).kcal),"")}}function K2e(n,e){1&n&&(Te(0,"div")(1,"div",19)(2,"p",24),at(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),De()()())}function Q2e(n,e){if(1&n&&(Te(0,"li")(1,"div",8),qt(2,"img",9),Te(3,"div",10)(4,"div",11)(5,"h3",12),at(6),De(),Te(7,"div",13),at(8),De()(),Te(9,"div",14),Rt(10,W2e,2,0,"div",15)(11,G2e,2,0,"div",16),De(),Rt(12,q2e,17,11,"div",0)(13,K2e,4,0,"div",0),De()()()),2&n){const t=e.$implicit,r=rt(5);xe(2),Ye("src",r.getFoodDetail711(t).image,Ws)("alt",r.getFoodDetail711(t).name),xe(4),Rn(" ",t.ItemName," "),xe(2),Rn(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),xe(2),Ye("ngIf","True"===r.getFoodDetail711(t).new),xe(),Ye("ngIf","True"===r.getFoodDetail711(t).special_sale),xe(),Ye("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetail711(t).image),xe(),Ye("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetail711(t).image)}}function Y2e(n,e){if(1&n&&(Te(0,"div",4)(1,"div",5)(2,"h3",6),at(3),De()(),Te(4,"ul",7),Rt(5,Q2e,14,8,"li",2),De()()),2&n){const t=rt().$implicit,r=rt(3);xe(3),Rn(" ",t.Name," "),xe(2),Ye("ngForOf",r.itemsBySubCategory[t.Name])}}function X2e(n,e){if(1&n&&(ga(0),Rt(1,Y2e,6,2,"div",3),_a()),2&n){const t=e.$implicit,r=rt(3);xe(),Ye("ngIf",r.itemsBySubCategory[t.Name]&&r.itemsBySubCategory[t.Name].length>0)}}function Z2e(n,e){if(1&n&&(ga(0),Te(1,"h2",1),at(2),De(),Rt(3,X2e,2,1,"ng-container",2),_a()),2&n){const t=rt(2);xe(2),Ya(t.category.Name),xe(),Ye("ngForOf",t.subCategories)}}function J2e(n,e){if(1&n&&(Te(0,"div")(1,"p",24),at(2),Go(3,"emptyInfo"),De(),Te(4,"p",24),at(5),Go(6,"emptyInfo"),De()()),2&n){const t=rt().$implicit,r=rt(5);xe(2),Rn("\u5546\u54c1\u63cf\u8ff0: ",zu(3,2,r.getFoodDetailFamilyMart(t).Description),""),xe(3),Rn("\u5361\u8def\u91cc(kcal): ",zu(6,4,r.getFoodDetailFamilyMart(t).Calories),"")}}function eBe(n,e){1&n&&(Te(0,"div")(1,"div",19)(2,"p",24),at(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),De()()())}function tBe(n,e){if(1&n&&(Te(0,"li")(1,"div",26),qt(2,"img",9),Te(3,"div",10)(4,"div",11)(5,"h3",12),at(6),De(),Te(7,"div",27),at(8),De()(),Rt(9,J2e,7,6,"div",0)(10,eBe,4,0,"div",0),De()()()),2&n){const t=e.$implicit,r=rt(5);xe(2),Ye("src",r.getFoodDetailFamilyMart(t).picture_url,Ws)("alt",r.getFoodDetailFamilyMart(t).title),xe(4),Rn(" ",t.ItemName," "),xe(2),Rn(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),xe(),Ye("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetailFamilyMart(t).picture_url),xe(),Ye("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetailFamilyMart(t).picture_url)}}function nBe(n,e){if(1&n&&(Te(0,"div",4)(1,"div",5)(2,"h3",25),at(3),De()(),Te(4,"ul",7),Rt(5,tBe,11,6,"li",2),De()()),2&n){const t=rt().$implicit,r=rt(3);xe(3),Rn(" ",t.name," "),xe(2),Ye("ngForOf",r.itemsBySubCategory[t.name])}}function rBe(n,e){if(1&n&&(ga(0),Rt(1,nBe,6,2,"div",3),_a()),2&n){const t=e.$implicit,r=rt(3);xe(),Ye("ngIf",r.itemsBySubCategory[t.name]&&r.itemsBySubCategory[t.name].length>0)}}function iBe(n,e){if(1&n&&(ga(0),Te(1,"h2",1),at(2),De(),Rt(3,rBe,2,1,"ng-container",2),_a()),2&n){const t=rt(2);xe(2),Ya(t.category.name),xe(),Ye("ngForOf",t.subCategories)}}function sBe(n,e){if(1&n&&(Te(0,"div"),Rt(1,Z2e,4,2,"ng-container",0)(2,iBe,4,2,"ng-container",0),De()),2&n){const t=rt();xe(),Ye("ngIf",t.category.Name),xe(),Ye("ngIf",t.category.name)}}let oBe=(()=>{class n{constructor(t){this.sevenElevenRequestService=t,this.subCategories=[],this.itemsBySubCategory={}}ngOnInit(){}ngOnChanges(t){(t.category||t.store)&&this.loadSubCategories()}loadSubCategories(){if(this.store&&this.category)if(this.store.StoreName)this.subCategories=this.category.Children,this.loadItemsBySubCategory();else if(this.store.name){this.subCategories=this.category.categories;var t=[];this.subCategories.forEach(r=>{t.push(...r.products.map(i=>({ItemName:i.name,RemainingQty:i.qty}))),this.itemsBySubCategory[r.name]=t||[],t=[]})}}loadItemsBySubCategory(){this.store&&this.sevenElevenRequestService.getItemsByStoreNo(this.store.StoreNo).subscribe(t=>{if(t.isSuccess&&t.element.StoreStockItem){const r=t.element.StoreStockItem.CategoryStockItems;this.subCategories.forEach(i=>{const s=[];r.forEach(o=>{o.Name===i.Name&&s.push(...o.ItemList)}),this.itemsBySubCategory[i.Name]=s||[]})}})}getDiscountedPrice(t){const r=parseFloat(t.replace("NT$","").trim()),s=(new Date).getHours();let o=r;return o*=s>=19&&s<20?.8:s>=10&&s<18||s>=20||s<3?.65:.8,o.toString()}getFoodDetail711(t){const s=new xU(this.foodDetails,{includeScore:!0,threshold:.3,keys:["name"]}).search(t.ItemName),o=s.length>0?s[0].item:{category:"",content:"",image:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png",kcal:"",name:"",new:"False",price:"",special_sale:"False"},a=this.getDiscountedPrice(o.price);return o.discountedPrice=a,o.originalPrice=o.price,o}getFoodDetailFamilyMart(t){const s=new xU(this.foodDetails,{includeScore:!0,threshold:.2,keys:["title"]}).search(t.ItemName);return s.length>0?s[0].item:{category:"",title:"",picture_url:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png","Protein (g)":"","Carb (g)":"","Calories (kcal)":"","Fat (g)":"",Description:""}}static{this.\u0275fac=function(r){return new(r||n)(Me(pQ))}}static{this.\u0275cmp=qn({type:n,selectors:[["app-display"]],inputs:{store:"store",category:"category",foodDetails:"foodDetails"},features:[as],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-2xl","font-bold","mb-4","text-primary-default"],[4,"ngFor","ngForOf"],["class","sub-category-item bg-white border border-gray-100 p-6 mb-8 rounded-lg shadow-lg",4,"ngIf"],[1,"sub-category-item","bg-white","border","border-gray-100","p-6","mb-8","rounded-lg","shadow-lg"],[1,"mb-4"],[1,"text-2xl","font-bold","text-primary-default","text-primary-light"],[1,"space-y-6","sm:space-y-4"],[1,"border","border-gray-300","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"object-contain","rounded-lg","mb-4","sm:mb-0","sm:mr-6","shadow-md","w-24","h-24","sm:w-32","sm:h-32",3,"src","alt"],[1,"flex-1"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-2"],[1,"text-sm","sm:text-lg","font-semibold","text-gray-600"],[1,"text-center","inline-block","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"flex","space-x-2","mb-2"],["class","inline-block bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],["class","inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[1,"inline-block","bg-red-100","text-red-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"inline-block","bg-yellow-100","text-yellow-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"text-sm","sm:text-base","font-semibold","text-gray-800","mb-2"],[1,"text-gray-800"],[1,"line-through","text-gray-500"],[1,"text-red-600","mx-2"],[1,"text-red-600"],[1,"text-xs","sm:text-sm","text-gray-500","mb-1"],[1,"text-2xl","font-bold","text-primary-default"],[1,"border","border-gray-300","food-item","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"text-center","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"]],template:function(r,i){1&r&&Rt(0,sBe,3,2,"div",0),2&r&&Ye("ngIf",i.subCategories.length>0)},dependencies:[gT,sg,_re,$2e]})}}return n})();const lBe=["mat-icon-button",""],cBe=["*"],uBe=new ye("MAT_BUTTON_CONFIG"),dBe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let hBe=(()=>{class n{_elementRef=k(Vn);_platform=k(Ds);_ngZone=k(_t);_animationMode=k(Tl,{optional:!0});_focusMonitor=k(wA);_rippleLoader=k(_Ae);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){k(ed).load(z1);const t=k(uBe,{optional:!0}),r=this._elementRef.nativeElement,i=r.classList;this.disabledInteractive=t?.disabledInteractive??!1,this.color=t?.color??null,this._rippleLoader?.configureRipple(r,{className:"mat-mdc-button-ripple"});for(const{attribute:s,mdcClasses:o}of dBe)r.hasAttribute(s)&&i.add(...o)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",ri],disabled:[2,"disabled","disabled",ri],ariaDisabled:[2,"aria-disabled","ariaDisabled",ri],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ri]},standalone:!0,features:[Dl]})}return n})(),yre=(()=>{class n extends hBe{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,i){2&r&&(Zn("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Yh(i.color?"mat-"+i.color:""),_i("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[bn,yi],attrs:lBe,ngContentSelectors:cBe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Qa(),qt(0,"span",0),Ki(1),qt(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return n})(),vre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or,H1,or]})}return n})();function pBe(n,e){1&n&&(Te(0,"small",19),at(1,"\u5e33\u865f\u70ba\u5fc5\u586b"),De())}function mBe(n,e){1&n&&(Te(0,"small",19),at(1,"\u8acb\u8f38\u5165\u6709\u6548\u7684\u96fb\u5b50\u90f5\u4ef6"),De())}function gBe(n,e){1&n&&(Te(0,"small",19),at(1,"\u5bc6\u78bc\u70ba\u5fc5\u586b"),De())}function _Be(n,e){1&n&&(Te(0,"small",19),at(1,"\u5bc6\u78bc\u81f3\u5c11\u9700\u89816\u500b\u5b57\u5143"),De())}function yBe(n,e){1&n&&(Te(0,"small",19),at(1," \u5bc6\u78bc\u8207\u518d\u6b21\u8f38\u5165\u7684\u5bc6\u78bc\u4e0d\u4e00\u81f4 "),De())}function vBe(n,e){1&n&&(Te(0,"small",19),at(1," \u66b1\u7a31\u70ba\u5fc5\u586b "),De())}function bBe(n,e){if(1&n&&(Te(0,"div")(1,"div")(2,"label",20),at(3,"\u91cd\u65b0\u8f38\u5165\u5bc6\u78bc"),De(),qt(4,"input",21),Rt(5,yBe,2,0,"small",8),De(),Te(6,"div")(7,"label",22),at(8,"\u66b1\u7a31"),De(),qt(9,"input",23),Rt(10,vBe,2,0,"small",8),De()()),2&n){const t=rt();xe(5),Ye("ngIf",(null==t.authForm.errors?null:t.authForm.errors.passwordsMismatch)&&t.f.rePassword.touched),xe(5),Ye("ngIf",(null==t.authForm.errors?null:t.authForm.errors.displayNameRequired)&&t.f.displayName.touched)}}function EBe(n,e){if(1&n&&(Te(0,"p",24),at(1),De()),2&n){const t=rt();xe(),Ya(t.errorMessage)}}function IBe(n,e){if(1&n){const t=ya();Te(0,"div")(1,"button",25),dn("click",function(){return fr(t),pr(rt().resendVerificationEmail())}),at(2," \u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1 "),De()()}}function wBe(n,e){if(1&n){const t=ya();Te(0,"div",26)(1,"button",27),dn("click",function(){return fr(t),pr(rt().forgotPassword())}),at(2," \u5fd8\u8a18\u5bc6\u78bc\uff1f "),De()()}}let CBe=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.authService=r,this.dialogRef=i,this.dialog=s,this.isRegister=!1,this.errorMessage="",this.authForm=this.fb.group({email:["",[ST.required,ST.email]],password:["",[ST.required,ST.minLength(6)]],rePassword:[""],displayName:[""]},{validators:[this.passwordMatchValidator,this.displayNameRequiredValidator.bind(this)]})}passwordMatchValidator(t){const r=t.get("password")?.value,i=t.get("rePassword")?.value;return r&&i&&r!==i?{passwordsMismatch:!0}:null}displayNameRequiredValidator(t){const r=this.isRegister,i=t.get("displayName")?.value;return!r||i&&""!==i.trim()?null:{displayNameRequired:!0}}submitForm(){this.authForm.invalid?this.markFormGroupTouched(this.authForm):this.isRegister?this.register():this.login()}markFormGroupTouched(t){Object.values(t.controls).forEach(r=>{r instanceof cf?this.markFormGroupTouched(r):r.markAsTouched()})}collectErrors(t){const r=[];return Object.keys(t.controls).forEach(i=>{const s=t.get(i);s&&s.errors&&(s.errors.required&&r.push(`${this.getFieldDisplayName(i)} \u70ba\u5fc5\u586b`),s.errors.email&&r.push(`${this.getFieldDisplayName(i)} \u683c\u5f0f\u4e0d\u6b63\u78ba`),s.errors.minlength&&r.push(`${this.getFieldDisplayName(i)} \u81f3\u5c11\u9700\u8981 ${s.errors.minlength.requiredLength} \u500b\u5b57\u5143`))}),t.errors?.passwordsMismatch&&r.push("\u5bc6\u78bc\u8207\u78ba\u8a8d\u5bc6\u78bc\u4e0d\u4e00\u81f4"),r.join("\n")}getFieldDisplayName(t){return{email:"Email",password:"\u5bc6\u78bc",rePassword:"\u78ba\u8a8d\u5bc6\u78bc",displayName:"\u66b1\u7a31"}[t]||t}login(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;console.log(s),!s||s.emailVerified?(console.log("\u4e00\u822c\u767b\u5165\u6210\u529f"),this.dialog.open(Ng,{width:"300px",data:{title:"\u767b\u5165\u6210\u529f",message:`${s.displayName}\uff5e\u6b61\u8fce\u56de\u4f86\u55b5`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(a=>{this.close(!0)})):this.errorMessage="\u60a8\u7684\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49\uff0c\u8acb\u5148\u81f3\u4fe1\u7bb1\u9ede\u64ca\u9a57\u8b49\u9023\u7d50\u5f8c\u518d\u91cd\u65b0\u767b\u5165\u3002"}).catch(i=>{this.errorMessage="auth/invalid-credential"===i.code?"\u5e33\u865f\u4e0d\u5b58\u5728\u6216\u5bc6\u78bc\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\u3002":"\u56e0\u4e0d\u660e\u539f\u56e0\u767b\u5165\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002",console.error(i.message)})}register(){const{email:t,password:r,displayName:i}=this.authForm.value;this.authService.register(t,r,i).then(()=>{this.errorMessage="\u8a3b\u518a\u6210\u529f\uff0c\u8acb\u81f3\u60a8\u7684\u4fe1\u7bb1\u78ba\u8a8d\u5f8c\u91cd\u65b0\u767b\u5165",this.authForm.reset(),this.isRegister=!1}).catch(s=>{this.errorMessage="auth/email-already-in-use"===s.code?"\u5e33\u865f\u5df2\u5b58\u5728\uff0c\u8acb\u4f7f\u7528Google\u6216\u76f4\u63a5\u767b\u5165":"\u56e0\u4e0d\u660e\u539f\u56e0\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}resendVerificationEmail(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;if(console.log("\u9a57\u8b49\u4fe1\u91cd\u767c\u7d66",s),s)return this.authService.sendVerificationEmail(s),void(this.errorMessage="\u9a57\u8b49\u4fe1\u5df2\u91cd\u65b0\u5bc4\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u96fb\u5b50\u90f5\u4ef6\u4e26\u91cd\u65b0\u767b\u5165")}).catch(i=>{console.error(i.message),this.errorMessage="\u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}loginWithGoogle(){this.authService.loginWithGoogle().then(t=>{const r=t.user;console.log("Google\u767b\u5165\u6210\u529f"),this.dialog.open(Ng,{width:"300px",data:{title:"\u767b\u5165\u6210\u529f",message:`${r.displayName}\uff5e\u6b61\u8fce\u56de\u4f86\u55b5`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(s=>{this.close(!0)})}).catch(t=>{console.error(t.message),this.errorMessage="Google\u767b\u5165\u5931\u6557\uff0c\u8acb\u91cd\u65b0\u518d\u8a66"})}close(t){this.dialogRef.close(t)}get f(){return this.authForm.controls}forgotPassword(){const{email:t}=this.authForm.value;t?this.authService.forgotPassword(t).then(()=>{this.errorMessage="\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u4fe1\u7bb1"}).catch(r=>{console.error("\u91cd\u8a2d\u5bc6\u78bc\u932f\u8aa4",r.message),this.errorMessage="\u767c\u9001\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u6642\u51fa\u932f\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"}):this.errorMessage="\u8acb\u8f38\u5165\u5e33\u865f\u4f7f\u7528\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740"}static{this.\u0275fac=function(r){return new(r||n)(Me(VIe),Me(WV),Me(Zb),Me(kg))}}static{this.\u0275cmp=qn({type:n,selectors:[["app-login-page"]],decls:32,vars:12,consts:[[1,"dialog-content"],[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"text-primary-default","text-xl","font-semibold","mb-6"],["mat-icon-button","",1,"text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],[1,"material-icons"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"text-primary-default"],["type","email","id","email","formControlName","email","placeholder","\u8acb\u8f38\u5165\u4fe1\u7bb1\u4f5c\u70ba\u5e33\u865f",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["class","text-red-500",4,"ngIf"],["for","password",1,"text-primary-default"],["type","password","id","password","formControlName","password","placeholder","\u8f38\u5165\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[4,"ngIf"],["type","submit",1,"btn-login","w-full","py-2","px-4","bg-primary-default","text-white","rounded-md","mt-4","hover:bg-gray-400","hover:shadow-lg","transition-all","focus:outline-none"],["class","error-message text-red-500 mb-4",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],[1,"flex","justify-between","items-center","mt-6"],[1,"btn-register","text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"],[1,"btn-google","border","border-gray-300","flex","items-center","py-2","px-4","bg-primary-light","text-gray-700","rounded-md","hover:bg-gray-200","hover:border-gray-400","transition-all","focus:outline-none",3,"click"],["src","assets/google.png","alt","Google Logo",1,"w-5","h-5","mr-2"],[1,"text-red-500"],["for","rePassword",1,"text-primary-default"],["type","password","id","rePassword","formControlName","rePassword","placeholder","\u518d\u6b21\u8f38\u5165\u60a8\u7684\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["for","displayName",1,"text-primary-default"],["type","text","id","displayName","formControlName","displayName","placeholder","\u600e\u9ebc\u7a31\u547c\u60a8",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[1,"error-message","text-red-500","mb-4"],[1,"btn-resend","w-full","py-2","px-4","bg-primary-light","border","border-gray-300","text-gray-700","rounded-md","hover:bg-gray-400","hover:text-white","transition-all","focus:outline-none",3,"click"],[1,"mt-4","text-center"],[1,"text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"]],template:function(r,i){1&r&&(Te(0,"mat-dialog-content",0)(1,"div",1)(2,"h2",2),at(3),De(),Te(4,"button",3),dn("click",function(){return i.close(!1)}),Te(5,"span",4),at(6,"close"),De()()(),Te(7,"form",5),dn("ngSubmit",function(){return i.submitForm()}),Te(8,"div")(9,"label",6),at(10,"\u5e33\u865f"),De(),qt(11,"input",7),Rt(12,pBe,2,0,"small",8)(13,mBe,2,0,"small",8),De(),Te(14,"div")(15,"label",9),at(16,"\u5bc6\u78bc"),De(),qt(17,"input",10),Rt(18,gBe,2,0,"small",8)(19,_Be,2,0,"small",8),De(),Rt(20,bBe,11,2,"div",11),Te(21,"button",12),at(22),De(),Rt(23,EBe,2,1,"p",13)(24,IBe,3,0,"div",11),De(),Rt(25,wBe,3,0,"div",14),Te(26,"div",15)(27,"button",16),dn("click",function(){return i.isRegister=!i.isRegister}),at(28),De(),Te(29,"button",17),dn("click",function(){return i.loginWithGoogle()}),qt(30,"img",18),at(31," Google \u767b\u5165 "),De()()()),2&r&&(xe(3),Rn(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),xe(4),Ye("formGroup",i.authForm),xe(5),Ye("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),xe(),Ye("ngIf",(null==i.f.email.errors?null:i.f.email.errors.email)&&i.f.email.touched),xe(5),Ye("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),xe(),Ye("ngIf",(null==i.f.password.errors?null:i.f.password.errors.minlength)&&i.f.password.touched),xe(),Ye("ngIf",i.isRegister),xe(2),Rn(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),xe(),Ye("ngIf",i.errorMessage),xe(),Ye("ngIf",!i.isRegister&&i.errorMessage.includes("\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49")),xe(),Ye("ngIf",!i.isRegister),xe(3),Rn(" ",i.isRegister?"\u5df2\u6709\u5e33\u865f\uff1f\u767b\u5165":"\u8a3b\u518a"," "))},dependencies:[sg,X1,uQ,yre,ON,yb,IN,wN,UT,BN]})}}return n})();const TBe=["*"];let zD;function BI(n){return function ABe(){if(void 0===zD&&(zD=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(zD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return zD}()?.createHTML(n)||n}function bre(n){return Error(`Unable to find icon with the name "${n}"`)}function Ere(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Ire(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class cp{url;svgText;options;svgElement;constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let HD=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new cp(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(ls.HTML,i);if(!o)throw Ire(i);const a=BI(o);return this._addSvgIconConfig(t,r,new cp("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new cp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(ls.HTML,r);if(!s)throw Ire(r);const o=BI(s);return this._addSvgIconSetConfig(t,new cp("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(ls.RESOURCE_URL,t);if(!r)throw Ere(t);const i=this._cachedIconsByUrl.get(r);return i?qe($D(i)):this._loadSvgIconFromConfig(new cp(t,null)).pipe(ii(s=>this._cachedIconsByUrl.set(r,s)),Ve(s=>$D(s)))}getNamedSvgIcon(t,r=""){const i=wre(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):Ab(bre(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?qe($D(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ve(r=>$D(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?qe(i):yN(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Zu(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(ls.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),qe(null)})))).pipe(Ve(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw bre(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(ii(r=>t.svgText=r),Ve(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?qe(null):this._fetchIcon(t).pipe(ii(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(BI("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(BI("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function SBe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const o=this._sanitizer.sanitize(ls.RESOURCE_URL,r);if(!o)throw Ere(r);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Ve(c=>BI(c)),lg(()=>this._inProgressUrlFetches.delete(o)),FV());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(wre(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return xBe(s)?new cp(s.url,null,s.options):new cp(s,null)}}static \u0275fac=function(r){return new(r||n)(Se(gb,8),Se(lN),Se(pn,8),Se(jo))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $D(n){return n.cloneNode(!0)}function wre(n,e){return n+":"+e}function xBe(n){return!(!n.url||!n.options)}const RBe=new ye("MAT_ICON_DEFAULT_OPTIONS"),MBe=new ye("mat-icon-location",{providedIn:"root",factory:function PBe(){const n=k(pn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Cre=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],kBe=Cre.map(n=>`[${n}]`).join(", "),NBe=/^url\(['"]?#(.*?)['"]?\)$/;let OBe=(()=>{class n{_elementRef=k(Vn);_iconRegistry=k(HD);_location=k(MBe);_errorHandler=k(jo);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=St.EMPTY;constructor(){const t=k(new xle("aria-hidden"),{optional:!0}),r=k(RBe,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(kBe),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)Cre.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(NBe):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Yi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){2&r&&(Zn("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Yh(i.color?"mat-"+i.color:""),_i("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:[2,"inline","inline",ri],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Dl,yi],ngContentSelectors:TBe,decls:1,vars:0,template:function(r,i){1&r&&(Qa(),Ki(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),FBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or,or]})}return n})();const LBe=["mat-menu-item",""],VBe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],BBe=["mat-icon, [matMenuItemIcon]","*"];function UBe(n,e){1&n&&(Uo(),Te(0,"svg",2),qt(1,"polygon",3),De())}const jBe=["*"];function zBe(n,e){if(1&n){const t=ya();Te(0,"div",0),dn("click",function(){return fr(t),pr(rt().closed.emit("click"))})("animationstart",function(i){return fr(t),pr(rt()._onAnimationStart(i.animationName))})("animationend",function(i){return fr(t),pr(rt()._onAnimationDone(i.animationName))})("animationcancel",function(i){return fr(t),pr(rt()._onAnimationDone(i.animationName))}),Te(1,"div",1),Ki(2),De()()}if(2&n){const t=rt();Yh(t._classList),_i("mat-menu-panel-animations-disabled",t._animationsDisabled)("mat-menu-panel-exit-animation","void"===t._panelAnimationState)("mat-menu-panel-animating",t._isAnimating),Ye("id",t.panelId),Zn("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const RU=new ye("MAT_MENU_PANEL");let WD=(()=>{class n{_elementRef=k(Vn);_document=k(pn);_focusMonitor=k(wA);_parentMenu=k(RU,{optional:!0});_changeDetectorRef=k(ba);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new E;_focused=new E;_highlighted=!1;_triggersSubmenu=!1;constructor(){k(ed).load(z1),this._parentMenu?.addItem?.(this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),r=t.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++)r[i].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(r,i){1&r&&dn("click",function(o){return i._checkDisabled(o)})("mouseenter",function(){return i._handleMouseEnter()}),2&r&&(Zn("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),_i("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",ri],disableRipple:[2,"disableRipple","disableRipple",ri]},exportAs:["matMenuItem"],standalone:!0,features:[Dl,yi],attrs:LBe,ngContentSelectors:BBe,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,i){1&r&&(Qa(VBe),Ki(0),Te(1,"span",0),Ki(2,1),De(),qt(3,"div",1),Rt(4,UBe,2,0,":svg:svg",2)),2&r&&(xe(3),Ye("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),xe(),Wv(i._triggersSubmenu?4:-1))},dependencies:[WK],encapsulation:2,changeDetection:0})}return n})();const HBe=new ye("MatMenuContent"),$Be=new ye("mat-menu-default-options",{providedIn:"root",factory:function WBe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),MU="_mat-menu-enter",GD="_mat-menu-exit";let UI=(()=>{class n{_elementRef=k(Vn);_changeDetectorRef=k(ba);_injector=k(Sn);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled;_allItems;_directDescendantItems=new Oh;_classList={};_panelAnimationState="void";_animationDone=new E;_isAnimating=!1;parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(t){const r=this._previousPanelClass,i={...this._classList};r&&r.length&&r.split(" ").forEach(s=>{i[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{i[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=i}_previousPanelClass;get classList(){return this.panelClass}set classList(t){this.panelClass=t}closed=new un;close=this.closed;panelId=k(bf).getId("mat-menu-panel-");constructor(){const t=k($Be);this.overlayPanelClass=t.overlayPanelClass||"",this._xPosition=t.xPosition,this._yPosition=t.yPosition,this.backdropClass=t.backdropClass,this.overlapTrigger=t.overlapTrigger,this.hasBackdrop=t.hasBackdrop,this._animationsDisabled="NoopAnimations"===k(Tl,{optional:!0})}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new uTe(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(nl(this._directDescendantItems),Yt(t=>sl(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const i=t.toArray(),s=Math.max(0,Math.min(i.length-1,r.activeItemIndex||0));i[s]&&!i[s].disabled?r.setActiveItem(s):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(nl(this._directDescendantItems),Yt(r=>sl(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:td(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=xc(()=>{const r=this._resolvePanel();if(!r||!r.contains(document.activeElement)){const i=this._keyManager;i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&r&&r.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){}setPositionClasses(t=this.xPosition,r=this.yPosition){this._classList={...this._classList,"mat-menu-before":"before"===t,"mat-menu-after":"after"===t,"mat-menu-above":"above"===r,"mat-menu-below":"below"===r},this._changeDetectorRef.markForCheck()}_onAnimationDone(t){const r=t===GD;(r||t===MU)&&(r&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(r?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(t){(t===MU||t===GD)&&(this._isAnimating=!0)}_setIsOpen(t){if(this._panelAnimationState=t?"enter":"void",t){if(0===this._keyManager.activeItemIndex){const r=this._resolvePanel();r&&(r.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(GD),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(t?MU:GD)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(nl(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let t=null;return this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),t}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["mat-menu"]],contentQueries:function(r,i,s){if(1&r&&(ju(s,HBe,5),ju(s,WD,5),ju(s,WD,4)),2&r){let o;wo(o=Co())&&(i.lazyContent=o.first),wo(o=Co())&&(i._allItems=o),wo(o=Co())&&(i.items=o)}},viewQuery:function(r,i){if(1&r&&Zh(pa,5),2&r){let s;wo(s=Co())&&(i.templateRef=s.first)}},hostVars:3,hostBindings:function(r,i){2&r&&Zn("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",ri],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>null==t?null:ri(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[rr([{provide:RU,useExisting:n}]),Dl,yi],ngContentSelectors:jBe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(r,i){1&r&&(Qa(),Rt(0,zBe,3,12,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,changeDetection:0})}return n})();const Tre=new ye("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.reposition()}}),qBe={provide:Tre,deps:[cs],useFactory:function GBe(n){return()=>n.scrollStrategies.reposition()}},Are=Dg({passive:!0}),jI=new WeakMap;let KBe=(()=>{class n{_overlay=k(cs);_element=k(Vn);_viewContainerRef=k(Eo);_menuItemInstance=k(WD,{optional:!0,self:!0});_dir=k(xg,{optional:!0});_focusMonitor=k(wA);_ngZone=k(_t);_scrollStrategy=k(Tre);_changeDetectorRef=k(ba);_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=St.EMPTY;_hoverSubscription=St.EMPTY;_menuCloseSubscription=St.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_handleTouchStart=t=>{N1(t)||(this._openedBy="touch")};_openedBy=void 0;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}_menu;menuData;restoreFocus=!0;menuOpened=new un;onMenuOpen=this.menuOpened;menuClosed=new un;onMenuClose=this.menuClosed;constructor(){const t=k(RU,{optional:!0});this._parentMaterialMenu=t instanceof UI?t:void 0,this._element.nativeElement.addEventListener("touchstart",this._handleTouchStart,Are)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this.menu&&this._ownsMenu(this.menu)&&jI.delete(this.menu),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Are),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;this._pendingRemoval?.unsubscribe();const r=jI.get(t);jI.set(t,this),r&&r!==this&&r.closeMenu();const i=this._createOverlay(t),s=i.getConfig(),o=s.positionStrategy;this._setPosition(t,o),s.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,i.hasAttached()||(i.attach(this._getPortal(t)),t.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),t instanceof UI&&(t._setIsOpen(!0),t._directDescendantItems.changes.pipe(mg(t.close)).subscribe(()=>{o.withLockedPosition(!1).reapplyLastPosition(),o.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){const r=this._overlayRef,i=this._menu;!r||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),i instanceof UI&&this._ownsMenu(i)?(this._pendingRemoval=i._animationDone.pipe(Yi(1)).subscribe(()=>r.detach()),i._setIsOpen(!1)):r.detach(),i&&this._ownsMenu(i)&&jI.delete(i),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const r=this._getOverlayConfig(t);this._subscribeToPositions(t,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe(i=>{this.menu instanceof UI&&this.menu._handleKeydown(i)})}return this._overlayRef}_getOverlayConfig(t){return new CA({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr"})}_subscribeToPositions(t,r){t.setPositionClasses&&r.positionChanges.subscribe(i=>{this._ngZone.run(()=>{t.setPositionClasses("start"===i.connectionPair.overlayX?"after":"before","top"===i.connectionPair.overlayY?"below":"above")})})}_setPosition(t,r){let[i,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[u,d]=[i,s],m=0;if(this.triggersSubmenu()){if(d=i="before"===t.xPosition?"start":"end",s=u="end"===i?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const y=this._parentMaterialMenu.items.first;this._parentInnerPadding=y?y._getHostElement().offsetTop:0}m="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");r.withPositions([{originX:i,originY:l,overlayX:u,overlayY:o,offsetY:m},{originX:s,originY:l,overlayX:d,overlayY:o,offsetY:m},{originX:i,originY:c,overlayX:u,overlayY:a,offsetY:-m},{originX:s,originY:c,overlayX:d,overlayY:a,offsetY:-m}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return sl(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:qe(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Qr(o=>this._menuOpen&&o!==this._menuItemInstance)):qe(),r)}_handleMousedown(t){k1(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(t=>{t===this._menuItemInstance&&!t.disabled&&(this._openedBy="mouse",this.openMenu())}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new _A(t.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(t){return jI.get(t)===this}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,i){1&r&&dn("click",function(o){return i._handleClick(o)})("mousedown",function(o){return i._handleMousedown(o)})("keydown",function(o){return i._handleKeydown(o)}),2&r&&Zn("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}return n})(),Sre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[qBe],imports:[H1,or,qb,Wb,or]})}return n})();const QBe=["*",[["mat-toolbar-row"]]],YBe=["*","mat-toolbar-row"];let XBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return n})(),ZBe=(()=>{class n{_elementRef=k(Vn);_platform=k(Ds);_document=k(pn);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(1&r&&ju(s,XBe,5),2&r){let o;wo(o=Co())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,i){2&r&&(Yh(i.color?"mat-"+i.color:""),_i("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[yi],ngContentSelectors:YBe,decls:2,vars:0,template:function(r,i){1&r&&(Qa(QBe),Ki(0),Ki(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return n})(),JBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or,or]})}return n})(),eUe=(()=>{class n{get vertical(){return this._vertical}set vertical(t){this._vertical=W9(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=W9(t)}_inset=!1;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,i){2&r&&(Zn("aria-orientation",i.vertical?"vertical":"horizontal"),_i("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[yi],decls:0,vars:0,template:function(r,i){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return n})(),xre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or,or]})}return n})();function tUe(n,e){1&n&&qt(0,"img",13),2&n&&Ye("src",rt(3).sevenElevenIconUrl,Ws)}function nUe(n,e){1&n&&qt(0,"img",14),2&n&&Ye("src",rt(3).familyMartIconUrl,Ws)}function rUe(n,e){if(1&n){const t=ya();Te(0,"button",9),dn("click",function(){fr(t);const i=rt().$implicit;return pr(rt().onSearchStore(i))}),Rt(1,tUe,1,1,"img",10)(2,nUe,1,1,"img",11),Te(3,"span",12),at(4),De()()}if(2&n){const t=rt().$implicit;xe(),Ye("ngIf",t.storeName.includes("7-11")),xe(),Ye("ngIf",t.storeName.includes("\u5168\u5bb6")),xe(2),Ya(t.storeName)}}function iUe(n,e){if(1&n&&(ga(0),Rt(1,rUe,5,3,"button",8),_a()),2&n){const t=rt();xe(),Ye("ngIf",t.user)}}let sUe=(()=>{class n{constructor(t,r){this.authService=t,this.dialog=r,this.favoriteStores=[],this.userUpdated=new un,this.favoriteStoresUpdated=new un,this.searchStore=new un,this.sevenElevenIconUrl=xs_sevenElevenUrl_icon,this.familyMartIconUrl=xs_familyMartUrl_icon}loginOrlogout(){this.user?(this.authService.logout(),this.user=null,this.favoriteStores=[],this.userUpdated.emit(null),this.favoriteStoresUpdated.emit([]),this.dialog.open(Ng,{width:"300px",data:{title:"\u767b\u51fa\u6210\u529f",message:"\u5df2\u9806\u5229\u767b\u51fa",imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(r=>{this.favoriteStores=[]})):this.dialog.open(CBe,{width:"500px",data:{}}).afterClosed().subscribe(r=>{r&&this.authService.getUser().subscribe(i=>{i&&i.emailVerified&&(this.user=i,this.userUpdated.emit(i))})})}onSearchStore(t){this.searchStore.emit(t)}static{this.\u0275fac=function(r){return new(r||n)(Me(WV),Me(kg))}}static{this.\u0275cmp=qn({type:n,selectors:[["app-sider"]],inputs:{user:"user",favoriteStores:"favoriteStores"},outputs:{userUpdated:"userUpdated",favoriteStoresUpdated:"favoriteStoresUpdated",searchStore:"searchStore"},decls:15,vars:4,consts:[["menu","matMenu"],[1,"toolbar"],["mat-icon-button","","aria-label","Menu",3,"matMenuTriggerFor"],[1,"text-with-shadow"],[1,"menu-header"],[4,"ngFor","ngForOf"],["mat-menu-item",""],[1,"px-3","py-1","text-white","text-center","bg-primary-default","rounded-full","shadow-sm",3,"click"],["mat-menu-item","","class","custom-menu-item",3,"click",4,"ngIf"],["mat-menu-item","",1,"custom-menu-item",3,"click"],["alt","7-11","class","store-icon",3,"src",4,"ngIf"],["alt","FamilyMart","class","store-icon",3,"src",4,"ngIf"],[1,"text-gray-600"],["alt","7-11",1,"store-icon",3,"src"],["alt","FamilyMart",1,"store-icon",3,"src"]],template:function(r,i){if(1&r){const s=ya();Te(0,"mat-toolbar",1)(1,"button",2)(2,"mat-icon"),at(3,"menu"),De()(),Te(4,"span",3),at(5,"\u53cb\u5584\u9ed1\u8c93 Friendly Cat"),De(),Te(6,"mat-menu",null,0)(8,"div",4),at(9),De(),qt(10,"mat-divider"),Rt(11,iUe,2,1,"ng-container",5),Te(12,"button",6)(13,"div",7),dn("click",function(){return fr(s),pr(i.loginOrlogout())}),at(14),De()()()()}if(2&r){const s=LC(7);xe(),Ye("matMenuTriggerFor",s),xe(8),Rn(" ",i.user?"\u60a8\u6536\u85cf\u7684\u5e97\u5bb6":"\u767b\u5165\u5f8c\u53ef\u6536\u85cf\u5e97\u5bb6"," "),xe(2),Ye("ngForOf",i.favoriteStores),xe(3),Rn(" ",i.user?i.user.displayName+" \u767b\u51fa":" \u767b\u5165"," ")}},dependencies:[gT,sg,yre,OBe,UI,WD,KBe,ZBe,eUe],styles:['@charset "UTF-8";.toolbar[_ngcontent-%COMP%]{background-color:#f4efe6;color:#019863;box-shadow:4px 0 6px #0000001a}.mat-menu-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.menu-header[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;font-weight:700;color:#a18249}.store-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px;display:inline-block;vertical-align:middle}.text-with-shadow[_ngcontent-%COMP%]{font-weight:700;text-shadow:2px 2px 5px rgba(0,0,0,.2)}']})}}return n})();const Rre=n=>({opacity:n});function oUe(n,e){if(1&n&&(Te(0,"div",27)(1,"span",28),at(2),Go(3,"async"),qt(4,"mat-progress-spinner",29),De()()),2&n){const t=rt();xe(2),Rn(" ",zu(3,1,t.loadingService.message$)," ")}}function aUe(n,e){1&n&&(Te(0,"div",30),at(1," \u770b\u770b\u9644\u8fd1\u6709\u5565\u597d\u5403\u7684\u5427\uff01 "),De())}function lUe(n,e){if(1&n&&(Te(0,"div",33),qt(1,"img",34),Te(2,"div",35)(3,"span"),at(4),De(),Te(5,"span",36),at(6),De()()()),2&n){const t=rt().$implicit,r=rt();xe(),eg("src",r.sevenElevenIconUrl,Ws),xe(3),Rn("",t.name,"\u9580\u5e02"),xe(2),Ya(t.addr)}}function cUe(n,e){if(1&n&&(Te(0,"div",33),qt(1,"img",37),Te(2,"div",35)(3,"span"),at(4),De(),Te(5,"span",36),at(6),De()()()),2&n){const t=rt().$implicit,r=rt();xe(),eg("src",r.familyMartIconUrl,Ws),xe(3),Rn("",t.name.replace("\u5e97",""),"\u9580\u5e02"),xe(2),Ya(t.addr)}}function uUe(n,e){if(1&n&&(Te(0,"mat-option",31),Rt(1,lUe,7,3,"div",32)(2,cUe,7,3,"div",32),De()),2&n){const t=e.$implicit;Ye("value",t),xe(),Ye("ngIf","7-11"===t.label),xe(),Ye("ngIf","\u5168\u5bb6"===t.label)}}function dUe(n,e){if(1&n&&(Te(0,"p",60),at(1),Go(2,"round"),De()),2&n){const t=rt(4).$implicit;xe(),Rn(" \u8ddd\u96e2\u60a8: ",UC(2,1,t.distance,1)," ")}}function hUe(n,e){1&n&&(Uo(),Te(0,"svg",61),qt(1,"path",62),De())}function fUe(n,e){1&n&&(Uo(),Te(0,"svg",63),qt(1,"path",62),De())}function pUe(n,e){if(1&n){const t=ya();Te(0,"div",65),dn("click",function(){fr(t);const i=rt().$implicit,s=rt(4).$implicit;return pr(rt().toggleSubCategoryDetails(s,i))}),qt(1,"img",66),Te(2,"div")(3,"span",67),at(4),De(),Te(5,"div",68),at(6),De()()()}if(2&n){const t=rt().$implicit,r=rt(4).$implicit,i=rt();JP("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n                      ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),_i("pointer-events-none",0===i.getSubCategoryTotalQty(r,t)),xe(),eg("alt",t.Name),Ye("src",t.ImageUrl,Ws)("ngStyle",fk(10,Rre,0===i.getSubCategoryTotalQty(r,t)?.3:1)),xe(3),Ya(t.Name),xe(2),Rn(" ",i.getSubCategoryTotalQty(r,t)," ")}}function mUe(n,e){if(1&n&&(ga(0),Rt(1,pUe,7,12,"div",64),_a()),2&n){const t=e.$implicit,r=rt(4).$implicit,i=rt();xe(),Ye("ngIf",i.getSubCategoryTotalQty(r,t)>0)}}function gUe(n,e){if(1&n&&(Te(0,"div",69),qt(1,"app-display",70),De()),2&n){const t=rt(5);xe(),Ye("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetails711)}}function _Ue(n,e){if(1&n){const t=ya();ga(0),Te(1,"div",44)(2,"div",45)(3,"div",46),qt(4,"img",47),De(),Te(5,"div",48)(6,"h2",49),at(7),Te(8,"a",50),qt(9,"img",51),De()(),Rt(10,dUe,3,4,"p",52),De()(),Te(11,"div",53)(12,"button",54),dn("click",function(){fr(t);const i=rt(3).$implicit;return pr(rt().toggleFavorite(i))}),Rt(13,hUe,2,0,"svg",55)(14,fUe,2,0,"svg",56),De()()(),Te(15,"div",57)(16,"div",58),Rt(17,mUe,2,1,"ng-container",26),Go(18,"slice"),De(),Rt(19,gUe,2,3,"div",59),De(),_a()}if(2&n){const t=rt(3).$implicit,r=rt();xe(4),Ye("src",r.sevenElevenIconUrl,Ws),xe(3),Rn(" 7-11",t.StoreName,"\u9580\u5e02 "),xe(),Jv("href","https://www.google.com/maps/search/7-ELEVEN",t.StoreName,"\u9580\u5e02",Ws),xe(2),Ye("ngIf",t.distance>=1),xe(3),Ye("ngIf",r.isFavorite(t)&&r.user),xe(),Ye("ngIf",!r.isFavorite(t)&&r.user),xe(3),Ye("ngForOf",pk(18,9,r.foodCategories,0,10)),xe(2),Ye("ngIf",r.selectedCategory&&r.selectedStore===t)}}function yUe(n,e){if(1&n&&(Te(0,"div",42),Rt(1,_Ue,20,13,"ng-container",43),De()),2&n){const t=rt(2).$implicit;xe(),Ye("ngIf","7-11"===t.label&&t.RemainingQty>0)}}function vUe(n,e){if(1&n&&(Te(0,"p",60),at(1),Go(2,"round"),De()),2&n){const t=rt(3).$implicit;xe(),Rn(" \u8ddd\u96e2\u60a8: ",UC(2,1,t.distance,1)," ")}}function bUe(n,e){1&n&&(Uo(),Te(0,"svg",61),qt(1,"path",62),De())}function EUe(n,e){1&n&&(Uo(),Te(0,"svg",63),qt(1,"path",62),De())}function IUe(n,e){if(1&n){const t=ya();Te(0,"div",65),dn("click",function(){const i=fr(t).$implicit,s=rt(3).$implicit;return pr(rt().toggleSubCategoryDetails(s,i))}),qt(1,"img",66),Te(2,"div")(3,"span",67),at(4),De(),Te(5,"div",68),at(6),De()()()}if(2&n){const t=e.$implicit,r=rt(3).$implicit,i=rt();JP("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n            ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),_i("pointer-events-none",0===i.getFSubCategoryQty(r,t)),xe(),eg("alt",i.getFCatName(t)),Ye("src",i.getFUrl(t),Ws)("ngStyle",fk(10,Rre,0===i.getFSubCategoryQty(r,t)?.3:1)),xe(3),Ya(i.getFCatName(t)),xe(2),Rn(" ",i.getFSubCategoryQty(r,t)," ")}}function wUe(n,e){if(1&n&&(Te(0,"div",73),qt(1,"app-display",74),De()),2&n){const t=rt(4);xe(),Ye("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetailsFamilyMart)}}function CUe(n,e){if(1&n){const t=ya();Te(0,"div",42)(1,"div",44)(2,"div",45)(3,"div",46),qt(4,"img",47),De(),Te(5,"div",48)(6,"h2",49),at(7),Te(8,"a",50),qt(9,"img",51),De()(),Rt(10,vUe,3,4,"p",52),De()(),Te(11,"div",53)(12,"button",54),dn("click",function(){fr(t);const i=rt(2).$implicit;return pr(rt().toggleFavorite(i))}),Rt(13,bUe,2,0,"svg",55)(14,EUe,2,0,"svg",56),De()()(),Te(15,"div",58),Rt(16,IUe,7,12,"div",71),Go(17,"slice"),De(),Rt(18,wUe,2,3,"div",72),De()}if(2&n){const t=rt(2).$implicit,r=rt();xe(4),Ye("src",r.familyMartIconUrl,Ws),xe(3),Rn(" ",t.name," "),xe(),Jv("href","https://www.google.com/maps/search/\u5168\u5bb6\u4fbf\u5229\u5546\u5e97",r.fStoreName(t.name),"",Ws),xe(2),Ye("ngIf",t.distance>=1),xe(3),Ye("ngIf",r.isFavorite(t)&&r.user),xe(),Ye("ngIf",!r.isFavorite(t)&&r.user),xe(2),Ye("ngForOf",pk(17,9,t.info,0,10)),xe(2),Ye("ngIf",r.selectedCategory&&r.selectedStore===t)}}function TUe(n,e){if(1&n&&(Te(0,"div",39)(1,"div",40),Rt(2,yUe,2,1,"div",41)(3,CUe,19,13,"div",41),De()()),2&n){const t=rt().$implicit;xe(2),Ye("ngIf",t.RemainingQty>0),xe(),Ye("ngIf","\u5168\u5bb6"===t.label)}}function AUe(n,e){if(1&n&&(ga(0),Rt(1,TUe,4,2,"div",38),_a()),2&n){const t=rt();xe(),Ye("ngIf",t.totalStoresShowList.length>0)}}const SUe=[{path:"**",component:(()=>{class n{constructor(t,r,i,s,o,a,l,c){this.http=t,this.geolocationService=r,this.sevenElevenService=i,this.familyMartService=s,this.authService=o,this.loadingService=a,this.dialog=l,this.firestore=c,this.user=null,this.searchTerm="",this.searchSelectedStore=null,this.selectedStoreName="",this.foodDetails711=[],this.foodDetailsFamilyMart=[],this.storeFilter="all",this.dropDown711List=[],this.dropDownFamilyMartList=[],this.unifiedDropDownList=[],this.sevenElevenIconUrl=xs_sevenElevenUrl_icon,this.familyMartIconUrl=xs_familyMartUrl_icon,this.zipcodes=[],this.cities=[],this.filteredDistricts=[],this.zipcodeList=[],this.selectedCity=null,this.selectedDistrict=null,this.selectedZipcode=null,this.foodCategories=[],this.nearby711Stores=[],this.nearbyFamilyMartStores=[],this.totalStoresShowList=[],this.filteredStoresList=[],this.favoriteStores=[],this.searchForm=new cf({selectedStoreName:new hg("")})}ngOnInit(){this.init()}getCityName(){return this.http.get("https://demeter.5fpro.com/tw/zipcodes.json").pipe(ii(r=>{this.zipcodes=r,this.cities=[...new Set(r.map(i=>i.city_name))],this.zipcodeList=[...new Set(r.map(i=>i.zipcode))]}))}onCityChange(t){this.filteredDistricts=this.zipcodes.filter(r=>r.city_name===t),this.selectedDistrict=null,this.selectedZipcode=null}onDistrictChange(t){this.selectedZipcode=t}handleError(t){switch(t.code){case 1:return"\u4f7f\u7528\u8005\u62d2\u7d55\u4f4d\u7f6e\u5b58\u53d6";case 2:return"\u7121\u6cd5\u53d6\u5f97\u4f4d\u7f6e\u8cc7\u8a0a";case 3:return"\u4f4d\u7f6e\u8acb\u6c42\u903e\u6642";default:return"\u672a\u77e5\u932f\u8aa4"}}init(){this.authService.getUser().subscribe(t=>{t&&t.emailVerified&&(this.user=t,this.loadFavoriteStores())}),this.loadingService.show("\u8f09\u5165\u5546\u5e97\u8cc7\u8a0a\u4e2d\uff0c\u8acb\u7a0d\u5f8c\u55b5"),this.sevenElevenService.getFoodDetails().subscribe(t=>{this.foodDetails711=t}),this.familyMartService.getFoodDetails().subscribe(t=>{this.foodDetailsFamilyMart=t}),this.getFamilyMartAllStore(),qe(!0).pipe(Yt(()=>this.sevenElevenService.getAccessToken()),Yt(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):qe([])),Zu(t=>(console.error("Error:",t),qe([])))).subscribe(t=>{t&&t.element?(this.foodCategories=t.element,this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}getFamilyMartAllStore(){this.familyMartService.getStores().subscribe(t=>{t.length>0&&(this.dropDownFamilyMartList=t)})}getFoodSubCategoryImage(t){for(let r of this.foodCategories)if(r.Children.find(s=>s.ID===t))return r.ImageUrl;return null}getSubCategoryTotalQty(t,r){let i=0;for(const s of t.CategoryStockItems)for(const o of r.Children)s.NodeID===o.ID&&(i+=s.RemainingQty);return i}toggleSubCategoryDetails(t,r){this.selectedCategory=r,this.selectedStore=t}onInput(t){const r=t.target.value;r.length>=2?(this.loadingService.show("\u6b63\u5728\u70ba\u60a8\u641c\u5c0b\u5e97\u5bb6"),this.unifiedDropDownList=[],this.latitude||this.longitude?qe(!0).pipe(Yt(()=>this.sevenElevenService.getAccessToken()),Yt(i=>i&&i.element?(sessionStorage.setItem("711Token",i.element),this.sevenElevenService.getStoreByAddress(r)):qe([]))).subscribe(i=>{if(i&&i.isSuccess){this.dropDown711List=i.element;const s=this.dropDownFamilyMartList.map(d=>({...d,Name:d.Name.replace("\u5168\u5bb6","")})).filter(d=>d.Name.includes(r)||d.addr.includes(r)),o=this.dropDown711List.map(d=>({...d,Name:d.StoreName.replace("711","")})).filter(d=>d.Name.includes(r)||d.Address.includes(r)),a=s.map(d=>({name:d.Name,addr:d.addr,label:"\u5168\u5bb6",longitude:d.px_wgs84,latitude:d.py_wgs84}));o.map(d=>({name:d.StoreName,addr:d.Address,label:"7-11",longitude:d.Longitude,latitude:d.Latitude})).forEach(d=>{this.unifiedDropDownList.some(m=>m.name===d.name&&m.addr===d.addr)||this.unifiedDropDownList.push(d)}),a.forEach(d=>{this.unifiedDropDownList.some(m=>m.name===d.name&&m.addr===d.addr)||this.unifiedDropDownList.push(d)});const c=this.unifiedDropDownList.filter(d=>d.name.includes(r)).sort((d,m)=>(0,nd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:d.latitude,longitude:d.longitude})-(0,nd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:m.latitude,longitude:m.longitude})),u=this.unifiedDropDownList.filter(d=>d.addr.includes(r)&&!c.includes(d)).sort((d,m)=>(0,nd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:d.latitude,longitude:d.longitude})-(0,nd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:m.latitude,longitude:m.longitude}));this.unifiedDropDownList=[...c,...u],this.loadingService.hide()}},i=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",i),this.loadingService.hide()}):zn(this.geolocationService.getCurrentPosition()).pipe(Yt(i=>{const o=i.coords.longitude;return this.latitude=i.coords.latitude,this.longitude=o,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),qe([])}),Yt(()=>this.sevenElevenService.getAccessToken()),Yt(i=>i&&i.element?(sessionStorage.setItem("711Token",i.element),this.sevenElevenService.getStoreByAddress(r)):[])).subscribe(i=>{if(i&&i.isSuccess){this.dropDown711List=i.element;const s=this.dropDownFamilyMartList.map(d=>({...d,Name:d.Name.replace("\u5168\u5bb6","")})).filter(d=>d.Name.includes(r)||d.addr.includes(r)),o=this.dropDown711List.map(d=>({...d,Name:d.StoreName.replace("711","")})).filter(d=>d.Name.includes(r)||d.Address.includes(r)),a=s.map(d=>({name:d.Name,addr:d.addr,label:"\u5168\u5bb6",longitude:d.px_wgs84,latitude:d.py_wgs84}));o.map(d=>({name:d.StoreName,addr:d.Address,label:"7-11",longitude:d.Longitude,latitude:d.Latitude})).forEach(d=>{this.unifiedDropDownList.some(m=>m.name===d.name&&m.addr===d.addr)||this.unifiedDropDownList.push(d)}),a.forEach(d=>{this.unifiedDropDownList.some(m=>m.name===d.name&&m.addr===d.addr)||this.unifiedDropDownList.push(d)});const c=this.unifiedDropDownList.filter(d=>d.name.includes(r)).sort((d,m)=>(0,nd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:d.latitude,longitude:d.longitude})-(0,nd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:m.latitude,longitude:m.longitude})),u=this.unifiedDropDownList.filter(d=>d.addr.includes(r)&&!c.includes(d)).sort((d,m)=>(0,nd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:d.latitude,longitude:d.longitude})-(0,nd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:m.latitude,longitude:m.longitude}));this.unifiedDropDownList=[...c,...u],this.loadingService.hide()}},i=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",i),this.loadingService.hide()})):this.unifiedDropDownList=[]}onOptionSelect(t,r,i){this.searchSelectedStore=t?.option.value.name,this.searchTerm=t?.option.value.label+t?.option.value.name.replace("\u5e97","")+"\u9580\u5e02";const a=void 0!==i?i:Number(t?.option.value.longitude),l=void 0!==r?r:Number(t?.option.value.latitude);this.loadingService.show("\u6b63\u5728\u641c\u5c0b\u5e97\u5bb6\u55b5"),zn(this.geolocationService.getCurrentPosition()).pipe(Yt(c=>{const d=c.coords.longitude;return this.latitude=c.coords.latitude,this.longitude=d,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),qe([])}),Yt(c=>c?this.sevenElevenService.getAccessToken():[]),Yt(c=>c&&c.element?(sessionStorage.setItem("711Token",c.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):qe([]))).subscribe(c=>{c?(this.searchCombineAndTransformStores(l,a),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}onSubmit(){console.log("\u8f38\u5165\u7684\u641c\u5c0b\u95dc\u9375\u5b57:",this.searchSelectedStore)}onUseCurrentLocation(){this.unifiedDropDownList=[],this.searchTerm="",this.loadingService.show("\u641c\u5c0b\u5e97\u5bb6\u4e2d\u55b5"),zn(this.geolocationService.getCurrentPosition()).pipe(Yt(t=>{const i=t.coords.longitude;return this.latitude=t.coords.latitude,this.longitude=i,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),qe([])}),Yt(t=>t?this.sevenElevenService.getAccessToken():[]),Yt(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):qe([]))).subscribe(t=>{t?(this.searchCombineAndTransformStores(),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}combineStoreList(t,r){if(this.totalStoresShowList=[],this.nearby711Stores.forEach(i=>{const s={...i,storeName:`7-11${i.StoreName}\u9580\u5e02`,label:"7-11",distance:i.Distance,remainingQty:i.RemainingQty,showDistance:!0};this.totalStoresShowList.push(s)}),this.nearbyFamilyMartStores.forEach(i=>{const s={...i,storeName:i.name,label:"\u5168\u5bb6",distance:i.distance,showDistance:!0};this.totalStoresShowList.push(s)}),t&&r){if(this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),this.totalStoresShowList[0].distance>1||0===this.totalStoresShowList[0].remainingQty)return this.dialog.open(Ng,{data:{message:"\u8a72\u9580\u5e02\u7121\u5eab\u5b58\uff0c\u8acb\u91cd\u65b0\u641c\u5c0b\u3002",imgPath:"assets/NoResult.jpg"}}).afterClosed().subscribe(s=>{this.totalStoresShowList=[],this.searchTerm=""}),void(this.totalStoresShowList=[]);this.totalStoresShowList=[{...this.totalStoresShowList[0],showDistance:!1}]}else this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),console.log("\u6700\u8fd1\u7684\u5546\u5e97:",this.totalStoresShowList)}searchCombineAndTransformStores(t,r){const i=t||this.latitude,s=r||this.longitude,a={Latitude:i,Longitude:s};yN({sevenEleven:this.sevenElevenService.getNearByStoreList({CurrentLocation:{Latitude:i,Longitude:s},SearchLocation:{Latitude:i,Longitude:s}}),familyMart:this.familyMartService.getNearByStoreList(a)}).subscribe(({sevenEleven:l,familyMart:c})=>{l&&l.element&&l.element.StoreStockItemList&&(this.nearby711Stores=l.element.StoreStockItemList.sort((u,d)=>u.Distance-d.Distance)),c&&1===c.code&&(this.nearbyFamilyMartStores=c.data.sort((u,d)=>u.distance-d.distance)),t&&r?this.combineStoreList(t,r):this.combineStoreList()},l=>{console.error("Error fetching store data:",l)})}getFStoreQty(t){var r=0;return t.info.forEach(i=>{r+=i.qty}),r}getFUrl(t){return t.iconURL}getFCatName(t){return t.name}getFSubCategoryQty(t,r){return r.qty}fStoreName(t){return t?t.replace("\u5168\u5bb6",""):""}loadFavoriteStores(){this.user.emailVerified&&this.firestore.collection("users").doc(this.user.uid).collection("favorites").valueChanges().subscribe(r=>{this.favoriteStores=r,console.log("favoriteStores",this.favoriteStores)})}toggleFavorite(t){if(this.user.emailVerified){const i=this.firestore.collection("users").doc(this.user.uid).collection("favorites").doc(t.storeName);this.isFavorite(t)?this.dialog.open(Ng,{data:{title:"\u53d6\u6d88\u6536\u85cf",message:`\u5df2\u5c07\u300e${t.storeName}\u300f\u5f9e\u6536\u85cf\u4e2d\u79fb\u9664`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(o=>{i.delete()}):this.dialog.open(Ng,{data:{title:"\u65b0\u589e\u6536\u85cf",message:`\u300e${t.storeName}\u300f\u5df2\u52a0\u5165\u60a8\u7684\u6536\u85cf\u5e97\u5bb6`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(o=>{const a={storeName:t.storeName};t.StoreName&&(a.store711Name=t.StoreName,a.label="7-11"),t.longitude&&t.latitude&&(a.storeFLongitude=t.longitude,a.storeFLatitude=t.latitude,a.label="\u5168\u5bb6"),i.set(a)})}else console.log("\u7528\u6236\u5c1a\u672a\u767b\u5165\u6216\u4fe1\u7bb1\u672a\u9a57\u8b49")}isFavorite(t){return this.favoriteStores.some(r=>r.storeName===t.storeName)}onUserUpdated(t){this.user=t,t&&this.loadFavoriteStores()}onFavoriteStoresUpdated(t){this.favoriteStores=t}onFavoriteStoreSearch(t){console.log("\u641c\u5c0b\u6536\u85cf\u5e97\u5bb6",t),this.loadingService.show("\u5e6b\u4f60\u627e\u770b\u770b\u5537");var r=0,i=0;"\u5168\u5bb6"===t.label?(this.onOptionSelect(null,r=t.storeFLatitude,i=t.storeFLongitude),this.searchTerm=""):zn(this.geolocationService.getCurrentPosition()).pipe(Yt(s=>{const a=s.coords.longitude;return this.latitude=s.coords.latitude,this.longitude=a,qe([])}),Yt(s=>s?this.sevenElevenService.getAccessToken():[]),Yt(s=>s&&s.element?(sessionStorage.setItem("711Token",s.element),this.sevenElevenService.getStoreByAddress(t.store711Name)):qe([]))).subscribe(s=>{s?(r=s.element[0].Latitude,i=s.element[0].Longitude,console.log(r,i),this.onOptionSelect(null,r,i),this.searchTerm=""):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}static{this.\u0275fac=function(r){return new(r||n)(Me(gb),Me(PAe),Me(pQ),Me(kAe),Me(WV),Me(s1e),Me(kg),Me(OVe))}}static{this.\u0275cmp=qn({type:n,selectors:[["app-new-search"]],decls:33,vars:12,consts:[["auto","matAutocomplete"],[3,"userUpdated","favoriteStoresUpdated","searchStore","user","favoriteStores"],[1,"container","mx-auto","my-3","p-6","bg-primary-white","max-w-4xl"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],["src","assets/S__222224406.jpg","alt","Friendly Superhero",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24"],[1,"text-primary-default","sm:text-xl","font-bold","ml-4","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],["class","loading-container",4,"ngIf"],["class","text-primary-default lg:text-md sm:text-xl",4,"ngIf"],[1,"text-xs","sm:text-sm","text-success","mb-4","text-center"],[1,"w-full",3,"ngSubmit"],[1,"flex","justify-center","w-full"],[1,"w-full","px-4","py-3"],[1,"flex","flex-col","h-12","w-full"],[1,"flex","w-full","items-stretch","rounded-lg","h-full"],["data-icon","MagnifyingGlass","data-size","24px","data-weight","regular",1,"text-primary-default","flex","border-none","bg-primary-light","items-center","justify-center","pl-4","rounded-l-lg","border-r-0"],["xmlns","http://www.w3.org/2000/svg","width","24px","height","24px","fill","currentColor","viewBox","0 0 256 256"],["d","M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"],["mat-input","","placeholder","\u8f38\u5165\u5e97\u540d\u6216\u5730\u5740\u641c\u5c0b","name","first",1,"flex","w-full","flex-1","resize-none","overflow-hidden","rounded-lg","text-primary-default","focus:outline-none","focus:ring-0","border-none","bg-primary-light","focus:border-transparent","focus:bg-inherit","h-full","placeholder:text-primary-default","px-4","rounded-l-none","border-l-3","pl-2","text-base","font-normal","leading-normal",3,"ngModelChange","input","matAutocomplete","ngModel"],[3,"optionSelected"],["class","p-2 hover:bg-primary-light focus:bg-primary-default",3,"value",4,"ngFor","ngForOf"],[1,"flex","px-4","py-3","justify-center","items-center"],["type","button",1,"flex","min-w-[84px]","max-w-[480px]","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","h-10","px-4","bg-success","text-white","gap-2","pl-4","text-sm","font-bold","leading-normal","tracking-[0.015em]","text-xs","sm:text-sm","md:text-base",3,"click"],["data-icon","MapPin","data-size","20px","data-weight","regular",1,"text-white"],["xmlns","http://www.w3.org/2000/svg","width","20px","height","20px","fill","currentColor","viewBox","0 0 256 256"],["d","M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z"],[1,"truncate"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"flex","items-center","text-primary-default","lg:text-md","sm:text-xl"],["mode","indeterminate","diameter","20",1,"text-primary-default"],[1,"text-primary-default","lg:text-md","sm:text-xl"],[1,"p-2","hover:bg-primary-light","focus:bg-primary-default",3,"value"],["class","flex items-center gap-2",4,"ngIf"],[1,"flex","items-center","gap-2"],["alt","7-Eleven Icon",1,"w-4","h-4",3,"src"],[1,"flex","flex-col"],[1,"text-xs","sm:text-sm","text-gray-500"],["alt","FamilyMart Icon",1,"w-4","h-4",3,"src"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],[1,"w-full","lg:w-4/5","max-w-screen-lg"],["class","store p-4 border border-gray-300 rounded-lg shadow-md mb-6",4,"ngIf"],[1,"store","p-4","border","border-gray-300","rounded-lg","shadow-md","mb-6"],[4,"ngIf"],[1,"flex","items-center","gap-4","bg-primary-white","px-4","min-h-[72px]","py-2","justify-between"],[1,"flex","items-center","gap-4"],["data-icon","Storefront","data-size","24px","data-weight","regular",1,"text-dark","border","border-gray-200","flex","items-center","justify-center","rounded-lg","bg-primary-light","shrink-0","size-12",2,"padding","16px"],["alt","Store Icon","width","24px","height","24px","fill","currentColor",3,"src"],[1,"flex","flex-col","justify-center","text-lg","sm:text-xl","font-semibold"],[1,"text-dark","text-base","font-medium","leading-normal","line-clamp-1"],["target","_blank",1,"ml-2",3,"href"],["src","assets/GoogleMap_icon.png","alt","Google Maps",1,"w-6","h-6","inline-block"],["class","text-success text-sm font-normal leading-normal line-clamp-2",4,"ngIf"],[1,"flex","items-start","justify-end"],[1,"text-red-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"food-categories","mt-4"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-4","gap-0"],["class","sub-category-details mt-4",4,"ngIf"],[1,"text-success","text-sm","font-normal","leading-normal","line-clamp-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[3,"class","pointer-events-none","click",4,"ngIf"],[3,"click"],[1,"w-12","h-12","sm:w-14","sm:h-14","md:w-16","md:h-16","lg:w-20","lg:h-20","mx-auto","mb-2","object-cover",3,"src","alt","ngStyle"],[1,"block","text-sm","sm:text-base","font-semibold"],[1,"inline-block","text-xs","bg-orange-200","text-orange-900","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"sub-category-details","mt-4"],[3,"store","category","foodDetails"],[3,"class","pointer-events-none","click",4,"ngFor","ngForOf"],["class","sub-category-details mt-4 border-gray-700",4,"ngIf"],[1,"sub-category-details","mt-4","border-gray-700"],[1,"border-gray-700",3,"store","category","foodDetails"]],template:function(r,i){if(1&r){const s=ya();Te(0,"app-sider",1),dn("userUpdated",function(a){return fr(s),pr(i.onUserUpdated(a))})("favoriteStoresUpdated",function(a){return fr(s),pr(i.onFavoriteStoresUpdated(a))})("searchStore",function(a){return fr(s),pr(i.onFavoriteStoreSearch(a))}),De(),Te(1,"div",2),ga(2),Te(3,"div",3),qt(4,"img",4),Te(5,"h5",5),Rt(6,oUe,5,3,"div",6),Go(7,"async"),Rt(8,aUe,2,0,"div",7),Go(9,"async"),De()(),Te(10,"div",8)(11,"p"),at(12,"* \u8cc7\u8a0a\u50c5\u4f9b\u53c3\u8003\uff0c\u8acb\u4ee5\u5e97\u5167\u5546\u54c1\u70ba\u6e96"),De()(),Te(13,"form",9),dn("ngSubmit",function(){return fr(s),pr(i.onSubmit())}),Te(14,"div",10)(15,"div",11)(16,"label",12)(17,"div",13)(18,"div",14),Uo(),Te(19,"svg",15),qt(20,"path",16),De()(),Ph(),Te(21,"input",17),lk("ngModelChange",function(a){return fr(s),function E5(n,e){const t=i3(n);return t&&n.set(e),t}(i.searchTerm,a)||(i.searchTerm=a),pr(a)}),dn("input",function(a){return fr(s),pr(i.onInput(a))}),De()()()()(),Te(22,"mat-autocomplete",18,0),dn("optionSelected",function(a){return fr(s),pr(i.onOptionSelect(a))}),Rt(24,uUe,3,3,"mat-option",19),De(),Te(25,"div",20)(26,"button",21),dn("click",function(){return fr(s),pr(i.onUseCurrentLocation())}),Te(27,"div",22),Uo(),Te(28,"svg",23),qt(29,"path",24),De()(),Ph(),Te(30,"span",25),at(31,"\u4f7f\u7528\u76ee\u524d\u4f4d\u7f6e"),De()()()(),_a(),De(),Rt(32,AUe,2,1,"ng-container",26)}if(2&r){const s=LC(23);Ye("user",i.user)("favoriteStores",i.favoriteStores),xe(6),Ye("ngIf",zu(7,8,i.loadingService.loading$)),xe(2),Ye("ngIf",!zu(9,10,i.loadingService.loading$)),xe(13),Ye("matAutocomplete",s),ak("ngModel",i.searchTerm),xe(3),Ye("ngForOf",i.unifiedDropDownList),xe(8),Ye("ngForOf",i.totalStoresShowList)}},dependencies:[gT,sg,_7,ON,yb,IN,wN,NN,BT,QK,jVe,r2e,nre,oBe,sUe,v7,E7,_re]})}}return n})()}];let DUe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({imports:[H9.forRoot(SUe),H9]})}}return n})(),xUe=(()=>{class n{constructor(){this.title="friendly-time"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&qt(0,"router-outlet")},dependencies:[s1]})}}return n})();const NUe={provide:new ye("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.reposition()}}),deps:[cs],useFactory:function kUe(n){return()=>n.scrollStrategies.reposition()}};let Mre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[NUe],imports:[qb,Pg,or,Wb,VI,Pg,or]})}return n})(),Pre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or,or]})}return n})(),jUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({})}return n})(),zUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({imports:[or,VI,VI,jUe,or]})}return n})(),HUe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({imports:[I7,F8,VI,Mre,Pg,zUe,Zne,L8,a2e,vre,FBe,Pre,Sre,JBe,xre]})}}return n})();function kre(n){return new K(3e3,!1)}function jd(n){switch(n.length){case 0:return new Xb;case 1:return n[0];default:return new JK(n)}}function Nre(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((m,y)=>{let b=y,T=m;if("offset"!==y)switch(b=n.normalizePropertyName(b,i),T){case"!":T=t.get(y);break;case Lc:T=r.get(y);break;default:T=n.normalizeStyleValue(y,b,T,i)}d.set(b,T)}),u||s.push(d),a=d,o=c}),i.length)throw function hje(){return new K(3502,!1)}();return s}function PU(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&kU(t,"start",n)));break;case"done":n.onDone(()=>r(t&&kU(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&kU(t,"destroy",n)))}}function kU(n,e,t){const s=NU(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function NU(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function na(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Ore(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Cje=typeof document>"u"?null:document.documentElement;function OU(n){const e=n.parentNode||n.host||null;return e===Cje?null:e}let up=null,Fre=!1;function Lre(n,e){for(;e;){if(e===n)return!0;e=OU(e)}return!1}function Vre(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let FU=(()=>{class n{validateStyleProperty(t){return function Aje(n){up||(up=function Sje(){return typeof document<"u"?document.body:null}()||{},Fre=!!up.style&&"WebkitAppearance"in up.style);let e=!0;return up.style&&!function Tje(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in up.style,!e&&Fre&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in up.style)),e}(t)}containsElement(t,r){return Lre(t,r)}getParentElement(t){return OU(t)}query(t,r,i){return Vre(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new Xb(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class LU{static{this.NOOP=new FU}}class VU{}const xje=1e3,BU="ng-enter",qD="ng-leave",KD="ng-trigger",QD=".ng-trigger",Ure="ng-animating",UU=".ng-animating";function ou(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:jU(parseFloat(e[1]),e[2])}function jU(n,e){return"s"===e?n*xje:n}function YD(n,e,t){return n.hasOwnProperty("duration")?n:function Mje(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(kre()),{duration:0,delay:0,easing:""};i=jU(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=jU(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function $Ue(){return new K(3100,!1)}()),a=!0),s<0&&(e.push(function WUe(){return new K(3101,!1)}()),a=!0),a&&e.splice(l,0,kre())}return{duration:i,delay:s,easing:o}}(n,e,t)}function tc(n,e,t){e.forEach((r,i)=>{const s=HU(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function dp(n,e){e.forEach((t,r)=>{const i=HU(r);n.style[i]=""})}function zI(n){return Array.isArray(n)?1==n.length?n[0]:function yAe(n,e=null){return{type:Pt.Sequence,steps:n,options:e}}(n):n}const zU=new RegExp("{{\\s*(.+?)\\s*}}","g");function zre(n){let e=[];if("string"==typeof n){let t;for(;t=zU.exec(n);)e.push(t[1]);zU.lastIndex=0}return e}function HI(n,e,t){const r=`${n}`,i=r.replace(zU,(s,o)=>{let a=e[o];return null==a&&(t.push(function qUe(){return new K(3003,!1)}()),a=""),a.toString()});return i==r?n:i}const Nje=/-+([a-z0-9])/g;function HU(n){return n.replace(Nje,(...e)=>e[1].toUpperCase())}function ra(n,e,t){switch(e.type){case Pt.Trigger:return n.visitTrigger(e,t);case Pt.State:return n.visitState(e,t);case Pt.Transition:return n.visitTransition(e,t);case Pt.Sequence:return n.visitSequence(e,t);case Pt.Group:return n.visitGroup(e,t);case Pt.Animate:return n.visitAnimate(e,t);case Pt.Keyframes:return n.visitKeyframes(e,t);case Pt.Style:return n.visitStyle(e,t);case Pt.Reference:return n.visitReference(e,t);case Pt.AnimateChild:return n.visitAnimateChild(e,t);case Pt.AnimateRef:return n.visitAnimateRef(e,t);case Pt.Query:return n.visitQuery(e,t);case Pt.Stagger:return n.visitStagger(e,t);default:throw function KUe(){return new K(3004,!1)}()}}function $U(n,e){return window.getComputedStyle(n)[e]}const Lje=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Hre extends VU{normalizePropertyName(e,t){return HU(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Lje.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function QUe(){return new K(3005,!1)}())}return o+s}}const XD="*";const ZD=new Set(["true","1"]),JD=new Set(["false","0"]);function $re(n,e){const t=ZD.has(n)||JD.has(n),r=ZD.has(e)||JD.has(e);return(i,s)=>{let o=n==XD||n==i,a=e==XD||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?ZD.has(n):JD.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?ZD.has(e):JD.has(e)),o&&a}}const jje=new RegExp("s*:selfs*,?","g");function WU(n,e,t,r){return new zje(n).build(e,t,r)}class zje{constructor(e){this._driver=e}build(e,t,r){const i=new Wje(t);return this._resetContextStyleTimingState(i),ra(this,zI(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function YUe(){return new K(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Pt.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==Pt.Transition){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function XUe(){return new K(3007,!1)}())}),{type:Pt.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{zre(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(function ZUe(){return new K(3008,!1)}(0,s.values()))}return{type:Pt.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ra(this,zI(e.animation),t),i=function Vje(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Bje(n,e,t){if(":"==n[0]){const l=function Uje(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function lje(){return new K(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function aje(){return new K(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push($re(i,o)),"<"==s[0]&&(i!=XD||o!=XD)&&e.push($re(o,i))}(r,t,e)):t.push(n),t}(e.expr,t.errors);return{type:Pt.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:hp(e.options)}}visitSequence(e,t){return{type:Pt.Sequence,steps:e.steps.map(r=>ra(this,r,t)),options:hp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=ra(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Pt.Group,steps:s,options:hp(e.options)}}visitAnimate(e,t){const r=function qje(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return GU(YD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=GU(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=YD(t,e);return GU(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Si({});if(s.type==Pt.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Si(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:Pt.Animate,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Lc?r.push(a):t.errors.push(new K(3002,!1)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:Pt.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(function eje(){return new K(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:i}),t.options&&function kje(n,e,t){const r=e.params||{},i=zre(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function GUe(){return new K(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:Pt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function tje(){return new K(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(B=>{const V=this._makeStyleAst(B,t);let Q=null!=V.offset?V.offset:function Gje(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),be=0;return null!=Q&&(s++,be=V.offset=Q),l=l||be<0||be>1,a=a||be<c,c=be,o.push(be),V});l&&t.errors.push(function nje(){return new K(3012,!1)}()),a&&t.errors.push(function rje(){return new K(3200,!1)}());const d=e.steps.length;let m=0;s>0&&s<d?t.errors.push(function ije(){return new K(3202,!1)}()):0==s&&(m=1/(d-1));const y=d-1,b=t.currentTime,T=t.currentAnimateTimings,M=T.duration;return u.forEach((B,V)=>{const Q=m>0?V==y?1:m*V:o[V],be=Q*M;t.currentTime=b+T.delay+be,T.duration=be,this._validateStyleAst(B,t),B.offset=Q,r.styles.push(B)}),r}visitReference(e,t){return{type:Pt.Reference,animation:ra(this,zI(e.animation),t),options:hp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Pt.AnimateChild,options:hp(e.options)}}visitAnimateRef(e,t){return{type:Pt.AnimateRef,animation:this.visitReference(e.animation,t),options:hp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Hje(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(jje,"")),n=n.replace(/@\*/g,QD).replace(/@\w+/g,t=>QD+"-"+t.slice(1)).replace(/:animating/g,UU),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,na(t.collectedStyles,t.currentQuerySelector,new Map);const a=ra(this,zI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Pt.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:hp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function sje(){return new K(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:YD(e.timings,t.errors,!0);return{type:Pt.Stagger,animation:ra(this,zI(e.animation),t),timings:r,options:null}}}class Wje{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hp(n){return n?(n={...n}).params&&(n.params=function $je(n){return n?{...n}:null}(n.params)):n={},n}function GU(n,e,t){return{duration:n,delay:e,easing:t}}function qU(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class ex{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Yje=new RegExp(":enter","g"),Zje=new RegExp(":leave","g");function KU(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new Jje).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class Jje{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new ex;const d=new QU(e,t,c,i,s,u,[]);d.options=l;const m=l.delay?ou(l.delay):0;d.currentTimeline.delayNextStep(m),d.currentTimeline.setStyles([o],null,d.errors,l),ra(this,r,d);const y=d.timelines.filter(b=>b.containsAnimation());if(y.length&&a.size){let b;for(let T=y.length-1;T>=0;T--){const M=y[T];if(M.element===t){b=M;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,d.errors,l)}return y.length?y.map(b=>b.buildKeyframes()):[qU(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:ou(HI(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?ou(r.duration):null,a=null!=r.delay?ou(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ra(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){i.previousNode.type==Pt.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=tx);const o=ou(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ra(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ou(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),ra(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return YD(t.params?HI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;s.type==Pt.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ou(i.delay):0;s&&(t.previousNode.type===Pt.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=tx);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),ra(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;ra(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const tx={};class QU{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new nx(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ou(r.duration)),null!=r.delay&&(i.delay=ou(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=HI(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new QU(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=tx,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new eze(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Yje,"."+this._enterClassName)).replace(Zje,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function oje(){return new K(3014,!1)}()),a}}class nx{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new nx(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Lc),this._currentKeyframe.set(t,Lc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function tze(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r??=e.keys();for(let s of r)t.set(s,Lc)}else for(let[s,o]of i)t.set(s,o)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=HI(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Lc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{"!"===u?e.add(d):u===Lc&&t.add(d)}),r||c.set("offset",l/this.duration),i.push(c)});const s=[...e.values()],o=[...t.values()];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return qU(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class eze extends nx{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);const c=new Map(e[0]);c.set("offset",qre(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let m=new Map(e[d]);const y=m.get("offset");m.set("offset",qre((t+y*r)/o)),s.push(m)}r=o,t=0,i="",e=s}return qU(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function qre(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function Kre(n,e,t,r,i,s,o,a,l,c,u,d,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:m}}const YU={};class Qre{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function nze(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,u){const d=[],m=this.ast.options&&this.ast.options.params||YU,b=this.buildStyles(r,a&&a.params||YU,d),T=l&&l.params||YU,M=this.buildStyles(i,T,d),B=new Set,V=new Map,Q=new Map,be="void"===i,Be={params:Yre(T,m),delay:this.ast.options?.delay},je=u?[]:KU(e,t,this.ast.animation,s,o,b,M,Be,c,d);let H=0;return je.forEach(L=>{H=Math.max(L.duration+L.delay,H)}),d.length?Kre(t,this._triggerName,r,i,be,b,M,[],[],V,Q,H,d):(je.forEach(L=>{const W=L.element,J=na(V,W,new Set);L.preStyleProps.forEach(re=>J.add(re));const ne=na(Q,W,new Set);L.postStyleProps.forEach(re=>ne.add(re)),W!==t&&B.add(W)}),Kre(t,this._triggerName,r,i,be,b,M,je,[...B.values()],V,Q,H))}}function Yre(n,e){const t={...e};return Object.entries(n).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class rze{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Yre(e,this.defaultParams);return this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=HI(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class sze{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new rze(i.style,i.options&&i.options.params||{},r))}),Xre(this.states,"true","1"),Xre(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Qre(e,i,this.states))}),this.fallbackTransition=function oze(n,e){return new Qre(n,{type:Pt.Transition,animation:{type:Pt.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Xre(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const aze=new ex;class lze{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=WU(this._driver,t,r,[]);if(r.length)throw function fje(){return new K(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Nre(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=KU(this._driver,t,s,BU,qD,new Map,new Map,r,aze,i),o.forEach(u=>{const d=na(a,u.element,new Map);u.postStyleProps.forEach(m=>d.set(m,null))})):(i.push(function pje(){return new K(3300,!1)}()),o=[]),i.length)throw function mje(){return new K(3504,!1)}();a.forEach((u,d)=>{u.forEach((m,y)=>{u.set(y,this._driver.computeStyle(d,y,Lc))})});const c=jd(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function gje(){return new K(3301,!1)}();return t}listen(e,t,r,i){const s=NU(t,"","","");return PU(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Zre="ng-animate-queued",XU="ng-animate-disabled",fze=[],Jre={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},pze={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hl="__ng_removed";class ZU{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function yze(n){return n??null}(r?e.value:e),r){const{value:s,...o}=e;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const $I="void",JU=new ZU($I);class mze{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ma(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function _je(){return new K(3302,!1)}();if(null==r||0==r.length)throw function yje(){return new K(3303,!1)}();if(!function vze(n){return"start"==n||"done"==n}(r))throw function vje(){return new K(3400,!1)}();const s=na(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=na(this._engine.statesByElement,e,new Map);return a.has(t)||(Ma(e,KD),Ma(e,KD+"-"+t),a.set(t,JU)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function bje(){return new K(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new ej(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ma(e,KD),Ma(e,KD+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new ZU(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=JU),c.value!==$I&&l.value===c.value){if(!function Ize(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const T=[],M=s.matchStyles(l.value,l.params,T),B=s.matchStyles(c.value,c.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{dp(e,M),tc(e,B)})}return}const m=na(this._engine.playersByElement,e,[]);m.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let y=s.matchTransition(l.value,c.value,e,c.params),b=!1;if(!y){if(!i)return;y=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:b}),b||(Ma(e,Zre),o.onStart(()=>{W_(e,Zre)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const M=this._engine.playersByElement.get(e);if(M){let B=M.indexOf(o);B>=0&&M.splice(B,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,QD,!0);r.forEach(i=>{if(i[hl])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,$I,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&jd(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||JU,u=new ZU($I),d=new ej(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[hl];(!s||s===Jre)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ma(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=NU(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,PU(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class gze{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new mze(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(rx(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!rx(t))return;const s=t[hl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ma(e,XU)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),W_(e,XU))}removeNode(e,t,r){if(rx(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[hl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return rx(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,QD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,UU,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return jd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[hl];if(t&&t.setForRemoval){if(e[hl]=Jre,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(XU)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ma(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?jd(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Eje(){return new K(3402,!1)}()}_flushAnimations(e,t){const r=new ex,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(st=>{u.add(st);const ft=this.driver.query(st,".ng-animate-queued",!0);for(let bt=0;bt<ft.length;bt++)u.add(ft[bt])});const d=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=nie(m,this.collectedEnterElements),b=new Map;let T=0;y.forEach((st,ft)=>{const bt=BU+T++;b.set(ft,bt),st.forEach(hn=>Ma(hn,bt))});const M=[],B=new Set,V=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const ft=this.collectedLeaveElements[st],bt=ft[hl];bt&&bt.setForRemoval&&(M.push(ft),B.add(ft),bt.hasAnimation?this.driver.query(ft,".ng-star-inserted",!0).forEach(hn=>B.add(hn)):V.add(ft))}const Q=new Map,be=nie(m,Array.from(B));be.forEach((st,ft)=>{const bt=qD+T++;Q.set(ft,bt),st.forEach(hn=>Ma(hn,bt))}),e.push(()=>{y.forEach((st,ft)=>{const bt=b.get(ft);st.forEach(hn=>W_(hn,bt))}),be.forEach((st,ft)=>{const bt=Q.get(ft);st.forEach(hn=>W_(hn,bt))}),M.forEach(st=>{this.processLeaveNode(st)})});const Be=[],je=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(bt=>{const hn=bt.player,Ii=bt.element;if(Be.push(hn),this.collectedEnterElements.length){const ai=Ii[hl];if(ai&&ai.setForMove){if(ai.previousTriggersValues&&ai.previousTriggersValues.has(bt.triggerName)){const uu=ai.previousTriggersValues.get(bt.triggerName),Po=this.statesByElement.get(bt.element);if(Po&&Po.has(bt.triggerName)){const du=Po.get(bt.triggerName);du.value=uu,Po.set(bt.triggerName,du)}}return void hn.destroy()}}const Oa=!d||!this.driver.containsElement(d,Ii),oi=Q.get(Ii),Mr=b.get(Ii),Pr=this._buildInstruction(bt,r,Mr,oi,Oa);if(Pr.errors&&Pr.errors.length)return void je.push(Pr);if(Oa)return hn.onStart(()=>dp(Ii,Pr.fromStyles)),hn.onDestroy(()=>tc(Ii,Pr.toStyles)),void i.push(hn);if(bt.isFallbackTransition)return hn.onStart(()=>dp(Ii,Pr.fromStyles)),hn.onDestroy(()=>tc(Ii,Pr.toStyles)),void i.push(hn);const Jd=[];Pr.timelines.forEach(ai=>{ai.stretchStartingKeyframe=!0,this.disabledNodes.has(ai.element)||Jd.push(ai)}),Pr.timelines=Jd,r.append(Ii,Pr.timelines),o.push({instruction:Pr,player:hn,element:Ii}),Pr.queriedElements.forEach(ai=>na(a,ai,[]).push(hn)),Pr.preStyleProps.forEach((ai,uu)=>{if(ai.size){let Po=l.get(uu);Po||l.set(uu,Po=new Set),ai.forEach((du,eh)=>Po.add(eh))}}),Pr.postStyleProps.forEach((ai,uu)=>{let Po=c.get(uu);Po||c.set(uu,Po=new Set),ai.forEach((du,eh)=>Po.add(eh))})});if(je.length){const st=[];je.forEach(ft=>{st.push(function Ije(){return new K(3505,!1)}())}),Be.forEach(ft=>ft.destroy()),this.reportError(st)}const H=new Map,L=new Map;o.forEach(st=>{const ft=st.element;r.has(ft)&&(L.set(ft,ft),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,H))}),i.forEach(st=>{const ft=st.element;this._getPreviousPlayers(ft,!1,st.namespaceId,st.triggerName,null).forEach(hn=>{na(H,ft,[]).push(hn),hn.destroy()})});const W=M.filter(st=>iie(st,l,c)),J=new Map;tie(J,this.driver,V,c,Lc).forEach(st=>{iie(st,l,c)&&W.push(st)});const re=new Map;y.forEach((st,ft)=>{tie(re,this.driver,new Set(st),l,"!")}),W.forEach(st=>{const ft=J.get(st),bt=re.get(st);J.set(st,new Map([...ft?.entries()??[],...bt?.entries()??[]]))});const q=[],Hr=[],oa={};o.forEach(st=>{const{element:ft,player:bt,instruction:hn}=st;if(r.has(ft)){if(u.has(ft))return bt.onDestroy(()=>tc(ft,hn.toStyles)),bt.disabled=!0,bt.overrideTotalTime(hn.totalTime),void i.push(bt);let Ii=oa;if(L.size>1){let oi=ft;const Mr=[];for(;oi=oi.parentNode;){const Pr=L.get(oi);if(Pr){Ii=Pr;break}Mr.push(oi)}Mr.forEach(Pr=>L.set(Pr,Ii))}const Oa=this._buildAnimation(bt.namespaceId,hn,H,s,re,J);if(bt.setRealPlayer(Oa),Ii===oa)q.push(bt);else{const oi=this.playersByElement.get(Ii);oi&&oi.length&&(bt.parentPlayer=jd(oi)),i.push(bt)}}else dp(ft,hn.fromStyles),bt.onDestroy(()=>tc(ft,hn.toStyles)),Hr.push(bt),u.has(ft)&&i.push(bt)}),Hr.forEach(st=>{const ft=s.get(st.element);if(ft&&ft.length){const bt=jd(ft);st.setRealPlayer(bt)}}),i.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<M.length;st++){const ft=M[st],bt=ft[hl];if(W_(ft,qD),bt&&bt.hasAnimation)continue;let hn=[];if(a.size){let Oa=a.get(ft);Oa&&Oa.length&&hn.push(...Oa);let oi=this.driver.query(ft,UU,!0);for(let Mr=0;Mr<oi.length;Mr++){let Pr=a.get(oi[Mr]);Pr&&Pr.length&&hn.push(...Pr)}}const Ii=hn.filter(Oa=>!Oa.destroyed);Ii.length?bze(this,ft,Ii):this.processLeaveNode(ft)}return M.length=0,q.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const ft=this.players.indexOf(st);this.players.splice(ft,1)}),st.play()}),q}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==$I;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=na(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(y=>{const b=y.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),y.destroy(),d.push(y)})}dp(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,m=t.timelines.map(b=>{const T=b.element;u.add(T);const M=T[hl];if(M&&M.removedBeforeQueried)return new Xb(b.duration,b.delay);const B=T!==l,V=function Eze(n){const e=[];return rie(n,e),e}((r.get(T)||fze).map(H=>H.getRealPlayer())).filter(H=>!!H.element&&H.element===T),Q=s.get(T),be=o.get(T),Be=Nre(this._normalizer,b.keyframes,Q,be),je=this._buildPlayer(b,Be,V);if(b.subTimeline&&i&&d.add(T),B){const H=new ej(e,a,T);H.setRealPlayer(je),c.push(H)}return je});c.forEach(b=>{na(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function _ze(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),u.forEach(b=>Ma(b,Ure));const y=jd(m);return y.onDestroy(()=>{u.forEach(b=>W_(b,Ure)),tc(l,t.toStyles)}),d.forEach(b=>{na(i,b,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Xb(e.duration,e.delay)}}class ej{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Xb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>PU(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){na(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function rx(n){return n&&1===n.nodeType}function eie(n,e){const t=n.style.display;return n.style.display=e??"none",t}function tie(n,e,t,r,i){const s=[];t.forEach(l=>s.push(eie(l)));const o=[];r.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const m=e.computeStyle(c,d,i);u.set(d,m),(!m||0==m.length)&&(c[hl]=pze,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>eie(l,s[a++])),o}function nie(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Ma(n,e){n.classList?.add(e)}function W_(n,e){n.classList?.remove(e)}function bze(n,e,t){jd(t).onDone(()=>n.processLeaveNode(e))}function rie(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof JK?rie(r.players,e):e.push(r)}}function iie(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class WI{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new gze(e.body,t,r),this._timelineEngine=new lze(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=WU(this._driver,s,l,[]);if(l.length)throw function dje(){return new K(3404,!1)}();a=function ize(n,e,t){return new sze(n,e,t)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=Ore(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=Ore(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class GI{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=GI.initialStylesByElement.get(e);i||GI.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&tc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tc(this._element,this._initialStyles),this._endStyles&&(tc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(GI.initialStylesByElement.delete(this._element),this._startStyles&&(dp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(dp(this._element,this._endStyles),this._endStyles=null),tc(this._element,this._initialStyles),this._state=3)}}function tj(n){let e=null;return n.forEach((t,r)=>{(function Cze(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class sie{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:$U(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class oie{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Lre(e,t)}getParentElement(e){return OU(e)}query(e,t,r){return Vre(e,t,r)}computeStyle(e,t,r){return $U(e,t)}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(y=>y instanceof sie);(function Oje(n,e){return 0===n||0===e})(r,i)&&u.forEach(y=>{y.currentSnapshot.forEach((b,T)=>c.set(T,b))});let d=function Pje(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(y=>new Map(y));d=function Fje(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,$U(n,a)))}}return e}(e,d,c);const m=function wze(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=tj(e[0]),e.length>1&&(r=tj(e[e.length-1]))):e instanceof Map&&(t=tj(e)),t||r?new GI(n,t,r):null}(e,d);return new sie(e,d,l,m)}}const aie="@.disabled";class lie{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==aie?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Tze extends lie{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==aie?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Aze(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Sze(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}class Dze{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const c=this._rendererCache;let u=c.get(i);return u||(u=new lie("",i,this.engine,()=>c.delete(i)),c.set(i,u)),u}const s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new Tze(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const cie=[{provide:VU,useFactory:function Rze(){return new Hre}},{provide:WI,useClass:(()=>{class n extends WI{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(Se(pn),Se(LU),Se(VU))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})()},{provide:Wh,useFactory:function Mze(n,e,t){return new Dze(n,e,t)},deps:[sN,WI,_t]}],nj=[{provide:LU,useFactory:()=>new oie},{provide:Tl,useValue:"BrowserAnimations"},...cie],uie=[{provide:LU,useClass:FU},{provide:Tl,useValue:"NoopAnimations"},...cie];let Pze=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?uie:nj}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=zt({providers:nj,imports:[K7]})}}return n})();const die="@firebase/installations",rj="0.6.9",hie=1e4,fie=`w:${rj}`,pie="FIS_v2",kze="https://firebaseinstallations.googleapis.com/v1",Nze=36e5,au=new N.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function mie(n){return n instanceof N.g&&n.code.includes("request-failed")}function ij({projectId:n}){return`${kze}/projects/${n}/installations`}function gie(n){return{token:n.token,requestStatus:2,expiresIn:Vze(n.expiresIn),creationTime:Date.now()}}function sj(n,e){return oj.apply(this,arguments)}function oj(){return(oj=(0,O.A)(function*(n,e){const r=(yield e.json()).error;return au.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function _ie({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function aj(n){return lj.apply(this,arguments)}function lj(){return(lj=(0,O.A)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Vze(n){return Number(n.replace("s","000"))}function cj(){return(cj=(0,O.A)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=ij(n),i=_ie(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:pie,appId:n.appId,sdkVersion:fie})},l=yield aj(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:gie(c.authToken)}}throw yield sj("Create Installation",l)})).apply(this,arguments)}function vie(n){return new Promise(e=>{setTimeout(e,n)})}const zze=/^[cdef][\w-]{21}$/,uj="";function Hze(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function $ze(n){return function jze(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return zze.test(t)?t:uj}catch{return uj}}function G_(n){return`${n.appName}!${n.appId}`}const q_=new Map;function bie(n,e){const t=G_(n);Eie(t,e),function qze(n,e){const t=function Iie(){return!fp&&"BroadcastChannel"in self&&(fp=new BroadcastChannel("[Firebase] FID Change"),fp.onmessage=n=>{Eie(n.data.key,n.data.fid)}),fp}();t&&t.postMessage({key:n,fid:e}),function wie(){0===q_.size&&fp&&(fp.close(),fp=null)}()}(t,e)}function Eie(n,e){const t=q_.get(n);if(t)for(const r of t)r(e)}let fp=null;const Kze="firebase-installations-database",Qze=1,pp="firebase-installations-store";let dj=null;function hj(){return dj||(dj=(0,SQ.P2)(Kze,Qze,{upgrade:(n,e)=>{0===e&&n.createObjectStore(pp)}})),dj}function sx(n,e){return fj.apply(this,arguments)}function fj(){return(fj=(0,O.A)(function*(n,e){const t=G_(n),i=(yield hj()).transaction(pp,"readwrite"),s=i.objectStore(pp),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&bie(n,e.fid),e})).apply(this,arguments)}function pj(n){return mj.apply(this,arguments)}function mj(){return(mj=(0,O.A)(function*(n){const e=G_(n),r=(yield hj()).transaction(pp,"readwrite");yield r.objectStore(pp).delete(e),yield r.done})).apply(this,arguments)}function qI(n,e){return gj.apply(this,arguments)}function gj(){return(gj=(0,O.A)(function*(n,e){const t=G_(n),i=(yield hj()).transaction(pp,"readwrite"),s=i.objectStore(pp),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&bie(n,a.fid),a})).apply(this,arguments)}function _j(n){return yj.apply(this,arguments)}function yj(){return yj=(0,O.A)(function*(n){let e;const t=yield qI(n.appConfig,r=>{const i=function Yze(n){return Tie(n||{fid:Hze(),registrationStatus:0})}(r),s=function Xze(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(au.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Zze(n,e){return vj.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Jze(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===uj?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),yj.apply(this,arguments)}function vj(){return vj=(0,O.A)(function*(n,e){try{const t=yield function Uze(n,e){return cj.apply(this,arguments)}(n,e);return sx(n.appConfig,t)}catch(t){throw mie(t)&&409===t.customData.serverCode?yield pj(n.appConfig):yield sx(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),vj.apply(this,arguments)}function Jze(n){return bj.apply(this,arguments)}function bj(){return(bj=(0,O.A)(function*(n){let e=yield Cie(n.appConfig);for(;1===e.registrationStatus;)yield vie(100),e=yield Cie(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield _j(n);return r||t}return e})).apply(this,arguments)}function Cie(n){return qI(n,e=>{if(!e)throw au.create("installation-not-found");return Tie(e)})}function Tie(n){return function eHe(n){return 1===n.registrationStatus&&n.registrationTime+hie<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Ej(){return(Ej=(0,O.A)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function nHe(n,{fid:e}){return`${ij(n)}/${e}/authTokens:generate`}(n,t),i=function yie(n,{refreshToken:e}){const t=_ie(n);return t.append("Authorization",function Bze(n){return`${pie} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:fie,appId:n.appId}})},l=yield aj(()=>fetch(r,a));if(l.ok)return gie(yield l.json());throw yield sj("Generate Auth Token",l)})).apply(this,arguments)}function Ij(n){return wj.apply(this,arguments)}function wj(){return wj=(0,O.A)(function*(n,e=!1){let t;const r=yield qI(n.appConfig,s=>{if(!Sie(s))throw au.create("not-registered");const o=s.authToken;if(!e&&function sHe(n){return 2===n.requestStatus&&!function oHe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Nze}(n)}(o))return s;if(1===o.requestStatus)return t=function rHe(n,e){return Cj.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw au.create("app-offline");const a=function aHe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function iHe(n,e){return Tj.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),wj.apply(this,arguments)}function Cj(){return(Cj=(0,O.A)(function*(n,e){let t=yield Aie(n.appConfig);for(;1===t.authToken.requestStatus;)yield vie(100),t=yield Aie(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Ij(n,e):r})).apply(this,arguments)}function Aie(n){return qI(n,e=>{if(!Sie(e))throw au.create("not-registered");return function lHe(n){return 1===n.requestStatus&&n.requestTime+hie<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Tj(){return Tj=(0,O.A)(function*(n,e){try{const t=yield function tHe(n,e){return Ej.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield sx(n.appConfig,r),t}catch(t){if(!mie(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield sx(n.appConfig,r)}else yield pj(n.appConfig);throw t}}),Tj.apply(this,arguments)}function Sie(n){return void 0!==n&&2===n.registrationStatus}function Aj(){return(Aj=(0,O.A)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield _j(e);return r?r.catch(console.error):Ij(e).catch(console.error),t.fid})).apply(this,arguments)}function Sj(){return Sj=(0,O.A)(function*(n,e=!1){const t=n;return yield function dHe(n){return Dj.apply(this,arguments)}(t),(yield Ij(t,e)).token}),Sj.apply(this,arguments)}function Dj(){return(Dj=(0,O.A)(function*(n){const{registrationPromise:e}=yield _j(n);e&&(yield e)})).apply(this,arguments)}function Mj(n){return au.create("missing-app-config-values",{valueName:n})}const Die="installations",gHe=n=>{const e=n.getProvider("app").getImmediate(),t=function pHe(n){if(!n||!n.options)throw Mj("App Configuration");if(!n.name)throw Mj("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Mj(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,jn._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},_He=n=>{const e=n.getProvider("app").getImmediate(),t=(0,jn._getProvider)(e,Die).getImmediate();return{getId:()=>function cHe(n){return Aj.apply(this,arguments)}(t),getToken:i=>function uHe(n){return Sj.apply(this,arguments)}(t,i)}};(function yHe(){(0,jn._registerComponent)(new Qo.uA(Die,gHe,"PUBLIC")),(0,jn._registerComponent)(new Qo.uA("installations-internal",_He,"PRIVATE"))})(),(0,jn.registerVersion)(die,rj),(0,jn.registerVersion)(die,rj,"esm2017");const ox="analytics",vHe="firebase_id",bHe="origin",EHe=6e4,IHe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pj="https://www.googletagmanager.com/gtag/js",rs=new To.Vy("@firebase/analytics"),to=new N.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function CHe(n){if(!n.startsWith(Pj)){const e=to.create("invalid-gtag-resource",{gtagURL:n});return rs.warn(e.message),""}return n}function xie(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function kj(){return(kj=(0,O.A)(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield xie(t)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){rs.error(a)}n("config",i,s)})).apply(this,arguments)}function Nj(){return(Nj=(0,O.A)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield xie(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){rs.error(s)}})).apply(this,arguments)}const kHe=30,Rie=new class OHe{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function FHe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Oj(){return(Oj=(0,O.A)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:FHe(r)},s=IHe.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw to.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Fj(){return(Fj=(0,O.A)(function*(n,e=Rie,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw to.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw to.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new jHe;return setTimeout((0,O.A)(function*(){a.abort()}),void 0!==t?t:EHe),Mie({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function Mie(n,e,t){return Lj.apply(this,arguments)}function Lj(){return Lj=(0,O.A)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Rie){var s;const{appId:o,measurementId:a}=n;try{yield function BHe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(to.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(l){if(a)return rs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield function LHe(n){return Oj.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!function UHe(n){if(!(n instanceof N.g&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return rs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?(0,N.p9)(t,i.intervalMillis,kHe):(0,N.p9)(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,d),rs.debug(`Calling attemptFetch again in ${u} millis`),Mie(n,d,r,i)}}),Lj.apply(this,arguments)}class jHe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Vj,Wj;function Bj(){return(Bj=(0,O.A)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function Gj(){return(Gj=(0,O.A)(function*(){if(!(0,N.zW)())return rs.warn(to.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,N.eX)()}catch(n){return rs.warn(to.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function qj(){return qj=(0,O.A)(function*(n,e,t,r,i,s,o){var a;const l=function VHe(n){return Fj.apply(this,arguments)}(n);l.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&rs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>rs.error(y)),e.push(l);const c=function KHe(){return Gj.apply(this,arguments)}().then(y=>{if(y)return r.getId()}),[u,d]=yield Promise.all([l,c]);(function PHe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Pj)&&t.src.includes(n))return t;return null})(s)||function AHe(n,e){const t=function THe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:CHe}),r=document.createElement("script"),i=`${Pj}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),Wj&&(i("consent","default",Wj),function Pie(n){Wj=n}(void 0)),i("js",new Date);const m=null!==(a=o?.config)&&void 0!==a?a:{};return m[bHe]="firebase",m.update=!0,null!=d&&(m[vHe]=d),i("config",u.measurementId,m),Vj&&(i("set",Vj),function kie(n){Vj=n}(void 0)),u.measurementId}),qj.apply(this,arguments)}class YHe{constructor(e){this.app=e}_delete(){return delete nc[this.app.options.appId],Promise.resolve()}}let nc={},Nie=[];const Oie={};let Lie,rc,ax="dataLayer",Kj=!1;function ZHe(n,e,t){!function XHe(){const n=[];if((0,N.sr)()&&n.push("This is a browser extension environment."),(0,N.dM)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=to.create("invalid-analytics-context",{errorInfo:e});rs.warn(t.message)}}();const r=n.options.appId;if(!r)throw to.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw to.create("no-api-key");rs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=nc[r])throw to.create("already-exists",{id:r});if(!Kj){!function SHe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(ax);const{wrappedGtag:s,gtagCore:o}=function MHe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function RHe(n,e,t,r){function s(){return s=(0,O.A)(function*(o,...a){try{if("event"===o){const[l,c]=a;yield function xHe(n,e,t,r,i){return Nj.apply(this,arguments)}(n,e,t,l,c)}else if("config"===o){const[l,c]=a;yield function DHe(n,e,t,r,i,s){return kj.apply(this,arguments)}(n,e,t,r,l,c)}else if("consent"===o){const[l,c]=a;n("consent",l,c)}else if("get"===o){const[l,c,u]=a;n("get",l,c,u)}else if("set"===o){const[l]=a;n("set",l)}else n(o,...a)}catch(l){rs.error(l)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(nc,Nie,Oie,ax,"gtag");rc=s,Lie=o,Kj=!0}return nc[r]=function QHe(n,e,t,r,i,s,o){return qj.apply(this,arguments)}(n,Nie,Oie,e,Lie,ax,t),new YHe(n)}function JHe(n=(0,jn.getApp)()){n=(0,N.Ku)(n);const e=(0,jn._getProvider)(n,ox);return e.isInitialized()?e.getImmediate():function e4e(n,e={}){const t=(0,jn._getProvider)(n,ox);if(t.isInitialized()){const i=t.getImmediate();if((0,N.bD)(e,t.getOptions()))return i;throw to.create("already-initialized")}return t.initialize({options:e})}(n)}function t4e(){return Qj.apply(this,arguments)}function Qj(){return(Qj=(0,O.A)(function*(){if((0,N.sr)()||!(0,N.dM)()||!(0,N.zW)())return!1;try{return yield(0,N.eX)()}catch{return!1}})).apply(this,arguments)}const Vie="@firebase/analytics";!function r4e(){(0,jn._registerComponent)(new Qo.uA(ox,(e,{options:t})=>ZHe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,jn._registerComponent)(new Qo.uA("analytics-internal",function n(e){try{const t=e.getProvider(ox).getImmediate();return{logEvent:(r,i,s)=>function n4e(n,e,t,r){n=(0,N.Ku)(n),function zHe(n,e,t,r,i){return Bj.apply(this,arguments)}(rc,nc[n.app.options.appId],e,t,r).catch(i=>rs.error(i))}(t,r,i,s)}}catch(t){throw to.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,jn.registerVersion)(Vie,"0.10.8"),(0,jn.registerVersion)(Vie,"0.10.8","esm2017")}();class Xj{constructor(e){return e}}const Zj="__angularfire_symbol__analyticsIsSupportedValue",jie="__angularfire_symbol__analyticsIsSupported";globalThis[jie]||=t4e().then(n=>globalThis[Zj]=n).catch(()=>globalThis[Zj]=!1);const lx={async:()=>globalThis[jie],sync:()=>{const n=globalThis[Zj];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Analytics"));return n}},s4e=Vc(JHe,!0),tz=new ye("angularfire2.analytics-instances");function v4e(n){return(e,t)=>{if(!lx.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new Xj(r)}}const b4e={provide:class i4e{constructor(){return Z1("analytics")}},deps:[[new Mi,tz]]},E4e={provide:Xj,useFactory:function y4e(n,e){if(!lx.sync())return null;const t=mQ("analytics",n,e);return t&&new Xj(t)},deps:[[new Mi,tz],Jb]};function I4e(n,...e){return(0,jn.registerVersion)("angularfire",rd.full,"analytics"),El([E4e,b4e,{provide:$C,useValue:lx.async,multi:!0},{provide:tz,useFactory:v4e(n),multi:!0,deps:[_t,Sn,Fg,J1,...e]}])}const $ie="@firebase/database";let nz="";function rz(n){nz=n}class T4e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class A4e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Gie=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new T4e(e)}}catch{}return new A4e},mp=Gie("localStorage"),iz=Gie("sessionStorage"),K_=new To.Vy("@firebase/database"),qie=function(){let n=1;return function(){return n++}}(),Kie=function(n){const e=(0,N.kj)(n),t=new N.gz;t.update(e);const r=t.digest();return N.K3.encodeByteArray(r)},QI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=QI.apply(null,r):e+="object"==typeof r?(0,N.As)(r):r,e+=" "}return e};let gp=null,Qie=!0;const Yie=function(n,e){(0,N.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(K_.logLevel=To.$b.VERBOSE,gp=K_.log.bind(K_),e&&iz.set("logging_enabled",!0)):"function"==typeof n?gp=n:(gp=null,iz.remove("logging_enabled"))},is=function(...n){if(!0===Qie&&(Qie=!1,null===gp&&!0===iz.get("logging_enabled")&&Yie(!0)),gp){const e=QI.apply(null,n);gp(e)}},YI=function(n){return function(...e){is(n,...e)}},sz=function(...n){const e="FIREBASE INTERNAL ERROR: "+QI(...n);K_.error(e)},ic=function(...n){const e=`FIREBASE FATAL ERROR: ${QI(...n)}`;throw K_.error(e),new Error(e)},Os=function(...n){const e="FIREBASE WARNING: "+QI(...n);K_.warn(e)},cx=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},zd="[MIN_NAME]",lu="[MAX_NAME]",_p=function(n,e){if(n===e)return 0;if(n===zd||e===lu)return-1;if(e===zd||n===lu)return 1;{const t=Jie(n),r=Jie(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},x4e=function(n,e){return n===e?0:n<e?-1:1},XI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.As)(e))},oz=function(n){if("object"!=typeof n||null===n)return(0,N.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.As)(e[r]),t+=":",t+=oz(n[e[r]]);return t+="}",t},Xie=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ss(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Zie=function(n){(0,N.vA)(!cx(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),d+=m}return d.toLowerCase()},k4e=new RegExp("^-?(0*)\\d{1,10}$"),Jie=function(n){if(k4e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Q_=function(n){try{n()}catch(e){setTimeout(()=>{throw Os("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ZI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class L4e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class V4e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(is("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Os(e)}}let JI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ise=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lse="long_polling";class lz{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function cse(n,e,t){let r;if((0,N.vA)("string"==typeof e,"typeof type must == string"),(0,N.vA)("object"==typeof t,"typeof params must == object"),"websocket"===e)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==lse)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function B4e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ss(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class U4e{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.A4)(this.counters_)}}const cz={},uz={};function dz(n){const e=n.toString();return cz[e]||(cz[e]=new U4e),cz[e]}class z4e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Q_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Hd{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=YI(e),this.stats_=dz(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),cse(t,lse,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new z4e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hz((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ise.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hd.forceAllow_=!0}static forceDisallow(){Hd.forceDisallow_=!0}static isAvailable(){return!((0,N.$g)()||!Hd.forceAllow_&&(Hd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.KA)(t),i=Xie(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hz{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=qie(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=hz.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){is("frame writing exception"),a.stack&&is(a.stack),is(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||is("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{is("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let dx=null;typeof MozWebSocket<"u"?dx=MozWebSocket:typeof WebSocket<"u"&&(dx=WebSocket);let Y_=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=YI(this.connId),this.stats_=dz(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,N.$g)()&&typeof location<"u"&&location.hostname&&ise.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),cse(t,"websocket",a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mp.set("previous_websocket_failure",!0);try{let i;if((0,N.$g)()){i={headers:{"User-Agent":`Firebase/5/${nz}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new dx(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==dx&&!n.forceDisallow_}static previouslyFailed(){return mp.isInMemoryStorage||!0===mp.get("previous_websocket_failure")}markConnectionHealthy(){mp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Xie(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),gse=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Hd,Y_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Y_&&Y_.isAvailable();let i=r&&!Y_.previouslyFailed();if(t.webSocketOnly&&(r||Os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Y_];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class wse{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=YI("c:"+this.id+":"),this.transportManager_=new gse(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ZI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=XI("t",e),r=XI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=XI("t",e),r=XI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=XI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?sz("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sz("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ZI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ZI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Cse{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Tse{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,N.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class hx extends Tse{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new hx}getInitialEvent(e){return(0,N.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class $n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Pn(){return new $n("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $d(n){return n.pieces_.length-n.pieceNum_}function cr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new $n(n.pieces_,e)}function pz(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ew(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Dse(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new $n(e,0)}function zr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof $n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new $n(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function no(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return no(cr(n),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function u$e(n,e){const t=ew(n,0),r=ew(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=_p(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function mz(n,e){if($d(n)!==$d(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Pa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if($d(n)>$d(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class d$e{constructor(e,t){this.errorPrefix_=t,this.parts_=ew(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.OE)(this.parts_[r]);xse(this)}}function xse(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yp(n))}function yp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class gz extends Tse{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new gz}getInitialEvent(e){return(0,N.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const tw=1e3;let px,vp=(()=>{class n extends Cse{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=YI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,N.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gz.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&hx.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,N.As)(o)),(0,N.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new N.cY,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,N.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.vA)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.gR)(t,"w")){const i=(0,N.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,N.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):sz("Unrecognized action received from server: "+(0,N.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=tw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=tw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){(0,N.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?is("getToken() completed but was canceled"):(is("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new wse(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{Os(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&Os(y),u())}}})()}interrupt(t){is("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){is("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.Im)(this.interruptReasons_)&&(this.reconnectDelay_=tw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>oz(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new $n(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){is("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){is("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+nz.replace(/\./g,"-")]=1,(0,N.jZ)()?t["framework.cordova"]=1:(0,N.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=hx.getInstance().currentlyOnline();return(0,N.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class fx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(zd,e),i=new cn(zd,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class Pse extends fx{static get __EMPTY_NODE(){return px}static set __EMPTY_NODE(e){px=e}compare(e,t){return _p(e.name,t.name)}isDefinedOn(e){throw(0,N.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn(lu,px)}makePost(e,t){return(0,N.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,px)}toString(){return".key"}}const sc=new Pse;class mx{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let yz,fl=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Ro.EMPTY_NODE,this.right=o??Ro.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ro.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ro.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ro{constructor(e,t=Ro.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ro(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fl.BLACK,null,null))}remove(e){return new Ro(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mx(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mx(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mx(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mx(this.root_,null,this.comparator_,!0,e)}}function v$e(n,e){return _p(n.name,e.name)}function _z(n,e){return _p(n,e)}Ro.EMPTY_NODE=new class y$e{copy(e,t,r,i,s){return this}insert(e,t,r){return new fl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const kse=function(n){return"number"==typeof n?"number:"+Zie(n):"string:"+n},Nse=function(n){if(n.isLeafNode()){const e=n.val();(0,N.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.gR)(e,".sv"),"Priority must be a string or number.")}else(0,N.vA)(n===yz||n.isEmpty(),"priority of unexpected type.");(0,N.vA)(n===yz||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ose,Fse,Lse,X_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Nse(this.priorityNode_)}static set __childrenNodeConstructor(t){Ose=t}static get __childrenNodeConstructor(){return Ose}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.vA)(".priority"!==i||1===$d(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+kse(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Zie(this.value_):this.value_,this.lazyHash_=Kie(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.vA)(s>=0,"Unknown leaf type: "+r),(0,N.vA)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const br=new class w$e extends fx{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?_p(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(lu,new X_("[PRIORITY-POST]",Lse))}makePost(e,t){const r=Fse(e);return new cn(t,new X_("[PRIORITY-POST]",r))}toString(){return".priority"}},C$e=Math.log(2);class T$e{constructor(e){this.count=parseInt(Math.log(e+1)/C$e,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gx=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let d,m;if(0===u)return null;if(1===u)return d=n[l],m=t?t(d):d,new fl(m,d.node,fl.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return d=n[y],m=t?t(d):d,new fl(m,d.node,fl.BLACK,b,T)}},a=function(l){let c=null,u=null,d=n.length;const m=function(b,T){const M=d-b,B=d;d-=b;const V=i(M+1,B),Q=n[M],be=t?t(Q):Q;y(new fl(be,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),M=Math.pow(2,l.count-(b+1));T?m(M,fl.BLACK):(m(M,fl.BLACK),m(M,fl.RED))}return u}(new T$e(n.length));return new Ro(r||e,a)};let vz;const Z_={};class cu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.vA)(Z_&&br,"ChildrenNode.ts has not been loaded"),vz=vz||new cu({".priority":Z_},{".priority":br}),vz}get(e){const t=(0,N.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ro?t:null}hasIndex(e){return(0,N.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.vA)(e!==sc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(cn.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?gx(r,e.getCompare()):Z_;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new cu(u,c)}addToIndexes(e,t){const r=(0,N.kH)(this.indexes_,(i,s)=>{const o=(0,N.yw)(this.indexSet_,s);if((0,N.vA)(o,"Missing index implementation for "+s),i===Z_){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(cn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),gx(a,o.getCompare())}return Z_}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new cn(e.name,a))),l.insert(e,e.node)}});return new cu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.kH)(this.indexes_,i=>{if(i===Z_)return i;{const s=t.get(e.name);return s?i.remove(new cn(e.name,s)):i}});return new cu(r,this.indexSet_)}}let nw,$t=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Nse(this.priorityNode_),this.children_.isEmpty()&&(0,N.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return nw||(nw=new n(new Ro(_z),null,cu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?nw:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(cr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?nw:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,N.vA)(".priority"!==sn(t)||1===$d(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(cr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(br,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+kse(this.getPriority().val())+":"),this.forEachChild(br,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Kie(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new cn(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,cn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===rw?-1:0}withIndex(t){if(t===sc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===sc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(br),s=r.getIterator(br);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===sc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const rw=new class A$e extends $t{constructor(){super(new Ro(_z),$t.EMPTY_NODE,cu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $t.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(cn,{MIN:{value:new cn(zd,$t.EMPTY_NODE)},MAX:{value:new cn(lu,rw)}}),Pse.__EMPTY_NODE=$t.EMPTY_NODE,X_.__childrenNodeConstructor=$t,function b$e(n){yz=n}(rw),function I$e(n){Lse=n}(rw);const S$e=!0;function Xr(n,e=null){if(null===n)return $t.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new X_(n,Xr(e));if(n instanceof Array||!S$e){let t=$t.EMPTY_NODE;return ss(n,(r,i)=>{if((0,N.gR)(n,r)&&"."!==r.substring(0,1)){const s=Xr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Xr(e))}{const t=[];let r=!1;if(ss(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Xr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new cn(o,l)))}}),0===t.length)return $t.EMPTY_NODE;const s=gx(t,v$e,o=>o.name,_z);if(r){const o=gx(t,br.getCompare());return new $t(s,Xr(e),new cu({".priority":o},{".priority":br}))}return new $t(s,Xr(e),cu.Default)}}!function E$e(n){Fse=n}(Xr);class bz extends fx{constructor(e){super(),this.indexPath_=e,(0,N.vA)(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?_p(e.name,t.name):s}makePost(e,t){const r=Xr(e),i=$t.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=$t.EMPTY_NODE.updateChild(this.indexPath_,rw);return new cn(lu,e)}toString(){return ew(this.indexPath_,0).join("/")}}const Ez=new class D$e extends fx{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?_p(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=Xr(e);return new cn(t,r)}toString(){return".value"}};function Vse(n){return{type:"value",snapshotNode:n}}function J_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function iw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Iz{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,N.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(iw(t,a)):(0,N.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(J_(t,r)):o.trackChildChange(sw(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(br,(i,s)=>{t.hasChild(i)||r.trackChildChange(iw(i,s))}),t.isLeafNode()||t.forEachChild(br,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(sw(i,s,o))}else r.trackChildChange(J_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$t.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ow{constructor(e){this.indexedFilter_=new Iz(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ow.getStartPost_(e),this.endPost_=ow.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new cn(t,r))||(r=$t.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=$t.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority($t.EMPTY_NODE);const s=this;return t.forEachChild(br,(o,a)=>{s.matches(new cn(o,a))||(i=i.updateImmediateChild(o,$t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class R$e{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ow(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new cn(t,r))||(r=$t.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=$t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=$t.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority($t.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,$t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(m,y)=>d(y,m)}else o=this.index_.getCompare();const a=e;(0,N.vA)(a.numChildren()===this.limit_,"");const l=new cn(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(sw(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(iw(t,d));const T=a.updateImmediateChild(t,$t.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(J_(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(iw(c.name,c.node)),s.trackChildChange(J_(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,$t.EMPTY_NODE)):e}}class _x{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=br}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===br}copy(){const e=new _x;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wz(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Cz(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function yx(n,e){const t=n.copy();return t.index_=e,t}function Bse(n){const e={};if(n.isDefault())return e;let t;if(n.index_===br?t="$priority":n.index_===Ez?t="$value":n.index_===sc?t="$key":((0,N.vA)(n.index_ instanceof bz,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,N.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,N.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,N.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,N.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Use(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==br&&(e.i=n.index_.toString()),e}class vx extends Cse{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=YI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=vx.getListenId_(e,r),a={};this.listens_[o]=a;const l=Bse(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),(0,N.yw)(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=vx.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Bse(e._queryParams),r=e._path.toString(),i=new N.cY;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.Am)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,N.$L)(a.responseText)}catch{Os("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Os("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class F$e{constructor(){this.rootNode_=$t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function bx(){return{value:null,children:new Map}}function ey(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,bx()),ey(n.children.get(r),e=cr(e),t)}}function Tz(n,e){if(on(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(br,(r,i)=>{ey(n,new $n(r),i)}),Tz(n,e)}}if(n.children.size>0){const t=sn(e);return e=cr(e),n.children.has(t)&&Tz(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Az(n,e,t){null!==n.value?t(e,n.value):function L$e(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Az(i,new $n(e.toString()+"/"+r),t)})}class V$e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ss(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class j$e{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new V$e(e);const r=1e4+2e4*Math.random();ZI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ss(e,(i,s)=>{s>0&&(0,N.gR)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),ZI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var oc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(oc||{});function xz(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Ex{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=oc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return(0,N.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new $n(e));return new Ex(Pn(),t,this.revert)}}return(0,N.vA)(sn(this.path)===e,"operationForChild called for unrelated child."),new Ex(cr(this.path),this.affectedTree,this.revert)}}class aw{constructor(e,t){this.source=e,this.path=t,this.type=oc.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new aw(this.source,Pn()):new aw(this.source,cr(this.path))}}class bp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=oc.OVERWRITE}operationForChild(e){return on(this.path)?new bp(this.source,Pn(),this.snap.getImmediateChild(e)):new bp(this.source,cr(this.path),this.snap)}}class ty{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=oc.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new $n(e));return t.isEmpty()?null:t.value?new bp(this.source,Pn(),t.value):new ty(this.source,Pn(),t)}return(0,N.vA)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ty(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Wd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class z$e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function lw(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function W$e(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.Hk)("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function $$e(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Ix(n,e){return{eventCache:n,serverCache:e}}function cw(n,e,t,r){return Ix(new Wd(e,t,r),n.serverCache)}function zse(n,e,t,r){return Ix(n.eventCache,new Wd(e,t,r))}function wx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ep(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Rz;class Er{constructor(e,t=(()=>(Rz||(Rz=new Ro(x4e)),Rz))()){this.value=e,this.children=t}static fromObject(e){let t=new Er(null);return ss(e,(r,i)=>{t=t.set(new $n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Pn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(cr(e),t);return null!=s?{path:zr(new $n(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(cr(e)):new Er(null)}}set(e,t){if(on(e))return new Er(t,this.children);{const r=sn(e),s=(this.children.get(r)||new Er(null)).set(cr(e),t),o=this.children.insert(r,s);return new Er(this.value,o)}}remove(e){if(on(e))return this.children.isEmpty()?new Er(null):new Er(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(cr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Er(null):new Er(this.value,s)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(cr(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),s=(this.children.get(r)||new Er(null)).setTree(cr(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Er(this.value,o)}}fold(e){return this.fold_(Pn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(zr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Pn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const s=sn(e),o=this.children.get(s);return o?o.findOnPath_(cr(e),zr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Pn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),s=this.children.get(i);return s?s.foreachOnPath_(cr(e),zr(t,i),r):new Er(null)}}foreach(e){this.foreach_(Pn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(zr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class pl{constructor(e){this.writeTree_=e}static empty(){return new pl(new Er(null))}}function uw(n,e,t){if(on(e))return new pl(new Er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=no(i,e);return s=s.updateChild(o,t),new pl(n.writeTree_.set(i,s))}{const i=new Er(t),s=n.writeTree_.setTree(e,i);return new pl(s)}}}function Mz(n,e,t){let r=n;return ss(t,(i,s)=>{r=uw(r,zr(e,i),s)}),r}function Hse(n,e){if(on(e))return pl.empty();{const t=n.writeTree_.setTree(e,new Er(null));return new pl(t)}}function Pz(n,e){return null!=Ip(n,e)}function Ip(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(no(t.path,e)):null}function $se(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(br,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function Gd(n,e){if(on(e))return n;{const t=Ip(n,e);return new pl(null!=t?new Er(t):n.writeTree_.subtree(e))}}function kz(n){return n.writeTree_.isEmpty()}function ny(n,e){return Wse(Pn(),n.writeTree_,e)}function Wse(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,N.vA)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=Wse(zr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(zr(n,".priority"),r)),t}}function Cx(n,e){return Yse(e,n)}function X$e(n,e){if(n.snap)return Pa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Pa(zr(n.path,t),e))return!0;return!1}function J$e(n){return n.visible}function Gse(n,e,t){let r=pl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Pa(t,o)?(a=no(t,o),r=uw(r,a,s.snap)):Pa(o,t)&&(a=no(o,t),r=uw(r,Pn(),s.snap.getChild(a)));else{if(!s.children)throw(0,N.Hk)("WriteRecord should have .snap or .children");if(Pa(t,o))a=no(t,o),r=Mz(r,a,s.children);else if(Pa(o,t))if(a=no(o,t),on(a))r=Mz(r,Pn(),s.children);else{const l=(0,N.yw)(s.children,sn(a));if(l){const c=l.getChild(cr(a));r=uw(r,Pn(),c)}}}}}return r}function qse(n,e,t,r,i){if(r||i){const s=Gd(n.visibleWrites,e);return!i&&kz(s)?t:i||null!=t||Pz(s,Pn())?ny(Gse(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Pa(c.path,e)||Pa(e,c.path))},e),t||$t.EMPTY_NODE):null}{const s=Ip(n.visibleWrites,e);if(null!=s)return s;{const o=Gd(n.visibleWrites,e);return kz(o)?t:null!=t||Pz(o,Pn())?ny(o,t||$t.EMPTY_NODE):null}}}function Tx(n,e,t,r){return qse(n.writeTree,n.treePath,e,t,r)}function Nz(n,e){return function eWe(n,e,t){let r=$t.EMPTY_NODE;const i=Ip(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(br,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Gd(n.visibleWrites,e);return t.forEachChild(br,(o,a)=>{const l=ny(Gd(s,new $n(o)),a);r=r.updateImmediateChild(o,l)}),$se(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return $se(Gd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function Kse(n,e,t,r){return function tWe(n,e,t,r,i){(0,N.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=zr(e,t);if(Pz(n.visibleWrites,s))return null;{const o=Gd(n.visibleWrites,s);return kz(o)?i.getChild(t):ny(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Ax(n,e){return function rWe(n,e){return Ip(n.visibleWrites,e)}(n.writeTree,zr(n.treePath,e))}function Oz(n,e,t){return function nWe(n,e,t,r){const i=zr(e,t),s=Ip(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?ny(Gd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Qse(n,e){return Yse(zr(n.treePath,e),n.writeTree)}function Yse(n,e){return{treePath:n,writeTree:e}}class aWe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,sw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,iw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,J_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,sw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Xse=new class lWe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Fz{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Wd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Oz(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ep(this.viewCache_),s=function oWe(n,e,t,r,i,s){return function iWe(n,e,t,r,i,s,o){let a;const l=Gd(n.visibleWrites,e),c=Ip(l,Pn());if(null!=c)a=c;else{if(null==t)return[];a=ny(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==d(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Zse(n,e,t,r,i,s){const o=e.eventCache;if(null!=Ax(r,t))return e;{let a,l;if(on(t))if((0,N.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ep(e),d=Nz(r,c instanceof $t?c:$t.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Tx(r,Ep(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=sn(t);if(".priority"===c){(0,N.vA)(1===$d(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=Kse(r,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=cr(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=Kse(r,t,o.getNode(),l);d=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else d=Oz(r,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return cw(e,a,o.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function Sx(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(on(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=sn(t);if(!l.isCompleteForPath(t)&&$d(t)>1)return e;const b=cr(t),M=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),M):u.updateChild(l.getNode(),y,M,b,Xse,null)}const d=zse(e,c,l.isFullyInitialized()||on(t),u.filtersNodes());return Zse(n,d,t,i,new Fz(i,d,s),a)}function Lz(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new Fz(i,e,s);if(on(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=cw(e,c,!0,n.filter.filtersNodes());else{const d=sn(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=cw(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=cr(t),y=a.getNode().getImmediateChild(d);let b;if(on(m))b=r;else{const T=u.getCompleteChild(d);b=null!=T?".priority"===pz(m)&&T.getChild(Dse(m)).isEmpty()?T:T.updateChild(m,r):$t.EMPTY_NODE}l=y.equals(b)?e:cw(e,n.filter.updateChild(a.getNode(),d,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function Jse(n,e){return n.eventCache.isCompleteForChild(e)}function eoe(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Vz(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=on(t)?r:new Er(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,m)=>{if(u.hasChild(d)){const b=eoe(0,e.serverCache.getNode().getImmediateChild(d),m);l=Sx(n,l,new $n(d),b,i,s,o,a)}}),c.children.inorderTraversal((d,m)=>{const y=!e.serverCache.isCompleteForChild(d)&&null===m.value;if(!u.hasChild(d)&&!y){const T=eoe(0,e.serverCache.getNode().getImmediateChild(d),m);l=Sx(n,l,new $n(d),T,i,s,o,a)}}),l}class _We{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Iz(r.getIndex()),s=function M$e(n){return n.loadsAllData()?new Iz(n.getIndex()):n.hasLimit()?new R$e(n):new ow(n)}(r);this.processor_=function cWe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode($t.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode($t.EMPTY_NODE,a.getNode(),null),u=new Wd(l,o.isFullyInitialized(),i.filtersNodes()),d=new Wd(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Ix(d,u),this.eventGenerator_=new z$e(this.query_)}get query(){return this.query_}}function bWe(n,e){const t=Ep(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function toe(n){return 0===n.eventRegistrations_.length}function noe(n,e,t){const r=[];if(t){(0,N.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function roe(n,e,t,r){e.type===oc.MERGE&&null!==e.source.queryId&&((0,N.vA)(Ep(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.vA)(wx(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function dWe(n,e,t,r,i){const s=new aWe;let o,a;if(t.type===oc.OVERWRITE){const c=t;c.source.fromUser?o=Lz(n,e,c.path,c.snap,r,i,s):((0,N.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!on(c.path),o=Sx(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===oc.MERGE){const c=t;c.source.fromUser?o=function fWe(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=zr(t,l);Jse(e,sn(u))&&(a=Lz(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=zr(t,l);Jse(e,sn(u))||(a=Lz(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,N.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Vz(n,e,c.path,c.children,r,i,a,s))}else if(t.type===oc.ACK_USER_WRITE){const c=t;o=c.revert?function gWe(n,e,t,r,i,s){let o;if(null!=Ax(r,t))return e;{const a=new Fz(r,e,i),l=e.eventCache.getNode();let c;if(on(t)||".priority"===sn(t)){let u;if(e.serverCache.isFullyInitialized())u=Tx(r,Ep(e));else{const d=e.serverCache.getNode();(0,N.vA)(d instanceof $t,"serverChildren would be complete if leaf node"),u=Nz(r,d)}c=n.filter.updateFullNode(l,u,s)}else{const u=sn(t);let d=Oz(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,cr(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,$t.EMPTY_NODE,cr(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Tx(r,Ep(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Ax(r,Pn()),cw(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function pWe(n,e,t,r,i,s,o){if(null!=Ax(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(on(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Sx(n,e,t,l.getNode().getChild(t),i,s,a,o);if(on(t)){let c=new Er(null);return l.getNode().forEachChild(sc,(u,d)=>{c=c.set(new $n(u),d)}),Vz(n,e,t,c,i,s,a,o)}return e}{let c=new Er(null);return r.foreach((u,d)=>{const m=zr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),Vz(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==oc.LISTEN_COMPLETE)throw(0,N.Hk)("Unknown operation type: "+t.type);o=function mWe(n,e,t,r,i){const s=e.serverCache;return Zse(n,zse(e,s.getNode(),s.isFullyInitialized()||on(t),s.isFiltered()),t,r,Xse,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function hWe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=wx(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Vse(wx(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function uWe(n,e){(0,N.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,ioe(n,s.changes,s.viewCache.eventCache.getNode(),null)}function ioe(n,e,t,r){return function H$e(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function x$e(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),lw(n,i,"child_removed",e,r,t),lw(n,i,"child_added",e,r,t),lw(n,i,"child_moved",s,r,t),lw(n,i,"child_changed",e,r,t),lw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Dx,Rx;class soe{constructor(){this.views=new Map}}function Bz(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,N.vA)(null!=s,"SyncTree gave us an op for an invalid query."),roe(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(roe(o,e,t,r));return s}}function ooe(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=Tx(t,i?r:null),l=!1;a?l=!0:r instanceof $t?(a=Nz(t,r),l=!1):(a=$t.EMPTY_NODE,l=!1);const c=Ix(new Wd(a,l,!1),new Wd(r,i,!1));return new _We(e,c)}return o}function aoe(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function qd(n,e){let t=null;for(const r of n.views.values())t=t||bWe(r,e);return t}function loe(n,e){return e._queryParams.loadsAllData()?xx(n):n.views.get(e._queryIdentifier)}function coe(n,e){return null!=loe(n,e)}function Kd(n){return null!=xx(n)}function xx(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let RWe=1;class uoe{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Er(null),this.pendingWriteTree_=function sWe(){return{visibleWrites:pl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Uz(n,e,t,r,i){return function q$e(n,e,t,r,i){(0,N.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=uw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ry(n,new bp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Qd(n,e,t=!1){const r=function Q$e(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Y$e(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,N.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&X$e(a,r.path)?i=!1:Pa(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Z$e(n){n.visibleWrites=Gse(n.allWrites,J$e,Pn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Hse(n.visibleWrites,r.path):ss(r.children,l=>{n.visibleWrites=Hse(n.visibleWrites,zr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new Er(null);return null!=r.snap?s=s.set(Pn(),!0):ss(r.children,o=>{s=s.set(new $n(o),!0)}),ry(n,new Ex(r.path,s,t))}return[]}function dw(n,e,t){return ry(n,new bp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Mx(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||coe(o,e))){const l=function SWe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Kd(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(noe(c,t,r)),toe(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(noe(l,t,r)),toe(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Kd(n)&&s.push(new(function CWe(){return(0,N.vA)(Dx,"Reference.ts has not been loaded"),Dx}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function TWe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(m,y)=>Kd(y));if(u&&!d){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function LWe(n){return n.fold((e,t,r)=>{if(t&&Kd(t))return[xx(t)];{let i=[];return t&&(i=aoe(t)),ss(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],M=T.query,B=poe(n,T);n.listenProvider_.startListening(fw(M),hw(n,M),B.hashFn,B.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(fw(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(kx(m));n.listenProvider_.stopListening(fw(m),y)}))}!function VWe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=kx(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function doe(n,e,t,r){const i=zz(n,r);if(null!=i){const s=Hz(i),o=s.path,a=s.queryId,l=no(o,e);return $z(n,o,new bp(xz(a),l,t))}return[]}function jz(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=no(m,i);s=s||qd(y,b),o=o||Kd(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||Kd(a),s=s||qd(a,Pn())):(a=new soe,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=$t.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=qd(b,Pn());T&&(s=s.updateImmediateChild(y,T))}));const c=coe(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=kx(e);(0,N.vA)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function BWe(){return RWe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let d=function AWe(n,e,t,r,i,s){const o=ooe(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function EWe(n,e){n.eventRegistrations_.push(e)}(o,t),function IWe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(br,(s,o)=>{r.push(J_(s,o))}),t.isFullyInitialized()&&r.push(Vse(t.getNode())),ioe(n,r,t.getNode(),e)}(o,t)}(a,e,t,Cx(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=loe(a,e);d=d.concat(function UWe(n,e,t){const r=e._path,i=hw(n,e),s=poe(n,t),o=n.listenProvider_.startListening(fw(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,N.vA)(!Kd(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!on(c)&&u&&Kd(u))return[xx(u).query];{let m=[];return u&&(m=m.concat(aoe(u).map(y=>y.query))),ss(d,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(fw(u),hw(n,u))}}return o}(n,e,m))}return d}function Px(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=qd(a,no(o,e));if(c)return c});return qse(i,e,s,t,!0)}function ry(n,e){return hoe(e,n.syncPointTree_,null,Cx(n.pendingWriteTree_,Pn()))}function hoe(n,e,t,r){if(on(n.path))return foe(n,e,t,r);{const i=e.get(Pn());null==t&&null!=i&&(t=qd(i,Pn()));let s=[];const o=sn(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=Qse(r,o);s=s.concat(hoe(a,l,c,u))}return i&&(s=s.concat(Bz(i,n,r,t))),s}}function foe(n,e,t,r){const i=e.get(Pn());null==t&&null!=i&&(t=qd(i,Pn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=Qse(r,o),u=n.operationForChild(o);u&&(s=s.concat(foe(u,a,l,c)))}),i&&(s=s.concat(Bz(i,n,r,t))),s}function poe(n,e){const t=e.query,r=hw(n,t);return{hashFn:()=>(function yWe(n){return n.viewCache_.serverCache.getNode()}(e)||$t.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function NWe(n,e,t){const r=zz(n,t);if(r){const i=Hz(r),s=i.path,o=i.queryId,a=no(s,e);return $z(n,s,new aw(xz(o),a))}return[]}(n,t._path,r):function kWe(n,e){return ry(n,new aw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function P4e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Mx(n,t,null,s)}}}}function hw(n,e){const t=kx(e);return n.queryToTagMap.get(t)}function kx(n){return n._path.toString()+"$"+n._queryIdentifier}function zz(n,e){return n.tagToQueryMap.get(e)}function Hz(n){const e=n.indexOf("$");return(0,N.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new $n(n.substr(0,e))}}function $z(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.vA)(r,"Missing sync point for query tag that we're tracking"),Bz(r,t,Cx(n.pendingWriteTree_,e),null)}function fw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function xWe(){return(0,N.vA)(Rx,"Reference.ts has not been loaded"),Rx}())(n._repo,n._path):n}class Wz{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Wz(t)}node(){return this.node_}}class Gz{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zr(this.path_,e);return new Gz(this.syncTree_,t)}node(){return Px(this.syncTree_,this.path_)}}const jWe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},moe=function(n,e,t){return n&&"object"==typeof n?((0,N.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?zWe(n[".sv"],e,t):"object"==typeof n[".sv"]?HWe(n[".sv"],e):void(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},zWe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.vA)(!1,"Unexpected server value: "+n)},HWe=function(n,e,t){n.hasOwnProperty("increment")||(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},goe=function(n,e,t,r){return Kz(e,new Gz(t,n),r)},qz=function(n,e,t){return Kz(n,new Wz(e),t)};function Kz(n,e,t){const r=n.getPriority().val(),i=moe(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=moe(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new X_(a,Xr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new X_(i))),o.forEachChild(br,(a,l)=>{const c=Kz(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class Qz{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Nx(n,e){let t=e instanceof $n?e:new $n(e),r=n,i=sn(t);for(;null!==i;){const s=(0,N.yw)(r.node.children,i)||{children:{},childCount:0};r=new Qz(i,r,s),t=cr(t),i=sn(t)}return r}function wp(n){return n.node.value}function Yz(n,e){n.node.value=e,Xz(n)}function _oe(n){return n.node.childCount>0}function Ox(n,e){ss(n.node.children,(t,r)=>{e(new Qz(t,n,r))})}function yoe(n,e,t,r){t&&!r&&e(n),Ox(n,i=>{yoe(i,e,!0,r)}),t&&r&&e(n)}function pw(n){return new $n(null===n.parent?n.name:pw(n.parent)+"/"+n.name)}function Xz(n){null!==n.parent&&function GWe(n,e,t){const r=function $We(n){return void 0===wp(n)&&!_oe(n)}(t),i=(0,N.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Xz(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Xz(n))}(n.parent,n.name,n)}const qWe=/[\[\].#$\/\u0000-\u001F\u007F]/,KWe=/[\[\].#$\u0000-\u001F\u007F]/,Zz=10485760,Fx=function(n){return"string"==typeof n&&0!==n.length&&!qWe.test(n)},voe=function(n){return"string"==typeof n&&0!==n.length&&!KWe.test(n)},mw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!cx(n)||n&&"object"==typeof n&&(0,N.gR)(n,".sv")},ac=function(n,e,t,r){r&&void 0===e||gw((0,N.dI)(n,"value"),e,t)},gw=function(n,e,t){const r=t instanceof $n?new d$e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+yp(r));if("function"==typeof e)throw new Error(n+"contains a function "+yp(r)+" with contents = "+e.toString());if(cx(e))throw new Error(n+"contains "+e.toString()+" "+yp(r));if("string"==typeof e&&e.length>Zz/3&&(0,N.OE)(e)>Zz)throw new Error(n+"contains a string greater than "+Zz+" utf8 bytes "+yp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ss(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Fx(o)))throw new Error(n+" contains an invalid key ("+o+") "+yp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function h$e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.OE)(e),xse(n)})(r,o),gw(n,a,r),function f$e(n){const e=n.parts_.pop();n.byteLength_-=(0,N.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+yp(r)+" in addition to actual children.")}},boe=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ss(e,(o,a)=>{const l=new $n(o);if(gw(i,a,zr(t,l)),".priority"===pz(l)&&!mw(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=ew(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!Fx(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(u$e);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Pa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Jz=function(n,e,t){if(!t||void 0!==e){if(cx(e))throw new Error((0,N.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mw(e))throw new Error((0,N.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},_w=function(n,e,t,r){if(!(r&&void 0===t||Fx(t)))throw new Error((0,N.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yw=function(n,e,t,r){if(!(r&&void 0===t||voe(t)))throw new Error((0,N.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},XWe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yw(n,e,t,r)},ka=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},Eoe=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Fx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),voe(n)}(t))throw new Error((0,N.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ZWe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lx(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!mz(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ioe(n,e,t){Lx(n,t),woe(n,r=>mz(r,e))}function ia(n,e,t){Lx(n,t),woe(n,r=>Pa(r,e)||Pa(e,r))}function woe(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(JWe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function JWe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();gp&&is("event: "+t.toString()),Q_(r)}}}const Coe="repo_interrupt",e3e=25;class t3e{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZWe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bx(),this.transactionQueueTree_=new Qz,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Toe(n){const t=n.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vw(n){return jWe({timestamp:Toe(n)})}function Aoe(n,e,t,r,i){n.dataUpdateCount++;const s=new $n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,N.kH)(t,c=>Xr(c));o=function OWe(n,e,t,r){const i=zz(n,r);if(i){const s=Hz(i),o=s.path,a=s.queryId,l=no(o,e),c=Er.fromObject(t);return $z(n,o,new ty(xz(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Xr(t);o=doe(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,N.kH)(t,c=>Xr(c));o=function PWe(n,e,t){const r=Er.fromObject(t);return ry(n,new ty({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Xr(t);o=dw(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=sy(n,s)),ia(n.eventQueue_,a,o)}function Soe(n,e){eH(n,"connected",e),!1===e&&function o3e(n){iy(n,"onDisconnectEvents");const e=vw(n),t=bx();Az(n.onDisconnect_,Pn(),(i,s)=>{const o=goe(i,s,n.serverSyncTree_,e);ey(t,i,o)});let r=[];Az(t,Pn(),(i,s)=>{r=r.concat(dw(n.serverSyncTree_,i,s));const o=iH(n,i);sy(n,o)}),n.onDisconnect_=bx(),ia(n.eventQueue_,Pn(),r)}(n)}function eH(n,e,t){const r=new $n("/.info/"+e),i=Xr(t);n.infoData_.updateSnapshot(r,i);const s=dw(n.infoSyncTree_,r,i);ia(n.eventQueue_,r,s)}function Vx(n){return n.nextWriteId_++}function tH(n,e,t,r,i){iy(n,"set",{path:e.toString(),value:t,priority:r});const s=vw(n),o=Xr(t,r),a=Px(n.serverSyncTree_,e),l=qz(o,a,s),c=Vx(n),u=Uz(n.serverSyncTree_,e,l,c,!0);Lx(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(m,y)=>{const b="ok"===m;b||Os("set at "+e+" failed: "+m);const T=Qd(n.serverSyncTree_,c,!b);ia(n.eventQueue_,e,T),Yd(0,i,m,y)});const d=iH(n,e);sy(n,d),ia(n.eventQueue_,d,[])}function a3e(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Tz(n.onDisconnect_,e),Yd(0,t,r,i)})}function Doe(n,e,t,r){const i=Xr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&ey(n.onDisconnect_,e,i),Yd(0,r,s,o)})}function nH(n,e,t){let r;r=".info"===sn(e._path)?Mx(n.infoSyncTree_,e,t):Mx(n.serverSyncTree_,e,t),Ioe(n.eventQueue_,e._path,r)}function xoe(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Coe)}function iy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),is(t,...e)}function Yd(n,e,t,r){e&&Q_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function rH(n,e,t){return Px(n.serverSyncTree_,e,t)||$t.EMPTY_NODE}function Bx(n,e=n.transactionQueueTree_){if(e||Ux(n,e),wp(e)){const t=Moe(n,e);(0,N.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function f3e(n,e,t){const r=t.map(c=>c.currentWriteId),i=rH(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];(0,N.vA)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=no(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{iy(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(Qd(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&d.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Ux(n,Nx(n.transactionQueueTree_,e)),Bx(n,n.transactionQueueTree_),ia(n.eventQueue_,e,u);for(let m=0;m<d.length;m++)Q_(d[m])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Os("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}sy(n,e)}},o)}(n,pw(e),t)}else _oe(e)&&Ox(e,t=>{Bx(n,t)})}function sy(n,e){const t=Roe(n,e),r=pw(t);return function p3e(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=no(t,l.path);let d,u=!1;if((0,N.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,i=i.concat(Qd(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=e3e)u=!0,d="maxretry",i=i.concat(Qd(n.serverSyncTree_,l.currentWriteId,!0));else{const m=rH(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){gw("transaction failed: Data returned ",y,l.path);let b=Xr(y);"object"==typeof y&&null!=y&&(0,N.gR)(y,".priority")||(b=b.updatePriority(m.getPriority()));const M=l.currentWriteId,B=vw(n),V=qz(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=Vx(n),o.splice(o.indexOf(M),1),i=i.concat(Uz(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(Qd(n.serverSyncTree_,M,!0))}else u=!0,d="nodata",i=i.concat(Qd(n.serverSyncTree_,l.currentWriteId,!0))}ia(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Ux(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Q_(r[a]);Bx(n,n.transactionQueueTree_)}(n,Moe(n,t),r),r}function Roe(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===wp(r);)r=Nx(r,t),t=sn(e=cr(e));return r}function Moe(n,e){const t=[];return Poe(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Poe(n,e,t){const r=wp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ox(e,i=>{Poe(n,i,t)})}function Ux(n,e){const t=wp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Yz(e,t.length>0?t:void 0)}Ox(e,r=>{Ux(n,r)})}function iH(n,e){const t=pw(Roe(n,e)),r=Nx(n.transactionQueueTree_,e);return function WWe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{sH(n,i)}),sH(n,r),yoe(r,i=>{sH(n,i)}),t}function sH(n,e){const t=wp(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,N.vA)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,N.vA)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Qd(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Yz(e,void 0):t.length=s+1,ia(n.eventQueue_,pw(e),i);for(let o=0;o<r.length;o++)Q_(r[o])}}const oH=function(n,e){const t=_3e(n),r=t.namespace;return"firebase.com"===t.domain&&ic(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ic("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lz(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new $n(t.pathString)}},_3e=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=function m3e(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,d)));const m=function g3e(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Os(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},koe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",y3e=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=koe.charAt(t%64),t=Math.floor(t/64);(0,N.vA)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=koe.charAt(e[i]);return(0,N.vA)(20===o.length,"nextPushId: Length should be 20."),o}}();class Noe{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.As)(this.snapshot.exportVal())}}class Ooe{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class aH{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Foe{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.cY;return a3e(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ka("OnDisconnect.remove",this._path);const e=new N.cY;return Doe(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ka("OnDisconnect.set",this._path),ac("OnDisconnect.set",e,this._path,!1);const t=new N.cY;return Doe(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ka("OnDisconnect.setWithPriority",this._path),ac("OnDisconnect.setWithPriority",e,this._path,!1),Jz("OnDisconnect.setWithPriority",t,!1);const r=new N.cY;return function l3e(n,e,t,r,i){const s=Xr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&ey(n.onDisconnect_,e,s),Yd(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ka("OnDisconnect.update",this._path),boe("OnDisconnect.update",e,this._path,!1);const t=new N.cY;return function c3e(n,e,t,r){if((0,N.Im)(t))return is("onDisconnect().update() called with empty data.  Don't do anything."),void Yd(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ss(t,(o,a)=>{const l=Xr(a);ey(n.onDisconnect_,zr(e,o),l)}),Yd(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Mo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:pz(this._path)}get ref(){return new Na(this._repo,this._path)}get _queryIdentifier(){const e=Use(this._queryParams),t=oz(e);return"{}"===t?"default":t}get _queryObject(){return Use(this._queryParams)}isEqual(e){if(!((e=(0,N.Ku)(e))instanceof Mo))return!1;const t=this._repo===e._repo,r=mz(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function c$e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function jx(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Xd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===sc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==zd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==lu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===br){if(null!=e&&!mw(e)||null!=t&&!mw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.vA)(n.getIndex()instanceof bz||n.getIndex()===Ez,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function zx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Na extends Mo{constructor(e,t){super(e,t,new _x,!1)}get parent(){const e=Dse(this._path);return null===e?null:new Na(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Cp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new $n(e),r=Tp(this.ref,e);return new Cp(this._node.getChild(t),r,br)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Cp(i,Tp(this.ref,r),br)))}hasChild(e){const t=new $n(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Loe(n,e){return(n=(0,N.Ku)(n))._checkNotDeleted("ref"),void 0!==e?Tp(n._root,e):n._root}function Voe(n,e){(n=(0,N.Ku)(n))._checkNotDeleted("refFromURL");const t=oH(e,n._repo.repoInfo_.nodeAdmin);Eoe("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ic("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Loe(n,t.path.toString())}function Tp(n,e){return null===sn((n=(0,N.Ku)(n))._path)?XWe("child","path",e,!1):yw("child","path",e,!1),new Na(n._repo,zr(n._path,e))}function lH(n,e){n=(0,N.Ku)(n),ka("set",n._path),ac("set",e,n._path,!1);const t=new N.cY;return tH(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function w3e(n,e){boe("update",e,n._path,!1);const t=new N.cY;return function s3e(n,e,t,r){iy(n,"update",{path:e.toString(),value:t});let i=!0;const s=vw(n),o={};if(ss(t,(a,l)=>{i=!1,o[a]=goe(zr(e,a),Xr(l),n.serverSyncTree_,s)}),i)is("update() called with empty data.  Don't do anything."),Yd(0,r,"ok",void 0);else{const a=Vx(n),l=function MWe(n,e,t,r){!function K$e(n,e,t,r){(0,N.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Mz(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Er.fromObject(t);return ry(n,new ty({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);Lx(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{const d="ok"===c;d||Os("update at "+e+" failed: "+c);const m=Qd(n.serverSyncTree_,a,!d),y=m.length>0?sy(n,e):e;ia(n.eventQueue_,y,m),Yd(0,r,c,u)}),ss(t,c=>{const u=iH(n,zr(e,c));sy(n,u)}),ia(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function C3e(n){n=(0,N.Ku)(n);const e=new aH(()=>{}),t=new bw(e);return function i3e(n,e,t){const r=function FWe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=no(c,t);r=r||qd(u,d)});let i=n.syncPointTree_.get(t);i?r=r||qd(i,Pn()):(i=new soe,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Wd(r,!0,!1):null;return function vWe(n){return wx(n.viewCache_)}(ooe(i,e,Cx(n.pendingWriteTree_,e._path),s?o.getNode():$t.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Xr(i).withIndex(e._queryParams.getIndex());let o;if(jz(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=dw(n.serverSyncTree_,e._path,s);else{const a=hw(n.serverSyncTree_,e);o=doe(n.serverSyncTree_,e._path,s,a)}return ia(n.eventQueue_,e._path,o),Mx(n.serverSyncTree_,e,t,null,!0),s},i=>(iy(n,"get for query "+(0,N.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Cp(r,new Na(n._repo,n._path),n._queryParams.getIndex()))}class bw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Noe("value",this,new Cp(e.snapshotNode,new Na(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ooe(this,e,t):null}matches(e){return e instanceof bw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Hx{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ooe(this,e,t):null}createEvent(e,t){(0,N.vA)(null!=e.childName,"Child events should have a childName.");const r=Tp(new Na(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Noe(e.type,this,new Cp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Hx&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ew(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(u,d)=>{nH(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new aH(t,s||void 0),a="value"===e?new bw(o):new Hx(e,o);return function u3e(n,e,t){let r;r=".info"===sn(e._path)?jz(n.infoSyncTree_,e,t):jz(n.serverSyncTree_,e,t),Ioe(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>nH(n._repo,n,a)}function cH(n,e,t,r){return Ew(n,"value",e,t,r)}function Boe(n,e,t,r){return Ew(n,"child_added",e,t,r)}function Uoe(n,e,t,r){return Ew(n,"child_changed",e,t,r)}function joe(n,e,t,r){return Ew(n,"child_moved",e,t,r)}function zoe(n,e,t,r){return Ew(n,"child_removed",e,t,r)}function Hoe(n,e,t){let r=null;const i=t?new aH(t):null;"value"===e?r=new bw(i):e&&(r=new Hx(e,i)),nH(n._repo,n,r)}class ml{}class $oe extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){ac("endAt",this._value,e._path,!0);const t=Cz(e._queryParams,this._value,this._key);if(zx(t),Xd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class A3e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){ac("endBefore",this._value,e._path,!1);const t=function O$e(n,e,t){let r;return r=Cz(n,e,n.index_===sc||t?t:zd),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(zx(t),Xd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class Woe extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){ac("startAt",this._value,e._path,!0);const t=wz(e._queryParams,this._value,this._key);if(zx(t),Xd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class x3e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){ac("startAfter",this._value,e._path,!1);const t=function N$e(n,e,t){let r;return r=wz(n,e,n.index_===sc||t?t:lu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(zx(t),Xd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class M3e extends ml{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mo(e._repo,e._path,function P$e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class k3e extends ml{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mo(e._repo,e._path,function k$e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class O3e extends ml{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){jx(e,"orderByChild");const t=new $n(this._path);if(on(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new bz(t),i=yx(e._queryParams,r);return Xd(i),new Mo(e._repo,e._path,i,!0)}}class L3e extends ml{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){jx(e,"orderByKey");const t=yx(e._queryParams,sc);return Xd(t),new Mo(e._repo,e._path,t,!0)}}class B3e extends ml{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){jx(e,"orderByPriority");const t=yx(e._queryParams,br);return Xd(t),new Mo(e._repo,e._path,t,!0)}}class j3e extends ml{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){jx(e,"orderByValue");const t=yx(e._queryParams,Ez);return Xd(t),new Mo(e._repo,e._path,t,!0)}}class H3e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(ac("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $oe(this._value,this._key)._apply(new Woe(this._value,this._key)._apply(e))}}function gl(n,...e){let t=(0,N.Ku)(n);for(const r of e)t=r._apply(t);return t}(function wWe(n){(0,N.vA)(!Dx,"__referenceConstructor has already been defined"),Dx=n})(Na),function DWe(n){(0,N.vA)(!Rx,"__referenceConstructor has already been defined"),Rx=n}(Na);const uH={};function dH(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ic("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),is("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=oH(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=oH(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new JI(JI.OWNER):new V4e(n.name,n.options,e);Eoe("Invalid Firebase Database URL",o),on(o.path)||ic("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function K3e(n,e,t,r){let i=uH[e.name];i||(i={},uH[e.name]=i);let s=i[n.toURLString()];return s&&ic("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new t3e(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new L4e(n.name,t));return new Y3e(d,n)}class Y3e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function n3e(n,e,t){if(n.stats_=dz(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new vx(n.repoInfo_,(r,i,s,o)=>{Aoe(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Soe(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new vp(n.repoInfo_,e,(r,i,s,o)=>{Aoe(n,r,i,s,o)},r=>{Soe(n,r)},r=>{!function r3e(n,e){ss(e,(t,r)=>{eH(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function j4e(n,e){const t=n.toString();return uz[t]||(uz[t]=e()),uz[t]}(n.repoInfo_,()=>new j$e(n.stats_,n.server_)),n.infoData_=new F$e,n.infoSyncTree_=new uoe({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=dw(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),eH(n,"connected",!1),n.serverSyncTree_=new uoe({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);ia(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Na(this._repo,Pn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function q3e(n,e){const t=uH[e];(!t||t[n.key]!==n)&&ic(`Database ${e}(${n.repoInfo_}) has already been deleted.`),xoe(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ic("Cannot call "+e+" on a deleted database.")}}function qoe(){gse.IS_TRANSPORT_INITIALIZED&&Os("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function X3e(){qoe(),Hd.forceDisallow()}function Z3e(){qoe(),Y_.forceDisallow(),Hd.forceAllow()}function tGe(n,e){Yie(n,e)}const rGe={".sv":"timestamp"};class oGe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}vp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},vp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function nGe(n){rz(jn.SDK_VERSION),(0,jn._registerComponent)(new Qo.uA("database",(e,{instanceIdentifier:t})=>dH(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,jn.registerVersion)($ie,"1.0.8",n),(0,jn.registerVersion)($ie,"1.0.8","esm2017")}();const uGe=new To.Vy("@firebase/database-compat"),Qoe=function(n){uGe.warn("FIREBASE WARNING: "+n)};class fGe{constructor(e){this._delegate=e}cancel(e){(0,N.od)("OnDisconnect.cancel",0,1,arguments.length),(0,N.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.od)("OnDisconnect.remove",0,1,arguments.length),(0,N.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.od)("OnDisconnect.set",1,2,arguments.length),(0,N.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,N.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Qoe("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class pGe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Zd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),yw("DataSnapshot.child","path",e,!1),new Zd(this._database,this._delegate.child(e))}hasChild(e){return(0,N.od)("DataSnapshot.hasChild",1,1,arguments.length),yw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.od)("DataSnapshot.forEach",1,1,arguments.length),(0,N.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Zd(this._database,t)))}hasChildren(){return(0,N.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.od)("DataSnapshot.ref",0,0,arguments.length),new sa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ps{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,N.od)("Query.on",2,4,arguments.length),(0,N.oD)("Query.on","callback",t,!1);const o=ps.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{t.call(o.context,new Zd(this.database,c),u)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return cH(this._delegate,a,l),t;case"child_added":return Boe(this._delegate,a,l),t;case"child_removed":return zoe(this._delegate,a,l),t;case"child_changed":return Uoe(this._delegate,a,l),t;case"child_moved":return joe(this._delegate,a,l),t;default:throw new Error((0,N.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.od)("Query.off",0,3,arguments.length),function(n,e){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.oD)("Query.off","callback",t,!0),(0,N.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Hoe(this._delegate,e,i)}else Hoe(this._delegate,e)}get(){return C3e(this._delegate).then(e=>new Zd(this.database,e))}once(e,t,r,i){(0,N.od)("Query.once",1,4,arguments.length),(0,N.oD)("Query.once","callback",t,!0);const s=ps.getCancelAndContextArgs_("Query.once",r,i),o=new N.cY,a=(c,u)=>{const d=new Zd(this.database,c);t&&t.call(s.context,d,u),o.resolve(d)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":cH(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Boe(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":zoe(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Uoe(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":joe(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,N.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,N.od)("Query.limitToFirst",1,1,arguments.length),new ps(this.database,gl(this._delegate,function P3e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new M3e(n)}(e)))}limitToLast(e){return(0,N.od)("Query.limitToLast",1,1,arguments.length),new ps(this.database,gl(this._delegate,function N3e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new k3e(n)}(e)))}orderByChild(e){return(0,N.od)("Query.orderByChild",1,1,arguments.length),new ps(this.database,gl(this._delegate,function F3e(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yw("orderByChild","path",n,!1),new O3e(n)}(e)))}orderByKey(){return(0,N.od)("Query.orderByKey",0,0,arguments.length),new ps(this.database,gl(this._delegate,function V3e(){return new L3e}()))}orderByPriority(){return(0,N.od)("Query.orderByPriority",0,0,arguments.length),new ps(this.database,gl(this._delegate,function U3e(){return new B3e}()))}orderByValue(){return(0,N.od)("Query.orderByValue",0,0,arguments.length),new ps(this.database,gl(this._delegate,function z3e(){return new j3e}()))}startAt(e=null,t){return(0,N.od)("Query.startAt",0,2,arguments.length),new ps(this.database,gl(this._delegate,function D3e(n=null,e){return _w("startAt","key",e,!0),new Woe(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.od)("Query.startAfter",0,2,arguments.length),new ps(this.database,gl(this._delegate,function R3e(n,e){return _w("startAfter","key",e,!0),new x3e(n,e)}(e,t)))}endAt(e=null,t){return(0,N.od)("Query.endAt",0,2,arguments.length),new ps(this.database,gl(this._delegate,function T3e(n,e){return _w("endAt","key",e,!0),new $oe(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.od)("Query.endBefore",0,2,arguments.length),new ps(this.database,gl(this._delegate,function S3e(n,e){return _w("endBefore","key",e,!0),new A3e(n,e)}(e,t)))}equalTo(e,t){return(0,N.od)("Query.equalTo",1,2,arguments.length),new ps(this.database,gl(this._delegate,function $3e(n,e){return _w("equalTo","key",e,!0),new H3e(n,e)}(e,t)))}toString(){return(0,N.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.od)("Query.isEqual",1,1,arguments.length),!(e instanceof ps))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,N.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new sa(this.database,new Na(this._delegate._repo,this._delegate._path))}}class sa extends ps{constructor(e,t){super(e,new Mo(t._repo,t._path,new _x,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new sa(this.database,Tp(this._delegate,e))}getParent(){(0,N.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new sa(this.database,e):null}getRoot(){return(0,N.od)("Reference.root",0,0,arguments.length),new sa(this.database,this._delegate.root)}set(e,t){(0,N.od)("Reference.set",1,2,arguments.length),(0,N.oD)("Reference.set","onComplete",t,!0);const r=lH(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Qoe("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ka("Reference.update",this._delegate._path),(0,N.oD)("Reference.update","onComplete",t,!0);const r=w3e(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.od)("Reference.setWithPriority",2,3,arguments.length),(0,N.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function I3e(n,e,t){if(ka("setWithPriority",n._path),ac("setWithPriority",e,n._path,!1),Jz("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.cY;return tH(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,N.od)("Reference.remove",0,1,arguments.length),(0,N.oD)("Reference.remove","onComplete",e,!0);const t=function b3e(n){return ka("remove",n._path),lH(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.od)("Reference.transaction",1,3,arguments.length),(0,N.oD)("Reference.transaction","transactionUpdate",e,!1),(0,N.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function aGe(n,e,t){var r;if(n=(0,N.Ku)(n),ka("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new N.cY,a=cH(n,()=>{});return function h3e(n,e,t,r,i,s){iy(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:qie(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=rH(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{gw("transaction failed: Data returned ",l,o.path),o.status=0;const c=Nx(n.transactionQueueTree_,e),u=wp(c)||[];let d;u.push(o),Yz(c,u),"object"==typeof l&&null!==l&&(0,N.gR)(l,".priority")?(d=(0,N.yw)(l,".priority"),(0,N.vA)(mw(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Px(n.serverSyncTree_,e)||$t.EMPTY_NODE).getPriority().val();const m=vw(n),y=Xr(l,d),b=qz(y,a,m);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=b,o.currentWriteId=Vx(n);const T=Uz(n.serverSyncTree_,e,b,o.currentWriteId,o.applyLocally);ia(n.eventQueue_,e,T),Bx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,u)=>{let d=null;l?s.reject(l):(d=new Cp(u,new Na(n._repo,n._path),br),s.resolve(new oGe(c,d)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new pGe(s.committed,new Zd(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,N.od)("Reference.setPriority",1,2,arguments.length),(0,N.oD)("Reference.setPriority","onComplete",t,!0);const r=function E3e(n,e){n=(0,N.Ku)(n),ka("setPriority",n._path),Jz("setPriority",e,!1);const t=new N.cY;return tH(n._repo,zr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.od)("Reference.push",0,2,arguments.length),(0,N.oD)("Reference.push","onComplete",t,!0);const r=function v3e(n,e){n=(0,N.Ku)(n),ka("push",n._path),ac("push",e,n._path,!0);const t=Toe(n._repo),r=y3e(t),i=Tp(n,r),s=Tp(n,r);let o;return o=null!=e?lH(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new sa(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new sa(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return ka("Reference.onDisconnect",this._delegate._path),new fGe(new Foe(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Iw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:X3e,forceLongPolling:Z3e}}useEmulator(e,t,r={}){!function Koe(n,e,t,r={}){(n=(0,N.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ic("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ic('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new JI(JI.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Fy)(r.mockUserToken,n.app.options.projectId);s=new JI(o)}!function G3e(n,e,t,r){n.repoInfo_=new lz(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,N.od)("database.ref",0,1,arguments.length),e instanceof sa){const t=Voe(this._delegate,e.toString());return new sa(this,t)}{const t=Loe(this._delegate,e);return new sa(this,t)}}refFromURL(e){(0,N.od)("database.refFromURL",1,1,arguments.length);const r=Voe(this._delegate,e);return new sa(this,r)}goOffline(){return(0,N.od)("database.goOffline",0,0,arguments.length),function J3e(n){(n=(0,N.Ku)(n))._checkNotDeleted("goOffline"),xoe(n._repo)}(this._delegate)}goOnline(){return(0,N.od)("database.goOnline",0,0,arguments.length),function eGe(n){(n=(0,N.Ku)(n))._checkNotDeleted("goOnline"),function d3e(n){n.persistentConnection_&&n.persistentConnection_.resume(Coe)}(n._repo)}(this._delegate)}}Iw.ServerValue={TIMESTAMP:function iGe(){return rGe}(),increment:n=>function sGe(n){return{".sv":{increment:n}}}(n)};var gGe=Object.freeze({__proto__:null,initStandalone:function mGe({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){rz(t);const a=new Qo.h1("database-standalone"),l=new Qo.Kq("auth-internal",a);let c;return l.setComponent(new Qo.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new Qo.Kq("app-check-internal",a),c.setComponent(new Qo.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new Iw(dH(n,l,c,e,o),n),namespace:s}}});const _Ge=Iw.ServerValue;function ww(n,e,t="on",r=gf){return new Vt(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(Ve(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),FV())}function Yoe(n){return null==n}function Xoe(n){return"function"==typeof n.set}function Zoe(n,e){return Xoe(e)?e:n.ref(e)}function Joe(n,e){if(function vGe(n){return"string"==typeof n}(n))return e.stringCase();if(Xoe(n))return e.firebaseCase();if(function bGe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function eae(n){return(Yoe(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function tae(n,e,t){return sl(...(e=eae(e)).map(i=>ww(n,i,"on",t)))}function nae(n,e){return function(r,i){return Joe(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function CGe(n){return function(t){return t?Joe(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function rae(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function SGe(n,e){const{payload:t,prevKey:r,key:i}=e,s=rae(n,i),o=function AGe(n,e){if(Yoe(e))return 0;{const t=rae(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function iae(n,e,t){return function TGe(n,e,t){return ww(n,"value","once",t).pipe(Yt(r=>{const i=[qe(r)];return e.forEach(s=>i.push(ww(n,s,"on",t))),sl(...i).pipe(pg(SGe,[]))}),M1())}(n,e=eae(e),t)}function sae(n,e){return function(){return ww(n,"value","on",e)}}!function yGe(n){n.INTERNAL.registerComponent(new Qo.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Iw(i,r)},"PUBLIC").setServiceProps({Reference:sa,Query:ps,Database:Iw,DataSnapshot:Zd,enableLogging:tGe,INTERNAL:gGe,ServerValue:_Ge}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.8")}(Gl.A);const RGe=new ye("angularfire2.realtimeDatabaseURL"),MGe=new ye("angularfire2.database.use-emulator");let PGe=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,c,u,d,m,y,b,T,M){this.schedulers=a;const B=l,V=LS(t,o,r);c&&$V(V,o,u,m,y,b,d,T),this.database=OV(`${V.name}.database.${i}`,"AngularFireDatabase",V.name,()=>{const Q=o.runOutsideAngular(()=>V.database(i||void 0));return B&&Q.useEmulator(...B),Q},[B])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Zoe(this.database,t));let s=i;return r&&(s=r(i)),function DGe(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:nae(r,"update"),set:nae(r,"set"),push:i=>r.push(i),remove:CGe(r),snapshotChanges:i=>iae(n,i,t).pipe(Ui),stateChanges:i=>tae(n,i,t).pipe(Ui),auditTrail:i=>function EGe(n,e,t){return function wGe(n,e,t){return function IGe(n,e){return ww(n,"value","on",e).pipe(Ve(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function w4e(...n){const e=uN(n);return me((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)Ys(n[l]).subscribe(ke(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Ri))&&(o=null))},gs));t.subscribe(ke(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}(e),Ve(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function C4e(n){return me((e,t)=>{let r=!1,i=0;e.subscribe(ke(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),Ve(i=>i.actions))}(n,tae(n,e).pipe(pg((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Ui),valueChanges:(i,s)=>iae(n,i,t).pipe(Ve(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),Ui)}}(s,this)}object(t){return function xGe(n,e){return{query:n,snapshotChanges:()=>sae(n,e.schedulers.outsideAngular)().pipe(Ui),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>sae(n,e.schedulers.outsideAngular)().pipe(Ui,Ve(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Zoe(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(Se(qE),Se(KE,8),Se(RGe,8),Se($s),Se(_t),Se(Fg),Se(MGe,8),Se(QE,8),Se(VV,8),Se(BV,8),Se(UV,8),Se(jV,8),Se(zV,8),Se(HV,8),Se(DA,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),kGe=(()=>{class n{constructor(){Gl.A.registerVersion("angularfire",rd.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=zt({providers:[PGe]})}return n})(),NGe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n,bootstrap:[xUe]})}static{this.\u0275inj=zt({providers:[AEe(af(qu.LegacyInterceptors,[{provide:wq,useFactory:mEe},{provide:_b,useExisting:wq,multi:!0}])),QAe(()=>YAe(xs_firebaseConfig)),nSe(()=>iSe()),I4e(()=>s4e())],imports:[K7,DUe,HUe,Pze,VI,Mre,Pg,Zne,RAe,vre,F8,L8,JNe.initializeApp(xs_firebaseConfig),i1e,kGe,xre,Pre,Sre]})}}return n})();Mbe().bootstrapModule(NGe).catch(n=>console.error(n))},443:(yt,U,G)=>{G.d(U,{$:()=>Kw,A:()=>$,G:()=>Fe,K:()=>cR,L:()=>sh,N:()=>co,P:()=>Lo,R:()=>ct,U:()=>mt,V:()=>Lp,W:()=>qH,X:()=>ch,Y:()=>Iy,Z:()=>Vp,_:()=>Up,a:()=>By,a0:()=>Se,a1:()=>$p,a2:()=>mc,a3:()=>hh,a4:()=>Jw,a5:()=>vn,a6:()=>t0,a7:()=>qp,a8:()=>fo,a9:()=>_R,aA:()=>pu,aB:()=>Tt,aC:()=>ie,aD:()=>Gi,aE:()=>me,aF:()=>Ve,aG:()=>um,aH:()=>jR,aI:()=>n4,aJ:()=>Cr,aN:()=>Is,aQ:()=>Eu,aa:()=>n0,ab:()=>gh,ac:()=>r0,ad:()=>yR,ae:()=>xy,af:()=>bR,ag:()=>ER,ah:()=>IR,ak:()=>wR,al:()=>qn,am:()=>CR,ap:()=>dh,aq:()=>Wi,as:()=>u0,at:()=>Oi,au:()=>vt,av:()=>lo,aw:()=>Vw,ax:()=>Ct,ay:()=>fr,az:()=>Cs,b:()=>_c,c:()=>YH,d:()=>ZH,e:()=>XH,f:()=>w0,g:()=>C0,h:()=>HR,i:()=>yc,j:()=>GR,k:()=>_o,l:()=>Ru,m:()=>M0,o:()=>nM,p:()=>ee,r:()=>nm,s:()=>fa,u:()=>Ec,y:()=>DR});var x=G(467),Z=G(1631),D=G(1401),he=G(5398),ce=G(1635),te=G(8779);const ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},et=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Qe=new D.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new he.Vy("@firebase/auth");function Zt(g,...h){Je.logLevel<=he.$b.ERROR&&Je.error(`Auth (${Z.SDK_VERSION}): ${g}`,...h)}function Ct(g,...h){throw Le(g,...h)}function Tt(g,...h){return Le(g,...h)}function Ot(g,h,f){const _=Object.assign(Object.assign({},et()),{[h]:f});return new D.FA("auth","Firebase",_).create(h,{appName:g.name})}function gt(g){return Ot(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Et(g,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Ct(g,"argument-error"),Ot(g,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(g,...h){if("string"!=typeof g){const f=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return Qe.create(g,...h)}function ie(g,h,...f){if(!g)throw Le(h,...f)}function nt(g){const h="INTERNAL ASSERTION FAILED: "+g;throw Zt(h),new Error(h)}function vt(g,h){g||nt(h)}function jt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Cn(){return"http:"===Tn()||"https:"===Tn()}function Tn(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class nr{constructor(h,f){this.shortDelay=h,this.longDelay=f,vt(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,D.jZ)()||(0,D.lV)()}get(){return function Ir(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Cn()||(0,D.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dr(g,h){vt(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class $r{static initialize(h,f,_){this.fetchImpl=h,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const de={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_e=new nr(3e4,6e4);function se(g,h){return g.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:g.tenantId}):h}function ae(g,h,f,_){return ge.apply(this,arguments)}function ge(){return(ge=(0,x.A)(function*(g,h,f,_,w={}){return pe(g,w,(0,x.A)(function*(){let R={},Y={};_&&("GET"===h?Y=_:R={body:JSON.stringify(_)});const fe=(0,D.Am)(Object.assign({key:g.config.apiKey},Y)).slice(1),Re=yield g._getAdditionalHeaders();Re["Content-Type"]="application/json",g.languageCode&&(Re["X-Firebase-Locale"]=g.languageCode);const tt=Object.assign({method:h,headers:Re},R);return(0,D.c1)()||(tt.referrerPolicy="no-referrer"),$r.fetch()(It(g,g.config.apiHost,f,fe),tt)}))})).apply(this,arguments)}function pe(g,h,f){return ot.apply(this,arguments)}function ot(){return(ot=(0,x.A)(function*(g,h,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},de),h);try{const w=new pt(g),R=yield Promise.race([f(),w.promise]);w.clearNetworkTimeout();const Y=yield R.json();if("needConfirmation"in Y)throw Zr(g,"account-exists-with-different-credential",Y);if(R.ok&&!("errorMessage"in Y))return Y;{const fe=R.ok?Y.errorMessage:Y.error.message,[Re,tt]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw Zr(g,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Re)throw Zr(g,"email-already-in-use",Y);if("USER_DISABLED"===Re)throw Zr(g,"user-disabled",Y);const ut=_[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw Ot(g,ut,tt);Ct(g,ut)}}catch(w){if(w instanceof D.g)throw w;Ct(g,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function Mt(g,h,f,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,x.A)(function*(g,h,f,_,w={}){const R=yield ae(g,h,f,_,w);return"mfaPendingCredential"in R&&Ct(g,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function It(g,h,f,_){const w=`${h}${f}?${_}`;return g.config.emulator?dr(g.config,w):`${g.config.apiScheme}://${w}`}function In(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pt{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(Tt(this.auth,"network-request-failed")),_e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zr(g,h,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const w=Tt(g,h,_);return w.customData._tokenResponse=f,w}function Jt(g){return void 0!==g&&void 0!==g.getResponse}function en(g){return void 0!==g&&void 0!==g.enterprise}class St{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return In(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function wi(){return(wi=(0,x.A)(function*(g){return(yield ae(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nr(g,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,x.A)(function*(g,h){return ae(g,"GET","/v2/recaptchaConfig",se(g,h))})).apply(this,arguments)}function Fa(){return(Fa=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Bs(){return(Bs=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function oo(g,h){return la.apply(this,arguments)}function la(){return(la=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Us(g){if(g)try{const h=new Date(Number(g));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function js(){return(js=(0,x.A)(function*(g,h=!1){const f=(0,D.Ku)(g),_=yield f.getIdToken(h),w=ko(_);ie(w&&w.exp&&w.auth_time&&w.iat,f.auth,"internal-error");const R="object"==typeof w.firebase?w.firebase:void 0,Y=R?.sign_in_provider;return{claims:w,token:_,authTime:Us(os(w.auth_time)),issuedAtTime:Us(os(w.iat)),expirationTime:Us(os(w.exp)),signInProvider:Y||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function os(g){return 1e3*Number(g)}function ko(g){const[h,f,_]=g.split(".");if(void 0===h||void 0===f||void 0===_)return Zt("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,D.u)(f);return w?JSON.parse(w):(Zt("Failed to decode base64 JWT payload"),null)}catch(w){return Zt("Caught error parsing JWT payload as JSON",w?.toString()),null}}function _s(g){const h=ko(g);return ie(h,"internal-error"),ie(typeof h.exp<"u","internal-error"),ie(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function Nn(g,h){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,x.A)(function*(g,h,f=!1){if(f)return h;try{return yield h}catch(_){throw _ instanceof D.g&&function ys({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class yl{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const w=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,x.A)(function*(){yield f.iteration()}),_)}iteration(){var h=this;return(0,x.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class ui{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Us(this.lastLoginAt),this.creationTime=Us(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vs(g){return ao.apply(this,arguments)}function ao(){return(ao=(0,x.A)(function*(g){var h;const f=g.auth,_=yield g.getIdToken(),w=yield Nn(g,oo(f,{idToken:_}));ie(w?.users.length,f,"internal-error");const R=w.users[0];g._notifyReloadListener(R);const Y=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?Vt(R.providerUserInfo):[],fe=function ua(g,h){return[...g.filter(_=>!h.some(w=>w.providerId===_.providerId)),...h]}(g.providerData,Y),ut=!!g.isAnonymous&&!(g.email&&R.passwordHash||fe?.length),tn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:fe,metadata:new ui(R.createdAt,R.lastLoginAt),isAnonymous:ut};Object.assign(g,tn)})).apply(this,arguments)}function La(){return(La=(0,x.A)(function*(g){const h=(0,D.Ku)(g);yield vs(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Vt(g){return g.map(h=>{var{providerId:f}=h,_=(0,ce.Tt)(h,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function We(){return(We=(0,x.A)(function*(g,h){const f=yield pe(g,{},(0,x.A)(function*(){const _=(0,D.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:w,apiKey:R}=g.config,Y=It(g,w,"/v1/token",`key=${R}`),fe=yield g._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",$r.fetch()(Y,{method:"POST",headers:fe,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,x.A)(function*(g,h){return ae(g,"POST","/v2/accounts:revokeToken",se(g,h))})).apply(this,arguments)}class E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ie(h.idToken,"internal-error"),ie(typeof h.idToken<"u","internal-error"),ie(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):_s(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){ie(0!==h.length,"internal-error");const f=_s(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var _=this;return(0,x.A)(function*(){return f||!_.accessToken||_.isExpired?(ie(_.refreshToken,h,"user-token-expired"),_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null):_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var _=this;return(0,x.A)(function*(){const{accessToken:w,refreshToken:R,expiresIn:Y}=yield function lc(g,h){return We.apply(this,arguments)}(h,f);_.updateTokensAndExpiration(w,R,Number(Y))})()}updateTokensAndExpiration(h,f,_){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,f){const{refreshToken:_,accessToken:w,expirationTime:R}=f,Y=new E;return _&&(ie("string"==typeof _,"internal-error",{appName:h}),Y.refreshToken=_),w&&(ie("string"==typeof w,"internal-error",{appName:h}),Y.accessToken=w),R&&(ie("number"==typeof R,"internal-error",{appName:h}),Y.expirationTime=R),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new E,this.toJSON())}_performRefresh(){return nt("not implemented")}}function S(g,h){ie("string"==typeof g||typeof g>"u","internal-error",{appName:h})}class F{constructor(h){var{uid:f,auth:_,stsTokenManager:w}=h,R=(0,ce.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ui(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,x.A)(function*(){const _=yield Nn(f,f.stsTokenManager.getToken(f.auth,h));return ie(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(h){return function ca(g){return js.apply(this,arguments)}(this,h)}reload(){return function Ri(g){return La.apply(this,arguments)}(this)}_assign(h){this!==h&&(ie(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new F(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var _=this;return(0,x.A)(function*(){let w=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),w=!0),f&&(yield vs(_)),yield _.auth._persistUserIfCurrent(_),w&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,x.A)(function*(){if((0,Z._isFirebaseServerApp)(h.auth.app))return Promise.reject(gt(h.auth));const f=yield h.getIdToken();return yield Nn(h,function so(g,h){return Fa.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var _,w,R,Y,fe,Re,tt,ut;const tn=null!==(_=f.displayName)&&void 0!==_?_:void 0,xn=null!==(w=f.email)&&void 0!==w?w:void 0,Ts=null!==(R=f.phoneNumber)&&void 0!==R?R:void 0,Ln=null!==(Y=f.photoURL)&&void 0!==Y?Y:void 0,Uo=null!==(fe=f.tenantId)&&void 0!==fe?fe:void 0,tv=null!==(Re=f._redirectEventId)&&void 0!==Re?Re:void 0,Ph=null!==(tt=f.createdAt)&&void 0!==tt?tt:void 0,N0=null!==(ut=f.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:_m,emailVerified:nv,isAnonymous:ku,providerData:yo,stsTokenManager:O0}=f;ie(_m&&O0,h,"internal-error");const ym=E.fromJSON(this.name,O0);ie("string"==typeof _m,h,"internal-error"),S(tn,h.name),S(xn,h.name),ie("boolean"==typeof nv,h,"internal-error"),ie("boolean"==typeof ku,h,"internal-error"),S(Ts,h.name),S(Ln,h.name),S(Uo,h.name),S(tv,h.name),S(Ph,h.name),S(N0,h.name);const Nu=new F({uid:_m,auth:h,email:xn,emailVerified:nv,displayName:tn,isAnonymous:ku,photoURL:Ln,phoneNumber:Ts,tenantId:Uo,stsTokenManager:ym,createdAt:Ph,lastLoginAt:N0});return yo&&Array.isArray(yo)&&(Nu.providerData=yo.map(vm=>Object.assign({},vm))),tv&&(Nu._redirectEventId=tv),Nu}static _fromIdTokenResponse(h,f,_=!1){return(0,x.A)(function*(){const w=new E;w.updateFromServerResponse(f);const R=new F({uid:f.localId,auth:h,stsTokenManager:w,isAnonymous:_});return yield vs(R),R})()}static _fromGetAccountInfoResponse(h,f,_){return(0,x.A)(function*(){const w=f.users[0];ie(void 0!==w.localId,"internal-error");const R=void 0!==w.providerUserInfo?Vt(w.providerUserInfo):[],Y=!(w.email&&w.passwordHash||R?.length),fe=new E;fe.updateFromIdToken(_);const Re=new F({uid:w.localId,auth:h,stsTokenManager:fe,isAnonymous:Y}),tt={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:R,metadata:new ui(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||R?.length)};return Object.assign(Re,tt),Re})()}}const j=new Map;function me(g){vt(g instanceof Function,"Expected a class definition");let h=j.get(g);return h?(vt(h instanceof g,"Instance stored in cache mismatched with class"),h):(h=new g,j.set(g,h),h)}const mt=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,x.A)(function*(){return!0})()}_set(f,_){var w=this;return(0,x.A)(function*(){w.storage[f]=_})()}_get(f){var _=this;return(0,x.A)(function*(){const w=_.storage[f];return void 0===w?null:w})()}_remove(f){var _=this;return(0,x.A)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function Ve(g,h,f){return`firebase:${g}:${h}:${f}`}class _n{constructor(h,f,_){this.persistence=h,this.auth=f,this.userKey=_;const{config:w,name:R}=this.auth;this.fullUserKey=Ve(this.userKey,w.apiKey,R),this.fullPersistenceKey=Ve("persistence",w.apiKey,R),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,x.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?F._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,x.A)(function*(){if(f.persistence===h)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,_="authUser"){return(0,x.A)(function*(){if(!f.length)return new _n(me(mt),h,_);const w=(yield Promise.all(f.map(function(){var tt=(0,x.A)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let R=w[0]||me(mt);const Y=Ve(_,h.config.apiKey,h.name);let fe=null;for(const tt of f)try{const ut=yield tt._get(Y);if(ut){const tn=F._fromJSON(h,ut);tt!==R&&(fe=tn),R=tt;break}}catch{}const Re=w.filter(tt=>tt._shouldAllowMigration);return R._shouldAllowMigration&&Re.length?(R=Re[0],fe&&(yield R._set(Y,fe.toJSON())),yield Promise.all(f.map(function(){var tt=(0,x.A)(function*(ut){if(ut!==R)try{yield ut._remove(Y)}catch{}});return function(ut){return tt.apply(this,arguments)}}())),new _n(R,h,_)):new _n(R,h,_)})()}}function wr(g){const h=g.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(ih(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(K(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(sR(h))return"Blackberry";if(uy(h))return"Webos";if(Qn(h))return"Safari";if((h.includes("chrome/")||zs(h))&&!h.includes("edge/"))return"Chrome";if(Vw(h))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function K(g=(0,D.ZQ)()){return/firefox\//i.test(g)}function Qn(g=(0,D.ZQ)()){const h=g.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function zs(g=(0,D.ZQ)()){return/crios\//i.test(g)}function ih(g=(0,D.ZQ)()){return/iemobile/i.test(g)}function Vw(g=(0,D.ZQ)()){return/android/i.test(g)}function sR(g=(0,D.ZQ)()){return/blackberry/i.test(g)}function uy(g=(0,D.ZQ)()){return/webos/i.test(g)}function lo(g=(0,D.ZQ)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function pu(g=(0,D.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}function dy(g=(0,D.ZQ)()){return lo(g)||Vw(g)||uy(g)||sR(g)||/windows phone/i.test(g)||ih(g)}function Rp(g,h=[]){let f;switch(g){case"Browser":f=wr((0,D.ZQ)());break;case"Worker":f=`${wr((0,D.ZQ)())}-${g}`;break;default:f=g}const _=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${Z.SDK_VERSION}/${_}`}class _u{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const _=R=>new Promise((Y,fe)=>{try{Y(h(R))}catch(Re){fe(Re)}});_.onAbort=f,this.queue.push(_);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,x.A)(function*(){if(f.auth.currentUser===h)return;const _=[];try{for(const w of f.queue)yield w(h),w.onAbort&&_.push(w.onAbort)}catch(w){_.reverse();for(const R of _)try{R()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function Wn(){return(Wn=(0,x.A)(function*(g,h={}){return ae(g,"GET","/v2/passwordPolicy",se(g,h))})).apply(this,arguments)}class BH{constructor(h){var f,_,w,R;const Y=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Y.minPasswordLength)&&void 0!==f?f:6,Y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Y.maxPasswordLength),void 0!==Y.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Y.containsLowercaseCharacter),void 0!==Y.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Y.containsUppercaseCharacter),void 0!==Y.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Y.containsNumericCharacter),void 0!==Y.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Y.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(_=h.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(R=h.forceUpgradeOnSignin)&&void 0!==R&&R,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,_,w,R,Y,fe;const Re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Re),this.validatePasswordCharacterOptions(h,Re),Re.isValid&&(Re.isValid=null===(f=Re.meetsMinPasswordLength)||void 0===f||f),Re.isValid&&(Re.isValid=null===(_=Re.meetsMaxPasswordLength)||void 0===_||_),Re.isValid&&(Re.isValid=null===(w=Re.containsLowercaseLetter)||void 0===w||w),Re.isValid&&(Re.isValid=null===(R=Re.containsUppercaseLetter)||void 0===R||R),Re.isValid&&(Re.isValid=null===(Y=Re.containsNumericCharacter)||void 0===Y||Y),Re.isValid&&(Re.isValid=null===(fe=Re.containsNonAlphanumericCharacter)||void 0===fe||fe),Re}validatePasswordLengthOptions(h,f){const _=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;_&&(f.meetsMinPasswordLength=h.length>=_),w&&(f.meetsMaxPasswordLength=h.length<=w)}validatePasswordCharacterOptions(h,f){let _;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let w=0;w<h.length;w++)_=h.charAt(w),this.updatePasswordCharacterOptionsStatuses(f,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(h,f,_,w,R){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=R))}}class On{constructor(h,f,_,w){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ti(this),this.idTokenSubscription=new ti(this),this.beforeStateQueue=new _u(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,f){var _=this;return f&&(this._popupRedirectResolver=me(f)),this._initializationPromise=this.queue((0,x.A)(function*(){var w,R;if(!_._deleted&&(_.persistenceManager=yield _n.create(_,h),!_._deleted)){if(null!==(w=_._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,x.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,x.A)(function*(){try{const _=yield oo(f,{idToken:h}),w=yield F._fromGetAccountInfoResponse(f,_,h);yield f.directlySetCurrentUser(w)}catch(_){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",_),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,x.A)(function*(){var _;if((0,Z._isFirebaseServerApp)(f.app)){const fe=f.app.settings.authIdToken;return fe?new Promise(Re=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(fe).then(Re,Re))}):f.directlySetCurrentUser(null)}const w=yield f.assertedPersistence.getCurrentUser();let R=w,Y=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const fe=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Re=R?._redirectEventId,tt=yield f.tryRedirectSignIn(h);(!fe||fe===Re)&&tt?.user&&(R=tt.user,Y=!0)}if(!R)return f.directlySetCurrentUser(null);if(!R._redirectEventId){if(Y)try{yield f.beforeStateQueue.runMiddleware(R)}catch(fe){R=w,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(fe))}return R?f.reloadAndSetCurrentUserOrClear(R):f.directlySetCurrentUser(null)}return ie(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===R._redirectEventId?f.directlySetCurrentUser(R):f.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var f=this;return(0,x.A)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,x.A)(function*(){try{yield vs(h)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function An(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var h=this;return(0,x.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,x.A)(function*(){if((0,Z._isFirebaseServerApp)(f.app))return Promise.reject(gt(f));const _=h?(0,D.Ku)(h):null;return _&&ie(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(h,f=!1){var _=this;return(0,x.A)(function*(){if(!_._deleted)return h&&ie(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,x.A)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,x.A)(function*(){return(0,Z._isFirebaseServerApp)(h.app)?Promise.reject(gt(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,Z._isFirebaseServerApp)(this.app)?Promise.reject(gt(this)):this.queue((0,x.A)(function*(){yield f.assertedPersistence.setPersistence(me(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,x.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const _=f._getPasswordPolicyInternal();return _.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,x.A)(function*(){const f=yield function LH(g){return Wn.apply(this,arguments)}(h),_=new BH(f);null===h.tenantId?h._projectPasswordPolicy=_:h._tenantPasswordPolicies[h.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new D.FA("auth","Firebase",h())}onAuthStateChanged(h,f,_){return this.registerStateListener(this.authStateSubscription,h,f,_)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,_){return this.registerStateListener(this.idTokenSubscription,h,f,_)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const _=this.onAuthStateChanged(()=>{_(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,x.A)(function*(){if(f.currentUser){const _=yield f.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:_};null!=f.tenantId&&(w.tenantId=f.tenantId),yield function Ce(g,h){return C.apply(this,arguments)}(f,w)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var _=this;return(0,x.A)(function*(){const w=yield _.getOrInitRedirectPersistenceManager(f);return null===h?w.removeCurrentUser():w.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,x.A)(function*(){if(!f.redirectPersistenceManager){const _=h&&me(h)||f._popupRedirectResolver;ie(_,f,"argument-error"),f.redirectPersistenceManager=yield _n.create(f,[me(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,x.A)(function*(){var _,w;return f._isInitialized&&(yield f.queue((0,x.A)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===h?f._currentUser:(null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,x.A)(function*(){if(h===f.currentUser)return f.queue((0,x.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,_,w){if(this._deleted)return()=>{};const R="function"==typeof f?f:f.next.bind(f);let Y=!1;const fe=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(fe,this,"internal-error"),fe.then(()=>{Y||R(this.currentUser)}),"function"==typeof f){const Re=h.addObserver(f,_,w);return()=>{Y=!0,Re()}}{const Re=h.addObserver(f);return()=>{Y=!0,Re()}}}directlySetCurrentUser(h){var f=this;return(0,x.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Rp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,x.A)(function*(){var f;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const w=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();w&&(_["X-Firebase-Client"]=w);const R=yield h._getAppCheckToken();return R&&(_["X-Firebase-AppCheck"]=R),_})()}_getAppCheckToken(){var h=this;return(0,x.A)(function*(){var f;const _=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function Wt(g,...h){Je.logLevel<=he.$b.WARN&&Je.warn(`Auth (${Z.SDK_VERSION}): ${g}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function Cr(g){return(0,D.Ku)(g)}class ti{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,D.tD)(f=>this.observer=f)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let cc={loadJS:()=>(0,x.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hy(g){return cc.loadJS(g)}function bs(g){return`__${g}${Math.floor(1e6*Math.random())}`}class aR{constructor(h){this.type="recaptcha-enterprise",this.auth=Cr(h)}verify(h="verify",f=!1){var _=this;return(0,x.A)(function*(){function R(){return R=(0,x.A)(function*(fe){if(!f){if(null==fe.tenantId&&null!=fe._agentRecaptchaConfig)return fe._agentRecaptchaConfig.siteKey;if(null!=fe.tenantId&&void 0!==fe._tenantRecaptchaConfigs[fe.tenantId])return fe._tenantRecaptchaConfigs[fe.tenantId].siteKey}return new Promise(function(){var Re=(0,x.A)(function*(tt,ut){Nr(fe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tn=>{if(void 0!==tn.recaptchaKey){const xn=new St(tn);return null==fe.tenantId?fe._agentRecaptchaConfig=xn:fe._tenantRecaptchaConfigs[fe.tenantId]=xn,tt(xn.siteKey)}ut(new Error("recaptcha Enterprise site key undefined"))}).catch(tn=>{ut(tn)})});return function(tt,ut){return Re.apply(this,arguments)}}())}),R.apply(this,arguments)}function Y(fe,Re,tt){const ut=window.grecaptcha;en(ut)?ut.enterprise.ready(()=>{ut.enterprise.execute(fe,{action:h}).then(tn=>{Re(tn)}).catch(()=>{Re("NO_RECAPTCHA")})}):tt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((fe,Re)=>{(function w(fe){return R.apply(this,arguments)})(_.auth).then(tt=>{if(!f&&en(window.grecaptcha))Y(tt,fe,Re);else{if(typeof window>"u")return void Re(new Error("RecaptchaVerifier is only supported in browser"));let ut=function At(){return cc.recaptchaEnterpriseScript}();0!==ut.length&&(ut+=tt),hy(ut).then(()=>{Y(tt,fe,Re)}).catch(tn=>{Re(tn)})}}).catch(tt=>{Re(tt)})})})()}}function Va(g,h,f){return Bw.apply(this,arguments)}function Bw(){return(Bw=(0,x.A)(function*(g,h,f,_=!1){const w=new aR(g);let R;try{R=yield w.verify(f)}catch{R=yield w.verify(f,!0)}const Y=Object.assign({},h);return Object.assign(Y,_?{captchaResp:R}:{captchaResponse:R}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}function Pp(g,h,f,_){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,x.A)(function*(g,h,f,_){var w;if(null!==(w=g._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const R=yield Va(g,h,f,"getOobCode"===f);return _(g,R)}return _(g,h).catch(function(){var R=(0,x.A)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const fe=yield Va(g,h,f,"getOobCode"===f);return _(g,fe)}return Promise.reject(Y)});return function(Y){return R.apply(this,arguments)}}())}),Uw.apply(this,arguments)}function cR(g,h,f){const _=Cr(g);ie(_._canInitEmulator,_,"emulator-config-failed"),ie(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const w=!!f?.disableWarnings,R=Es(h),{host:Y,port:fe}=function wt(g){const h=Es(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(h.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(_);if(w){const R=w[1];return{host:R,port:uR(_.substr(R.length+1))}}{const[R,Y]=_.split(":");return{host:R,port:uR(Y)}}}(h);_.config.emulator={url:`${R}//${Y}${null===fe?"":`:${fe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:Y,port:fe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function $H(){function g(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}function Es(g){const h=g.indexOf(":");return h<0?"":g.substr(0,h+1)}function uR(g){if(!g)return null;const h=Number(g);return isNaN(h)?null:h}class sh{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return nt("not implemented")}_getIdTokenResponse(h){return nt("not implemented")}_linkToIdToken(h,f){return nt("not implemented")}_getReauthenticationResolver(h){return nt("not implemented")}}function dR(g,h){return jw.apply(this,arguments)}function jw(){return(jw=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:resetPassword",se(g,h))})).apply(this,arguments)}function zw(){return(zw=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zt(g,h){return yu.apply(this,arguments)}function yu(){return(yu=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function kp(){return(kp=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:update",se(g,h))})).apply(this,arguments)}function fR(g,h){return vu.apply(this,arguments)}function vu(){return(vu=(0,x.A)(function*(g,h){return Mt(g,"POST","/v1/accounts:signInWithPassword",se(g,h))})).apply(this,arguments)}function uc(g,h){return oh.apply(this,arguments)}function oh(){return(oh=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:sendOobCode",se(g,h))})).apply(this,arguments)}function py(){return(py=(0,x.A)(function*(g,h){return uc(g,h)})).apply(this,arguments)}function ye(g,h){return ah.apply(this,arguments)}function ah(){return(ah=(0,x.A)(function*(g,h){return uc(g,h)})).apply(this,arguments)}function my(g,h){return Np.apply(this,arguments)}function Np(){return(Np=(0,x.A)(function*(g,h){return uc(g,h)})).apply(this,arguments)}function _y(){return(_y=(0,x.A)(function*(g,h){return uc(g,h)})).apply(this,arguments)}function $w(){return($w=(0,x.A)(function*(g,h){return Mt(g,"POST","/v1/accounts:signInWithEmailLink",se(g,h))})).apply(this,arguments)}function Ww(){return(Ww=(0,x.A)(function*(g,h){return Mt(g,"POST","/v1/accounts:signInWithEmailLink",se(g,h))})).apply(this,arguments)}class Op extends sh{constructor(h,f,_,w=null){super("password",_),this._email=h,this._password=f,this._tenantId=w}static _fromEmailAndPassword(h,f){return new Op(h,f,"password")}static _fromEmailAndCode(h,f,_=null){return new Op(h,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,x.A)(function*(){switch(f.signInMethod){case"password":return Pp(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fR);case"emailLink":return function yy(g,h){return $w.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Ct(h,"internal-error")}})()}_linkToIdToken(h,f){var _=this;return(0,x.A)(function*(){switch(_.signInMethod){case"password":return Pp(h,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zt);case"emailLink":return function WH(g,h){return Ww.apply(this,arguments)}(h,{idToken:f,email:_._email,oobCode:_._password});default:Ct(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function No(g,h){return dc.apply(this,arguments)}function dc(){return(dc=(0,x.A)(function*(g,h){return Mt(g,"POST","/v1/accounts:signInWithIdp",se(g,h))})).apply(this,arguments)}class co extends sh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new co(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Ct("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:w}=f,R=(0,ce.Tt)(f,["providerId","signInMethod"]);if(!_||!w)return null;const Y=new co(_,w);return Y.idToken=R.idToken||void 0,Y.accessToken=R.accessToken||void 0,Y.secret=R.secret,Y.nonce=R.nonce,Y.pendingToken=R.pendingToken||null,Y}_getIdTokenResponse(h){return No(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,No(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,No(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,D.Am)(f)}return h}}function Oo(){return(Oo=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:sendVerificationCode",se(g,h))})).apply(this,arguments)}function Fp(){return(Fp=(0,x.A)(function*(g,h){return Mt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,h))})).apply(this,arguments)}function yn(){return(yn=(0,x.A)(function*(g,h){const f=yield Mt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,h));if(f.temporaryProof)throw Zr(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const GH={USER_NOT_FOUND:"user-not-found"};function by(){return(by=(0,x.A)(function*(g,h){return Mt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,Object.assign(Object.assign({},h),{operation:"REAUTH"})),GH)})).apply(this,arguments)}class bu extends sh{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new bu({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new bu({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function lh(g,h){return Fp.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function kt(g,h){return yn.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function pR(g,h){return by.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:_,verificationCode:w}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:_,code:w}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}=h;return _||f||w||R?new bu({verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}):null}}class Bt{constructor(h){var f,_,w,R,Y,fe;const Re=(0,D.I9)((0,D.hp)(h)),tt=null!==(f=Re.apiKey)&&void 0!==f?f:null,ut=null!==(_=Re.oobCode)&&void 0!==_?_:null,tn=function mR(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=Re.mode)&&void 0!==w?w:null);ie(tt&&ut&&tn,"argument-error"),this.apiKey=tt,this.operation=tn,this.code=ut,this.continueUrl=null!==(R=Re.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(Y=Re.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(fe=Re.tenantId)&&void 0!==fe?fe:null}static parseLink(h){const f=function Ey(g){const h=(0,D.I9)((0,D.hp)(g)).link,f=h?(0,D.I9)((0,D.hp)(h)).deep_link_id:null,_=(0,D.I9)((0,D.hp)(g)).deep_link_id;return(_?(0,D.I9)((0,D.hp)(_)).link:null)||_||f||h||g}(h);try{return new Bt(f)}catch{return null}}}let Lp=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return Op._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const w=Bt.parseLink(_);return ie(w,"argument-error"),Op._fromEmailAndCode(f,w.code,w.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Or{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class hc extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Vp extends hc{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return ie("providerId"in f&&"signInMethod"in f,"argument-error"),co._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ie(h.idToken||h.accessToken,"argument-error"),co._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Vp.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Vp.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:w,pendingToken:R,nonce:Y,providerId:fe}=h;if(!_&&!w&&!f&&!R||!fe)return null;try{return new Vp(fe)._credential({idToken:f,accessToken:_,nonce:Y,pendingToken:R})}catch{return null}}}let qH=(()=>{class g extends hc{constructor(){super("facebook.com")}static credential(f){return co._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),ch=(()=>{class g extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return co._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:w}=f;if(!_&&!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Iy=(()=>{class g extends hc{constructor(){super("github.com")}static credential(f){return co._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Eu extends sh{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return No(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,No(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,No(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:w,pendingToken:R}=f;return _&&w&&R&&_===w?new Eu(_,R):null}static _create(h,f){return new Eu(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Up extends Or{constructor(h){ie(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Up.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Up.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Eu.fromJSON(h);return ie(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:_}=h;if(!f||!_)return null;try{return Eu._create(_,f)}catch{return null}}}let Kw=(()=>{class g extends hc{constructor(){super("twitter.com")}static credential(f,_){return co._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:w}=f;if(!_||!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function fc(g,h){return wy.apply(this,arguments)}function wy(){return(wy=(0,x.A)(function*(g,h){return Mt(g,"POST","/v1/accounts:signUp",se(g,h))})).apply(this,arguments)}class di{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,_,w=!1){return(0,x.A)(function*(){const R=yield F._fromIdTokenResponse(h,_,w),Y=Qw(_);return new di({user:R,providerId:Y,_tokenResponse:_,operationType:f})})()}static _forOperation(h,f,_){return(0,x.A)(function*(){yield h._updateTokensIfNecessary(_,!0);const w=Qw(_);return new di({user:h,providerId:w,_tokenResponse:_,operationType:f})})()}}function Qw(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Se(g){return jp.apply(this,arguments)}function jp(){return(jp=(0,x.A)(function*(g){var h;if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const f=Cr(g);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new di({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield fc(f,{returnSecureToken:!0}),w=yield di._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(w.user),w})).apply(this,arguments)}class k extends D.g{constructor(h,f,_,w){var R;super(f.code,f.message),this.operationType=_,this.user=w,Object.setPrototypeOf(this,k.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,f,_,w){return new k(h,f,_,w)}}function uh(g,h,f,_){return("reauthenticate"===h?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?k._fromErrorAndOperation(g,R,h,_):R})}function zp(g){return new Set(g.map(({providerId:h})=>h).filter(h=>!!h))}function dh(g,h){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g);yield Hp(!0,f,h);const{providerUserInfo:_}=yield function gs(g,h){return Bs.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),w=zp(_||[]);return f.providerData=f.providerData.filter(R=>w.has(R.providerId)),w.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Cy.apply(this,arguments)}function Ty(g,h){return Ay.apply(this,arguments)}function Ay(){return(Ay=(0,x.A)(function*(g,h,f=!1){const _=yield Nn(g,h._linkToIdToken(g.auth,yield g.getIdToken()),f);return di._forOperation(g,"link",_)})).apply(this,arguments)}function Hp(g,h,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,x.A)(function*(g,h,f){yield vs(h);const w=!1===g?"provider-already-linked":"no-such-provider";ie(zp(h.providerData).has(f)===g,h.auth,w)})).apply(this,arguments)}function Yw(g,h){return pc.apply(this,arguments)}function pc(){return(pc=(0,x.A)(function*(g,h,f=!1){const{auth:_}=g;if((0,Z._isFirebaseServerApp)(_.app))return Promise.reject(gt(_));const w="reauthenticate";try{const R=yield Nn(g,uh(_,w,h,g),f);ie(R.idToken,_,"internal-error");const Y=ko(R.idToken);ie(Y,_,"internal-error");const{sub:fe}=Y;return ie(g.uid===fe,_,"user-mismatch"),di._forOperation(g,w,R)}catch(R){throw"auth/user-not-found"===R?.code&&Ct(_,"user-mismatch"),R}})).apply(this,arguments)}function Xw(g,h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,x.A)(function*(g,h,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _="signIn",w=yield uh(g,_,h),R=yield di._fromIdTokenResponse(g,_,w);return f||(yield g._updateCurrentUser(R.user)),R})).apply(this,arguments)}function $p(g,h){return $i.apply(this,arguments)}function $i(){return($i=(0,x.A)(function*(g,h){return Xw(Cr(g),h)})).apply(this,arguments)}function mc(g,h){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g);return yield Hp(!1,f,h.providerId),Ty(f,h)})).apply(this,arguments)}function hh(g,h){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,x.A)(function*(g,h){return Yw((0,D.Ku)(g),h)})).apply(this,arguments)}function Zw(){return(Zw=(0,x.A)(function*(g,h){return Mt(g,"POST","/v1/accounts:signInWithCustomToken",se(g,h))})).apply(this,arguments)}function Jw(g,h){return e0.apply(this,arguments)}function e0(){return e0=(0,x.A)(function*(g,h){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const f=Cr(g),_=yield function Sy(g,h){return Zw.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),w=yield di._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(w.user),w}),e0.apply(this,arguments)}class Pi{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?fh._fromServerResponse(h,f):"totpInfo"in f?vl._fromServerResponse(h,f):Ct(h,"internal-error")}}class fh extends Pi{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new fh(f)}}class vl extends Pi{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new vl(f)}}function Dy(g,h,f){var _;ie((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),ie(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ie(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(ie(f.android.packageName.length>0,g,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Gp(g){return uo.apply(this,arguments)}function uo(){return(uo=(0,x.A)(function*(g){const h=Cr(g);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function vn(g,h,f){return ho.apply(this,arguments)}function ho(){return(ho=(0,x.A)(function*(g,h,f){const _=Cr(g),w={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&Dy(_,w,f),yield Pp(_,w,"getOobCode",ye)})).apply(this,arguments)}function t0(g,h,f){return ph.apply(this,arguments)}function ph(){return ph=(0,x.A)(function*(g,h,f){yield dR((0,D.Ku)(g),{oobCode:h,newPassword:f}).catch(function(){var _=(0,x.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Gp(g),w});return function(w){return _.apply(this,arguments)}}())}),ph.apply(this,arguments)}function qp(g,h){return wu.apply(this,arguments)}function wu(){return wu=(0,x.A)(function*(g,h){yield function hR(g,h){return kp.apply(this,arguments)}((0,D.Ku)(g),{oobCode:h})}),wu.apply(this,arguments)}function fo(g,h){return da.apply(this,arguments)}function da(){return(da=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g),_=yield dR(f,{oobCode:h}),w=_.requestType;switch(ie(w,f,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(_.mfaInfo,f,"internal-error");default:ie(_.email,f,"internal-error")}let R=null;return _.mfaInfo&&(R=Pi._fromServerResponse(Cr(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:w}})).apply(this,arguments)}function _R(g,h){return mh.apply(this,arguments)}function mh(){return(mh=(0,x.A)(function*(g,h){const{data:f}=yield fo((0,D.Ku)(g),h);return f.email})).apply(this,arguments)}function n0(g,h,f){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=Cr(g),Y=yield Pp(_,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fc).catch(Re=>{throw"auth/password-does-not-meet-requirements"===Re.code&&Gp(g),Re}),fe=yield di._fromIdTokenResponse(_,"signIn",Y);return yield _._updateCurrentUser(fe.user),fe})).apply(this,arguments)}function gh(g,h,f){return(0,Z._isFirebaseServerApp)(g.app)?Promise.reject(gt(g)):$p((0,D.Ku)(g),Lp.credential(h,f)).catch(function(){var _=(0,x.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Gp(g),w});return function(w){return _.apply(this,arguments)}}())}function r0(g,h,f){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,x.A)(function*(g,h,f){const _=Cr(g),w={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function R(Y,fe){ie(fe.handleCodeInApp,_,"argument-error"),fe&&Dy(_,Y,fe)})(w,f),yield Pp(_,w,"getOobCode",my)})).apply(this,arguments)}function yR(g,h){const f=Bt.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}function xy(g,h,f){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=(0,D.Ku)(g),w=Lp.credentialWithLink(h,f||jt());return ie(w._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),$p(_,w)})).apply(this,arguments)}function Hs(){return(Hs=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:createAuthUri",se(g,h))})).apply(this,arguments)}function bR(g,h){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,x.A)(function*(g,h){const _={identifier:h,continueUri:Cn()?jt():"http://localhost"},{signinMethods:w}=yield function vR(g,h){return Hs.apply(this,arguments)}((0,D.Ku)(g),_);return w||[]}),Yp.apply(this,arguments)}function ER(g,h){return My.apply(this,arguments)}function My(){return My=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g),w={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};h&&Dy(f.auth,w,h);const{email:R}=yield function Hw(g,h){return py.apply(this,arguments)}(f.auth,w);R!==g.email&&(yield g.reload())}),My.apply(this,arguments)}function IR(g,h,f){return Py.apply(this,arguments)}function Py(){return Py=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:h};f&&Dy(_.auth,R,f);const{email:Y}=yield function gy(g,h){return _y.apply(this,arguments)}(_.auth,R);Y!==g.email&&(yield g.reload())}),Py.apply(this,arguments)}function ky(){return(ky=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wR(g,h){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,x.A)(function*(g,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const _=(0,D.Ku)(g),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},Y=yield Nn(_,function s0(g,h){return ky.apply(this,arguments)}(_.auth,R));_.displayName=Y.displayName||null,_.photoURL=Y.photoUrl||null;const fe=_.providerData.find(({providerId:Re})=>"password"===Re);fe&&(fe.displayName=_.displayName,fe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(Y)}),Ny.apply(this,arguments)}function qn(g,h){const f=(0,D.Ku)(g);return(0,Z._isFirebaseServerApp)(f.auth.app)?Promise.reject(gt(f.auth)):o0(f,h,null)}function CR(g,h){return o0((0,D.Ku)(g),null,h)}function o0(g,h,f){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,x.A)(function*(g,h,f){const{auth:_}=g,R={idToken:yield g.getIdToken(),returnSecureToken:!0};h&&(R.email=h),f&&(R.password=f);const Y=yield Nn(g,function Ne(g,h){return zw.apply(this,arguments)}(_,R));yield g._updateTokensIfNecessary(Y,!0)}),Ut.apply(this,arguments)}class Xe{constructor(h,f,_={}){this.isNewUser=h,this.providerId=f,this.profile=_}}class ki extends Xe{constructor(h,f,_,w){super(h,f,_),this.username=w}}class Qt extends Xe{constructor(h,f){super(h,"facebook.com",f)}}class hi extends ki{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Ni extends Xe{constructor(h,f){super(h,"google.com",f)}}class bl extends ki{constructor(h,f,_){super(h,"twitter.com",f,_)}}function Wi(g){const{user:h,_tokenResponse:f}=g;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function a0(g){var h,f;if(!g)return null;const{providerId:_}=g,w=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},R=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const Y=null===(f=null===(h=ko(g.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(Y)return new Xe(R,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!_)return null;switch(_){case"facebook.com":return new Qt(R,w);case"github.com":return new hi(R,w);case"google.com":return new Ni(R,w);case"twitter.com":return new bl(R,w,g.screenName||null);case"custom":case"anonymous":return new Xe(R,null);default:return new Xe(R,_,w)}}(f)}function DR(g,h,f,_){return(0,D.Ku)(g).onAuthStateChanged(h,f,_)}class Ua{constructor(h,f,_){this.type=h,this.credential=f,this.user=_}static _fromIdtoken(h,f){return new Ua("enroll",h,f)}static _fromMfaPendingCredential(h){return new Ua("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,_;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Ua._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Ua._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Xp{constructor(h,f,_){this.session=h,this.hints=f,this.signInResolver=_}static _fromError(h,f){const _=Cr(h),w=f.customData._serverResponse,R=(w.mfaInfo||[]).map(fe=>Pi._fromServerResponse(_,fe));ie(w.mfaPendingCredential,_,"internal-error");const Y=Ua._fromMfaPendingCredential(w.mfaPendingCredential);return new Xp(Y,R,function(){var fe=(0,x.A)(function*(Re){const tt=yield Re._process(_,Y);delete w.mfaInfo,delete w.mfaPendingCredential;const ut=Object.assign(Object.assign({},w),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(f.operationType){case"signIn":const tn=yield di._fromIdTokenResponse(_,f.operationType,ut);return yield _._updateCurrentUser(tn.user),tn;case"reauthenticate":return ie(f.user,_,"internal-error"),di._forOperation(f.user,f.operationType,ut);default:Ct(_,"internal-error")}});return function(Re){return fe.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,x.A)(function*(){return f.signInResolver(h)})()}}function u0(g,h){var f;const _=(0,D.Ku)(g),w=h;return ie(h.customData.operationType,_,"argument-error"),ie(null===(f=w.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),Xp._fromError(_,w)}class _h{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>Pi._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new _h(h)}getSession(){var h=this;return(0,x.A)(function*(){return Ua._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var _=this;return(0,x.A)(function*(){const w=h,R=yield _.getSession(),Y=yield Nn(_.user,w._process(_.user.auth,R,f));return yield _.user._updateTokensIfNecessary(Y),_.user.reload()})()}unenroll(h){var f=this;return(0,x.A)(function*(){const _="string"==typeof h?h:h.uid,w=yield f.user.getIdToken();try{const R=yield Nn(f.user,function MR(g,h){return ae(g,"POST","/v2/accounts/mfaEnrollment:withdraw",se(g,h))}(f.user.auth,{idToken:w,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Y})=>Y!==_),yield f.user._updateTokensIfNecessary(R),yield f.user.reload()}catch(R){throw R}})()}}const Cu=new WeakMap;function Oi(g){const h=(0,D.Ku)(g);return Cu.has(h)||Cu.set(h,_h._fromUser(h)),Cu.get(h)}const ja="__sak";class Jp{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ja,"1"),this.storage.removeItem(ja),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const _c=(()=>{class g extends Jp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dy(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const w=this.storage.getItem(_),R=this.localCache[_];w!==R&&f(_,R,w)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((fe,Re,tt)=>{this.notifyListeners(fe,tt)});const w=f.key;_?this.detachListener():this.stopPolling();const R=()=>{const fe=this.storage.getItem(w);!_&&this.localCache[w]===fe||this.notifyListeners(w,fe)},Y=this.storage.getItem(w);!function gu(){return(0,D.lT)()&&10===document.documentMode}()||Y===f.newValue||f.newValue===f.oldValue?R():setTimeout(R,10)}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var w=()=>super._set,R=this;return(0,x.A)(function*(){yield w().call(R,f,_),R.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,w=this;return(0,x.A)(function*(){const R=yield _().call(w,f);return w.localCache[f]=JSON.stringify(R),R})()}_remove(f){var _=()=>super._remove,w=this;return(0,x.A)(function*(){yield _().call(w,f),delete w.localCache[f]})()}}return g.type="LOCAL",g})(),By=(()=>{class g extends Jp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let Uy=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(R=>R.isListeningto(f));if(_)return _;const w=new g(f);return this.receivers.push(w),w}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,x.A)(function*(){const w=f,{eventId:R,eventType:Y,data:fe}=w.data,Re=_.handlersMap[Y];if(!Re?.size)return;w.ports[0].postMessage({status:"ack",eventId:R,eventType:Y});const tt=Array.from(Re).map(function(){var tn=(0,x.A)(function*(xn){return xn(w.origin,fe)});return function(xn){return tn.apply(this,arguments)}}()),ut=yield function OR(g){return Promise.all(g.map(function(){var h=(0,x.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return h.apply(this,arguments)}}()))}(tt);w.ports[0].postMessage({status:"done",eventId:R,eventType:Y,response:ut})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Is(g="",h=10){let f="";for(let _=0;_<h;_++)f+=Math.floor(10*Math.random());return g+f}class h0{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,_=50){var w=this;return(0,x.A)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let Y,fe;return new Promise((Re,tt)=>{const ut=Is("",20);R.port1.start();const tn=setTimeout(()=>{tt(new Error("unsupported_event"))},_);fe={messageChannel:R,onMessage(xn){const Ts=xn;if(Ts.data.eventId===ut)switch(Ts.data.status){case"ack":clearTimeout(tn),Y=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Re(Ts.data.response);break;default:clearTimeout(tn),clearTimeout(Y),tt(new Error("invalid_response"))}}},w.handlers.add(fe),R.port1.addEventListener("message",fe.onMessage),w.target.postMessage({eventType:h,eventId:ut,data:f},[R.port2])}).finally(()=>{fe&&w.removeMessageHandler(fe)})})()}}function Fr(){return window}function jy(){return typeof Fr().WorkerGlobalScope<"u"&&"function"==typeof Fr().importScripts}function Wr(){return(Wr=(0,x.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Au="firebaseLocalStorageDb",em="firebaseLocalStorage",p0="fbase_key";class yh{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function tm(g,h){return g.transaction([em],h?"readwrite":"readonly").objectStore(em)}function vh(){const g=indexedDB.open(Au,1);return new Promise((h,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(em,{keyPath:p0})}catch(w){f(w)}}),g.addEventListener("success",(0,x.A)(function*(){const _=g.result;_.objectStoreNames.contains(em)?h(_):(_.close(),yield function BR(){const g=indexedDB.deleteDatabase(Au);return new yh(g).toPromise()}(),h(yield vh()))}))})}function bh(g,h,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,x.A)(function*(g,h,f){const _=tm(g,!0).put({[p0]:h,value:f});return new yh(_).toPromise()})).apply(this,arguments)}function dt(){return(dt=(0,x.A)(function*(g,h){const f=tm(g,!1).get(h),_=yield new yh(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Gr(g,h){const f=tm(g,!0).delete(h);return new yh(f).toPromise()}const yc=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,x.A)(function*(){return f.db||(f.db=yield vh()),f.db})()}_withRetries(f){var _=this;return(0,x.A)(function*(){let w=0;for(;;)try{const R=yield _._openDb();return yield f(R)}catch(R){if(w++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,x.A)(function*(){return jy()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,x.A)(function*(){f.receiver=Uy._getInstance(function LR(){return jy()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,x.A)(function*(w,R){return{keyProcessed:(yield f._poll()).includes(R.key)}});return function(w,R){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,x.A)(function*(w,R){return["keyChanged"]});return function(w,R){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,x.A)(function*(){var _,w;if(f.activeServiceWorker=yield function FR(){return Wr.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new h0(f.activeServiceWorker);const R=yield f.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(w=R[0])&&void 0!==w&&w.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,x.A)(function*(){if(_.sender&&_.activeServiceWorker&&function f0(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,x.A)(function*(){try{if(!indexedDB)return!1;const f=yield vh();return yield bh(f,ja,"1"),yield Gr(f,ja),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,x.A)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var w=this;return(0,x.A)(function*(){return w._withPendingWrite((0,x.A)(function*(){return yield w._withRetries(R=>bh(R,f,_)),w.localCache[f]=_,w.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,x.A)(function*(){const w=yield _._withRetries(R=>function Ue(g,h){return dt.apply(this,arguments)}(R,f));return _.localCache[f]=w,w})()}_remove(f){var _=this;return(0,x.A)(function*(){return _._withPendingWrite((0,x.A)(function*(){return yield _._withRetries(w=>Gr(w,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,x.A)(function*(){const _=yield f._withRetries(Y=>{const fe=tm(Y,!1).getAll();return new yh(fe).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const w=[],R=new Set;if(0!==_.length)for(const{fbase_key:Y,value:fe}of _)R.add(Y),JSON.stringify(f.localCache[Y])!==JSON.stringify(fe)&&(f.notifyListeners(Y,fe),w.push(Y));for(const Y of Object.keys(f.localCache))f.localCache[Y]&&!R.has(Y)&&(f.notifyListeners(Y,null),w.push(Y));return w})()}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,x.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),Ih=1e12;class Su{constructor(h){this.auth=h,this.counter=Ih,this._widgets=new Map}render(h,f){const _=this.counter;return this._widgets.set(_,new hr(h,this.auth.name,f||{})),this.counter++,_}reset(h){var f;const _=h||Ih;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Ih))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,x.A)(function*(){var _;return null===(_=f._widgets.get(h||Ih))||void 0===_||_.execute(),""})()}}class hr{constructor(h,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof h?document.getElementById(h):h;ie(w,"argument-error",{appName:f}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vc(g){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Il=bs("rcb"),za=new nr(3e4,6e4);class Du{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Fr().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return ie(function m0(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Jt(Fr().grecaptcha)?Promise.resolve(Fr().grecaptcha):new Promise((_,w)=>{const R=Fr().setTimeout(()=>{w(Tt(h,"network-request-failed"))},za.get());Fr()[Il]=()=>{Fr().clearTimeout(R),delete Fr()[Il];const fe=Fr().grecaptcha;if(!fe||!Jt(fe))return void w(Tt(h,"internal-error"));const Re=fe.render;fe.render=(tt,ut)=>{const tn=Re(tt,ut);return this.counter++,tn},this.hostLanguage=f,_(fe)},hy(`${function Gn(){return cc.recaptchaV2Script}()}?${(0,D.Am)({onload:Il,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(R),w(Tt(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=Fr().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wl{load(h){return(0,x.A)(function*(){return new Su(h)})()}clearedOneInstance(){}}const wh="recaptcha",po={theme:"light",type:"image"};class ct{constructor(h,f,_=Object.assign({},po)){this.parameters=_,this.type=wh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cr(h),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof f?document.getElementById(f):f;ie(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wl:new Du,this.validateStartingState()}verify(){var h=this;return(0,x.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(f)||new Promise(R=>{const Y=fe=>{fe&&(h.tokenChangeListeners.delete(Y),R(fe))};h.tokenChangeListeners.add(Y),h.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof h)h(f);else if("string"==typeof h){const _=Fr()[h];"function"==typeof _&&_(f)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,x.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,x.A)(function*(){ie(Cn()&&!jy(),h.auth,"internal-error"),yield function zy(){let g=null;return new Promise(h=>{"complete"!==document.readyState?(g=()=>h(),window.addEventListener("load",g)):h()}).catch(h=>{throw g&&window.removeEventListener("load",g),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function Jr(g){return wi.apply(this,arguments)}(h.auth);ie(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bc{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=bu._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function fa(g,h,f){return xu.apply(this,arguments)}function xu(){return(xu=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=Cr(g),w=yield fi(_,h,(0,D.Ku)(f));return new bc(w,R=>$p(_,R))})).apply(this,arguments)}function Ru(g,h,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);yield Hp(!1,_,"phone");const w=yield fi(_.auth,h,(0,D.Ku)(f));return new bc(w,R=>mc(_,R))})).apply(this,arguments)}function nm(g,h,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(gt(_.auth));const w=yield fi(_.auth,h,(0,D.Ku)(f));return new bc(w,R=>hh(_,R))})).apply(this,arguments)}function fi(g,h,f){return Ch.apply(this,arguments)}function Ch(){return Ch=(0,x.A)(function*(g,h,f){var _;const w=yield f.verify();try{let R;if(ie("string"==typeof w,g,"argument-error"),ie(f.type===wh,g,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const Y=R.session;if("phoneNumber"in R)return ie("enroll"===Y.type,g,"internal-error"),(yield function gc(g,h){return ae(g,"POST","/v2/accounts/mfaEnrollment:start",se(g,h))}(g,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{ie("signin"===Y.type,g,"internal-error");const fe=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return ie(fe,g,"missing-multi-factor-info"),(yield function Xn(g,h){return ae(g,"POST","/v2/accounts/mfaSignIn:start",se(g,h))}(g,{mfaPendingCredential:Y.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Gw(g,h){return Oo.apply(this,arguments)}(g,{phoneNumber:R.phoneNumber,recaptchaToken:w});return Y}}finally{f._reset()}}),Ch.apply(this,arguments)}function Ec(g,h){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g);if((0,Z._isFirebaseServerApp)(f.auth.app))return Promise.reject(gt(f.auth));yield Ty(f,h)})).apply(this,arguments)}let Lo=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=Cr(f)}verifyPhoneNumber(f,_){return fi(this.auth,f,(0,D.Ku)(_))}static credential(f,_){return bu._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:w}=f;return _&&w?bu._fromTokenResponse(_,w):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Vo(g,h){return h?me(h):(ie(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class rm extends sh{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return No(h,this._buildIdpRequest())}_linkToIdToken(h,f){return No(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return No(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function UR(g){return Xw(g.auth,new rm(g),g.bypassAuthState)}function Hy(g){const{auth:h,user:f}=g;return ie(f,h,"internal-error"),Yw(f,new rm(g),g.bypassAuthState)}function g0(g){return $y.apply(this,arguments)}function $y(){return($y=(0,x.A)(function*(g){const{auth:h,user:f}=g;return ie(f,h,"internal-error"),Ty(f,new rm(g),g.bypassAuthState)})).apply(this,arguments)}class im{constructor(h,f,_,w,R=!1){this.auth=h,this.resolver=_,this.user=w,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,x.A)(function*(_,w){h.pendingPromise={resolve:_,reject:w};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,w){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,x.A)(function*(){const{urlResponse:_,sessionId:w,postBody:R,tenantId:Y,error:fe,type:Re}=h;if(fe)return void f.reject(fe);const tt={auth:f.auth,requestUri:_,sessionId:w,tenantId:Y||void 0,postBody:R||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Re)(tt))}catch(ut){f.reject(ut)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return UR;case"linkViaPopup":case"linkViaRedirect":return g0;case"reauthViaPopup":case"reauthViaRedirect":return Hy;default:Ct(this.auth,"internal-error")}}resolve(h){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QH=new nr(2e3,1e4);function YH(g,h,f){return _0.apply(this,arguments)}function _0(){return(_0=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(Tt(g,"operation-not-supported-in-this-environment"));const _=Cr(g);Et(g,h,Or);const w=Vo(_,f);return new b0(_,"signInViaPopup",h,w).executeNotNull()})).apply(this,arguments)}function XH(g,h,f){return y0.apply(this,arguments)}function y0(){return(y0=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(Tt(_.auth,"operation-not-supported-in-this-environment"));Et(_.auth,h,Or);const w=Vo(_.auth,f);return new b0(_.auth,"reauthViaPopup",h,w,_).executeNotNull()})).apply(this,arguments)}function ZH(g,h,f){return v0.apply(this,arguments)}function v0(){return(v0=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);Et(_.auth,h,Or);const w=Vo(_.auth,f);return new b0(_.auth,"linkViaPopup",h,w,_).executeNotNull()})).apply(this,arguments)}let b0=(()=>{class g extends im{constructor(f,_,w,R,Y){super(f,_,R,Y),this.provider=w,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,x.A)(function*(){const _=yield f.execute();return ie(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,x.A)(function*(){vt(1===f.filter.length,"Popup operations only handle one event");const _=Is();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(w=>{f.reject(w)}),f.resolver._isIframeWebStorageSupported(f.auth,w=>{w||f.reject(Tt(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,w;this.pollId=null!==(w=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Tt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,QH.get())};f()}}return g.currentPopupAction=null,g})();const JH="pendingRedirect",sm=new Map;class e4 extends im{constructor(h,f,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,x.A)(function*(){let _=sm.get(f.auth._key());if(!_){try{const R=(yield function t4(g,h){return om.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;_=()=>Promise.resolve(R)}catch(w){_=()=>Promise.reject(w)}sm.set(f.auth._key(),_)}return f.bypassAuthState||sm.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,_=this;return(0,x.A)(function*(){if("signInViaRedirect"===h.type)return f().call(_,h);if("unknown"!==h.type){if(h.eventId){const w=yield _.auth._redirectUserForId(h.eventId);if(w)return _.user=w,f().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,x.A)(function*(){})()}cleanUp(){}}function om(){return(om=(0,x.A)(function*(g,h){const f=I0(h),_=zR(g);if(!(yield _._isAvailable()))return!1;const w="true"===(yield _._get(f));return yield _._remove(f),w})).apply(this,arguments)}function am(g,h){return E0.apply(this,arguments)}function E0(){return(E0=(0,x.A)(function*(g,h){return zR(g)._set(I0(h),"true")})).apply(this,arguments)}function n4(){sm.clear()}function jR(g,h){sm.set(g._key(),h)}function zR(g){return me(g._redirectPersistence)}function I0(g){return Ve(JH,g.config.apiKey,g.name)}function w0(g,h,f){return function as(g,h,f){return lm.apply(this,arguments)}(g,h,f)}function lm(){return(lm=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=Cr(g);Et(g,h,Or),yield _._initializationPromise;const w=Vo(_,f);return yield am(w,_),w._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function HR(g,h,f){return function $R(g,h,f){return cm.apply(this,arguments)}(g,h,f)}function cm(){return(cm=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);if(Et(_.auth,h,Or),(0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(gt(_.auth));yield _.auth._initializationPromise;const w=Vo(_.auth,f);yield am(w,_.auth);const R=yield fn(_);return w._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function C0(g,h,f){return function WR(g,h,f){return Th.apply(this,arguments)}(g,h,f)}function Th(){return(Th=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);Et(_.auth,h,Or),yield _.auth._initializationPromise;const w=Vo(_.auth,f);yield Hp(!1,_,h.providerId),yield am(w,_.auth);const R=yield fn(_);return w._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function GR(g,h){return mo.apply(this,arguments)}function mo(){return(mo=(0,x.A)(function*(g,h){return yield Cr(g)._initializationPromise,um(g,h,!1)})).apply(this,arguments)}function um(g,h){return dm.apply(this,arguments)}function dm(){return(dm=(0,x.A)(function*(g,h,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=Cr(g),w=Vo(_,h),Y=yield new e4(_,w,f).execute();return Y&&!f&&(delete Y.user._redirectEventId,yield _._persistUserIfCurrent(Y.user),yield _._setRedirectUser(null,h)),Y})).apply(this,arguments)}function fn(g){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,x.A)(function*(g){const h=Is(`${g.uid}:::`);return g._redirectEventId=h,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),h})).apply(this,arguments)}class Gi{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(f=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ic(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pu(g);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var _;if(h.error&&!Pu(h)){const w=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(Tt(this.auth,w))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const _=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(T0(h))}saveEventToCache(h){this.cachedEventUids.add(T0(h)),this.lastProcessedEventTime=Date.now()}}function T0(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(h=>h).join("-")}function Pu({type:g,error:h}){return"unknown"===g&&"auth/no-auth-event"===h?.code}function Cs(g){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,x.A)(function*(g,h={}){return ae(g,"GET","/v1/projects",h)})).apply(this,arguments)}const Gy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qR=/^https?/;function hm(){return(hm=(0,x.A)(function*(g){if(g.config.emulator)return;const{authorizedDomains:h}=yield Cs(g);for(const f of h)try{if(A0(f))return}catch{}Ct(g,"unauthorized-domain")})).apply(this,arguments)}function A0(g){const h=jt(),{protocol:f,hostname:_}=new URL(h);if(g.startsWith("chrome-extension://")){const Y=new URL(g);return""===Y.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&Y.hostname===_}if(!qR.test(f))return!1;if(Gy.test(g))return _===g;const w=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(_)}const S0=new nr(3e4,6e4);function Dh(){const g=Fr().___jsl;if(g?.H)for(const h of Object.keys(g.H))if(g.H[h].r=g.H[h].r||[],g.H[h].L=g.H[h].L||[],g.H[h].r=[...g.H[h].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let wc=null;const Ky=new nr(5e3,15e3),Ha="__/auth/iframe",xt="emulator/auth/iframe",pm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D0(g){const h=g.config;ie(h.authDomain,g,"auth-domain-config-required");const f=h.emulator?dr(h,xt):`https://${g.config.authDomain}/${Ha}`,_={apiKey:h.apiKey,appName:g.name,v:Z.SDK_VERSION},w=Qy.get(g.config.apiHost);w&&(_.eid=w);const R=g._getFrameworks();return R.length&&(_.fw=R.join(",")),`${f}?${(0,D.Am)(_).slice(1)}`}function Yy(){return Yy=(0,x.A)(function*(g){const h=yield function fm(g){return wc=wc||function qy(g){return new Promise((h,f)=>{var _,w,R;function Y(){Dh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Dh(),f(Tt(g,"network-request-failed"))},timeout:S0.get()})}if(null!==(w=null===(_=Fr().gapi)||void 0===_?void 0:_.iframes)&&void 0!==w&&w.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Fr().gapi)||void 0===R||!R.load){const fe=bs("iframefcb");return Fr()[fe]=()=>{gapi.load?Y():f(Tt(g,"network-request-failed"))},hy(`${function Mp(){return cc.gapiScript}()}?onload=${fe}`).catch(Re=>f(Re))}Y()}}).catch(h=>{throw wc=null,h})}(g),wc}(g),f=Fr().gapi;return ie(f,g,"internal-error"),h.open({where:document.body,url:D0(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pm,dontclear:!0},_=>new Promise(function(){var w=(0,x.A)(function*(R,Y){yield _.restyle({setHideOnLeave:!1});const fe=Tt(g,"network-request-failed"),Re=Fr().setTimeout(()=>{Y(fe)},Ky.get());function tt(){Fr().clearTimeout(Re),R(_)}_.ping(tt).then(tt,()=>{Y(fe)})});return function(R,Y){return w.apply(this,arguments)}}()))}),Yy.apply(this,arguments)}const KR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class R0{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const JR="__/auth/handler",Ie="emulator/auth/handler",Gt=encodeURIComponent("fac");function fr(g,h,f,_,w,R){return pr.apply(this,arguments)}function pr(){return(pr=(0,x.A)(function*(g,h,f,_,w,R){ie(g.config.authDomain,g,"auth-domain-config-required"),ie(g.config.apiKey,g,"invalid-api-key");const Y={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:Z.SDK_VERSION,eventId:w};if(h instanceof Or){h.setDefaultLanguage(g.languageCode),Y.providerId=h.providerId||"",(0,D.Im)(h.getCustomParameters())||(Y.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ut,tn]of Object.entries(R||{}))Y[ut]=tn}if(h instanceof hc){const ut=h.getScopes().filter(tn=>""!==tn);ut.length>0&&(Y.scopes=ut.join(","))}g.tenantId&&(Y.tid=g.tenantId);const fe=Y;for(const ut of Object.keys(fe))void 0===fe[ut]&&delete fe[ut];const Re=yield g._getAppCheckToken(),tt=Re?`#${Gt}=${encodeURIComponent(Re)}`:"";return`${function Fn({config:g}){return g.emulator?dr(g,Ie):`https://${g.authDomain}/${JR}`}(g)}?${(0,D.Am)(fe).slice(1)}${tt}`})).apply(this,arguments)}const mm="webStorageSupport",_o=class xh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=By,this._completeRedirectFn=um,this._overrideRedirectResult=jR}_openPopup(h,f,_,w){var R=this;return(0,x.A)(function*(){var Y;vt(null===(Y=R.eventManagers[h._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const fe=yield fr(h,f,_,jt(),w);return function XR(g,h,f,_=500,w=600){const R=Math.max((window.screen.availHeight-w)/2,0).toString(),Y=Math.max((window.screen.availWidth-_)/2,0).toString();let fe="";const Re=Object.assign(Object.assign({},KR),{width:_.toString(),height:w.toString(),top:R,left:Y}),tt=(0,D.ZQ)().toLowerCase();f&&(fe=zs(tt)?"_blank":f),K(tt)&&(h=h||"http://localhost",Re.scrollbars="yes");const ut=Object.entries(Re).reduce((xn,[Ts,Ln])=>`${xn}${Ts}=${Ln},`,"");if(function mu(g=(0,D.ZQ)()){var h;return lo(g)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(tt)&&"_self"!==fe)return function ZR(g,h){const f=document.createElement("a");f.href=g,f.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(h||"",fe),new R0(null);const tn=window.open(h||"",fe,ut);ie(tn,g,"popup-blocked");try{tn.focus()}catch{}return new R0(tn)}(h,fe,Is())})()}_openRedirect(h,f,_,w){var R=this;return(0,x.A)(function*(){return yield R._originValidation(h),function Tu(g){Fr().location.href=g}(yield fr(h,f,_,jt(),w)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:w,promise:R}=this.eventManagers[f];return w?Promise.resolve(w):(vt(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(h){var f=this;return(0,x.A)(function*(){const _=yield function r4(g){return Yy.apply(this,arguments)}(h),w=new Gi(h);return _.register("authEvent",R=>(ie(R?.authEvent,h,"invalid-auth-event"),{status:w.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:w},f.iframes[h._key()]=_,w})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(mm,{type:mm},w=>{var R;const Y=null===(R=w?.[0])||void 0===R?void 0:R[mm];void 0!==Y&&f(!!Y),Ct(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function go(g){return hm.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return dy()||Qn()||lo()}};class gm{constructor(h){this.factorId=h}_process(h,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,_);case"signin":return this._finalizeSignIn(h,f.credential);default:return nt("unexpected MultiFactorSessionType")}}}class Rh extends gm{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Rh(h)}_finalizeEnroll(h,f,_){return function RR(g,h){return ae(g,"POST","/v2/accounts/mfaEnrollment:finalize",se(g,h))}(h,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function ni(g,h){return ae(g,"POST","/v2/accounts/mfaSignIn:finalize",se(g,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let M0=(()=>{class g{constructor(){}static assertion(f){return Rh._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var Zy="@firebase/auth";class $a{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,x.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const eM=(0,D.XA)("authIdTokenMaxAge")||300;let Jy=null;const tM=g=>function(){var h=(0,x.A)(function*(f){const _=f&&(yield f.getIdTokenResult()),w=_&&((new Date).getTime()-Date.parse(_.issuedAtTime))/1e3;if(w&&w>eM)return;const R=_?.token;Jy!==R&&(Jy=R,yield fetch(g,{method:R?"POST":"DELETE",headers:R?{Authorization:`Bearer ${R}`}:{}}))});return function(f){return h.apply(this,arguments)}}();function nM(g=(0,Z.getApp)()){const h=(0,Z._getProvider)(g,"auth");if(h.isInitialized())return h.getImmediate();const f=function HH(g,h){const f=(0,Z._getProvider)(g,"auth");if(f.isInitialized()){const w=f.getImmediate(),R=f.getOptions();if((0,D.bD)(R,h??{}))return w;Ct(w,"already-initialized")}return f.initialize({options:h})}(g,{popupRedirectResolver:_o,persistence:[yc,_c,By]}),_=(0,D.XA)("authTokenSyncURL");if(_&&"boolean"==typeof isSecureContext&&isSecureContext){const R=new URL(_,location.origin);if(location.origin===R.origin){const Y=tM(R.toString());(function El(g,h,f){(0,D.Ku)(g).beforeAuthStateChanged(h,f)})(f,Y,()=>Y(f.currentUser)),function SR(g,h,f,_){(0,D.Ku)(g).onIdTokenChanged(h,f,_)}(f,fe=>Y(fe))}}const w=(0,D.Tj)("auth");return w&&cR(f,`http://${w}`),f}(function UH(g){cc=g})({loadJS:g=>new Promise((h,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=h,_.onerror=w=>{const R=Tt("internal-error");R.customData=w,f(R)},_.type="text/javascript",_.charset="UTF-8",function ev(){var g,h;return null!==(h=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==h?h:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Bo(g){(0,Z._registerComponent)(new te.uA("auth",(h,{options:f})=>{const _=h.getProvider("app").getImmediate(),w=h.getProvider("heartbeat"),R=h.getProvider("app-check-internal"),{apiKey:Y,authDomain:fe}=_.options;ie(Y&&!Y.includes(":"),"invalid-api-key",{appName:_.name});const Re={apiKey:Y,authDomain:fe,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rp(g)},tt=new On(_,w,R,Re);return function lR(g,h){const f=h?.persistence||[],_=(Array.isArray(f)?f:[f]).map(me);h?.errorMap&&g._updateErrorMap(h.errorMap),g._initializeWithPersistence(_,h?.popupRedirectResolver)}(tt,f),tt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,_)=>{h.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new te.uA("auth-internal",h=>{const f=Cr(h.getProvider("auth").getImmediate());return new $a(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(Zy,"1.7.9",function k0(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Z.registerVersion)(Zy,"1.7.9","esm2017")}("Browser")},1401:(yt,U,G)=>{G.d(U,{$L:()=>Dn,$g:()=>dr,A4:()=>$,Am:()=>gs,As:()=>It,Bd:()=>nt,Cv:()=>Jt,FA:()=>pe,Fy:()=>gt,HN:()=>ys,Hk:()=>D,I9:()=>Bs,Im:()=>wi,K3:()=>te,KA:()=>ee,Ku:()=>Ce,Ll:()=>ie,OE:()=>ui,T9:()=>Ct,Tj:()=>Wt,Uj:()=>X,XA:()=>Tt,ZQ:()=>Et,bD:()=>ei,c1:()=>jt,cY:()=>Ot,dI:()=>_s,dM:()=>se,eX:()=>_e,g:()=>ge,gR:()=>St,gz:()=>la,hp:()=>oo,jZ:()=>Le,kH:()=>Nr,kj:()=>yl,lT:()=>An,lV:()=>Tn,mS:()=>Fe,nr:()=>$r,oD:()=>Hi,od:()=>ko,p7:()=>vt,p9:()=>Vt,qc:()=>en,sr:()=>Cn,tD:()=>Us,u:()=>z,vA:()=>Z,yw:()=>Jr,zW:()=>de,zw:()=>ue});const x={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(C,E){if(!C)throw D(E)},D=function(C){return new Error("Firebase Database ("+x.SDK_VERSION+") INTERNAL ASSERT FAILED: "+C)},he=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):55296==(64512&j)&&F+1<C.length&&56320==(64512&C.charCodeAt(F+1))?(j=65536+((1023&j)<<10)+(1023&C.charCodeAt(++F)),E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,E){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=E?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let j=0;j<C.length;j+=3){const me=C[j],ke=j+1<C.length,mt=ke?C[j+1]:0,Ve=j+2<C.length,_n=Ve?C[j+2]:0;let Qn=(15&mt)<<2|_n>>6,zs=63&_n;Ve||(zs=64,ke||(Qn=64)),F.push(S[me>>2],S[(3&me)<<4|mt>>4],S[Qn],S[zs])}return F.join("")},encodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?btoa(C):this.encodeByteArray(he(C),E)},decodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?atob(C):function(C){const E=[];let S=0,F=0;for(;S<C.length;){const j=C[S++];if(j<128)E[F++]=String.fromCharCode(j);else if(j>191&&j<224){const me=C[S++];E[F++]=String.fromCharCode((31&j)<<6|63&me)}else if(j>239&&j<365){const Ve=((7&j)<<18|(63&C[S++])<<12|(63&C[S++])<<6|63&C[S++])-65536;E[F++]=String.fromCharCode(55296+(Ve>>10)),E[F++]=String.fromCharCode(56320+(1023&Ve))}else{const me=C[S++],ke=C[S++];E[F++]=String.fromCharCode((15&j)<<12|(63&me)<<6|63&ke)}}return E.join("")}(this.decodeStringToByteArray(C,E))},decodeStringToByteArray(C,E){this.init_();const S=E?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let j=0;j<C.length;){const me=S[C.charAt(j++)],mt=j<C.length?S[C.charAt(j)]:0;++j;const _n=j<C.length?S[C.charAt(j)]:64;++j;const K=j<C.length?S[C.charAt(j)]:64;if(++j,null==me||null==mt||null==_n||null==K)throw new we;F.push(me<<2|mt>>4),64!==_n&&(F.push(mt<<4&240|_n>>2),64!==K&&F.push(_n<<6&192|K))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ee=function(C){const E=he(C);return te.encodeByteArray(E,!0)},X=function(C){return ee(C).replace(/\./g,"")},z=function(C){try{return te.decodeString(C,!0)}catch(E){console.error("base64Decode failed: ",E)}return null};function $(C){return ue(void 0,C)}function ue(C,E){if(!(E instanceof Object))return E;switch(E.constructor){case Date:return new Date(E.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return E}for(const S in E)!E.hasOwnProperty(S)||!Ae(S)||(C[S]=ue(C[S],E[S]));return C}function Ae(C){return"__proto__"!==C}function Fe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Je=()=>{try{return Fe().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const E=C&&z(C[1]);return E&&JSON.parse(E)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},Wt=C=>{var E,S;return null===(S=null===(E=Je())||void 0===E?void 0:E.emulatorHosts)||void 0===S?void 0:S[C]},Ct=()=>{var C;return null===(C=Je())||void 0===C?void 0:C.config},Tt=C=>{var E;return null===(E=Je())||void 0===E?void 0:E[`_${C}`]};class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((E,S)=>{this.resolve=E,this.reject=S})}wrapCallback(E){return(S,F)=>{S?this.reject(S):this.resolve(F),"function"==typeof E&&(this.promise.catch(()=>{}),1===E.length?E(S):E(S,F))}}}function gt(C,E){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=E||"demo-project",j=C.iat||0,me=C.sub||C.user_id;if(!me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:j,exp:j+3600,auth_time:j,sub:me,user_id:me,firebase:{sign_in_provider:"custom",identities:{}}},C);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(ke)),""].join(".")}function Et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function ie(){var C;const E=null===(C=Je())||void 0===C?void 0:C.forceEnvironment;if("node"===E)return!0;if("browser"===E)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function nt(){return typeof window<"u"||vt()}function vt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function jt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Cn(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function Tn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function An(){const C=Et();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function dr(){return!0===x.NODE_CLIENT||!0===x.NODE_ADMIN}function $r(){return!ie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){try{return"object"==typeof indexedDB}catch{return!1}}function _e(){return new Promise((C,E)=>{try{let S=!0;const F="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(F);j.onsuccess=()=>{j.result.close(),S||self.indexedDB.deleteDatabase(F),C(!0)},j.onupgradeneeded=()=>{S=!1},j.onerror=()=>{var me;E((null===(me=j.error)||void 0===me?void 0:me.message)||"")}}catch(S){E(S)}})}function se(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ge extends Error{constructor(E,S,F){super(S),this.code=E,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}}class pe{constructor(E,S,F){this.service=E,this.serviceName=S,this.errors=F}create(E,...S){const F=S[0]||{},j=`${this.service}/${E}`,me=this.errors[E],ke=me?function ot(C,E){return C.replace(Mt,(S,F)=>{const j=E[F];return null!=j?String(j):`<${F}?>`})}(me,F):"Error";return new ge(j,`${this.serviceName}: ${ke} (${j}).`,F)}}const Mt=/\{\$([^}]+)}/g;function Dn(C){return JSON.parse(C)}function It(C){return JSON.stringify(C)}const In=function(C){let E={},S={},F={},j="";try{const me=C.split(".");E=Dn(z(me[0])||""),S=Dn(z(me[1])||""),j=me[2],F=S.d||{},delete S.d}catch{}return{header:E,claims:S,data:F,signature:j}},Jt=function(C){const S=In(C).claims;return!!S&&"object"==typeof S&&S.hasOwnProperty("iat")},en=function(C){const E=In(C).claims;return"object"==typeof E&&!0===E.admin};function St(C,E){return Object.prototype.hasOwnProperty.call(C,E)}function Jr(C,E){if(Object.prototype.hasOwnProperty.call(C,E))return C[E]}function wi(C){for(const E in C)if(Object.prototype.hasOwnProperty.call(C,E))return!1;return!0}function Nr(C,E,S){const F={};for(const j in C)Object.prototype.hasOwnProperty.call(C,j)&&(F[j]=E.call(S,C[j],j,C));return F}function ei(C,E){if(C===E)return!0;const S=Object.keys(C),F=Object.keys(E);for(const j of S){if(!F.includes(j))return!1;const me=C[j],ke=E[j];if(so(me)&&so(ke)){if(!ei(me,ke))return!1}else if(me!==ke)return!1}for(const j of F)if(!S.includes(j))return!1;return!0}function so(C){return null!==C&&"object"==typeof C}function gs(C){const E=[];for(const[S,F]of Object.entries(C))Array.isArray(F)?F.forEach(j=>{E.push(encodeURIComponent(S)+"="+encodeURIComponent(j))}):E.push(encodeURIComponent(S)+"="+encodeURIComponent(F));return E.length?"&"+E.join("&"):""}function Bs(C){const E={};return C.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[j,me]=F.split("=");E[decodeURIComponent(j)]=decodeURIComponent(me)}}),E}function oo(C){const E=C.indexOf("?");if(!E)return"";const S=C.indexOf("#",E);return C.substring(E,S>0?S:void 0)}class la{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let E=1;E<this.blockSize;++E)this.pad_[E]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(E,S){S||(S=0);const F=this.W_;if("string"==typeof E)for(let K=0;K<16;K++)F[K]=E.charCodeAt(S)<<24|E.charCodeAt(S+1)<<16|E.charCodeAt(S+2)<<8|E.charCodeAt(S+3),S+=4;else for(let K=0;K<16;K++)F[K]=E[S]<<24|E[S+1]<<16|E[S+2]<<8|E[S+3],S+=4;for(let K=16;K<80;K++){const Qn=F[K-3]^F[K-8]^F[K-14]^F[K-16];F[K]=4294967295&(Qn<<1|Qn>>>31)}let _n,wr,j=this.chain_[0],me=this.chain_[1],ke=this.chain_[2],mt=this.chain_[3],Ve=this.chain_[4];for(let K=0;K<80;K++){K<40?K<20?(_n=mt^me&(ke^mt),wr=1518500249):(_n=me^ke^mt,wr=1859775393):K<60?(_n=me&ke|mt&(me|ke),wr=2400959708):(_n=me^ke^mt,wr=3395469782);const Qn=(j<<5|j>>>27)+_n+Ve+wr+F[K]&4294967295;Ve=mt,mt=ke,ke=4294967295&(me<<30|me>>>2),me=j,j=Qn}this.chain_[0]=this.chain_[0]+j&4294967295,this.chain_[1]=this.chain_[1]+me&4294967295,this.chain_[2]=this.chain_[2]+ke&4294967295,this.chain_[3]=this.chain_[3]+mt&4294967295,this.chain_[4]=this.chain_[4]+Ve&4294967295}update(E,S){if(null==E)return;void 0===S&&(S=E.length);const F=S-this.blockSize;let j=0;const me=this.buf_;let ke=this.inbuf_;for(;j<S;){if(0===ke)for(;j<=F;)this.compress_(E,j),j+=this.blockSize;if("string"==typeof E){for(;j<S;)if(me[ke]=E.charCodeAt(j),++ke,++j,ke===this.blockSize){this.compress_(me),ke=0;break}}else for(;j<S;)if(me[ke]=E[j],++ke,++j,ke===this.blockSize){this.compress_(me),ke=0;break}}this.inbuf_=ke,this.total_+=S}digest(){const E=[];let S=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let j=this.blockSize-1;j>=56;j--)this.buf_[j]=255&S,S/=256;this.compress_(this.buf_);let F=0;for(let j=0;j<5;j++)for(let me=24;me>=0;me-=8)E[F]=this.chain_[j]>>me&255,++F;return E}}function Us(C,E){const S=new ci(C,E);return S.subscribe.bind(S)}class ci{constructor(E,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{E(this)}).catch(F=>{this.error(F)})}next(E){this.forEachObserver(S=>{S.next(E)})}error(E){this.forEachObserver(S=>{S.error(E)}),this.close(E)}complete(){this.forEachObserver(E=>{E.complete()}),this.close()}subscribe(E,S,F){let j;if(void 0===E&&void 0===S&&void 0===F)throw new Error("Missing Observer.");j=function js(C,E){if("object"!=typeof C||null===C)return!1;for(const S of E)if(S in C&&"function"==typeof C[S])return!0;return!1}(E,["next","error","complete"])?E:{next:E,error:S,complete:F},void 0===j.next&&(j.next=os),void 0===j.error&&(j.error=os),void 0===j.complete&&(j.complete=os);const me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?j.error(this.finalError):j.complete()}catch{}}),this.observers.push(j),me}unsubscribeOne(E){void 0===this.observers||void 0===this.observers[E]||(delete this.observers[E],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(E){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,E)}sendOne(E,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[E])try{S(this.observers[E])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(E){this.finalized||(this.finalized=!0,void 0!==E&&(this.finalError=E),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function os(){}const ko=function(C,E,S,F){let j;if(F<E?j="at least "+E:F>S&&(j=0===S?"none":"no more than "+S),j)throw new Error(C+" failed: Was called with "+F+(1===F?" argument.":" arguments.")+" Expects "+j+".")};function _s(C,E){return`${C} failed: ${E} argument `}function Hi(C,E,S,F){if((!F||S)&&"function"!=typeof S)throw new Error(_s(C,E)+"must be a valid function.")}function ys(C,E,S,F){if((!F||S)&&("object"!=typeof S||null===S))throw new Error(_s(C,E)+"must be a valid context object.")}const yl=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);if(j>=55296&&j<=56319){const me=j-55296;F++,Z(F<C.length,"Surrogate pair missing trail surrogate."),j=65536+(me<<10)+(C.charCodeAt(F)-56320)}j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):j<65536?(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},ui=function(C){let E=0;for(let S=0;S<C.length;S++){const F=C.charCodeAt(S);F<128?E++:F<2048?E+=2:F>=55296&&F<=56319?(E+=4,S++):E+=3}return E},ao=1e3,Ri=2,La=144e5,ua=.5;function Vt(C,E=ao,S=Ri){const F=E*Math.pow(S,C),j=Math.round(ua*F*(Math.random()-.5)*2);return Math.min(La,F+j)}function Ce(C){return C&&C._delegate?C._delegate:C}},2222:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=te(G(7029)),Z=te(G(3100)),D=te(G(5705)),he=te(G(942)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$,ue){var Ae=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,Fe=(0,x.default)(z),et=(0,Z.default)(z),Qe=$/Ae,Ze=(0,D.default)(ue),Je=(0,D.default)(Fe),Wt=(0,D.default)(et),Zt=Math.asin(Math.sin(Je)*Math.cos(Qe)+Math.cos(Je)*Math.sin(Qe)*Math.cos(Ze)),Ct=Wt+Math.atan2(Math.sin(Ze)*Math.sin(Qe)*Math.cos(Je),Math.cos(Qe)-Math.sin(Je)*Math.sin(Zt)),Tt=(0,he.default)(Ct);return(Tt<ce.MINLON||Tt>ce.MAXLON)&&(Ct=(Ct+3*Math.PI)%(2*Math.PI)-Math.PI,Tt=(0,he.default)(Ct)),{latitude:(0,he.default)(Zt),longitude:Tt}}},7636:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.areaConversion=U.timeConversion=U.distanceConversion=U.altitudeKeys=U.latitudeKeys=U.longitudeKeys=U.MAXLON=U.MINLON=U.MAXLAT=U.MINLAT=U.earthRadius=U.sexagesimalPattern=void 0,U.sexagesimalPattern=/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['\u2032]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["\u2033]\s*)?([NEOSW]?)$/,U.earthRadius=6378137,U.MINLAT=-90,U.MAXLAT=90,U.MINLON=-180,U.MAXLON=180,U.longitudeKeys=["lng","lon","longitude",0],U.latitudeKeys=["lat","latitude",1],U.altitudeKeys=["alt","altitude","elevation","elev",2],U.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},U.timeConversion={m:60,h:3600,d:86400};var $={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};U.areaConversion=$,$.sqm=$.m2,$.sqkm=$.km2,$.sqft=$.ft2,$.sqyd=$.yd2,$.sqin=$.in2},179:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){var we=x.areaConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(we)return ce*we;throw new Error("Invalid unit used for area conversion.")}},917:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){var we=x.distanceConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(we)return ce*we;throw new Error("Invalid unit used for distance conversion.")}},1167:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh"){case"kmh":return ce*x.timeConversion.h*x.distanceConversion.km;case"mph":return ce*x.timeConversion.h*x.distanceConversion.mi;default:return ce}}},8948:(yt,U)=>{function G(X,z){return function ce(X){if(Array.isArray(X))return X}(X)||function he(X,z){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(X)){var $=[],ue=!0,Ae=!1,Fe=void 0;try{for(var Qe,et=X[Symbol.iterator]();!(ue=(Qe=et.next()).done)&&($.push(Qe.value),!z||$.length!==z);ue=!0);}catch(Ze){Ae=!0,Fe=Ze}finally{try{!ue&&null!=et.return&&et.return()}finally{if(Ae)throw Fe}}return $}}(X,z)||function Z(X,z){if(X){if("string"==typeof X)return D(X,z);var $=Object.prototype.toString.call(X).slice(8,-1);if("Object"===$&&X.constructor&&($=X.constructor.name),"Map"===$||"Set"===$)return Array.from(X);if("Arguments"===$||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return D(X,z)}}(X,z)||function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(X,z){(null==z||z>X.length)&&(z=X.length);for(var $=0,ue=new Array(z);$<z;$++)ue[$]=X[$];return ue}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(z){var ue=G(z.toString().split("."),2),Fe=ue[1],et=Math.abs(Number(ue[0])),Qe=60*+("0."+(Fe||0)),Ze=Qe.toString().split("."),Je=Math.floor(Qe),Wt=function(z){var ue=Math.pow(10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:4);return Math.round(z*ue)/ue}(60*+("0."+(Ze[1]||0))).toString(),Ct=G(Wt.split("."),2),Tt=Ct[0],Ot=Ct[1],gt=void 0===Ot?"0":Ot;return et+"\xb0 "+Je.toString().padStart(2,"0")+"' "+Tt.padStart(2,"0")+"."+gt.padEnd(1,"0")+'"'}},1118:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(2447));U.default=function(te,we){return(0,x.default)(te,we)[0]}},1691:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(5705)),Z=ce(G(7029)),D=ce(G(3100)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){var z=0;if(X.length>2){for(var $,ue,Ae,Fe=0;Fe<X.length;Fe++){Fe===X.length-2?($=X.length-2,ue=X.length-1,Ae=0):Fe===X.length-1?($=X.length-1,ue=0,Ae=1):($=Fe,ue=Fe+1,Ae=Fe+2);var et=(0,D.default)(X[$]),Qe=(0,Z.default)(X[ue]),Ze=(0,D.default)(X[Ae]);z+=((0,x.default)(Ze)-(0,x.default)(et))*Math.sin((0,x.default)(Qe))}z=z*he.earthRadius*he.earthRadius/2}return Math.abs(z)}},9144:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=D(G(7029)),Z=D(G(3100));function D(te){return te&&te.__esModule?te:{default:te}}U.default=function(we){if(!1===Array.isArray(we)||0===we.length)throw new Error("No points were given.");return we.reduce(function(ee,X){var z=(0,x.default)(X),$=(0,Z.default)(X);return{maxLat:Math.max(z,ee.maxLat),minLat:Math.min(z,ee.minLat),maxLng:Math.max($,ee.maxLng),minLng:Math.min($,ee.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}},190:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=te(G(7029)),Z=te(G(3100)),D=te(G(5705)),he=te(G(942)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var Ot,gt,ue=(0,x.default)(z),Ae=(0,Z.default)(z),Fe=(0,D.default)(ue),et=(0,D.default)(Ae),Qe=$/ce.earthRadius,Ze=Fe-Qe,Je=Fe+Qe,Wt=(0,D.default)(ce.MAXLAT),Zt=(0,D.default)(ce.MINLAT),Ct=(0,D.default)(ce.MAXLON),Tt=(0,D.default)(ce.MINLON);if(Ze>Zt&&Je<Wt){var Et=Math.asin(Math.sin(Qe)/Math.cos(Fe));(Ot=et-Et)<Tt&&(Ot+=2*Math.PI),(gt=et+Et)>Ct&&(gt-=2*Math.PI)}else Ze=Math.max(Ze,Zt),Je=Math.min(Je,Wt),Ot=Tt,gt=Ct;return[{latitude:(0,he.default)(Ze),longitude:(0,he.default)(Ot)},{latitude:(0,he.default)(Je),longitude:(0,he.default)(gt)}]}},5524:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(7029)),Z=ce(G(3100)),D=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){if(!1===Array.isArray(X)||0===X.length)return!1;var z=X.length,$=X.reduce(function(et,Qe){var Ze=(0,D.default)((0,x.default)(Qe)),Je=(0,D.default)((0,Z.default)(Qe));return{X:et.X+Math.cos(Ze)*Math.cos(Je),Y:et.Y+Math.cos(Ze)*Math.sin(Je),Z:et.Z+Math.sin(Ze)}},{X:0,Y:0,Z:0}),ue=$.X/z,Ae=$.Y/z,Fe=$.Z/z;return{longitude:(0,he.default)(Math.atan2(Ae,ue)),latitude:(0,he.default)(Math.atan2(Fe,Math.sqrt(ue*ue+Ae*Ae)))}}},7088:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(9144));U.default=function(te){var we=(0,x.default)(te),X=we.minLng+(we.maxLng-we.minLng)/2;return{latitude:parseFloat((we.minLat+(we.maxLat-we.minLat)/2).toFixed(6)),longitude:parseFloat(X.toFixed(6))}}},9952:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(939));U.default=function(te,we){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.default,X="function"==typeof ee?ee(te,we):(0,x.default)(te,we);if(isNaN(X))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(X/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}},8744:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D,he){return he.reduce(function(ce,te){if(typeof D>"u"||null===D)throw new Error("'".concat(D,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(D,te)&&typeof te<"u"&&typeof ce>"u"?(ce=te,te):ce},void 0)}},4695:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636),Z=function D(X){return X&&X.__esModule?X:{default:X}}(G(8744));function he(X,z){var $=Object.keys(X);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(X);z&&(ue=ue.filter(function(Ae){return Object.getOwnPropertyDescriptor(X,Ae).enumerable})),$.push.apply($,ue)}return $}function te(X,z,$){return z in X?Object.defineProperty(X,z,{value:$,enumerable:!0,configurable:!0,writable:!0}):X[z]=$,X}U.default=function(z){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:x.longitudeKeys,latitude:x.latitudeKeys,altitude:x.altitudeKeys},ue=(0,Z.default)(z,$.longitude),Ae=(0,Z.default)(z,$.latitude),Fe=(0,Z.default)(z,$.altitude);return function ce(X){for(var z=1;z<arguments.length;z++){var $=null!=arguments[z]?arguments[z]:{};z%2?he(Object($),!0).forEach(function(ue){te(X,ue,$[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors($)):he(Object($)).forEach(function(ue){Object.defineProperty(X,ue,Object.getOwnPropertyDescriptor($,ue))})}return X}({latitude:Ae,longitude:ue},Fe?{altitude:Fe}:{})}},8674:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=te(G(7029)),Z=te(G(3100)),D=te(G(5705)),he=te(G(6522)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var ue=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ue=typeof ue<"u"&&!isNaN(ue)?ue:1;var Ae=(0,x.default)(z),Fe=(0,Z.default)(z),et=(0,x.default)($),Qe=(0,Z.default)($),Ze=Math.acos((0,he.default)(Math.sin((0,D.default)(et))*Math.sin((0,D.default)(Ae))+Math.cos((0,D.default)(et))*Math.cos((0,D.default)(Ae))*Math.cos((0,D.default)(Fe)-(0,D.default)(Qe))))*ce.earthRadius;return Math.round(Ze/ue)*ue}},7504:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=D(G(8674)),Z=D(G(6522));function D(te){return te&&te.__esModule?te:{default:te}}U.default=function(we,ee,X){var z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,$=(0,x.default)(ee,we,z),ue=(0,x.default)(we,X,z),Ae=(0,x.default)(ee,X,z),Fe=Math.acos((0,Z.default)(($*$+Ae*Ae-ue*ue)/(2*$*Ae))),et=Math.acos((0,Z.default)((ue*ue+Ae*Ae-$*$)/(2*ue*Ae)));return Fe>Math.PI/2?$:et>Math.PI/2?ue:Math.sin(Fe)*$}},884:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(7029)),Z=ce(G(3100)),D=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,x.default)(z),ue=(0,Z.default)(z),Ae=(0,x.default)(X),Fe=(0,Z.default)(X);return((0,he.default)(Math.atan2(Math.sin((0,D.default)(ue)-(0,D.default)(Fe))*Math.cos((0,D.default)($)),Math.cos((0,D.default)(Ae))*Math.sin((0,D.default)($))-Math.sin((0,D.default)(Ae))*Math.cos((0,D.default)($))*Math.cos((0,D.default)(ue)-(0,D.default)(Fe))))+360)%360}},7029:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636),Z=he(G(8744)),D=he(G(5101));function he(we){return we&&we.__esModule?we:{default:we}}U.default=function(ee,X){var z=(0,Z.default)(ee,x.latitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,D.default)($)}}},3100:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636),Z=he(G(8744)),D=he(G(5101));function he(we){return we&&we.__esModule?we:{default:we}}U.default=function(ee,X){var z=(0,Z.default)(ee,x.longitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,D.default)($)}}},5378:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(te){return te&&te.__esModule?te:{default:te}}(G(8674));function D(te){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(te)}U.default=function(we){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.default;return we.reduce(function(X,z){return"object"===D(X)&&null!==X.last&&(X.distance+=ee(z,X.last)),X.last=z,X},{last:null,distance:0}).distance}},2671:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(7029)),Z=ce(G(3100)),D=ce(G(5705)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;$=typeof $<"u"&&!isNaN($)?$:1;var Wt,Zt,Ct,Tt,Ot,gt,Tn,ue=(0,x.default)(X),Ae=(0,Z.default)(X),Fe=(0,x.default)(z),et=(0,Z.default)(z),Qe=6356752.314245,Ze=1/298.257223563,Je=(0,D.default)(et-Ae),Et=Math.atan((1-Ze)*Math.tan((0,D.default)(parseFloat(ue)))),Le=Math.atan((1-Ze)*Math.tan((0,D.default)(parseFloat(Fe)))),ie=Math.sin(Et),nt=Math.cos(Et),vt=Math.sin(Le),jt=Math.cos(Le),Cn=Je,Ir=100;do{var An=Math.sin(Cn),nr=Math.cos(Cn);if(0===(gt=Math.sqrt(jt*An*(jt*An)+(nt*vt-ie*jt*nr)*(nt*vt-ie*jt*nr))))return 0;Wt=ie*vt+nt*jt*nr,Zt=Math.atan2(gt,Wt),Ot=Wt-2*ie*vt/(Tt=1-(Ct=nt*jt*An/gt)*Ct),isNaN(Ot)&&(Ot=0);var dr=Ze/16*Tt*(4+Ze*(4-3*Tt));Tn=Cn,Cn=Je+(1-dr)*Ze*Ct*(Zt+dr*gt*(Ot+dr*Wt*(2*Ot*Ot-1)))}while(Math.abs(Cn-Tn)>1e-12&&--Ir>0);if(0===Ir)return NaN;var $r=Tt*(he.earthRadius*he.earthRadius-Qe*Qe)/(Qe*Qe),_e=$r/1024*(256+$r*($r*(74-47*$r)-128));return Math.round(Qe*(1+$r/16384*(4096+$r*($r*(320-175*$r)-768)))*(Zt-_e*gt*(Ot+_e/4*(Wt*(2*Ot*Ot-1)-_e/6*Ot*(4*gt*gt-3)*(4*Ot*Ot-3))))/$)*$}},939:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(7029)),Z=ce(G(3100)),D=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,D.default)((0,Z.default)(z))-(0,D.default)((0,Z.default)(X)),ue=Math.log(Math.tan((0,D.default)((0,x.default)(z))/2+Math.PI/4)/Math.tan((0,D.default)((0,x.default)(X))/2+Math.PI/4));return Math.abs($)>Math.PI&&($=$>0?-1*(2*Math.PI-$):2*Math.PI+$),((0,he.default)(Math.atan2($,ue))+360)%360}},2845:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){return/^(NNE|NE|NNW|N)$/.test(D)?"N":/^(ENE|E|ESE|SE)$/.test(D)?"E":/^(SSE|S|SSW|SW)$/.test(D)?"S":/^(WSW|W|WNW|NW)$/.test(D)?"W":void 0}},8950:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,we){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.default)(te,we)/(Number(we.time)-Number(te.time))*1e3}},2541:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0});var x={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(U,"computeDestinationPoint",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(U,"convertArea",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(U,"convertDistance",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(U,"convertSpeed",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(U,"decimalToSexagesimal",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(U,"findNearest",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(U,"getAreaOfPolygon",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(U,"getBounds",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(U,"getBoundsOfDistance",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(U,"getCenter",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(U,"getCenterOfBounds",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(U,"getCompassDirection",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(U,"getCoordinateKey",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(U,"getCoordinateKeys",{enumerable:!0,get:function(){return et.default}}),Object.defineProperty(U,"getDistance",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(U,"getDistanceFromLine",{enumerable:!0,get:function(){return Ze.default}}),Object.defineProperty(U,"getGreatCircleBearing",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(U,"getLatitude",{enumerable:!0,get:function(){return Wt.default}}),Object.defineProperty(U,"getLongitude",{enumerable:!0,get:function(){return Zt.default}}),Object.defineProperty(U,"getPathLength",{enumerable:!0,get:function(){return Ct.default}}),Object.defineProperty(U,"getPreciseDistance",{enumerable:!0,get:function(){return Tt.default}}),Object.defineProperty(U,"getRhumbLineBearing",{enumerable:!0,get:function(){return Ot.default}}),Object.defineProperty(U,"getRoughCompassDirection",{enumerable:!0,get:function(){return gt.default}}),Object.defineProperty(U,"getSpeed",{enumerable:!0,get:function(){return Et.default}}),Object.defineProperty(U,"isDecimal",{enumerable:!0,get:function(){return Le.default}}),Object.defineProperty(U,"isPointInLine",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(U,"isPointInPolygon",{enumerable:!0,get:function(){return nt.default}}),Object.defineProperty(U,"isPointNearLine",{enumerable:!0,get:function(){return vt.default}}),Object.defineProperty(U,"isPointWithinRadius",{enumerable:!0,get:function(){return jt.default}}),Object.defineProperty(U,"isSexagesimal",{enumerable:!0,get:function(){return Cn.default}}),Object.defineProperty(U,"isValidCoordinate",{enumerable:!0,get:function(){return Tn.default}}),Object.defineProperty(U,"isValidLatitude",{enumerable:!0,get:function(){return Ir.default}}),Object.defineProperty(U,"isValidLongitude",{enumerable:!0,get:function(){return An.default}}),Object.defineProperty(U,"orderByDistance",{enumerable:!0,get:function(){return nr.default}}),Object.defineProperty(U,"sexagesimalToDecimal",{enumerable:!0,get:function(){return dr.default}}),Object.defineProperty(U,"toDecimal",{enumerable:!0,get:function(){return $r.default}}),Object.defineProperty(U,"toRad",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(U,"toDeg",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(U,"wktToPolygon",{enumerable:!0,get:function(){return se.default}});var Z=ge(G(2222)),D=ge(G(179)),he=ge(G(917)),ce=ge(G(1167)),te=ge(G(8948)),we=ge(G(1118)),ee=ge(G(1691)),X=ge(G(9144)),z=ge(G(190)),$=ge(G(5524)),ue=ge(G(7088)),Ae=ge(G(9952)),Fe=ge(G(8744)),et=ge(G(4695)),Qe=ge(G(8674)),Ze=ge(G(7504)),Je=ge(G(884)),Wt=ge(G(7029)),Zt=ge(G(3100)),Ct=ge(G(5378)),Tt=ge(G(2671)),Ot=ge(G(939)),gt=ge(G(2845)),Et=ge(G(8950)),Le=ge(G(3026)),ie=ge(G(4194)),nt=ge(G(3536)),vt=ge(G(2787)),jt=ge(G(202)),Cn=ge(G(4902)),Tn=ge(G(7637)),Ir=ge(G(6563)),An=ge(G(266)),nr=ge(G(2447)),dr=ge(G(1532)),$r=ge(G(5101)),de=ge(G(5705)),_e=ge(G(942)),se=ge(G(354)),ae=G(7636);function ge(pe){return pe&&pe.__esModule?pe:{default:pe}}Object.keys(ae).forEach(function(pe){"default"===pe||"__esModule"===pe||Object.prototype.hasOwnProperty.call(x,pe)||Object.defineProperty(U,pe,{enumerable:!0,get:function(){return ae[pe]}})})},3026:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){var he=D.toString().trim();return!isNaN(parseFloat(he))&&parseFloat(he)===Number(he)}},4194:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,we,ee){return(0,x.default)(we,te)+(0,x.default)(te,ee)===(0,x.default)(we,ee)}},3536:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=D(G(7029)),Z=D(G(3100));function D(te){return te&&te.__esModule?te:{default:te}}U.default=function(we,ee){for(var X=!1,z=ee.length,$=-1,ue=z-1;++$<z;ue=$)((0,Z.default)(ee[$])<=(0,Z.default)(we)&&(0,Z.default)(we)<(0,Z.default)(ee[ue])||(0,Z.default)(ee[ue])<=(0,Z.default)(we)&&(0,Z.default)(we)<(0,Z.default)(ee[$]))&&(0,x.default)(we)<((0,x.default)(ee[ue])-(0,x.default)(ee[$]))*((0,Z.default)(we)-(0,Z.default)(ee[$]))/((0,Z.default)(ee[ue])-(0,Z.default)(ee[$]))+(0,x.default)(ee[$])&&(X=!X);return X}},2787:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(7504));U.default=function(te,we,ee,X){return(0,x.default)(te,we,ee)<X}},202:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,we,ee){return(0,x.default)(te,we,.01)<ee}},4902:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){return x.sexagesimalPattern.test(ce.toString().trim())}},7637:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=he(G(4695)),Z=he(G(6563)),D=he(G(266));function he(we){return we&&we.__esModule?we:{default:we}}U.default=function(ee){var X=(0,x.default)(ee),z=X.latitude,$=X.longitude;if(Array.isArray(ee)&&ee.length>=2)return(0,D.default)(ee[0])&&(0,Z.default)(ee[1]);if(typeof z>"u"||typeof $>"u")return!1;var ue=ee[$],Ae=ee[z];return!(typeof Ae>"u"||typeof ue>"u"||!1===(0,Z.default)(Ae)||!1===(0,D.default)(ue))}},6563:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(3026)),Z=ce(G(4902)),D=ce(G(1532)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,x.default)(X)?!(parseFloat(X)>he.MAXLAT||X<he.MINLAT):!!(0,Z.default)(X)&&ee((0,D.default)(X))}},266:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(3026)),Z=ce(G(4902)),D=ce(G(1532)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,x.default)(X)?!(parseFloat(X)>he.MAXLON||X<he.MINLON):!!(0,Z.default)(X)&&ee((0,D.default)(X))}},2447:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,we){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.default;return ee="function"==typeof ee?ee:x.default,we.slice().sort(function(X,z){return ee(te,X)-ee(te,z)})}},6522:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){return D>1?1:D<-1?-1:D}},1532:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){var te=new RegExp(x.sexagesimalPattern).exec(ce.toString().trim());if(typeof te>"u"||null===te)throw new Error("Given value is not in sexagesimal format");var we=Number(te[2])/60||0,ee=Number(te[4])/3600||0,X=parseFloat(te[1])+we+ee;return["S","W"].includes(te[7])?-X:X}},5101:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=te(G(3026)),Z=te(G(4902)),D=te(G(1532)),he=te(G(7637)),ce=te(G(4695));function te(ue){return ue&&ue.__esModule?ue:{default:ue}}function we(ue,Ae){var Fe=Object.keys(ue);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(ue);Ae&&(et=et.filter(function(Qe){return Object.getOwnPropertyDescriptor(ue,Qe).enumerable})),Fe.push.apply(Fe,et)}return Fe}function ee(ue){for(var Ae=1;Ae<arguments.length;Ae++){var Fe=null!=arguments[Ae]?arguments[Ae]:{};Ae%2?we(Object(Fe),!0).forEach(function(et){X(ue,et,Fe[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(Fe)):we(Object(Fe)).forEach(function(et){Object.defineProperty(ue,et,Object.getOwnPropertyDescriptor(Fe,et))})}return ue}function X(ue,Ae,Fe){return Ae in ue?Object.defineProperty(ue,Ae,{value:Fe,enumerable:!0,configurable:!0,writable:!0}):ue[Ae]=Fe,ue}U.default=function ue(Ae){if((0,x.default)(Ae))return Number(Ae);if((0,Z.default)(Ae))return(0,D.default)(Ae);if((0,he.default)(Ae)){var Fe=(0,ce.default)(Ae);return Array.isArray(Ae)?Ae.map(function(et,Qe){return[0,1].includes(Qe)?ue(et):et}):ee(ee(ee({},Ae),Fe.latitude&&X({},Fe.latitude,ue(Ae[Fe.latitude]))),Fe.longitude&&X({},Fe.longitude,ue(Ae[Fe.longitude])))}return Array.isArray(Ae)?Ae.map(function(et){return(0,he.default)(et)?ue(et):et}):Ae}},942:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){return 180*D/Math.PI}},5705:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){return D*Math.PI/180}},354:(yt,U)=>{function D(ee,X){(null==X||X>ee.length)&&(X=ee.length);for(var z=0,$=new Array(X);z<X;z++)$[z]=ee[z];return $}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(X){if(!X.startsWith("POLYGON"))throw new Error("Invalid wkt.");return X.slice(X.indexOf("(")+2,X.indexOf(")")).split(", ").map(function(ue){var Fe=function G(ee,X){return function ce(ee){if(Array.isArray(ee))return ee}(ee)||function he(ee,X){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(ee)){var z=[],$=!0,ue=!1,Ae=void 0;try{for(var et,Fe=ee[Symbol.iterator]();!($=(et=Fe.next()).done)&&(z.push(et.value),!X||z.length!==X);$=!0);}catch(Qe){ue=!0,Ae=Qe}finally{try{!$&&null!=Fe.return&&Fe.return()}finally{if(ue)throw Ae}}return z}}(ee,X)||function Z(ee,X){if(ee){if("string"==typeof ee)return D(ee,X);var z=Object.prototype.toString.call(ee).slice(8,-1);if("Object"===z&&ee.constructor&&(z=ee.constructor.name),"Map"===z||"Set"===z)return Array.from(ee);if("Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return D(ee,X)}}(ee,X)||function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ue.split(" "),2),Qe=Fe[1];return{longitude:parseFloat(Fe[0]),latitude:parseFloat(Qe)}})}},9574:(yt,U,G)=>{G.d(U,{A:()=>et});var x=G(1401),Z=G(8779),D=G(1631),he=G(5398);class ce{constructor(Ze,Je){this._delegate=Ze,this.firebase=Je,(0,D._addComponent)(Ze,new Z.uA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,D.deleteApp)(this._delegate)))}_getService(Ze,Je=D._DEFAULT_ENTRY_NAME){var Wt;this._delegate.checkDestroyed();const Zt=this._delegate.container.getProvider(Ze);return!Zt.isInitialized()&&"EXPLICIT"===(null===(Wt=Zt.getComponent())||void 0===Wt?void 0:Wt.instantiationMode)&&Zt.initialize(),Zt.getImmediate({identifier:Je})}_removeServiceInstance(Ze,Je=D._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(Je)}_addComponent(Ze){(0,D._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,D._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new x.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function X(){const Qe=function ee(Qe){const Ze={},Je={__esModule:!0,initializeApp:function Ct(Et,Le={}){const ie=D.initializeApp(Et,Le);if((0,x.gR)(Ze,ie.name))return Ze[ie.name];const nt=new Qe(ie,Je);return Ze[ie.name]=nt,nt},app:Zt,registerVersion:D.registerVersion,setLogLevel:D.setLogLevel,onLog:D.onLog,apps:null,SDK_VERSION:D.SDK_VERSION,INTERNAL:{registerComponent:function Ot(Et){const Le=Et.name,ie=Le.replace("-compat","");if(D._registerComponent(Et)&&"PUBLIC"===Et.type){const nt=(vt=Zt())=>{if("function"!=typeof vt[ie])throw we.create("invalid-app-argument",{appName:Le});return vt[ie]()};void 0!==Et.serviceProps&&(0,x.zw)(nt,Et.serviceProps),Je[ie]=nt,Qe.prototype[ie]=function(...vt){return this._getService.bind(this,Le).apply(this,Et.multipleInstances?vt:[])}}return"PUBLIC"===Et.type?Je[ie]:null},removeApp:function Wt(Et){delete Ze[Et]},useAsService:function gt(Et,Le){return"serverAuth"===Le?null:Le},modularAPIs:D}};function Zt(Et){if(!(0,x.gR)(Ze,Et=Et||D._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Et});return Ze[Et]}return Je.default=Je,Object.defineProperty(Je,"apps",{get:function Tt(){return Object.keys(Ze).map(Et=>Ze[Et])}}),Zt.App=Qe,Je}(ce);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function Ze(Je){(0,x.zw)(Qe,Je)},createSubscribe:x.tD,ErrorFactory:x.FA,deepExtend:x.zw}),Qe}(),$=new he.Vy("@firebase/app-compat");try{const Qe=(0,x.mS)();if(void 0!==Qe.firebase){$.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Ze=Qe.firebase.SDK_VERSION;Ze&&Ze.indexOf("LITE")>=0&&$.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const et=z;!function Fe(Qe){(0,D.registerVersion)("@firebase/app-compat","0.2.43",Qe)}()},1631:(yt,U,G)=>{G.r(U),G.d(U,{FirebaseError:()=>he.g,SDK_VERSION:()=>wi,_DEFAULT_ENTRY_NAME:()=>de,_addComponent:()=>pe,_addOrOverwriteComponent:()=>ot,_apps:()=>se,_clearComponents:()=>Zr,_components:()=>ge,_getProvider:()=>Dn,_isFirebaseApp:()=>In,_isFirebaseServerApp:()=>pt,_registerComponent:()=>Mt,_removeServiceInstance:()=>It,_serverApps:()=>ae,deleteApp:()=>gs,getApp:()=>so,getApps:()=>Fa,initializeApp:()=>Nr,initializeServerApp:()=>ei,onLog:()=>la,registerVersion:()=>oo,setLogLevel:()=>Us});var x=G(467),Z=G(8779),D=G(5398),he=G(1401),ce=G(6749);class te{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(C=>{if(function we(We){const Ce=We.getComponent();return"VERSION"===Ce?.type}(C)){const E=C.getImmediate();return`${E.library}/${E.version}`}return null}).filter(C=>C).join(" ")}}const ee="@firebase/app",X="0.10.13",z=new D.Vy("@firebase/app"),$="@firebase/app-compat",ue="@firebase/analytics-compat",Ae="@firebase/analytics",Fe="@firebase/app-check-compat",et="@firebase/app-check",Qe="@firebase/auth",Ze="@firebase/auth-compat",Je="@firebase/database",Wt="@firebase/data-connect",Zt="@firebase/database-compat",Ct="@firebase/functions",Tt="@firebase/functions-compat",Ot="@firebase/installations",gt="@firebase/installations-compat",Et="@firebase/messaging",Le="@firebase/messaging-compat",ie="@firebase/performance",nt="@firebase/performance-compat",vt="@firebase/remote-config",jt="@firebase/remote-config-compat",Cn="@firebase/storage",Tn="@firebase/storage-compat",Ir="@firebase/firestore",An="@firebase/vertexai-preview",nr="@firebase/firestore-compat",dr="firebase",de="[DEFAULT]",_e={[ee]:"fire-core",[$]:"fire-core-compat",[Ae]:"fire-analytics",[ue]:"fire-analytics-compat",[et]:"fire-app-check",[Fe]:"fire-app-check-compat",[Qe]:"fire-auth",[Ze]:"fire-auth-compat",[Je]:"fire-rtdb",[Wt]:"fire-data-connect",[Zt]:"fire-rtdb-compat",[Ct]:"fire-fn",[Tt]:"fire-fn-compat",[Ot]:"fire-iid",[gt]:"fire-iid-compat",[Et]:"fire-fcm",[Le]:"fire-fcm-compat",[ie]:"fire-perf",[nt]:"fire-perf-compat",[vt]:"fire-rc",[jt]:"fire-rc-compat",[Cn]:"fire-gcs",[Tn]:"fire-gcs-compat",[Ir]:"fire-fst",[nr]:"fire-fst-compat",[An]:"fire-vertex","fire-js":"fire-js",[dr]:"fire-js-all"},se=new Map,ae=new Map,ge=new Map;function pe(We,Ce){try{We.container.addComponent(Ce)}catch(C){z.debug(`Component ${Ce.name} failed to register with FirebaseApp ${We.name}`,C)}}function ot(We,Ce){We.container.addOrOverwriteComponent(Ce)}function Mt(We){const Ce=We.name;if(ge.has(Ce))return z.debug(`There were multiple attempts to register component ${Ce}.`),!1;ge.set(Ce,We);for(const C of se.values())pe(C,We);for(const C of ae.values())pe(C,We);return!0}function Dn(We,Ce){const C=We.container.getProvider("heartbeat").getImmediate({optional:!0});return C&&C.triggerHeartbeat(),We.container.getProvider(Ce)}function It(We,Ce,C=de){Dn(We,Ce).clearInstance(C)}function In(We){return void 0!==We.options}function pt(We){return void 0!==We.settings}function Zr(){ge.clear()}const en=new he.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class St{constructor(Ce,C,E){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},C),this._name=C.name,this._automaticDataCollectionEnabled=C.automaticDataCollectionEnabled,this._container=E,this.container.addComponent(new Z.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}class Jr extends St{constructor(Ce,C,E,S){const F=void 0!==C.automaticDataCollectionEnabled&&C.automaticDataCollectionEnabled,j={name:E,automaticDataCollectionEnabled:F};super(void 0!==Ce.apiKey?Ce:Ce.options,j,S),this._serverConfig=Object.assign({automaticDataCollectionEnabled:F},C),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,C.releaseOnDeref=void 0,oo(ee,X,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ce){this.isDeleted||(this._refCount++,void 0!==Ce&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ce,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){gs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw en.create("server-app-deleted")}}const wi="10.14.1";function Nr(We,Ce={}){let C=We;"object"!=typeof Ce&&(Ce={name:Ce});const E=Object.assign({name:de,automaticDataCollectionEnabled:!1},Ce),S=E.name;if("string"!=typeof S||!S)throw en.create("bad-app-name",{appName:String(S)});if(C||(C=(0,he.T9)()),!C)throw en.create("no-options");const F=se.get(S);if(F){if((0,he.bD)(C,F.options)&&(0,he.bD)(E,F.config))return F;throw en.create("duplicate-app",{appName:S})}const j=new Z.h1(S);for(const ke of ge.values())j.addComponent(ke);const me=new St(C,E,j);return se.set(S,me),me}function ei(We,Ce){if((0,he.Bd)()&&!(0,he.p7)())throw en.create("invalid-server-app-environment");let C;void 0===Ce.automaticDataCollectionEnabled&&(Ce.automaticDataCollectionEnabled=!1),C=In(We)?We.options:We;const E=Object.assign(Object.assign({},Ce),C);if(void 0!==E.releaseOnDeref&&delete E.releaseOnDeref,void 0!==Ce.releaseOnDeref&&typeof FinalizationRegistry>"u")throw en.create("finalization-registry-not-supported",{});const F=""+(mt=JSON.stringify(E),[...mt].reduce((Ve,_n)=>Math.imul(31,Ve)+_n.charCodeAt(0)|0,0)),j=ae.get(F);var mt;if(j)return j.incRefCount(Ce.releaseOnDeref),j;const me=new Z.h1(F);for(const mt of ge.values())me.addComponent(mt);const ke=new Jr(C,Ce,F,me);return ae.set(F,ke),ke}function so(We=de){const Ce=se.get(We);if(!Ce&&We===de&&(0,he.T9)())return Nr();if(!Ce)throw en.create("no-app",{appName:We});return Ce}function Fa(){return Array.from(se.values())}function gs(We){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,x.A)(function*(We){let Ce=!1;const C=We.name;se.has(C)?(Ce=!0,se.delete(C)):ae.has(C)&&We.decRefCount()<=0&&(ae.delete(C),Ce=!0),Ce&&(yield Promise.all(We.container.getProviders().map(E=>E.delete())),We.isDeleted=!0)})).apply(this,arguments)}function oo(We,Ce,C){var E;let S=null!==(E=_e[We])&&void 0!==E?E:We;C&&(S+=`-${C}`);const F=S.match(/\s|\//),j=Ce.match(/\s|\//);if(F||j){const me=[`Unable to register library "${S}" with version "${Ce}":`];return F&&me.push(`library name "${S}" contains illegal characters (whitespace or "/")`),F&&j&&me.push("and"),j&&me.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void z.warn(me.join(" "))}Mt(new Z.uA(`${S}-version`,()=>({library:S,version:Ce}),"VERSION"))}function la(We,Ce){if(null!==We&&"function"!=typeof We)throw en.create("invalid-log-argument");(0,D.Ey)(We,Ce)}function Us(We){(0,D.He)(We)}const ci="firebase-heartbeat-database",ca=1,js="firebase-heartbeat-store";let os=null;function ko(){return os||(os=(0,ce.P2)(ci,ca,{upgrade:(We,Ce)=>{if(0===Ce)try{We.createObjectStore(js)}catch(C){console.warn(C)}}}).catch(We=>{throw en.create("idb-open",{originalErrorMessage:We.message})})),os}function Nn(){return(Nn=(0,x.A)(function*(We){try{const C=(yield ko()).transaction(js),E=yield C.objectStore(js).get(yl(We));return yield C.done,E}catch(Ce){if(Ce instanceof he.g)z.warn(Ce.message);else{const C=en.create("idb-get",{originalErrorMessage:Ce?.message});z.warn(C.message)}}})).apply(this,arguments)}function Hi(We,Ce){return ys.apply(this,arguments)}function ys(){return(ys=(0,x.A)(function*(We,Ce){try{const E=(yield ko()).transaction(js,"readwrite");yield E.objectStore(js).put(Ce,yl(We)),yield E.done}catch(C){if(C instanceof he.g)z.warn(C.message);else{const E=en.create("idb-set",{originalErrorMessage:C?.message});z.warn(E.message)}}})).apply(this,arguments)}function yl(We){return`${We.name}!${We.options.appId}`}class ao{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const C=this.container.getProvider("app").getImmediate();this._storage=new ua(C),this._heartbeatsCachePromise=this._storage.read().then(E=>(this._heartbeatsCache=E,E))}triggerHeartbeat(){var Ce=this;return(0,x.A)(function*(){var C,E;try{const F=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),j=Ri();return null==(null===(C=Ce._heartbeatsCache)||void 0===C?void 0:C.heartbeats)&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise,null==(null===(E=Ce._heartbeatsCache)||void 0===E?void 0:E.heartbeats))||Ce._heartbeatsCache.lastSentHeartbeatDate===j||Ce._heartbeatsCache.heartbeats.some(me=>me.date===j)?void 0:(Ce._heartbeatsCache.heartbeats.push({date:j,agent:F}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(me=>{const ke=new Date(me.date).valueOf();return Date.now()-ke<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache))}catch(S){z.warn(S)}})()}getHeartbeatsHeader(){var Ce=this;return(0,x.A)(function*(){var C;try{if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null==(null===(C=Ce._heartbeatsCache)||void 0===C?void 0:C.heartbeats)||0===Ce._heartbeatsCache.heartbeats.length)return"";const E=Ri(),{heartbeatsToSend:S,unsentEntries:F}=function La(We,Ce=1024){const C=[];let E=We.slice();for(const S of We){const F=C.find(j=>j.agent===S.agent);if(F){if(F.dates.push(S.date),Vt(C)>Ce){F.dates.pop();break}}else if(C.push({agent:S.agent,dates:[S.date]}),Vt(C)>Ce){C.pop();break}E=E.slice(1)}return{heartbeatsToSend:C,unsentEntries:E}}(Ce._heartbeatsCache.heartbeats),j=(0,he.Uj)(JSON.stringify({version:2,heartbeats:S}));return Ce._heartbeatsCache.lastSentHeartbeatDate=E,F.length>0?(Ce._heartbeatsCache.heartbeats=F,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),j}catch(E){return z.warn(E),""}})()}}function Ri(){return(new Date).toISOString().substring(0,10)}class ua{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,x.A)(function*(){return!!(0,he.zW)()&&(0,he.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,x.A)(function*(){if(yield Ce._canUseIndexedDBPromise){const E=yield function _s(We){return Nn.apply(this,arguments)}(Ce.app);return E?.heartbeats?E:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ce){var C=this;return(0,x.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return Hi(C.app,{lastSentHeartbeatDate:null!==(E=Ce.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var C=this;return(0,x.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return Hi(C.app,{lastSentHeartbeatDate:null!==(E=Ce.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:[...F.heartbeats,...Ce.heartbeats]})}})()}}function Vt(We){return(0,he.Uj)(JSON.stringify({version:2,heartbeats:We})).length}!function lc(We){Mt(new Z.uA("platform-logger",Ce=>new te(Ce),"PRIVATE")),Mt(new Z.uA("heartbeat",Ce=>new ao(Ce),"PRIVATE")),oo(ee,X,We),oo(ee,X,"esm2017"),oo("fire-js","")}("")},8779:(yt,U,G)=>{G.d(U,{Kq:()=>ce,h1:()=>ee,uA:()=>D});var x=G(467),Z=G(1401);class D{constructor(z,$,ue){this.name=z,this.instanceFactory=$,this.type=ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const he="[DEFAULT]";class ce{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const ue=new Z.cY;if(this.instancesDeferred.set($,ue),this.isInitialized($)||this.shouldAutoInitialize())try{const Ae=this.getOrInitializeService({instanceIdentifier:$});Ae&&ue.resolve(Ae)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const ue=this.normalizeInstanceIdentifier(z?.identifier),Ae=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(ue)&&!this.shouldAutoInitialize()){if(Ae)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ue})}catch(Fe){if(Ae)return null;throw Fe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function we(X){return"EAGER"===X.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[$,ue]of this.instancesDeferred.entries()){const Ae=this.normalizeInstanceIdentifier($);try{const Fe=this.getOrInitializeService({instanceIdentifier:Ae});ue.resolve(Fe)}catch{}}}}clearInstance(z=he){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,x.A)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(ue=>"INTERNAL"in ue).map(ue=>ue.INTERNAL.delete()),...$.filter(ue=>"_delete"in ue).map(ue=>ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=he){return this.instances.has(z)}getOptions(z=he){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,ue=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ue))throw Error(`${this.name}(${ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ae=this.getOrInitializeService({instanceIdentifier:ue,options:$});for(const[Fe,et]of this.instancesDeferred.entries())ue===this.normalizeInstanceIdentifier(Fe)&&et.resolve(Ae);return Ae}onInit(z,$){var ue;const Ae=this.normalizeInstanceIdentifier($),Fe=null!==(ue=this.onInitCallbacks.get(Ae))&&void 0!==ue?ue:new Set;Fe.add(z),this.onInitCallbacks.set(Ae,Fe);const et=this.instances.get(Ae);return et&&z(et,Ae),()=>{Fe.delete(z)}}invokeOnInitCallbacks(z,$){const ue=this.onInitCallbacks.get($);if(ue)for(const Ae of ue)try{Ae(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let ue=this.instances.get(z);if(!ue&&this.component&&(ue=this.component.instanceFactory(this.container,{instanceIdentifier:(X=z,X===he?void 0:X),options:$}),this.instances.set(z,ue),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(ue,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ue)}catch{}var X;return ue||null}normalizeInstanceIdentifier(z=he){return this.component?this.component.multipleInstances?z:he:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new ce(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},5398:(yt,U,G)=>{G.d(U,{$b:()=>Z,Ey:()=>X,He:()=>ee,Vy:()=>we});const x=[];var Z=function(z){return z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",z}(Z||{});const D={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},he=Z.INFO,ce={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},te=(z,$,...ue)=>{if($<z.logLevel)return;const Ae=(new Date).toISOString(),Fe=ce[$];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Fe](`[${Ae}]  ${z.name}:`,...ue)};class we{constructor($){this.name=$,this._logLevel=he,this._logHandler=te,this._userLogHandler=null,x.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Z))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?D[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...$),this._logHandler(this,Z.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...$),this._logHandler(this,Z.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...$),this._logHandler(this,Z.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...$),this._logHandler(this,Z.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...$),this._logHandler(this,Z.ERROR,...$)}}function ee(z){x.forEach($=>{$.setLogLevel(z)})}function X(z,$){for(const ue of x){let Ae=null;$&&$.level&&(Ae=D[$.level]),ue.userLogHandler=null===z?null:(Fe,et,...Qe)=>{const Ze=Qe.map(Je=>{if(null==Je)return null;if("string"==typeof Je)return Je;if("number"==typeof Je||"boolean"==typeof Je)return Je.toString();if(Je instanceof Error)return Je.message;try{return JSON.stringify(Je)}catch{return null}}).filter(Je=>Je).join(" ");et>=(Ae??Fe.logLevel)&&z({level:Z[et].toLowerCase(),message:Ze,args:Qe,type:Fe.name})}}}},5046:(yt,U,G)=>{var x=G(467),Z=G(9574),D=G(443),he=G(1401),we=(G(1631),G(5398),G(8779));function ee(){return window}function $(){return $=(0,x.A)(function*(C,E,S){var F;const{BuildInfo:j}=ee();(0,D.au)(E.sessionId,"AuthEvent did not contain a session ID");const me=yield function Je(C){return Wt.apply(this,arguments)}(E.sessionId),ke={};return(0,D.av)()?ke.ibi=j.packageName:(0,D.aw)()?ke.apn=j.packageName:(0,D.ax)(C,"operation-not-supported-in-this-environment"),j.displayName&&(ke.appDisplayName=j.displayName),ke.sessionId=me,(0,D.ay)(C,S,E.type,void 0,null!==(F=E.eventId)&&void 0!==F?F:void 0,ke)}),$.apply(this,arguments)}function Ae(){return(Ae=(0,x.A)(function*(C){const{BuildInfo:E}=ee(),S={};(0,D.av)()?S.iosBundleId=E.packageName:(0,D.aw)()?S.androidPackageName=E.packageName:(0,D.ax)(C,"operation-not-supported-in-this-environment"),yield(0,D.az)(C,S)})).apply(this,arguments)}function Qe(){return(Qe=(0,x.A)(function*(C,E,S){const{cordova:F}=ee();let j=()=>{};try{yield new Promise((me,ke)=>{let mt=null;function Ve(){var K;me();const Qn=null===(K=F.plugins.browsertab)||void 0===K?void 0:K.close;"function"==typeof Qn&&Qn(),"function"==typeof S?.close&&S.close()}function _n(){mt||(mt=window.setTimeout(()=>{ke((0,D.aB)(C,"redirect-cancelled-by-user"))},2e3))}function wr(){"visible"===document?.visibilityState&&_n()}E.addPassiveListener(Ve),document.addEventListener("resume",_n,!1),(0,D.aw)()&&document.addEventListener("visibilitychange",wr,!1),j=()=>{E.removePassiveListener(Ve),document.removeEventListener("resume",_n,!1),document.removeEventListener("visibilitychange",wr,!1),mt&&window.clearTimeout(mt)}})}finally{j()}})).apply(this,arguments)}function Wt(){return(Wt=(0,x.A)(function*(C){const E=function Zt(C){if((0,D.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const E=new ArrayBuffer(C.length),S=new Uint8Array(E);for(let F=0;F<C.length;F++)S[F]=C.charCodeAt(F);return S}(C),S=yield crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(S)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Tt extends D.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(E=>{this.resolveInitialized=E})}addPassiveListener(E){this.passiveListeners.add(E)}removePassiveListener(E){this.passiveListeners.delete(E)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(E){return this.resolveInitialized(),this.passiveListeners.forEach(S=>S(E)),super.onEvent(E)}initialized(){var E=this;return(0,x.A)(function*(){yield E.initPromise})()}}function Et(C){return Le.apply(this,arguments)}function Le(){return(Le=(0,x.A)(function*(C){const E=yield vt()._get(jt(C));return E&&(yield vt()._remove(jt(C))),E})).apply(this,arguments)}function nt(){const C=[];for(let S=0;S<20;S++){const F=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(F))}return C.join("")}function vt(){return(0,D.aE)(D.b)}function jt(C){return(0,D.aF)("authEvent",C.config.apiKey,C.name)}function Ir(C){if(!C?.includes("?"))return{};const[E,...S]=C.split("?");return(0,he.I9)(S.join("?"))}const dr=class nr{constructor(){this._redirectPersistence=D.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=D.aG,this._overrideRedirectResult=D.aH}_initialize(E){var S=this;return(0,x.A)(function*(){const F=E._key();let j=S.eventManagers.get(F);return j||(j=new Tt(E),S.eventManagers.set(F,j),S.attachCallbackListeners(E,j)),j})()}_openPopup(E){(0,D.ax)(E,"operation-not-supported-in-this-environment")}_openRedirect(E,S,F,j){var me=this;return(0,x.A)(function*(){!function Ze(C){var E,S,F,j,me,ke,mt,Ve,_n,wr;const K=ee();(0,D.aC)("function"==typeof(null===(E=K?.universalLinks)||void 0===E?void 0:E.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,D.aC)(typeof(null===(S=K?.BuildInfo)||void 0===S?void 0:S.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,D.aC)("function"==typeof(null===(me=null===(j=null===(F=K?.cordova)||void 0===F?void 0:F.plugins)||void 0===j?void 0:j.browsertab)||void 0===me?void 0:me.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,D.aC)("function"==typeof(null===(Ve=null===(mt=null===(ke=K?.cordova)||void 0===ke?void 0:ke.plugins)||void 0===mt?void 0:mt.browsertab)||void 0===Ve?void 0:Ve.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,D.aC)("function"==typeof(null===(wr=null===(_n=K?.cordova)||void 0===_n?void 0:_n.InAppBrowser)||void 0===wr?void 0:wr.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(E);const ke=yield me._initialize(E);yield ke.initialized(),ke.resetRedirect(),(0,D.aI)(),yield me._originValidation(E);const mt=function Ot(C,E,S=null){return{type:E,eventId:S,urlResponse:null,sessionId:nt(),postBody:null,tenantId:C.tenantId,error:(0,D.aB)(C,"no-auth-event")}}(E,F,j);yield function gt(C,E){return vt()._set(jt(C),E)}(E,mt);const Ve=yield function z(C,E,S){return $.apply(this,arguments)}(E,mt,S),_n=yield function Fe(C){const{cordova:E}=ee();return new Promise(S=>{E.plugins.browsertab.isAvailable(F=>{let j=null;F?E.plugins.browsertab.openUrl(C):j=E.InAppBrowser.open(C,(0,D.aA)()?"_blank":"_system","location=yes"),S(j)})})}(Ve);return function et(C,E,S){return Qe.apply(this,arguments)}(E,ke,_n)})()}_isIframeWebStorageSupported(E,S){throw new Error("Method not implemented.")}_originValidation(E){const S=E._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function ue(C){return Ae.apply(this,arguments)}(E)),this.originValidationPromises[S]}attachCallbackListeners(E,S){const{universalLinks:F,handleOpenURL:j,BuildInfo:me}=ee(),ke=setTimeout((0,x.A)(function*(){yield Et(E),S.onEvent($r())}),500),mt=function(){var wr=(0,x.A)(function*(K){clearTimeout(ke);const Qn=yield Et(E);let zs=null;Qn&&K?.url&&(zs=function ie(C,E){var S,F;const j=function Tn(C){const E=Ir(C),S=E.link?decodeURIComponent(E.link):void 0,F=Ir(S).link,j=E.deep_link_id?decodeURIComponent(E.deep_link_id):void 0;return Ir(j).link||j||F||S||C}(E);if(j.includes("/__/auth/callback")){const me=Ir(j),ke=me.firebaseError?function Cn(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(me.firebaseError)):null,mt=null===(F=null===(S=ke?.code)||void 0===S?void 0:S.split("auth/"))||void 0===F?void 0:F[1],Ve=mt?(0,D.aB)(mt):null;return Ve?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:j,postBody:null}}return null}(Qn,K.url)),S.onEvent(zs||$r())});return function(Qn){return wr.apply(this,arguments)}}();typeof F<"u"&&"function"==typeof F.subscribe&&F.subscribe(null,mt);const Ve=j,_n=`${me.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var wr=(0,x.A)(function*(K){if(K.toLowerCase().startsWith(_n)&&mt({url:K}),"function"==typeof Ve)try{Ve(K)}catch(Qn){console.error(Qn)}});return function(K){return wr.apply(this,arguments)}}()}};function $r(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,D.aB)("no-auth-event")}}function ge(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function ot(C=(0,he.ZQ)()){return!("file:"!==ge()&&"ionic:"!==ge()&&"capacitor:"!==ge()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function pt(){try{const C=self.localStorage,E=D.aN();if(C)return C.setItem(E,"1"),C.removeItem(E),!function In(C=(0,he.ZQ)()){return function Dn(){return(0,he.lT)()&&11===document?.documentMode}()||function It(C=(0,he.ZQ)()){return/Edge\/\d+/.test(C)}(C)}()||(0,he.zW)()}catch{return Zr()&&(0,he.zW)()}return!1}function Zr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jt(){return(function pe(){return"http:"===ge()||"https:"===ge()}()||(0,he.sr)()||ot())&&!function Mt(){return(0,he.lV)()||(0,he.Ll)()}()&&pt()&&!Zr()}function en(){return ot()&&typeof document<"u"}function Jr(){return(Jr=(0,x.A)(function*(){return!!en()&&new Promise(C=>{const E=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(E),C(!0)})})})).apply(this,arguments)}const Nr={LOCAL:"local",NONE:"none",SESSION:"session"},ei=D.aC,so="persistence";function gs(C){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,x.A)(function*(C){yield C._initializationPromise;const E=la(),S=D.aF(so,C.config.apiKey,C.name);E&&E.setItem(S,C._getPersistence())})).apply(this,arguments)}function la(){var C;try{return(null===(C=function wi(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const Us=D.aC;class ci{constructor(){this.browserResolver=D.aE(D.k),this.cordovaResolver=D.aE(dr),this.underlyingResolver=null,this._redirectPersistence=D.a,this._completeRedirectFn=D.aG,this._overrideRedirectResult=D.aH}_initialize(E){var S=this;return(0,x.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._initialize(E)})()}_openPopup(E,S,F,j){var me=this;return(0,x.A)(function*(){return yield me.selectUnderlyingResolver(),me.assertedUnderlyingResolver._openPopup(E,S,F,j)})()}_openRedirect(E,S,F,j){var me=this;return(0,x.A)(function*(){return yield me.selectUnderlyingResolver(),me.assertedUnderlyingResolver._openRedirect(E,S,F,j)})()}_isIframeWebStorageSupported(E,S){this.assertedUnderlyingResolver._isIframeWebStorageSupported(E,S)}_originValidation(E){return this.assertedUnderlyingResolver._originValidation(E)}get _shouldInitProactively(){return en()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Us(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var E=this;return(0,x.A)(function*(){if(E.underlyingResolver)return;const S=yield function St(){return Jr.apply(this,arguments)}();E.underlyingResolver=S?E.cordovaResolver:E.browserResolver})()}}function ca(C){return C.unwrap()}function os(C){return _s(C)}function _s(C){const{_tokenResponse:E}=C instanceof he.g?C.customData:C;if(!E)return null;if(!(C instanceof he.g)&&"temporaryProof"in E&&"phoneNumber"in E)return D.P.credentialFromResult(C);const S=E.providerId;if(!S||S===D.p.PASSWORD)return null;let F;switch(S){case D.p.GOOGLE:F=D.X;break;case D.p.FACEBOOK:F=D.W;break;case D.p.GITHUB:F=D.Y;break;case D.p.TWITTER:F=D.$;break;default:const{oauthIdToken:j,oauthAccessToken:me,oauthTokenSecret:ke,pendingToken:mt,nonce:Ve}=E;return me||ke||j||mt?mt?S.startsWith("saml.")?D.aQ._create(S,mt):D.N._fromParams({providerId:S,signInMethod:S,pendingToken:mt,idToken:j,accessToken:me}):new D.Z(S).credential({idToken:j,accessToken:me,rawNonce:Ve}):null}return C instanceof he.g?F.credentialFromError(C):F.credentialFromResult(C)}function Nn(C,E){return E.catch(S=>{throw S instanceof he.g&&function ko(C,E){var S;const F=null===(S=E.customData)||void 0===S?void 0:S._tokenResponse;if("auth/multi-factor-auth-required"===E?.code)E.resolver=new yl(C,D.as(C,E));else if(F){const j=_s(E),me=E;j&&(me.credential=j,me.tenantId=F.tenantId||void 0,me.email=F.email||void 0,me.phoneNumber=F.phoneNumber||void 0)}}(C,S),S}).then(S=>{const j=S.user;return{operationType:S.operationType,credential:os(S),additionalUserInfo:D.aq(S),user:ui.getOrCreate(j)}})}function Hi(C,E){return ys.apply(this,arguments)}function ys(){return(ys=(0,x.A)(function*(C,E){const S=yield E;return{verificationId:S.verificationId,confirm:F=>Nn(C,S.confirm(F))}})).apply(this,arguments)}class yl{constructor(E,S){this.resolver=S,this.auth=function js(C){return C.wrapped()}(E)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(E){return Nn(ca(this.auth),this.resolver.resolveSignIn(E))}}class ui{constructor(E){this._delegate=E,this.multiFactor=D.at(E)}static getOrCreate(E){return ui.USER_MAP.has(E)||ui.USER_MAP.set(E,new ui(E)),ui.USER_MAP.get(E)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(E){return this._delegate.getIdTokenResult(E)}getIdToken(E){return this._delegate.getIdToken(E)}linkAndRetrieveDataWithCredential(E){return this.linkWithCredential(E)}linkWithCredential(E){var S=this;return(0,x.A)(function*(){return Nn(S.auth,D.a2(S._delegate,E))})()}linkWithPhoneNumber(E,S){var F=this;return(0,x.A)(function*(){return Hi(F.auth,D.l(F._delegate,E,S))})()}linkWithPopup(E){var S=this;return(0,x.A)(function*(){return Nn(S.auth,D.d(S._delegate,E,ci))})()}linkWithRedirect(E){var S=this;return(0,x.A)(function*(){return yield gs(D.aJ(S.auth)),D.g(S._delegate,E,ci)})()}reauthenticateAndRetrieveDataWithCredential(E){return this.reauthenticateWithCredential(E)}reauthenticateWithCredential(E){var S=this;return(0,x.A)(function*(){return Nn(S.auth,D.a3(S._delegate,E))})()}reauthenticateWithPhoneNumber(E,S){return Hi(this.auth,D.r(this._delegate,E,S))}reauthenticateWithPopup(E){return Nn(this.auth,D.e(this._delegate,E,ci))}reauthenticateWithRedirect(E){var S=this;return(0,x.A)(function*(){return yield gs(D.aJ(S.auth)),D.h(S._delegate,E,ci)})()}sendEmailVerification(E){return D.ag(this._delegate,E)}unlink(E){var S=this;return(0,x.A)(function*(){return yield D.ap(S._delegate,E),S})()}updateEmail(E){return D.al(this._delegate,E)}updatePassword(E){return D.am(this._delegate,E)}updatePhoneNumber(E){return D.u(this._delegate,E)}updateProfile(E){return D.ak(this._delegate,E)}verifyBeforeUpdateEmail(E,S){return D.ah(this._delegate,E,S)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ui.USER_MAP=new WeakMap;const vs=D.aC;let ao=(()=>{class C{constructor(S,F){if(this.app=S,F.isInitialized())return this._delegate=F.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=S.options;vs(j,"invalid-api-key",{appName:S.name}),vs(j,"invalid-api-key",{appName:S.name});const me=typeof window<"u"?ci:void 0;this._delegate=F.initialize({options:{persistence:La(j,S.name),popupRedirectResolver:me}}),this._delegate._updateErrorMap(D.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ui.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(S){this._delegate.languageCode=S}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(S){this._delegate.tenantId=S}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(S,F){D.K(this._delegate,S,F)}applyActionCode(S){return D.a7(this._delegate,S)}checkActionCode(S){return D.a8(this._delegate,S)}confirmPasswordReset(S,F){return D.a6(this._delegate,S,F)}createUserWithEmailAndPassword(S,F){var j=this;return(0,x.A)(function*(){return Nn(j._delegate,D.aa(j._delegate,S,F))})()}fetchProvidersForEmail(S){return this.fetchSignInMethodsForEmail(S)}fetchSignInMethodsForEmail(S){return D.af(this._delegate,S)}isSignInWithEmailLink(S){return D.ad(this._delegate,S)}getRedirectResult(){var S=this;return(0,x.A)(function*(){vs(Jt(),S._delegate,"operation-not-supported-in-this-environment");const F=yield D.j(S._delegate,ci);return F?Nn(S._delegate,Promise.resolve(F)):{credential:null,user:null}})()}addFrameworkForLogging(S){!function de(C,E){(0,D.aJ)(C)._logFramework(E)}(this._delegate,S)}onAuthStateChanged(S,F,j){const{next:me,error:ke,complete:mt}=Ri(S,F,j);return this._delegate.onAuthStateChanged(me,ke,mt)}onIdTokenChanged(S,F,j){const{next:me,error:ke,complete:mt}=Ri(S,F,j);return this._delegate.onIdTokenChanged(me,ke,mt)}sendSignInLinkToEmail(S,F){return D.ac(this._delegate,S,F)}sendPasswordResetEmail(S,F){return D.a5(this._delegate,S,F||void 0)}setPersistence(S){var F=this;return(0,x.A)(function*(){let j;switch(function Fa(C,E){ei(Object.values(Nr).includes(E),C,"invalid-persistence-type"),(0,he.lV)()?ei(E!==Nr.SESSION,C,"unsupported-persistence-type"):(0,he.Ll)()?ei(E===Nr.NONE,C,"unsupported-persistence-type"):Zr()?ei(E===Nr.NONE||E===Nr.LOCAL&&(0,he.zW)(),C,"unsupported-persistence-type"):ei(E===Nr.NONE||pt(),C,"unsupported-persistence-type")}(F._delegate,S),S){case Nr.SESSION:j=D.a;break;case Nr.LOCAL:j=(yield D.aE(D.i)._isAvailable())?D.i:D.b;break;case Nr.NONE:j=D.U;break;default:return D.ax("argument-error",{appName:F._delegate.name})}return F._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(S){return this.signInWithCredential(S)}signInAnonymously(){return Nn(this._delegate,D.a0(this._delegate))}signInWithCredential(S){return Nn(this._delegate,D.a1(this._delegate,S))}signInWithCustomToken(S){return Nn(this._delegate,D.a4(this._delegate,S))}signInWithEmailAndPassword(S,F){return Nn(this._delegate,D.ab(this._delegate,S,F))}signInWithEmailLink(S,F){return Nn(this._delegate,D.ae(this._delegate,S,F))}signInWithPhoneNumber(S,F){return Hi(this._delegate,D.s(this._delegate,S,F))}signInWithPopup(S){var F=this;return(0,x.A)(function*(){return vs(Jt(),F._delegate,"operation-not-supported-in-this-environment"),Nn(F._delegate,D.c(F._delegate,S,ci))})()}signInWithRedirect(S){var F=this;return(0,x.A)(function*(){return vs(Jt(),F._delegate,"operation-not-supported-in-this-environment"),yield gs(F._delegate),D.f(F._delegate,S,ci)})()}updateCurrentUser(S){return this._delegate.updateCurrentUser(S)}verifyPasswordResetCode(S){return D.a9(this._delegate,S)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Nr,C})();function Ri(C,E,S){let F=C;"function"!=typeof C&&({next:F,error:E,complete:S}=C);const j=F;return{next:ke=>j(ke&&ui.getOrCreate(ke)),error:E,complete:S}}function La(C,E){const S=function oo(C,E){const S=la();if(!S)return[];const F=D.aF(so,C,E);switch(S.getItem(F)){case Nr.NONE:return[D.U];case Nr.LOCAL:return[D.i,D.a];case Nr.SESSION:return[D.a];default:return[]}}(C,E);if(typeof self<"u"&&!S.includes(D.i)&&S.push(D.i),typeof window<"u")for(const F of[D.b,D.a])S.includes(F)||S.push(F);return S.includes(D.U)||S.push(D.U),S}class ua{constructor(){this.providerId="phone",this._delegate=new D.P(ca(Z.A.auth()))}static credential(E,S){return D.P.credential(E,S)}verifyPhoneNumber(E,S){return this._delegate.verifyPhoneNumber(E,S)}unwrap(){return this._delegate}}ua.PHONE_SIGN_IN_METHOD=D.P.PHONE_SIGN_IN_METHOD,ua.PROVIDER_ID=D.P.PROVIDER_ID;const Vt=D.aC;class lc{constructor(E,S,F=Z.A.app()){var j;Vt(null===(j=F.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:F.name}),this._delegate=new D.R(F.auth(),E,S),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ce(C){C.INTERNAL.registerComponent(new we.uA("auth-compat",E=>{const S=E.getProvider("app-compat").getImmediate(),F=E.getProvider("auth");return new ao(S,F)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:D.A.EMAIL_SIGNIN,PASSWORD_RESET:D.A.PASSWORD_RESET,RECOVER_EMAIL:D.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:D.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:D.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:D.A.VERIFY_EMAIL}},EmailAuthProvider:D.V,FacebookAuthProvider:D.W,GithubAuthProvider:D.Y,GoogleAuthProvider:D.X,OAuthProvider:D.Z,SAMLAuthProvider:D._,PhoneAuthProvider:ua,PhoneMultiFactorGenerator:D.m,RecaptchaVerifier:lc,TwitterAuthProvider:D.$,Auth:ao,AuthCredential:D.L,Error:he.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.14")}(Z.A)},6749:(yt,U,G)=>{G.d(U,{P2:()=>Zt});var x=G(467);const Z=(Le,ie)=>ie.some(nt=>Le instanceof nt);let D,he;const we=new WeakMap,ee=new WeakMap,X=new WeakMap,z=new WeakMap,$=new WeakMap;let Fe={get(Le,ie,nt){if(Le instanceof IDBTransaction){if("done"===ie)return ee.get(Le);if("objectStoreNames"===ie)return Le.objectStoreNames||X.get(Le);if("store"===ie)return nt.objectStoreNames[1]?void 0:nt.objectStore(nt.objectStoreNames[0])}return Je(Le[ie])},set:(Le,ie,nt)=>(Le[ie]=nt,!0),has:(Le,ie)=>Le instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in Le};function Ze(Le){return"function"==typeof Le?function Qe(Le){return Le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Le)?function(...ie){return Le.apply(Wt(this),ie),Je(we.get(this))}:function(...ie){return Je(Le.apply(Wt(this),ie))}:function(ie,...nt){const vt=Le.call(Wt(this),ie,...nt);return X.set(vt,ie.sort?ie.sort():[ie]),Je(vt)}}(Le):(Le instanceof IDBTransaction&&function Ae(Le){if(ee.has(Le))return;const ie=new Promise((nt,vt)=>{const jt=()=>{Le.removeEventListener("complete",Cn),Le.removeEventListener("error",Tn),Le.removeEventListener("abort",Tn)},Cn=()=>{nt(),jt()},Tn=()=>{vt(Le.error||new DOMException("AbortError","AbortError")),jt()};Le.addEventListener("complete",Cn),Le.addEventListener("error",Tn),Le.addEventListener("abort",Tn)});ee.set(Le,ie)}(Le),Z(Le,function ce(){return D||(D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Le,Fe):Le)}function Je(Le){if(Le instanceof IDBRequest)return function ue(Le){const ie=new Promise((nt,vt)=>{const jt=()=>{Le.removeEventListener("success",Cn),Le.removeEventListener("error",Tn)},Cn=()=>{nt(Je(Le.result)),jt()},Tn=()=>{vt(Le.error),jt()};Le.addEventListener("success",Cn),Le.addEventListener("error",Tn)});return ie.then(nt=>{nt instanceof IDBCursor&&we.set(nt,Le)}).catch(()=>{}),$.set(ie,Le),ie}(Le);if(z.has(Le))return z.get(Le);const ie=Ze(Le);return ie!==Le&&(z.set(Le,ie),$.set(ie,Le)),ie}const Wt=Le=>$.get(Le);function Zt(Le,ie,{blocked:nt,upgrade:vt,blocking:jt,terminated:Cn}={}){const Tn=indexedDB.open(Le,ie),Ir=Je(Tn);return vt&&Tn.addEventListener("upgradeneeded",An=>{vt(Je(Tn.result),An.oldVersion,An.newVersion,Je(Tn.transaction),An)}),nt&&Tn.addEventListener("blocked",An=>nt(An.oldVersion,An.newVersion,An)),Ir.then(An=>{Cn&&An.addEventListener("close",()=>Cn()),jt&&An.addEventListener("versionchange",nr=>jt(nr.oldVersion,nr.newVersion,nr))}).catch(()=>{}),Ir}const Tt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],gt=new Map;function Et(Le,ie){if(!(Le instanceof IDBDatabase)||ie in Le||"string"!=typeof ie)return;if(gt.get(ie))return gt.get(ie);const nt=ie.replace(/FromIndex$/,""),vt=ie!==nt,jt=Ot.includes(nt);if(!(nt in(vt?IDBIndex:IDBObjectStore).prototype)||!jt&&!Tt.includes(nt))return;const Cn=function(){var Tn=(0,x.A)(function*(Ir,...An){const nr=this.transaction(Ir,jt?"readwrite":"readonly");let dr=nr.store;return vt&&(dr=dr.index(An.shift())),(yield Promise.all([dr[nt](...An),jt&&nr.done]))[0]});return function(An){return Tn.apply(this,arguments)}}();return gt.set(ie,Cn),Cn}!function et(Le){Fe=Le(Fe)}(Le=>({...Le,get:(ie,nt,vt)=>Et(ie,nt)||Le.get(ie,nt,vt),has:(ie,nt)=>!!Et(ie,nt)||Le.has(ie,nt)}))},467:(yt,U,G)=>{function x(D,he,ce,te,we,ee,X){try{var z=D[ee](X),$=z.value}catch(ue){return void ce(ue)}z.done?he($):Promise.resolve($).then(te,we)}function Z(D){return function(){var he=this,ce=arguments;return new Promise(function(te,we){var ee=D.apply(he,ce);function X($){x(ee,te,we,X,z,"next",$)}function z($){x(ee,te,we,X,z,"throw",$)}X(void 0)})}}G.d(U,{A:()=>Z})},1635:(yt,U,G)=>{function he(de,_e){var se={};for(var ae in de)Object.prototype.hasOwnProperty.call(de,ae)&&_e.indexOf(ae)<0&&(se[ae]=de[ae]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(ae=Object.getOwnPropertySymbols(de);ge<ae.length;ge++)_e.indexOf(ae[ge])<0&&Object.prototype.propertyIsEnumerable.call(de,ae[ge])&&(se[ae[ge]]=de[ae[ge]])}return se}function ue(de,_e,se,ae){return new(se||(se=Promise))(function(pe,ot){function Mt(In){try{It(ae.next(In))}catch(pt){ot(pt)}}function Dn(In){try{It(ae.throw(In))}catch(pt){ot(pt)}}function It(In){In.done?pe(In.value):function ge(pe){return pe instanceof se?pe:new se(function(ot){ot(pe)})}(In.value).then(Mt,Dn)}It((ae=ae.apply(de,_e||[])).next())})}function Ct(de){return this instanceof Ct?(this.v=de,this):new Ct(de)}function Tt(de,_e,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ae=se.apply(de,_e||[]),pe=[];return ge=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Mt("next"),Mt("throw"),Mt("return",function ot(Jt){return function(en){return Promise.resolve(en).then(Jt,pt)}}),ge[Symbol.asyncIterator]=function(){return this},ge;function Mt(Jt,en){ae[Jt]&&(ge[Jt]=function(St){return new Promise(function(Jr,wi){pe.push([Jt,St,Jr,wi])>1||Dn(Jt,St)})},en&&(ge[Jt]=en(ge[Jt])))}function Dn(Jt,en){try{!function It(Jt){Jt.value instanceof Ct?Promise.resolve(Jt.value.v).then(In,pt):Zr(pe[0][2],Jt)}(ae[Jt](en))}catch(St){Zr(pe[0][3],St)}}function In(Jt){Dn("next",Jt)}function pt(Jt){Dn("throw",Jt)}function Zr(Jt,en){Jt(en),pe.shift(),pe.length&&Dn(pe[0][0],pe[0][1])}}function gt(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,_e=de[Symbol.asyncIterator];return _e?_e.call(de):(de=function Qe(de){var _e="function"==typeof Symbol&&Symbol.iterator,se=_e&&de[_e],ae=0;if(se)return se.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&ae>=de.length&&(de=void 0),{value:de&&de[ae++],done:!de}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),se={},ae("next"),ae("throw"),ae("return"),se[Symbol.asyncIterator]=function(){return this},se);function ae(pe){se[pe]=de[pe]&&function(ot){return new Promise(function(Mt,Dn){!function ge(pe,ot,Mt,Dn){Promise.resolve(Dn).then(function(It){pe({value:It,done:Mt})},ot)}(Mt,Dn,(ot=de[pe](ot)).done,ot.value)})}}}G.d(U,{AQ:()=>Tt,N3:()=>Ct,Tt:()=>he,sH:()=>ue,xN:()=>gt}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=7925)}]);