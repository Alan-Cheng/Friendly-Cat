"use strict";(self.webpackChunkfriendly_time=self.webpackChunkfriendly_time||[]).push([[792],{9269:(vt,U,G)=>{function D(n,e){return Object.is(n,e)}let Z=null,x=!1,me=1;const he=Symbol("SIGNAL");function ne(n){const e=Z;return Z=n,e}const z={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $(n){if(x)throw new Error("");if(null===Z)return;Z.consumerOnSignalRead(n);const e=Z.nextProducerIndex++;_t(Z),e<Z.producerNode.length&&Z.producerNode[e]!==n&&Lt(Z)&&St(Z.producerNode[e],Z.producerIndexOfThis[e]),Z.producerNode[e]!==n&&(Z.producerNode[e]=n,Z.producerIndexOfThis[e]=Lt(Z)?At(n,Z,e):0),Z.producerLastReadVersion[e]=n.version}function Re(n){if((!Lt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==me)){if(!n.producerMustRecompute(n)&&!qt(n))return n.dirty=!1,void(n.lastCleanEpoch=me);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=me}}function Ve(n){if(void 0===n.liveConsumerNode)return;const e=x;x=!0;try{for(const t of n.liveConsumerNode)t.dirty||Ze(t)}finally{x=e}}function nt(){return!1!==Z?.consumerAllowSignalWrites}function Ze(n){n.dirty=!0,Ve(n),n.consumerMarkedDirty?.(n)}function Je(n){return n&&(n.nextProducerIndex=0),ne(n)}function et(n,e){if(ne(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Lt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)St(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qt(n){_t(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Re(t),r!==t.version))return!0}return!1}function Jt(n){if(_t(n),Lt(n))for(let e=0;e<n.producerNode.length;e++)St(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function At(n,e,t){if(wt(n),0===n.liveConsumerNode.length&&Ue(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=At(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function St(n,e){if(wt(n),1===n.liveConsumerNode.length&&Ue(n))for(let r=0;r<n.producerNode.length;r++)St(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];_t(i),i.producerIndexOfThis[r]=e}}function Lt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _t(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function wt(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Ue(n){return void 0!==n.producerNode}const it=Symbol("UNSET"),bt=Symbol("COMPUTING"),Ht=Symbol("ERRORED"),Sn={...z,value:it,dirty:!0,error:null,equal:D,producerMustRecompute:n=>n.value===it||n.value===bt,producerRecomputeValue(n){if(n.value===bt)throw new Error("Detected cycle in computations.");const e=n.value;n.value=bt;const t=Je(n);let r;try{r=n.computation()}catch(i){r=Ht,n.error=i}finally{et(n,t)}e!==it&&e!==Ht&&r!==Ht&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let Er=function xn(){throw new Error};function Dn(){Er()}let dr=null;function le(n,e){nt()||Dn(),n.equal(n.value,e)||(n.value=e,function lt(n){n.version++,function fe(){me++}(),Ve(n),dr?.()}(n))}const _e={...z,equal:D,value:void 0};const Rn=()=>{},Ct={...z,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Rn};function mt(n){return"function"==typeof n}function Zr(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const tn=Zr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function nn(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Nt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(mt(r))try{r()}catch(s){e=s instanceof tn?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{kr(s)}catch(o){e=e??[],o instanceof tn?e=[...e,...o.errors]:e.push(o)}}if(e)throw new tn(e)}}add(e){var t;if(e&&e!==this)if(this.closed)kr(e);else{if(e instanceof Nt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&nn(t,e)}remove(e){const{_finalizers:t}=this;t&&nn(t,e),e instanceof Nt&&e._removeParent(this)}}Nt.EMPTY=(()=>{const n=new Nt;return n.closed=!0,n})();const Jr=Nt.EMPTY;function Ii(n){return n instanceof Nt||n&&"closed"in n&&mt(n.remove)&&mt(n.add)&&mt(n.unsubscribe)}function kr(n){mt(n)?n():n.unsubscribe()}const ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ho={setTimeout(n,e,...t){const{delegate:r}=ho;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ho;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ka(n){ho.setTimeout(()=>{const{onUnhandledError:e}=ei;if(!e)throw n;e(n)})}function _s(){}const Ws=Gs("C",void 0,void 0);function Gs(n,e,t){return{kind:n,value:e,error:t}}let ui=null;function da(n){if(ei.useDeprecatedSynchronousErrorHandling){const e=!ui;if(e&&(ui={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ui;if(ui=null,t)throw r}}else n()}class os extends Nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ii(e)&&e.add(this)):this.destination=bs}static create(e,t,r){return new $i(e,t,r)}next(e){this.isStopped?di(function ua(n){return Gs("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?di(function fo(n){return Gs("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?di(Ws,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fo=Function.prototype.bind;function ys(n,e){return Fo.call(n,e)}class Fn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vs(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vs(r)}else vs(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vs(t)}}}class $i extends os{constructor(e,t,r){let i;if(super(),mt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ei.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ys(e.next,s),error:e.error&&ys(e.error,s),complete:e.complete&&ys(e.complete,s)}):i=e}this.destination=new Fn(i)}}function vs(n){ei.useDeprecatedSynchronousErrorHandling?function qs(n){ei.useDeprecatedSynchronousErrorHandling&&ui&&(ui.errorThrown=!0,ui.error=n)}(n):ka(n)}function di(n,e){const{onStoppedNotification:t}=ei;t&&ho.setTimeout(()=>t(n,e))}const bs={closed:!0,next:_s,error:function pl(n){throw n},complete:_s},po="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ri(n){return n}function ha(n){return 0===n.length?Ri:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Ut=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Se(n){return n&&n instanceof os||function Qe(n){return n&&mt(n.next)&&mt(n.error)&&mt(n.complete)}(n)&&Ii(n)}(t)?t:new $i(t,r,i);return da(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=rc(r))((i,s)=>{const o=new $i({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[po](){return this}pipe(...t){return ha(t)(this)}toPromise(t){return new(t=rc(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function rc(n){var e;return null!==(e=n??ei.Promise)&&void 0!==e?e:Promise}const C=Zr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class n extends Ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new S(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new C}next(t){da(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){da(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){da(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Jr:(this.currentObservers=null,s.push(t),new Nt(()=>{this.currentObservers=null,nn(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Ut;return t.source=this,t}}return n.create=(e,t)=>new S(e,t),n})();class S extends E{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Jr}}class F extends E{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function j(n){return mt(n?.lift)}function ye(n){return e=>{if(j(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new gt(n,e,t,r,i)}class gt extends os{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Be(n,e){return ye((t,r)=>{let i=0;t.subscribe(Fe(r,s=>{r.next(n.call(e,s,i++))}))})}const Ir="https://g.co/ng/security#xss";class K extends Error{constructor(e,t){super(function Yn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function mo(n){return{toString:n}.toString()}const hu="__parameters__";function pu(n,e,t){return mo(()=>{const r=function Mp(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(hu)?l[hu]:Object.defineProperty(l,hu,{value:[]})[hu];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const Gn=globalThis;function Ln(n){for(let e in n)if(n[e]===Ln)return e;throw Error("Could not find renamed property on target object.")}function wr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ti(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ti).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ic(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const py=Ln({__forward_ref__:Ln});function qn(n){return n.__forward_ref__=qn,n.toString=function(){return ti(this())},n}function xt(n){return Pp(n)?n():n}function Pp(n){return"function"==typeof n&&n.hasOwnProperty(py)&&n.__forward_ref__===qn}function Oe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $t(n){return{providers:n.providers||[],imports:n.imports||[]}}function mu(n){return Np(n,sc)||Np(n,X0)}function Np(n,e){return n.hasOwnProperty(e)?n[e]:null}function gu(n){return n&&(n.hasOwnProperty(rh)||n.hasOwnProperty(gy))?n[rh]:null}const sc=Ln({\u0275prov:Ln}),rh=Ln({\u0275inj:Ln}),X0=Ln({ngInjectableDef:Ln}),gy=Ln({ngInjectorDef:Ln});class Ee{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Oe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Lo(n){return n&&!!n.\u0275providers}const oc=Ln({\u0275cmp:Ln}),Ey=Ln({\u0275dir:Ln}),go=Ln({\u0275pipe:Ln}),ew=Ln({\u0275mod:Ln}),Vo=Ln({\u0275fac:Ln}),sh=Ln({__NG_ELEMENT_ID__:Ln}),Lp=Ln({__NG_ENV_ID__:Ln});function Ot(n){return"string"==typeof n?n:null==n?"":String(n)}function wy(n,e){throw new K(-201,!1)}var jt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(jt||{});let tw;function Vp(){return tw}function Nr(n){const e=tw;return tw=n,e}function ac(n,e,t){const r=mu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&jt.Optional?null:void 0!==e?e:void wy()}const oh={},Cy="__NG_DI_FLAG__",Up="ngTempTokenPath",IR=/\n/gm,nw="__source";let lc;function hi(n){const e=lc;return lc=n,e}function rw(n,e=jt.Default){if(void 0===lc)throw new K(-203,!1);return null===lc?ac(n,void 0,e):lc.get(n,e&jt.Optional?null:void 0,e)}function Me(n,e=jt.Default){return(Vp()||rw)(xt(n),e)}function N(n,e=jt.Default){return Me(n,ah(e))}function ah(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hp(n){const e=[];for(let t=0;t<n.length;t++){const r=xt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new K(900,!1);let i,s=jt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Ay(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Me(i,s))}else e.push(Me(r))}return e}function lh(n,e){return n[Cy]=e,n.prototype[Cy]=e,n}function Ay(n){return n[Cy]}const Mi=lh(pu("Optional"),8),cc=lh(pu("SkipSelf"),4);function Fa(n,e){return n.hasOwnProperty(Vo)?n[Vo]:null}function uc(n,e){n.forEach(t=>Array.isArray(t)?uc(t,e):e(t))}function Gp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ch(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pi(n,e,t){let r=ml(n,e);return r>=0?n[1|r]=t:(r=~r,function aw(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function uh(n,e){const t=ml(n,e);if(t>=0)return n[1|t]}function ml(n,e){return function qp(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const _o={},yn=[],yo=new Ee(""),cw=new Ee("",-1),dh=new Ee("");class Kp{get(e,t=oh){if(t===oh){const r=new Error(`NullInjectorError: No provider for ${ti(e)}!`);throw r.name="NullInjectorError",r}return t}}var bu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(bu||{}),vo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(vo||{}),fa=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(fa||{});function wR(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function hh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Qp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function uw(n){return 3===n||4===n||6===n}function Qp(n){return 64===n.charCodeAt(0)}function fh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||dw(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function dw(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Yp="ng-template";function CR(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==wR(e[i+1].toLowerCase(),t,0))return!0}else if(My(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function My(n){return 4===n.type&&n.value!==Yp}function Py(n,e,t){return e===(4!==n.type||t?n.value:Yp)}function TR(n,e,t){let r=4;const i=n.attrs,s=null!==i?function ky(n){for(let e=0;e<n.length;e++)if(uw(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Py(n,l,t)||""===l&&1===e.length){if(Qs(r))return!1;o=!0}}else if(8&r){if(null===i||!CR(n,i,l,t)){if(Qs(r))return!1;o=!0}}else{const c=e[++a],u=AR(l,i,My(n),t);if(-1===u){if(Qs(r))return!1;o=!0;continue}if(""!==c){let h;if(h=u>s?"":i[u+1].toLowerCase(),2&r&&c!==h){if(Qs(r))return!1;o=!0}}}}else{if(!o&&!Qs(r)&&!Qs(l))return!1;if(o&&Qs(l))continue;o=!1,r=l|1&r}}return Qs(r)||o}function Qs(n){return!(1&n)}function AR(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function xR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Xp(n,e,t=!1){for(let r=0;r<e.length;r++)if(TR(n,e[r],t))return!0;return!1}function Ny(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function hw(n,e){return n?":not("+e.trim()+")":e}function Oy(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Qs(o)&&(e+=hw(s,i),i=""),r=o,s=s||!Qs(r);t++}return""!==i&&(e+=hw(s,i)),e}function Kn(n){return mo(()=>{const e=MR(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vo.Emulated,styles:n.styles||yn,_:null,schemas:n.schemas||null,tView:null,id:""};PR(t);const r=n.dependencies;return t.directiveDefs=Ly(r,!1),t.pipeDefs=Ly(r,!0),t.id=function kR(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function RR(n){return Xt(n)||fi(n)}function fw(n){return null!==n}function zt(n){return mo(()=>({type:n.type,bootstrap:n.bootstrap||yn,declarations:n.declarations||yn,imports:n.imports||yn,exports:n.exports||yn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pw(n,e){if(null==n)return _o;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=fa.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==fa.None?[r,a]:r,e[s]=o):t[s]=r}return t}function tt(n){return mo(()=>{const e=MR(n);return PR(e),e})}function ki(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xt(n){return n[oc]||null}function fi(n){return n[Ey]||null}function Ni(n){return n[go]||null}function Gi(n,e){const t=n[ew]||null;if(!t&&!0===e)throw new Error(`Type ${ti(n)} does not have '\u0275mod' property.`);return t}function MR(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||_o,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||yn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pw(n.inputs,e),outputs:pw(n.outputs),debugInfo:null}}function PR(n){n.features?.forEach(e=>e(n))}function Ly(n,e){if(!n)return null;const t=e?Ni:RR;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(fw)}function _l(n){return{\u0275providers:n}}function NR(...n){return{\u0275providers:mw(0,n),\u0275fromNgModule:!0}}function mw(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return uc(e,o=>{const a=o;By(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&OR(i,s),t}function OR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];gw(i,s=>{e(s,r)})}}function By(n,e,t,r){if(!(n=xt(n)))return!1;let i=null,s=gu(n);const o=!s&&Xt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=gu(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)By(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{uc(s.imports,u=>{By(u,e,t,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&OR(c,e)}if(!a){const c=Fa(i)||(()=>new i);e({provide:i,useFactory:c,deps:yn},i),e({provide:dh,useValue:i,multi:!0},i),e({provide:yo,useValue:()=>Me(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;gw(l,u=>{e(u,c)})}}}return i!==n&&void 0!==n.providers}function gw(n,e){for(let t of n)Lo(t)&&(t=t.\u0275providers),Array.isArray(t)?gw(t,e):e(t)}const Uy=Ln({provide:String,useValue:Ln});function La(n){return null!==n&&"object"==typeof n&&Uy in n}function dc(n){return"function"==typeof n}const yw=new Ee(""),Jp={},LR={};let ph;function Eu(){return void 0===ph&&(ph=new Kp),ph}class Oi{}class Va extends Oi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zy(e,o=>this.processProvider(o)),this.records.set(cw,hc(void 0,this)),i.has("environment")&&this.records.set(Oi,hc(void 0,this));const s=this.records.get(yw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(dh,yn,jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=ne(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ne(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=hi(this),r=Nr(void 0);try{return e()}finally{hi(t),Nr(r)}}get(e,t=oh,r=jt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Lp))return e[Lp](this);r=ah(r);const s=hi(this),o=Nr(void 0);try{if(!(r&jt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function jR(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ee}(e)&&mu(e);l=c&&this.injectableDefInScope(c)?hc(em(e),Jp):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&jt.Self?Eu():this.parent).get(e,t=r&jt.Optional&&t===oh?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Up]=a[Up]||[]).unshift(ti(e)),s)throw a;return function Sy(n,e,t,r){const i=n[Up];throw e[nw]&&i.unshift(e[nw]),n.message=function xy(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ti(e);if(Array.isArray(e))i=e.map(ti).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ti(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(IR,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Up]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Nr(o),hi(s)}}resolveInjectorInitializers(){const e=ne(null),t=hi(this),r=Nr(void 0);try{const s=this.get(yo,yn,jt.Self);for(const o of s)o()}finally{hi(t),Nr(r),ne(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ti(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){let t=dc(e=xt(e))?e:xt(e&&e.provide);const r=function BR(n){return La(n)?hc(void 0,n.useValue):hc(UR(n),Jp)}(e);if(!dc(e)&&!0===e.multi){let i=this.records.get(t);i||(i=hc(void 0,Jp,!0),i.factory=()=>Hp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=ne(null);try{return t.value===Jp&&(t.value=LR,t.value=t.factory()),"object"==typeof t.value&&t.value&&function jy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ne(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=xt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function em(n){const e=mu(n),t=null!==e?e.factory:Fa(n);if(null!==t)return t;if(n instanceof Ee)throw new K(204,!1);if(n instanceof Function)return function VR(n){if(n.length>0)throw new K(204,!1);const t=function vR(n){return n&&(n[sc]||n[X0])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new K(204,!1)}function UR(n,e,t){let r;if(dc(n)){const i=xt(n);return Fa(i)||em(i)}if(La(n))r=()=>xt(n.useValue);else if(function _w(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Hp(n.deps||[]));else if(function Zp(n){return!(!n||!n.useExisting)}(n))r=()=>Me(xt(n.useExisting));else{const i=xt(n&&(n.useClass||n.provide));if(!function $z(n){return!!n.deps}(n))return Fa(i)||em(i);r=()=>new i(...Hp(n.deps))}return r}function hc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zy(n,e){for(const t of n)Array.isArray(t)?zy(t,e):t&&Lo(t)?zy(t.\u0275providers,e):e(t)}function ws(n,e){n instanceof Va&&n.assertNotDestroyed();const r=hi(n),i=Nr(void 0);try{return e()}finally{hi(r),Nr(i)}}function vw(){return void 0!==Vp()||null!=function Ty(){return lc}()}function Or(n){if(!vw())throw new K(-203,!1)}const Xn=0,He=1,ht=2,qr=3,Bo=4,Fi=5,Cs=6,fc=7,Zn=8,ni=9,pa=10,Rt=11,yh=12,vh=13,Cu=14,hr=15,pc=16,yl=17,Ba=18,Tu=19,Iw=20,vl=21,bh=22,bo=23,ut=25,$y=1,ma=7,Su=9,Cr=10;var rm=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(rm||{});function Kr(n){return Array.isArray(n)&&"object"==typeof n[$y]}function pi(n){return Array.isArray(n)&&!0===n[$y]}function Eh(n){return!!(4&n.flags)}function gc(n){return n.componentOffset>-1}function xu(n){return!(1&~n.flags)}function Uo(n){return!!n.template}function jo(n){return!!(512&n[ht])}class Dw{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Rw(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function as(){return cm}function cm(n){return n.type.prototype.ngOnChanges&&(n.setInput=YR),QR}function QR(){const n=Mw(this),e=n?.current;if(e){const t=n.previous;if(t===_o)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function YR(n,e,t,r,i){const s=this.declaredInputs[r],o=Mw(n)||function XR(n,e){return n[um]=e}(n,{previous:_o,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new Dw(c&&c.currentValue,t,l===_o),Rw(n,e,i,t)}as.ngInherit=!0;const um="__ngSimpleChanges__";function Mw(n){return n[um]||null}const Eo=function(n,e,t){},dm="svg";function fn(n){for(;Array.isArray(n);)n=n[Xn];return n}function Ch(n,e){return fn(e[n])}function qi(n,e){return fn(e[n.index])}function Du(n,e){return n.data[e]}function _c(n,e){return n[e]}function Ts(n,e){const t=e[n];return Kr(t)?t:t[Xn]}function Ky(n){return!(128&~n[ht])}function Io(n,e){return null==e?null:n[e]}function fm(n){n[yl]=0}function kw(n){1024&n[ht]||(n[ht]|=1024,Ky(n)&&yc(n))}function Th(n){return!!(9216&n[ht]||n[bo]?.dirty)}function Qy(n){n[pa].changeDetectionScheduler?.notify(8),64&n[ht]&&(n[ht]|=1024),Th(n)&&yc(n)}function yc(n){n[pa].changeDetectionScheduler?.notify(0);let e=Ua(n);for(;null!==e&&!(8192&e[ht])&&(e[ht]|=8192,Ky(e));)e=Ua(e)}function pm(n,e){if(!(256&~n[ht]))throw new K(911,!1);null===n[vl]&&(n[vl]=[]),n[vl].push(e)}function Ua(n){const e=n[qr];return pi(e)?e[qr]:e}const Mt={lFrame:ge(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Ow=!1;function Fw(){return Mt.bindingsEnabled}function vc(){return null!==Mt.skipHydrationRootTNode}function Te(){return Mt.lFrame.lView}function Kt(){return Mt.lFrame.tView}function Cn(n){return Mt.lFrame.contextLView=n,n[Zn]}function Tn(n){return Mt.lFrame.contextLView=null,n}function Vn(){let n=gm();for(;null!==n&&64===n.type;)n=n.parent;return n}function gm(){return Mt.lFrame.currentTNode}function wo(n,e){const t=Mt.lFrame;t.currentTNode=n,t.isParent=e}function _m(){return Mt.lFrame.isParent}function Sh(){Mt.lFrame.isParent=!1}function xh(){return Ow}function ev(n){Ow=n}function Ki(){const n=Mt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function zo(){return Mt.lFrame.bindingIndex++}function za(n){const e=Mt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function aM(n,e){const t=Mt.lFrame;t.bindingIndex=t.bindingRootIndex=n,nv(e)}function nv(n){Mt.lFrame.currentDirectiveIndex=n}function d(){return Mt.lFrame.currentQueryIndex}function f(n){Mt.lFrame.currentQueryIndex=n}function _(n){const e=n[He];return 2===e.type?e.declTNode:1===e.type?n[Fi]:null}function w(n,e,t){if(t&jt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&jt.Host||(i=_(s),null===i||(s=s[Cu],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Mt.lFrame=Y();return r.currentTNode=e,r.lView=n,!0}function R(n){const e=Y(),t=n[He];Mt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Y(){const n=Mt.lFrame,e=null===n?null:n.child;return null===e?ge(n):e}function ge(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ke(){const n=Mt.lFrame;return Mt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const rt=ke;function dt(){const n=ke();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Mn(){return Mt.lFrame.selectedIndex}function As(n){Mt.lFrame.selectedIndex=n}function Bn(){const n=Mt.lFrame;return Du(n.tView,n.selectedIndex)}function Ss(){Mt.lFrame.currentNamespace=dm}function Dh(){!function jw(){Mt.lFrame.currentNamespace=null}()}let iv=!0;function Ru(){return iv}function Co(n){iv=n}function vm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Mu(n,e,t){eH(n,e,3,t)}function bm(n,e,t,r){(3&n[ht])===t&&eH(n,e,t,r)}function cM(n,e){let t=n[ht];(3&t)===e&&(t&=16383,t+=1,n[ht]=t)}function eH(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[yl]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[yl]+=65536),(a<s||-1==s)&&(rle(n,t,e,l),n[yl]=(4294901760&n[yl])+l+2),l++}function tH(n,e){Eo(4,n,e);const t=ne(null);try{e.call(n)}finally{ne(t),Eo(5,n,e)}}function rle(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ht]>>14<n[yl]>>16&&(3&n[ht])===e&&(n[ht]+=16384,tH(a,s)):tH(a,s)}const Em=-1;class sv{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const dM={};class Rh{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ah(r);const i=this.injector.get(e,dM,r);return i!==dM||t===dM?i:this.parentInjector.get(e,t,r)}}function hM(n){return n!==Em}function ov(n){return 32767&n}function av(n,e){let t=function lle(n){return n>>16}(n),r=e;for(;t>0;)r=r[Cu],t--;return r}let fM=!0;function Hw(n){const e=fM;return fM=n,e}const rH=255,iH=5;let ule=0;const bl={};function $w(n,e){const t=sH(n,e);if(-1!==t)return t;const r=e[He];r.firstCreatePass&&(n.injectorIndex=e.length,pM(r.data,n),pM(e,null),pM(r.blueprint,null));const i=Ww(n,e),s=n.injectorIndex;if(hM(i)){const o=ov(i),a=av(i,e),l=a[He].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function pM(n,e){n.push(0,0,0,0,0,0,0,0,e)}function sH(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Ww(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=hH(i),null===r)return Em;if(t++,i=i[Cu],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Em}function mM(n,e,t){!function dle(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(sh)&&(r=t[sh]),null==r&&(r=t[sh]=ule++);const i=r&rH;e.data[n+(i>>iH)]|=1<<i}(n,e,t)}function oH(n,e,t){if(t&jt.Optional||void 0!==n)return n;wy()}function aH(n,e,t,r){if(t&jt.Optional&&void 0===r&&(r=null),!(t&(jt.Self|jt.Host))){const i=n[ni],s=Nr(void 0);try{return i?i.get(e,r,t&jt.Optional):ac(e,r,t&jt.Optional)}finally{Nr(s)}}return oH(r,0,t)}function lH(n,e,t,r=jt.Default,i){if(null!==n){if(2048&e[ht]&&!(r&jt.Self)){const o=function gle(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ht]&&!(512&o[ht]);){const a=cH(s,o,t,r|jt.Self,bl);if(a!==bl)return a;let l=s.parent;if(!l){const c=o[Iw];if(c){const u=c.get(t,bl,r);if(u!==bl)return u}l=hH(o),o=o[Cu]}s=l}return i}(n,e,t,r,bl);if(o!==bl)return o}const s=cH(n,e,t,r,bl);if(s!==bl)return s}return aH(e,t,r,i)}function cH(n,e,t,r,i){const s=function ple(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(sh)?n[sh]:void 0;return"number"==typeof e?e>=0?e&rH:mle:e}(t);if("function"==typeof s){if(!w(e,n,r))return r&jt.Host?oH(i,0,r):aH(e,t,r,i);try{let o;if(o=s(r),null!=o||r&jt.Optional)return o;wy()}finally{rt()}}else if("number"==typeof s){let o=null,a=sH(n,e),l=Em,c=r&jt.Host?e[hr][Fi]:null;for((-1===a||r&jt.SkipSelf)&&(l=-1===a?Ww(n,e):e[a+8],l!==Em&&dH(r,!1)?(o=e[He],a=ov(l),e=av(l,e)):a=-1);-1!==a;){const u=e[He];if(uH(s,a,u.data)){const h=fle(a,e,t,o,r,c);if(h!==bl)return h}l=e[a+8],l!==Em&&dH(r,e[He].data[a+8]===c)&&uH(s,a,e)?(o=u,a=ov(l),e=av(l,e)):a=-1}}return i}function fle(n,e,t,r,i,s){const o=e[He],a=o.data[n+8],u=Gw(a,o,t,null==r?gc(a)&&fM:r!=o&&!!(3&a.type),i&jt.Host&&s===a);return null!==u?Mh(e,o,u,a):bl}function Gw(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,m=i?a+u:n.directiveEnd;for(let y=r?a:a+u;y<m;y++){const b=o[y];if(y<l&&t===b||y>=l&&b.type===t)return y}if(i){const y=o[l];if(y&&Uo(y)&&y.type===t)return l}return null}function Mh(n,e,t,r){let i=n[t];const s=e.data;if(function ile(n){return n instanceof sv}(i)){const o=i;o.resolving&&function Iy(n,e){throw e&&e.join(" > "),new K(-200,n)}(function _n(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ot(n)}(s[t]));const a=Hw(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Nr(o.injectImpl):null;w(n,r,jt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function zw(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=cm(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Nr(c),Hw(a),o.resolving=!1,rt()}}return i}function uH(n,e,t){return!!(t[e+(n>>iH)]&1<<n)}function dH(n,e){return!(n&jt.Self||n&jt.Host&&e)}class Li{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return lH(this._tNode,this._lView,e,ah(r),t)}}function mle(){return new Li(Vn(),Te())}function Qr(n){return mo(()=>{const e=n.prototype.constructor,t=e[Vo]||gM(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Vo]||gM(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function gM(n){return Pp(n)?()=>{const e=gM(xt(n));return e&&e()}:Fa(n)}function hH(n){const e=n[He],t=e.type;return 2===t?e.declTNode:1===t?n[Fi]:null}function _H(n,e=null,t=null,r){const i=yH(n,e,t,r);return i.resolveInjectorInitializers(),i}function yH(n,e=null,t=null,r,i=new Set){const s=[t||yn,NR(n)];return r=r||("object"==typeof n?void 0:ti(n)),new Va(s,e||Eu(),r||null,i)}class Pn{static{this.THROW_IF_NOT_FOUND=oh}static{this.NULL=new Kp}static create(e,t){if(Array.isArray(e))return _H({name:""},t,e,"");{const r=e.name??"";return _H({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Oe({token:Pn,providedIn:"any",factory:()=>Me(cw)})}static{this.__NG_ELEMENT_ID__=-1}}class Cle{constructor(e){this.attributeName=e,this.__NG_ELEMENT_ID__=()=>function lv(n){return function hle(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(uw(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Vn(),n)}(this.attributeName)}toString(){return`HostAttributeToken ${this.attributeName}`}}new Ee("").__NG_ELEMENT_ID__=n=>{const e=Vn();if(null===e)throw new K(204,!1);if(2&e.type)return e.value;if(n&jt.Optional)return null;throw new K(204,!1)};function yM(n){return n.ngOriginalError}const bH=!0;let cv=(()=>{class n{static{this.__NG_ELEMENT_ID__=Sle}static{this.__NG_ENV_ID__=t=>t}}return n})();class Ale extends cv{constructor(e){super(),this._lView=e}onDestroy(e){return pm(this._lView,e),()=>function Yy(n,e){if(null===n[vl])return;const t=n[vl].indexOf(e);-1!==t&&n[vl].splice(t,1)}(this._lView,e)}}function Sle(){return new Ale(Te())}let bc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>new n})}}return n})();const vn=class xle extends E{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,vw()&&(this.destroyRef=N(cv,{optional:!0})??void 0,this.pendingTasks=N(bc,{optional:!0})??void 0)}emit(e){const t=ne(null);try{super.next(e)}finally{ne(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Nt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function Kw(...n){}function EH(n){let e,t;function r(){n=Kw;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function IH(n){return queueMicrotask(()=>n()),()=>{n=Kw}}const vM="isAngularZone",Qw=vM+"_ID";let Dle=0;class yt{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vn(!1),this.onMicrotaskEmpty=new vn(!1),this.onStable=new vn(!1),this.onError=new vn(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=bH}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function Ple(n){const e=()=>{!function Mle(n){function e(){EH(()=>{n.callbackScheduled=!1,EM(n),n.isCheckStableRunning=!0,bM(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),EM(n))}(n)},t=Dle++;n._inner=n._inner.fork({name:"angular",properties:{[vM]:!0,[Qw]:t,[Qw+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(function kle(n){return TH(n,"__ignore_ng_zone__")}(l))return r.invokeTask(s,o,a,l);try{return wH(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),CH(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return wH(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function Nle(n){return TH(n,"__scheduler_tick__")}(l)&&e(),CH(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,EM(n),bM(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(vM)}static assertInAngularZone(){if(!yt.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(yt.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Rle,Kw,Kw);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Rle={};function bM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function EM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function wH(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CH(n){n._nesting--,bM(n)}class IM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vn,this.onMicrotaskEmpty=new vn,this.onStable=new vn,this.onError=new vn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function TH(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class Ho{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&yM(e);for(;t&&yM(t);)t=yM(t);return t||null}}const Fle=new Ee("",{providedIn:"root",factory:()=>{const n=N(yt),e=N(Ho);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Lle(){return Cm(Vn(),Te())}function Cm(n,e){return new Jn(qi(n,e))}let Jn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Lle}}return n})();function SH(n){return n instanceof Jn?n.nativeElement:n}function Vle(){return this._results[Symbol.iterator]()}class Tm{get changes(){return this._changes??=new vn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Tm.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Vle)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function Wi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Wp(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function dv(n){return!(128&~n.flags)}const CM=new Map;let Ule=0;function TM(n){CM.delete(n[Tu])}const Yw="__ngContext__";function xs(n,e){Kr(e)?(n[Yw]=e[Tu],function zle(n){CM.set(n[Tu],n)}(e)):n[Yw]=e}function LH(n){return BH(n[yh])}function VH(n){return BH(n[Bo])}function BH(n){for(;null!==n&&!pi(n);)n=n[Bo];return n}let SM;function Pu(){if(void 0!==SM)return SM;if(typeof document<"u")return document;throw new K(210,!1)}const Ph=new Ee("",{providedIn:"root",factory:()=>sce}),sce="ng",qH=new Ee(""),Ys=new Ee("",{providedIn:"platform",factory:()=>"unknown"}),Ec=new Ee(""),xM=new Ee("",{providedIn:"root",factory:()=>Pu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let KH=()=>null;function OM(n,e,t=!1){return KH(n,e,t)}const n3=new Ee("",{providedIn:"root",factory:()=>!1});let iC,sC;function Dm(n){return function UM(){if(void 0===iC&&(iC=null,Gn.trustedTypes))try{iC=Gn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return iC}()?.createHTML(n)||n}function s3(n){return function jM(){if(void 0===sC&&(sC=null,Gn.trustedTypes))try{sC=Gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sC}()?.createHTML(n)||n}class Nh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ir})`}}class vce extends Nh{getTypeName(){return"HTML"}}class bce extends Nh{getTypeName(){return"Style"}}class Ece extends Nh{getTypeName(){return"Script"}}class Ice extends Nh{getTypeName(){return"URL"}}class wce extends Nh{getTypeName(){return"ResourceURL"}}function $o(n){return n instanceof Nh?n.changingThisBreaksApplicationSecurity:n}function El(n,e){const t=function Cce(n){return n instanceof Nh&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ir})`)}return t===e}class Rce{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Dm(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}}class Mce{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Dm(e),t}}const kce=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function oC(n){return(n=String(n)).match(kce)?n:"unsafe:"+n}function Ic(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function yv(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const c3=Ic("area,br,col,hr,img,wbr"),u3=Ic("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),d3=Ic("rp,rt"),zM=yv(c3,yv(u3,Ic("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yv(d3,Ic("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yv(d3,u3)),HM=Ic("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),h3=yv(HM,Ic("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ic("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Nce=Ic("script,style,template");class Oce{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=Vce(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=Lce(t);if(s){t=s;break}t=i.pop()}return this.buf.join("")}startElement(e){const t=f3(e).toLowerCase();if(!zM.hasOwnProperty(t))return this.sanitizedSomething=!0,!Nce.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!h3.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;HM[a]&&(l=oC(l)),this.buf.push(" ",o,'="',m3(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=f3(e).toLowerCase();zM.hasOwnProperty(t)&&!c3.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(m3(e))}}function Lce(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw p3(e);return e}function Vce(n){const e=n.firstChild;if(e&&function Fce(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw p3(e);return e}function f3(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function p3(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const Bce=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Uce=/([^\#-~ |!])/g;function m3(n){return n.replace(/&/g,"&amp;").replace(Bce,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Uce,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let aC;function g3(n,e){let t=null;try{aC=aC||function l3(n){const e=new Mce(n);return function Pce(){try{return!!(new window.DOMParser).parseFromString(Dm(""),"text/html")}catch{return!1}}()?new Rce(e):e}(n);let r=e?String(e):"";t=aC.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=aC.getInertBodyElement(r)}while(r!==s);return Dm((new Oce).sanitizeChildren($M(t)||t))}finally{if(t){const r=$M(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function $M(n){return"content"in n&&function jce(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ls=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ls||{});function _3(n){const e=vv();return e?s3(e.sanitize(ls.HTML,n)||""):El(n,"HTML")?s3($o(n)):g3(Pu(),Ot(n))}function ri(n){const e=vv();return e?e.sanitize(ls.URL,n)||"":El(n,"URL")?$o(n):oC(Ot(n))}function vv(){const n=Te();return n&&n[pa].sanitizer}const qce=/^>|^->|<!--|-->|--!>|<!-$/g,Kce=/(<|>)/g,Qce="\u200b$1\u200b";function Wo(n){return n instanceof Function?n():n}function Go(n){return"browser"===(n??N(Pn)).get(Ys)}var ku=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ku||{});let qM;function KM(n,e){return qM(n,e)}function Mm(n,e,t,r,i){if(null!=r){let s,o=!1;pi(r)?s=r:Kr(r)&&(o=!0,r=r[Xn]);const a=fn(r);0===n&&null!==t?null==i?P3(e,t,a):Oh(e,t,a,i||null,!0):1===n&&null!==t?Oh(e,t,a,i||null,!0):2===n?function Ev(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function mue(n,e,t,r,i){const s=t[ma];s!==fn(t)&&Mm(e,n,r,s,i);for(let a=Cr;a<t.length;a++){const l=t[a];fC(l[He],l,n,e,r,s)}}(e,n,s,t,i)}}function YM(n,e){return n.createComment(function b3(n){return n.replace(qce,e=>e.replace(Kce,Qce))}(e))}function uC(n,e,t){return n.createElement(e,t)}function D3(n,e){e[pa].changeDetectionScheduler?.notify(9),fC(n,e,e[Rt],2,null,null)}function R3(n,e){const t=n[Su],r=e[qr];(Kr(r)||e[hr]!==r[qr][hr])&&(n[ht]|=rm.HasTransplantedViews),null===t?n[Su]=[e]:t.push(e)}function XM(n,e){const t=n[Su],r=t.indexOf(e);t.splice(r,1)}function bv(n,e){if(n.length<=Cr)return;const t=Cr+e,r=n[t];if(r){const i=r[pc];null!==i&&i!==n&&XM(i,r),e>0&&(n[t-1][Bo]=r[Bo]);const s=ch(n,Cr+e);!function aue(n,e){D3(n,e),e[Xn]=null,e[Fi]=null}(r[He],r);const o=s[Ba];null!==o&&o.detachView(s[He]),r[qr]=null,r[Bo]=null,r[ht]&=-129}return r}function dC(n,e){if(!(256&e[ht])){const t=e[Rt];t.destroyNode&&fC(n,e,t,3,null,null),function cue(n){let e=n[yh];if(!e)return ZM(n[He],n);for(;e;){let t=null;if(Kr(e))t=e[yh];else{const r=e[Cr];r&&(t=r)}if(!t){for(;e&&!e[Bo]&&e!==n;)Kr(e)&&ZM(e[He],e),e=e[qr];null===e&&(e=n),Kr(e)&&ZM(e[He],e),t=e&&e[Bo]}e=t}}(e)}}function ZM(n,e){if(256&e[ht])return;const t=ne(null);try{e[ht]&=-129,e[ht]|=256,e[bo]&&Jt(e[bo]),function hue(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof sv)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Eo(4,a,l);try{l.call(a)}finally{Eo(5,a,l)}}else{Eo(4,i,s);try{s.call(i)}finally{Eo(5,i,s)}}}}}(n,e),function due(n,e){const t=n.cleanup,r=e[fc];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[fc]=null);const i=e[vl];if(null!==i){e[vl]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[He].type&&e[Rt].destroy();const r=e[pc];if(null!==r&&pi(e[qr])){r!==e[qr]&&XM(r,e);const i=e[Ba];null!==i&&i.detachView(n)}TM(e)}finally{ne(t)}}function JM(n,e,t){return function M3(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[Xn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===vo.None||s===vo.Emulated)return null}return qi(r,t)}}(n,e.parent,t)}function Oh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function P3(n,e,t){n.appendChild(e,t)}function k3(n,e,t,r,i){null!==r?Oh(n,e,t,r,i):P3(n,e,t)}function eP(n,e){return n.parentNode(e)}function N3(n,e,t){return F3(n,e,t)}let tP,F3=function O3(n,e,t){return 40&n.type?qi(n,t):null};function hC(n,e,t,r){const i=JM(n,r,e),s=e[Rt],a=N3(r.parent||e[Fi],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)k3(s,i,t[l],a,!1);else k3(s,i,t,a,!1);void 0!==tP&&tP(s,r,e,t,i)}function Fh(n,e){if(null!==e){const t=e.type;if(3&t)return qi(e,n);if(4&t)return nP(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Fh(n,r);{const i=n[e.index];return pi(i)?nP(-1,i):fn(i)}}if(128&t)return Fh(n,e.next);if(32&t)return KM(e,n)()||fn(n[e.index]);{const r=V3(n,e);return null!==r?Array.isArray(r)?r[0]:Fh(Ua(n[hr]),r):Fh(n,e.next)}}return null}function V3(n,e){return null!==e?n[hr][Fi].projection[e.projection]:null}function nP(n,e){const t=Cr+n+1;if(t<e.length){const r=e[t],i=r[He].firstChild;if(null!==i)return Fh(r,i)}return e[ma]}function rP(n,e,t,r,i,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],l=t.type;if(o&&0===e&&(a&&xs(fn(a),r),t.flags|=2),32&~t.flags)if(8&l)rP(n,e,t.child,r,i,s,!1),Mm(e,n,i,a,s);else if(32&l){const c=KM(t,r);let u;for(;u=c();)Mm(e,n,i,u,s);Mm(e,n,i,a,s)}else 16&l?U3(n,e,r,t,i,s):Mm(e,n,i,a,s);t=o?t.projectionNext:t.next}}function fC(n,e,t,r,i,s){rP(t,r,n.firstChild,e,i,s,!1)}function U3(n,e,t,r,i,s){const o=t[hr],l=o[Fi].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Mm(e,n,i,l[c],s);else{let c=l;const u=o[qr];dv(r)&&(c.flags|=128),rP(n,e,c,u,i,s,!0)}}function j3(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function z3(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&hh(n,e,r),null!==i&&j3(n,e,i),null!==s&&function _ue(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Vt={};function se(n=1){H3(Kt(),Te(),Mn()+n,!1)}function H3(n,e,t,r){if(!r)if(3&~e[ht]){const s=n.preOrderHooks;null!==s&&bm(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Mu(e,s,t)}As(t)}function xe(n,e=jt.Default){const t=Te();return null===t?Me(n,e):lH(Vn(),t,xt(n),e)}function W3(n,e,t,r,i,s){const o=ne(null);try{let a=null;i&fa.SignalBased&&(a=e[r][he]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&fa.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):Rw(e,a,r,s)}finally{ne(o)}}function pC(n,e,t,r,i,s,o,a,l,c,u){const h=e.blueprint.slice();return h[Xn]=i,h[ht]=204|r,(null!==c||n&&2048&n[ht])&&(h[ht]|=2048),fm(h),h[qr]=h[Cu]=n,h[Zn]=t,h[pa]=o||n&&n[pa],h[Rt]=a||n&&n[Rt],h[ni]=l||n&&n[ni]||null,h[Fi]=s,h[Tu]=function jle(){return Ule++}(),h[Cs]=u,h[Iw]=c,h[hr]=2==e.type?n[hr]:h,h}function Lh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function iP(n,e,t,r,i){const s=gm(),o=_m(),l=n.data[e]=function Tue(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return vc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function oM(){return Mt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Ah(){const n=Mt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return wo(s,!0),s}function Iv(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function G3(n,e,t,r,i){const s=Mn(),o=2&r;try{As(-1),o&&e.length>ut&&H3(n,e,ut,!1),Eo(o?2:0,i),t(r,i)}finally{As(s),Eo(o?3:1,i)}}function sP(n,e,t){if(Eh(e)){const r=ne(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ne(r)}}}function oP(n,e,t){Fw()&&(function Pue(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;gc(t)&&function Bue(n,e,t){const r=qi(e,n),i=q3(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=mC(n,pC(n,i,null,o,r,e,null,n[pa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||$w(t,e),xs(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Mh(e,n,a,t);xs(c,e),null!==o&&Uue(0,a-i,c,l,0,o),Uo(l)&&(Ts(t.index,e)[Zn]=Mh(e,n,a,t))}}(n,e,t,qi(t,e)),!(64&~t.flags)&&Z3(n,e,t))}function aP(n,e,t=qi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function q3(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=lP(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function lP(n,e,t,r,i,s,o,a,l,c,u){const h=ut+r,m=h+i,y=function vue(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Vt);return t}(h,m),b="function"==typeof c?c():c;return y[He]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:u}}let K3=()=>null;function Q3(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,l=fa.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==i){if(!i.hasOwnProperty(s))continue;c=i[s]}0===n?Y3(r,t,c,a,l):Y3(r,t,c,a)}return r}function Y3(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function Ao(n,e,t,r,i,s,o,a){const l=qi(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(fP(n,t,u,r,i),gc(e)&&function xue(n,e){const t=Ts(e,n);16&t[ht]||(t[ht]|=64)}(t,e.index)):3&e.type&&(r=function Sue(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function cP(n,e,t,r){if(Fw()){const i=null===r?null:{"":-1},s=function Nue(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Xp(e,o.selectors,!1))if(r||(r=[]),Uo(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),uP(n,e,a.length)}else r.unshift(o),uP(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&X3(n,e,t,o,i,a),i&&function Oue(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new K(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=fh(t.mergedAttrs,t.attrs)}function X3(n,e,t,r,i,s){for(let c=0;c<r.length;c++)mM($w(t,e),n,r[c].type);!function Lue(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Iv(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=fh(t.mergedAttrs,u.hostAttrs),Vue(n,t,e,l,u),Fue(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function Aue(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const h=s[u],m=t?t.get(h):null,b=m?m.outputs:null;l=Q3(0,h.inputs,u,l,m?m.inputs:null),c=Q3(1,h.outputs,u,c,b);const T=null===l||null===o||My(e)?null:jue(l,u,o);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function Z3(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function lM(){return Mt.lFrame.currentDirectiveIndex}();try{As(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];nv(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&kue(l,c)}}finally{As(-1),nv(o)}}function kue(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function uP(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Fue(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Uo(e)&&(t[""]=n)}}function Vue(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Fa(i.type)),o=new sv(s,Uo(i),xe);n.blueprint[r]=o,t[r]=o,function Rue(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Mue(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Iv(n,t,i.hostVars,Vt),i)}function Il(n,e,t,r,i,s){const o=qi(n,e);!function dP(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Ot(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Rt],o,s,n.value,t,r,i)}function Uue(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)W3(r,t,o[a++],o[a++],o[a++],o[a++])}function jue(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function J3(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function e$(n,e){const t=n.contentQueries;if(null!==t){const r=ne(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];f(t[i]),a.contentQueries(2,e[o],o)}}}finally{ne(r)}}}function mC(n,e){return n[yh]?n[vh][Bo]=e:n[yh]=e,n[vh]=e,e}function hP(n,e,t){f(0);const r=ne(null);try{e(n,t)}finally{ne(r)}}function t$(n){return n[fc]??=[]}function n$(n){return n.cleanup??=[]}function gC(n,e){const t=n[ni],r=t?t.get(Ho,null):null;r&&r.handleError(e)}function fP(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=t[s++];W3(n.data[o],e[o],r,a,l,i)}}function zue(n,e){const t=Ts(e,n),r=t[He];!function Hue(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Xn];null!==i&&null===t[Cs]&&(t[Cs]=OM(i,t[ni])),pP(r,t,t[Zn])}function pP(n,e,t){R(e);try{const r=n.viewQuery;null!==r&&hP(1,r,t);const i=n.template;null!==i&&G3(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ba]?.finishViewCreation(n),n.staticContentQueries&&e$(n,e),n.staticViewQueries&&hP(2,n.viewQuery,t);const s=n.components;null!==s&&function $ue(n,e){for(let t=0;t<e.length;t++)zue(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ht]&=-5,dt()}}function Pm(n,e,t,r){const i=ne(null);try{const s=e.tView,l=pC(n,s,t,4096&n[ht]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[pc]=n[e.index];const u=n[Ba];return null!==u&&(l[Ba]=u.createEmbeddedView(s)),pP(s,l,t),l}finally{ne(i)}}function Vh(n,e){return!e||null===e.firstChild||dv(n)}function km(n,e,t,r=!0){const i=e[He];if(function uue(n,e,t,r){const i=Cr+r,s=t.length;r>0&&(t[i-1][Bo]=e),r<s-Cr?(e[Bo]=t[i],Gp(t,Cr+r,e)):(t.push(e),e[Bo]=null),e[qr]=t;const o=e[pc];null!==o&&t!==o&&R3(o,e);const a=e[Ba];null!==a&&a.insertView(n),Qy(e),e[ht]|=128}(i,e,n,t),r){const o=nP(t,n),a=e[Rt],l=eP(a,n[ma]);null!==l&&function lue(n,e,t,r,i,s){r[Xn]=i,r[Fi]=e,fC(n,r,t,1,i,s)}(i,n[Fi],a,e,l,o)}const s=e[Cs];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function wv(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&r.push(fn(s)),pi(s)&&s$(s,r);const o=t.type;if(8&o)wv(n,e,t.child,r);else if(32&o){const a=KM(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=V3(e,t);if(Array.isArray(a))r.push(...a);else{const l=Ua(e[hr]);wv(l[He],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function s$(n,e){for(let t=Cr;t<n.length;t++){const r=n[t],i=r[He].firstChild;null!==i&&wv(r[He],r,i,e)}n[ma]!==n[Xn]&&e.push(n[ma])}let o$=[];const Kue={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{yc(n.lView)},consumerOnSignalRead(){this.lView[bo]=this}},Yue={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ua(n.lView);for(;e&&!a$(e[He]);)e=Ua(e);e&&kw(e)},consumerOnSignalRead(){this.lView[bo]=this}};function a$(n){return 2!==n.type}const Xue=100;function _C(n,e=!0,t=0){const r=n[pa],i=r.rendererFactory;i.begin?.();try{!function Zue(n,e){const t=xh();try{ev(!0),gP(n,e);let r=0;for(;Th(n);){if(r===Xue)throw new K(103,!1);r++,gP(n,1)}}finally{ev(t)}}(n,t)}catch(o){throw e&&gC(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function Jue(n,e,t,r){const i=e[ht];if(!(256&~i))return;e[pa].inlineEffectRunner?.flush(),R(e);let a=!0,l=null,c=null;a$(n)?(c=function Wue(n){return n[bo]??function Gue(n){const e=o$.pop()??Object.create(Kue);return e.lView=n,e}(n)}(e),l=Je(c)):null===function Ae(){return Z}()?(a=!1,c=function Que(n){const e=n[bo]??Object.create(Yue);return e.lView=n,e}(e),l=Je(c)):e[bo]&&(Jt(e[bo]),e[bo]=null);try{fm(e),function Uw(n){return Mt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&G3(n,e,t,2,r);const u=!(3&~i);if(u){const y=n.preOrderCheckHooks;null!==y&&Mu(e,y,null)}else{const y=n.preOrderHooks;null!==y&&bm(e,y,0,null),cM(e,0)}if(function ede(n){for(let e=LH(n);null!==e;e=VH(e)){if(!(e[ht]&rm.HasTransplantedViews))continue;const t=e[Su];for(let r=0;r<t.length;r++)kw(t[r])}}(e),c$(e,0),null!==n.contentQueries&&e$(n,e),u){const y=n.contentCheckHooks;null!==y&&Mu(e,y)}else{const y=n.contentHooks;null!==y&&bm(e,y,1),cM(e,1)}!function yue(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)As(~i);else{const s=i,o=t[++r],a=t[++r];aM(o,s),a(2,e[s])}}}finally{As(-1)}}(n,e);const h=n.components;null!==h&&d$(e,h,0);const m=n.viewQuery;if(null!==m&&hP(2,m,r),u){const y=n.viewCheckHooks;null!==y&&Mu(e,y)}else{const y=n.viewHooks;null!==y&&bm(e,y,2),cM(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[bh]){for(const y of e[bh])y();e[bh]=null}e[ht]&=-73}catch(u){throw yc(e),u}finally{null!==c&&(et(c,l),a&&function que(n){n.lView[bo]!==n&&(n.lView=null,o$.push(n))}(c)),dt()}}function c$(n,e){for(let t=LH(n);null!==t;t=VH(t))for(let r=Cr;r<t.length;r++)u$(t[r],e)}function tde(n,e,t){u$(Ts(e,n),t)}function u$(n,e){Ky(n)&&gP(n,e)}function gP(n,e){const r=n[He],i=n[ht],s=n[bo];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!qt(s)),o||=!1,s&&(s.dirty=!1),n[ht]&=-9217,o)Jue(r,n,r.template,n[Zn]);else if(8192&i){c$(n,1);const a=r.components;null!==a&&d$(n,a,1)}}function d$(n,e,t){for(let r=0;r<e.length;r++)tde(n,e[r],t)}function Cv(n,e){const t=xh()?64:1088;for(n[pa].changeDetectionScheduler?.notify(e);n;){n[ht]|=t;const r=Ua(n);if(jo(n)&&!r)return n;n=r}return null}class Tv{get rootNodes(){const e=this._lView,t=e[He];return wv(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zn]}set context(e){this._lView[Zn]=e}get destroyed(){return!(256&~this._lView[ht])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[qr];if(pi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(bv(e,r),ch(t,r))}this._attachedToViewContainer=!1}dC(this._lView[He],this._lView)}onDestroy(e){pm(this._lView,e)}markForCheck(){Cv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ht]&=-129}reattach(){Qy(this._lView),this._lView[ht]|=128}detectChanges(){this._lView[ht]|=1024,_C(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=jo(this._lView),t=this._lView[pc];null!==t&&!e&&XM(t,this._lView),D3(this._lView[He],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;const t=jo(this._lView),r=this._lView[pc];null!==r&&!t&&R3(r,this._lView),Qy(this._lView)}}let Ha=(()=>{class n{static{this.__NG_ELEMENT_ID__=ide}}return n})();const nde=Ha,rde=class extends nde{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Pm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Tv(i)}};function ide(){return yC(Vn(),Te())}function yC(n,e){return 4&n.type?new rde(e,n,Cm(n,e)):null}let P$=()=>null;function Uh(n,e){return P$(n,e)}class Om{}const kv=new Ee("",{providedIn:"root",factory:()=>!1}),k$=new Ee(""),SP=new Ee("");class Yde{}class N${}class Zde{resolveComponentFactory(e){throw function Xde(n){const e=Error(`No component factory found for ${ti(n)}.`);return e.ngComponent=n,e}(e)}}class CC{static{this.NULL=new Zde}}class jh{}let $a=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Jde(){const n=Te(),t=Ts(Vn().index,n);return(Kr(t)?t:n)[Rt]}()}}return n})(),ehe=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>null})}}return n})();function AC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=ic(i,a):2==s&&(r=ic(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class V$ extends CC{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Xt(e);return new Fv(t,this.ngModule)}}function B$(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;t.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:fa.None)&fa.SignalBased)}:{propName:o,templateName:r})}return t}class Fv extends N${get inputs(){const e=this.componentDef,t=e.inputTransforms,r=B$(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return B$(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function DR(n){return n.map(Oy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=ne(null);try{let o=(i=i||this.ngModule)instanceof Oi?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Rh(e,o):e,l=a.get(jh,null);if(null===l)throw new K(407,!1);const h={rendererFactory:l,sanitizer:a.get(ehe,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(Om,null)},m=l.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?function bue(n,e,t,r){const s=r.get(n3,!1)||t===vo.ShadowDom,o=n.selectRootElement(e,s);return function Eue(n){K3(n)}(o),o}(m,r,this.componentDef.encapsulation,a):uC(m,y,function rhe(n){const e=n.toLowerCase();return"svg"===e?dm:"math"===e?"math":null}(y));let T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let M=null;null!==b&&(M=OM(b,a,!0));const B=lP(0,null,null,1,0,null,null,null,null,null,null),V=pC(null,B,null,T,null,null,h,m,a,null,M);R(V);let Q,we,je=null;try{const $e=this.componentDef;let H,L=null;$e.findHostDirectiveDefs?(H=[],L=new Map,$e.findHostDirectiveDefs($e,H,L),H.push($e)):H=[$e];const W=function she(n,e){const t=n[He],r=ut;return n[r]=e,Lh(t,r,2,"#host",null)}(V,b);je=function ohe(n,e,t,r,i,s,o){const a=i[He];!function ahe(n,e,t,r){for(const i of n)e.mergedAttrs=fh(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(AC(e,e.mergedAttrs,!0),null!==t&&z3(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=OM(e,i[ni]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const h=pC(i,q3(t),null,u,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&uP(a,n,r.length-1),mC(i,h),i[n.index]=h}(W,b,$e,H,V,h,m),we=Du(B,ut),b&&function che(n,e,t,r){if(r)hh(n,t,["ng-version","18.2.13"]);else{const{attrs:i,classes:s}=function Fy(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Qs(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&hh(n,t,i),s&&s.length>0&&j3(n,t,s.join(" "))}}(m,$e,b,r),void 0!==t&&function uhe(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(we,this.ngContentSelectors,t),Q=function lhe(n,e,t,r,i,s){const o=Vn(),a=i[He],l=qi(o,i);X3(a,i,o,t,null,r);for(let u=0;u<t.length;u++)xs(Mh(i,a,o.directiveStart+u,o),i);Z3(a,i,o),l&&xs(l,i);const c=Mh(i,a,o.directiveStart+o.componentOffset,o);if(n[Zn]=i[Zn]=c,null!==s)for(const u of s)u(c,e);return sP(a,o,i),c}(je,$e,H,L,V,[dhe]),pP(B,V,null)}catch($e){throw null!==je&&TM(je),TM(V),$e}finally{dt()}return new ihe(this.componentType,Q,Cm(we,V),V,we)}finally{ne(s)}}}class ihe extends Yde{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Tv(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;fP(s[He],s,i,e,t),this.previousInputValues.set(e,t),Cv(Ts(this._tNode.index,s),1)}}get injector(){return new Li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function dhe(){const n=Vn();vm(Te()[He],n)}let qo=(()=>{class n{static{this.__NG_ELEMENT_ID__=hhe}}return n})();function hhe(){return z$(Vn(),Te())}const fhe=qo,U$=class extends fhe{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Cm(this._hostTNode,this._hostLView)}get injector(){return new Li(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ww(this._hostTNode,this._hostLView);if(hM(e)){const t=av(e,this._hostLView),r=ov(e);return new Li(t[He].data[r+8],t)}return new Li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=j$(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Cr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=Uh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Vh(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function wu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const l=o?e:new Fv(Xt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const T=(o?c:this.parentInjector).get(Oi,null);T&&(s=T)}const u=Xt(l.componentType??{}),h=Uh(this._lContainer,u?.id??null),y=l.create(c,i,h?.firstChild??null,s);return this.insertImpl(y.hostView,a,Vh(this._hostTNode,h)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function JR(n){return pi(n[qr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[qr],c=new U$(l,l[Fi],l[qr]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return km(o,i,s,r),e.attachToViewContainerRef(),Gp(RP(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=j$(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=bv(this._lContainer,t);r&&(ch(RP(this._lContainer),t),dC(r[He],r))}detach(e){const t=this._adjustIndex(e,-1),r=bv(this._lContainer,t);return r&&null!=ch(RP(this._lContainer),t)?new Tv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function j$(n){return n[8]}function RP(n){return n[8]||(n[8]=[])}function z$(n,e){let t;const r=e[n.index];return pi(r)?t=r:(t=J3(r,e,null,n),e[n.index]=t,mC(e,t)),H$(t,e,n,r),new U$(t,n,e)}let H$=function W$(n,e,t,r){if(n[ma])return;let i;i=8&t.type?fn(r):function phe(n,e){const t=n[Rt],r=t.createComment(""),i=qi(e,n);return Oh(t,eP(t,i),r,function fue(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ma]=i},MP=()=>!1;class PP{constructor(e){this.queryList=e,this.matches=null}clone(){return new PP(this.queryList)}setDirty(){this.queryList.setDirty()}}class kP{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new kP(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==VP(e,t).matches&&this.queries[t].setDirty()}}class G${constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function Ihe(n){return n.split(",").map(e=>e.trim())}(e):e}}class NP{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new NP(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class OP{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new OP(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,yhe(t,s)),this.matchTNodeWithReadOption(e,t,Gw(t,e,s,!1,!1))}else r===Ha?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gw(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Jn||i===qo||i===Ha&&4&t.type)this.addMatch(t.index,-2);else{const s=Gw(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function yhe(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function bhe(n,e,t,r){return-1===t?function vhe(n,e){return 11&n.type?Cm(n,e):4&n.type?yC(n,e):null}(e,n):-2===t?function Ehe(n,e,t){return t===Jn?Cm(e,n):t===Ha?yC(e,n):t===qo?z$(e,n):void 0}(n,e,r):Mh(n,n[He],t,e)}function q$(n,e,t,r){const i=e[Ba].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:bhe(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function FP(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=q$(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let h=Cr;h<u.length;h++){const m=u[h];m[pc]===m[qr]&&FP(m[He],m,c,r)}if(null!==u[Su]){const h=u[Su];for(let m=0;m<h.length;m++){const y=h[m];FP(y[He],y,c,r)}}}}}return r}function K$(n,e,t){const r=new Tm(!(4&~t));return function Cue(n,e,t,r){const i=t$(e);i.push(t),n.firstCreatePass&&n$(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[Ba]??=new kP).queries.push(new PP(r))-1}function X$(n,e,t){null===n.queries&&(n.queries=new NP),n.queries.track(new OP(e,t))}function VP(n,e){return n.queries.getByIndex(e)}function Z$(n,e){const t=n[He],r=VP(t,e);return r.crossesNgTemplate?FP(t,n,e,[]):q$(t,n,r,e)}const J$=new Set;function Xs(n){J$.has(n)||(J$.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Lv(n){return"function"==typeof n&&void 0!==n[he]}function zh(n,e){Xs("NgSignals");const t=function Wr(n){const e=Object.create(_e);e.value=n;const t=()=>($(e),e.value);return t[he]=e,t}(n),r=t[he];return e?.equal&&(r.equal=e.equal),t.set=i=>le(r,i),t.update=i=>function ue(n,e){nt()||Dn(),le(n,e(n.value))}(r,i),t.asReadonly=eW.bind(t),t}function eW(){const n=this[he];if(void 0===n.readonlyFn){const e=()=>this();e[he]=n,n.readonlyFn=e}return n.readonlyFn}function tW(n){return Lv(n)&&"function"==typeof n.set}function bn(n){let e=function hW(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Uo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=xC(n.inputs),o.inputTransforms=xC(n.inputTransforms),o.declaredInputs=xC(n.declaredInputs),o.outputs=xC(n.outputs);const a=i.hostBindings;a&&Lhe(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&Ohe(n,l),c&&Fhe(n,c),khe(n,i),wr(n.outputs,i.outputs),Uo(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===bn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Nhe(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fh(i.hostAttrs,t=fh(t,i.hostAttrs))}}(r)}function khe(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function xC(n){return n===_o?{}:n===yn?[]:n}function Ohe(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Fhe(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Lhe(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function fW(n){const e=t=>{const r=Array.isArray(n);null===t.hostDirectives?(t.findHostDirectiveDefs=pW,t.hostDirectives=r?n.map(UP):[n]):r?t.hostDirectives.unshift(...n.map(UP)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function pW(n,e,t){if(null!==n.hostDirectives)for(const r of n.hostDirectives)if("function"==typeof r){const i=r();for(const s of i)mW(UP(s),e,t)}else mW(r,e,t)}function mW(n,e,t){const r=fi(n.directive);(function jhe(n,e){for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=n[t])})(r.declaredInputs,n.inputs),pW(r,e,t),t.set(r,n),e.push(r)}function UP(n){return"function"==typeof n?{directive:xt(n),inputs:_o,outputs:_o}:{directive:xt(n.directive),inputs:gW(n.inputs),outputs:gW(n.outputs)}}function gW(n){if(void 0===n||0===n.length)return _o;const e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function Fu(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class Cc{}class yW{}class jP extends Cc{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new V$(this);const s=Gi(e);this._bootstrapComponents=Wo(s.bootstrap),this._r3Injector=yH(e,t,[{provide:Cc,useValue:this},{provide:CC,useValue:this.componentFactoryResolver},...r],ti(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zP extends yW{constructor(e){super(),this.moduleType=e}create(e){return new jP(this.moduleType,e,[])}}class vW extends Cc{constructor(e){super(),this.componentFactoryResolver=new V$(this),this.instance=null;const t=new Va([...e.providers,{provide:Cc,useValue:this},{provide:CC,useValue:this.componentFactoryResolver}],e.parent||Eu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function DC(n,e,t=null){return new vW({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function RC(n){return!!HP(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function HP(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function wl(n,e,t){return n[e]=t}function mi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Hh(n,e,t,r){const i=mi(n,e,t);return mi(n,e+1,r)||i}function Uv(n,e,t,r,i,s,o,a,l,c){const u=t+ut,h=e.firstCreatePass?function Khe(n,e,t,r,i,s,o,a,l){const c=e.consts,u=Lh(e,n,4,o||null,a||null);cP(e,t,u,Io(c,l)),vm(e,u);const h=u.tView=lP(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,e,n,r,i,s,o,a,l):e.data[u];wo(h,!1);const m=bW(e,n,h,t);Ru()&&hC(e,n,m,h),xs(m,n);const y=J3(m,n,m,h);return n[u]=y,mC(n,y),function $$(n,e,t){return MP(n,e,t)}(y,h,n),xu(h)&&oP(e,n,h),null!=l&&aP(n,h,c),h}function st(n,e,t,r,i,s,o,a){const l=Te(),c=Kt();return Uv(l,c,n,e,t,r,i,Io(c.consts,s),o,a),st}let bW=function EW(n,e,t,r){return Co(!0),e[Rt].createComment("")};var Bm=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Bm||{});let SW=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>new n})}}return n})();class Hv{constructor(){this.ngZone=N(yt),this.scheduler=N(Om),this.errorHandler=N(Ho,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Bm.EarlyRead,Bm.Write,Bm.MixedReadWrite,Bm.Read]}execute(){this.executing=!0;for(const e of Hv.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Oe({token:Hv,providedIn:"root",factory:()=>new Hv})}}class Zhe{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function Lu(n,e){!e?.injector&&Or();const t=e?.injector??N(Pn);return Go(t)?(Xs("NgAfterNextRender"),DW(n,t,e,!0)):RW}function DW(n,e,t,r){const i=e.get(SW);i.impl??=e.get(Hv);const s=t?.phase??Bm.MixedReadWrite,o=!0!==t?.manualCleanup?e.get(cv):null,a=new Zhe(i.impl,function Jhe(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),r,o);return i.impl.register(a),a}const RW={destroy(){}};function Fr(n,e,t,r){const i=Te();return mi(i,zo(),e)&&(Kt(),Il(Bn(),i,n,e,t,r)),Fr}function Gm(n,e,t,r){return mi(n,zo(),t)?e+Ot(t)+r:Vt}function LC(n,e){return n<<17|e<<2}function Bu(n){return n>>17&32767}function e1(n){return 2|n}function Wh(n){return(131068&n)>>2}function t1(n,e){return-131069&n|e<<2}function n1(n){return 1|n}function n5(n,e,t,r){const i=n[t+1],s=null===e;let o=r?Bu(i):Wh(i),a=!1;for(;0!==o&&(!1===a||s);){const c=n[o+1];Ofe(n[o],e)&&(a=!0,n[o+1]=r?n1(c):e1(c)),o=r?Bu(c):Wh(c)}a&&(n[t+1]=r?e1(i):n1(i))}function Ofe(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ml(n,e)>=0}const Vi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function r5(n){return n.substring(Vi.key,Vi.keyEnd)}function i5(n,e){const t=Vi.textEnd;return t===e?-1:(e=Vi.keyEnd=function Bfe(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Vi.key=e,t),eg(n,e,t))}function eg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function De(n,e,t){const r=Te();return mi(r,zo(),e)&&Ao(Kt(),Bn(),r,n,e,r[Rt],t,!1),De}function r1(n,e,t,r,i){const o=i?"class":"style";fP(n,t,e.inputs[o],o,r)}function Wv(n,e,t){return Wa(n,e,t,!1),Wv}function Lr(n,e){return Wa(n,e,null,!0),Lr}function tg(n){Ga(Kfe,Tl,n,!0)}function Tl(n,e){for(let t=function Lfe(n){return function o5(n){Vi.key=0,Vi.keyEnd=0,Vi.value=0,Vi.valueEnd=0,Vi.textEnd=n.length}(n),i5(n,eg(n,0,Vi.textEnd))}(e);t>=0;t=i5(e,t))Pi(n,r5(e),!0)}function Wa(n,e,t,r){const i=Te(),s=Kt(),o=za(2);s.firstUpdatePass&&u5(s,n,o,r),e!==Vt&&mi(i,o,e)&&h5(s,s.data[Mn()],i,i[Rt],n,i[o+1]=function Yfe(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ti($o(n)))),n}(e,t),r,o)}function Ga(n,e,t,r){const i=Kt(),s=za(2);i.firstUpdatePass&&u5(i,null,s,r);const o=Te();if(t!==Vt&&mi(o,s,t)){const a=i.data[Mn()];if(p5(a,r)&&!c5(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=ic(l,t||"")),r1(i,a,o,t,r)}else!function Qfe(n,e,t,r,i,s,o,a){i===Vt&&(i=yn);let l=0,c=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const m=l<i.length?i[l+1]:void 0,y=c<s.length?s[c+1]:void 0;let T,b=null;u===h?(l+=2,c+=2,m!==y&&(b=h,T=y)):null===h||null!==u&&u<h?(l+=2,b=u):(c+=2,b=h,T=y),null!==b&&h5(n,e,t,r,b,T,o,a),u=l<i.length?i[l]:null,h=c<s.length?s[c]:null}}(i,a,o,o[Rt],o[s+1],o[s+1]=function qfe(n,e,t){if(null==t||""===t)return yn;const r=[],i=$o(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}function c5(n,e){return e>=n.expandoStartIndex}function u5(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Mn()],o=c5(n,t);p5(s,r)&&null===e&&!o&&(e=!1),e=function Hfe(n,e,t,r){const i=function g(n){const e=Mt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Gv(t=s1(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=s1(i,n,e,t,r),null===s){let l=function $fe(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Wh(r))return n[Bu(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=s1(null,n,e,l[1],r),l=Gv(l,e.attrs,r),function Wfe(n,e,t,r){n[Bu(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function Gfe(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Gv(r,n[s].hostAttrs,t);return Gv(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function kfe(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Bu(o),l=Wh(o);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||ml(t,u)>0)&&(c=!0)):u=t,i)if(0!==l){const m=Bu(n[a+1]);n[r+1]=LC(m,a),0!==m&&(n[m+1]=t1(n[m+1],r)),n[a+1]=function Mfe(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=LC(a,0),0!==a&&(n[a+1]=t1(n[a+1],r)),a=r;else n[r+1]=LC(l,0),0===a?a=r:n[l+1]=t1(n[l+1],r),l=r;c&&(n[r+1]=e1(n[r+1])),n5(n,u,r,!0),n5(n,u,r,!1),function Nfe(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ml(s,e)>=0&&(t[r+1]=n1(t[r+1]))}(e,u,n,r,s),o=LC(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function s1(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Gv(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Gv(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pi(n,o,!!t||e[++s]))}return void 0===n?null:n}function Kfe(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Pi(n,r,t)}function h5(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function Pfe(n){return!(1&~n)}(c)?f5(l,e,t,i,Wh(c),o):void 0;VC(u)||(VC(s)||function Rfe(n){return!(2&~n)}(c)&&(s=f5(l,null,t,i,a,o)),function gue(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:ku.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ku.Important),n.setStyle(t,r,i,s))}}(r,o,Ch(Mn(),t),i,s))}function f5(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let m=t[i+1];m===Vt&&(m=h?yn:void 0);let y=h?uh(m,r):u===r?m:void 0;if(c&&!VC(y)&&(y=uh(l,r)),VC(y)&&(a=y,o))return a;const b=n[i+1];i=o?Bu(b):Wh(b)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=uh(l,r))}return a}function VC(n){return void 0!==n}function p5(n,e){return!!(n.flags&(e?8:16))}function qv(n,e,t){Ga(Pi,Tl,Gm(Te(),n,e,t),!0)}function BC(n,e){Xs("NgControlFlow");const t=Te(),r=zo(),i=t[r]!==Vt?t[r]:-1,s=-1!==i?UC(t,ut+i):void 0;if(mi(t,r,n)){const a=ne(null);try{if(void 0!==s&&function mP(n,e){const t=bv(n,e);return void 0!==t&&dC(t[He],t),t}(s,0),-1!==n){const l=ut+n,c=UC(t,l),u=function l1(n,e){return Du(n,e)}(t[He],l),h=Uh(c,u.tView.ssrId);km(c,Pm(t,u,e,{dehydratedView:h}),0,Vh(u,h))}}finally{ne(a)}}else if(void 0!==s){const a=function i$(n,e){const t=Cr+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Zn]=e)}}function UC(n,e){return n[e]}function te(n,e,t,r){const i=Te(),s=Kt(),o=ut+n,a=i[Rt],l=s.firstCreatePass?function _pe(n,e,t,r,i,s){const o=e.consts,l=Lh(e,n,2,r,Io(o,i));return cP(e,t,l,Io(o,s)),null!==l.attrs&&AC(l,l.attrs,!1),null!==l.mergedAttrs&&AC(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=y5(s,i,l,a,e,n);i[o]=c;const u=xu(l);return wo(l,!0),z3(a,c,l),!function Lm(n){return!(32&~n.flags)}(l)&&Ru()&&hC(s,i,c,l),0===function Zy(){return Mt.lFrame.elementDepthCount}()&&xs(c,i),function eM(){Mt.lFrame.elementDepthCount++}(),u&&(oP(s,i,l),sP(s,l,i)),null!==r&&aP(i,l),te}function ie(){let n=Vn();_m()?Sh():(n=n.parent,wo(n,!1));const e=n;(function nM(n){return Mt.skipHydrationRootTNode===n})(e)&&function sM(){Mt.skipHydrationRootTNode=null}(),function tM(){Mt.lFrame.elementDepthCount--}();const t=Kt();return t.firstCreatePass&&(vm(t,n),Eh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function ole(n){return!!(8&n.flags)}(e)&&r1(t,e,Te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ale(n){return!!(16&n.flags)}(e)&&r1(t,e,Te(),e.stylesWithoutHost,!1),ie}function Et(n,e,t,r){return te(n,e,t,r),ie(),Et}let y5=(n,e,t,r,i,s)=>(Co(!0),uC(r,i,function ym(){return Mt.lFrame.currentNamespace}()));function Ds(n,e,t){const r=Te(),i=Kt(),s=n+ut,o=i.firstCreatePass?function bpe(n,e,t,r,i){const s=e.consts,o=Io(s,r),a=Lh(e,n,8,"ng-container",o);return null!==o&&AC(a,o,!0),cP(e,t,a,Io(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];wo(o,!0);const a=v5(i,r,o,n);return r[s]=a,Ru()&&hC(i,r,a,o),xs(a,r),xu(o)&&(oP(i,r,o),sP(i,o,r)),null!=t&&aP(r,o),Ds}function Rs(){let n=Vn();const e=Kt();return _m()?Sh():(n=n.parent,wo(n,!1)),e.firstCreatePass&&(vm(e,n),Eh(n)&&e.queries.elementEnd(n)),Rs}function ng(n,e,t){return Ds(n,e,t),Rs(),ng}let v5=(n,e,t,r)=>(Co(!0),YM(e[Rt],""));function Bi(){return Te()}function Kv(n,e,t){const r=Te();return mi(r,zo(),e)&&Ao(Kt(),Bn(),r,n,e,r[Rt],t,!0),Kv}const jC="en-US";let w5=jC,j5=(n,e,t)=>{};function Dt(n,e,t,r){const i=Te(),s=Kt(),o=Vn();return d1(s,i,i[Rt],o,n,e,r),Dt}function d1(n,e,t,r,i,s,o){const a=xu(r),c=n.firstCreatePass&&n$(n),u=e[Zn],h=t$(e);let m=!0;if(3&r.type||o){const T=qi(r,e),M=o?o(T):T,B=h.length,V=o?we=>o(fn(we[r.index])):r.index;let Q=null;if(!o&&a&&(Q=function fme(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[fc],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,m=!1;else{s=W5(r,e,u,s),j5(T,i,s);const we=t.listen(M,i,s);h.push(s,we),c&&c.push(i,V,B,B+1)}}else s=W5(r,e,u,s);const y=r.outputs;let b;if(m&&null!==y&&(b=y[i])){const T=b.length;if(T)for(let M=0;M<T;M+=2){const je=e[b[M]][b[M+1]].subscribe(s),$e=h.length;h.push(s,je),c&&c.push(i,r.index,$e,-($e+1))}}}function $5(n,e,t,r){const i=ne(null);try{return Eo(6,e,t),!1!==t(r)}catch(s){return gC(n,s),!1}finally{Eo(7,e,t),ne(i)}}function W5(n,e,t,r){return function i(s){if(s===Function)return r;Cv(n.componentOffset>-1?Ts(n.index,e):e,5);let a=$5(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)a=$5(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function Pe(n=1){return function rn(n){return(Mt.lFrame.contextLView=function Nw(n,e){for(;n>0;)e=e[Cu],n--;return e}(n,Mt.lFrame.contextLView))[Zn]}(n)}function pme(n,e){let t=null;const r=function SR(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Xp(n,s,!0):Ny(r,s))return i}else t=i}return t}function Tc(n){const e=Te()[hr][Fi];if(!e.projection){const r=e.projection=function vu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){if(128!==s.type){const o=n?pme(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Js(n,e=0,t,r,i,s){const o=Te(),a=Kt(),l=r?n+1:null;null!==l&&Uv(o,a,l,r,i,s,null,t);const c=Lh(a,ut+n,16,null,t||null);null===c.projection&&(c.projection=e),Sh();const h=!o[Cs]||vc();null===o[hr][Fi].projection[c.projection]&&null!==l?function mme(n,e,t){const r=ut+t,i=e.data[r],s=n[r],o=Uh(s,i.tView.ssrId);km(s,Pm(n,i,void 0,{dehydratedView:o}),0,Vh(i,o))}(o,a,l):h&&32&~c.flags&&function pue(n,e,t){U3(e[Rt],0,e,t,JM(n,t,e),N3(t.parent||e[Fi],t,e))}(a,o,c)}function Uu(n,e,t){return qh(n,"",e,"",t),Uu}function qh(n,e,t,r,i){const s=Te(),o=Gm(s,e,t,r);return o!==Vt&&Ao(Kt(),Bn(),s,n,o,s[Rt],i,!1),qh}function eb(n,e,t,r){!function Y$(n,e,t,r){const i=Kt();if(i.firstCreatePass){const s=Vn();X$(i,new G$(e,t,r),s.index),function whe(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return K$(i,Te(),t)}(n,e,t,r)}function Kh(n,e,t){!function Q$(n,e,t){const r=Kt();return r.firstCreatePass&&(X$(r,new G$(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),K$(r,Te(),e)}(n,e,t)}function qa(n){const e=Te(),t=Kt(),r=d();f(r+1);const i=VP(t,r);if(n.dirty&&function qy(n){return!(4&~n[ht])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=Z$(e,r);n.reset(s,SH),n.notifyOnChanges()}return!0}return!1}function Ka(){return function LP(n,e){return n[Ba].queries[e].queryList}(Te(),d())}function tb(n){return _c(function Vw(){return Mt.lFrame.contextLView}(),ut+n)}function ze(n,e=""){const t=Te(),r=Kt(),i=n+ut,s=r.firstCreatePass?Lh(r,i,1,e,null):r.data[i],o=cG(r,t,s,e,n);t[i]=o,Ru()&&hC(r,t,o,s),wo(s,!1)}let cG=(n,e,t,r,i)=>(Co(!0),function QM(n,e){return n.createText(e)}(e[Rt],r));function cs(n){return en("",n,""),cs}function en(n,e,t){const r=Te(),i=Gm(r,n,e,t);return i!==Vt&&function wc(n,e,t){const r=Ch(e,n);!function x3(n,e,t){n.setValue(e,t)}(n[Rt],r,t)}(r,Mn(),i),en}function nb(n,e,t){tW(e)&&(e=e());const r=Te();return mi(r,zo(),e)&&Ao(Kt(),Bn(),r,n,e,r[Rt],t,!1),nb}function WC(n,e){const t=tW(n);return t&&n.set(e),t}function rb(n,e){const t=Te(),r=Kt(),i=Vn();return d1(r,t,t[Rt],i,n,e),rb}function f1(n,e,t,r,i){if(n=xt(n),Array.isArray(n))for(let s=0;s<n.length;s++)f1(n[s],e,t,r,i);else{const s=Kt(),o=Te(),a=Vn();let l=dc(n)?n:xt(n.provide);const c=UR(n),u=1048575&a.providerIndexes,h=a.directiveStart,m=a.providerIndexes>>20;if(dc(n)||!n.multi){const y=new sv(c,i,xe),b=m1(l,e,i?u:u+m,h);-1===b?(mM($w(a,o),s,l),p1(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[b]=y,o[b]=y)}else{const y=m1(l,e,u+m,h),b=m1(l,e,u,u+m),M=b>=0&&t[b];if(i&&!M||!i&&!(y>=0&&t[y])){mM($w(a,o),s,l);const B=function Ome(n,e,t,r,i){const s=new sv(n,t,xe);return s.multi=[],s.index=e,s.componentProviders=0,bG(s,i,r&&!t),s}(i?Nme:kme,t.length,i,r,c);!i&&M&&(t[b].providerFactory=B),p1(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),o.push(B)}else p1(s,n,y>-1?y:b,bG(t[i?b:y],c,!i&&r));!i&&r&&M&&t[b].componentProviders++}}}function p1(n,e,t,r){const i=dc(e),s=function FR(n){return!!n.useClass}(e);if(i||s){const l=(s?xt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function bG(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function m1(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function kme(n,e,t,r){return g1(this.multi,[])}function Nme(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Mh(t,t[He],this.providerFactory.index,r);s=a.slice(0,o),g1(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],g1(i,s);return s}function g1(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function pr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Pme(n,e,t){const r=Kt();if(r.firstCreatePass){const i=Uo(n);f1(t,r.data,r.blueprint,i,!0),f1(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let Fme=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=mw(0,t.type),i=r.length>0?DC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Oe({token:n,providedIn:"environment",factory:()=>new n(Me(Oi))})}}return n})();function wi(n){Xs("NgStandalone"),n.getStandaloneInjector=e=>e.get(Fme).getOrCreateStandaloneInjector(n)}function ib(n,e,t,r){return wG(Te(),Ki(),n,e,t,r)}function sb(n,e){const t=n[e];return t===Vt?void 0:t}function wG(n,e,t,r,i,s){const o=e+t;return mi(n,o,i)?wl(n,o+1,s?r.call(s,i):r(i)):sb(n,o+1)}function TG(n,e,t,r,i,s,o,a){const l=e+t;return function MC(n,e,t,r,i){const s=Hh(n,e,t,r);return mi(n,e+2,i)||s}(n,l,i,s,o)?wl(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):sb(n,l+3)}function Ms(n,e){const t=Kt();let r;const i=n+ut;t.firstCreatePass?(r=function Qme(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Fa(r.type)),a=Nr(xe);try{const l=Hw(!1),c=s();return Hw(l),function h1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Te(),i,c),c}finally{Nr(a)}}function Qh(n,e,t){const r=n+ut,i=Te(),s=_c(i,r);return ab(i,r)?wG(i,Ki(),e,s.transform,t,s):s.transform(t)}function ig(n,e,t,r){const i=n+ut,s=Te(),o=_c(s,i);return ab(s,i)?function CG(n,e,t,r,i,s,o){const a=e+t;return Hh(n,a,i,s)?wl(n,a+2,o?r.call(o,i,s):r(i,s)):sb(n,a+2)}(s,Ki(),e,o.transform,t,r,o):o.transform(t,r)}function ob(n,e,t,r,i){const s=n+ut,o=Te(),a=_c(o,s);return ab(o,s)?TG(o,Ki(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function ab(n,e){return n[He].data[e].pure}function KC(n,e){return yC(n,e)}class Yh{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const HG=new Yh("18.2.13");let $G=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const QG=new Ee(""),XC=new Ee("");let C1,I1=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,C1||(function $ge(n){C1=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(Me(yt),Me(w1),Me(XC))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})(),w1=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return C1?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function ub(n){return!!n&&"function"==typeof n.then}function YG(n){return!!n&&"function"==typeof n.subscribe}const ZC=new Ee("");let XG=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=N(ZC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(ub(s))t.push(s);else if(YG(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const JC=new Ee("");function JG(n,e){return Array.isArray(e)?e.reduce(JG,n):{...n,...e}}let _a=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(Fle),this.afterRenderManager=N(SW),this.zonelessEnabled=N(kv),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new E,this.afterTick=new E,this.componentTypes=[],this.components=[],this.isStable=N(bc).hasPendingTasks.pipe(Be(t=>!t)),this._injector=N(Oi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof N$;if(!this._injector.get(XG).done)throw!i&&function gl(n){const e=Xt(n)||fi(n)||Ni(n);return null!==e&&e.standalone}(t),new K(405,!1);let o;o=i?t:this._injector.get(CC).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Wge(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Cc),c=o.create(Pn.NULL,[],r||o.selector,a),u=c.location.nativeElement,h=c.injector.get(QG,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),eT(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);const t=ne(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ne(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(jh,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)Kge(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Th(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;eT(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(JC,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>eT(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Kge(n,e,t,r){(t||Th(n))&&_C(n,e,t&&!r?0:1)}class Qge{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let t6=(()=>{class n{compileModuleSync(t){return new zP(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Wo(Gi(t).declarations).reduce((o,a)=>{const l=Xt(a);return l&&o.push(new Fv(l)),o},[]);return new Qge(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zge=(()=>{class n{constructor(){this.zone=N(yt),this.changeDetectionScheduler=N(Om),this.applicationRef=N(_a)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new yt({...A1(),scheduleInRootZone:t}),[{provide:yt,useFactory:n},{provide:yo,multi:!0,useFactory:()=>{const r=N(Zge,{optional:!0});return()=>r.initialize()}},{provide:yo,multi:!0,useFactory:()=>{const r=N(e_e);return()=>{r.initialize()}}},!0===e?{provide:k$,useValue:!0}:[],{provide:SP,useValue:t??bH}]}function A1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let e_e=(()=>{class n{constructor(){this.subscription=new Nt,this.initialized=!1,this.zone=N(yt),this.pendingTasks=N(bc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{yt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),db=(()=>{class n{constructor(){this.appRef=N(_a),this.taskService=N(bc),this.ngZone=N(yt),this.zonelessEnabled=N(kv),this.disableScheduling=N(k$,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Nt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Qw):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(SP,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof IM||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?IH:EH;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Qw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,IH(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ac=new Ee("",{providedIn:"root",factory:()=>N(Ac,jt.Optional|jt.SkipSelf)||function t_e(){return typeof $localize<"u"&&$localize.locale||jC}()}),nT=new Ee("");function rT(n){return!n.moduleRef}let a6=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[T1({ngZoneFactory:()=>function Ole(n="zone.js",e){return"noop"===n?new IM:"zone.js"===n?new yt(e):n}(r?.ngZone,{...A1({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:o}),{provide:Om,useExisting:db}],l=function Hhe(n,e,t){return new jP(n,e,t,!1)}(t.moduleType,this.injector,a);return function o6(n){const e=rT(n)?n.r3Injector:n.moduleRef.injector,t=e.get(yt);return t.run(()=>{rT(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(Ho,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),rT(n)){const s=()=>e.destroy(),o=n.platformInjector.get(nT);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(nT);o.add(s),n.moduleRef.onDestroy(()=>{eT(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return function qge(n,e,t){try{const r=t();return ub(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const s=e.get(XG);return s.runInitializers(),s.donePromise.then(()=>{if(function Dpe(n){"string"==typeof n&&(w5=n.toLowerCase().replace(/_/g,"-"))}(e.get(Ac,jC)||jC),rT(n)){const a=e.get(_a);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function a_e(n,e){const t=n.injector.get(_a);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new K(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){const i=JG({},r);return function Xge(n,e,t){const r=new zP(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(nT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(Me(Pn))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ju=null;const l6=new Ee("");function c6(n,e,t=[]){const r=`Platform: ${e}`,i=new Ee(r);return(s=[])=>{let o=x1();if(!o||o.injector.get(l6,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function l_e(n){if(ju&&!ju.get(l6,!1))throw new K(400,!1);(function ZG(){!function rr(n){Er=n}(()=>{throw new K(600,!1)})})(),ju=n;const e=n.get(a6);(function d6(n){n.get(qH,null)?.forEach(t=>t())})(n)}(function u6(n=[],e){return Pn.create({name:e,providers:[{provide:yw,useValue:"platform"},{provide:nT,useValue:new Set([()=>ju=null])},...n]})}(a,r))}return function c_e(){const e=x1();if(!e)throw new K(401,!1);return e}()}}function x1(){return ju?.get(a6)??null}let Sc=(()=>{class n{static{this.__NG_ELEMENT_ID__=d_e}}return n})();function d_e(n){return function h_e(n,e,t){if(gc(n)&&!t){const r=Ts(n.index,e);return new Tv(r,r)}return 175&n.type?new Tv(e[hr],e):null}(Vn(),Te(),!(16&~n))}class _6{constructor(){}supports(e){return RC(e)}create(e){return new __e(e)}}const g_e=(n,e)=>e;class __e{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||g_e}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<v6(r,i,s)?t:r,a=v6(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,b=y+m;u<=b&&b<c&&(s[m]=y+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!RC(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Ghe(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new y_e(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new y6),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new y6),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class y_e{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class v_e{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class y6{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new v_e,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function v6(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class b6{constructor(){}supports(e){return e instanceof Map||HP(e)}create(){return new b_e}}class b_e{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||HP(e)))throw new K(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new E_e(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class E_e{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function E6(){return new k1([new _6])}let k1=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:E6})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||E6()),deps:[[n,new cc,new Mi]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new K(901,!1)}}return n})();function I6(){return new oT([new b6])}let oT=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:I6})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||I6()),deps:[[n,new cc,new Mi]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();const C_e=c6(null,"core",[]);let T_e=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(Me(_a))}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({})}}return n})();function Qi(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function F1(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}function mb(n,e){Xs("NgSignals");const t=function ae(n){const e=Object.create(Sn);e.computation=n;const t=()=>{if(Re(e),$(e),e.value===Ht)throw e.error;return e.value};return t[he]=e,t}(n);return e?.equal&&(t[he].equal=e.equal),t}function Qa(n){const e=ne(null);try{return n()}finally{ne(e)}}const rye=new Ee("",{providedIn:"root",factory:()=>N(iye)});let iye=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>new sye})}}return n})();class sye{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=N(bc),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){const t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}class oye{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=function Pt(n,e,t){const r=Object.create(Ct);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=l=>{r.cleanupFn=l};return r.ref={notify:()=>Ze(r),run:()=>{if(null===r.fn)return;if(function ee(){return x}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!qt(r))return;r.hasRun=!0;const l=Je(r);try{r.cleanupFn(),r.cleanupFn=Rn,r.fn(i)}finally{et(r,l)}},cleanup:()=>r.cleanupFn(),destroy:()=>function o(l){(function s(l){return null===l.fn&&null===l.schedule})(l)||(Jt(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Rn)}(r),[he]:r},r.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Ho,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function G6(n,e){const t=Xt(n),r=e.elementInjector||Eu();return new Fv(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}let q6=null;function zu(){return q6}class cye{}const En=new Ee("");let L1=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>N(dye),providedIn:"platform"})}}return n})();const uye=new Ee("");let dye=(()=>{class n extends L1{constructor(){super(),this._doc=N(En),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zu().getBaseHref(this._doc)}onPopState(t){const r=zu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=zu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function V1(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function K6(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function xc(n){return n&&"?"!==n[0]?"?"+n:n}let Zh=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>N(Y6),providedIn:"root"})}}return n})();const Q6=new Ee("");let Y6=(()=>{class n extends Zh{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(En).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V1(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+xc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+xc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+xc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Me(L1),Me(Q6,8))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hye=(()=>{class n extends Zh{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V1(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+xc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+xc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Me(L1),Me(Q6,8))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})(),ag=(()=>{class n{constructor(t){this._subject=new vn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function mye(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(K6(X6(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+xc(r))}normalize(t){return n.stripTrailingSlash(function pye(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,X6(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=xc}static{this.joinWithSlash=V1}static{this.stripTrailingSlash=K6}static{this.\u0275fac=function(r){return new(r||n)(Me(Zh))}}static{this.\u0275prov=Oe({token:n,factory:()=>function fye(){return new ag(Me(Zh))}(),providedIn:"root"})}}return n})();function X6(n){return n.replace(/\/index.html$/,"")}function o7(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const K1=/\s+/,a7=[];let l7=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=a7,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(K1):a7}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(K1):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(K1).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(xe(Jn),xe($a))}}static{this.\u0275dir=tt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class eve{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _b=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new eve(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),u7(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{u7(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(xe(qo),xe(Ha),xe(k1))}}static{this.\u0275dir=tt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function u7(n,e){n.context.$implicit=e.item}let Jh=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tve,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){d7("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){d7("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(xe(qo),xe(Ha))}}static{this.\u0275dir=tt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class tve{constructor(){this.$implicit=null,this.ngIf=null}}function d7(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ti(e)}'.`)}let f7=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:ku.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(xe(Jn),xe(oT),xe($a))}}static{this.\u0275dir=tt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),p7=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static{this.\u0275fac=function(r){return new(r||n)(xe(qo))}}static{this.\u0275dir=tt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[as]})}}return n})();function Xa(n,e){return new K(2100,!1)}class sve{createSubscription(e,t){return Qa(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Qa(()=>e.unsubscribe())}}class ove{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ave=new ove,lve=new sve;let m7=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ub(t))return ave;if(YG(t))return lve;throw Xa()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(xe(Sc,16))}}static{this.\u0275pipe=ki({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),_7=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Xa();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"slice",type:n,pure:!1,standalone:!0})}}return n})(),J1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({})}}return n})();const y7="browser";function v7(n){return n===y7}function CT(n){return"server"===n}let Sve=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>v7(N(Ys))?new xve(N(En),window):new Rve})}}return n})();class xve{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Dve(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class Rve{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class b7{}class ibe extends cye{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rk extends ibe{static makeCurrent(){!function lye(n){q6??=n}(new rk)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function sbe(){return bb=bb||document.querySelector("base"),bb?bb.getAttribute("href"):null}();return null==t?null:function obe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){bb=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return o7(document.cookie,e)}}let bb=null,lbe=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const ik=new Ee("");let M7=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Me(ik),Me(yt))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();class P7{constructor(e){this._doc=e}}const sk="ng-app-id";let k7=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=CT(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${sk}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(sk),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(sk,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Me(En),Me(Ph),Me(xM,8),Me(Ys))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const ok={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ak=/%COMP%/g,hbe=new Ee("",{providedIn:"root",factory:()=>!0});function O7(n,e){return e.map(t=>t.replace(ak,n))}let lk=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=CT(a),this.defaultRenderer=new ck(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vo.ShadowDom&&(r={...r,encapsulation:vo.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof L7?i.applyToHost(t):i instanceof uk&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case vo.Emulated:s=new L7(l,c,r,this.appId,u,o,a,h);break;case vo.ShadowDom:return new gbe(l,c,t,r,o,a,this.nonce,h);default:s=new uk(l,c,r,u,o,a,h)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Me(M7),Me(k7),Me(Ph),Me(hbe),Me(En),Me(Ys),Me(yt),Me(xM))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();class ck{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ok[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(F7(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(F7(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ok[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ok[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ku.DashCase|ku.Important)?e.style.setProperty(t,r,i&ku.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ku.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=zu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function F7(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class gbe extends ck{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=O7(i.id,i.styles);for(const u of c){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class uk extends ck{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?O7(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class L7 extends uk{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function fbe(n){return"_ngcontent-%COMP%".replace(ak,n)}(c),this.hostAttr=function pbe(n){return"_nghost-%COMP%".replace(ak,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let _be=(()=>{class n extends P7{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Me(En))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const V7=["alt","control","meta","shift"],ybe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vbe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bbe=(()=>{class n extends P7{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zu().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),V7.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=ybe[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),V7.forEach(o=>{o!==i&&(0,vbe[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Me(En))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const Cbe=c6(C_e,"browser",[{provide:Ys,useValue:y7},{provide:qH,useValue:function Ebe(){rk.makeCurrent()},multi:!0},{provide:En,useFactory:function wbe(){return function ice(n){SM=n}(document),document},deps:[]}]),Tbe=new Ee(""),j7=[{provide:XC,useClass:class abe{addToWindow(e){Gn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new K(5103,!1);return s},Gn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Gn.getAllAngularRootElements=()=>e.getAllRootElements(),Gn.frameworkStabilizers||(Gn.frameworkStabilizers=[]),Gn.frameworkStabilizers.push(r=>{const i=Gn.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?zu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:QG,useClass:I1,deps:[yt,w1,XC]},{provide:I1,useClass:I1,deps:[yt,w1,XC]}],z7=[{provide:yw,useValue:"root"},{provide:Ho,useFactory:function Ibe(){return new Ho},deps:[]},{provide:ik,useClass:_be,multi:!0,deps:[En,yt,Ys]},{provide:ik,useClass:bbe,multi:!0,deps:[En]},lk,k7,M7,{provide:jh,useExisting:lk},{provide:b7,useClass:lbe,deps:[]},[]];let H7=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ph,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(Me(Tbe,12))}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({providers:[...z7,...j7],imports:[J1,T_e]})}}return n})(),Abe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Me(En))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:function(r){let i=null;return i=r?new(r||n):Me(Rbe),i},providedIn:"root"})}}return n})(),Rbe=(()=>{class n extends dk{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case ls.NONE:return r;case ls.HTML:return El(r,"HTML")?$o(r):g3(this._doc,String(r)).toString();case ls.STYLE:return El(r,"Style")?$o(r):r;case ls.SCRIPT:if(El(r,"Script"))return $o(r);throw new K(5200,!1);case ls.URL:return El(r,"URL")?$o(r):oC(String(r));case ls.RESOURCE_URL:if(El(r,"ResourceURL"))return $o(r);throw new K(5201,!1);default:throw new K(5202,!1)}}bypassSecurityTrustHtml(t){return function Tce(n){return new vce(n)}(t)}bypassSecurityTrustStyle(t){return function Ace(n){return new bce(n)}(t)}bypassSecurityTrustScript(t){return function Sce(n){return new Ece(n)}(t)}bypassSecurityTrustUrl(t){return function xce(n){return new Ice(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Dce(n){return new wce(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(Me(En))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O=G(467);function G7(n){return n&&mt(n.schedule)}function hk(n){return n[n.length-1]}function fk(n){return mt(hk(n))?n.pop():void 0}function Eb(n){return G7(hk(n))?n.pop():void 0}var Mc=G(1635);const pk=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function q7(n){return mt(n?.then)}function K7(n){return mt(n[po])}function Q7(n){return Symbol.asyncIterator&&mt(n?.[Symbol.asyncIterator])}function Y7(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const X7=function Pbe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Z7(n){return mt(n?.[X7])}function J7(n){return(0,Mc.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Mc.N3)(t.read());if(i)return yield(0,Mc.N3)(void 0);yield yield(0,Mc.N3)(r)}}finally{t.releaseLock()}})}function e8(n){return mt(n?.getReader)}function no(n){if(n instanceof Ut)return n;if(null!=n){if(K7(n))return function kbe(n){return new Ut(e=>{const t=n[po]();if(mt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(pk(n))return function Nbe(n){return new Ut(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(q7(n))return function Obe(n){return new Ut(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ka)})}(n);if(Q7(n))return t8(n);if(Z7(n))return function Fbe(n){return new Ut(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(e8(n))return function Lbe(n){return t8(J7(n))}(n)}throw Y7(n)}function t8(n){return new Ut(e=>{(function Vbe(n,e){var t,r,i,s;return(0,Mc.sH)(this,void 0,void 0,function*(){try{for(t=(0,Mc.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Pc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Hu(n,e=0){return ye((t,r)=>{t.subscribe(Fe(r,i=>Pc(r,n,()=>r.next(i),e),()=>Pc(r,n,()=>r.complete(),e),i=>Pc(r,n,()=>r.error(i),e)))})}function tf(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function n8(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ut(t=>{Pc(t,e,()=>{const r=n[Symbol.asyncIterator]();Pc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function zn(n,e){return e?function $be(n,e){if(null!=n){if(K7(n))return function Bbe(n,e){return no(n).pipe(tf(e),Hu(e))}(n,e);if(pk(n))return function jbe(n,e){return new Ut(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(q7(n))return function Ube(n,e){return no(n).pipe(tf(e),Hu(e))}(n,e);if(Q7(n))return n8(n,e);if(Z7(n))return function zbe(n,e){return new Ut(t=>{let r;return Pc(t,e,()=>{r=n[X7](),Pc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>mt(r?.return)&&r.return()})}(n,e);if(e8(n))return function Hbe(n,e){return n8(J7(n),e)}(n,e)}throw Y7(n)}(n,e):no(n)}function qe(...n){return zn(n,Eb(n))}function Yi(n,e,t=1/0){return mt(e)?Yi((r,i)=>Be((s,o)=>e(r,s,i,o))(no(n(r,i))),t):("number"==typeof e&&(t=e),ye((r,i)=>function Wbe(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,h=!1;const m=()=>{h&&!l.length&&!c&&e.complete()},y=T=>c<r?b(T):l.push(T),b=T=>{s&&e.next(T),c++;let M=!1;no(t(T,u++)).subscribe(Fe(e,B=>{i?.(B),s?y(B):e.next(B)},()=>{M=!0},void 0,()=>{if(M)try{for(c--;l.length&&c<r;){const B=l.shift();o?Pc(e,o,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(Fe(e,y,()=>{h=!0,m()})),()=>{a?.()}}(r,i,n,t)))}function ug(n,e){return mt(e)?Yi(n,e,1):Yi(n,1)}function ii(n,e){return ye((t,r)=>{let i=0;t.subscribe(Fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function dg(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qt(n,e){return ye((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Fe(r,l=>{i?.unsubscribe();let c=0;const u=s++;no(n(l,u)).subscribe(i=Fe(r,h=>r.next(e?e(l,h,u,c++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}class DT{}class RT{}class ba{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ba?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ba;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ba?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Gbe{encodeKey(e){return r8(e)}encodeValue(e){return r8(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Kbe=/%(\d[a-f0-9])/gi,Qbe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function r8(n){return encodeURIComponent(n).replace(Kbe,(e,t)=>Qbe[t]??e)}function MT(n){return`${n}`}class Al{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Gbe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function qbe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(MT):[MT(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Al({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(MT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(MT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ybe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function i8(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function s8(n){return typeof Blob<"u"&&n instanceof Blob}function o8(n){return typeof FormData<"u"&&n instanceof FormData}class Ib{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Xbe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ba,this.context??=new Ybe,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Al,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||i8(this.body)||s8(this.body)||o8(this.body)||function Zbe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Al?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||o8(this.body)?null:s8(this.body)?this.body.type||null:i8(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Al?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),u)),new Ib(t,r,o,{params:u,headers:c,context:h,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}}var $u=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}($u||{});class mk{constructor(e,t=200,r="OK"){this.headers=e.headers||new ba,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class PT extends mk{constructor(e={}){super(e),this.type=$u.ResponseHeader}clone(e={}){return new PT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nf extends mk{constructor(e={}){super(e),this.type=$u.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hg extends mk{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function gk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let wb=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ib)s=t;else{let l,c;l=i.headers instanceof ba?i.headers:new ba(i.headers),i.params&&(c=i.params instanceof Al?i.params:new Al({fromObject:i.params})),s=new Ib(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=qe(s).pipe(ug(l=>this.handler.handle(l)));if(t instanceof Ib||"events"===i.observe)return o;const a=o.pipe(ii(l=>l instanceof nf));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Be(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Be(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Be(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Be(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Al).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,gk(i,r))}post(t,r,i={}){return this.request("POST",t,gk(i,r))}put(t,r,i={}){return this.request("PUT",t,gk(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Me(DT))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const tEe=/^\)\]\}',?\n/;function l8(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let _k=(()=>{class n{constructor(){this.fetchImpl=N(rEe,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=N(yt)}handle(t){return new Ut(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(yk,s=>r.error(new hg({error:s}))),()=>i.abort()})}doRequest(t,r,i){var s=this;return(0,O.A)(function*(){const o=s.createRequestInit(t);let a;try{const b=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:r,...o}));(function iEe(n){n.then(yk,yk)})(b),i.next({type:$u.Sent}),a=yield b}catch(b){return void i.error(new hg({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}))}const l=new ba(a.headers),c=a.statusText,u=l8(a)??t.urlWithParams;let h=a.status,m=null;if(t.reportProgress&&i.next(new PT({headers:l,status:h,statusText:c,url:u})),a.body){const b=a.headers.get("content-length"),T=[],M=a.body.getReader();let V,Q,B=0;const we=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,O.A)(function*(){for(;;){const{done:$e,value:H}=yield M.read();if($e)break;if(T.push(H),B+=H.length,t.reportProgress){Q="text"===t.responseType?(Q??"")+(V??=new TextDecoder).decode(H,{stream:!0}):void 0;const L=()=>i.next({type:$u.DownloadProgress,total:b?+b:void 0,loaded:B,partialText:Q});we?we.run(L):L()}}}));const je=s.concatChunks(T,B);try{const $e=a.headers.get("Content-Type")??"";m=s.parseBody(t,je,$e)}catch($e){return void i.error(new hg({error:$e,headers:new ba(a.headers),status:a.status,statusText:a.statusText,url:l8(a)??t.urlWithParams}))}}0===h&&(h=m?200:0),h>=200&&h<300?(i.next(new nf({body:m,headers:l,status:h,statusText:c,url:u})),i.complete()):i.error(new hg({error:m,headers:l,status:h,statusText:c,url:u}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const s=(new TextDecoder).decode(r).replace(tEe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let s=0;for(const o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();class rEe{}function yk(){}function c8(n,e){return e(n)}function sEe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const aEe=new Ee(""),Cb=new Ee(""),u8=new Ee(""),d8=new Ee("",{providedIn:"root",factory:()=>!0});function lEe(){let n=null;return(e,t)=>{null===n&&(n=(N(aEe,{optional:!0})??[]).reduceRight(sEe,c8));const r=N(bc);if(N(d8)){const s=r.add();return n(e,t).pipe(dg(()=>r.remove(s)))}return n(e,t)}}let h8=(()=>{class n extends DT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=N(bc),this.contributeToStability=N(d8)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Cb),...this.injector.get(u8,[])]));this.chain=r.reduceRight((i,s)=>function oEe(n,e,t){return(r,i)=>ws(t,()=>e(r,s=>n(s,i)))}(i,s,this.injector),c8)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(dg(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Me(RT),Me(Oi))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const fEe=/^\)\]\}',?\n/;let p8=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new K(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?zn(r.\u0275loadImpl()):qe(null)).pipe(Qt(()=>new Ut(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((T,M)=>o.setRequestHeader(T,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const T=t.detectContentTypeHeader();null!==T&&o.setRequestHeader("Content-Type",T)}if(t.responseType){const T=t.responseType.toLowerCase();o.responseType="json"!==T?T:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const T=o.statusText||"OK",M=new ba(o.getAllResponseHeaders()),B=function pEe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new PT({headers:M,status:o.status,statusText:T,url:B}),l},u=()=>{let{headers:T,status:M,statusText:B,url:V}=c(),Q=null;204!==M&&(Q=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=Q?200:0);let we=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof Q){const je=Q;Q=Q.replace(fEe,"");try{Q=""!==Q?JSON.parse(Q):null}catch($e){Q=je,we&&(we=!1,Q={error:$e,text:Q})}}we?(s.next(new nf({body:Q,headers:T,status:M,statusText:B,url:V||void 0})),s.complete()):s.error(new hg({error:Q,headers:T,status:M,statusText:B,url:V||void 0}))},h=T=>{const{url:M}=c(),B=new hg({error:T,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(B)};let m=!1;const y=T=>{m||(s.next(c()),m=!0);let M={type:$u.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(M.total=T.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},b=T=>{let M={type:$u.UploadProgress,loaded:T.loaded};T.lengthComputable&&(M.total=T.total),s.next(M)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),t.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:$u.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Me(b7))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const vk=new Ee(""),m8=new Ee("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),g8=new Ee("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class _8{}let _Ee=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=o7(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Me(En),Me(Ys),Me(m8))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();function yEe(n,e){const t=n.url.toLowerCase();if(!N(vk)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=N(_8).getToken(),i=N(g8);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Wu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Wu||{});function rf(n,e){return{\u0275kind:n,\u0275providers:e}}function vEe(...n){const e=[wb,p8,h8,{provide:DT,useExisting:h8},{provide:RT,useFactory:()=>N(_k,{optional:!0})??N(p8)},{provide:Cb,useValue:yEe,multi:!0},{provide:vk,useValue:!0},{provide:_8,useClass:_Ee}];for(const t of n)e.push(...t.\u0275providers);return _l(e)}const y8=new Ee(""),{isArray:DEe}=Array,{getPrototypeOf:REe,prototype:MEe,keys:PEe}=Object;function A8(n){if(1===n.length){const e=n[0];if(DEe(e))return{args:e,keys:null};if(function kEe(n){return n&&"object"==typeof n&&REe(n)===MEe}(e)){const t=PEe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:NEe}=Array;function bk(n){return Be(e=>function OEe(n,e){return NEe(e)?n(...e):n(e)}(n,e))}function S8(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function fg(...n){const e=fk(n),{args:t,keys:r}=A8(n),i=new Ut(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;no(t[u]).subscribe(Fe(s,m=>{h||(h=!0,c--),a[u]=m},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(r?S8(r,a):a),s.complete())}))}});return e?i.pipe(bk(e)):i}let x8=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(xe($a),xe(Jn))}}static{this.\u0275dir=tt({type:n})}}return n})(),sf=(()=>{class n extends x8{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})()}static{this.\u0275dir=tt({type:n,features:[bn]})}}return n})();const Za=new Ee(""),LEe={provide:Za,useExisting:qn(()=>af),multi:!0},BEe=new Ee("");let af=(()=>{class n extends x8{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function VEe(){const n=zu()?zu().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(xe($a),xe(Jn),xe(BEe,8))}}static{this.\u0275dir=tt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Dt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[pr([LEe]),bn]})}}return n})();function Gu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function R8(n){return null!=n&&"number"==typeof n.length}const Ps=new Ee(""),qu=new Ee(""),UEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class NT{static min(e){return function M8(n){return e=>{if(Gu(e.value)||Gu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function P8(n){return e=>{if(Gu(e.value)||Gu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function k8(n){return Gu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function N8(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function O8(n){return Gu(n.value)||UEe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function F8(n){return e=>Gu(e.value)||!R8(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function L8(n){return e=>R8(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function V8(n){if(!n)return OT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Gu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return $8(e)}static composeAsync(e){return W8(e)}}function OT(n){return null}function B8(n){return null!=n}function U8(n){return ub(n)?zn(n):n}function j8(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function z8(n,e){return e.map(t=>t(n))}function H8(n){return n.map(e=>function jEe(n){return!n.validate}(e)?e:t=>e.validate(t))}function $8(n){if(!n)return null;const e=n.filter(B8);return 0==e.length?null:function(t){return j8(z8(t,e))}}function Ek(n){return null!=n?$8(H8(n)):null}function W8(n){if(!n)return null;const e=n.filter(B8);return 0==e.length?null:function(t){return fg(z8(t,e).map(U8)).pipe(Be(j8))}}function Ik(n){return null!=n?W8(H8(n)):null}function G8(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function q8(n){return n._rawValidators}function K8(n){return n._rawAsyncValidators}function wk(n){return n?Array.isArray(n)?n:[n]:[]}function FT(n,e){return Array.isArray(n)?n.includes(e):n===e}function Q8(n,e){const t=wk(e);return wk(n).forEach(i=>{FT(t,i)||t.push(i)}),t}function Y8(n,e){return wk(e).filter(t=>!FT(n,t))}class X8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ek(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ik(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ro extends X8{get formDirective(){return null}get path(){return null}}class Ku extends X8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Z8{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Tb=(()=>{class n extends Z8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(xe(Ku,2))}}static{this.\u0275dir=tt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Lr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[bn]})}}return n})(),Ck=(()=>{class n extends Z8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(xe(ro,10))}}static{this.\u0275dir=tt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Lr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[bn]})}}return n})();const Ab="VALID",VT="INVALID",pg="PENDING",Sb="DISABLED";class mg{}class eq extends mg{constructor(e,t){super(),this.value=e,this.source=t}}class Sk extends mg{constructor(e,t){super(),this.pristine=e,this.source=t}}class xk extends mg{constructor(e,t){super(),this.touched=e,this.source=t}}class BT extends mg{constructor(e,t){super(),this.status=e,this.source=t}}class GEe extends mg{constructor(e){super(),this.source=e}}class qEe extends mg{constructor(e){super(),this.source=e}}function Dk(n){return(UT(n)?n.validators:n)||null}function Rk(n,e){return(UT(e)?e.asyncValidators:n)||null}function UT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function tq(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[t])throw new K(1001,"")}function nq(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new K(1002,"")})}class jT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=mb(()=>this.statusReactive()),this.statusReactive=zh(void 0),this._pristine=mb(()=>this.pristineReactive()),this.pristineReactive=zh(!0),this._touched=mb(()=>this.touchedReactive()),this.touchedReactive=zh(!1),this._events=new E,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Qa(this.statusReactive)}set status(e){Qa(()=>this.statusReactive.set(e))}get valid(){return this.status===Ab}get invalid(){return this.status===VT}get pending(){return this.status==pg}get disabled(){return this.status===Sb}get enabled(){return this.status!==Sb}get pristine(){return Qa(this.pristineReactive)}set pristine(e){Qa(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Qa(this.touchedReactive)}set touched(e){Qa(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Q8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Q8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Y8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Y8(e,this._rawAsyncValidators))}hasValidator(e){return FT(this._rawValidators,e)}hasAsyncValidator(e){return FT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new xk(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new xk(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new Sk(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new Sk(!0,r))}markAsPending(e={}){this.status=pg;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new BT(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sb,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new eq(this.value,r)),this._events.next(new BT(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ab,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ab||this.status===pg)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new eq(this.value,t)),this._events.next(new BT(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sb:Ab}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pg,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=U8(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new BT(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?Sb:this.errors?VT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pg)?pg:this._anyControlsHaveStatus(VT)?VT:Ab}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Sk(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xk(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){UT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function KEe(n){return Array.isArray(n)?Ek(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function QEe(n){return Array.isArray(n)?Ik(n):n||null}(this._rawAsyncValidators)}}class lf extends jT{constructor(e,t,r){super(Dk(t),Rk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){nq(this,0,e),Object.keys(e).forEach(r=>{tq(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class rq extends lf{}const cf=new Ee("CallSetDisabledState",{providedIn:"root",factory:()=>xb}),xb="always";function zT(n,e){return[...e.path,n]}function Db(n,e,t=xb){Mk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function XEe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&iq(n,e)})}(n,e),function JEe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ZEe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&iq(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function YEe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function HT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),WT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function $T(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Mk(n,e){const t=q8(n);null!==e.validator?n.setValidators(G8(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=K8(n);null!==e.asyncValidator?n.setAsyncValidators(G8(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();$T(e._rawValidators,i),$T(e._rawAsyncValidators,i)}function WT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=q8(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=K8(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return $T(e._rawValidators,r),$T(e._rawAsyncValidators,r),t}function iq(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sq(n,e){Mk(n,e)}function kk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function oq(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Nk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===af?t=s:function nIe(n){return Object.getPrototypeOf(n.constructor)===sf}(s)?r=s:i=s}),i||r||t||null}const iIe={provide:ro,useExisting:qn(()=>GT)},Rb=Promise.resolve();let GT=(()=>{class n extends ro{get submitted(){return Qa(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=mb(()=>this.submittedReactive()),this.submittedReactive=zh(!1),this._directives=new Set,this.ngSubmit=new vn,this.form=new lf({},Ek(t),Ik(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Rb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Db(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Rb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Rb.then(()=>{const r=this._findContainer(t.path),i=new lf({});sq(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Rb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Rb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),oq(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(xe(Ps,10),xe(qu,10),xe(cf,8))}}static{this.\u0275dir=tt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Dt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pr([iIe]),bn]})}}return n})();function aq(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function lq(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const gg=class extends jT{constructor(e=null,t,r){super(Dk(t),Rk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),UT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=lq(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aq(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aq(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){lq(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},aIe={provide:Ku,useExisting:qn(()=>Mb)},dq=Promise.resolve();let Mb=(()=>{class n extends Ku{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new gg,this._registered=!1,this.name="",this.update=new vn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Nk(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),kk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Db(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){dq.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Qi(r);dq.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?zT(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(xe(ro,9),xe(Ps,10),xe(qu,10),xe(Za,10),xe(Sc,8),xe(cf,8))}}static{this.\u0275dir=tt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pr([aIe]),bn,as]})}}return n})(),Ok=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=tt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const Fk=new Ee(""),fIe={provide:ro,useExisting:qn(()=>qT)};let qT=(()=>{class n extends ro{get submitted(){return Qa(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=mb(()=>this._submittedReactive()),this._submittedReactive=zh(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new vn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(WT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Db(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){HT(t.control||null,t,!1),function rIe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),oq(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new GEe(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new qEe(this.form))}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(HT(r||null,t),(n=>n instanceof gg)(i)&&(Db(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);sq(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function eIe(n,e){return WT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mk(this.form,this),this._oldForm&&WT(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||n)(xe(Ps,10),xe(qu,10),xe(cf,8))}}static{this.\u0275dir=tt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Dt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pr([fIe]),bn,as]})}}return n})();const gIe={provide:Ku,useExisting:qn(()=>Bk)};let Bk=(()=>{class n extends Ku{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new vn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Nk(0,s)}ngOnChanges(t){this._added||this._setUpControl(),kk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return zT(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(xe(ro,13),xe(Ps,10),xe(qu,10),xe(Za,10),xe(Fk,8))}}static{this.\u0275dir=tt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[pr([gIe]),bn,as]})}}return n})(),xq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({})}}return n})();class Dq extends jT{constructor(e,t,r){super(Dk(t),Rk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){nq(this,0,e),e.forEach((r,i)=>{tq(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Rq(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let MIe=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return Rq(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new lf(i,s)}record(t,r=null){const i=this._reduceControls(t);return new rq(i,r)}control(t,r,i){let s={};return this.useNonNullable?(Rq(r)?s=r:(s.validators=r,s.asyncValidators=i),new gg(t,{...s,nonNullable:!0})):new gg(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new Dq(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof gg||t instanceof jT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:cf,useValue:t.callSetDisabledState??xb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({imports:[xq]})}}return n})(),Mq=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Fk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:cf,useValue:t.callSetDisabledState??xb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({imports:[xq]})}}return n})();function KT(...n){const e=Eb(n),t=fk(n),{args:r,keys:i}=A8(n);if(0===r.length)return zn([],e);const s=new Ut(function PIe(n,e,t=Ri){return r=>{Pq(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)Pq(e,()=>{const c=zn(n[l],e);let u=!1;c.subscribe(Fe(r,h=>{s[l]=h,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>S8(i,o):Ri));return t?s.pipe(bk(t)):s}function Pq(n,e,t){n?Pc(t,n,e):e()}const QT=Zr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _g(n=1/0){return Yi(Ri,n)}function Pb(...n){return function kIe(){return _g(1)}()(zn(n,Eb(n)))}function kb(n){return new Ut(e=>{no(n()).subscribe(e)})}function Nb(n,e){const t=mt(n)?n:()=>n,r=i=>i.error(t());return new Ut(e?i=>e.schedule(r,0,i):r)}const Ja=new Ut(n=>n.complete());function Wk(){return ye((n,e)=>{let t=null;n._refCount++;const r=Fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class kq extends Ut{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,j(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Nt;const t=this.getSubject();e.add(this.source.subscribe(Fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Nt.EMPTY)}return e}refCount(){return Wk()(this)}}function us(n){return n<=0?()=>Ja:ye((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Qu(...n){const e=Eb(n);return ye((t,r)=>{(e?Pb(n,t,e):Pb(n,t)).subscribe(r)})}function YT(n){return ye((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Nq(n=OIe){return ye((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function OIe(){return new QT}function Yu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,s)=>n(i,s,r)):Ri,us(1),t?YT(e):Nq(()=>new QT))}function si(n,e,t){const r=mt(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Fe(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Ri}function Sl(n){return ye((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Fe(t,void 0,void 0,o=>{s=no(n(o,Sl(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function yg(n,e){return ye(function FIe(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Fe(o,u=>{const h=c++;l=a?n(l,u,h):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Gk(n){return n<=0?()=>Ja:ye((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Oq(n){return Be(()=>n)}function Ob(n){return ye((e,t)=>{no(n).subscribe(Fe(t,()=>t.complete(),_s)),!t.closed&&e.subscribe(t)})}const Zt="primary",Fb=Symbol("RouteTitle");class VIe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vg(n){return new VIe(n)}function BIe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xl(n,e){const t=n?qk(n):void 0,r=e?qk(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Fq(n[i],e[i]))return!1;return!0}function qk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Fq(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Lq(n){return n.length>0?n[n.length-1]:null}function Xu(n){return function $k(n){return!!n&&(n instanceof Ut||mt(n.lift)&&mt(n.subscribe))}(n)?n:ub(n)?zn(Promise.resolve(n)):qe(n)}const jIe={exact:function Uq(n,e,t){if(!hf(n.segments,e.segments)||!XT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Uq(n.children[r],e.children[r],t))return!1;return!0},subset:jq},Vq={exact:function zIe(n,e){return xl(n,e)},subset:function HIe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fq(n[t],e[t]))},ignored:()=>!0};function Bq(n,e,t){return jIe[t.paths](n.root,e.root,t.matrixParams)&&Vq[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jq(n,e,t){return zq(n,e,e.segments,t)}function zq(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!hf(i,t)||e.hasChildren()||!XT(i,t,r))}if(n.segments.length===t.length){if(!hf(n.segments,t)||!XT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!jq(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(hf(n.segments,i)&&XT(n.segments,i,r)&&n.children[Zt])&&zq(n.children[Zt],e,s,r)}}function XT(n,e,t){return e.every((r,i)=>Vq[t](n[i].parameters,r.parameters))}class df{constructor(e=new er([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vg(this.queryParams),this._queryParamMap}toString(){return GIe.serialize(this)}}class er{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return JT(this)}}class Lb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=vg(this.parameters),this._parameterMap}toString(){return Wq(this)}}function hf(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let bg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>new ZT,providedIn:"root"})}}return n})();class ZT{parse(e){const t=new r0e(e);return new df(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vb(e.root,!0)}`,r=function QIe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${eA(t)}=${eA(i)}`).join("&"):`${eA(t)}=${eA(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function qIe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const GIe=new ZT;function JT(n){return n.segments.map(e=>Wq(e)).join("/")}function Vb(n,e){if(!n.hasChildren())return JT(n);if(e){const t=n.children[Zt]?Vb(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Zt&&r.push(`${i}:${Vb(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function WIe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Zt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Zt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Zt?[Vb(n.children[Zt],!1)]:[`${i}:${Vb(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${JT(n)}/${t[0]}`:`${JT(n)}/(${t.join("//")})`}}function Hq(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eA(n){return Hq(n).replace(/%3B/gi,";")}function Kk(n){return Hq(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tA(n){return decodeURIComponent(n)}function $q(n){return tA(n.replace(/\+/g,"%20"))}function Wq(n){return`${Kk(n.path)}${function KIe(n){return Object.entries(n).map(([e,t])=>`;${Kk(e)}=${Kk(t)}`).join("")}(n.parameters)}`}const YIe=/^[^\/()?;#]+/;function Qk(n){const e=n.match(YIe);return e?e[0]:""}const XIe=/^[^\/()?;=#]+/,JIe=/^[^=?&#]+/,t0e=/^[^&#]+/;class r0e{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new er([],{}):new er([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new er(e,t)),r}parseSegment(){const e=Qk(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Lb(tA(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function ZIe(n){const e=n.match(XIe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Qk(this.remaining);i&&(r=i,this.capture(r))}e[tA(t)]=tA(r)}parseQueryParam(e){const t=function e0e(n){const e=n.match(JIe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function n0e(n){const e=n.match(t0e);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=$q(t),s=$q(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qk(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Zt]:new er([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}}function Gq(n){return n.segments.length>0?new er([],{[Zt]:n}):n}function qq(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=qq(i);if(r===Zt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function i0e(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new er(n.segments.concat(e.segments),e.children)}return n}(new er(n.segments,e))}function ff(n){return n instanceof df}function Kq(n){let e;const i=Gq(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new er(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function Qq(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Yk(i,i,i,t,r);const s=function o0e(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Xq(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Xq(t,e,r)}(e);if(s.toRoot())return Yk(i,i,new er([],{}),t,r);const o=function a0e(n,e,t){if(n.isAbsolute)return new rA(e,!0,0);if(!t)return new rA(e,!1,NaN);if(null===t.parent)return new rA(t,!0,0);const r=nA(n.commands[0])?0:1;return function l0e(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new rA(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Ub(o.segmentGroup,o.index,s.commands):Zq(o.segmentGroup,o.index,s.commands);return Yk(i,o.segmentGroup,a,t,r)}function nA(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bb(n){return"object"==typeof n&&null!=n&&n.outlets}function Yk(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:Yq(n,e,t);const a=Gq(qq(o));return new df(a,s,i)}function Yq(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:Yq(s,e,t)}),new er(n.segments,r)}class Xq{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&nA(r[0]))throw new K(4003,!1);const i=r.find(Bb);if(i&&i!==Lq(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Zq(n,e,t){if(n??=new er([],{}),0===n.segments.length&&n.hasChildren())return Ub(n,e,t);const r=function u0e(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Bb(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!e9(l,c,o))return s;r+=2}else{if(!e9(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new er(n.segments.slice(0,r.pathIndex),{});return s.children[Zt]=new er(n.segments.slice(r.pathIndex),n.children),Ub(s,0,i)}return r.match&&0===i.length?new er(n.segments,{}):r.match&&!n.hasChildren()?Xk(n,e,t):r.match?Ub(n,0,i):Xk(n,e,t)}function Ub(n,e,t){if(0===t.length)return new er(n.segments,{});{const r=function c0e(n){return Bb(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Zt)&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const s=Ub(n.children[Zt],e,t);return new er(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Zq(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new er(n.segments,i)}}function Xk(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Bb(s)){const l=d0e(s.outlets);return new er(r,l)}if(0===i&&nA(t[0])){r.push(new Lb(n.segments[e].path,Jq(t[0]))),i++;continue}const o=Bb(s)?s.outlets[Zt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&nA(a)?(r.push(new Lb(o,Jq(a))),i+=2):(r.push(new Lb(o,{})),i++)}return new er(r,{})}function d0e(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Xk(new er([],{}),0,r))}),e}function Jq(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function e9(n,e,t){return n==t.path&&xl(e,t.parameters)}const jb="imperative";var In=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(In||{});class Dl{constructor(e,t){this.id=e,this.url=t}}class iA extends Dl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=In.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kc extends Dl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=In.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Yo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Yo||{}),sA=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sA||{});class pf extends Dl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=In.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Eg extends Dl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=In.NavigationSkipped}}class Zk extends Dl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=In.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class t9 extends Dl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=In.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h0e extends Dl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=In.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f0e extends Dl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=In.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class p0e extends Dl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=In.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m0e extends Dl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=In.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g0e{constructor(e){this.route=e,this.type=In.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _0e{constructor(e){this.route=e,this.type=In.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class y0e{constructor(e){this.snapshot=e,this.type=In.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v0e{constructor(e){this.snapshot=e,this.type=In.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b0e{constructor(e){this.snapshot=e,this.type=In.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E0e{constructor(e){this.snapshot=e,this.type=In.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n9{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=In.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Jk{}class oA{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function el(n){return n.outlet||Zt}function zb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class S0e{get injector(){return zb(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Hb(this.rootInjector),this.attachRef=null}}let Hb=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new S0e(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Me(Oi))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class r9{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=eN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tN(e,this._root).map(t=>t.value)}}function eN(n,e){if(n===e.value)return e;for(const t of e.children){const r=eN(n,t);if(r)return r}return null}function tN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tN(n,t);if(r.length)return r.unshift(e),r}return[]}class tl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ig(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class i9 extends r9{constructor(e,t){super(e),this.snapshot=t,nN(this,e)}toString(){return this.snapshot.toString()}}function s9(n){const e=function x0e(n){const s=new lA([],{},{},"",{},Zt,n,null,{});return new o9("",new tl(s,[]))}(n),t=new F([new Lb("",{})]),r=new F({}),i=new F({}),s=new F({}),o=new F(""),a=new wg(t,r,s,o,i,Zt,n,e.root);return a.snapshot=e.root,new i9(new tl(a,[]),e)}class wg{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Be(c=>c[Fb]))??qe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(e=>vg(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(e=>vg(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aA(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&l9(i)&&(r.resolve[Fb]=i.title),r}class lA{get title(){return this.data?.[Fb]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vg(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vg(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class o9 extends r9{constructor(e,t){super(t),this.url=e,nN(this,t)}toString(){return a9(this._root)}}function nN(n,e){e.value._routerState=n,e.children.forEach(t=>nN(n,t))}function a9(n){const e=n.children.length>0?` { ${n.children.map(a9).join(", ")} } `:"";return`${n.value}${e}`}function rN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xl(e.params,t.params)||n.paramsSubject.next(t.params),function UIe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),xl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function iN(n,e){const t=xl(n.params,e.params)&&function $Ie(n,e){return hf(n,e)&&n.every((t,r)=>xl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iN(n.parent,e.parent))}function l9(n){return"string"==typeof n.title||null===n.title}let sN=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new vn,this.deactivateEvents=new vn,this.attachEvents=new vn,this.detachEvents=new vn,this.parentContexts=N(Hb),this.location=N(qo),this.changeDetector=N(Sc),this.inputBinder=N(cA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new oN(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=tt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[as]})}}return n})();class oN{__ngOutletInjector(e){return new oN(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wg?this.route:e===Hb?this.childContexts:this.parent.get(e,t)}}const cA=new Ee("");let c9=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=KT([r.queryParams,r.params,r.data]).pipe(Qt(([s,o,a],l)=>(a={...s,...o,...a},0===l?qe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function aye(n){const e=Xt(n);if(!e)return null;const t=new Fv(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();function $b(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function R0e(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $b(n,r,i);return $b(n,r)})}(n,e,t);return new tl(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>$b(n,a)),o}}const r=function M0e(n){return new wg(new F(n.url),new F(n.params),new F(n.queryParams),new F(n.fragment),new F(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>$b(n,s));return new tl(r,i)}}class aN{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const u9="ngNavigationCancelingError";function uA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ff(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=d9(!1,Yo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function d9(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[u9]=!0,t.cancellationCode=e,t}function h9(n){return!!n&&n[u9]}class N0e{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ig(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ig(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ig(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ig(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new E0e(s.value.snapshot))}),e.children.length&&this.forwardEvent(new v0e(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(rN(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),rN(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class f9{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dA{constructor(e,t){this.component=e,this.route=t}}function O0e(n,e,t){const r=n._root;return Wb(r,e?e._root:null,t,[r.value])}function Cg(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function yR(n){return null!==mu(n)}(n)?e.get(n):n:r}function Wb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ig(e);return n.children.forEach(o=>{(function L0e(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function V0e(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!hf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hf(n.url,e.url)||!xl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iN(n,e)||!xl(n.queryParams,e.queryParams);default:return!iN(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new f9(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Wb(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dA(a.outlet.component,o))}else o&&Gb(e,a,i),i.canActivateChecks.push(new f9(r)),Wb(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Gb(a,t.getContext(o),i)),i}function Gb(n,e,t){const r=Ig(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Gb(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new dA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function qb(n){return"function"==typeof n}function p9(n){return n instanceof QT||"EmptyError"===n?.name}const hA=Symbol("INITIAL_VALUE");function Tg(){return Qt(n=>KT(n.map(e=>e.pipe(us(1),Qu(hA)))).pipe(Be(e=>{for(const t of e)if(!0!==t){if(t===hA)return hA;if(!1===t||W0e(t))return t}return!0}),ii(e=>e!==hA),us(1)))}function W0e(n){return ff(n)||n instanceof aN}function m9(n){return function Na(...n){return ha(n)}(si(e=>{if("boolean"!=typeof e)throw uA(0,e)}),Be(e=>!0===e))}class lN{constructor(e){this.segmentGroup=e||null}}class fA extends Error{constructor(e){super(),this.urlTree=e}}function Ag(n){return Nb(new lN(n))}class iwe{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return qe(r);if(i.numberOfChildren>1||!i.children[Zt])return Nb(new K(4e3,!1));i=i.children[Zt]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:l,fragment:c,routeConfig:u,url:h,outlet:m,params:y,data:b,title:T}=i,M=ws(s,()=>a({params:y,data:b,queryParams:l,fragment:c,routeConfig:u,url:h,outlet:m,title:T}));if(M instanceof df)throw new fA(M);t=M}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new fA(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new df(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new er(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const cN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function swe(n,e,t,r,i){const s=g9(n,e,t);return s.matched?(r=function I0e(n,e){return n.providers&&!n._injector&&(n._injector=DC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function twe(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?qe(i.map(o=>{const a=Cg(o,n);return Xu(function $0e(n){return n&&qb(n.canMatch)}(a)?a.canMatch(e,t):ws(n,()=>a(e,t)))})).pipe(Tg(),m9()):qe(!0)}(r,e,t).pipe(Be(o=>!0===o?s:{...cN}))):qe(s)}function g9(n,e,t){if("**"===e.path)return function owe(n){return{matched:!0,parameters:n.length>0?Lq(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...cN}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||BIe)(t,n,e);if(!i)return{...cN};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _9(n,e,t,r){return t.length>0&&function cwe(n,e,t){return t.some(r=>pA(n,e,r)&&el(r)!==Zt)}(n,t,r)?{segmentGroup:new er(e,lwe(r,new er(t,n.children))),slicedSegments:[]}:0===t.length&&function uwe(n,e,t){return t.some(r=>pA(n,e,r))}(n,t,r)?{segmentGroup:new er(n.segments,awe(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new er(n.segments,n.children),slicedSegments:t}}function awe(n,e,t,r){const i={};for(const s of t)if(pA(n,e,s)&&!r[el(s)]){const o=new er([],{});i[el(s)]=o}return{...r,...i}}function lwe(n,e){const t={};t[Zt]=e;for(const r of n)if(""===r.path&&el(r)!==Zt){const i=new er([],{});t[el(r)]=i}return t}function pA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class hwe{}class mwe{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new iwe(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){const e=_9(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Be(({children:t,rootSnapshot:r})=>{const i=new tl(r,t),s=new o9("",i),o=function s0e(n,e,t=null,r=null){return Qq(Kq(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new lA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Zt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Zt,t).pipe(Be(r=>({children:r,rootSnapshot:t})),Sl(r=>{if(r instanceof fA)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lN?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Be(o=>o instanceof tl?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return zn(s).pipe(ug(o=>{const a=r.children[o],l=function A0e(n,e){const t=n.filter(r=>el(r)===e);return t.push(...n.filter(r=>el(r)!==e)),t}(t,o);return this.processSegmentGroup(e,l,a,o,i)}),yg((o,a)=>(o.push(...a),o)),YT(null),function LIe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,s)=>n(i,s,r)):Ri,Gk(1),t?YT(e):Nq(()=>new QT))}(),Yi(o=>{if(null===o)return Ag(r);const a=y9(o);return function gwe(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),qe(a)}))}processSegment(e,t,r,i,s,o,a){return zn(t).pipe(ug(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(Sl(c=>{if(c instanceof lN)return qe(null);throw c}))),Yu(l=>!!l),Sl(l=>{if(p9(l))return function dwe(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?qe(new hwe):Ag(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return el(r)===o||o!==Zt&&pA(i,s,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):Ag(i):Ag(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:h,remainingSegments:m}=g9(t,i,s);if(!l)return Ag(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const y=new lA(s,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,v9(i),el(i),i.component??i._loadedComponent??null,i,b9(i)),b=aA(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);const T=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,y,e);return this.applyRedirects.lineralizeSegments(i,T).pipe(Yi(M=>this.processSegment(e,r,t,M.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=swe(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(Qt(l=>l.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Qt(({routes:c})=>{const u=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:y}=l,b=new lA(m,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,v9(r),el(r),r.component??r._loadedComponent??null,r,b9(r)),T=aA(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(T.params),b.data=Object.freeze(T.data);const{segmentGroup:M,slicedSegments:B}=_9(t,m,y,c);if(0===B.length&&M.hasChildren())return this.processChildren(u,c,M,b).pipe(Be(Q=>new tl(b,Q)));if(0===c.length&&0===B.length)return qe(new tl(b,[]));const V=el(r)===s;return this.processSegment(u,c,M,B,V?Zt:s,!0,b).pipe(Be(Q=>new tl(b,Q instanceof tl?[Q]:[])))})):Ag(t)))}getChildConfig(e,t,r){return t.children?qe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function ewe(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?qe(!0):qe(i.map(o=>{const a=Cg(o,n);return Xu(function U0e(n){return n&&qb(n.canLoad)}(a)?a.canLoad(e,t):ws(n,()=>a(e,t)))})).pipe(Tg(),m9())}(e,t,r).pipe(Yi(i=>i?this.configLoader.loadChildren(e,t).pipe(si(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function rwe(){return Nb(d9(!1,Yo.GuardRejected))}())):qe({routes:[],injector:e})}}function _we(n){const e=n.value.routeConfig;return e&&""===e.path}function y9(n){const e=[],t=new Set;for(const r of n){if(!_we(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=y9(r.children);e.push(new tl(r.value,i))}return e.filter(r=>!t.has(r))}function v9(n){return n.data||{}}function b9(n){return n.resolve||{}}function E9(n){const e=n.children.map(t=>E9(t)).flat();return[n,...e]}function uN(n){return Qt(e=>{const t=n(e);return t?zn(t).pipe(Be(()=>e)):qe(e)})}let I9=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[Fb]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>N(wwe),providedIn:"root"})}}return n})(),wwe=(()=>{class n extends I9{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Me(Abe))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Sg=new Ee("",{providedIn:"root",factory:()=>({})});let w9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Kn({type:n,selectors:[["ng-component"]],standalone:!0,features:[wi],decls:1,vars:0,template:function(r,i){1&r&&Et(0,"router-outlet")},dependencies:[sN],encapsulation:2})}}return n})();function dN(n){const e=n.children&&n.children.map(dN),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=w9),t}const xg=new Ee("");let hN=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(t6)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Xu(t.loadComponent()).pipe(Be(C9),si(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),dg(()=>{this.componentLoaders.delete(t)})),i=new kq(r,()=>new E).pipe(Wk());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return qe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function Cwe(n,e,t,r){return Xu(n.loadChildren()).pipe(Be(C9),Yi(i=>i instanceof yW||Array.isArray(i)?qe(i):zn(e.compileModuleAsync(i))),Be(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(xg,[],{optional:!0,self:!0}).flat()),{routes:o.map(dN),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(dg(()=>{this.childrenLoaders.delete(r)})),o=new kq(s,()=>new E).pipe(Wk());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function C9(n){return function Twe(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let fN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>N(Awe),providedIn:"root"})}}return n})(),Awe=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const T9=new Ee(""),A9=new Ee("");function Swe(n,e,t){const r=n.get(A9),i=n.get(En);return n.get(yt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s;const o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),function xwe(n){return new Promise(e=>{Lu({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:l}=r;return l&&ws(n,()=>l({transition:a,from:e,to:t})),o})}const S9=new Ee("");let mA=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new E,this.transitionAbortSubject=new E,this.configLoader=N(hN),this.environmentInjector=N(Oi),this.urlSerializer=N(bg),this.rootContexts=N(Hb),this.location=N(ag),this.inputBindingEnabled=null!==N(cA,{optional:!0}),this.titleStrategy=N(I9),this.options=N(Sg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(fN),this.createViewTransition=N(T9,{optional:!0}),this.navigationErrorHandler=N(S9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>qe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new _0e(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new g0e(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new F({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:jb,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ii(s=>0!==s.id),Be(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Qt(s=>{let o=!1,a=!1;return qe(s).pipe(Qt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Yo.SupersededByNewNavigation),Ja;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:"string"==typeof l.extras.browserUrl?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new Eg(l.id,this.urlSerializer.serialize(l.rawUrl),h,sA.IgnoredSameUrlNavigation)),l.resolve(!1),Ja}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return qe(l).pipe(Qt(h=>{const m=this.transitions?.getValue();return this.events.next(new iA(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?Ja:Promise.resolve(h)}),function ywe(n,e,t,r,i,s){return Yi(o=>function fwe(n,e,t,r,i,s,o="emptyOnly"){return new mwe(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Be(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),si(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const m=new t9(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:h,extractedUrl:m,source:y,restoredState:b,extras:T}=l,M=new iA(h,this.urlSerializer.serialize(m),y,b);this.events.next(M);const B=s9(this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:B,urlAfterRedirects:m,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=m,qe(s)}{const h="";return this.events.next(new Eg(l.id,this.urlSerializer.serialize(l.extractedUrl),h,sA.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ja}}),si(l=>{const c=new h0e(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Be(l=>(this.currentTransition=s={...l,guards:O0e(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function G0e(n,e){return Yi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?qe({...t,guardsResult:!0}):function q0e(n,e,t,r){return zn(n).pipe(Yi(i=>function J0e(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?qe(s.map(a=>{const l=zb(e)??i,c=Cg(a,l);return Xu(function H0e(n){return n&&qb(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):ws(l,()=>c(n,e,t,r))).pipe(Yu())})).pipe(Tg()):qe(!0)}(i.component,i.route,t,e,r)),Yu(i=>!0!==i,!0))}(o,r,i,n).pipe(Yi(a=>a&&function B0e(n){return"boolean"==typeof n}(a)?function K0e(n,e,t,r){return zn(e).pipe(ug(i=>Pb(function Y0e(n,e){return null!==n&&e&&e(new y0e(n)),qe(!0)}(i.route.parent,r),function Q0e(n,e){return null!==n&&e&&e(new b0e(n)),qe(!0)}(i.route,r),function Z0e(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function F0e(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>kb(()=>qe(o.guards.map(l=>{const c=zb(o.node)??t,u=Cg(l,c);return Xu(function z0e(n){return n&&qb(n.canActivateChild)}(u)?u.canActivateChild(r,n):ws(c,()=>u(r,n))).pipe(Yu())})).pipe(Tg())));return qe(s).pipe(Tg())}(n,i.path,t),function X0e(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return qe(!0);const i=r.map(s=>kb(()=>{const o=zb(e)??t,a=Cg(s,o);return Xu(function j0e(n){return n&&qb(n.canActivate)}(a)?a.canActivate(e,n):ws(o,()=>a(e,n))).pipe(Yu())}));return qe(i).pipe(Tg())}(n,i.route,t))),Yu(i=>!0!==i,!0))}(r,s,n,e):qe(a)),Be(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),si(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw uA(0,l.guardsResult);const c=new f0e(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),ii(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",Yo.GuardRejected),!1)),uN(l=>{if(l.guards.canActivateChecks.length)return qe(l).pipe(si(c=>{const u=new p0e(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Qt(c=>{let u=!1;return qe(c).pipe(function vwe(n,e){return Yi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return qe(t);const s=new Set(i.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const c of E9(l))o.add(c);let a=0;return zn(o).pipe(ug(l=>s.has(l)?function bwe(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!l9(i)&&(s[Fb]=i.title),function Ewe(n,e,t,r){const i=qk(n);if(0===i.length)return qe({});const s={};return zn(i).pipe(Yi(o=>function Iwe(n,e,t,r){const i=zb(e)??r,s=Cg(n,i);return Xu(s.resolve?s.resolve(e,t):ws(i,()=>s(e,t)))}(n[o],e,t,r).pipe(Yu(),si(a=>{if(a instanceof aN)throw uA(new ZT,a);s[o]=a}))),Gk(1),Oq(s),Sl(o=>p9(o)?Ja:Nb(o)))}(s,n,e,r).pipe(Be(o=>(n._resolvedData=o,n.data=aA(n,n.parent,t).resolve,null)))}(l,r,n,e):(l.data=aA(l,l.parent,n).resolve,qe(void 0))),si(()=>a++),Gk(1),Yi(l=>a===o.size?qe(t):Ja))})}(this.paramsInheritanceStrategy,this.environmentInjector),si({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Yo.NoDataFromResolver)}}))}),si(c=>{const u=new m0e(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),uN(l=>{const c=u=>{const h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(si(m=>{u.component=m}),Be(()=>{})));for(const m of u.children)h.push(...c(m));return h};return KT(c(l.targetSnapshot.root)).pipe(YT(null),us(1))}),uN(()=>this.afterPreactivation()),Qt(()=>{const{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?zn(u).pipe(Be(()=>s)):qe(s)}),Be(l=>{const c=function D0e(n,e,t){const r=$b(n,e._root,t?t._root:void 0);return new i9(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,s}),si(()=>{this.events.next(new Jk)}),((n,e,t,r)=>Be(i=>(new N0e(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),us(1),si({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new kc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Ob(this.transitionAbortSubject.pipe(si(l=>{throw l}))),dg(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Yo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Sl(l=>{if(a=!0,h9(l))this.events.next(new pf(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function P0e(n){return h9(n)&&ff(n.url)}(l)?this.events.next(new oA(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{const c=new Zk(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{const u=ws(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof aN){const{message:h,cancellationCode:m}=uA(0,u);this.events.next(new pf(s.id,this.urlSerializer.serialize(s.extractedUrl),h,m)),this.events.next(new oA(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);const h=t.errorHandler(l);s.resolve(!!h)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Ja}))}))}cancelNavigationTransition(t,r,i){const s=new pf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Dwe(n){return n!==jb}let Rwe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>N(Pwe),providedIn:"root"})}}return n})();class Mwe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Pwe=(()=>{class n extends Mwe{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})()}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),x9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>N(kwe),providedIn:"root"})}}return n})(),kwe=(()=>{class n extends x9{constructor(){super(...arguments),this.location=N(ag),this.urlSerializer=N(bg),this.options=N(Sg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(fN),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new df,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=s9(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof iA)this.stateMemento=this.createStateMemento();else if(t instanceof Eg)this.rawUrlTree=r.initialUrl;else if(t instanceof t9){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Jk?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof pf&&(t.code===Yo.GuardRejected||t.code===Yo.NoDataFromResolver)?this.restoreHistory(r):t instanceof Zk?this.restoreHistory(r,!0):t instanceof kc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof df?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})()}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Kb=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Kb||{});function D9(n,e){n.events.pipe(ii(t=>t instanceof kc||t instanceof pf||t instanceof Zk||t instanceof Eg),Be(t=>t instanceof kc||t instanceof Eg?Kb.COMPLETE:t instanceof pf&&(t.code===Yo.Redirect||t.code===Yo.SupersededByNewNavigation)?Kb.REDIRECTING:Kb.FAILED),ii(t=>t!==Kb.REDIRECTING),us(1)).subscribe(()=>{e()})}function Nwe(n){throw n}const Owe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fwe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rl=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=N($G),this.stateManager=N(x9),this.options=N(Sg,{optional:!0})||{},this.pendingTasks=N(bc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(mA),this.urlSerializer=N(bg),this.location=N(ag),this.urlHandlingStrategy=N(fN),this._events=new E,this.errorHandler=this.options.errorHandler||Nwe,this.navigated=!1,this.routeReuseStrategy=N(Rwe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(xg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(cA,{optional:!0}),this.eventsSubscription=new Nt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof pf&&r.code!==Yo.Redirect&&r.code!==Yo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof kc)this.navigated=!0;else if(r instanceof oA){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Dwe(i.source),...o};this.scheduleNavigation(a,jb,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Vwe(n){return!(n instanceof Jk||n instanceof oA)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jb,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(dN),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let h,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{h=Kq(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),h=this.currentUrlTree.root}return Qq(h,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ff(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,jb,null,r)}navigate(t,r={skipLocationChange:!1}){return function Lwe(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new K(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...Owe}:!1===r?{...Fwe}:r,ff(t))return Bq(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Bq(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,m)=>{a=h,l=m});const u=this.pendingTasks.add();return D9(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class R9{}let jwe=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof kc),ug(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=DC(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return zn(i).pipe(_g())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):qe(null);const s=i.pipe(Yi(o=>null===o?qe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?zn([s,this.loader.loadComponent(r)]).pipe(_g()):s})}static{this.\u0275fac=function(r){return new(r||n)(Me(Rl),Me(t6),Me(Oi),Me(R9),Me(hN))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const mN=new Ee("");let M9=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof iA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Eg&&t.code===sA.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof n9&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new n9(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function $3(){throw new Error("invalid")}()}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();function Ml(n,e){return{\u0275kind:n,\u0275providers:e}}function k9(){const n=N(Pn);return e=>{const t=n.get(_a);if(e!==t.components[0])return;const r=n.get(Rl),i=n.get(N9);1===n.get(gN)&&r.initialNavigation(),n.get(O9,null,jt.Optional)?.setUpPreloading(),n.get(mN,null,jt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const N9=new Ee("",{factory:()=>new E}),gN=new Ee("",{providedIn:"root",factory:()=>1}),O9=new Ee("");function Wwe(n){return Ml(0,[{provide:O9,useExisting:jwe},{provide:R9,useExisting:n}])}function qwe(n){return Ml(9,[{provide:T9,useValue:Swe},{provide:A9,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const F9=new Ee("ROUTER_FORROOT_GUARD"),Kwe=[ag,{provide:bg,useClass:ZT},Rl,Hb,{provide:wg,useFactory:function P9(n){return n.routerState.root},deps:[Rl]},hN,[]];let L9=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Kwe,[],{provide:xg,multi:!0,useValue:t},{provide:F9,useFactory:Zwe,deps:[[Rl,new Mi,new cc]]},{provide:Sg,useValue:r||{}},r?.useHash?{provide:Zh,useClass:hye}:{provide:Zh,useClass:Y6},{provide:mN,useFactory:()=>{const n=N(Sve),e=N(yt),t=N(Sg),r=N(mA),i=N(bg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new M9(i,r,n,e,t)}},r?.preloadingStrategy?Wwe(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Jwe(r):[],r?.bindToComponentInputs?Ml(8,[c9,{provide:cA,useExisting:c9}]).\u0275providers:[],r?.enableViewTransitions?qwe().\u0275providers:[],[{provide:V9,useFactory:k9},{provide:JC,multi:!0,useExisting:V9}]]}}static forChild(t){return{ngModule:n,providers:[{provide:xg,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Me(F9,8))}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({})}}return n})();function Zwe(n){return"guarded"}function Jwe(n){return["disabled"===n.initialNavigation?Ml(3,[{provide:ZC,multi:!0,useFactory:()=>{const e=N(Rl);return()=>{e.setUpLocationChangeListener()}}},{provide:gN,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ml(2,[{provide:gN,useValue:0},{provide:ZC,multi:!0,deps:[Pn],useFactory:e=>{const t=e.get(uye,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Rl),s=e.get(N9);D9(i,()=>{r(!0)}),e.get(mA).afterPreactivation=()=>(r(!0),s.closed?qe(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const V9=new Ee("");function B9(n){return null!=n&&"false"!=`${n}`}function U9(n,e=0){return function tCe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):2===arguments.length?e:0}function gA(n){return Array.isArray(n)?n:[n]}function Ai(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Dg(n){return n instanceof Jn?n.nativeElement:n}const nCe=["addListener","removeListener"],rCe=["addEventListener","removeEventListener"],iCe=["on","off"];function _A(n,e,t,r){if(mt(t)&&(r=t,t=void 0),r)return _A(n,e,t).pipe(bk(r));const[i,s]=function aCe(n){return mt(n.addEventListener)&&mt(n.removeEventListener)}(n)?rCe.map(o=>a=>n[o](e,a,t)):function sCe(n){return mt(n.addListener)&&mt(n.removeListener)}(n)?nCe.map(j9(n,e)):function oCe(n){return mt(n.on)&&mt(n.off)}(n)?iCe.map(j9(n,e)):[];if(!i&&pk(n))return Yi(o=>_A(o,e,t))(no(n));if(!i)throw new TypeError("Invalid event target");return new Ut(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function j9(n,e){return t=>r=>n[t](e,r)}class lCe extends Nt{constructor(e,t){super()}schedule(e,t=0){return this}}const yA={setInterval(n,e,...t){const{delegate:r}=yA;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=yA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class vA extends lCe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return yA.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&yA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,nn(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Qb={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Qb;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new Nt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Qb;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Qb;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},_N={now:()=>(_N.delegate||Date).now(),delegate:void 0};class Yb{constructor(e,t=Yb.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Yb.now=_N.now;class bA extends Yb{constructor(e,t=Yb.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class uCe extends bA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class cCe extends vA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Qb.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(Qb.cancelAnimationFrame(t),e._scheduled=void 0)}});let yN,hCe=1;const EA={};function z9(n){return n in EA&&(delete EA[n],!0)}const fCe={setImmediate(n){const e=hCe++;return EA[e]=!0,yN||(yN=Promise.resolve()),yN.then(()=>z9(e)&&n()),e},clearImmediate(n){z9(n)}},{setImmediate:pCe,clearImmediate:mCe}=fCe,IA={setImmediate(...n){const{delegate:e}=IA;return(e?.setImmediate||pCe)(...n)},clearImmediate(n){const{delegate:e}=IA;return(e?.clearImmediate||mCe)(n)},delegate:void 0},mf=(new class _Ce extends bA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class gCe extends vA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=IA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(IA.clearImmediate(t),e._scheduled=void 0)}}),new bA(vA)),vCe=mf;function H9(n=0,e,t=vCe){let r=-1;return null!=e&&(G7(e)?t=e:r=e),new Ut(i=>{let s=function ECe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function $9(n,e=mf){return function bCe(n){return ye((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(Fe(t,c=>{r=!0,i=c,s||no(n(c)).subscribe(s=Fe(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>H9(n,e))}let vN;try{vN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vN=!1}let Xb,ks=(()=>{class n{_platformId=N(Ys);isBrowser=this._platformId?v7(this._platformId):"object"==typeof document&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!(!window.chrome&&!vN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mg(n){return function ICe(){if(null==Xb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Xb=!0}))}finally{Xb=Xb||!1}return Xb}()?n:!!n.capture}var Pl=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Pl||{});let wA,gf,bN;function G9(){if(null==gf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return gf=!1,gf;if("scrollBehavior"in document.documentElement.style)gf=!0;else{const n=Element.prototype.scrollTo;gf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return gf}function Zb(){if("object"!=typeof document||!document)return Pl.NORMAL;if(null==wA){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),wA=Pl.NORMAL,0===n.scrollLeft&&(n.scrollLeft=1,wA=0===n.scrollLeft?Pl.NEGATED:Pl.INVERTED),n.remove()}return wA}function EN(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function kl(n){return n.composedPath?n.composedPath()[0]:n.target}function q9(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const TCe=new Ee("cdk-dir-doc",{providedIn:"root",factory:function ACe(){return N(En)}}),SCe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Jb=(()=>{class n{value="ltr";change=new vn;constructor(){const t=N(TCe,{optional:!0});t&&(this.value=function xCe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?SCe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({})}return n})(),K9=(()=>{class n{_ngZone=N(yt);_platform=N(ks);_document=N(En,{optional:!0});constructor(){}_scrolled=new E;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ut(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe($9(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):qe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(ii(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Dg(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>_A(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RCe=(()=>{class n{elementRef=N(Jn);scrollDispatcher=N(K9);ngZone=N(yt);dir=N(Jb,{optional:!0});_destroyed=new E;_elementScrolled=new Ut(t=>this.ngZone.runOutsideAngular(()=>_A(this.elementRef.nativeElement,"scroll").pipe(Ob(this._destroyed)).subscribe(t)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&Zb()!=Pl.NORMAL?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),Zb()==Pl.INVERTED?t.left=t.right:Zb()==Pl.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;G9()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?i:r:"end"==t&&(t=o?r:i),o&&Zb()==Pl.INVERTED?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Zb()==Pl.NEGATED?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),IN=(()=>{class n{_platform=N(ks);_listeners;_viewportSize;_change=new E;_document=N(En,{optional:!0});constructor(){const t=N(yt),r=N(jh).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){const i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe($9(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({})}return n})(),Q9=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[eE,tE,eE,tE]})}return n})();class wN{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class CN extends wN{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=s}}class TN extends wN{templateRef;viewContainerRef;context;injector;constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class PCe extends wN{element;constructor(e){super(),this.element=e instanceof Jn?e.nativeElement:e}}class AN{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof CN?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof TN?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof PCe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class kCe extends AN{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,r,i,s){super(),this.outletElement=e,this._appRef=r,this._defaultInjector=i,this._document=s}attachComponentPortal(e){let t;if(e.viewContainerRef){const r=e.injector||e.viewContainerRef.injector,i=r.get(Cc,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else t=G6(e.component,{elementInjector:e.injector||this._defaultInjector||Pn.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(t.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(t.hostView),t.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}attachDomPortal=e=>{const t=e.element,r=this._document.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let SN=(()=>{class n extends AN{_moduleRef=N(Cc,{optional:!0});_document=N(En);_viewContainerRef=N(qo);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new vn;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,i=r.createComponent(t.component,{index:r.length,injector:t.injector||r.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=t=>{const r=t.element,i=this._document.createComment("dom-portal");t.setAttachedHost(this),r.parentNode.insertBefore(i,r),this._getRootNode().appendChild(r),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(r,i)})};_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[bn]})}return n})(),CA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({})}return n})();const TA=new WeakMap;let _f=(()=>{class n{_appRef;_injector=N(Pn);_environmentInjector=N(Oi);load(t){const r=this._appRef=this._appRef||this._injector.get(_a);let i=TA.get(r);i||(i={loaders:new Set,refs:[]},TA.set(r,i),r.onDestroy(()=>{TA.get(r)?.refs.forEach(s=>s.destroy()),TA.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(G6(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Y9=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],standalone:!0,features:[wi],decls:0,vars:0,template:function(r,i){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function yf(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function DN(n,e=mf){return ye((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(Fe(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function eK(n){return ii((e,t)=>n<=t)}function SA(n,e=Ri){return n=n??YCe,ye((t,r)=>{let i,s=!0;t.subscribe(Fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function YCe(n,e){return n===e}let XCe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[XCe]})}return n})();const rK=new Set;let vf,ZCe=(()=>{class n{_platform=N(ks);_nonce=N(xM,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):eTe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function JCe(n,e){if(!rK.has(n))try{vf||(vf=document.createElement("style"),e&&vf.setAttribute("nonce",e),vf.setAttribute("type","text/css"),document.head.appendChild(vf)),vf.sheet&&(vf.sheet.insertRule(`@media ${n} {body{ }}`,0),rK.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eTe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let iK=(()=>{class n{_mediaMatcher=N(ZCe);_zone=N(yt);_queries=new Map;_destroySubject=new E;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return sK(gA(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=KT(sK(gA(t)).map(o=>this._registerQuery(o).observable));return s=Pb(s.pipe(us(1)),s.pipe(eK(1),DN(0))),s.pipe(Be(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Ut(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Qu(r),Be(({matches:o})=>({query:t,matches:o})),Ob(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sK(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function aK(n,e,t){const r=lK(n,e);t=t.trim(),!r.some(i=>i.trim()===t)&&(r.push(t),n.setAttribute(e,r.join(" ")))}function RN(n,e,t){const r=lK(n,e);t=t.trim();const i=r.filter(s=>s!==t);i.length?n.setAttribute(e,i.join(" ")):n.removeAttribute(e)}function lK(n,e){return n.getAttribute(e)?.match(/\S+/g)??[]}class cK{_letterKeyStream=new E;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new E;selectedItem=this._selectedItem;constructor(e,t){const r="number"==typeof t?.debounceInterval?t.debounceInterval:200;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){const t=e.keyCode;e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(si(t=>this._pressedLetters.push(t)),DN(e),ii(()=>this._pressedLetters.length>0),Be(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let r=1;r<this._items.length+1;r++){const s=this._items[(this._selectedItemIndex+r)%this._items.length];if(!this._skipPredicateFn?.(s)&&0===s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)){this._selectedItem.next(s);break}}this._pressedLetters=[]})}}class sTe{_items;_activeItemIndex=-1;_activeItem=zh(null);_wrap=!1;_typeaheadSubscription=Nt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof Tm?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):Lv(e)&&(this._effectRef=function W6(n,e){Xs("NgSignals"),!e?.injector&&Or();const t=e?.injector??N(Pn),r=!0!==e?.manualCleanup?t.get(cv):null,i=new oye(t.get(rye),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(Sc,null,{optional:!0});return s&&8&s._lView[ht]?(s._lView[bh]??=[]).push(i.watcher.notify):i.watcher.notify(),i}(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new E;change=new E;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();const t=this._getItemsArray();return this._typeahead=new cK(t,{debounceInterval:"number"==typeof e?e:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((i||yf(e,"shiftKey"))&&this._typeahead?.handleKey(e))}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem.set(t[r]??null),this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return Lv(this._items)?this._items():this._items instanceof Tm?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);const t=this._activeItem();if(t){const r=e.indexOf(t);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r))}}}class oTe extends sTe{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let hK=(()=>{class n{_platform=N(ks);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function dTe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function uTe(n){try{return n.frameElement}catch{return null}}(function vTe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===pK(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=pK(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function _Te(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function yTe(n){return!function fTe(n){return function mTe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function hTe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function pTe(n){return function gTe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||fK(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fK(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function pK(n){if(!fK(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class mK{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,r,i,s=!1,o){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._injector=o,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Lu(e,{injector:this._injector}):setTimeout(e)}}let bTe=(()=>{class n{_checker=N(hK);_ngZone=N(yt);_document=N(En);_injector=N(Pn);constructor(){N(_f).load(Y9)}create(t,r=!1){return new mK(t,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gK(n){return 0===n.buttons||0===n.detail}function _K(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const ETe=new Ee("cdk-input-modality-detector-options"),ITe={ignoreKeys:[18,17,224,91,16]},Pg=Mg({passive:!0,capture:!0});let wTe=(()=>{class n{_platform=N(ks);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new F(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=kl(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(gK(t)?"keyboard":"mouse"),this._mostRecentTarget=kl(t))};_onTouchstart=t=>{_K(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=kl(t))};constructor(){const t=N(yt),r=N(En),i=N(ETe,{optional:!0});this._options={...ITe,...i},this.modalityDetected=this._modality.pipe(eK(1)),this.modalityChanged=this.modalityDetected.pipe(SA()),this._platform.isBrowser&&t.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Pg),r.addEventListener("mousedown",this._onMousedown,Pg),r.addEventListener("touchstart",this._onTouchstart,Pg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Pg),document.removeEventListener("mousedown",this._onMousedown,Pg),document.removeEventListener("touchstart",this._onTouchstart,Pg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xA=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(xA||{});const TTe=new Ee("cdk-focus-monitor-default-options"),DA=Mg({passive:!0,capture:!0});let vK=(()=>{class n{_ngZone=N(yt);_platform=N(ks);_inputModalityDetector=N(wTe);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=N(En,{optional:!0});_stopInputModalityDetector=new E;constructor(){const t=N(TTe,{optional:!0});this._detectionMode=t?.detectionMode||xA.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{for(let i=kl(t);i;i=i.parentElement)"focus"===t.type?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){const i=Dg(t);if(!this._platform.isBrowser||1!==i.nodeType)return qe();const s=function CCe(n){if(function wCe(){if(null==bN){const n=typeof document<"u"?document.head:null;bN=!(!n||!n.createShadowRoot&&!n.attachShadow)}return bN}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new E,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Dg(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Dg(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===xA.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===xA.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=kl(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,DA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,DA)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ob(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,DA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,DA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bf=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(bf||{});const bK="cdk-high-contrast-black-on-white",EK="cdk-high-contrast-white-on-black",MN="cdk-high-contrast-active";let IK=(()=>{class n{_platform=N(ks);_hasCheckedHighContrastMode;_document=N(En);_breakpointSubscription;constructor(){this._breakpointSubscription=N(iK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return bf.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return bf.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return bf.BLACK_ON_WHITE}return bf.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(MN,bK,EK),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===bf.BLACK_ON_WHITE?t.add(MN,bK):r===bf.WHITE_ON_BLACK&&t.add(MN,EK)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ATe=(()=>{class n{constructor(){N(IK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[nK]})}return n})();const PN={};let kg=(()=>{class n{_appId=N(Ph);getId(t){return"ng"!==this._appId&&(t+=this._appId),PN.hasOwnProperty(t)||(PN[t]=0),`${t}${PN[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zu(...n){const e=Eb(n),t=function Mbe(n,e){return"number"==typeof hk(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?no(r[0]):_g(t)(zn(r,e)):Ja}const wK=G9();class STe{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ai(-this._previousScrollPosition.left),e.style.top=Ai(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),wK&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),wK&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class xTe{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(ii(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}class CK{enable(){}disable(){}attach(){}}function kN(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function TK(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class DTe{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();kN(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let RTe=(()=>{class n{_scrollDispatcher=N(K9);_viewportRuler=N(IN);_ngZone=N(yt);_document=N(En);constructor(){}noop=()=>new CK;close=t=>new xTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,t);block=()=>new STe(this._viewportRuler,this._document);reposition=t=>new DTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,t);static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class NN{positionStrategy;scrollStrategy=new CK;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class MTe{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let AK=(()=>{class n{_attachedOverlays=[];_document=N(En);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PTe=(()=>{class n extends AK{_ngZone=N(yt);_renderer=N(jh).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{const r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})();static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kTe=(()=>{class n extends AK{_platform=N(ks);_ngZone=N(yt,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=t=>{this._pointerDownEventTarget=kl(t)};_clickListener=t=>{const r=kl(t),i="click"===t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;const s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){const a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(SK(a.overlayElement,r)||SK(a.overlayElement,i))break;const l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})();static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SK(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let xK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],standalone:!0,features:[wi],decls:0,vars:0,template:function(r,i){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),ON=(()=>{class n{_platform=N(ks);_containerElement;_document=N(En);_styleLoader=N(_f);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||q9()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),q9()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(xK)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class FN{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropElement=null;_backdropTimeout;_backdropClick=new E;_attachments=new E;_detachments=new E;_positionStrategy;_scrollStrategy;_locationChanges=Nt.EMPTY;_cleanupBackdropClick;_cleanupBackdropTransitionEnd;_previousHostParent;_keydownEvents=new E;_outsidePointerEvents=new E;_renders=new E;_afterRenderRef;_afterNextRenderRef;constructor(e,t,r,i,s,o,a,l,c,u=!1,h,m){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=h,this._renderer=m,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=Qa(()=>function xW(n,e){!e?.injector&&Or();const t=e?.injector??N(Pn);return Go(t)?(Xs("NgAfterRender"),DW(n,t,e,!1)):RW}(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Lu(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ai(this._config.width),e.height=Ai(this._config.height),e.minWidth=Ai(this._config.minWidth),e.minHeight=Ai(this._config.minHeight),e.maxWidth=Ai(this._config.maxWidth),e.maxHeight=Ai(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._cleanupBackdropClick?.(),this._cleanupBackdropClick=this._renderer.listen(this._backdropElement,"click",t=>this._backdropClick.next(t)),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{this._cleanupBackdropTransitionEnd?.(),this._cleanupBackdropTransitionEnd=this._renderer.listen(e,"transitionend",t=>{this._disposeBackdrop(t.target)})}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=gA(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(Ob(Zu(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){this._cleanupBackdropClick?.(),this._cleanupBackdropTransitionEnd?.(),e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const DK="cdk-overlay-connected-position-bounding-box",NTe=/([A-Za-z%]+)$/;class OTe{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new E;_resizeSubscription=Nt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(DK),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ef(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(DK),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=MK(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let m=0-a,y=a+s.height-r.height,b=this._subtractOverflows(s.width,0-o,o+s.width-r.width),T=this._subtractOverflows(s.height,m,y),M=b*T;return{visibleArea:M,isCompletelyWithinViewport:s.width*s.height===M,fitsInViewportVertically:T===s.height,fitsInViewportHorizontally:b==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=RK(this._overlayRef.getConfig().minHeight),a=RK(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=MK(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,h=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,h=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function FTe(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,r)){const i=new MTe(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,h,m;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const y=Math.min(r.bottom-e.y+r.top,e.y),b=this._lastBoundingBoxSize.height;s=2*y,o=e.y-y,s>b&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-b/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)m=r.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)h=e.x,u=r.right-e.x;else{const y=Math.min(r.right-e.x+r.left,e.x),b=this._lastBoundingBoxSize.width;u=2*y,h=e.x-y,u>b&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-b/2)}return{top:o,left:h,bottom:a,right:m,width:u,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Ai(r.height),i.top=Ai(r.top),i.bottom=Ai(r.bottom),i.width=Ai(r.width),i.left=Ai(r.left),i.right=Ai(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Ai(s)),o&&(i.maxWidth=Ai(o))}this._lastBoundingBoxSize=r,Ef(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Ef(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ef(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();Ef(r,this._getExactOverlayY(t,e,u)),Ef(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Ai(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Ai(o.maxWidth):s&&(r.maxWidth="")),Ef(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Ai(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Ai(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:TK(e,r),isOriginOutsideView:kN(e,r),isOverlayClipped:TK(t,r),isOverlayOutsideView:kN(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&gA(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Jn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Ef(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function RK(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(NTe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function MK(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const PK="cdk-global-overlay-wrapper";class LTe{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(PK),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let y="",b="",T="";l?T="flex-start":"center"===u?(T="center",m?b=h:y=h):m?"left"===u||"end"===u?(T="flex-end",y=h):("right"===u||"start"===u)&&(T="flex-start",b=h):"left"===u||"start"===u?(T="flex-start",y=h):("right"===u||"end"===u)&&(T="flex-end",b=h),e.position=this._cssPosition,e.marginLeft=l?"0":y,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":b,t.justifyContent=T,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(PK),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let VTe=(()=>{class n{_viewportRuler=N(IN);_document=N(En);_platform=N(ks);_overlayContainer=N(ON);constructor(){}global(){return new LTe}flexibleConnectedTo(t){return new OTe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ns=(()=>{class n{scrollStrategies=N(RTe);_overlayContainer=N(ON);_positionBuilder=N(VTe);_keyboardDispatcher=N(PTe);_injector=N(Pn);_ngZone=N(yt);_document=N(En);_directionality=N(Jb);_location=N(ag);_outsideClickDispatcher=N(kTe);_animationsModuleType=N(Ec,{optional:!0});_idGenerator=N(kg);_renderer=N(jh).createRenderer(null,null);_appRef;_styleLoader=N(_f);constructor(){}create(t){this._styleLoader.load(xK);const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new NN(t);return o.direction=o.direction||this._directionality.value,new FN(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(Oi),this._renderer)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id=this._idGenerator.getId("cdk-overlay-"),r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(_a)),new kCe(t,null,this._appRef,this._injector,this._document)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jTe={provide:new Ee("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=N(Ns);return()=>n.scrollStrategies.reposition()}}),deps:[Ns],useFactory:function UTe(n){return()=>n.scrollStrategies.reposition()}};let nE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[Ns,jTe],imports:[eE,CA,Q9,Q9]})}return n})();function zTe(n,e){}class rE{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext}let kK=(()=>{class n extends AN{_elementRef=N(Jn);_focusTrapFactory=N(bTe);_config;_interactivityChecker=N(hK);_ngZone=N(yt);_overlayRef=N(FN);_focusMonitor=N(vK);_renderer=N($a);_platform=N(ks);_document=N(En,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=N(Sc);_injector=N(Pn);_isDestroyed=!1;constructor(){super(),this._config=N(rE,{optional:!0})||new rE,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}attachDomPortal=t=>{this._portalOutlet.hasAttached();const r=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{s(),o(),t.removeAttribute("tabindex")},s=this._renderer.listen(t,"blur",i),o=this._renderer.listen(t,"mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){this._isDestroyed||Lu(()=>{const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=EN(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=EN();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=EN()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&Kh(SN,7),2&r){let s;qa(s=Ka())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&Fr("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},standalone:!0,features:[bn,wi],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&st(0,zTe,0,0,"ng-template",0)},dependencies:[SN],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class LN{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new E;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!yf(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const NK=new Ee("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=N(Ns);return()=>n.scrollStrategies.block()}}),HTe=new Ee("DialogData"),$Te=new Ee("DefaultDialogConfig");let OK=(()=>{class n{_overlay=N(Ns);_injector=N(Pn);_defaultOptions=N($Te,{optional:!0});_parentDialog=N(n,{optional:!0,skipSelf:!0});_overlayContainer=N(ON);_idGenerator=N(kg);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;_ariaHiddenElements=new Map;_scrollStrategy=N(NK);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=kb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Qu(void 0)));constructor(){}open(t,r){(r={...this._defaultOptions||new rE,...r}).id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),o=this._overlay.create(s),a=new LN(o,r),l=this._attachContainer(o,a,r);return a.containerInstance=l,this._attachDialogContent(t,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){VN(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){VN(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),VN(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new NN({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,o=[{provide:rE,useValue:i},{provide:LN,useValue:r},{provide:FN,useValue:t}];let a;i.container?"function"==typeof i.container?a=i.container:(a=i.container.type,o.push(...i.container.providers(i))):a=kK;const l=new CN(a,i.viewContainerRef,Pn.create({parent:s||this._injector,providers:o}));return t.attach(l).instance}_attachDialogContent(t,r,i,s){if(t instanceof Ha){const o=this._createInjector(s,r,i,void 0);let a={$implicit:s.data,dialogRef:r};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new TN(t,null,a,o))}else{const o=this._createInjector(s,r,i,this._injector),a=i.attachComponentPortal(new CN(t,s.viewContainerRef,o));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,i,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:HTe,useValue:t.data},{provide:LN,useValue:r}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(r,t,i)):a.push(...t.providers)),t.direction&&(!o||!o.get(Jb,null,{optional:!0}))&&a.push({provide:Jb,useValue:{value:t.direction,change:qe()}}),Pn.create({parent:o||s,providers:a})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VN(n,e){let t=n.length;for(;t--;)e(n[t])}let GTe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[OK],imports:[nE,CA,ATe,CA]})}return n})();const qTe=["text"],KTe=[[["mat-icon"]],"*"],QTe=["mat-icon","*"];function YTe(n,e){if(1&n&&Et(0,"mat-pseudo-checkbox",1),2&n){const t=Pe();De("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function XTe(n,e){1&n&&Et(0,"mat-pseudo-checkbox",3),2&n&&De("disabled",Pe().disabled)}function ZTe(n,e){if(1&n&&(te(0,"span",4),ze(1),ie()),2&n){const t=Pe();se(),en("(",t.group.label,")")}}let or=(()=>{class n{constructor(){N(IK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[eE,eE]})}return n})(),FK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["structural-styles"]],standalone:!0,features:[wi],decls:0,vars:0,template:function(r,i){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var Ea=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Ea||{});class iAe{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ea.HIDDEN;constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}}const LK=Mg({passive:!0,capture:!0});class sAe{_events=new Map;addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,LK)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,LK)))}_delegateEventHandler=e=>{const t=kl(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}const RA={enterDuration:225,exitDuration:150},VK=Mg({passive:!0,capture:!0}),BK=["mousedown","touchstart"],UK=["mouseup","mouseleave","touchend","touchcancel"];let aAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],standalone:!0,features:[wi],decls:0,vars:0,template:function(r,i){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})();class sE{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new sAe;constructor(e,t,r,i,s){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=Dg(r)),s&&s.get(_f).load(aAe)}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...RA,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function lAe(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),y=h.transitionDuration,b="none"===h.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,T=new iAe(this,u,r,b);u.style.transform="scale3d(1, 1, 1)",T.state=Ea.FADING_IN,r.persistent||(this._mostRecentTransientRipple=T);let M=null;return!b&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const B=()=>{M&&(M.fallbackTimer=null),clearTimeout(Q),this._finishRippleTransition(T)},V=()=>this._destroyRipple(T),Q=setTimeout(V,c+100);u.addEventListener("transitionend",B),u.addEventListener("transitioncancel",V),M={onTransitionEnd:B,onTransitionCancel:V,fallbackTimer:Q}}),this._activeRipples.set(T,M),(b||!c)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(e.state===Ea.FADING_OUT||e.state===Ea.HIDDEN)return;const t=e.element,r={...RA,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Ea.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Dg(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,BK.forEach(r=>{sE._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{UK.forEach(t=>{this._triggerElement.addEventListener(t,this,VK)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ea.FADING_IN?this._startFadeOutTransition(e):e.state===Ea.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Ea.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ea.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=gK(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!_K(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Ea.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ea.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(BK.forEach(t=>sE._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(UK.forEach(t=>e.removeEventListener(t,this,VK)),this._pointerUpEventsRegistered=!1))}}const jK=new Ee("mat-ripple-global-options");let cAe=(()=>{class n{_elementRef=N(Jn);_animationMode=N(Ec,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){const t=N(yt),r=N(ks),i=N(jK,{optional:!0}),s=N(Pn);this._globalOptions=i||{},this._rippleRenderer=new sE(this,t,this._elementRef,r,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&Lr("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),BN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or,or]})}return n})(),uAe=(()=>{class n{_animationMode=N(Ec,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,i){2&r&&Lr("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[wi],decls:0,vars:0,template:function(r,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})(),dAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or]})}return n})();const zK=new Ee("MAT_OPTION_PARENT_COMPONENT"),HK=new Ee("MatOptgroup");class $K{source;isUserInput;constructor(e,t=!1){this.source=e,this.isUserInput=t}}let WK=(()=>{class n{_element=N(Jn);_changeDetectorRef=N(Sc);_parent=N(zK,{optional:!0});group=N(HK,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=N(kg).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=t}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}onSelectionChange=new vn;_text;_stateChanges=new E;constructor(){N(_f).load(FK),N(_f).load(Y9),this._signalDisableRipple=!!this._parent&&Lv(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!yf(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new $K(this,t))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["mat-option"]],viewQuery:function(r,i){if(1&r&&Kh(qTe,7),2&r){let s;qa(s=Ka())&&(i._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,i){1&r&&Dt("click",function(){return i._selectViaInteraction()})("keydown",function(o){return i._handleKeydown(o)}),2&r&&(Kv("id",i.id),Fr("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),Lr("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Qi]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Fu,wi],ngContentSelectors:QTe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,i){1&r&&(Tc(KTe),st(0,YTe,1,2,"mat-pseudo-checkbox",1),Js(1),te(2,"span",2,0),Js(4,1),ie(),st(5,XTe,1,1,"mat-pseudo-checkbox",3)(6,ZTe,2,1,"span",4),Et(7,"div",5)),2&r&&(BC(i.multiple?0:-1),se(5),BC(i.multiple||!i.selected||i.hideSingleSelectionIndicator?-1:5),se(),BC(i.group&&i.group._inert?6:-1),se(),De("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[uAe,cAe],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),Og=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[BN,or,dAe]})}return n})();const GK={capture:!0},qK=["focus","mousedown","mouseenter","touchstart"],UN="mat-ripple-loader-uninitialized",jN="mat-ripple-loader-class-name",KK="mat-ripple-loader-centered",MA="mat-ripple-loader-disabled";let pAe=(()=>{class n{_document=N(En,{optional:!0});_animationMode=N(Ec,{optional:!0});_globalRippleOptions=N(jK,{optional:!0});_platform=N(ks);_ngZone=N(yt);_injector=N(Pn);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(const t of qK)this._document?.addEventListener(t,this._onInteraction,GK)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of qK)this._document?.removeEventListener(r,this._onInteraction,GK)}configureRipple(t,r){t.setAttribute(UN,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(jN))&&t.setAttribute(jN,r.className||""),r.centered&&t.setAttribute(KK,""),r.disabled&&t.setAttribute(MA,"")}setDisabled(t,r){const i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(MA,""):t.removeAttribute(MA)}_onInteraction=t=>{const r=kl(t);if(r instanceof HTMLElement){const i=r.closest(`[${UN}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(jN)),t.append(r);const i="NoopAnimations"===this._animationMode,s=this._globalRippleOptions,o=i?0:s?.animation?.enterDuration??RA.enterDuration,a=i?0:s?.animation?.exitDuration??RA.exitDuration,l={rippleDisabled:i||s?.disabled||t.hasAttribute(MA),rippleConfig:{centered:t.hasAttribute(KK),terminateOnPointerUp:s?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:a}}},c=new sE(l,this._ngZone,r,this._platform,this._injector),u=!l.rippleDisabled;u&&c.setupTriggerEvents(t),this._hosts.set(t,{target:l,renderer:c,hasSetUpEvents:u}),t.removeAttribute(UN)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(kt||{});const Nc="*";function If(n,e){return{type:kt.Trigger,name:n,definitions:e,options:{}}}function nl(n,e=null){return{type:kt.Animate,styles:e,timings:n}}function zN(n,e=null){return{type:kt.Group,steps:n,options:e}}function Si(n){return{type:kt.Style,styles:n,offset:null}}function wf(n,e,t){return{type:kt.State,name:n,styles:e,options:t}}function rl(n,e,t=null){return{type:kt.Transition,expr:n,animation:e,options:t}}class oE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class QK{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function bAe(n,e){}class YK{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration}const GN="mdc-dialog--open",XK="mdc-dialog--opening",ZK="mdc-dialog--closing";let JK=(()=>{class n extends kK{_animationMode=N(Ec,{optional:!0});_animationStateChanged=new vn;_animationsEnabled="NoopAnimations"!==this._animationMode;_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?tQ(this._config.enterAnimationDuration)??150:0;_exitAnimationDuration=this._animationsEnabled?tQ(this._config.exitAnimationDuration)??75:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(eQ,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(XK,GN)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(GN),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(GN),this._animationsEnabled?(this._hostElement.style.setProperty(eQ,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(ZK)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(XK,ZK)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})();static \u0275cmp=Kn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){2&r&&(Kv("id",i._config.id),Fr("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Lr("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},standalone:!0,features:[bn,wi],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(te(0,"div",0)(1,"div",1),st(2,bAe,0,0,"ng-template",2),ie()())},dependencies:[SN],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})();const eQ="--mat-dialog-transition-duration";function tQ(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?U9(n.substring(0,n.length-2)):n.endsWith("s")?1e3*U9(n.substring(0,n.length-1)):"0"===n?0:null}var PA=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(PA||{});class Fg{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new E;_beforeClosed=new E;_result;_closeFallbackTimeout;_state=PA.OPEN;_closeInteractionType;constructor(e,t,r){this._ref=e,this._containerInstance=r,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(ii(i=>"opened"===i.state),us(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(ii(i=>"closed"===i.state),us(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Zu(this.backdropClick(),this.keydownEvents().pipe(ii(i=>27===i.keyCode&&!this.disableClose&&!yf(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function nQ(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(ii(t=>"closing"===t.state),us(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=PA.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=PA.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const qN=new Ee("MatMdcDialogData"),wAe=new Ee("mat-mdc-dialog-default-options"),rQ=new Ee("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=N(Ns);return()=>n.scrollStrategies.block()}});let Cf=(()=>{class n{_overlay=N(Ns);_defaultOptions=N(wAe,{optional:!0});_scrollStrategy=N(rQ);_parentDialog=N(n,{optional:!0,skipSelf:!0});_idGenerator=N(kg);_dialog=N(OK);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;dialogConfigClass=YK;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=kb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Qu(void 0)));constructor(){this._dialogRefConstructor=Fg,this._dialogContainerType=JK,this._dialogDataToken=qN}open(t,r){let i;(r={...this._defaultOptions||new YK,...r}).id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:rE,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(o,a,l)=>(i=new this._dialogRefConstructor(o,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=s.componentRef,i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iQ=(()=>{class n{_dialogRef=N(Fg,{optional:!0});_elementRef=N(Jn);_dialog=N(Cf);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=function oQ(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,standalone:!0})}return n})(),KN=(()=>{class n extends iQ{id=N(kg).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,i){2&r&&Kv("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[bn]})}return n})(),sQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[fW([RCe])]})}return n})();let SAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[Cf],imports:[GTe,nE,CA,or,or]})}return n})();function xAe(n,e){1&n&&Et(0,"img",8),2&n&&De("src",Pe().imgPath,ri)}let aE=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r,this.title=r.title||"\u63d0\u793a",this.message=r.message||"\u8acb\u7a0d\u5f8c\u518d\u8a66",this.imgPath=r.imgPath||"",this.closeMessage=r.closeMessage||"\u95dc\u9589"}close(){this.dialogRef.close()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(xe(Fg),xe(qN))}}static{this.\u0275cmp=Kn({type:n,selectors:[["app-message-dialog"]],decls:11,vars:4,consts:[["mat-dialog-title","",1,"text-xl","font-semibold","text-primary-default","mb-4"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],[1,"flex","w-4/5","items-center","justify-start"],["alt","\u7121\u641c\u5c0b\u7d50\u679c","class","w-24 h-24 sm:w-16 sm:h-16 md:w-24 md:h-24",3,"src",4,"ngIf"],[1,"text-primary-default","sm:text-xl","font-bold","ml-2","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],[1,"text-primary-default","lg:text-md","sm:text-xl"],[1,"flex","items-center","bg-primary-white","justify-center","py-3"],[1,"px-2","py-2","text-white","bg-success","rounded-full","hover:bg-primary-default","focus:outline-none","focus:ring-2","focus:ring-primary-light",3,"click"],["alt","\u7121\u641c\u5c0b\u7d50\u679c",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24",3,"src"]],template:function(r,i){1&r&&(te(0,"h1",0),ze(1),ie(),te(2,"div",1)(3,"div",2),st(4,xAe,1,1,"img",3),te(5,"h5",4)(6,"div",5),ze(7),ie()()()(),te(8,"div",6)(9,"button",7),Dt("click",function(){return i.close()}),ze(10),ie()()),2&r&&(se(),en(" ",i.title,"\n"),se(3),De("ngIf",i.imgPath),se(3),en(" ",i.message," "),se(3),en(" ",i.closeMessage," "))},dependencies:[Jh,KN]})}}return n})();const Os_familyMartUrl_icon="https://www.family.com.tw/NewEnterprise/CSR/images/favicon.ico",Os_familyMartUrl_base="https://stamp.family.com.tw/api/maps",Os_familyMartUrl_endpoint={mapClassificationInfo:"/MapClassificationInfo",mapProductInfo:"/MapProductInfo"},Os_sevenElevenUrl_icon="https://www.7-11.com.tw/favicon.ico",Os_sevenElevenUrl_base="https://lovefood.openpoint.com.tw/LoveFood/api/",Os_sevenElevenUrl_endpoint={accessToken:"Auth/FrontendAuth/AccessToken",getList:"Master/FrontendItemCategory/GetList",getStoreByAddress:"Master/FrontendStore/GetStoreByAddress",getNearbyStoreList:"Search/FrontendStoreItemStock/GetNearbyStoreList",getStoreDetail:"Search/FrontendStoreItemStock/GetStoreDetail"},Os_sevenElevenUrl_params={mid_v:"W0_DiF4DlgU5OeQoRswrRcaaNHMWOL7K3ra3385ocZcv-bBOWySZvoUtH6j-7pjiccl0C5h30uRUNbJXsABCKMqiekSb7tdiBNdVq8Ro5jgk6sgvhZla5iV0H3-8dZfASc7AhEm85679LIK3hxN7Sam6D0LAnYK9Lb0DZhn7xeTeksB4IsBx4Msr_VI"},Os_firebaseConfig={apiKey:"AIzaSyA3i_YLXpXuHNrmrHULrqnsIj5Z919aCfw",authDomain:"friendly-cat-for-you.firebaseapp.com",databaseURL:"https://friendly-cat-for-you-default-rtdb.firebaseio.com",projectId:"friendly-cat-for-you",storageBucket:"friendly-cat-for-you.firebasestorage.app",messagingSenderId:"614210455616",appId:"1:614210455616:web:cedabfd68dca95ae4337a5",measurementId:"G-3V3740GPG7"};var Ju=G(2541);let lQ=(()=>{class n{constructor(){}getCurrentPosition(){return new Promise((t,r)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>t(i),i=>r(i)):r(new Error("\u700f\u89bd\u5668\u4e0d\u652f\u63f4\u5730\u7406\u4f4d\u7f6e\u529f\u80fd"))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QN=(()=>{class n{constructor(t){this.http=t}get(t,r={}){let i=new Al;for(const s in r)r.hasOwnProperty(s)&&(i=i.set(s,r[s]));return this.http.get(t,{params:i})}post(t,r,i,s){let o=new Al;if(r)for(const a in r)r.hasOwnProperty(a)&&(o=o.set(a,r[a]));return this.http.post(t,i||{},{params:o,headers:s})}static{this.\u0275fac=function(r){return new(r||n)(Me(wb))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kA=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=Os_sevenElevenUrl_base}getAccessToken(){return this.requestService.post(this.baseUrl+Os_sevenElevenUrl_endpoint.accessToken,Os_sevenElevenUrl_params)}getStoreByAddress(t){const r=this.baseUrl+Os_sevenElevenUrl_endpoint.getStoreByAddress,i={token:sessionStorage.getItem("711Token"),keyword:t};return this.requestService.post(r,i)}getNearByStoreList(t){const r=this.baseUrl+Os_sevenElevenUrl_endpoint.getNearbyStoreList,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,t)}getFoodCategory(){const t=this.baseUrl+Os_sevenElevenUrl_endpoint.getList,r={token:sessionStorage.getItem("711Token")};return this.requestService.post(t,r)}getItemsByStoreNo(t){const r=this.baseUrl+Os_sevenElevenUrl_endpoint.getStoreDetail,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,{storeNo:t,CurrentLocation:{Latitude:25.0375197,Longitude:121.5636704}})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/seven_eleven_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Me(QN))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cQ=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=Os_familyMartUrl_base}getStores(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/family_mart_stores.json")}getNearByStoreList(t){return this.requestService.post(this.baseUrl+Os_familyMartUrl_endpoint.mapProductInfo,null,{ProjectCode:"202106302",OldPKeys:[],PostInfo:"",Latitude:t.Latitude,Longitude:t.Longitude})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/family_mart_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Me(QN))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hn=G(1631);(0,Hn.registerVersion)("firebase","10.14.1","app");const kAe=new class PAe extends bA{}(class MAe extends vA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),ed=new Yh("ANGULARFIRE2_VERSION");function uQ(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const YN=(n,e)=>{const t=e?[e]:(0,Hn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class NA{constructor(){return YN(OAe)}}const OAe="app-check";function Lg(){}class dQ{zone;delegate;constructor(e,t=kAe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class FAe{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lg,{},Lg,Lg)),t.pipe(si({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vg=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new dQ(Zone.current)),this.insideAngular=t.run(()=>new dQ(Zone.current,mf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Me(yt))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bg(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Tf(n){return Bg().ngZone.run(()=>n())}function ji(n){return function VAe(n){return function(t){return(t=t.lift(new FAe(n.ngZone))).pipe(tf(n.outsideAngular),Hu(n.insideAngular))}}(Bg())(n)}const BAe=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Tf(()=>n.apply(void 0,r))},Oc=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Tf(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lg,{},Lg,Lg))),r[s]=BAe(r[s],t));const i=function LAe(n){return Bg().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Ut){const s=Bg();return i.pipe(tf(s.outsideAngular),Hu(s.insideAngular))}return Tf(()=>i)}return i instanceof Ut?i.pipe(ji):i instanceof Promise?Tf(()=>new Promise((s,o)=>i.then(a=>Tf(()=>s(a)),a=>Tf(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Tf(()=>i)};class lE{constructor(e){return e}}class XN{constructor(){return(0,Hn.getApps)()}}const ZN=new Ee("angularfire2._apps"),jAe={provide:lE,useFactory:function UAe(n){return n&&1===n.length?n[0]:new lE((0,Hn.getApp)())},deps:[[new Mi,ZN]]},zAe={provide:XN,deps:[[new Mi,ZN]]};function HAe(n){return(e,t)=>{const r=t.get(Ys);(0,Hn.registerVersion)("angularfire",ed.full,"core"),(0,Hn.registerVersion)("angularfire",ed.full,"app"),(0,Hn.registerVersion)("angular",HG.full,r.toString());const i=e.runOutsideAngular(()=>n(t));return new lE(i)}}function $Ae(n,...e){return _l([jAe,zAe,{provide:ZN,useFactory:HAe(n),multi:!0,deps:[yt,Pn,Vg,...e]}])}const WAe=Oc(Hn.initializeApp,!0);var td=G(443),k=G(1401),xo=G(5398),Xo=G(8779);class OA{constructor(e){return e}}const JN=new Ee("angularfire2.auth-instances");function KAe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OA(r)}}const QAe={provide:class GAe{constructor(){return YN("auth")}},deps:[[new Mi,JN]]},YAe={provide:OA,useFactory:function qAe(n,e){const t=uQ("auth",n,e);return t&&new OA(t)},deps:[[new Mi,JN],lE]};function XAe(n,...e){return(0,Hn.registerVersion)("angularfire",ed.full,"auth"),_l([YAe,QAe,{provide:JN,useFactory:KAe(n),multi:!0,deps:[yt,Pn,Vg,XN,[new Mi,NA],...e]}])}const ZAe=Oc(td.aa,!0),JAe=Oc(td.o,!0),eSe=Oc(td.y,!0),eO=Oc(td.ag,!0),tSe=Oc(td.ab,!0),nSe=Oc(td.c,!0),rSe=Oc(td.ak,!0),We=function(n,e){if(!n)throw Ug(e)},Ug=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},fQ=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},nO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let m=(15&a)<<2|c>>6,y=63&c;l||(y=64,o||(m=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fQ(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==h)throw new sSe;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==h&&r.push(c<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class sSe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pQ=function(n){const e=fQ(n);return nO.encodeByteArray(e,!0)},FA=function(n){return pQ(n).replace(/\./g,"")},LA=function(n){try{return nO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oSe(n){return mQ(void 0,n)}function mQ(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!aSe(t)||(n[t]=mQ(n[t],e[t]));return n}function aSe(n){return"__proto__"!==n}const VA=()=>{try{return function lSe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&LA(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},gQ=n=>{var e,t;return null===(t=null===(e=VA())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},_Q=()=>{var n;return null===(n=VA())||void 0===n?void 0:n.config},yQ=n=>{var e;return null===(e=VA())||void 0===e?void 0:e[`_${n}`]};class BA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function ds(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ds())}function vQ(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class nd extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,nd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cE.prototype.create)}}class cE{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function ISe(n,e){return n.replace(wSe,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new nd(i,`${this.serviceName}: ${o} (${i}).`,r)}}const wSe=/\{\$([^}]+)}/g;function uE(n){return JSON.parse(n)}function zi(n){return JSON.stringify(n)}const UA=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=uE(LA(s[0])||""),t=uE(LA(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Nl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function jg(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function iO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jA(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function zA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(bQ(s)&&bQ(o)){if(!zA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function bQ(n){return null!==n&&"object"==typeof n}function zg(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class ASe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let h=0;h<16;h++)r[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)r[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const m=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=4294967295&(m<<1|m>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const m=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class xSe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function DSe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=sO),void 0===i.error&&(i.error=sO),void 0===i.complete&&(i.complete=sO);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sO(){}function Hg(n,e){return`${n} failed: ${e} argument `}const HA=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function Ia(n){return n&&n._delegate?n._delegate:n}class Af{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Sf="[DEFAULT]";class FSe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new BA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function VSe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Sf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Sf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,O.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Sf){return this.instances.has(e)}getOptions(e=Sf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Sf?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Sf){return this.component?this.component.multipleInstances?e:Sf:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class BSe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new FSe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const oO=[];var tr=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(tr||{});const EQ={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},USe=tr.INFO,jSe={[tr.DEBUG]:"log",[tr.VERBOSE]:"log",[tr.INFO]:"info",[tr.WARN]:"warn",[tr.ERROR]:"error"},zSe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=jSe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class aO{constructor(e){this.name=e,this._logLevel=USe,this._logHandler=zSe,this._userLogHandler=null,oO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?EQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tr.DEBUG,...e),this._logHandler(this,tr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tr.VERBOSE,...e),this._logHandler(this,tr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tr.INFO,...e),this._logHandler(this,tr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tr.WARN,...e),this._logHandler(this,tr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tr.ERROR,...e),this._logHandler(this,tr.ERROR,...e)}}var IQ=G(6749);class HSe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function $Se(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const $A="@firebase/app",lO="0.10.17",Lc=new aO("@firebase/app"),WSe="@firebase/app-compat",GSe="@firebase/analytics-compat",qSe="@firebase/analytics",KSe="@firebase/app-check-compat",QSe="@firebase/app-check",YSe="@firebase/auth",XSe="@firebase/auth-compat",ZSe="@firebase/database",JSe="@firebase/data-connect",exe="@firebase/database-compat",txe="@firebase/functions",nxe="@firebase/functions-compat",rxe="@firebase/installations",ixe="@firebase/installations-compat",sxe="@firebase/messaging",oxe="@firebase/messaging-compat",axe="@firebase/performance",lxe="@firebase/performance-compat",cxe="@firebase/remote-config",uxe="@firebase/remote-config-compat",dxe="@firebase/storage",hxe="@firebase/storage-compat",fxe="@firebase/firestore",pxe="@firebase/vertexai",mxe="@firebase/firestore-compat",gxe="firebase",WA="[DEFAULT]",yxe={[$A]:"fire-core",[WSe]:"fire-core-compat",[qSe]:"fire-analytics",[GSe]:"fire-analytics-compat",[QSe]:"fire-app-check",[KSe]:"fire-app-check-compat",[YSe]:"fire-auth",[XSe]:"fire-auth-compat",[ZSe]:"fire-rtdb",[JSe]:"fire-data-connect",[exe]:"fire-rtdb-compat",[txe]:"fire-fn",[nxe]:"fire-fn-compat",[rxe]:"fire-iid",[ixe]:"fire-iid-compat",[sxe]:"fire-fcm",[oxe]:"fire-fcm-compat",[axe]:"fire-perf",[lxe]:"fire-perf-compat",[cxe]:"fire-rc",[uxe]:"fire-rc-compat",[dxe]:"fire-gcs",[hxe]:"fire-gcs-compat",[fxe]:"fire-fst",[mxe]:"fire-fst-compat",[pxe]:"fire-vertex","fire-js":"fire-js",[gxe]:"fire-js-all"},xf=new Map,dE=new Map,hE=new Map;function wQ(n,e){try{n.container.addComponent(e)}catch(t){Lc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $g(n){const e=n.name;if(hE.has(e))return Lc.debug(`There were multiple attempts to register component ${e}.`),!1;hE.set(e,n);for(const t of xf.values())wQ(t,n);for(const t of dE.values())wQ(t,n);return!0}function GA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rd(n){return void 0!==n.settings}const wa=new cE("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class CQ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Af("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wa.create("app-deleted",{appName:this._name})}}const Wg="11.1.0";function TQ(n=WA){const e=xf.get(n);if(!e&&n===WA&&_Q())return function Ixe(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:WA,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw wa.create("bad-app-name",{appName:String(i)});if(t||(t=_Q()),!t)throw wa.create("no-options");const s=xf.get(i);if(s){if(zA(t,s.options)&&zA(r,s.config))return s;throw wa.create("duplicate-app",{appName:i})}const o=new BSe(i);for(const l of hE.values())o.addComponent(l);const a=new CQ(t,r,o);return xf.set(i,a),a}();if(!e)throw wa.create("no-app",{appName:n});return e}function id(n,e,t){var r;let i=null!==(r=yxe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Lc.warn(a.join(" "))}$g(new Af(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Cxe="firebase-heartbeat-database",Txe=1,fE="firebase-heartbeat-store";let uO=null;function AQ(){return uO||(uO=(0,IQ.P2)(Cxe,Txe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(fE)}catch(t){console.warn(t)}}}).catch(n=>{throw wa.create("idb-open",{originalErrorMessage:n.message})})),uO}function dO(){return(dO=(0,O.A)(function*(n){try{const t=(yield AQ()).transaction(fE),r=yield t.objectStore(fE).get(xQ(n));return yield t.done,r}catch(e){if(e instanceof nd)Lc.warn(e.message);else{const t=wa.create("idb-get",{originalErrorMessage:e?.message});Lc.warn(t.message)}}})).apply(this,arguments)}function SQ(n,e){return hO.apply(this,arguments)}function hO(){return(hO=(0,O.A)(function*(n,e){try{const r=(yield AQ()).transaction(fE,"readwrite");yield r.objectStore(fE).put(e,xQ(n)),yield r.done}catch(t){if(t instanceof nd)Lc.warn(t.message);else{const r=wa.create("idb-set",{originalErrorMessage:t?.message});Lc.warn(r.message)}}})).apply(this,arguments)}function xQ(n){return`${n.name}!${n.options.appId}`}class Dxe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Mxe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,O.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=DQ();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Lc.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,O.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=DQ(),{heartbeatsToSend:i,unsentEntries:s}=function Rxe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),RQ(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),RQ(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=FA(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Lc.warn(r),""}})()}}function DQ(){return(new Date).toISOString().substring(0,10)}class Mxe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,O.A)(function*(){return!!function vSe(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function bSe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,O.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Axe(n){return dO.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,O.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return SQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,O.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return SQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function RQ(n){return FA(JSON.stringify({version:2,heartbeats:n})).length}!function Pxe(n){$g(new Af("platform-logger",e=>new HSe(e),"PRIVATE")),$g(new Af("heartbeat",e=>new Dxe(e),"PRIVATE")),id($A,lO,n),id($A,lO,"esm2017"),id("fire-js","")}("");const MQ="@firebase/database";let fO="";class kxe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zi(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:uE(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Nxe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Nl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const NQ=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kxe(e)}}catch{}return new Nxe},Df=NQ("localStorage"),pO=NQ("sessionStorage"),Gg=new aO("@firebase/database"),OQ=function(){let n=1;return function(){return n++}}(),FQ=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,We(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new ASe;t.update(e);const r=t.digest();return nO.encodeByteArray(r)},pE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=pE.apply(null,r):e+="object"==typeof r?zi(r):r,e+=" "}return e};let Rf=null,LQ=!0;const Xi=function(...n){if(!0===LQ&&(LQ=!1,null===Rf&&!0===pO.get("logging_enabled")&&function(n,e){We(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Gg.logLevel=tr.VERBOSE,Rf=Gg.log.bind(Gg),e&&pO.set("logging_enabled",!0)):"function"==typeof n?Rf=n:(Rf=null,pO.remove("logging_enabled"))}(!0)),Rf){const e=pE.apply(null,n);Rf(e)}},mE=function(n){return function(...e){Xi(n,...e)}},mO=function(...n){const e="FIREBASE INTERNAL ERROR: "+pE(...n);Gg.error(e)},Ol=function(...n){const e=`FIREBASE FATAL ERROR: ${pE(...n)}`;throw Gg.error(e),new Error(e)},Fs=function(...n){const e="FIREBASE WARNING: "+pE(...n);Gg.warn(e)},qA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},sd="[MIN_NAME]",Vc="[MAX_NAME]",Mf=function(n,e){if(n===e)return 0;if(n===sd||e===Vc)return-1;if(e===sd||n===Vc)return 1;{const t=jQ(n),r=jQ(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Lxe=function(n,e){return n===e?0:n<e?-1:1},gE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+zi(e))},gO=function(n){if("object"!=typeof n||null===n)return zi(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=zi(e[r]),t+=":",t+=gO(n[e[r]]);return t+="}",t},BQ=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Zi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const UQ=function(n){We(!qA(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),h+=m}return h.toLowerCase()},jxe=new RegExp("^-?(0*)\\d{1,10}$"),jQ=function(n){if(jxe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},qg=function(n){try{n()}catch(e){setTimeout(()=>{throw Fs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},_E=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Wxe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Fs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Gxe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fs(e)}}let yE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const GQ=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QQ="websocket",YQ="long_polling";class yO{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Df.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Df.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function XQ(n,e,t){let r;if(We("string"==typeof e,"typeof type must == string"),We("object"==typeof t,"typeof params must == object"),e===QQ)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==YQ)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function qxe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Zi(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Kxe{constructor(){this.counters_={}}incrementCounter(e,t=1){Nl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return oSe(this.counters_)}}const vO={},bO={};function EO(n){const e=n.toString();return vO[e]||(vO[e]=new Kxe),vO[e]}class Yxe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&qg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class od{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mE(e),this.stats_=EO(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),XQ(t,YQ,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Yxe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new IO((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&GQ.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){od.forceAllow_=!0}static forceDisallow(){od.forceDisallow_=!0}static isAvailable(){return!(!od.forceAllow_&&(od.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=zi(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=pQ(t),i=BQ(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=zi(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class IO{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=OQ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=IO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xi("frame writing exception"),a.stack&&Xi(a.stack),Xi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Xi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Xi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let QA=null;typeof MozWebSocket<"u"?QA=MozWebSocket:typeof WebSocket<"u"&&(QA=WebSocket);let Kg=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mE(this.connId),this.stats_=EO(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&GQ.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),XQ(t,QQ,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Df.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new QA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==QA&&!n.forceDisallow_}static previouslyFailed(){return Df.isInMemoryStorage||!0===Df.get("previous_websocket_failure")}markConnectionHealthy(){Df.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=uE(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(We(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=zi(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=BQ(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),iY=(()=>{class n{static get ALL_TRANSPORTS(){return[od,Kg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=Kg&&Kg.isAvailable();let i=r&&!Kg.previouslyFailed();if(t.webSocketOnly&&(r||Fs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Kg];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class dY{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mE("c:"+this.id+":"),this.transportManager_=new iY(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=_E(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=gE("t",e),r=gE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=gE("t",e),r=gE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=gE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?mO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Fs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),_E(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_E(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Df.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class hY{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class fY{constructor(e){this.allowedEvents_=e,this.listeners_={},We(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){We(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class YA extends fY{static getInstance(){return new YA}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!rO()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return We("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class $n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function kn(){return new $n("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ad(n){return n.pieces_.length-n.pieceNum_}function ar(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new $n(n.pieces_,e)}function CO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function vE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function gY(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new $n(e,0)}function Vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof $n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new $n(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function io(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return io(ar(n),ar(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function TO(n,e){if(ad(n)!==ad(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ca(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ad(n)>ad(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class vDe{constructor(e,t){this.errorPrefix_=t,this.parts_=vE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=HA(this.parts_[r]);_Y(this)}}function _Y(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pf(n))}function Pf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class AO extends fY{static getInstance(){return new AO}constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return We("visible"===e,"Unknown event type: "+e),[this.visible_]}}const bE=1e3;let ZA,kf=(()=>{class n extends hY{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=mE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");AO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&YA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(zi(o)),We(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new BA,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),We(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),We(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Nl(t,"w")){const i=jg(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Fs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=UA(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=UA(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),We(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+zi(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):mO("Unrecognized action received from server: "+zi(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){We(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=bE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=bE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){We(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?Xi("getToken() completed but was canceled"):(Xi("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new dY(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{Fs(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&Fs(y),u())}}})()}interrupt(t){Xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],iO(this.interruptReasons_)&&(this.reconnectDelay_=bE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>gO(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new $n(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Xi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Xi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+fO.replace(/\./g,"-")]=1,rO()?t["framework.cordova"]=1:vQ()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=YA.getInstance().currentlyOnline();return iO(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class XA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(sd,e),i=new cn(sd,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class bY extends XA{static get __EMPTY_NODE(){return ZA}static set __EMPTY_NODE(e){ZA=e}compare(e,t){return Mf(e.name,t.name)}isDefinedOn(e){throw Ug("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn(Vc,ZA)}makePost(e,t){return We("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,ZA)}toString(){return".key"}}const Fl=new bY;class JA{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let xO,il=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Do.EMPTY_NODE,this.right=o??Do.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Do.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Do.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Do{constructor(e,t=Do.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Do(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,il.BLACK,null,null))}remove(e){return new Do(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,il.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new JA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new JA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new JA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new JA(this.root_,null,this.comparator_,!0,e)}}function SDe(n,e){return Mf(n.name,e.name)}function SO(n,e){return Mf(n,e)}Do.EMPTY_NODE=new class ADe{copy(e,t,r,i,s){return this}insert(e,t,r){return new il(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const EY=function(n){return"number"==typeof n?"number:"+UQ(n):"string:"+n},IY=function(n){if(n.isLeafNode()){const e=n.val();We("string"==typeof e||"number"==typeof e||"object"==typeof e&&Nl(e,".sv"),"Priority must be a string or number.")}else We(n===xO||n.isEmpty(),"priority of unexpected type.");We(n===xO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let wY,CY,TY,Qg=(()=>{class n{static set __childrenNodeConstructor(t){wY=t}static get __childrenNodeConstructor(){return wY}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,We(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),IY(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(We(".priority"!==i||1===ad(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ar(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+EY(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?UQ(this.value_):this.value_,this.lazyHash_=FQ(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(We(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return We(s>=0,"Unknown leaf type: "+r),We(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const gr=new class MDe extends XA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Mf(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(Vc,new Qg("[PRIORITY-POST]",TY))}makePost(e,t){const r=CY(e);return new cn(t,new Qg("[PRIORITY-POST]",r))}toString(){return".priority"}},PDe=Math.log(2);class kDe{constructor(e){this.count=parseInt(Math.log(e+1)/PDe,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const eS=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let h,m;if(0===u)return null;if(1===u)return h=n[l],m=t?t(h):h,new il(m,h.node,il.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return h=n[y],m=t?t(h):h,new il(m,h.node,il.BLACK,b,T)}},a=function(l){let c=null,u=null,h=n.length;const m=function(b,T){const M=h-b,B=h;h-=b;const V=i(M+1,B),Q=n[M],we=t?t(Q):Q;y(new il(we,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),M=Math.pow(2,l.count-(b+1));T?m(M,il.BLACK):(m(M,il.BLACK),m(M,il.RED))}return u}(new kDe(n.length));return new Do(r||e,a)};let DO;const Yg={};class Bc{static get Default(){return We(Yg&&gr,"ChildrenNode.ts has not been loaded"),DO=DO||new Bc({".priority":Yg},{".priority":gr}),DO}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=jg(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Do?t:null}hasIndex(e){return Nl(this.indexSet_,e.toString())}addIndex(e,t){We(e!==Fl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(cn.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?eS(r,e.getCompare()):Yg;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Bc(u,c)}addToIndexes(e,t){const r=jA(this.indexes_,(i,s)=>{const o=jg(this.indexSet_,s);if(We(o,"Missing index implementation for "+s),i===Yg){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(cn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),eS(a,o.getCompare())}return Yg}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new cn(e.name,a))),l.insert(e,e.node)}});return new Bc(r,this.indexSet_)}removeFromIndexes(e,t){const r=jA(this.indexes_,i=>{if(i===Yg)return i;{const s=t.get(e.name);return s?i.remove(new cn(e.name,s)):i}});return new Bc(r,this.indexSet_)}}let EE,Wt=(()=>{class n{static get EMPTY_NODE(){return EE||(EE=new n(new Do(SO),null,Bc.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&IY(this.priorityNode_),this.children_.isEmpty()&&We(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?EE:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(ar(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(We(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?EE:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{We(".priority"!==sn(t)||1===ad(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ar(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(gr,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+EY(this.getPriority().val())+":"),this.forEachChild(gr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":FQ(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new cn(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,cn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===IE?-1:0}withIndex(t){if(t===Fl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(gr),s=r.getIterator(gr);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Fl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const IE=new class NDe extends Wt{constructor(){super(new Do(SO),Wt.EMPTY_NODE,Bc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(cn,{MIN:{value:new cn(sd,Wt.EMPTY_NODE)},MAX:{value:new cn(Vc,IE)}}),bY.__EMPTY_NODE=Wt.EMPTY_NODE,Qg.__childrenNodeConstructor=Wt,function xDe(n){xO=n}(IE),function RDe(n){TY=n}(IE);const ODe=!0;function Yr(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),We(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Qg(n,Yr(e));if(n instanceof Array||!ODe){let t=Wt.EMPTY_NODE;return Zi(n,(r,i)=>{if(Nl(n,r)&&"."!==r.substring(0,1)){const s=Yr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Yr(e))}{const t=[];let r=!1;if(Zi(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Yr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new cn(o,l)))}}),0===t.length)return Wt.EMPTY_NODE;const s=eS(t,SDe,o=>o.name,SO);if(r){const o=eS(t,gr.getCompare());return new Wt(s,Yr(e),new Bc({".priority":o},{".priority":gr}))}return new Wt(s,Yr(e),Bc.Default)}}!function DDe(n){CY=n}(Yr);class RO extends XA{constructor(e){super(),this.indexPath_=e,We(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Mf(e.name,t.name):s}makePost(e,t){const r=Yr(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,IE);return new cn(Vc,e)}toString(){return vE(this.indexPath_,0).join("/")}}const MO=new class FDe extends XA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=Yr(e);return new cn(t,r)}toString(){return".value"}};function AY(n){return{type:"value",snapshotNode:n}}function Xg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function wE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function CE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class PO{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){We(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(wE(t,a)):We(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Xg(t,r)):o.trackChildChange(CE(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(gr,(i,s)=>{t.hasChild(i)||r.trackChildChange(wE(i,s))}),t.isLeafNode()||t.forEachChild(gr,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(CE(i,s,o))}else r.trackChildChange(Xg(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class TE{constructor(e){this.indexedFilter_=new PO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=TE.getStartPost_(e),this.endPost_=TE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new cn(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const s=this;return t.forEachChild(gr,(o,a)=>{s.matches(new cn(o,a))||(i=i.updateImmediateChild(o,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class VDe{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new TE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new cn(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Wt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(m,y)=>h(y,m)}else o=this.index_.getCompare();const a=e;We(a.numChildren()===this.limit_,"");const l=new cn(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const h=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(CE(t,r,h)),a.updateImmediateChild(t,r);{s?.trackChildChange(wE(t,h));const T=a.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Xg(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(wE(c.name,c.node)),s.trackChildChange(Xg(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,Wt.EMPTY_NODE)):e}}class kO{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return We(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return We(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sd}hasEnd(){return this.endSet_}getIndexEndValue(){return We(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return We(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return We(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===gr}copy(){const e=new kO;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function SY(n){const e={};if(n.isDefault())return e;let t;if(n.index_===gr?t="$priority":n.index_===MO?t="$value":n.index_===Fl?t="$key":(We(n.index_ instanceof RO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=zi(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=zi(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+zi(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=zi(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+zi(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function xY(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==gr&&(e.i=n.index_.toString()),e}class nS extends hY{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(We(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=mE("p:rest:"),this.listens_={}}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=nS.getListenId_(e,r),a={};this.listens_[o]=a;const l=SY(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(404===c&&(h=null,c=null),null===c&&this.onDataUpdate_(s,h,!1,r),jg(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=nS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=SY(e._queryParams),r=e._path.toString(),i=new BA;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zg(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=uE(a.responseText)}catch{Fs("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Fs("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class $De{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function rS(){return{value:null,children:new Map}}function Zg(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,rS()),Zg(n.children.get(r),e=ar(e),t)}}function LO(n,e,t){null!==n.value?t(e,n.value):function WDe(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{LO(i,new $n(e.toString()+"/"+r),t)})}class GDe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class QDe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new GDe(e);const r=1e4+2e4*Math.random();_E(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Zi(e,(i,s)=>{s>0&&Nl(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),_E(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ll=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ll||{});function UO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ll.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return We(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new $n(e));return new iS(kn(),t,this.revert)}}return We(sn(this.path)===e,"operationForChild called for unrelated child."),new iS(ar(this.path),this.affectedTree,this.revert)}}class AE{constructor(e,t){this.source=e,this.path=t,this.type=Ll.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new AE(this.source,kn()):new AE(this.source,ar(this.path))}}class Nf{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ll.OVERWRITE}operationForChild(e){return on(this.path)?new Nf(this.source,kn(),this.snap.getImmediateChild(e)):new Nf(this.source,ar(this.path),this.snap)}}class Jg{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ll.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new $n(e));return t.isEmpty()?null:t.value?new Nf(this.source,kn(),t.value):new Jg(this.source,kn(),t)}return We(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Jg(this.source,ar(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ld{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class YDe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function SE(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function JDe(n,e,t){if(null==e.childName||null==t.childName)throw Ug("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function ZDe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function sS(n,e){return{eventCache:n,serverCache:e}}function xE(n,e,t,r){return sS(new ld(e,t,r),n.serverCache)}function RY(n,e,t,r){return sS(n.eventCache,new ld(e,t,r))}function oS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Of(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let jO;class _r{static fromObject(e){let t=new _r(null);return Zi(e,(r,i)=>{t=t.set(new $n(r),i)}),t}constructor(e,t=(()=>(jO||(jO=new Do(Lxe)),jO))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:kn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(ar(e),t);return null!=s?{path:Vr(new $n(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(ar(e)):new _r(null)}}set(e,t){if(on(e))return new _r(t,this.children);{const r=sn(e),s=(this.children.get(r)||new _r(null)).set(ar(e),t),o=this.children.insert(r,s);return new _r(this.value,o)}}remove(e){if(on(e))return this.children.isEmpty()?new _r(null):new _r(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(ar(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new _r(null):new _r(this.value,s)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(ar(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),s=(this.children.get(r)||new _r(null)).setTree(ar(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new _r(this.value,o)}}fold(e){return this.fold_(kn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,kn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const s=sn(e),o=this.children.get(s);return o?o.findOnPath_(ar(e),Vr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,kn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),s=this.children.get(i);return s?s.foreachOnPath_(ar(e),Vr(t,i),r):new _r(null)}}foreach(e){this.foreach_(kn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class sl{constructor(e){this.writeTree_=e}static empty(){return new sl(new _r(null))}}function DE(n,e,t){if(on(e))return new sl(new _r(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=io(i,e);return s=s.updateChild(o,t),new sl(n.writeTree_.set(i,s))}{const i=new _r(t),s=n.writeTree_.setTree(e,i);return new sl(s)}}}function zO(n,e,t){let r=n;return Zi(t,(i,s)=>{r=DE(r,Vr(e,i),s)}),r}function MY(n,e){if(on(e))return sl.empty();{const t=n.writeTree_.setTree(e,new _r(null));return new sl(t)}}function HO(n,e){return null!=Ff(n,e)}function Ff(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(io(t.path,e)):null}function PY(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(gr,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function cd(n,e){if(on(e))return n;{const t=Ff(n,e);return new sl(null!=t?new _r(t):n.writeTree_.subtree(e))}}function $O(n){return n.writeTree_.isEmpty()}function e_(n,e){return kY(kn(),n.writeTree_,e)}function kY(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(We(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=kY(Vr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Vr(n,".priority"),r)),t}}function aS(n,e){return VY(e,n)}function sRe(n,e){if(n.snap)return Ca(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ca(Vr(n.path,t),e))return!0;return!1}function aRe(n){return n.visible}function NY(n,e,t){let r=sl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Ca(t,o)?(a=io(t,o),r=DE(r,a,s.snap)):Ca(o,t)&&(a=io(o,t),r=DE(r,kn(),s.snap.getChild(a)));else{if(!s.children)throw Ug("WriteRecord should have .snap or .children");if(Ca(t,o))a=io(t,o),r=zO(r,a,s.children);else if(Ca(o,t))if(a=io(o,t),on(a))r=zO(r,kn(),s.children);else{const l=jg(s.children,sn(a));if(l){const c=l.getChild(ar(a));r=DE(r,kn(),c)}}}}}return r}function OY(n,e,t,r,i){if(r||i){const s=cd(n.visibleWrites,e);return!i&&$O(s)?t:i||null!=t||HO(s,kn())?e_(NY(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Ca(c.path,e)||Ca(e,c.path))},e),t||Wt.EMPTY_NODE):null}{const s=Ff(n.visibleWrites,e);if(null!=s)return s;{const o=cd(n.visibleWrites,e);return $O(o)?t:null!=t||HO(o,kn())?e_(o,t||Wt.EMPTY_NODE):null}}}function lS(n,e,t,r){return OY(n.writeTree,n.treePath,e,t,r)}function WO(n,e){return function lRe(n,e,t){let r=Wt.EMPTY_NODE;const i=Ff(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(gr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=cd(n.visibleWrites,e);return t.forEachChild(gr,(o,a)=>{const l=e_(cd(s,new $n(o)),a);r=r.updateImmediateChild(o,l)}),PY(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return PY(cd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function FY(n,e,t,r){return function cRe(n,e,t,r,i){We(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Vr(e,t);if(HO(n.visibleWrites,s))return null;{const o=cd(n.visibleWrites,s);return $O(o)?i.getChild(t):e_(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function cS(n,e){return function dRe(n,e){return Ff(n.visibleWrites,e)}(n.writeTree,Vr(n.treePath,e))}function GO(n,e,t){return function uRe(n,e,t,r){const i=Vr(e,t),s=Ff(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?e_(cd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function LY(n,e){return VY(Vr(n.treePath,e),n.writeTree)}function VY(n,e){return{treePath:n,writeTree:e}}class mRe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;We("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),We(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,CE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,wE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Xg(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Ug("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,CE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const BY=new class gRe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class qO{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ld(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return GO(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Of(this.viewCache_),s=function pRe(n,e,t,r,i,s){return function hRe(n,e,t,r,i,s,o){let a;const l=cd(n.visibleWrites,e),c=Ff(l,kn());if(null!=c)a=c;else{if(null==t)return[];a=e_(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==h(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function UY(n,e,t,r,i,s){const o=e.eventCache;if(null!=cS(r,t))return e;{let a,l;if(on(t))if(We(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Of(e),h=WO(r,c instanceof Wt?c:Wt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=lS(r,Of(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=sn(t);if(".priority"===c){We(1===ad(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=FY(r,t,u,l);a=null!=h?n.filter.updatePriority(u,h):o.getNode()}else{const u=ar(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=FY(r,t,o.getNode(),l);h=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else h=GO(r,c,e.serverCache);a=null!=h?n.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return xE(e,a,o.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function uS(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(on(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=sn(t);if(!l.isCompleteForPath(t)&&ad(t)>1)return e;const b=ar(t),M=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),M):u.updateChild(l.getNode(),y,M,b,BY,null)}const h=RY(e,c,l.isFullyInitialized()||on(t),u.filtersNodes());return UY(n,h,t,i,new qO(i,h,s),a)}function KO(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new qO(i,e,s);if(on(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=xE(e,c,!0,n.filter.filtersNodes());else{const h=sn(t);if(".priority"===h)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=xE(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=ar(t),y=a.getNode().getImmediateChild(h);let b;if(on(m))b=r;else{const T=u.getCompleteChild(h);b=null!=T?".priority"===CO(m)&&T.getChild(gY(m)).isEmpty()?T:T.updateChild(m,r):Wt.EMPTY_NODE}l=y.equals(b)?e:xE(e,n.filter.updateChild(a.getNode(),h,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function jY(n,e){return n.eventCache.isCompleteForChild(e)}function zY(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function QO(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=on(t)?r:new _r(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,m)=>{if(u.hasChild(h)){const b=zY(0,e.serverCache.getNode().getImmediateChild(h),m);l=uS(n,l,new $n(h),b,i,s,o,a)}}),c.children.inorderTraversal((h,m)=>{const y=!e.serverCache.isCompleteForChild(h)&&null===m.value;if(!u.hasChild(h)&&!y){const T=zY(0,e.serverCache.getNode().getImmediateChild(h),m);l=uS(n,l,new $n(h),T,i,s,o,a)}}),l}class TRe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new PO(r.getIndex()),s=function BDe(n){return n.loadsAllData()?new PO(n.getIndex()):n.hasLimit()?new VDe(n):new TE(n)}(r);this.processor_=function _Re(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Wt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Wt.EMPTY_NODE,a.getNode(),null),u=new ld(l,o.isFullyInitialized(),i.filtersNodes()),h=new ld(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=sS(h,u),this.eventGenerator_=new YDe(this.query_)}get query(){return this.query_}}function xRe(n,e){const t=Of(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function HY(n){return 0===n.eventRegistrations_.length}function $Y(n,e,t){const r=[];if(t){We(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function WY(n,e,t,r){e.type===Ll.MERGE&&null!==e.source.queryId&&(We(Of(n.viewCache_),"We should always have a full cache before handling merges"),We(oS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function vRe(n,e,t,r,i){const s=new mRe;let o,a;if(t.type===Ll.OVERWRITE){const c=t;c.source.fromUser?o=KO(n,e,c.path,c.snap,r,i,s):(We(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!on(c.path),o=uS(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Ll.MERGE){const c=t;c.source.fromUser?o=function ERe(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Vr(t,l);jY(e,sn(u))&&(a=KO(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Vr(t,l);jY(e,sn(u))||(a=KO(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(We(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=QO(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Ll.ACK_USER_WRITE){const c=t;o=c.revert?function CRe(n,e,t,r,i,s){let o;if(null!=cS(r,t))return e;{const a=new qO(r,e,i),l=e.eventCache.getNode();let c;if(on(t)||".priority"===sn(t)){let u;if(e.serverCache.isFullyInitialized())u=lS(r,Of(e));else{const h=e.serverCache.getNode();We(h instanceof Wt,"serverChildren would be complete if leaf node"),u=WO(r,h)}c=n.filter.updateFullNode(l,u,s)}else{const u=sn(t);let h=GO(r,u,e.serverCache);null==h&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),c=null!=h?n.filter.updateChild(l,u,h,ar(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,Wt.EMPTY_NODE,ar(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lS(r,Of(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=cS(r,kn()),xE(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function IRe(n,e,t,r,i,s,o){if(null!=cS(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(on(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return uS(n,e,t,l.getNode().getChild(t),i,s,a,o);if(on(t)){let c=new _r(null);return l.getNode().forEachChild(Fl,(u,h)=>{c=c.set(new $n(u),h)}),QO(n,e,t,c,i,s,a,o)}return e}{let c=new _r(null);return r.foreach((u,h)=>{const m=Vr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),QO(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==Ll.LISTEN_COMPLETE)throw Ug("Unknown operation type: "+t.type);o=function wRe(n,e,t,r,i){const s=e.serverCache;return UY(n,RY(e,s.getNode(),s.isFullyInitialized()||on(t),s.isFiltered()),t,r,BY,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function bRe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=oS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(AY(oS(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function yRe(n,e){We(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),We(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),We(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,GY(n,s.changes,s.viewCache.eventCache.getNode(),null)}function GY(n,e,t,r){return function XDe(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function LDe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),SE(n,i,"child_removed",e,r,t),SE(n,i,"child_added",e,r,t),SE(n,i,"child_moved",s,r,t),SE(n,i,"child_changed",e,r,t),SE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let dS,fS;class qY{constructor(){this.views=new Map}}function YO(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return We(null!=s,"SyncTree gave us an op for an invalid query."),WY(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(WY(o,e,t,r));return s}}function KY(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=lS(t,i?r:null),l=!1;a?l=!0:r instanceof Wt?(a=WO(t,r),l=!1):(a=Wt.EMPTY_NODE,l=!1);const c=sS(new ld(a,l,!1),new ld(r,i,!1));return new TRe(e,c)}return o}function QY(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ud(n,e){let t=null;for(const r of n.views.values())t=t||xRe(r,e);return t}function YY(n,e){return e._queryParams.loadsAllData()?hS(n):n.views.get(e._queryIdentifier)}function XY(n,e){return null!=YY(n,e)}function dd(n){return null!=hS(n)}function hS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let VRe=1;class ZY{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _r(null),this.pendingWriteTree_=function fRe(){return{visibleWrites:sl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function XO(n,e,t,r,i){return function tRe(n,e,t,r,i){We(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=DE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?t_(n,new Nf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function hd(n,e,t=!1){const r=function rRe(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function iRe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);We(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&sRe(a,r.path)?i=!1:Ca(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function oRe(n){n.visibleWrites=NY(n.allWrites,aRe,kn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=MY(n.visibleWrites,r.path):Zi(r.children,l=>{n.visibleWrites=MY(n.visibleWrites,Vr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new _r(null);return null!=r.snap?s=s.set(kn(),!0):Zi(r.children,o=>{s=s.set(new $n(o),!0)}),t_(n,new iS(r.path,s,t))}return[]}function RE(n,e,t){return t_(n,new Nf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function pS(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||XY(o,e))){const l=function ORe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=dd(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat($Y(c,t,r)),HY(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat($Y(l,t,r)),HY(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!dd(n)&&s.push(new(function PRe(){return We(dS,"Reference.ts has not been loaded"),dS}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function kRe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(s,(m,y)=>dd(y));if(u&&!h){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function WRe(n){return n.fold((e,t,r)=>{if(t&&dd(t))return[hS(t)];{let i=[];return t&&(i=QY(t)),Zi(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],M=T.query,B=nX(n,T);n.listenProvider_.startListening(PE(M),ME(n,M),B.hashFn,B.onComplete)}}}!h&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(PE(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(gS(m));n.listenProvider_.stopListening(PE(m),y)}))}!function GRe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=gS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function JY(n,e,t,r){const i=JO(n,r);if(null!=i){const s=eF(i),o=s.path,a=s.queryId,l=io(o,e);return tF(n,o,new Nf(UO(a),l,t))}return[]}function ZO(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=io(m,i);s=s||ud(y,b),o=o||dd(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||dd(a),s=s||ud(a,kn())):(a=new qY,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=ud(b,kn());T&&(s=s.updateImmediateChild(y,T))}));const c=XY(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=gS(e);We(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function qRe(){return VRe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let h=function NRe(n,e,t,r,i,s){const o=KY(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function DRe(n,e){n.eventRegistrations_.push(e)}(o,t),function RRe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(gr,(s,o)=>{r.push(Xg(s,o))}),t.isFullyInitialized()&&r.push(AY(t.getNode())),GY(n,r,t.getNode(),e)}(o,t)}(a,e,t,aS(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=YY(a,e);h=h.concat(function KRe(n,e,t){const r=e._path,i=ME(n,e),s=nX(n,t),o=n.listenProvider_.startListening(PE(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)We(!dd(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!on(c)&&u&&dd(u))return[hS(u).query];{let m=[];return u&&(m=m.concat(QY(u).map(y=>y.query))),Zi(h,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(PE(u),ME(n,u))}}return o}(n,e,m))}return h}function mS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=ud(a,io(o,e));if(c)return c});return OY(i,e,s,t,!0)}function t_(n,e){return eX(e,n.syncPointTree_,null,aS(n.pendingWriteTree_,kn()))}function eX(n,e,t,r){if(on(n.path))return tX(n,e,t,r);{const i=e.get(kn());null==t&&null!=i&&(t=ud(i,kn()));let s=[];const o=sn(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=LY(r,o);s=s.concat(eX(a,l,c,u))}return i&&(s=s.concat(YO(i,n,r,t))),s}}function tX(n,e,t,r){const i=e.get(kn());null==t&&null!=i&&(t=ud(i,kn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=LY(r,o),u=n.operationForChild(o);u&&(s=s.concat(tX(u,a,l,c)))}),i&&(s=s.concat(YO(i,n,r,t))),s}function nX(n,e){const t=e.query,r=ME(n,t);return{hashFn:()=>(function ARe(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function zRe(n,e,t){const r=JO(n,t);if(r){const i=eF(r),s=i.path,o=i.queryId,a=io(s,e);return tF(n,s,new AE(UO(o),a))}return[]}(n,t._path,r):function jRe(n,e){return t_(n,new AE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Uxe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return pS(n,t,null,s)}}}}function ME(n,e){const t=gS(e);return n.queryToTagMap.get(t)}function gS(n){return n._path.toString()+"$"+n._queryIdentifier}function JO(n,e){return n.tagToQueryMap.get(e)}function eF(n){const e=n.indexOf("$");return We(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new $n(n.substr(0,e))}}function tF(n,e,t){const r=n.syncPointTree_.get(e);return We(r,"Missing sync point for query tag that we're tracking"),YO(r,t,aS(n.pendingWriteTree_,e),null)}function PE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function LRe(){return We(fS,"Reference.ts has not been loaded"),fS}())(n._repo,n._path):n}class nF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new nF(t)}node(){return this.node_}}class rF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vr(this.path_,e);return new rF(this.syncTree_,t)}node(){return mS(this.syncTree_,this.path_)}}const QRe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},rX=function(n,e,t){return n&&"object"==typeof n?(We(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?YRe(n[".sv"],e,t):"object"==typeof n[".sv"]?XRe(n[".sv"],e):void We(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},YRe=function(n,e,t){if("timestamp"===n)return t.timestamp;We(!1,"Unexpected server value: "+n)},XRe=function(n,e,t){n.hasOwnProperty("increment")||We(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&We(!1,"Unexpected increment value: "+r);const i=e.node();if(We(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},iX=function(n,e,t,r){return sF(e,new rF(t,n),r)},iF=function(n,e,t){return sF(n,new nF(e),t)};function sF(n,e,t){const r=n.getPriority().val(),i=rX(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=rX(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Qg(a,Yr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Qg(i))),o.forEachChild(gr,(a,l)=>{const c=sF(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class oF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function _S(n,e){let t=e instanceof $n?e:new $n(e),r=n,i=sn(t);for(;null!==i;){const s=jg(r.node.children,i)||{children:{},childCount:0};r=new oF(i,r,s),t=ar(t),i=sn(t)}return r}function Lf(n){return n.node.value}function aF(n,e){n.node.value=e,lF(n)}function sX(n){return n.node.childCount>0}function yS(n,e){Zi(n.node.children,(t,r)=>{e(new oF(t,n,r))})}function oX(n,e,t,r){t&&!r&&e(n),yS(n,i=>{oX(i,e,!0,r)}),t&&r&&e(n)}function kE(n){return new $n(null===n.parent?n.name:kE(n.parent)+"/"+n.name)}function lF(n){null!==n.parent&&function eMe(n,e,t){const r=function ZRe(n){return void 0===Lf(n)&&!sX(n)}(t),i=Nl(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,lF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,lF(n))}(n.parent,n.name,n)}const tMe=/[\[\].#$\/\u0000-\u001F\u007F]/,nMe=/[\[\].#$\u0000-\u001F\u007F]/,cF=10485760,vS=function(n){return"string"==typeof n&&0!==n.length&&!tMe.test(n)},aX=function(n){return"string"==typeof n&&0!==n.length&&!nMe.test(n)},OE=function(n,e,t){const r=t instanceof $n?new vDe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Pf(r));if("function"==typeof e)throw new Error(n+"contains a function "+Pf(r)+" with contents = "+e.toString());if(qA(e))throw new Error(n+"contains "+e.toString()+" "+Pf(r));if("string"==typeof e&&e.length>cF/3&&HA(e)>cF)throw new Error(n+"contains a string greater than "+cF+" utf8 bytes "+Pf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Zi(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!vS(o)))throw new Error(n+" contains an invalid key ("+o+") "+Pf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function bDe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=HA(e),_Y(n)})(r,o),OE(n,a,r),function EDe(n){const e=n.parts_.pop();n.byteLength_-=HA(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Pf(r)+" in addition to actual children.")}},dF=function(n,e,t,r){if(!(r&&void 0===t||aX(t)))throw new Error(Hg(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sMe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),dF(n,e,t,r)};class oMe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Zo(n,e,t){(function bS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!TO(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function dX(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(aMe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Ca(r,e)||Ca(e,r))}function aMe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Rf&&Xi("event: "+t.toString()),qg(r)}}}const lMe=25;class cMe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oMe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rS(),this.transactionQueueTree_=new oF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fX(n){const t=n.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function LE(n){return QRe({timestamp:fX(n)})}function pX(n,e,t,r,i){n.dataUpdateCount++;const s=new $n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=jA(t,c=>Yr(c));o=function HRe(n,e,t,r){const i=JO(n,r);if(i){const s=eF(i),o=s.path,a=s.queryId,l=io(o,e),c=_r.fromObject(t);return tF(n,o,new Jg(UO(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Yr(t);o=JY(n.serverSyncTree_,s,l,i)}else if(r){const l=jA(t,c=>Yr(c));o=function URe(n,e,t){const r=_r.fromObject(t);return t_(n,new Jg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Yr(t);o=RE(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=r_(n,s)),Zo(n.eventQueue_,a,o)}function mX(n,e){hF(n,"connected",e),!1===e&&function pMe(n){n_(n,"onDisconnectEvents");const e=LE(n),t=rS();LO(n.onDisconnect_,kn(),(i,s)=>{const o=iX(i,s,n.serverSyncTree_,e);Zg(t,i,o)});let r=[];LO(t,kn(),(i,s)=>{r=r.concat(RE(n.serverSyncTree_,i,s));const o=function gF(n,e){const t=kE(yX(n,e)),r=_S(n.transactionQueueTree_,e);return function JRe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{_F(n,i)}),_F(n,r),oX(r,i=>{_F(n,i)}),t}(n,i);r_(n,o)}),n.onDisconnect_=rS(),Zo(n.eventQueue_,kn(),r)}(n)}function hF(n,e,t){const r=new $n("/.info/"+e),i=Yr(t);n.infoData_.updateSnapshot(r,i);const s=RE(n.infoSyncTree_,r,i);Zo(n.eventQueue_,r,s)}function ES(n){return n.nextWriteId_++}function n_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Xi(t,...e)}function mF(n,e,t){return mS(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function IS(n,e=n.transactionQueueTree_){if(e||wS(n,e),Lf(e)){const t=vX(n,e);We(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function EMe(n,e,t){const r=t.map(c=>c.currentWriteId),i=mF(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];We(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=io(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{n_(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const h=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(hd(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&h.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();wS(n,_S(n.transactionQueueTree_,e)),IS(n,n.transactionQueueTree_),Zo(n.eventQueue_,e,u);for(let m=0;m<h.length;m++)qg(h[m])}else{if("datastale"===c)for(let h=0;h<t.length;h++)t[h].status=3===t[h].status?4:0;else{Fs("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}r_(n,e)}},o)}(n,kE(e),t)}else sX(e)&&yS(e,t=>{IS(n,t)})}function r_(n,e){const t=yX(n,e),r=kE(t);return function IMe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=io(t,l.path);let h,u=!1;if(We(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,h=l.abortReason,i=i.concat(hd(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=lMe)u=!0,h="maxretry",i=i.concat(hd(n.serverSyncTree_,l.currentWriteId,!0));else{const m=mF(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){OE("transaction failed: Data returned ",y,l.path);let b=Yr(y);"object"==typeof y&&null!=y&&Nl(y,".priority")||(b=b.updatePriority(m.getPriority()));const M=l.currentWriteId,B=LE(n),V=iF(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=ES(n),o.splice(o.indexOf(M),1),i=i.concat(XO(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(hd(n.serverSyncTree_,M,!0))}else u=!0,h="nodata",i=i.concat(hd(n.serverSyncTree_,l.currentWriteId,!0))}Zo(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===h?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(h),!1,null)))}wS(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)qg(r[a]);IS(n,n.transactionQueueTree_)}(n,vX(n,t),r),r}function yX(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===Lf(r);)r=_S(r,t),t=sn(e=ar(e));return r}function vX(n,e){const t=[];return bX(n,e,t),t.sort((r,i)=>r.order-i.order),t}function bX(n,e,t){const r=Lf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);yS(e,i=>{bX(n,i,t)})}function wS(n,e){const t=Lf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,aF(e,t.length>0?t:void 0)}yS(e,r=>{wS(n,r)})}function _F(n,e){const t=Lf(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(We(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(We(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(hd(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?aF(e,void 0):t.length=s+1,Zo(n.eventQueue_,kE(e),i);for(let o=0;o<r.length;o++)qg(r[o])}}const yF=function(n,e){const t=TMe(n),r=t.namespace;return"firebase.com"===t.domain&&Ol(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ol("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new yO(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new $n(t.pathString)}},TMe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=function wMe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,h)));const m=function CMe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Fs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class IX{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zi(this.snapshot.exportVal())}}class wX{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class vF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return We(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Jo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:CO(this._path)}get ref(){return new ol(this._repo,this._path)}get _queryIdentifier(){const e=xY(this._queryParams),t=gO(e);return"{}"===t?"default":t}get _queryObject(){return xY(this._queryParams)}isEqual(e){if(!((e=Ia(e))instanceof Jo))return!1;const t=this._repo===e._repo,r=TO(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _De(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ol extends Jo{constructor(e,t){super(e,t,new kO,!1)}get parent(){const e=gY(this._path);return null===e?null:new ol(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Vf{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new $n(e),r=i_(this.ref,e);return new Vf(this._node.getChild(t),r,gr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Vf(i,i_(this.ref,r),gr)))}hasChild(e){const t=new $n(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function i_(n,e){return null===sn((n=Ia(n))._path)?sMe("child","path",e,!1):dF("child","path",e,!1),new ol(n._repo,Vr(n._path,e))}function xMe(n){n=Ia(n);const e=new vF(()=>{}),t=new VE(e);return function hMe(n,e,t){const r=function $Re(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const h=io(c,t);r=r||ud(u,h)});let i=n.syncPointTree_.get(t);i?r=r||ud(i,kn()):(i=new qY,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new ld(r,!0,!1):null;return function SRe(n){return oS(n.viewCache_)}(KY(i,e,aS(n.pendingWriteTree_,e._path),s?o.getNode():Wt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Yr(i).withIndex(e._queryParams.getIndex());let o;if(ZO(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=RE(n.serverSyncTree_,e._path,s);else{const a=ME(n.serverSyncTree_,e);o=JY(n.serverSyncTree_,e._path,s,a)}return Zo(n.eventQueue_,e._path,o),pS(n.serverSyncTree_,e,t,null,!0),s},i=>(n_(n,"get for query "+zi(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Vf(r,new ol(n._repo,n._path),n._queryParams.getIndex()))}class VE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new IX("value",this,new Vf(e.snapshotNode,new ol(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wX(this,e,t):null}matches(e){return e instanceof VE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function MRe(n){We(!dS,"__referenceConstructor has already been defined"),dS=n})(ol),function FRe(n){We(!fS,"__referenceConstructor has already been defined"),fS=n}(ol);const bF={};function DX(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ol("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=yF(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=yF(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new yE(yE.OWNER):new Gxe(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aX(n)}(t))throw new Error(Hg(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),on(o.path)||Ol("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function zMe(n,e,t,r){let i=bF[e.name];i||(i={},bF[e.name]=i);let s=i[n.toURLString()];return s&&Ol("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new cMe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new Wxe(n.name,t));return new $Me(h,n)}class $Me{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function uMe(n,e,t){if(n.stats_=EO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new nS(n.repoInfo_,(r,i,s,o)=>{pX(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mX(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zi(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new kf(n.repoInfo_,e,(r,i,s,o)=>{pX(n,r,i,s,o)},r=>{mX(n,r)},r=>{!function dMe(n,e){Zi(e,(t,r)=>{hF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Qxe(n,e){const t=n.toString();return bO[t]||(bO[t]=e()),bO[t]}(n.repoInfo_,()=>new QDe(n.stats_,n.server_)),n.infoData_=new $De,n.infoSyncTree_=new ZY({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=RE(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),hF(n,"connected",!1),n.serverSyncTree_=new ZY({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Zo(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ol(this._repo,kn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function jMe(n,e){const t=bF[e];(!t||t[n.key]!==n)&&Ol(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function _X(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ol("Cannot call "+e+" on a deleted database.")}}kf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},kf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function qMe(n){(function kQ(n){fO=n})(Wg),$g(new Af("database",(e,{instanceIdentifier:t})=>DX(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),id(MQ,"1.0.10",n),id(MQ,"1.0.10","esm2017")}();const YMe=function MX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},PX=new cE("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),SS=new aO("@firebase/auth");function xS(n,...e){SS.logLevel<=tr.ERROR&&SS.error(`Auth (${Wg}): ${n}`,...e)}function Ro(n,...e){throw IF(n,...e)}function Ta(n,...e){return IF(n,...e)}function EF(n,e,t){const r=Object.assign(Object.assign({},YMe()),{[e]:t});return new cE("auth","Firebase",r).create(e,{appName:n.name})}function Ji(n){return EF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IF(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return PX.create(n,...e)}function Ge(n,e,...t){if(!n)throw IF(e,...t)}function Ul(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xS(e),new Error(e)}function md(n,e){n||Ul(e)}function UE(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function wF(){return"http:"===kX()||"https:"===kX()}function kX(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class jE{constructor(e,t){this.shortDelay=e,this.longDelay=t,md(t>e,"Short delay should be less than long delay!"),this.isMobile=rO()||vQ()}get(){return function ZMe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wF()||function _Se(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function CF(n,e){md(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class NX{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ul("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ul("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ul("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ePe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tPe=new jE(3e4,6e4);function Tr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ar(n,e,t,r){return TF.apply(this,arguments)}function TF(){return(TF=(0,O.A)(function*(n,e,t,r,i={}){return OX(n,i,(0,O.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=zg(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return function gSe(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(c.referrerPolicy="no-referrer"),NX.fetch()(FX(n,n.config.apiHost,t,a),c)}))})).apply(this,arguments)}function OX(n,e,t){return AF.apply(this,arguments)}function AF(){return(AF=(0,O.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ePe),e);try{const i=new rPe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw zE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw zE(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw zE(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw zE(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw EF(n,u,c);Ro(n,u)}}catch(i){if(i instanceof nd)throw i;Ro(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function SF(){return(SF=(0,O.A)(function*(n,e,t,r,i={}){const s=yield Ar(n,e,t,r,i);return"mfaPendingCredential"in s&&Ro(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function FX(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?CF(n.config,i):`${n.config.apiScheme}://${i}`}class rPe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ta(this.auth,"network-request-failed")),tPe.get())})}}function zE(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ta(n,e,r);return i.customData._tokenResponse=t,i}function RF(){return(RF=(0,O.A)(function*(n,e){return Ar(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function jX(n,e){return PF.apply(this,arguments)}function PF(){return(PF=(0,O.A)(function*(n,e){return Ar(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function HE(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function kF(){return(kF=(0,O.A)(function*(n,e=!1){const t=Ia(n),r=yield t.getIdToken(e),i=DS(r);Ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:HE(NF(i.auth_time)),issuedAtTime:HE(NF(i.iat)),expirationTime:HE(NF(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function NF(n){return 1e3*Number(n)}function DS(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return xS("JWT malformed, contained fewer than 3 sections"),null;try{const i=LA(t);return i?JSON.parse(i):(xS("Failed to decode base64 JWT payload"),null)}catch(i){return xS("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zX(n){const e=DS(n);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function jc(n,e){return OF.apply(this,arguments)}function OF(){return(OF=(0,O.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof nd&&function lPe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class cPe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,O.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,O.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class FF{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=HE(this.lastLoginAt),this.creationTime=HE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $E(n){return LF.apply(this,arguments)}function LF(){return(LF=(0,O.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield jc(n,jX(t,{idToken:r}));Ge(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?HX(s.providerUserInfo):[],a=function dPe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new FF(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)})).apply(this,arguments)}function VF(){return(VF=(0,O.A)(function*(n){const e=Ia(n);yield $E(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function HX(n){return n.map(e=>{var{providerId:t}=e,r=(0,Mc.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function BF(){return(BF=(0,O.A)(function*(n,e){const t=yield OX(n,{},(0,O.A)(function*(){const r=zg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=FX(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",NX.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function UF(){return(UF=(0,O.A)(function*(n,e){return Ar(n,"POST","/v2/accounts:revokeToken",Tr(n,e))})).apply(this,arguments)}class o_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zX(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ge(0!==e.length,"internal-error");const t=zX(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,O.A)(function*(){return t||!r.accessToken||r.isExpired?(Ge(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,O.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function hPe(n,e){return BF.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new o_;return r&&(Ge("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(Ge("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(Ge("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new o_,this.toJSON())}_performRefresh(){return Ul("not implemented")}}function gd(n,e){Ge("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class zc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Mc.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cPe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new FF(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,O.A)(function*(){const r=yield jc(t,t.stsTokenManager.getToken(t.auth,e));return Ge(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function aPe(n){return kF.apply(this,arguments)}(this,e)}reload(){return function uPe(n){return VF.apply(this,arguments)}(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,O.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield $E(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,O.A)(function*(){if(rd(e.auth.app))return Promise.reject(Ji(e.auth));const t=yield e.getIdToken();return yield jc(e,function sPe(n,e){return RF.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const h=null!==(r=t.displayName)&&void 0!==r?r:void 0,m=null!==(i=t.email)&&void 0!==i?i:void 0,y=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,b=null!==(o=t.photoURL)&&void 0!==o?o:void 0,T=null!==(a=t.tenantId)&&void 0!==a?a:void 0,M=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,B=null!==(c=t.createdAt)&&void 0!==c?c:void 0,V=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:Q,emailVerified:we,isAnonymous:je,providerData:$e,stsTokenManager:H}=t;Ge(Q&&H,e,"internal-error");const L=o_.fromJSON(this.name,H);Ge("string"==typeof Q,e,"internal-error"),gd(h,e.name),gd(m,e.name),Ge("boolean"==typeof we,e,"internal-error"),Ge("boolean"==typeof je,e,"internal-error"),gd(y,e.name),gd(b,e.name),gd(T,e.name),gd(M,e.name),gd(B,e.name),gd(V,e.name);const W=new zc({uid:Q,auth:e,email:m,emailVerified:we,displayName:h,isAnonymous:je,photoURL:b,phoneNumber:y,tenantId:T,stsTokenManager:L,createdAt:B,lastLoginAt:V});return $e&&Array.isArray($e)&&(W.providerData=$e.map(J=>Object.assign({},J))),M&&(W._redirectEventId=M),W}static _fromIdTokenResponse(e,t,r=!1){return(0,O.A)(function*(){const i=new o_;i.updateFromServerResponse(t);const s=new zc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $E(s),s})()}static _fromGetAccountInfoResponse(e,t,r){return(0,O.A)(function*(){const i=t.users[0];Ge(void 0!==i.localId,"internal-error");const s=void 0!==i.providerUserInfo?HX(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||s?.length),a=new o_;a.updateFromIdToken(r);const l=new zc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new FF(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||s?.length)};return Object.assign(l,c),l})()}}const $X=new Map;function Hc(n){md(n instanceof Function,"Expected a class definition");let e=$X.get(n);return e?(md(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$X.set(n,e),e)}const WX=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,O.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,O.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,O.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function RS(n,e,t){return`firebase:${n}:${e}:${t}`}class a_{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=RS(this.userKey,i.apiKey,s),this.fullPersistenceKey=RS("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,O.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?zc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,O.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,O.A)(function*(){if(!t.length)return new a_(Hc(WX),e,r);const i=(yield Promise.all(t.map(function(){var c=(0,O.A)(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Hc(WX);const o=RS(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const h=zc._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=(0,O.A)(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return c.apply(this,arguments)}}())),new a_(s,e,r)):new a_(s,e,r)})()}}function GX(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZX(e))return"Blackberry";if(JX(e))return"Webos";if(KX(e))return"Safari";if((e.includes("chrome/")||QX(e))&&!e.includes("edge/"))return"Chrome";if(XX(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function qX(n=ds()){return/firefox\//i.test(n)}function KX(n=ds()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QX(n=ds()){return/crios\//i.test(n)}function YX(n=ds()){return/iemobile/i.test(n)}function XX(n=ds()){return/android/i.test(n)}function ZX(n=ds()){return/blackberry/i.test(n)}function JX(n=ds()){return/webos/i.test(n)}function jF(n=ds()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eZ(n=ds()){return jF(n)||XX(n)||JX(n)||ZX(n)||/windows phone/i.test(n)||YX(n)}function tZ(n,e=[]){let t;switch(n){case"Browser":t=GX(ds());break;case"Worker":t=`${GX(ds())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wg}/${r}`}class gPe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,O.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function zF(){return(zF=(0,O.A)(function*(n,e={}){return Ar(n,"GET","/v2/passwordPolicy",Tr(n,e))})).apply(this,arguments)}class vPe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=null===(t=l.meetsMinPasswordLength)||void 0===t||t),l.isValid&&(l.isValid=null===(r=l.meetsMaxPasswordLength)||void 0===r||r),l.isValid&&(l.isValid=null===(i=l.containsLowercaseLetter)||void 0===i||i),l.isValid&&(l.isValid=null===(s=l.containsUppercaseLetter)||void 0===s||s),l.isValid&&(l.isValid=null===(o=l.containsNumericCharacter)||void 0===o||o),l.isValid&&(l.isValid=null===(a=l.containsNonAlphanumericCharacter)||void 0===a||a),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class bPe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nZ(this),this.idTokenSubscription=new nZ(this),this.beforeStateQueue=new gPe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Hc(t)),this._initializationPromise=this.queue((0,O.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield a_.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,O.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,O.A)(function*(){try{const r=yield jX(t,{idToken:e}),i=yield zc._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,O.A)(function*(){var r;if(rd(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(l,l))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=s?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return Ge(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,O.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,O.A)(function*(){try{yield $E(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function JMe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,O.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,O.A)(function*(){if(rd(t.app))return Promise.reject(Ji(t));const r=e?Ia(e):null;return r&&Ge(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,O.A)(function*(){if(!r._deleted)return e&&Ge(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,O.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,O.A)(function*(){return rd(e.app)?Promise.reject(Ji(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return rd(this.app)?Promise.reject(Ji(this)):this.queue((0,O.A)(function*(){yield t.assertedPersistence.setPersistence(Hc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,O.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,O.A)(function*(){const t=yield function _Pe(n){return zF.apply(this,arguments)}(e),r=new vPe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cE("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,O.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function fPe(n,e){return UF.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,O.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,O.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Hc(e)||t._popupRedirectResolver;Ge(r,t,"argument-error"),t.redirectPersistenceManager=yield a_.create(t,[Hc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,O.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,O.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,O.A)(function*(){if(e===t.currentUser)return t.queue((0,O.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}{const l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){var t=this;return(0,O.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tZ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,O.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,O.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function XMe(n,...e){SS.logLevel<=tr.WARN&&SS.warn(`Auth (${Wg}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function yi(n){return Ia(n)}class nZ{constructor(e){this.auth=e,this.observer=null,this.addObserver=function SSe(n,e){const t=new xSe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let WE={loadJS:()=>(0,O.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rZ(n){return`__${n}${Math.floor(1e6*Math.random())}`}function oZ(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aZ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class KE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ul("not implemented")}_getIdTokenResponse(e){return Ul("not implemented")}_linkToIdToken(e,t){return Ul("not implemented")}_getReauthenticationResolver(e){return Ul("not implemented")}}function $c(n,e){return oL.apply(this,arguments)}function oL(){return(oL=(0,O.A)(function*(n,e){return function Uc(n,e,t,r){return SF.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Tr(n,e))})).apply(this,arguments)}class Wc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class t1e extends Wc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,O.A)(function*(){const s=yield zc._fromIdTokenResponse(e,r,i),o=hZ(r);return new Aa({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,O.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=hZ(r);return new Aa({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function hZ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class OS extends nd{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,OS.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new OS(e,t,r,i)}}function fZ(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?OS._fromErrorAndOperation(n,s,e,r):s})}function gL(){return(gL=(0,O.A)(function*(n,e,t=!1){const r=yield jc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Aa._forOperation(n,"link",r)})).apply(this,arguments)}function yL(){return(yL=(0,O.A)(function*(n,e,t=!1){const{auth:r}=n;if(rd(r.app))return Promise.reject(Ji(r));const i="reauthenticate";try{const s=yield jc(n,fZ(r,i,e,n),t);Ge(s.idToken,r,"internal-error");const o=DS(s.idToken);Ge(o,r,"internal-error");const{sub:a}=o;return Ge(n.uid===a,r,"user-mismatch"),Aa._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&Ro(r,"user-mismatch"),s}})).apply(this,arguments)}function vL(){return(vL=(0,O.A)(function*(n,e,t=!1){if(rd(n.app))return Promise.reject(Ji(n));const r="signIn",i=yield fZ(n,r,e),s=yield Aa._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function VL(){return(VL=(0,O.A)(function*(n,e){return Ar(n,"POST","/v1/accounts:createAuthUri",Tr(n,e))})).apply(this,arguments)}function BL(){return BL=(0,O.A)(function*(n,e){const r={identifier:e,continueUri:wF()?UE():"http://localhost"},{signinMethods:i}=yield function l1e(n,e){return VL.apply(this,arguments)}(Ia(n),r);return i||[]}),BL.apply(this,arguments)}const VS="__sak";class bZ{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(VS,"1"),this.storage.removeItem(VS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const w1e=(()=>{class n extends bZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eZ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function mPe(){return function ySe(){const n=ds();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,O.A)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,O.A)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,O.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),EZ=(()=>{class n extends bZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let T1e=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,O.A)(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var h=(0,O.A)(function*(m){return m(i.origin,a)});return function(m){return h.apply(this,arguments)}}()),u=yield function C1e(n){return Promise.all(n.map(function(){var e=(0,O.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function YL(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class A1e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,O.A)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=YL("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(y.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function xi(){return window}function XL(){return typeof xi().WorkerGlobalScope<"u"&&"function"==typeof xi().importScripts}function ZL(){return(ZL=(0,O.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const IZ="firebaseLocalStorageDb",BS="firebaseLocalStorage",wZ="fbase_key";class JE{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function US(n,e){return n.transaction([BS],e?"readwrite":"readonly").objectStore(BS)}function JL(){const n=indexedDB.open(IZ,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(BS,{keyPath:wZ})}catch(i){t(i)}}),n.addEventListener("success",(0,O.A)(function*(){const r=n.result;r.objectStoreNames.contains(BS)?e(r):(r.close(),yield function P1e(){const n=indexedDB.deleteDatabase(IZ);return new JE(n).toPromise()}(),e(yield JL()))}))})}function CZ(n,e,t){return e2.apply(this,arguments)}function e2(){return(e2=(0,O.A)(function*(n,e,t){const r=US(n,!0).put({[wZ]:e,value:t});return new JE(r).toPromise()})).apply(this,arguments)}function t2(){return(t2=(0,O.A)(function*(n,e){const t=US(n,!1).get(e),r=yield new JE(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function TZ(n,e){const t=US(n,!0).delete(e);return new JE(t).toPromise()}const F1e=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,O.A)(function*(){return t.db||(t.db=yield JL()),t.db})()}_withRetries(t){var r=this;return(0,O.A)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,O.A)(function*(){return XL()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,O.A)(function*(){t.receiver=T1e._getInstance(function R1e(){return XL()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,O.A)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,O.A)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,O.A)(function*(){var r,i;if(t.activeServiceWorker=yield function x1e(){return ZL.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new A1e(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,O.A)(function*(){if(r.sender&&r.activeServiceWorker&&function D1e(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,O.A)(function*(){try{if(!indexedDB)return!1;const t=yield JL();return yield CZ(t,VS,"1"),yield TZ(t,VS),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,O.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,O.A)(function*(){return i._withPendingWrite((0,O.A)(function*(){return yield i._withRetries(s=>CZ(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,O.A)(function*(){const i=yield r._withRetries(s=>function k1e(n,e){return t2.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,O.A)(function*(){return r._withPendingWrite((0,O.A)(function*(){return yield r._withRetries(i=>TZ(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,O.A)(function*(){const r=yield t._withRetries(o=>{const a=US(o,!1).getAll();return new JE(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;if(0!==r.length)for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,O.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();rZ("rcb"),new jE(3e4,6e4);class f2 extends KE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $c(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $c(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $c(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function W1e(n){return function gZ(n,e){return vL.apply(this,arguments)}(n.auth,new f2(n),n.bypassAuthState)}function G1e(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),function mZ(n,e){return yL.apply(this,arguments)}(t,new f2(n),n.bypassAuthState)}function q1e(n){return p2.apply(this,arguments)}function p2(){return(p2=(0,O.A)(function*(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),function mL(n,e){return gL.apply(this,arguments)}(t,new f2(n),n.bypassAuthState)})).apply(this,arguments)}class K1e{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,O.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,O.A)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W1e;case"linkViaPopup":case"linkViaRedirect":return q1e;case"reauthViaPopup":case"reauthViaRedirect":return G1e;default:Ro(this.auth,"internal-error")}}resolve(e){md(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){md(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new jE(2e3,1e4);const Q1e="pendingRedirect",tI=new Map;class Y1e extends K1e{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,O.A)(function*(){let r=tI.get(t.auth._key());if(!r){try{const s=(yield function X1e(n,e){return v2.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}tI.set(t.auth._key(),r)}return t.bypassAuthState||tI.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,O.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,O.A)(function*(){})()}cleanUp(){}}function v2(){return(v2=(0,O.A)(function*(n,e){const t=function xZ(n){return RS(Q1e,n.config.apiKey,n.name)}(e),r=function SZ(n){return Hc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function Z1e(n,e){tI.set(n._key(),e)}function DZ(n,e){return A2.apply(this,arguments)}function A2(){return(A2=(0,O.A)(function*(n,e,t=!1){if(rd(n.app))return Promise.reject(Ji(n));const r=yi(n),i=function Uf(n,e){return e?Hc(e):(Ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),o=yield new Y1e(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class rke{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function ike(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PZ(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!PZ(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ta(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(MZ(e))}saveEventToCache(e){this.cachedEventUids.add(MZ(e)),this.lastProcessedEventTime=Date.now()}}function MZ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PZ({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function x2(){return(x2=(0,O.A)(function*(n,e={}){return Ar(n,"GET","/v1/projects",e)})).apply(this,arguments)}const oke=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ake=/^https?/;function D2(){return D2=(0,O.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function ske(n){return x2.apply(this,arguments)}(n);for(const t of e)try{if(cke(t))return}catch{}Ro(n,"unauthorized-domain")}),D2.apply(this,arguments)}function cke(n){const e=UE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!ake.test(t))return!1;if(oke.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const uke=new jE(3e4,6e4);function kZ(){const n=xi().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function dke(n){return new Promise((e,t)=>{var r,i,s;function o(){kZ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kZ(),t(Ta(n,"network-request-failed"))},timeout:uke.get()})}if(null!==(i=null===(r=xi().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=xi().gapi)||void 0===s||!s.load){const a=rZ("iframefcb");return xi()[a]=()=>{gapi.load?o():t(Ta(n,"network-request-failed"))},function HF(n){return WE.loadJS(n)}(`${function CPe(){return WE.gapiScript}()}?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw jS=null,e})}let jS=null;const fke=new jE(5e3,15e3),pke="__/auth/iframe",mke="emulator/auth/iframe",gke={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_ke=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yke(n){const e=n.config;Ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?CF(e,mke):`https://${n.config.authDomain}/${pke}`,r={apiKey:e.apiKey,appName:n.name,v:Wg},i=_ke.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${zg(r).slice(1)}`}function R2(){return R2=(0,O.A)(function*(n){const e=yield function hke(n){return jS=jS||dke(n),jS}(n),t=xi().gapi;return Ge(t,n,"internal-error"),e.open({where:document.body,url:yke(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gke,dontclear:!0},r=>new Promise(function(){var i=(0,O.A)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Ta(n,"network-request-failed"),l=xi().setTimeout(()=>{o(a)},fke.get());function c(){xi().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),R2.apply(this,arguments)}const bke={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class NZ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ske="__/auth/handler",xke="emulator/auth/handler",Dke=encodeURIComponent("fac");function OZ(n,e,t,r,i,s){return M2.apply(this,arguments)}function M2(){return(M2=(0,O.A)(function*(n,e,t,r,i,s){Ge(n.config.authDomain,n,"auth-domain-config-required"),Ge(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wg,eventId:i};if(e instanceof Wc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",iO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof t1e){const u=e.getScopes().filter(h=>""!==h);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield n._getAppCheckToken(),c=l?`#${Dke}=${encodeURIComponent(l)}`:"";return`${function Rke({config:n}){return n.emulator?CF(n,xke):`https://${n.authDomain}/${Ske}`}(n)}?${zg(a).slice(1)}${c}`})).apply(this,arguments)}const P2="webStorageSupport",Pke=class Mke{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EZ,this._completeRedirectFn=DZ,this._overrideRedirectResult=Z1e}_openPopup(e,t,r,i){var s=this;return(0,O.A)(function*(){var o;md(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield OZ(e,t,r,UE(),i);return function Tke(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},bke),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ds().toLowerCase();t&&(a=QX(c)?"_blank":t),qX(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(function pPe(n=ds()){var e;return jF(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function Ake(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new NZ(null);const h=window.open(e||"",a,u);Ge(h,n,"popup-blocked");try{h.focus()}catch{}return new NZ(h)}(e,a,YL())})()}_openRedirect(e,t,r,i){var s=this;return(0,O.A)(function*(){return yield s._originValidation(e),function S1e(n){xi().location.href=n}(yield OZ(e,t,r,UE(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(md(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,O.A)(function*(){const r=yield function vke(n){return R2.apply(this,arguments)}(e),i=new rke(e);return r.register("authEvent",s=>(Ge(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(P2,{type:P2},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[P2];void 0!==o&&t(!!o),Ro(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function lke(n){return D2.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eZ()||KX()||jF()}};var BZ="@firebase/auth";class kke{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,O.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Lke=yQ("authIdTokenMaxAge")||300;let jZ=null;const Vke=n=>function(){var e=(0,O.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Lke)return;const s=r?.token;jZ!==s&&(jZ=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Bke(n=TQ()){const e=GA(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function kPe(n,e){const t=GA(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(zA(t.getOptions(),e??{}))return i;Ro(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:Pke,persistence:[F1e,w1e,EZ]}),r=yQ("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Vke(s.toString());(function _1e(n,e,t){Ia(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function g1e(n,e,t,r){Ia(n).onIdTokenChanged(e,t,r)}(t,a=>o(a))}}const i=gQ("auth");return i&&function OPe(n,e,t){const r=yi(n);Ge(r._canInitEmulator,r,"emulator-config-failed"),Ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=oZ(e),{host:o,port:a}=function FPe(n){const e=oZ(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:aZ(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:aZ(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function LPe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function EPe(n){WE=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ta("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function Uke(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Oke(n){$g(new Af("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tZ(n)},c=new bPe(r,i,s,l);return function NPe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Hc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$g(new Af("auth-internal",e=>{const t=yi(e.getProvider("auth").getImmediate());return new kke(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),id(BZ,"1.8.1",function Nke(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),id(BZ,"1.8.1","esm2017")}("Browser"),G(5046);var jl=G(9574);jl.A.registerVersion("firebase","10.14.1","app-compat");const Hke=["ngOnDestroy"];class zZ{constructor(e){return e}}const nI=new Ee("angularfire2.app.options"),rI=new Ee("angularfire2.app.name");function HS(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=jl.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>jl.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Gke("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new zZ(o)}const Gke=(n,...e)=>{},qke={provide:zZ,useFactory:HS,deps:[nI,yt,[new Mi,rI]]};let Kke=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:nI,useValue:t},{provide:rI,useValue:r}]}}constructor(t){jl.A.registerVersion("angularfire",ed.full,"core"),jl.A.registerVersion("angularfire",ed.full,"app-compat"),jl.A.registerVersion("angular",HG.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Me(Ys))};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[qke]})}return n})();function N2(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Qke(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(HZ("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Yke?" You may need to reload as Firebase is not HMR aware.":""}`),HZ("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Yke=typeof module<"u"&&!!module.hot,HZ=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class Xke extends E{constructor(e=1/0,t=1/0,r=_N){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function O2(n={}){const{connector:e=()=>new E,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,h=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=l=void 0,u=h=!1},b=()=>{const T=o;y(),T?.unsubscribe()};return ye((T,M)=>{c++,!h&&!u&&m();const B=l=l??e();M.add(()=>{c--,0===c&&!h&&!u&&(a=F2(b,i))}),B.subscribe(M),!o&&c>0&&(o=new $i({next:V=>B.next(V),error:V=>{h=!0,m(),a=F2(y,t,V),B.error(V)},complete:()=>{u=!0,m(),a=F2(y,r),B.complete()}}),no(T).subscribe(o))})(s)}}function F2(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new $i({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function $Z(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,O2({connector:()=>new Xke(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function WZ(n,e){return mt(e)?Qt(()=>n,e):Qt(()=>n)}const L2=new Ee("angularfire2.auth.use-emulator"),V2=new Ee("angularfire2.auth.settings"),B2=new Ee("angularfire2.auth.tenant-id"),U2=new Ee("angularfire2.auth.langugage-code"),j2=new Ee("angularfire2.auth.use-device-language"),z2=new Ee("angularfire.auth.persistence"),H2=(n,e,t,r,i,s,o,a)=>N2(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let iI=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,u,h,m,y){const b=new E,T=qe(void 0).pipe(Hu(o.outsideAngular),Qt(()=>s.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,5046)))),Be(()=>HS(t,s,r)),Be(M=>H2(M,s,a,c,u,h,l,m)),$Z({bufferSize:1,refCount:!1}));if(CT(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=qe(null);else{T.pipe(Yu()).subscribe();const M=T.pipe(Qt(Q=>Q.getRedirectResult().then(we=>we,()=>null)),ji,$Z({bufferSize:1,refCount:!1})),B=T.pipe(Qt(Q=>new Ut(we=>({unsubscribe:s.runOutsideAngular(()=>Q.onAuthStateChanged(je=>we.next(je),je=>we.error(je),()=>we.complete()))})))),V=T.pipe(Qt(Q=>new Ut(we=>({unsubscribe:s.runOutsideAngular(()=>Q.onIdTokenChanged(je=>we.next(je),je=>we.error(je),()=>we.complete()))}))));this.authState=M.pipe(WZ(B),tf(o.outsideAngular),Hu(o.insideAngular)),this.user=M.pipe(WZ(V),tf(o.outsideAngular),Hu(o.insideAngular)),this.idToken=this.user.pipe(Qt(Q=>Q?zn(Q.getIdToken()):qe(null))),this.idTokenResult=this.user.pipe(Qt(Q=>Q?zn(Q.getIdTokenResult()):qe(null))),this.credential=Zu(M,b,this.authState.pipe(ii(Q=>!Q))).pipe(Be(Q=>Q?.user?Q:null),tf(o.outsideAngular),Hu(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Hke.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const h=u?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,h),h})})})}))(this,T,s,{spy:{apply:(M,B,V)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&V.then(Q=>b.next(Q))}}})}static \u0275fac=function(r){return new(r||n)(Me(nI),Me(rI,8),Me(Ys),Me(yt),Me(Vg),Me(L2,8),Me(V2,8),Me(B2,8),Me(U2,8),Me(j2,8),Me(z2,8),Me(NA,8))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Jke=(()=>{class n{constructor(){jl.A.registerVersion("angularfire",ed.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[iI]})}return n})(),$S=(()=>{class n{constructor(t,r){this.auth=t,this.afAuth=r}get user(){return this.afAuth.authState}login(t,r){return tSe(this.auth,t,r)}register(t,r,i){return ZAe(this.auth,t,r).then(s=>{const o=s.user;return o?(rSe(o,{displayName:i}).then(()=>{console.log("\u4f7f\u7528\u8005\u540d\u7a31\u5df2\u66f4\u65b0:",i)}),eO(o).then(()=>{console.log("\u9a57\u8b49\u4fe1\u5df2\u767c\u9001\u81f3:",t)}),o):Promise.reject("\u4f7f\u7528\u8005\u8a3b\u518a\u5931\u6557")})}loginWithGoogle(){const t=new td.X;return nSe(this.auth,t)}isLoggedIn(){return this.afAuth.authState.pipe(Be(t=>null!==t))}getUser(){return new Ut(t=>{eSe(this.auth,r=>{t.next(r)})})}logout(){this.afAuth.signOut()}getAuthState(){return this.afAuth.authState}getUserData(t){return xMe(function CX(n,e){return(n=Ia(n))._checkNotDeleted("ref"),void 0!==e?i_(n._root,e):n._root}(function WMe(n=TQ(),e){const t=GA(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(()=>{const e=gQ("database");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();r&&function GMe(n,e,t,r={}){(n=Ia(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ol("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ol('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new yE(yE.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:function fSe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[FA(JSON.stringify({alg:"none",type:"JWT"})),FA(JSON.stringify(o)),""].join(".")}(r.mockUserToken,n.app.options.projectId);s=new yE(o)}!function UMe(n,e,t,r){n.repoInfo_=new yO(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}(),`users/${t}`)).then(s=>s.val())}sendVerificationEmail(t){return eO(t)}resendVerificationEmail(t){const r=Bke();return function c1e(n,e){return BL.apply(this,arguments)}(r,t).then(i=>{if(i.includes("password")){const s=r.currentUser;return s?eO(s):Promise.reject(new Error("\u8acb\u5148\u767b\u5165\u4ee5\u5bc4\u9001\u9a57\u8b49\u4fe1\u3002"))}return Promise.reject(new Error("\u6b64\u96fb\u5b50\u90f5\u4ef6\u672a\u8a3b\u518a\u3002"))})}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{console.log("\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001")}).catch(r=>{throw console.error("\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u767c\u9001\u5931\u6557",r),r})}static{this.\u0275fac=function(r){return new(r||n)(Me(OA),Me(iI))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eNe=(()=>{class n{constructor(){this.loadingSubject=new F(!1),this.messageSubject=new F(""),this.loading$=this.loadingSubject.asObservable(),this.message$=this.messageSubject.asObservable()}show(t){this.loadingSubject.next(!0),this.messageSubject.next(t)}hide(){this.loadingSubject.next(!1),this.messageSubject.next("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $2(){return ye((n,e)=>{let t,r=!1;n.subscribe(Fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var jf,KZ,GZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qZ={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(H,L,W){W||(W=0);var J=Array(16);if("string"==typeof L)for(var re=0;16>re;++re)J[re]=L.charCodeAt(W++)|L.charCodeAt(W++)<<8|L.charCodeAt(W++)<<16|L.charCodeAt(W++)<<24;else for(re=0;16>re;++re)J[re]=L[W++]|L[W++]<<8|L[W++]<<16|L[W++]<<24;var oe=H.g[3],q=(L=H.g[0])+(oe^(W=H.g[1])&((re=H.g[2])^oe))+J[0]+3614090360&4294967295;q=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=(W=(re=(oe=(L=W+(q<<7&4294967295|q>>>25))+((q=oe+(re^L&(W^re))+J[1]+3905402710&4294967295)<<12&4294967295|q>>>20))+((q=re+(W^oe&(L^W))+J[2]+606105819&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^re&(oe^L))+J[3]+3250441966&4294967295)<<22&4294967295|q>>>10))+((q=L+(oe^W&(re^oe))+J[4]+4118548399&4294967295)<<7&4294967295|q>>>25))+((q=oe+(re^L&(W^re))+J[5]+1200080426&4294967295)<<12&4294967295|q>>>20))+((q=re+(W^oe&(L^W))+J[6]+2821735955&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^re&(oe^L))+J[7]+4249261313&4294967295)<<22&4294967295|q>>>10))+((q=L+(oe^W&(re^oe))+J[8]+1770035416&4294967295)<<7&4294967295|q>>>25))+((q=oe+(re^L&(W^re))+J[9]+2336552879&4294967295)<<12&4294967295|q>>>20))+((q=re+(W^oe&(L^W))+J[10]+4294925233&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^re&(oe^L))+J[11]+2304563134&4294967295)<<22&4294967295|q>>>10))+((q=L+(oe^W&(re^oe))+J[12]+1804603682&4294967295)<<7&4294967295|q>>>25))+((q=oe+(re^L&(W^re))+J[13]+4254626195&4294967295)<<12&4294967295|q>>>20))+((q=re+(W^oe&(L^W))+J[14]+2792965006&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^re&(oe^L))+J[15]+1236535329&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^oe&(W^re))+J[1]+4129170786&4294967295)<<5&4294967295|q>>>27))+((q=oe+(W^re&(L^W))+J[6]+3225465664&4294967295)<<9&4294967295|q>>>23))+((q=re+(L^W&(oe^L))+J[11]+643717713&4294967295)<<14&4294967295|q>>>18))+((q=W+(oe^L&(re^oe))+J[0]+3921069994&4294967295)<<20&4294967295|q>>>12))+((q=L+(re^oe&(W^re))+J[5]+3593408605&4294967295)<<5&4294967295|q>>>27))+((q=oe+(W^re&(L^W))+J[10]+38016083&4294967295)<<9&4294967295|q>>>23))+((q=re+(L^W&(oe^L))+J[15]+3634488961&4294967295)<<14&4294967295|q>>>18))+((q=W+(oe^L&(re^oe))+J[4]+3889429448&4294967295)<<20&4294967295|q>>>12))+((q=L+(re^oe&(W^re))+J[9]+568446438&4294967295)<<5&4294967295|q>>>27))+((q=oe+(W^re&(L^W))+J[14]+3275163606&4294967295)<<9&4294967295|q>>>23))+((q=re+(L^W&(oe^L))+J[3]+4107603335&4294967295)<<14&4294967295|q>>>18))+((q=W+(oe^L&(re^oe))+J[8]+1163531501&4294967295)<<20&4294967295|q>>>12))+((q=L+(re^oe&(W^re))+J[13]+2850285829&4294967295)<<5&4294967295|q>>>27))+((q=oe+(W^re&(L^W))+J[2]+4243563512&4294967295)<<9&4294967295|q>>>23))+((q=re+(L^W&(oe^L))+J[7]+1735328473&4294967295)<<14&4294967295|q>>>18))+((q=W+(oe^L&(re^oe))+J[12]+2368359562&4294967295)<<20&4294967295|q>>>12))+((q=L+(W^re^oe)+J[5]+4294588738&4294967295)<<4&4294967295|q>>>28))+((q=oe+(L^W^re)+J[8]+2272392833&4294967295)<<11&4294967295|q>>>21))+((q=re+(oe^L^W)+J[11]+1839030562&4294967295)<<16&4294967295|q>>>16))+((q=W+(re^oe^L)+J[14]+4259657740&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^re^oe)+J[1]+2763975236&4294967295)<<4&4294967295|q>>>28))+((q=oe+(L^W^re)+J[4]+1272893353&4294967295)<<11&4294967295|q>>>21))+((q=re+(oe^L^W)+J[7]+4139469664&4294967295)<<16&4294967295|q>>>16))+((q=W+(re^oe^L)+J[10]+3200236656&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^re^oe)+J[13]+681279174&4294967295)<<4&4294967295|q>>>28))+((q=oe+(L^W^re)+J[0]+3936430074&4294967295)<<11&4294967295|q>>>21))+((q=re+(oe^L^W)+J[3]+3572445317&4294967295)<<16&4294967295|q>>>16))+((q=W+(re^oe^L)+J[6]+76029189&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^re^oe)+J[9]+3654602809&4294967295)<<4&4294967295|q>>>28))+((q=oe+(L^W^re)+J[12]+3873151461&4294967295)<<11&4294967295|q>>>21))+((q=re+(oe^L^W)+J[15]+530742520&4294967295)<<16&4294967295|q>>>16))+((q=W+(re^oe^L)+J[2]+3299628645&4294967295)<<23&4294967295|q>>>9))+((q=L+(re^(W|~oe))+J[0]+4096336452&4294967295)<<6&4294967295|q>>>26))+((q=oe+(W^(L|~re))+J[7]+1126891415&4294967295)<<10&4294967295|q>>>22))+((q=re+(L^(oe|~W))+J[14]+2878612391&4294967295)<<15&4294967295|q>>>17))+((q=W+(oe^(re|~L))+J[5]+4237533241&4294967295)<<21&4294967295|q>>>11))+((q=L+(re^(W|~oe))+J[12]+1700485571&4294967295)<<6&4294967295|q>>>26))+((q=oe+(W^(L|~re))+J[3]+2399980690&4294967295)<<10&4294967295|q>>>22))+((q=re+(L^(oe|~W))+J[10]+4293915773&4294967295)<<15&4294967295|q>>>17))+((q=W+(oe^(re|~L))+J[1]+2240044497&4294967295)<<21&4294967295|q>>>11))+((q=L+(re^(W|~oe))+J[8]+1873313359&4294967295)<<6&4294967295|q>>>26))+((q=oe+(W^(L|~re))+J[15]+4264355552&4294967295)<<10&4294967295|q>>>22))+((q=re+(L^(oe|~W))+J[6]+2734768916&4294967295)<<15&4294967295|q>>>17))+((q=W+(oe^(re|~L))+J[13]+1309151649&4294967295)<<21&4294967295|q>>>11))+((oe=(L=W+((q=L+(re^(W|~oe))+J[4]+4149444226&4294967295)<<6&4294967295|q>>>26))+((q=oe+(W^(L|~re))+J[11]+3174756917&4294967295)<<10&4294967295|q>>>22))^((re=oe+((q=re+(L^(oe|~W))+J[2]+718787259&4294967295)<<15&4294967295|q>>>17))|~L))+J[9]+3951481745&4294967295,H.g[0]=H.g[0]+L&4294967295,H.g[1]=H.g[1]+(re+(q<<21&4294967295|q>>>11))&4294967295,H.g[2]=H.g[2]+re&4294967295,H.g[3]=H.g[3]+oe&4294967295}function o(H,L){this.h=L;for(var W=[],J=!0,re=H.length-1;0<=re;re--){var oe=0|H[re];J&&oe==L||(W[re]=oe,J=!1)}this.g=W}(function e(H,L){function W(){}W.prototype=L.prototype,H.D=L.prototype,H.prototype=new W,H.prototype.constructor=H,H.C=function(J,re,oe){for(var q=Array(arguments.length-2),$r=2;$r<arguments.length;$r++)q[$r-2]=arguments[$r];return L.prototype[re].apply(J,q)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(H,L){void 0===L&&(L=H.length);for(var W=L-this.blockSize,J=this.B,re=this.h,oe=0;oe<L;){if(0==re)for(;oe<=W;)i(this,H,oe),oe+=this.blockSize;if("string"==typeof H){for(;oe<L;)if(J[re++]=H.charCodeAt(oe++),re==this.blockSize){i(this,J),re=0;break}}else for(;oe<L;)if(J[re++]=H[oe++],re==this.blockSize){i(this,J),re=0;break}}this.h=re,this.o+=L},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var L=1;L<H.length-8;++L)H[L]=0;var W=8*this.o;for(L=H.length-8;L<H.length;++L)H[L]=255&W,W/=256;for(this.u(H),H=Array(16),L=W=0;4>L;++L)for(var J=0;32>J;J+=8)H[W++]=this.g[L]>>>J&255;return H};var a={};function l(H){return-128<=H&&128>H?function s(H,L){var W=a;return Object.prototype.hasOwnProperty.call(W,H)?W[H]:W[H]=L(H)}(H,function(L){return new o([0|L],0>L?-1:0)}):new o([0|H],0>H?-1:0)}function c(H){if(isNaN(H)||!isFinite(H))return h;if(0>H)return M(c(-H));for(var L=[],W=1,J=0;H>=W;J++)L[J]=H/W|0,W*=4294967296;return new o(L,0)}var h=l(0),m=l(1),y=l(16777216);function b(H){if(0!=H.h)return!1;for(var L=0;L<H.g.length;L++)if(0!=H.g[L])return!1;return!0}function T(H){return-1==H.h}function M(H){for(var L=H.g.length,W=[],J=0;J<L;J++)W[J]=~H.g[J];return new o(W,~H.h).add(m)}function B(H,L){return H.add(M(L))}function V(H,L){for(;(65535&H[L])!=H[L];)H[L+1]+=H[L]>>>16,H[L]&=65535,L++}function Q(H,L){this.g=H,this.h=L}function we(H,L){if(b(L))throw Error("division by zero");if(b(H))return new Q(h,h);if(T(H))return L=we(M(H),L),new Q(M(L.g),M(L.h));if(T(L))return L=we(H,M(L)),new Q(M(L.g),L.h);if(30<H.g.length){if(T(H)||T(L))throw Error("slowDivide_ only works with positive integers.");for(var W=m,J=L;0>=J.l(H);)W=je(W),J=je(J);var re=$e(W,1),oe=$e(J,1);for(J=$e(J,2),W=$e(W,2);!b(J);){var q=oe.add(J);0>=q.l(H)&&(re=re.add(W),oe=q),J=$e(J,1),W=$e(W,1)}return L=B(H,re.j(L)),new Q(re,L)}for(re=h;0<=H.l(L);){for(W=Math.max(1,Math.floor(H.m()/L.m())),J=48>=(J=Math.ceil(Math.log(W)/Math.LN2))?1:Math.pow(2,J-48),q=(oe=c(W)).j(L);T(q)||0<q.l(H);)q=(oe=c(W-=J)).j(L);b(oe)&&(oe=m),re=re.add(oe),H=B(H,q)}return new Q(re,H)}function je(H){for(var L=H.g.length+1,W=[],J=0;J<L;J++)W[J]=H.i(J)<<1|H.i(J-1)>>>31;return new o(W,H.h)}function $e(H,L){var W=L>>5;L%=32;for(var J=H.g.length-W,re=[],oe=0;oe<J;oe++)re[oe]=0<L?H.i(oe+W)>>>L|H.i(oe+W+1)<<32-L:H.i(oe+W);return new o(re,H.h)}(n=o.prototype).m=function(){if(T(this))return-M(this).m();for(var H=0,L=1,W=0;W<this.g.length;W++){var J=this.i(W);H+=(0<=J?J:4294967296+J)*L,L*=4294967296}return H},n.toString=function(H){if(2>(H=H||10)||36<H)throw Error("radix out of range: "+H);if(b(this))return"0";if(T(this))return"-"+M(this).toString(H);for(var L=c(Math.pow(H,6)),W=this,J="";;){var re=we(W,L).g,oe=((0<(W=B(W,re.j(L))).g.length?W.g[0]:W.h)>>>0).toString(H);if(b(W=re))return oe+J;for(;6>oe.length;)oe="0"+oe;J=oe+J}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h},n.l=function(H){return T(H=B(this,H))?-1:b(H)?0:1},n.abs=function(){return T(this)?M(this):this},n.add=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0,re=0;re<=L;re++){var oe=J+(65535&this.i(re))+(65535&H.i(re)),q=(oe>>>16)+(this.i(re)>>>16)+(H.i(re)>>>16);J=q>>>16,W[re]=(q&=65535)<<16|(oe&=65535)}return new o(W,-2147483648&W[W.length-1]?-1:0)},n.j=function(H){if(b(this)||b(H))return h;if(T(this))return T(H)?M(this).j(M(H)):M(M(this).j(H));if(T(H))return M(this.j(M(H)));if(0>this.l(y)&&0>H.l(y))return c(this.m()*H.m());for(var L=this.g.length+H.g.length,W=[],J=0;J<2*L;J++)W[J]=0;for(J=0;J<this.g.length;J++)for(var re=0;re<H.g.length;re++){var oe=this.i(J)>>>16,q=65535&this.i(J),$r=H.i(re)>>>16,la=65535&H.i(re);W[2*J+2*re]+=q*la,V(W,2*J+2*re),W[2*J+2*re+1]+=oe*la,V(W,2*J+2*re+1),W[2*J+2*re+1]+=q*$r,V(W,2*J+2*re+1),W[2*J+2*re+2]+=oe*$r,V(W,2*J+2*re+2)}for(J=0;J<L;J++)W[J]=W[2*J+1]<<16|W[2*J];for(J=L;J<2*L;J++)W[J]=0;return new o(W,0)},n.A=function(H){return we(this,H).h},n.and=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)&H.i(J);return new o(W,this.h&H.h)},n.or=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)|H.i(J);return new o(W,this.h|H.h)},n.xor=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)^H.i(J);return new o(W,this.h^H.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KZ=qZ.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(H,L){if(0==H.length)throw Error("number format error: empty string");if(2>(L=L||10)||36<L)throw Error("radix out of range: "+L);if("-"==H.charAt(0))return M(u(H.substring(1),L));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var W=c(Math.pow(L,8)),J=h,re=0;re<H.length;re+=8){var oe=Math.min(8,H.length-re),q=parseInt(H.substring(re,re+oe),L);8>oe?(oe=c(Math.pow(L,oe)),J=J.j(oe).add(c(q))):J=(J=J.j(W)).add(c(q))}return J},jf=qZ.Integer=o}).apply(typeof GZ<"u"?GZ:typeof self<"u"?self:typeof window<"u"?window:{});var QZ,sI,YZ,GS,W2,XZ,ZZ,JZ,WS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,v,I){return p==Array.prototype||p==Object.prototype||(p[v]=I.value),p},r=function t(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof WS&&WS];for(var v=0;v<p.length;++v){var I=p[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(p,v){if(v)e:{var I=r;p=p.split(".");for(var P=0;P<p.length-1;P++){var ce=p[P];if(!(ce in I))break e;I=I[ce]}(v=v(P=I[p=p[p.length-1]]))!=P&&null!=v&&e(I,p,{configurable:!0,writable:!0,value:v})}}("Array.prototype.values",function(p){return p||function(){return function s(p,v){p instanceof String&&(p+="");var I=0,P=!1,ce={next:function(){if(!P&&I<p.length){var Ce=I++;return{value:v(Ce,p[Ce]),done:!1}}return P=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}(this,function(v,I){return I})}});var o=o||{},a=this||self;function l(p){var v=typeof p;return"array"==(v="object"!=v?v:p?Array.isArray(p)?"array":v:"null")||"object"==v&&"number"==typeof p.length}function c(p){var v=typeof p;return"object"==v&&null!=p||"function"==v}function u(p,v,I){return p.call.apply(p.bind,arguments)}function h(p,v,I){if(!p)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,P),p.apply(v,ce)}}return function(){return p.apply(v,arguments)}}function m(p,v,I){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:h).apply(null,arguments)}function y(p,v){var I=Array.prototype.slice.call(arguments,1);return function(){var P=I.slice();return P.push.apply(P,arguments),p.apply(this,P)}}function b(p,v){function I(){}I.prototype=v.prototype,p.aa=v.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function(P,ce,Ce){for(var Ye=Array(arguments.length-2),ur=2;ur<arguments.length;ur++)Ye[ur-2]=arguments[ur];return v.prototype[ce].apply(P,Ye)}}function T(p){const v=p.length;if(0<v){const I=Array(v);for(let P=0;P<v;P++)I[P]=p[P];return I}return[]}function M(p,v){for(let I=1;I<arguments.length;I++){const P=arguments[I];if(l(P)){const ce=p.length||0,Ce=P.length||0;p.length=ce+Ce;for(let Ye=0;Ye<Ce;Ye++)p[ce+Ye]=P[Ye]}else p.push(P)}}function V(p){return/^[\s\xa0]*$/.test(p)}function Q(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function we(p){return we[" "](p),p}we[" "]=function(){};var je=!(-1==Q().indexOf("Gecko")||-1!=Q().toLowerCase().indexOf("webkit")&&-1==Q().indexOf("Edge")||-1!=Q().indexOf("Trident")||-1!=Q().indexOf("MSIE")||-1!=Q().indexOf("Edge"));function $e(p,v,I){for(const P in p)v.call(I,p[P],P,p)}function L(p){const v={};for(const I in p)v[I]=p[I];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(p,v){let I,P;for(let ce=1;ce<arguments.length;ce++){for(I in P=arguments[ce],P)p[I]=P[I];for(let Ce=0;Ce<W.length;Ce++)I=W[Ce],Object.prototype.hasOwnProperty.call(P,I)&&(p[I]=P[I])}}function re(p){var v=1;p=p.split(":");const I=[];for(;0<v&&p.length;)I.push(p.shift()),v--;return p.length&&I.push(p.join(":")),I}function oe(p){a.setTimeout(()=>{throw p},0)}function q(){var p=hn;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}var la=new class B{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}(()=>new at,p=>p.reset());class at{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,It=!1,hn=new class $r{constructor(){this.h=this.g=null}add(v,I){const P=la.get();P.set(v,I),this.h?this.h.next=P:this.g=P,this.h=P}},Ei=()=>{const p=a.Promise.resolve(void 0);pt=()=>{p.then(Pa)}};var Pa=()=>{for(var p;p=q();){try{p.h.call(p.g)}catch(I){oe(I)}var v=la;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}It=!1};function ai(){this.s=this.s,this.C=this.C}function Rr(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}ai.prototype.s=!1,ai.prototype.ma=function(){this.s||(this.s=!0,this.N())},ai.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Rr.prototype.h=function(){this.defaultPrevented=!0};var Mr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};a.addEventListener("test",I,v),a.removeEventListener("test",I,v)}catch{}return p}();function Yd(p,v){if(Rr.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,P=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(je){e:{try{we(v.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(v=null)}}else"mouseover"==I?v=p.fromElement:"mouseout"==I&&(v=p.toElement);this.relatedTarget=v,P?(this.clientX=void 0!==P.clientX?P.clientX:P.pageX,this.clientY=void 0!==P.clientY?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:lz[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Yd.aa.h.call(this)}}b(Yd,Rr);var lz={2:"touch",3:"pen",4:"mouse"};Yd.prototype.h=function(){Yd.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var li="closure_listenable_"+(1e6*Math.random()|0),au=0;function Oo(p,v,I,P,ce){this.listener=p,this.proxy=null,this.src=v,this.type=I,this.capture=!!P,this.ha=ce,this.key=++au,this.da=this.fa=!1}function lu(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Xd(p){this.src=p,this.g={},this.h=0}function cz(p,v){var I=v.type;if(I in p.g){var Ce,P=p.g[I],ce=Array.prototype.indexOf.call(P,v,void 0);(Ce=0<=ce)&&Array.prototype.splice.call(P,ce,1),Ce&&(lu(v),0==p.g[I].length&&(delete p.g[I],p.h--))}}function uz(p,v,I,P){for(var ce=0;ce<p.length;++ce){var Ce=p[ce];if(!Ce.da&&Ce.listener==v&&Ce.capture==!!I&&Ce.ha==P)return ce}return-1}Xd.prototype.add=function(p,v,I,P,ce){var Ce=p.toString();(p=this.g[Ce])||(p=this.g[Ce]=[],this.h++);var Ye=uz(p,v,P,ce);return-1<Ye?(v=p[Ye],I||(v.fa=!1)):((v=new Oo(v,this.src,Ce,!!P,ce)).fa=I,p.push(v)),v};var dz="closure_lm_"+(1e6*Math.random()|0),hz={};function tae(p,v,I,P,ce){if(P&&P.once)return rae(p,v,I,P,ce);if(Array.isArray(v)){for(var Ce=0;Ce<v.length;Ce++)tae(p,v[Ce],I,P,ce);return null}return I=gz(I),p&&p[li]?p.K(v,I,c(P)?!!P.capture:!!P,ce):nae(p,v,I,!1,P,ce)}function nae(p,v,I,P,ce,Ce){if(!v)throw Error("Invalid event type");var Ye=c(ce)?!!ce.capture:!!ce,ur=pz(p);if(ur||(p[dz]=ur=new Xd(p)),(I=ur.add(v,I,P,Ye,Ce)).proxy)return I;if(P=function sGe(){const v=oGe;return function p(I){return v.call(p.src,p.listener,I)}}(),I.proxy=P,P.src=p,P.listener=I,p.addEventListener)Mr||(ce=Ye),void 0===ce&&(ce=!1),p.addEventListener(v.toString(),P,ce);else if(p.attachEvent)p.attachEvent(sae(v.toString()),P);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(P)}return I}function rae(p,v,I,P,ce){if(Array.isArray(v)){for(var Ce=0;Ce<v.length;Ce++)rae(p,v[Ce],I,P,ce);return null}return I=gz(I),p&&p[li]?p.L(v,I,c(P)?!!P.capture:!!P,ce):nae(p,v,I,!0,P,ce)}function iae(p,v,I,P,ce){if(Array.isArray(v))for(var Ce=0;Ce<v.length;Ce++)iae(p,v[Ce],I,P,ce);else P=c(P)?!!P.capture:!!P,I=gz(I),p&&p[li]?(p=p.i,(v=String(v).toString())in p.g&&-1<(I=uz(Ce=p.g[v],I,P,ce))&&(lu(Ce[I]),Array.prototype.splice.call(Ce,I,1),0==Ce.length&&(delete p.g[v],p.h--))):p&&(p=pz(p))&&(v=p.g[v.toString()],p=-1,v&&(p=uz(v,I,P,ce)),(I=-1<p?v[p]:null)&&fz(I))}function fz(p){if("number"!=typeof p&&p&&!p.da){var v=p.src;if(v&&v[li])cz(v.i,p);else{var I=p.type,P=p.proxy;v.removeEventListener?v.removeEventListener(I,P,p.capture):v.detachEvent?v.detachEvent(sae(I),P):v.addListener&&v.removeListener&&v.removeListener(P),(I=pz(v))?(cz(I,p),0==I.h&&(I.src=null,v[dz]=null)):lu(p)}}}function sae(p){return p in hz?hz[p]:hz[p]="on"+p}function oGe(p,v){if(p.da)p=!0;else{v=new Yd(v,this);var I=p.listener,P=p.ha||p.src;p.fa&&fz(p),p=I.call(P,v)}return p}function pz(p){return(p=p[dz])instanceof Xd?p:null}var mz="__closure_events_fn_"+(1e9*Math.random()>>>0);function gz(p){return"function"==typeof p?p:(p[mz]||(p[mz]=function(v){return p.handleEvent(v)}),p[mz])}function zs(){ai.call(this),this.i=new Xd(this),this.M=this,this.F=null}function co(p,v){var I,P=p.F;if(P)for(I=[];P;P=P.F)I.push(P);if(p=p.M,P=v.type||v,"string"==typeof v)v=new Rr(v,p);else if(v instanceof Rr)v.target=v.target||p;else{var ce=v;J(v=new Rr(P,p),ce)}if(ce=!0,I)for(var Ce=I.length-1;0<=Ce;Ce--){var Ye=v.g=I[Ce];ce=YD(Ye,P,!0,v)&&ce}if(ce=YD(Ye=v.g=p,P,!0,v)&&ce,ce=YD(Ye,P,!1,v)&&ce,I)for(Ce=0;Ce<I.length;Ce++)ce=YD(Ye=v.g=I[Ce],P,!1,v)&&ce}function YD(p,v,I,P){if(!(v=p.i.g[String(v)]))return!0;v=v.concat();for(var ce=!0,Ce=0;Ce<v.length;++Ce){var Ye=v[Ce];if(Ye&&!Ye.da&&Ye.capture==I){var ur=Ye.listener,gs=Ye.ha||Ye.src;Ye.fa&&cz(p.i,Ye),ce=!1!==ur.call(gs,P)&&ce}}return ce&&!P.defaultPrevented}function oae(p,v,I){if("function"==typeof p)I&&(p=m(p,I));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=m(p.handleEvent,p)}return 2147483647<Number(v)?-1:a.setTimeout(p,v||0)}function aae(p){p.g=oae(()=>{p.g=null,p.i&&(p.i=!1,aae(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}b(zs,ai),zs.prototype[li]=!0,zs.prototype.removeEventListener=function(p,v,I,P){iae(this,p,v,I,P)},zs.prototype.N=function(){if(zs.aa.N.call(this),this.i){var v,p=this.i;for(v in p.g){for(var I=p.g[v],P=0;P<I.length;P++)lu(I[P]);delete p.g[v],p.h--}}this.F=null},zs.prototype.K=function(p,v,I,P){return this.i.add(String(p),v,!1,I,P)},zs.prototype.L=function(p,v,I,P){return this.i.add(String(p),v,!0,I,P)};class aGe extends ai{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:aae(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function P0(p){ai.call(this),this.h=p,this.g={}}b(P0,ai);var lae=[];function cae(p){$e(p.g,function(v,I){this.g.hasOwnProperty(I)&&fz(v)},p),p.g={}}P0.prototype.N=function(){P0.aa.N.call(this),cae(this)},P0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _z=a.JSON.stringify,lGe=a.JSON.parse,cGe=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function yz(){}function dae(){}yz.prototype.h=null;var k0={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vz(){Rr.call(this,"d")}function bz(){Rr.call(this,"c")}b(vz,Rr),b(bz,Rr);var Sp={},hae=null;function XD(){return hae=hae||new zs}function fae(p){Rr.call(this,Sp.La,p)}function N0(p){const v=XD();co(v,new fae(v))}function pae(p,v){Rr.call(this,Sp.STAT_EVENT,p),this.stat=v}function uo(p){const v=XD();co(v,new pae(v,p))}function mae(p,v){Rr.call(this,Sp.Ma,p),this.size=v}function O0(p,v){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},v)}function F0(){this.g=!0}function ly(p,v,I,P){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+function fGe(p,v){if(!p.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I)for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var P=I[p];if(!(2>P.length)){var ce=P[1];if(Array.isArray(ce)&&!(1>ce.length)){var Ce=ce[0];if("noop"!=Ce&&"stop"!=Ce&&"close"!=Ce)for(var Ye=1;Ye<ce.length;Ye++)ce[Ye]=""}}}return _z(I)}catch{return v}}(p,I)+(P?" "+P:"")})}Sp.La="serverreachability",b(fae,Rr),Sp.STAT_EVENT="statevent",b(pae,Rr),Sp.Ma="timingevent",b(mae,Rr),F0.prototype.xa=function(){this.g=!1},F0.prototype.info=function(){};var Ez,ZD={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function JD(){}function Zd(p,v,I,P){this.j=p,this.i=v,this.l=I,this.R=P||1,this.U=new P0(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _ae}function _ae(){this.i=null,this.g="",this.h=!1}b(JD,yz),JD.prototype.g=function(){return new XMLHttpRequest},JD.prototype.i=function(){return{}},Ez=new JD;var yae={},Iz={};function wz(p,v,I){p.L=1,p.v=rR(cu(v)),p.m=I,p.P=!0,vae(p,null)}function vae(p,v){p.F=Date.now(),eR(p),p.A=cu(p.v);var I=p.A,P=p.R;Array.isArray(P)||(P=[String(P)]),kae(I.i,"t",P),p.C=0,I=p.j.J,p.h=new _ae,p.g=Xae(p.j,I?v:null,!p.m),0<p.O&&(p.M=new aGe(m(p.Y,p,p.g),p.O)),v=p.U,I=p.g,P=p.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(lae[0]=ce.toString()),ce=lae);for(var Ce=0;Ce<ce.length;Ce++){var Ye=tae(I,ce[Ce],P||v.handleEvent,!1,v.h||v);if(!Ye)break;v.g[Ye.key]=Ye}v=p.H?L(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),N0(),function uGe(p,v,I,P,ce,Ce){p.info(function(){if(p.g)if(Ce)for(var Ye="",ur=Ce.split("&"),gs=0;gs<ur.length;gs++){var On=ur[gs].split("=");if(1<On.length){var Hs=On[0];On=On[1];var $s=Hs.split("_");Ye=2<=$s.length&&"type"==$s[1]?Ye+(Hs+"=")+On+"&":Ye+(Hs+"=redacted&")}}else Ye=null;else Ye=Ce;return"XMLHTTP REQ ("+P+") [attempt "+ce+"]: "+v+"\n"+I+"\n"+Ye})}(p.i,p.u,p.A,p.l,p.R,p.m)}function bae(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function pGe(p,v){var I=p.C,P=v.indexOf("\n",I);return-1==P?Iz:(I=Number(v.substring(I,P)),isNaN(I)?yae:(P+=1)+I>v.length?Iz:(v=v.slice(P,P+I),p.C=P+I,v))}function eR(p){p.S=Date.now()+p.I,Eae(p,p.I)}function Eae(p,v){if(null!=p.B)throw Error("WatchDog timer not null");p.B=O0(m(p.ba,p),v)}function Cz(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function L0(p){0==p.j.G||p.J||qae(p.j,p)}function xp(p){Cz(p);var v=p.M;v&&"function"==typeof v.ma&&v.ma(),p.M=null,cae(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function Tz(p,v){try{var I=p.j;if(0!=I.G&&(I.g==p||Az(I.h,p)))if(!p.K&&Az(I.h,p)&&3==I.G){try{var P=I.Da.g.parse(v)}catch{P=null}if(Array.isArray(P)&&3==P.length){var ce=P;if(0==ce[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<p.F))break e;lR(I),oR(I)}Rz(I),uo(18)}}else I.za=ce[1],0<I.za-I.T&&37500>ce[2]&&I.F&&0==I.v&&!I.C&&(I.C=O0(m(I.Za,I),6e3));if(1>=Cae(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Rp(I,11)}else if((p.K||I.g==p)&&lR(I),!V(v))for(ce=I.Da.g.parse(v),v=0;v<ce.length;v++){let On=ce[v];if(I.T=On[0],On=On[1],2==I.G)if("c"==On[0]){I.K=On[1],I.ia=On[2];const Hs=On[3];null!=Hs&&(I.la=Hs,I.j.info("VER="+I.la));const $s=On[4];null!=$s&&(I.Aa=$s,I.j.info("SVER="+I.Aa));const dy=On[5];null!=dy&&"number"==typeof dy&&0<dy&&(I.L=P=1.5*dy,I.j.info("backChannelRequestTimeoutMs_="+P)),P=I;const fl=p.g;if(fl){const uR=fl.g?fl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uR){var Ce=P.h;Ce.g||-1==uR.indexOf("spdy")&&-1==uR.indexOf("quic")&&-1==uR.indexOf("h2")||(Ce.j=Ce.l,Ce.g=new Set,Ce.h&&(Sz(Ce,Ce.h),Ce.h=null))}if(P.D){const Pz=fl.g?fl.g.getResponseHeader("X-HTTP-Session-Id"):null;Pz&&(P.ya=Pz,Pr(P.I,P.D,Pz))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Ye=p;if((P=I).qa=Yae(P,P.J?P.ia:null,P.W),Ye.K){Tae(P.h,Ye);var ur=Ye,gs=P.L;gs&&(ur.I=gs),ur.B&&(Cz(ur),eR(ur)),P.g=Ye}else Wae(P);0<I.i.length&&aR(I)}else"stop"!=On[0]&&"close"!=On[0]||Rp(I,7);else 3==I.G&&("stop"==On[0]||"close"==On[0]?"stop"==On[0]?Rp(I,7):Dz(I):"noop"!=On[0]&&I.l&&I.l.ta(On),I.v=0)}N0()}catch{}}Zd.prototype.ca=function(p){p=p.target;const v=this.M;v&&3==uu(p)?v.j():this.Y(p)},Zd.prototype.Y=function(p){try{if(p==this.g)e:{const $s=uu(this.g);var v=this.g.Ba();if(this.g.Z(),!(3>$s)&&(3!=$s||this.g&&(this.h.h||this.g.oa()||Uae(this.g)))){this.J||4!=$s||7==v||N0(),Cz(this);var I=this.g.Z();this.X=I;t:if(bae(this)){var P=Uae(this.g);p="";var ce=P.length,Ce=4==uu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xp(this),L0(this);var Ye="";break t}this.h.i=new a.TextDecoder}for(v=0;v<ce;v++)this.h.h=!0,p+=this.h.i.decode(P[v],{stream:!(Ce&&v==ce-1)});P.length=0,this.h.g+=p,this.C=0,Ye=this.h.g}else Ye=this.g.oa();if(this.o=200==I,function dGe(p,v,I,P,ce,Ce,Ye){p.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+ce+"]: "+v+"\n"+I+"\n"+Ce+" "+Ye})}(this.i,this.u,this.A,this.l,this.R,$s,I),this.o){if(this.T&&!this.K){t:{if(this.g){var ur,gs=this.g;if((ur=gs.g?gs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(ur)){var On=ur;break t}}On=null}if(!(I=On)){this.o=!1,this.s=3,uo(12),xp(this),L0(this);break e}ly(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tz(this,I)}if(this.P){let fl;for(I=!0;!this.J&&this.C<Ye.length;){if(fl=pGe(this,Ye),fl==Iz){4==$s&&(this.s=4,uo(14),I=!1),ly(this.i,this.l,null,"[Incomplete Response]");break}if(fl==yae){this.s=4,uo(15),ly(this.i,this.l,Ye,"[Invalid Chunk]"),I=!1;break}ly(this.i,this.l,fl,null),Tz(this,fl)}if(bae(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=$s||0!=Ye.length||this.h.h||(this.s=1,uo(16),I=!1),this.o=this.o&&I,I){if(0<Ye.length&&!this.W){this.W=!0;var Hs=this.j;Hs.g==this&&Hs.ba&&!Hs.M&&(Hs.j.info("Great, no buffering proxy detected. Bytes received: "+Ye.length),Mz(Hs),Hs.M=!0,uo(11))}}else ly(this.i,this.l,Ye,"[Invalid Chunked Response]"),xp(this),L0(this)}else ly(this.i,this.l,Ye,null),Tz(this,Ye);4==$s&&xp(this),this.o&&!this.J&&(4==$s?qae(this.j,this):(this.o=!1,eR(this)))}else(function MGe(p){const v={};p=(p.g&&2<=uu(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let P=0;P<p.length;P++){if(V(p[P]))continue;var I=re(p[P]);const ce=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const Ce=v[ce]||[];v[ce]=Ce,Ce.push(I)}!function H(p,v){for(const I in p)v.call(void 0,p[I],I,p)}(v,function(P){return P.join(", ")})})(this.g),400==I&&0<Ye.indexOf("Unknown SID")?(this.s=3,uo(12)):(this.s=0,uo(13)),xp(this),L0(this)}}}catch{}},Zd.prototype.cancel=function(){this.J=!0,xp(this)},Zd.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function hGe(p,v){p.info(function(){return"TIMEOUT: "+v})}(this.i,this.A),2!=this.L&&(N0(),uo(17)),xp(this),this.s=2,L0(this)):Eae(this,this.S-p)};var mGe=class{constructor(p,v){this.g=p,this.map=v}};function Iae(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wae(p){return!!p.h||!!p.g&&p.g.size>=p.j}function Cae(p){return p.h?1:p.g?p.g.size:0}function Az(p,v){return p.h?p.h==v:!!p.g&&p.g.has(v)}function Sz(p,v){p.g?p.g.add(v):p.h=v}function Tae(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}function Aae(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let v=p.i;for(const I of p.g.values())v=v.concat(I.D);return v}return T(p.i)}function Sae(p,v){if(p.forEach&&"function"==typeof p.forEach)p.forEach(v,void 0);else if(l(p)||"string"==typeof p)Array.prototype.forEach.call(p,v,void 0);else for(var I=function _Ge(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||"string"==typeof p){var v=[];p=p.length;for(var I=0;I<p;I++)v.push(I);return v}v=[],I=0;for(const P in p)v[I++]=P;return v}}}(p),P=function gGe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(l(p)){for(var v=[],I=p.length,P=0;P<I;P++)v.push(p[P]);return v}for(P in v=[],I=0,p)v[I++]=p[P];return v}(p),ce=P.length,Ce=0;Ce<ce;Ce++)v.call(void 0,P[Ce],I&&I[Ce],p)}Iae.prototype.cancel=function(){if(this.i=Aae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var xae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dp(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Dp){this.h=p.h,tR(this,p.j),this.o=p.o,this.g=p.g,nR(this,p.s),this.l=p.l;var v=p.i,I=new U0;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),Dae(this,I),this.m=p.m}else p&&(v=String(p).match(xae))?(this.h=!1,tR(this,v[1]||"",!0),this.o=V0(v[2]||""),this.g=V0(v[3]||"",!0),nR(this,v[4]),this.l=V0(v[5]||"",!0),Dae(this,v[6]||"",!0),this.m=V0(v[7]||"")):(this.h=!1,this.i=new U0(null,this.h))}function cu(p){return new Dp(p)}function tR(p,v,I){p.j=I?V0(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function nR(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function Dae(p,v,I){v instanceof U0?(p.i=v,function CGe(p,v){v&&!p.j&&(Jd(p),p.i=null,p.g.forEach(function(I,P){var ce=P.toLowerCase();P!=ce&&(Mae(this,P),kae(this,ce,I))},p)),p.j=v}(p.i,p.h)):(I||(v=B0(v,IGe)),p.i=new U0(v,p.h))}function Pr(p,v,I){p.i.set(v,I)}function rR(p){return Pr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function V0(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function B0(p,v,I){return"string"==typeof p?(p=encodeURI(p).replace(v,vGe),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function vGe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Dp.prototype.toString=function(){var p=[],v=this.j;v&&p.push(B0(v,Rae,!0),":");var I=this.g;return(I||"file"==v)&&(p.push("//"),(v=this.o)&&p.push(B0(v,Rae,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&p.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&p.push("/"),p.push(B0(I,"/"==I.charAt(0)?EGe:bGe,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",B0(I,wGe)),p.join("")};var Rae=/[#\/\?@]/g,bGe=/[#\?:]/g,EGe=/[#\?]/g,IGe=/[#\?@]/g,wGe=/#/g;function U0(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function Jd(p){p.g||(p.g=new Map,p.h=0,p.i&&function yGe(p,v){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var P=p[I].indexOf("="),ce=null;if(0<=P){var Ce=p[I].substring(0,P);ce=p[I].substring(P+1)}else Ce=p[I];v(Ce,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}(p.i,function(v,I){p.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}function Mae(p,v){Jd(p),v=cy(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function Pae(p,v){return Jd(p),v=cy(p,v),p.g.has(v)}function kae(p,v,I){Mae(p,v),0<I.length&&(p.i=null,p.g.set(cy(p,v),T(I)),p.h+=I.length)}function cy(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function eh(p,v,I,P,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),P(I)}catch{}}function SGe(){this.g=new cGe}function xGe(p,v,I){const P=I||"";try{Sae(p,function(ce,Ce){let Ye=ce;c(ce)&&(Ye=_z(ce)),v.push(P+Ce+"="+encodeURIComponent(Ye))})}catch(ce){throw v.push(P+"type="+encodeURIComponent("_badmap")),ce}}function j0(p){this.l=p.Ub||null,this.j=p.eb||!1}function iR(p,v){zs.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Nae(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function z0(p){p.readyState=4,p.l=null,p.j=null,p.v=null,H0(p)}function H0(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function Oae(p){let v="";return $e(p,function(I,P){v+=P,v+=":",v+=I,v+="\r\n"}),v}function xz(p,v,I){e:{for(P in I){var P=!1;break e}P=!0}P||(I=Oae(I),"string"==typeof p?null!=I&&encodeURIComponent(String(I)):Pr(p,v,I))}function ci(p){zs.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=U0.prototype).add=function(p,v){Jd(this),this.i=null,p=cy(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(v),this.h+=1,this},n.forEach=function(p,v){Jd(this),this.g.forEach(function(I,P){I.forEach(function(ce){p.call(v,ce,P,this)},this)},this)},n.na=function(){Jd(this);const p=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let P=0;P<v.length;P++){const ce=p[P];for(let Ce=0;Ce<ce.length;Ce++)I.push(v[P])}return I},n.V=function(p){Jd(this);let v=[];if("string"==typeof p)Pae(this,p)&&(v=v.concat(this.g.get(cy(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)v=v.concat(p[I])}return v},n.set=function(p,v){return Jd(this),this.i=null,Pae(this,p=cy(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},n.get=function(p,v){return p&&0<(p=this.V(p)).length?String(p[0]):v},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var P=v[I];const Ce=encodeURIComponent(String(P)),Ye=this.V(P);for(P=0;P<Ye.length;P++){var ce=Ce;""!==Ye[P]&&(ce+="="+encodeURIComponent(String(Ye[P]))),p.push(ce)}}return this.i=p.join("&")},b(j0,yz),j0.prototype.g=function(){return new iR(this.l,this.j)},j0.prototype.i=function(p){return function(){return p}}({}),b(iR,zs),(n=iR.prototype).open=function(p,v){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,H0(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,z0(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,H0(this)),this.g&&(this.readyState=3,H0(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nae(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?z0(this):H0(this),3==this.readyState&&Nae(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,z0(this))},n.Qa=function(p){this.g&&(this.response=p,z0(this))},n.ga=function(){this.g&&z0(this)},n.setRequestHeader=function(p,v){this.u.append(p,v)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var I=v.next();!I.done;)p.push((I=I.value)[0]+": "+I[1]),I=v.next();return p.join("\r\n")},Object.defineProperty(iR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),b(ci,zs);var DGe=/^https?$/i,RGe=["POST","PUT"];function Fae(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,Lae(p),sR(p)}function Lae(p){p.A||(p.A=!0,co(p,"complete"),co(p,"error"))}function Vae(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=uu(p)||2!=p.Z()))if(p.u&&4==uu(p))oae(p.Ea,0,p);else if(co(p,"readystatechange"),4==uu(p)){p.h=!1;try{const Ye=p.Z();e:switch(Ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var I;if(!(I=v)){var P;if(P=0===Ye){var ce=String(p.D).match(xae)[1]||null;!ce&&a.self&&a.self.location&&(ce=a.self.location.protocol.slice(0,-1)),P=!DGe.test(ce?ce.toLowerCase():"")}I=P}if(I)co(p,"complete"),co(p,"success");else{p.m=6;try{var Ce=2<uu(p)?p.g.statusText:""}catch{Ce=""}p.l=Ce+" ["+p.Z()+"]",Lae(p)}}finally{sR(p)}}}function sR(p,v){if(p.g){Bae(p);const I=p.g,P=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||co(p,"ready");try{I.onreadystatechange=P}catch{}}}function Bae(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function uu(p){return p.g?p.g.readyState:0}function Uae(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function $0(p,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||v}function jae(p){this.Aa=0,this.i=[],this.j=new F0,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$0("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$0("baseRetryDelayMs",5e3,p),this.cb=$0("retryDelaySeedMs",1e4,p),this.Wa=$0("forwardChannelMaxRetries",2,p),this.wa=$0("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Iae(p&&p.concurrentRequestLimit),this.Da=new SGe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Dz(p){if(zae(p),3==p.G){var v=p.U++,I=cu(p.I);if(Pr(I,"SID",p.K),Pr(I,"RID",v),Pr(I,"TYPE","terminate"),W0(p,I),(v=new Zd(p,p.j,v)).L=2,v.v=rR(cu(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=v.v,I=!0),I||(v.g=Xae(v.j,null),v.g.ea(v.v)),v.F=Date.now(),eR(v)}Qae(p)}function oR(p){p.g&&(Mz(p),p.g.cancel(),p.g=null)}function zae(p){oR(p),p.u&&(a.clearTimeout(p.u),p.u=null),lR(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function aR(p){if(!wae(p.h)&&!p.s){p.s=!0;var v=p.Ga;pt||Ei(),It||(pt(),It=!0),hn.add(v,p),p.B=0}}function Hae(p,v){var I;I=v?v.l:p.U++;const P=cu(p.I);Pr(P,"SID",p.K),Pr(P,"RID",I),Pr(P,"AID",p.T),W0(p,P),p.m&&p.o&&xz(P,p.m,p.o),I=new Zd(p,p.j,I,p.B+1),null===p.m&&(I.H=p.o),v&&(p.i=v.D.concat(p.i)),v=$ae(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Sz(p.h,I),wz(I,P,v)}function W0(p,v){p.H&&$e(p.H,function(I,P){Pr(v,P,I)}),p.l&&Sae({},function(I,P){Pr(v,P,I)})}function $ae(p,v,I){I=Math.min(p.i.length,I);var P=p.l?m(p.l.Na,p.l,p):null;e:{var ce=p.i;let Ce=-1;for(;;){const Ye=["count="+I];-1==Ce?0<I?(Ce=ce[0].g,Ye.push("ofs="+Ce)):Ce=0:Ye.push("ofs="+Ce);let ur=!0;for(let gs=0;gs<I;gs++){let On=ce[gs].g;const Hs=ce[gs].map;if(On-=Ce,0>On)Ce=Math.max(0,ce[gs].g-100),ur=!1;else try{xGe(Hs,Ye,"req"+On+"_")}catch{P&&P(Hs)}}if(ur){P=Ye.join("&");break e}}}return p=p.i.splice(0,I),v.D=p,P}function Wae(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;pt||Ei(),It||(pt(),It=!0),hn.add(v,p),p.v=0}}function Rz(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=O0(m(p.Fa,p),Kae(p,p.v)),p.v++,0))}function Mz(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function Gae(p){p.g=new Zd(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var v=cu(p.qa);Pr(v,"RID","rpc"),Pr(v,"SID",p.K),Pr(v,"AID",p.T),Pr(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&Pr(v,"TO",p.ja),Pr(v,"TYPE","xmlhttp"),W0(p,v),p.m&&p.o&&xz(v,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=rR(cu(v)),I.m=null,I.P=!0,vae(I,p)}function lR(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function qae(p,v){var I=null;if(p.g==v){lR(p),Mz(p),p.g=null;var P=2}else{if(!Az(p.h,v))return;I=v.D,Tae(p.h,v),P=1}if(0!=p.G)if(v.o)if(1==P){I=v.m?v.m.length:0,v=Date.now()-v.F;var ce=p.B;co(P=XD(),new mae(P,I)),aR(p)}else Wae(p);else if(3==(ce=v.s)||0==ce&&0<v.X||!(1==P&&function PGe(p,v){return!(Cae(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=v.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=O0(m(p.Ga,p,v),Kae(p,p.B)),p.B++,0)))}(p,v)||2==P&&Rz(p)))switch(I&&0<I.length&&(v=p.h,v.i=v.i.concat(I)),ce){case 1:Rp(p,5);break;case 4:Rp(p,10);break;case 3:Rp(p,6);break;default:Rp(p,2)}}function Kae(p,v){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*v}function Rp(p,v){if(p.j.info("Error code "+v),2==v){var I=m(p.fb,p),P=p.Xa;const ce=!P;P=new Dp(P||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||tR(P,"https"),rR(P),ce?function TGe(p,v){const I=new F0;if(a.Image){const P=new Image;P.onload=y(eh,I,"TestLoadImage: loaded",!0,v,P),P.onerror=y(eh,I,"TestLoadImage: error",!1,v,P),P.onabort=y(eh,I,"TestLoadImage: abort",!1,v,P),P.ontimeout=y(eh,I,"TestLoadImage: timeout",!1,v,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=p}else v(!1)}(P.toString(),I):function AGe(p,v){new F0;const P=new AbortController,ce=setTimeout(()=>{P.abort(),eh(0,0,!1,v)},1e4);fetch(p,{signal:P.signal}).then(Ce=>{clearTimeout(ce),eh(0,0,!!Ce.ok,v)}).catch(()=>{clearTimeout(ce),eh(0,0,!1,v)})}(P.toString(),I)}else uo(2);p.G=0,p.l&&p.l.sa(v),Qae(p),zae(p)}function Qae(p){if(p.G=0,p.ka=[],p.l){const v=Aae(p.h);(0!=v.length||0!=p.i.length)&&(M(p.ka,v),M(p.ka,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.ra()}}function Yae(p,v,I){var P=I instanceof Dp?cu(I):new Dp(I);if(""!=P.g)v&&(P.g=v+"."+P.g),nR(P,P.s);else{var ce=a.location;P=ce.protocol,v=v?v+"."+ce.hostname:ce.hostname,ce=+ce.port;var Ce=new Dp(null);P&&tR(Ce,P),v&&(Ce.g=v),ce&&nR(Ce,ce),I&&(Ce.l=I),P=Ce}return v=p.ya,(I=p.D)&&v&&Pr(P,I,v),Pr(P,"VER",p.la),W0(p,P),P}function Xae(p,v,I){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(v=new ci(p.Ca&&!p.pa?new j0({eb:I}):p.pa)).Ha(p.J),v}function Zae(){}function cR(){}function ca(p,v){zs.call(this),this.g=new jae(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!V(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,null!==(p=this.h)&&v in p&&v in(p=this.h)&&delete p[v]),this.j=new uy(this)}function Jae(p){vz.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const I in v){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,v=null!==v&&p in v?v[p]:void 0),this.data=v}else this.data=p}function ele(){bz.call(this),this.status=1}function uy(p){this.g=p}(n=ci.prototype).Ha=function(p){this.J=p},n.ea=function(p,v,I,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ez.g(),this.v=function uae(p){return p.h||(p.h=p.i())}(this.o?this.o:Ez),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(Ce){return void Fae(this,Ce)}if(p=I||"",I=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var ce in P)I.set(ce,P[ce]);else{if("function"!=typeof P.keys||"function"!=typeof P.get)throw Error("Unknown input type for opt_headers: "+String(P));for(const Ce of P.keys())I.set(Ce,P.get(Ce))}P=Array.from(I.keys()).find(Ce=>"content-type"==Ce.toLowerCase()),ce=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(RGe,v,void 0))||P||ce||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ce,Ye]of I)this.g.setRequestHeader(Ce,Ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bae(this),this.u=!0,this.g.send(p),this.u=!1}catch(Ce){Fae(this,Ce)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,co(this,"complete"),co(this,"abort"),sR(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sR(this,!0)),ci.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vae(this):this.bb())},n.bb=function(){Vae(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<uu(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&0==v.indexOf(p)&&(v=v.substring(p.length)),lGe(v)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=jae.prototype).la=8,n.G=1,n.connect=function(p,v,I,P){uo(0),this.W=p,this.H=v||{},I&&void 0!==P&&(this.H.OSID=I,this.H.OAID=P),this.F=this.X,this.I=Yae(this,null,this.W),aR(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ce=new Zd(this,this.j,p);let Ce=this.o;if(this.S&&(Ce?(Ce=L(Ce),J(Ce,this.S)):Ce=this.S),null!==this.m||this.O||(ce.H=Ce,Ce=null),this.P)e:{for(var v=0,I=0;I<this.i.length;I++){var P=this.i[I];if(void 0===(P="__data__"in P.map&&"string"==typeof(P=P.map.__data__)?P.length:void 0))break;if(4096<(v+=P)){v=I;break e}if(4096===v||I===this.i.length-1){v=I+1;break e}}v=1e3}else v=1e3;v=$ae(this,ce,v),Pr(I=cu(this.I),"RID",p),Pr(I,"CVER",22),this.D&&Pr(I,"X-HTTP-Session-Id",this.D),W0(this,I),Ce&&(this.O?v="headers="+encodeURIComponent(String(Oae(Ce)))+"&"+v:this.m&&xz(I,this.m,Ce)),Sz(this.h,ce),this.Ua&&Pr(I,"TYPE","init"),this.P?(Pr(I,"$req",v),Pr(I,"SID","null"),ce.T=!0,wz(ce,I,null)):wz(ce,I,v),this.G=2}}else 3==this.G&&(p?Hae(this,p):0==this.i.length||wae(this.h)||Hae(this))},n.Fa=function(){if(this.u=null,Gae(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=O0(m(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,uo(10),oR(this),Gae(this))},n.Za=function(){null!=this.C&&(this.C=null,oR(this),Rz(this),uo(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),uo(2)):(this.j.info("Failed to ping google.com"),uo(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Zae.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},cR.prototype.g=function(p,v){return new ca(p,v)},b(ca,zs),ca.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ca.prototype.close=function(){Dz(this.g)},ca.prototype.o=function(p){var v=this.g;if("string"==typeof p){var I={};I.__data__=p,p=I}else this.u&&((I={}).__data__=_z(p),p=I);v.i.push(new mGe(v.Ya++,p)),3==v.G&&aR(v)},ca.prototype.N=function(){this.g.l=null,delete this.j,Dz(this.g),delete this.g,ca.aa.N.call(this)},b(Jae,vz),b(ele,bz),b(uy,Zae),uy.prototype.ua=function(){co(this.g,"a")},uy.prototype.ta=function(p){co(this.g,new Jae(p))},uy.prototype.sa=function(p){co(this.g,new ele)},uy.prototype.ra=function(){co(this.g,"b")},cR.prototype.createWebChannel=cR.prototype.g,ca.prototype.send=ca.prototype.o,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,JZ=Gc.createWebChannelTransport=function(){return new cR},ZZ=Gc.getStatEventTarget=function(){return XD()},XZ=Gc.Event=Sp,W2=Gc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ZD.NO_ERROR=0,ZD.TIMEOUT=8,ZD.HTTP_ERROR=6,GS=Gc.ErrorCode=ZD,gae.COMPLETE="complete",YZ=Gc.EventType=gae,dae.EventType=k0,k0.OPEN="a",k0.CLOSE="b",k0.ERROR="c",k0.MESSAGE="d",zs.prototype.listen=zs.prototype.K,sI=Gc.WebChannel=dae,Gc.FetchXmlHttpFactory=j0,ci.prototype.listenOnce=ci.prototype.L,ci.prototype.getLastError=ci.prototype.Ka,ci.prototype.getLastErrorCode=ci.prototype.Ba,ci.prototype.getStatus=ci.prototype.Z,ci.prototype.getResponseJson=ci.prototype.Oa,ci.prototype.getResponseText=ci.prototype.oa,ci.prototype.send=ci.prototype.ea,ci.prototype.setWithCredentials=ci.prototype.Ha,QZ=Gc.XhrIo=ci}).apply(typeof WS<"u"?WS:typeof self<"u"?self:typeof window<"u"?window:{});const eJ="@firebase/firestore";class es{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let c_="10.14.0";const yd=new xo.Vy("@firebase/firestore");function u_(){return yd.logLevel}function Le(n,...e){if(yd.logLevel<=xo.$b.DEBUG){const t=e.map(G2);yd.debug(`Firestore (${c_}): ${n}`,...t)}}function vi(n,...e){if(yd.logLevel<=xo.$b.ERROR){const t=e.map(G2);yd.error(`Firestore (${c_}): ${n}`,...t)}}function ea(n,...e){if(yd.logLevel<=xo.$b.WARN){const t=e.map(G2);yd.warn(`Firestore (${c_}): ${n}`,...t)}}function G2(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${c_}) INTERNAL ASSERTION FAILED: `+n;throw vi(e),new Error(e)}function ct(n,e){n||ot()}function Ke(n,e){return n}const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends k.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tJ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iNe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(es.UNAUTHENTICATED))}shutdown(){}}class sNe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oNe{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;ct(void 0===this.o);let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ts,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,O.A)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ts)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new tJ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new es(e)}}class aNe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=es.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lNe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new aNe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cNe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ct(void 0===this.o);const r=s=>{null!=s.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.R=t.token,new nJ(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function uNe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class rJ{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=uNe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function d_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iJ(n){return n+"\0"}class Br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Br.fromMillis(Date.now())}static fromDate(e){return Br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Br(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ft(e)}static min(){return new ft(new Br(0,0))}static max(){return new ft(new Br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class oI{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===oI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends oI{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const dNe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends oI{construct(e,t,r){return new Sr(e,t,r)}static isValidIdentifier(e){return dNe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Ne(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ne(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ne(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(t)}static emptyPath(){return new Sr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(pn.fromString(e))}static fromName(e){return new Xe(pn.fromString(e).popFirst(5))}static empty(){return new Xe(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new pn(e.slice()))}}class h_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function q2(n){return n.fields.find(e=>2===e.kind)}function zf(n){return n.fields.filter(e=>2!==e.kind)}h_.UNKNOWN_ID=-1;class Hf{constructor(e,t){this.fieldPath=e,this.kind=t}}class f_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new f_(0,ta.min())}}function sJ(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(1e9===r?new Br(t+1,0):new Br(t,r));return new ta(i,Xe.empty(),e)}function oJ(n){return new ta(n.readTime,n.key,-1)}class ta{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ta(ft.min(),Xe.empty(),-1)}static max(){return new ta(ft.max(),Xe.empty(),-1)}}function K2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const aJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function vd(n){return Q2.apply(this,arguments)}function Q2(){return(Q2=(0,O.A)(function*(n){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==aJ)throw n;Le("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new de((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class qS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ts,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new aI(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Y2(r.target.error);this.V.reject(new aI(e,i))}}static open(e,t,r,i){try{return new qS(t,e.transaction(i,r))}catch(s){throw new aI(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mNe(t)}}class zl{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===zl.S((0,k.ZQ)())&&vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),$f(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,k.zW)())return!1;if(zl.v())return!0;const e=(0,k.ZQ)(),t=zl.S(e),r=0<t&&t<10,i=cJ(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,O.A)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new aI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Ne(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ne(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new aI(e,a))},s.onupgradeneeded=o=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,O.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=qS.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),de.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(Le("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function cJ(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class pNe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $f(this.B.delete())}}class aI extends Ne{constructor(e,t){super(Ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bd(n){return"IndexedDbTransactionError"===n.name}class mNe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$f(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),$f(this.store.add(e))}get(e){return $f(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),$f(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),$f(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new de((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=s=>{const o=Y2(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new de((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new pNe(a),c=t(a.primaryKey,a.value,l);if(c instanceof de){const u=c.catch(h=>(l.done(),de.reject(h)));r.push(u)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $f(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Y2(r.target.error);t(i)}})}let uJ=!1;function Y2(n){const e=zl.S((0,k.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uJ||(uJ=!0,setTimeout(()=>{throw r},0)),r}}return n}class gNe{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Le("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,O.A)(function*(){t.task=null;try{Le("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){bd(r)?Le("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield vd(r)}yield t.X(6e4)}))}}class _Ne{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,O.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return de.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Le("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Le("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=oJ(s);K2(o,r)>0&&(r=o)}),new ta(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let na=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function lI(n){return null==n}function cI(n){return 0===n&&1/n==-1/0}function dJ(n){return"number"==typeof n&&Number.isInteger(n)&&!cI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ls(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hJ(e)),e=yNe(n.get(t),e);return hJ(e)}function yNe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function hJ(n){return n+"\x01\x01"}function Hl(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&ot(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:ot()}s=o+2}return new pn(r)}const fJ=["userId","batchId"];function KS(n,e){return[n,Ls(e)]}function pJ(n,e,t){return[n,Ls(e),t]}const vNe={},bNe=["prefixPath","collectionGroup","readTime","documentId"],ENe=["prefixPath","collectionGroup","documentId"],INe=["collectionGroup","readTime","prefixPath","documentId"],wNe=["canonicalId","targetId"],CNe=["targetId","path"],TNe=["path","targetId"],ANe=["collectionId","parent"],SNe=["indexId","uid"],xNe=["uid","sequenceNumber"],DNe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RNe=["indexId","uid","orderedDocumentKey"],MNe=["userId","collectionPath","documentId"],PNe=["userId","collectionPath","largestBatchId"],kNe=["userId","collectionGroup","largestBatchId"],mJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NNe=[...mJ,"documentOverlays"],gJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_J=gJ,X2=[..._J,"indexConfiguration","indexState","indexEntries"],ONe=X2,FNe=[...X2,"globals"];class Z2 extends lJ{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Hi(n,e){const t=Ke(n);return zl.F(t._e,e)}function yJ(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ed(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bJ(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class yr{constructor(e,t){this.comparator=e,this.root=t||hs.EMPTY}insert(e,t){return new yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hs.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new QS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new QS(this.root,e,this.comparator,!1)}getReverseIterator(){return new QS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new QS(this.root,e,this.comparator,!0)}}class QS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??hs.RED,this.left=i??hs.EMPTY,this.right=s??hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new hs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return hs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1,hs.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(e,t,r,i,s){return this}insert(e,t,r){return new hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nr{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new EJ(this.data.getIterator())}getIteratorFrom(e){return new EJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nr(this.comparator);return t.data=e,t}}class EJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function p_(n){return n.hasNext()?n.getNext():void 0}class Mo{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new Mo([])}unionWith(e){let t=new nr(Sr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return d_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class IJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new IJ("Invalid base64 string: "+s):s}}(e);return new oi(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new oi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const VNe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qc(n){if(ct(!!n),"string"==typeof n){let e=0;const t=VNe.exec(n);if(ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ur(n.seconds),nanos:Ur(n.nanos)}}function Ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Kc(n){return"string"==typeof n?oi.fromBase64String(n):oi.fromUint8Array(n)}function YS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XS(n){const e=n.mapValue.fields.__previous_value__;return YS(e)?XS(e):e}function uI(n){const e=qc(n.mapValue.fields.__local_write_time__.timestampValue);return new Br(e.seconds,e.nanos)}class BNe{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Id{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Id("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}const wd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ZS={nullValue:"NULL_VALUE"};function Cd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YS(n)?4:SJ(n)?9007199254740991:tx(n)?10:11:ot()}function $l(n,e){if(n===e)return!0;const t=Cd(n);if(t!==Cd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uI(n).isEqual(uI(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=qc(i.timestampValue),a=qc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Kc(n.bytesValue).isEqual(Kc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ur(i.geoPointValue.latitude)===Ur(s.geoPointValue.latitude)&&Ur(i.geoPointValue.longitude)===Ur(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ur(i.integerValue)===Ur(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ur(i.doubleValue),a=Ur(s.doubleValue);return o===a?cI(o)===cI(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return d_(n.arrayValue.values||[],e.arrayValue.values||[],$l);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(yJ(o)!==yJ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!$l(o[l],a[l])))return!1;return!0}(n,e);default:return ot()}var s}function dI(n,e){return void 0!==(n.values||[]).find(t=>$l(t,e))}function Td(n,e){if(n===e)return 0;const t=Cd(n),r=Cd(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ur(s.integerValue||s.doubleValue),l=Ur(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return wJ(n.timestampValue,e.timestampValue);case 4:return wJ(uI(n),uI(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Kc(s),l=Kc(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ft(a[c],l[c]);if(0!==u)return u}return Ft(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ft(Ur(s.latitude),Ur(o.latitude));return 0!==a?a:Ft(Ur(s.longitude),Ur(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return CJ(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const y=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(l=(o.fields||{}).value)||void 0===l?void 0:l.arrayValue,T=Ft((null===(c=y?.values)||void 0===c?void 0:c.length)||0,(null===(u=b?.values)||void 0===u?void 0:u.length)||0);return 0!==T?T:CJ(y,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===wd.mapValue&&o===wd.mapValue)return 0;if(s===wd.mapValue)return 1;if(o===wd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const m=Ft(l[h],u[h]);if(0!==m)return m;const y=Td(a[l[h]],c[u[h]]);if(0!==y)return y}return Ft(l.length,u.length)}(n.mapValue,e.mapValue);default:throw ot()}}function wJ(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=qc(n),r=qc(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function CJ(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Td(t[i],r[i]);if(s)return s}return Ft(t.length,r.length)}function m_(n){return J2(n)}function J2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=qc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Kc(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=J2(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${J2(t.fields[o])}`;return i+"}"}(n.mapValue):ot()}function Wf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function eV(n){return!!n&&"integerValue"in n}function hI(n){return!!n&&"arrayValue"in n}function TJ(n){return!!n&&"nullValue"in n}function AJ(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ex(n){return!!n&&"mapValue"in n}function tx(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ed(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SJ(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const xJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function UNe(n){return"nullValue"in n?ZS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wf(Id.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?tx(n)?xJ:{mapValue:{}}:ot()}function jNe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wf(Id.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?xJ:"mapValue"in n?tx(n)?{mapValue:{}}:wd:ot()}function DJ(n,e){const t=Td(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RJ(n,e){const t=Td(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class fs{constructor(e){this.value=e}static empty(){return new fs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ex(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fI(t)}setAll(e){let t=Sr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=fI(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());ex(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $l(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ex(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ed(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new fs(fI(this.value))}}function MJ(n){const e=[];return Ed(n.fields,(t,r)=>{const i=new Sr([t]);if(ex(r)){const s=MJ(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Mo(e)}class xr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xr(e,0,ft.min(),ft.min(),ft.min(),fs.empty(),0)}static newFoundDocument(e,t,r,i){return new xr(e,1,t,ft.min(),r,i,0)}static newNoDocument(e,t){return new xr(e,2,t,ft.min(),ft.min(),fs.empty(),0)}static newUnknownDocument(e,t){return new xr(e,3,t,ft.min(),ft.min(),fs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ad{constructor(e,t){this.position=e,this.inclusive=t}}function PJ(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Xe.comparator(Xe.fromName(o.referenceValue),t.key):Td(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function kJ(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$l(n.position[t],e.position[t]))return!1;return!0}class pI{constructor(e,t="asc"){this.field=e,this.dir=t}}function zNe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class NJ{}class mn extends NJ{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new HNe(e,t,r):"array-contains"===t?new GNe(e,r):"in"===t?new UJ(e,r):"not-in"===t?new qNe(e,r):"array-contains-any"===t?new KNe(e,r):new mn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new $Ne(e,r):new WNe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Td(t,this.value)):null!==t&&Cd(this.value)===Cd(t)&&this.matchesComparison(Td(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends NJ{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Qn(e,t)}matches(e){return g_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function g_(n){return"and"===n.op}function tV(n){return"or"===n.op}function nV(n){return OJ(n)&&g_(n)}function OJ(n){for(const e of n.filters)if(e instanceof Qn)return!1;return!0}function rV(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+m_(n.value);if(nV(n))return n.filters.map(e=>rV(e)).join(",");{const e=n.filters.map(t=>rV(t)).join(",");return`${n.op}(${e})`}}function FJ(n,e){return n instanceof mn?(r=n,(i=e)instanceof mn&&r.op===i.op&&r.field.isEqual(i.field)&&$l(r.value,i.value)):n instanceof Qn?function(r,i){return i instanceof Qn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&FJ(o,i.filters[a]),!0)}(n,e):void ot();var r,i}function LJ(n,e){const t=n.filters.concat(e);return Qn.create(t,n.op)}function VJ(n){return n instanceof mn?`${(t=n).field.canonicalString()} ${t.op} ${m_(t.value)}`:n instanceof Qn?function(t){return t.op.toString()+" {"+t.getFilters().map(VJ).join(" ,")+"}"}(n):"Filter";var t}class HNe extends mn{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class $Ne extends mn{constructor(e,t){super(e,"in",t),this.keys=BJ(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WNe extends mn{constructor(e,t){super(e,"not-in",t),this.keys=BJ(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BJ(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class GNe extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hI(t)&&dI(t.arrayValue,this.value)}}class UJ extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dI(this.value.arrayValue,t)}}class qNe extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(dI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dI(this.value.arrayValue,t)}}class KNe extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dI(this.value.arrayValue,r))}}class QNe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function iV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new QNe(n,e,t,r,i,s,o)}function Gf(n){const e=Ke(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rV(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),lI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>m_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>m_(r)).join(",")),e.ue=t}return e.ue}function mI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zNe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FJ(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kJ(n.startAt,e.startAt)&&kJ(n.endAt,e.endAt)}function nx(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rx(n,e){return n.filters.filter(t=>t instanceof mn&&t.field.isEqual(e))}function jJ(n,e,t){let r=ZS,i=!0;for(const s of rx(n,e)){let o=ZS,a=!0;switch(s.op){case"<":case"<=":o=UNe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ZS}DJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];DJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function zJ(n,e,t){let r=wd,i=!0;for(const s of rx(n,e)){let o=wd,a=!0;switch(s.op){case">=":case">":o=jNe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=wd}RJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];RJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Qc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function HJ(n,e,t,r,i,s,o,a){return new Qc(n,e,t,r,i,s,o,a)}function __(n){return new Qc(n)}function $J(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sV(n){return null!==n.collectionGroup}function y_(n){const e=Ke(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nr(Sr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new pI(s,r))}),t.has(Sr.keyField().canonicalString())||e.ce.push(new pI(Sr.keyField(),r))}return e.ce}function Vs(n){const e=Ke(n);return e.le||(e.le=function GJ(n,e){if("F"===n.limitType)return iV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new pI(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Ad(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ad(n.startAt.position,n.startAt.inclusive):null;return iV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,y_(n))),e.le}function oV(n,e){const t=n.filters.concat([e]);return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ix(n,e,t){return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gI(n,e){return mI(Vs(n),Vs(e))&&n.limitType===e.limitType}function qJ(n){return`${Gf(Vs(n))}|lt:${n.limitType}`}function v_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>VJ(i)).join(", ")}]`),lI(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>m_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>m_(i)).join(",")),`Target(${r})`}(Vs(n))}; limitType=${n.limitType})`}function _I(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Xe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of y_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=PJ(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,y_(r),i)||r.endAt&&!function(o,a,l){const c=PJ(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,y_(r),i)));var r,i}function KJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QJ(n){return(e,t)=>{let r=!1;for(const i of y_(n)){const s=YNe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function YNe(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Td(l,c):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}class Yc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ed(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return bJ(this.inner)}size(){return this.innerSize}}const XNe=new yr(Xe.comparator);function Po(){return XNe}const YJ=new yr(Xe.comparator);function yI(...n){let e=YJ;for(const t of n)e=e.insert(t.key,t);return e}function XJ(n){let e=YJ;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wl(){return vI()}function ZJ(){return vI()}function vI(){return new Yc(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZNe=new yr(Xe.comparator),JNe=new nr(Xe.comparator);function Yt(...n){let e=JNe;for(const t of n)e=e.add(t);return e}const eOe=new nr(Ft);function aV(){return eOe}function lV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cI(e)?"-0":e}}function JJ(n){return{integerValue:""+n}}function eee(n,e){return dJ(e)?JJ(e):lV(n,e)}class sx{constructor(){this._=void 0}}function tOe(n,e,t){return n instanceof b_?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&YS(s)&&(s=XS(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof qf?nee(n,e):n instanceof Kf?ree(n,e):function(i,s){const o=tee(i,s),a=iee(o)+iee(i.Pe);return eV(o)&&eV(i.Pe)?JJ(a):lV(i.serializer,a)}(n,e)}function nOe(n,e,t){return n instanceof qf?nee(n,e):n instanceof Kf?ree(n,e):t}function tee(n,e){return n instanceof E_?eV(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class b_ extends sx{}class qf extends sx{constructor(e){super(),this.elements=e}}function nee(n,e){const t=see(e);for(const r of n.elements)t.some(i=>$l(i,r))||t.push(r);return{arrayValue:{values:t}}}class Kf extends sx{constructor(e){super(),this.elements=e}}function ree(n,e){let t=see(e);for(const r of n.elements)t=t.filter(i=>!$l(i,r));return{arrayValue:{values:t}}}class E_ extends sx{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function iee(n){return Ur(n.integerValue||n.doubleValue)}function see(n){return hI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bI{constructor(e,t){this.field=e,this.transform=t}}class iOe{constructor(e,t){this.version=e,this.transformResults=t}}class jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ox(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ax{}function oee(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new w_(n.key,jr.none()):new I_(n.key,n.data,jr.none());{const t=n.data,r=fs.empty();let i=new nr(Sr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Xc(n.key,r,new Mo(i.toArray()),jr.none())}}function sOe(n,e,t){n instanceof I_?function(i,s,o){const a=i.value.clone(),l=cee(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xc?function(i,s,o){if(!ox(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=cee(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(lee(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function EI(n,e,t,r){return n instanceof I_?function(s,o,a,l){if(!ox(s.precondition,o))return a;const c=s.value.clone(),u=uee(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xc?function(s,o,a,l){if(!ox(s.precondition,o))return a;const c=uee(s.fieldTransforms,l,o),u=o.data;return u.setAll(lee(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):(a=t,ox(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function oOe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=tee(r.transform,i||null);null!=s&&(null===t&&(t=fs.empty()),t.set(r.field,s))}return t||null}function aee(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&d_(r,i,(s,o)=>function rOe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof qf&&i instanceof qf||r instanceof Kf&&i instanceof Kf?d_(r.elements,i.elements,$l):r instanceof E_&&i instanceof E_?$l(r.Pe,i.Pe):r instanceof b_&&i instanceof b_);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class I_ extends ax{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xc extends ax{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lee(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function cee(n,e,t){const r=new Map;ct(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,nOe(o,a,t[i]))}return r}function uee(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,tOe(s,o,e))}return r}class w_ extends ax{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cV extends ax{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uV{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sOe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=EI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=EI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ZJ();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=oee(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&d_(this.mutations,e.mutations,(t,r)=>aee(t,r))&&d_(this.baseMutations,e.baseMutations,(t,r)=>aee(t,r))}}class dV{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length);let i=function(){return ZNe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new dV(e,t,r,i)}}class hV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class aOe{constructor(e,t){this.count=e,this.unchangedNames=t}}var Di,An;function hee(n){switch(n){default:return ot();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function fee(n){if(void 0===n)return vi("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case Di.OK:return Ie.OK;case Di.CANCELLED:return Ie.CANCELLED;case Di.UNKNOWN:return Ie.UNKNOWN;case Di.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Di.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Di.INTERNAL:return Ie.INTERNAL;case Di.UNAVAILABLE:return Ie.UNAVAILABLE;case Di.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Di.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Di.NOT_FOUND:return Ie.NOT_FOUND;case Di.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Di.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Di.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Di.ABORTED:return Ie.ABORTED;case Di.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Di.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Di.DATA_LOSS:return Ie.DATA_LOSS;default:return ot()}}(An=Di||(Di={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";function pee(){return new TextEncoder}const lOe=new jf([4294967295,4294967295],0);function mee(n){const e=pee().encode(n),t=new KZ;return t.update(e),new Uint8Array(t.digest())}function gee(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jf([t,r],0),new jf([i,s],0)]}class fV{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new II(`Invalid padding: ${t}`);if(r<0)throw new II(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new II(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new II(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=jf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(jf.fromNumber(r)));return 1===i.compare(lOe)&&(i=new jf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=mee(e),[r,i]=gee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new fV(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=mee(e),[r,i]=gee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class II extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wI{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,CI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wI(ft.min(),i,new yr(Ft),Po(),Yt())}}class CI{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new CI(r,t,Yt(),Yt(),Yt())}}class cx{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class _ee{constructor(e,t){this.targetId=e,this.me=t}}class yee{constructor(e,t,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class vee{constructor(){this.fe=0,this.ge=Eee(),this.pe=oi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Yt(),t=Yt(),r=Yt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ot()}}),new CI(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Eee()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cOe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Po(),this.qe=bee(),this.Qe=new yr(Ft)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(nx(s))if(0===r){const o=new Xe(s.path);this.Ue(t,o,xr.newNoDocument(o,ft.min()))}else ct(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Kc(r).toUint8Array()}catch(l){if(l instanceof IJ)return ea("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fV(o,i,s)}catch(l){return ea(l instanceof II?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&nx(a.target)){const l=new Xe(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,xr.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Yt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new wI(e,t,this.Qe,this.ke,r);return this.ke=Po(),this.qe=bee(),this.Qe=new yr(Ft),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vee,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new nr(Ft),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vee),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function bee(){return new yr(Xe.comparator)}function Eee(){return new yr(Xe.comparator)}const uOe={asc:"ASCENDING",desc:"DESCENDING"},dOe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hOe={and:"AND",or:"OR"};class fOe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pV(n,e){return n.useProto3Json||lI(e)?e:{value:e}}function C_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Iee(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pOe(n,e){return C_(n,e.toTimestamp())}function bi(n){return ct(!!n),ft.fromTimestamp(function(t){const r=qc(t);return new Br(r.seconds,r.nanos)}(n))}function mV(n,e){return gV(n,e).canonicalString()}function gV(n,e){const t=(i=n,new pn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function wee(n){const e=pn.fromString(n);return ct(Nee(e)),e}function TI(n,e){return mV(n.databaseId,e.path)}function Gl(n,e){const t=wee(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(Aee(t))}function Cee(n,e){return mV(n.databaseId,e)}function Tee(n){const e=wee(n);return 4===e.length?pn.emptyPath():Aee(e)}function _V(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Aee(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function See(n,e,t){return{name:TI(n,e),fields:t.value.mapValue.fields}}function xee(n,e,t){const r=Gl(n,e.name),i=bi(e.updateTime),s=e.createTime?bi(e.createTime):ft.min(),o=new fs({mapValue:{fields:e.fields}}),a=xr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function AI(n,e){let t;if(e instanceof I_)t={update:See(n,e.key,e.value)};else if(e instanceof w_)t={delete:TI(n,e.key)};else if(e instanceof Xc)t={update:See(n,e.key,e.data),updateMask:IOe(e.fieldMask)};else{if(!(e instanceof cV))return ot();t={verify:TI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof b_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Kf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof E_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:pOe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ot()),t;var s}function yV(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?jr.updateTime(bi(s.updateTime)):void 0!==s.exists?jr.exists(s.exists):jr.none():jr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(ct("REQUEST_TIME"===a.setToServerValue),l=new b_):"appendMissingElements"in a?l=new qf(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Kf(a.removeAllFromArray.values||[]):"increment"in a?l=new E_(o,a.increment):ot();const c=Sr.fromServerFormat(a.fieldPath);return new bI(c,l)}(n,i)):[];var s;if(e.update){const i=Gl(n,e.update.name),s=new fs({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Mo((e.updateMask.fieldPaths||[]).map(u=>Sr.fromServerFormat(u)));return new Xc(i,s,o,t,r)}return new I_(i,s,t,r)}if(e.delete){const i=Gl(n,e.delete);return new w_(i,t)}if(e.verify){const i=Gl(n,e.verify);return new cV(i,t)}return ot()}function Dee(n,e){return{documents:[Cee(n,e.path)]}}function ux(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Cee(n,i);const s=function(c){if(0!==c.length)return kee(Qn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:Sd((m=u).field),direction:vOe(m.dir)};var m})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=pV(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function Mee(n){let e=Tee(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const m=Pee(h);return m instanceof Qn&&nV(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new pI(T_((b=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(h){let m;return m="object"==typeof h?h.value:h,lI(m)?null:m}(t.limit));let l=null;var h;t.startAt&&(l=new Ad((h=t.startAt).values||[],!!h.before));let c=null;return t.endAt&&(c=function(h){return new Ad(h.values||[],!h.before)}(t.endAt)),HJ(e,i,o,s,a,"F",l,c)}function Pee(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=T_(t.unaryFilter.field);return mn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=T_(t.unaryFilter.field);return mn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=T_(t.unaryFilter.field);return mn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=T_(t.unaryFilter.field);return mn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}(n):void 0!==n.fieldFilter?mn.create(T_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Qn.create(t.compositeFilter.filters.map(r=>Pee(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ot()}}(t.compositeFilter.op))}(n):ot();var t}function vOe(n){return uOe[n]}function bOe(n){return dOe[n]}function EOe(n){return hOe[n]}function Sd(n){return{fieldPath:n.canonicalString()}}function T_(n){return Sr.fromServerFormat(n.fieldPath)}function kee(n){return n instanceof mn?function(t){if("=="===t.op){if(AJ(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NAN"}};if(TJ(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(AJ(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NOT_NAN"}};if(TJ(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sd(t.field),op:bOe(t.op),value:t.value}}}(n):n instanceof Qn?function(t){const r=t.getFilters().map(i=>kee(i));return 1===r.length?r[0]:{compositeFilter:{op:EOe(t.op),filters:r}}}(n):ot()}function IOe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nee(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Zc{constructor(e,t,r,i,s=ft.min(),o=ft.min(),a=oi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Zc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Oee{constructor(e){this.ct=e}}function Fee(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:TI(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:C_(s,o.version.toTimestamp()),createTime:C_(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qf(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:Qf(e.version)}}var s,o;return r}function dx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yf(n){const e=new Br(n.seconds,n.nanoseconds);return ft.fromTimestamp(e)}function Xf(n,e){const t=(e.baseMutations||[]).map(s=>yV(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>yV(n.ct,s)),i=Br.fromMillis(e.localWriteTimeMs);return new uV(e.batchId,i,t,r)}function SI(n){const e=Yf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Yf(n.lastLimboFreeSnapshotVersion):ft.min();let r;return r=void 0!==n.query.documents?(ct(1===(s=n.query).documents.length),Vs(__(Tee(s.documents[0])))):function(s){return Vs(Mee(s))}(n.query),new Zc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,oi.fromBase64String(n.resumeToken));var s}function Lee(n,e){const t=Qf(e.snapshotVersion),r=Qf(e.lastLimboFreeSnapshotVersion);let i;i=nx(e.target)?Dee(n.ct,e.target):ux(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function vV(n){const e=Mee({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ix(e,e.limit,"L"):e}function bV(n,e){return new hV(e.largestBatchId,yV(n.ct,e.overlayMutation))}function Vee(n,e){const t=e.path.lastSegment();return[n,Ls(e.path.popLast()),t]}function Bee(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Qf(r.readTime),documentKey:Ls(r.documentKey.path),largestBatchId:r.largestBatchId}}class COe{getBundleMetadata(e,t){return Uee(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Yf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Uee(e).put({bundleId:(i=t).id,createTime:Qf(bi(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return jee(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:vV(s.bundledQuery),readTime:Yf(s.readTime)};var s})}saveNamedQuery(e,t){return jee(e).put({name:(i=t).name,readTime:Qf(bi(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Uee(n){return Hi(n,"bundles")}function jee(n){return Hi(n,"namedQueries")}class hx{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new hx(e,t.uid||"")}getOverlay(e,t){return xI(e).get(Vee(this.userId,t)).next(r=>r?bV(this.serializer,r):null)}getOverlays(e,t){const r=Wl();return de.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new hV(t,o);i.push(this.ht(e,a))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Ls(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(xI(e).j("collectionPathOverlayIndex",a))}),de.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Wl(),s=Ls(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xI(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=bV(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Wl();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xI(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=bV(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}ht(e,t){return xI(e).put(function(i,s,o){const[a,l,c]=Vee(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:AI(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function xI(n){return Hi(n,"documentOverlays")}class TOe{Pt(e){return Hi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?oi.fromUint8Array(r):oi.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Zf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ur(e.integerValue));else if("doubleValue"in e){const r=Ur(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),cI(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=qc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Kc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?SJ(e)?this.dt(t,Number.MAX_SAFE_INTEGER):tx(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ot()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Ur(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Xe.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function AOe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function zee(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=AOe(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Zf.vt=new Zf;class SOe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=zee(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=zee(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class xOe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class DOe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class DI{constructor(){this.jt=new SOe,this.Ht=new xOe(this.jt),this.Jt=new DOe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Jf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Jf(this.indexId,this.documentKey,this.arrayValue,r)}}function xd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Hee(n.arrayValue,e.arrayValue),0!==t?t:(t=Hee(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function Hee(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class $ee{constructor(e){this.Xt=new nr((t,r)=>Sr.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ct(e.collectionGroup===this.collectionId),this.nn)return!1;const t=q2(e);if(void 0!==t&&!this.sn(t))return!1;const r=zf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new nr(Sr.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Hf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Hf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Hf(r.field,"asc"===r.dir?0:1)));return new h_(h_.UNKNOWN_ID,this.collectionId,t,f_.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Wee(n){var e,t;if(ct(n instanceof mn||n instanceof Qn),n instanceof mn){if(n instanceof UJ){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>mn.create(n.field,"==",s)))||[];return Qn.create(i,"or")}return n}const r=n.filters.map(i=>Wee(i));return Qn.create(r,n.op)}function ROe(n){if(0===n.getFilters().length)return[];const e=wV(Wee(n));return ct(Gee(e)),EV(e)||IV(e)?[e]:e.getFilters()}function EV(n){return n instanceof mn}function IV(n){return n instanceof Qn&&nV(n)}function Gee(n){return EV(n)||IV(n)||function(t){if(t instanceof Qn&&tV(t)){for(const r of t.getFilters())if(!EV(r)&&!IV(r))return!1;return!0}return!1}(n)}function wV(n){if(ct(n instanceof mn||n instanceof Qn),n instanceof mn)return n;if(1===n.filters.length)return wV(n.filters[0]);const e=n.filters.map(r=>wV(r));let t=Qn.create(e,n.op);return t=fx(t),Gee(t)?t:(ct(t instanceof Qn),ct(g_(t)),ct(t.filters.length>1),t.filters.reduce((r,i)=>CV(r,i)))}function CV(n,e){let t;return ct(n instanceof mn||n instanceof Qn),ct(e instanceof mn||e instanceof Qn),t=n instanceof mn?e instanceof mn?Qn.create([n,e],"and"):qee(n,e):e instanceof mn?qee(e,n):function(i,s){if(ct(i.filters.length>0&&s.filters.length>0),g_(i)&&g_(s))return LJ(i,s.getFilters());const o=tV(i)?i:s,a=tV(i)?s:i,l=o.filters.map(c=>CV(c,a));return Qn.create(l,"or")}(n,e),fx(t)}function qee(n,e){if(g_(e))return LJ(e,n.getFilters());{const t=e.filters.map(r=>CV(n,r));return Qn.create(t,"or")}}function fx(n){if(ct(n instanceof mn||n instanceof Qn),n instanceof mn)return n;const e=n.getFilters();if(1===e.length)return fx(e[0]);if(OJ(n))return n;const t=e.map(i=>fx(i)),r=[];return t.forEach(i=>{i instanceof mn?r.push(i):i instanceof Qn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Qn.create(r,n.op)}class MOe{constructor(){this.un=new TV}addToCollectionParentIndex(e,t){return this.un.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ta.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class TV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nr(pn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nr(pn.comparator)).toArray()}}const px=new Uint8Array(0);class POe{constructor(e,t){this.databaseId=t,this.cn=new TV,this.ln=new Yc(r=>Gf(r),(r,i)=>mI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Ls(i)};return Kee(e).put(s)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[iJ(t),""],!1,!0);return Kee(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Hl(o.parent))}return r})}addFieldIndex(e,t){const r=RI(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=S_(e);return s.next(a=>{o.put(Bee(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=RI(e),i=S_(e),s=A_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=RI(e),r=A_(e),i=S_(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return de.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new $ee(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=A_(e);let i=!0;const s=new Map;return de.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Yt();const a=[];return de.forEach(s,(l,c)=>{var Q;Le("IndexedDbIndexManager",`Using index ${Q=l,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(we=>`${we.fieldPath}:${we.kind}`).join(",")}`} to execute ${Gf(t)}`);const u=function(Q,we){const je=q2(we);if(void 0===je)return null;for(const $e of rx(Q,je.fieldPath))switch($e.op){case"array-contains-any":return $e.value.arrayValue.values||[];case"array-contains":return[$e.value]}return null}(c,l),h=function(Q,we){const je=new Map;for(const $e of zf(we))for(const H of rx(Q,$e.fieldPath))switch(H.op){case"==":case"in":je.set($e.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return je.set($e.fieldPath.canonicalString(),H.value),Array.from(je.values())}return null}(c,l),m=function(Q,we){const je=[];let $e=!0;for(const H of zf(we)){const L=0===H.kind?jJ(Q,H.fieldPath,Q.startAt):zJ(Q,H.fieldPath,Q.startAt);je.push(L.value),$e&&($e=L.inclusive)}return new Ad(je,$e)}(c,l),y=function(Q,we){const je=[];let $e=!0;for(const H of zf(we)){const L=0===H.kind?zJ(Q,H.fieldPath,Q.endAt):jJ(Q,H.fieldPath,Q.endAt);je.push(L.value),$e&&($e=L.inclusive)}return new Ad(je,$e)}(c,l),b=this.In(l,c,m),T=this.In(l,c,y),M=this.Tn(l,c,h),B=this.En(l.indexId,u,b,m.inclusive,T,y.inclusive,M);return de.forEach(B,V=>r.G(V,t.limit).next(Q=>{Q.forEach(we=>{const je=Xe.fromSegments(we.documentKey);o.has(je)||(o=o.add(je),a.push(je))})}))}).next(()=>a)}return de.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:ROe(Qn.create(e.filters,"and")).map(r=>iV(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let h=0;h<l;++h){const m=t?this.dn(t[h/c]):px,y=this.An(e,m,r[h%c],i),b=this.Rn(e,m,s[h%c],o),T=a.map(M=>this.An(e,m,M,!0));u.push(...this.createRange(y,b,T))}return u}An(e,t,r,i){const s=new Jf(e,Xe.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Jf(e,Xe.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new $ee(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return de.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new nr(Sr.comparator),u=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?u=!0:c=c.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new DI;for(const i of zf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);Zf.vt.It(s,o)}return r.zt()}dn(e){const t=new DI;return Zf.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new DI;return Zf.vt.It(Wf(this.databaseId,t),r.Yt(function(s){const o=zf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new DI);let s=0;for(const o of zf(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&hI(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);Zf.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new DI;l.seed(a.zt()),Zf.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof mn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=RI(e),i=S_(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return de.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const m=h?new f_(h.sequenceNumber,new ta(Yf(h.readTime),new Xe(Hl(h.documentKey)),h.largestBatchId)):f_.empty(),y=u.fields.map(([b,T])=>new Hf(Sr.fromServerFormat(b),T));return new h_(u.indexId,u.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=RI(e),s=S_(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>de.forEach(a,l=>s.put(Bee(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?de.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),de.forEach(a,l=>this.wn(e,i,l).next(c=>{const u=this.Sn(s,l);return c.isEqual(u)?de.resolve():this.bn(e,s,l,c,u)}))))})}Dn(e,t,r,i){return A_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return A_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=A_(e);let s=new nr(xd);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Jf(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new nr(xd);const i=this.Vn(t,e);if(null==i)return r;const s=q2(t);if(null!=s){const o=e.data.field(s.fieldPath);if(hI(o))for(const a of o.arrayValue.values||[])r=r.add(new Jf(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Jf(t.indexId,e.key,px,i));return r}bn(e,t,r,i,s){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,u,h,m){const y=l.getIterator(),b=c.getIterator();let T=p_(y),M=p_(b);for(;T||M;){let B=!1,V=!1;if(T&&M){const Q=u(T,M);Q<0?V=!0:Q>0&&(B=!0)}else null!=T?V=!0:B=!0;B?(h(M),M=p_(b)):V?(m(T),T=p_(y)):(T=p_(y),M=p_(b))}}(i,s,xd,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),de.waitFor(o)}yn(e){let t=1;return S_(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>xd(o,a)).filter((o,a,l)=>!a||0!==xd(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=xd(o,e),l=xd(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,px,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,px,[]]))}return s}Cn(e,t){return xd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Qee)}getMinOffset(e,t){return de.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ot())).next(Qee)}}function Kee(n){return Hi(n,"collectionParents")}function A_(n){return Hi(n,"indexEntries")}function RI(n){return Hi(n,"indexConfiguration")}function S_(n){return Hi(n,"indexState")}function Qee(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;K2(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ta(e.readTime,e.documentKey,t)}const Yee={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Xee(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(u,h,m)=>(a++,m.delete()));s.push(l.next(()=>{ct(1===a)}));const c=[];for(const u of t.mutations){const h=pJ(e,u.key.path,t.batchId);s.push(i.delete(h)),c.push(u.key)}return de.waitFor(s).next(()=>c)}function mx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class gx{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ct(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new gx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dd(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=x_(e),o=Dd(e);return o.add({}).next(a=>{ct("number"==typeof a);const l=new uV(a,t,r,i),c=function(y,b,T){const M=T.baseMutations.map(V=>AI(y.ct,V)),B=T.mutations.map(V=>AI(y.ct,V));return{userId:b,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:M,mutations:B}}(this.serializer,this.userId,l),u=[];let h=new nr((m,y)=>Ft(m.canonicalString(),y.canonicalString()));for(const m of i){const y=pJ(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),u.push(o.put(c)),u.push(s.put(y,vNe))}return h.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),de.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return Dd(e).get(t).next(r=>r?(ct(r.userId===this.userId),Xf(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?de.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Dd(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ct(a.batchId>=r),s=Xf(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Dd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dd(e).U("userMutationsIndex",t).next(r=>r.map(i=>Xf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=KS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return x_(e).J({range:i},(o,a,l)=>{const[c,u,h]=o,m=Hl(u);if(c===this.userId&&t.path.isEqual(m))return Dd(e).get(h).next(y=>{if(!y)throw ot();ct(y.userId===this.userId),s.push(Xf(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nr(Ft);const i=[];return t.forEach(s=>{const o=KS(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=x_(e).J({range:a},(c,u,h)=>{const[m,y,b]=c,T=Hl(y);m===this.userId&&s.path.isEqual(T)?r=r.add(b):h.done()});i.push(l)}),de.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=KS(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new nr(Ft);return x_(e).J({range:o},(l,c,u)=>{const[h,m,y]=l,b=Hl(m);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):u.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Dd(e).get(s).next(o=>{if(null===o)throw ot();ct(o.userId===this.userId),r.push(Xf(this.serializer,o))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Xee(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return x_(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Hl(s[1]);i.push(l)}else a.done()}).next(()=>{ct(0===i.length)})})}containsKey(e,t){return Zee(e,this.userId,t)}Nn(e){return Jee(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Zee(n,e,t){const r=KS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return x_(n).J({range:s,H:!0},(a,l,c)=>{const[u,h,m]=a;u===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function Dd(n){return Hi(n,"mutations")}function x_(n){return Hi(n,"documentMutations")}function Jee(n){return Hi(n,"mutationQueues")}class ep{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ep(0)}static kn(){return new ep(-1)}}class kOe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new ep(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ft.fromTimestamp(new Br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>D_(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return D_(e).J((o,a)=>{const l=SI(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>de.waitFor(s)).next(()=>i)}forEachTarget(e,t){return D_(e).J((r,i)=>{const s=SI(i);t(s)})}qn(e){return ete(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}Qn(e,t){return ete(e).put("targetGlobalKey",t)}Kn(e,t){return D_(e).put(Lee(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Gf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return D_(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=SI(a);mI(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Rd(e);return t.forEach(o=>{const a=Ls(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=Rd(e);return de.forEach(t,s=>{const o=Ls(s.path);return de.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Rd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Rd(e);let s=Yt();return i.J({range:r,H:!0},(o,a,l)=>{const c=Hl(o[1]),u=new Xe(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const r=Ls(t.path),i=IDBKeyRange.bound([r],[iJ(r)],!1,!0);let s=0;return Rd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return D_(e).get(t).next(r=>r?SI(r):null)}}function D_(n){return Hi(n,"targets")}function ete(n){return Hi(n,"targetGlobal")}function Rd(n){return Hi(n,"targetDocuments")}function tte([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class NOe{constructor(e){this.Un=e,this.buffer=new nr(tte),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tte(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nte{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,O.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bd(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield vd(r)}yield t.Hn(3e5)}))}}class OOe{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(na.oe);const r=new NOe(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Yee)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yee):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),u_()<=xo.$b.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${h} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}class FOe{constructor(e,t){this.db=e,this.garbageCollector=function rte(n,e){return new OOe(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return _x(e,r)}removeReference(e,t,r){return _x(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _x(e,t)}nr(e,t){return function(i,s){let o=!1;return Jee(i).Y(a=>Zee(i,a,s).next(l=>(l&&(o=!0),de.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ft.min()),Rd(e).delete([0,Ls(o.path)])))});i.push(l)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _x(e,t)}tr(e,t){const r=Rd(e);let i,s=na.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==na.oe&&t(new Xe(Hl(i)),s),s=c,i=l):s=na.oe}).next(()=>{s!==na.oe&&t(new Xe(Hl(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _x(n,e){return Rd(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ls(e.path),sequenceNumber:i}));var i}class ite{constructor(){this.changes=new Yc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LOe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return tp(e).put(r)}removeEntry(e,t,r){return tp(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dx(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=xr.newInvalidDocument(t);return tp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(MI(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:xr.newInvalidDocument(t)};return tp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(MI(t))},(i,s)=>{r={document:this.ir(t,s),size:mx(s)}}).next(()=>r)}getEntries(e,t){let r=Po();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Po(),i=new yr(Xe.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,mx(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return de.resolve();let i=new nr(lte);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(MI(i.first()),MI(i.last())),o=i.getIterator();let a=o.getNext();return tp(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=Xe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&lte(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(MI(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),dx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tp(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=Po();for(const h of c){const m=this.ir(Xe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(_I(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let s=Po();const o=ate(t,r),a=ate(t,ta.max());return tp(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.ir(Xe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new VOe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ote(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}rr(e,t){return ote(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function wOe(n,e){let t;if(e.document)t=xee(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Yf(e.noDocument.readTime);t=xr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=Xe.fromSegments(e.unknownDocument.path),i=Yf(e.unknownDocument.version);t=xr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Br(i[0],i[1]);return ft.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ft.min()))return r}return xr.newInvalidDocument(e)}}function ste(n){return new LOe(n)}class VOe extends ite{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Yc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new nr((s,o)=>Ft(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=Fee(this.cr.serializer,o);i=i.add(s.path.popLast());const c=mx(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=Fee(this.cr.serializer,o.convertToNoDocument(ft.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function ote(n){return Hi(n,"remoteDocumentGlobal")}function tp(n){return Hi(n,"remoteDocumentsV14")}function MI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ate(n,e){const t=e.documentKey.path.toArray();return[n,dx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lte(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ft(t[s],r[s]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class BOe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cte{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&EI(r.mutation,i,Mo.empty(),Br.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Wl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=yI();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Wl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Po();const o=vI(),a=vI();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof Xc)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),EI(u.mutation,c,u.mutation.getFieldMask(),Br.now())):o.set(c.key,Mo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var h;return a.set(c,new BOe(u,null!==(h=o.get(c))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=vI();let i=new yr((o,a)=>o-a),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||Mo.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Yt()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=ZJ();u.forEach(m=>{if(!s.has(m)){const y=oee(t.get(m),r.get(m));null!==y&&h.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return de.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Xe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):sV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):de.resolve(Wl());let a=-1,l=s;return o.next(c=>de.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?de.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Yt())).next(u=>({batchId:a,changes:XJ(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=yI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=yI();return this.indexManager.getCollectionParents(e,s).next(a=>de.forEach(a,l=>{const c=(h=t,m=l.child(s),new Qc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,m;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,xr.newInvalidDocument(u)))});let a=yI();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&EI(u.mutation,c,Mo.empty(),Br.now()),_I(t,c)&&(a=a.insert(l,c))}),a})}}class UOe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return de.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:bi(i.createTime)}),de.resolve();var i}getNamedQuery(e,t){return de.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:vV(i.bundledQuery),readTime:bi(i.readTime)}),de.resolve();var i}}class jOe{constructor(){this.overlays=new yr(Xe.comparator),this.Ir=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Wl();return de.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=Wl(),s=t.length+1,o=new Xe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new yr((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=Wl(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Wl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return de.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hV(t,r));let s=this.Ir.get(t);void 0===s&&(s=Yt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class zOe{constructor(){this.sessionToken=oi.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}class AV{constructor(){this.Tr=new nr(ns.Er),this.dr=new nr(ns.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new ns(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ns(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Xe(new pn([])),r=new ns(t,e),i=new ns(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Xe(new pn([])),r=new ns(t,e),i=new ns(t,e+1);let s=Yt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ns(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ns{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Xe.comparator(e.key,t.key)||Ft(e.wr,t.wr)}static Ar(e,t){return Ft(e.wr,t.wr)||Xe.comparator(e.key,t.key)}}class HOe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new nr(ns.Er)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new uV(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ns(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,t){return de.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ns(t,0),i=new ns(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nr(Ft);return t.forEach(i=>{const s=new ns(i,0),o=new ns(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),de.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Xe.isDocumentKey(s)||(s=s.child(""));const o=new ns(new Xe(s),0);let a=new nr(Ft);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),de.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ct(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return de.forEach(t.mutations,i=>{const s=new ns(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new ns(t,0),i=this.br.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $Oe{constructor(e){this.Mr=e,this.docs=new yr(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():xr.newInvalidDocument(t))}getEntries(e,t){let r=Po();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xr.newInvalidDocument(i))}),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Po();const o=t.path,a=new Xe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||K2(oJ(u),r)<=0||(i.has(u.key)||_I(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ot()}Or(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WOe(this)}getSize(e){return de.resolve(this.size)}}class WOe extends ite{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class GOe{constructor(e){this.persistence=e,this.Nr=new Yc(t=>Gf(t),mI),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.Lr=0,this.Br=new AV,this.targetCount=0,this.kr=ep.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),de.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ep(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Kn(t),de.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),de.waitFor(s).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Br.containsKey(t))}}class SV{constructor(e,t){this.qr={},this.overlays={},this.Qr=new na(0),this.Kr=!1,this.Kr=!0,this.$r=new zOe,this.referenceDelegate=e(this),this.Ur=new GOe(this),this.indexManager=new MOe,this.remoteDocumentCache=new $Oe(r=>this.referenceDelegate.Wr(r)),this.serializer=new Oee(t),this.Gr=new UOe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jOe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new HOe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new qOe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return de.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class qOe extends lJ{constructor(e){super(),this.currentSequenceNumber=e}}class yx{constructor(e){this.persistence=e,this.Jr=new AV,this.Yr=null}static Zr(e){return new yx(e)}get Xr(){if(this.Yr)return this.Yr;throw ot()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),de.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xr,r=>{const i=Xe.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ft.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return de.or([()=>de.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class KOe{constructor(e){this.serializer=e}O(e,t,r,i){const s=new qS("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fJ,{unique:!0}),l.createObjectStore("documentMutations"),ute(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=de.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),ute(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fJ,{unique:!0});const h=c.store("mutations"),m=u.map(y=>h.put(y));return de.waitFor(m)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:MNe});c.createIndex("collectionPathOverlayIndex",PNe,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",kNe,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:bNe});c.createIndex("documentKeyIndex",ENe),c.createIndex("collectionGroupIndex",INe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:SNe}).createIndex("sequenceNumberIndex",xNe,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:DNe}).createIndex("documentKeyIndex",RNe,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(l){l.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=mx(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>de.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>de.forEach(a,l=>{ct(l.userId===s.userId);const c=Xf(this.serializer,l);return Xee(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new pn(o),c=[0,Ls(l)];s.push(t.get(c).next(u=>u?de.resolve():t.put({targetId:0,path:Ls(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:ANe});const r=t.store("collectionParents"),i=new TV,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Ls(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new pn(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=Hl(a);return s(u.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=SI(i),o=Lee(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(h=o,h.document?new Xe(pn.fromString(h.document.name).popFirst(5)):h.noDocument?Xe.fromSegments(h.noDocument.path):h.unknownDocument?Xe.fromSegments(h.unknownDocument.path):ot()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var h;i.push(a.put(c))}).next(()=>de.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=ste(this.serializer),s=new SV(yx.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Yt();Xf(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),de.forEach(a,(l,c)=>{const u=new es(c),h=hx.lt(this.serializer,u),m=s.getIndexManager(u),y=gx.lt(u,this.serializer,m,s.referenceDelegate);return new cte(i,y,h,m).recalculateAndSaveOverlaysForDocumentKeys(new Z2(t,na.oe),l).next()})})}}function ute(n){n.createObjectStore("targetDocuments",{keyPath:CNe}).createIndex("documentTargetsIndex",TNe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wNe,{unique:!0}),n.createObjectStore("targetGlobal")}const xV="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DV{constructor(e,t,r,i,s,o,a,l,c,u,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!DV.D())throw new Ne(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FOe(this,i),this.Ai=t+"main",this.serializer=new Oee(l),this.Ri=new zl(this.Ai,this.hi,new KOe(this.serializer)),this.$r=new TOe,this.Ur=new kOe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ste(this.serializer),this.Gr=new COe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===u&&vi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(Ie.FAILED_PRECONDITION,xV);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new na(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,O.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,O.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,O.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(bd(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return PI(e).get("owner").next(t=>de.resolve(this.vi(t)))}Ci(e){return bx(e).delete(this.clientId)}Fi(){var e=this;return(0,O.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Hi(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return de.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?de.resolve(!0):PI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Ne(Ie.FAILED_PRECONDITION,xV);return!1}}return!(!this.networkEnabled||!this.inForeground)||bx(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,O.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Z2(t,na.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>bx(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return gx.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new POe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hx.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(l=this.hi)?FNe:16===l?ONe:15===l?X2:14===l?_J:13===l?gJ:12===l?NNe:11===l?mJ:void ot();var l;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new Z2(a,this.Qr?this.Qr.next():na.oe),"readwrite-primary"===t?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw vi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ne(Ie.FAILED_PRECONDITION,aJ);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return PI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(Ie.FAILED_PRECONDITION,xV)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return PI(e).put("owner",t)}static D(){return zl.D()}bi(e){const t=PI(e);return t.get("owner").next(r=>this.vi(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vi(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,k.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){vi("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function PI(n){return Hi(n,"owner")}function bx(n){return Hi(n,"clientMetadata")}function RV(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class MV{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Yt(),i=Yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new MV(e,t.fromCache,r,i)}}class QOe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class dte{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,k.nr)()?8:cJ((0,k.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new QOe;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(u_()<=xo.$b.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",v_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),de.resolve()):(u_()<=xo.$b.DEBUG&&Le("QueryEngine","Query:",v_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(u_()<=xo.$b.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",v_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(t))):de.resolve())}Yi(e,t){if($J(t))return de.resolve(null);let r=Vs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ix(t,null,"F"),r=Vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Yt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,ix(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return $J(t)||i.isEqual(ft.min())?de.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?de.resolve(null):(u_()<=xo.$b.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),v_(t)),this.rs(e,o,t,sJ(i,-1)).next(a=>a))})}ts(e,t){let r=new nr(QJ(e));return t.forEach((i,s)=>{_I(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return u_()<=xo.$b.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",v_(t)),this.Ji.getDocumentsMatchingQuery(e,t,ta.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class YOe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new yr(Ft),this._s=new Yc(s=>Gf(s),mI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cte(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function hte(n,e,t,r){return new YOe(n,e,t,r)}function fte(n,e){return PV.apply(this,arguments)}function PV(){return(PV=(0,O.A)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Yt();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function pte(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function mte(n,e,t){let r=Yt(),i=Yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Po();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ft.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function JOe(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R_(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,de.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Zc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function M_(n,e,t){return kV.apply(this,arguments)}function kV(){return(kV=(0,O.A)(function*(n,e,t){const r=Ke(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!bd(o))throw o;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function Ex(n,e,t){const r=Ke(n);let i=ft.min(),s=Yt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Ke(l),m=h._s.get(u);return void 0!==m?de.resolve(h.os.get(m)):h.Ur.getTargetData(c,u)}(r,o,Vs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ft.min(),t?s:Yt())).next(a=>(yte(r,KJ(e),a),{documents:a,Ts:s})))}function gte(n,e){const t=Ke(n),r=Ke(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function _te(n,e){const t=Ke(n),r=t.us.get(e)||ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,sJ(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(yte(t,e,i),i))}function yte(n,e,t){let r=n.us.get(e)||ft.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function NV(){return(NV=(0,O.A)(function*(n,e,t,r){const i=Ke(n);let s=Yt(),o=Po();for(const c of t){const u=e.Es(c.metadata.name);c.document&&(s=s.add(u));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(u,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=yield R_(i,(u=r,Vs(__(pn.fromString(`__bundle__/docs/${u}`)))));var u;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>mte(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))})).apply(this,arguments)}function tFe(n,e){return OV.apply(this,arguments)}function OV(){return(OV=(0,O.A)(function*(n,e,t=Yt()){const r=yield R_(n,Vs(vV(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=bi(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(oi.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function vte(n,e){return`firestore_clients_${n}_${e}`}function bte(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function FV(n,e){return`firestore_targets_${n}_${e}`}class Ix{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Ne(i.error.code,i.error.message))),o?new Ix(e,t,i.state,s):(vi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ne(r.error.code,r.error.message))),s?new kI(e,r.state,i):(vi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=aV();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=dJ(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new wx(e,s):(vi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class LV{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new LV(t.clientId,t.onlineState):(vi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class VV{constructor(){this.activeTargetIds=aV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BV{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new yr(Ft),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=vte(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new VV),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,O.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(vte(e.persistenceKey,i));if(s){const o=wx.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(FV(this.persistenceKey,e));if(i){const s=kI.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(FV(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void vi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,O.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=na.oe;if(null!=o)try{const l=JSON.parse(o);ct("number"==typeof l),a=l}catch(l){vi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==na.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Ix(this.currentUser,e,t,r),s=bte(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=bte(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=FV(this.persistenceKey,e),s=new kI(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return wx.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return Ix.Rs(new es(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return kI.Rs(i,t)}Ls(e){return LV.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,O.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=aV();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Ete{constructor(){this.so=new VV,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new VV,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nFe{_o(e){}shutdown(){}}class Ite{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cx=null;function UV(){return null===Cx?Cx=268435456+Math.round(2147483648*Math.random()):Cx++,"0x"+Cx.toString(16)}const rFe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iFe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Us="WebChannelConnection";class sFe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=UV(),l=this.xo(t,r.toUriEncodedString());Le("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(u=>(Le("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw ea("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+c_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${rFe[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=UV();return new Promise((o,a)=>{const l=new QZ;l.setWithCredentials(!0),l.listenOnce(YZ.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case GS.NO_ERROR:const u=l.getResponseJson();Le(Us,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case GS.TIMEOUT:Le(Us,`RPC '${e}' ${s} timed out`),a(new Ne(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case GS.HTTP_ERROR:const h=l.getStatus();if(Le(Us,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const b=function(M){const B=M.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(B)>=0?B:Ie.UNKNOWN}(y.status);a(new Ne(b,y.message))}else a(new Ne(Ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ne(Ie.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Le(Us,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Le(Us,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=UV(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=JZ(),a=ZZ(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");Le(Us,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let m=!1,y=!1;const b=new iFe({Io:M=>{y?Le(Us,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(Le(Us,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),Le(Us,`RPC '${e}' stream ${i} sending:`,M),h.send(M))},To:()=>h.close()}),T=(M,B,V)=>{M.listen(B,Q=>{try{V(Q)}catch(we){setTimeout(()=>{throw we},0)}})};return T(h,sI.EventType.OPEN,()=>{y||(Le(Us,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),T(h,sI.EventType.CLOSE,()=>{y||(y=!0,Le(Us,`RPC '${e}' stream ${i} transport closed`),b.So())}),T(h,sI.EventType.ERROR,M=>{y||(y=!0,ea(Us,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new Ne(Ie.UNAVAILABLE,"The operation could not be completed")))}),T(h,sI.EventType.MESSAGE,M=>{var B;if(!y){const V=M.data[0];ct(!!V);const we=V.error||(null===(B=V[0])||void 0===B?void 0:B.error);if(we){Le(Us,`RPC '${e}' stream ${i} received error:`,we);const je=we.status;let $e=function(W){const J=Di[W];if(void 0!==J)return fee(J)}(je),H=we.message;void 0===$e&&($e=Ie.INTERNAL,H="Unknown error status: "+je+" with message "+we.message),y=!0,b.So(new Ne($e,H)),h.close()}else Le(Us,`RPC '${e}' stream ${i} received:`,V),b.bo(V)}}),T(a,XZ.STAT_EVENT,M=>{M.stat===W2.PROXY?Le(Us,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===W2.NOPROXY&&Le(Us,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function wte(){return typeof window<"u"?window:null}function Tx(){return typeof document<"u"?document:null}function NI(n){return new fOe(n,!0)}class jV{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Cte{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jV(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,O.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,O.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,O.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(vi(t.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===Ie.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Ne(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,O.A)(function*(){e.state=0,e.start()}))}I_(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oFe extends Cte{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function gOe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:ot(),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(ct(void 0===u||"string"==typeof u),oi.fromBase64String(u||"")):(ct(void 0===u||u instanceof Buffer||u instanceof Uint8Array),oi.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?Ie.UNKNOWN:fee(c.code);return new Ne(u,c.message||"")}(o);t=new yee(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Gl(n,r.document.name),s=bi(r.document.updateTime),o=r.document.createTime?bi(r.document.createTime):ft.min(),a=new fs({mapValue:{fields:r.document.fields}}),l=xr.newFoundDocument(i,s,o,a);t=new cx(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Gl(n,r.document),s=r.readTime?bi(r.readTime):ft.min(),o=xr.newNoDocument(i,s);t=new cx([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Gl(n,r.document);t=new cx([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ot();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new aOe(i,s);t=new _ee(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ft.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ft.min():o.readTime?bi(o.readTime):ft.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=_V(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=nx(l)?{documents:Dee(s,l)}:{query:ux(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Iee(s,o.resumeToken);const c=pV(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ft.min())>0){a.readTime=C_(s,o.snapshotVersion.toTimestamp());const c=pV(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function yOe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=_V(this.serializer),t.removeTarget=e,this.a_(t)}}class aFe extends Cte{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ct(!!e.streamToken),this.lastStreamToken=e.streamToken,ct(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function _Oe(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(i,s){let o=bi(i.updateTime?i.updateTime:s);return o.isEqual(ft.min())&&(o=bi(s)),new iOe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=bi(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=_V(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>AI(this.serializer,r))};this.a_(t)}}class lFe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ne(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,gV(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(Ie.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,gV(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(Ie.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class cFe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vi(t),this.D_=!1):Le("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class uFe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,O.A)(function*(){var l;Md(o)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,O.A)(function*(u){const h=Ke(u);h.L_.add(4),yield P_(h),h.q_.set("Unknown"),h.L_.delete(4),yield OI(h)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.q_=new cFe(r,i)}}function OI(n){return zV.apply(this,arguments)}function zV(){return(zV=(0,O.A)(function*(n){if(Md(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function P_(n){return HV.apply(this,arguments)}function HV(){return(HV=(0,O.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Ax(n,e){const t=Ke(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),GV(t)?WV(t):O_(t).r_()&&$V(t,e))}function k_(n,e){const t=Ke(n),r=O_(t);t.N_.delete(e),r.r_()&&Tte(t,e),0===t.N_.size&&(r.r_()?r.o_():Md(t)&&t.q_.set("Unknown"))}function $V(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}O_(n).A_(e)}function Tte(n,e){n.Q_.xe(e),O_(n).R_(e)}function WV(n){n.Q_=new cOe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),O_(n).start(),n.q_.v_()}function GV(n){return Md(n)&&!O_(n).n_()&&n.N_.size>0}function Md(n){return 0===Ke(n).L_.size}function Ate(n){n.Q_=void 0}function dFe(n){return qV.apply(this,arguments)}function qV(){return(qV=(0,O.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function hFe(n){return KV.apply(this,arguments)}function KV(){return(KV=(0,O.A)(function*(n){n.N_.forEach((e,t)=>{$V(n,e)})})).apply(this,arguments)}function fFe(n,e){return QV.apply(this,arguments)}function QV(){return(QV=(0,O.A)(function*(n,e){Ate(n),GV(n)?(n.q_.M_(e),WV(n)):n.q_.set("Unknown")})).apply(this,arguments)}function pFe(n,e,t){return YV.apply(this,arguments)}function YV(){return YV=(0,O.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof yee&&2===e.state&&e.cause)try{yield(r=(0,O.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sx(n,r)}else if(e instanceof cx?n.Q_.Ke(e):e instanceof _ee?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ft.min()))try{const r=yield pte(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(oi.EMPTY_BYTE_STRING,u.snapshotVersion)),Tte(s,l);const h=new Zc(u.target,l,c,u.sequenceNumber);$V(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield Sx(n,r)}var r}),YV.apply(this,arguments)}function Sx(n,e,t){return XV.apply(this,arguments)}function XV(){return(XV=(0,O.A)(function*(n,e,t){if(!bd(e))throw e;n.L_.add(1),yield P_(n),n.q_.set("Offline"),t||(t=()=>pte(n.localStore)),n.asyncQueue.enqueueRetryable((0,O.A)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield OI(n)}))})).apply(this,arguments)}function Ste(n,e){return e().catch(t=>Sx(n,t,e))}function N_(n){return ZV.apply(this,arguments)}function ZV(){return(ZV=(0,O.A)(function*(n){const e=Ke(n),t=Pd(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mFe(e);)try{const i=yield JOe(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,gFe(e,i)}catch(i){yield Sx(e,i)}xte(e)&&Dte(e)})).apply(this,arguments)}function mFe(n){return Md(n)&&n.O_.length<10}function gFe(n,e){n.O_.push(e);const t=Pd(n);t.r_()&&t.V_&&t.m_(e.mutations)}function xte(n){return Md(n)&&!Pd(n).n_()&&n.O_.length>0}function Dte(n){Pd(n).start()}function _Fe(n){return JV.apply(this,arguments)}function JV(){return(JV=(0,O.A)(function*(n){Pd(n).p_()})).apply(this,arguments)}function yFe(n){return eB.apply(this,arguments)}function eB(){return(eB=(0,O.A)(function*(n){const e=Pd(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function vFe(n,e,t){return tB.apply(this,arguments)}function tB(){return(tB=(0,O.A)(function*(n,e,t){const r=n.O_.shift(),i=dV.from(r,e,t);yield Ste(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield N_(n)})).apply(this,arguments)}function bFe(n,e){return nB.apply(this,arguments)}function nB(){return nB=(0,O.A)(function*(n,e){var t;e&&Pd(n).V_&&(yield(t=(0,O.A)(function*(i,s){if(hee(a=s.code)&&a!==Ie.ABORTED){const o=i.O_.shift();Pd(i).s_(),yield Ste(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield N_(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),xte(n)&&Dte(n)}),nB.apply(this,arguments)}function Rte(n,e){return rB.apply(this,arguments)}function rB(){return(rB=(0,O.A)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=Md(t);t.L_.add(3),yield P_(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield OI(t)})).apply(this,arguments)}function iB(n,e){return sB.apply(this,arguments)}function sB(){return(sB=(0,O.A)(function*(n,e){const t=Ke(n);e?(t.L_.delete(2),yield OI(t)):e||(t.L_.add(2),yield P_(t),t.q_.set("Unknown"))})).apply(this,arguments)}function O_(n){return n.K_||(n.K_=function(t,r,i){const s=Ke(t);return s.w_(),new oFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:dFe.bind(null,n),Ro:hFe.bind(null,n),mo:fFe.bind(null,n),d_:pFe.bind(null,n)}),n.B_.push(function(){var e=(0,O.A)(function*(t){t?(n.K_.s_(),GV(n)?WV(n):n.q_.set("Unknown")):(yield n.K_.stop(),Ate(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Pd(n){return n.U_||(n.U_=function(t,r,i){const s=Ke(t);return s.w_(),new aFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_Fe.bind(null,n),mo:bFe.bind(null,n),f_:yFe.bind(null,n),g_:vFe.bind(null,n)}),n.B_.push(function(){var e=(0,O.A)(function*(t){t?(n.U_.s_(),yield N_(n)):(yield n.U_.stop(),n.O_.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class oB{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new oB(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F_(n,e){if(vi("AsyncQueue",`${e}: ${n}`),bd(n))return new Ne(Ie.UNAVAILABLE,`${e}: ${n}`);throw n}class L_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=yI(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new L_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof L_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new L_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Mte{constructor(){this.W_=new yr(Xe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ot():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class V_{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new V_(e,t,L_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class EFe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class IFe{constructor(){this.queries=Pte(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ke(t),s=i.queries;i.queries=Pte(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})}(this,new Ne(Ie.ABORTED,"Firestore shutting down"))}}function Pte(){return new Yc(n=>qJ(n),gI)}function aB(n,e){return lB.apply(this,arguments)}function lB(){return(lB=(0,O.A)(function*(n,e){const t=Ke(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new EFe,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=F_(o,`Initialization of query '${v_(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&dB(t)})).apply(this,arguments)}function cB(n,e){return uB.apply(this,arguments)}function uB(){return(uB=(0,O.A)(function*(n,e){const t=Ke(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function wFe(n,e){const t=Ke(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&dB(t)}function CFe(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function dB(n){n.Y_.forEach(e=>{e.next()})}var hB,kte;(kte=hB||(hB={})).ea="default",kte.Cache="cache";class fB{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new V_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=V_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hB.Cache}}class TFe{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class Nte{constructor(e){this.serializer=e}Es(e){return Gl(this.serializer,e)}ds(e){return e.metadata.exists?xee(this.serializer,e.document,!1):xr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return bi(e)}}class AFe{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ote(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=pn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new Nte(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Yt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,O.A)(function*(){const t=yield function eFe(n,e,t,r){return NV.apply(this,arguments)}(e.localStore,new Nte(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield tFe(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function Ote(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Fte{constructor(e){this.key=e}}class Lte{constructor(e){this.key=e}}class Vte{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Yt(),this.mutatedKeys=Yt(),this.Aa=QJ(e),this.Ra=new L_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Mte,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const m=i.get(u),y=_I(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?b!==T&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(l||c)&&(a=!0)),M&&(y?(o=o.add(y),s=T?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,h)=>function(y,b){const T=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return T(y)-T(b)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],l=0===this.da.size&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,0!==o.length||c?{snapshot:new V_(this.query,e.Ra,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mte,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Yt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Lte(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Fte(r))}),t}ba(e){this.Ta=e.Ts,this.da=Yt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return V_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class SFe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xFe{constructor(e){this.key=e,this.va=!1}}class DFe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Yc(a=>qJ(a),gI),this.Ma=new Map,this.xa=new Set,this.Oa=new yr(Xe.comparator),this.Na=new Map,this.La=new AV,this.Ba={},this.ka=new Map,this.qa=ep.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function RFe(n,e){return pB.apply(this,arguments)}function pB(){return(pB=(0,O.A)(function*(n,e,t=!0){const r=xx(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Bte(r,e,t,!0),i})).apply(this,arguments)}function MFe(n,e){return mB.apply(this,arguments)}function mB(){return(mB=(0,O.A)(function*(n,e){const t=xx(n);yield Bte(t,e,!0,!1)})).apply(this,arguments)}function Bte(n,e,t,r){return gB.apply(this,arguments)}function gB(){return(gB=(0,O.A)(function*(n,e,t,r){const i=yield R_(n.localStore,Vs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield _B(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Ax(n.remoteStore,i),a})).apply(this,arguments)}function _B(n,e,t,r,i){return yB.apply(this,arguments)}function yB(){return yB=(0,O.A)(function*(n,e,t,r,i){n.Ka=(h,m,y)=>{return(b=(0,O.A)(function*(M,B,V,Q){let we=B.view.ma(V);we.ns&&(we=yield Ex(M.localStore,B.query,!1).then(({documents:L})=>B.view.ma(L,we)));const je=Q&&Q.targetChanges.get(B.targetId),$e=Q&&null!=Q.targetMismatches.get(B.targetId),H=B.view.applyChanges(we,M.isPrimaryClient,je,$e);return DB(M,B.targetId,H.wa),H.snapshot}),function T(M,B,V,Q){return b.apply(this,arguments)})(n,h,m,y);var b};const s=yield Ex(n.localStore,e,!0),o=new Vte(e,s.Ts),a=o.ma(s.documents),l=CI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);DB(n,t,c.wa);const u=new SFe(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),yB.apply(this,arguments)}function PFe(n,e,t){return vB.apply(this,arguments)}function vB(){return(vB=(0,O.A)(function*(n,e,t){const r=Ke(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!gI(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield M_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&k_(r.remoteStore,i.targetId),B_(r,i.targetId)}).catch(vd))):(B_(r,i.targetId),yield M_(r.localStore,i.targetId,!0))})).apply(this,arguments)}function kFe(n,e){return bB.apply(this,arguments)}function bB(){return(bB=(0,O.A)(function*(n,e){const t=Ke(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),k_(t.remoteStore,r.targetId))})).apply(this,arguments)}function EB(){return(EB=(0,O.A)(function*(n,e,t){const r=UB(n);try{const i=yield function(o,a){const l=Ke(o),c=Br.now(),u=a.reduce((y,b)=>y.add(b.key),Yt());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Po(),T=Yt();return l.cs.getEntries(y,u).next(M=>{b=M,b.forEach((B,V)=>{V.isValidDocument()||(T=T.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(M=>{h=M;const B=[];for(const V of a){const Q=oOe(V,h.get(V.key).overlayedDocument);null!=Q&&B.push(new Xc(V.key,Q,MJ(Q.value.mapValue),jr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,B,a)}).next(M=>{m=M;const B=M.applyToLocalDocumentSet(h,T);return l.documentOverlayCache.saveOverlays(y,M.batchId,B)})}).then(()=>({batchId:m.batchId,changes:XJ(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new yr(Ft)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),yield Jc(r,i.changes),yield N_(r.remoteStore)}catch(i){const s=F_(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function Ute(n,e){return IB.apply(this,arguments)}function IB(){return(IB=(0,O.A)(function*(n,e){const t=Ke(n);try{const r=yield function ZOe(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((u,h)=>{const m=i.get(h);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,h)));let y=m.withSequenceNumber(s.currentSequenceNumber);var T,M,B;null!==e.targetMismatches.get(h)?y=y.withResumeToken(oi.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,r)),i=i.insert(h,y),M=y,B=u,(0===(T=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,y))});let l=Po(),c=Yt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(mte(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(ft.min())){const u=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return de.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ct(o.va):i.removedDocuments.size>0&&(ct(o.va),o.va=!1))}),yield Jc(t,r,e)}catch(r){yield vd(r)}})).apply(this,arguments)}function jte(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ke(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const m of h.j_)m.Z_(a)&&(c=!0)}),c&&dB(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OFe(n,e,t){return wB.apply(this,arguments)}function wB(){return(wB=(0,O.A)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new yr(Xe.comparator);o=o.insert(s,xr.newNoDocument(s,ft.min()));const a=Yt().add(s),l=new wI(ft.min(),new Map,new yr(Ft),o,a);yield Ute(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),RB(r)}else yield M_(r.localStore,e,!1).then(()=>B_(r,e,t)).catch(vd)})).apply(this,arguments)}function FFe(n,e){return CB.apply(this,arguments)}function CB(){return(CB=(0,O.A)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield function XOe(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,m=h.keys();let y=de.resolve();return m.forEach(b=>{y=y.next(()=>u.getEntry(l,b)).next(T=>{const M=c.docVersions.get(b);ct(null!==M),T.version.compareTo(M)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),u.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Yt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);xB(t,r,null),SB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jc(t,i)}catch(i){yield vd(i)}})).apply(this,arguments)}function LFe(n,e,t){return TB.apply(this,arguments)}function TB(){return(TB=(0,O.A)(function*(n,e,t){const r=Ke(n);try{const i=yield function(o,a){const l=Ke(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ct(null!==h),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);xB(r,e,t),SB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jc(r,i)}catch(i){yield vd(i)}})).apply(this,arguments)}function AB(){return(AB=(0,O.A)(function*(n,e){const t=Ke(n);Md(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ke(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=F_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function SB(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function xB(n,e,t){const r=Ke(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function B_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||zte(n,r)})}function zte(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(k_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),RB(n))}function DB(n,e,t){for(const r of t)r instanceof Fte?(n.La.addReference(r.key,e),BFe(n,r)):r instanceof Lte?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||zte(n,r.key)):ot()}function BFe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.xa.add(r),RB(n))}function RB(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Xe(pn.fromString(e)),r=n.qa.next();n.Na.set(r,new xFe(t)),n.Oa=n.Oa.insert(t,r),Ax(n.remoteStore,new Zc(Vs(__(t.path)),r,"TargetPurposeLimboResolution",na.oe))}}function Jc(n,e,t){return MB.apply(this,arguments)}function MB(){return MB=(0,O.A)(function*(n,e,t){const r=Ke(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:null===(u=t?.targetChanges.get(l.targetId))||void 0===u?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=MV.Wi(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,O.A)(function*(c,u){const h=Ke(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>de.forEach(u,y=>de.forEach(y.$i,b=>h.persistence.referenceDelegate.addReference(m,y.targetId,b)).next(()=>de.forEach(y.Ui,b=>h.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))}catch(m){if(!bd(m))throw m;Le("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const y=m.targetId;if(!m.fromCache){const b=h.os.get(y),M=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);h.os=h.os.insert(y,M)}}}),function l(c,u){return a.apply(this,arguments)})(r.localStore,s))}),MB.apply(this,arguments)}function UFe(n,e){return PB.apply(this,arguments)}function PB(){return(PB=(0,O.A)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield fte(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(l=>{l.reject(new Ne(Ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jc(t,r.hs)}var s})).apply(this,arguments)}function jFe(n,e){const t=Ke(n),r=t.Na.get(e);if(r&&r.va)return Yt().add(r.key);{let i=Yt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function zFe(n,e){return kB.apply(this,arguments)}function kB(){return(kB=(0,O.A)(function*(n,e){const t=Ke(n),r=yield Ex(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&DB(t,e.targetId,i.wa),i})).apply(this,arguments)}function HFe(n,e){return NB.apply(this,arguments)}function NB(){return(NB=(0,O.A)(function*(n,e){const t=Ke(n);return _te(t.localStore,e).then(r=>Jc(t,r))})).apply(this,arguments)}function $Fe(n,e,t,r){return OB.apply(this,arguments)}function OB(){return(OB=(0,O.A)(function*(n,e,t,r){const i=Ke(n),s=yield function(a,l){const c=Ke(a),u=Ke(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Mn(h,l).next(m=>m?c.localDocuments.getDocuments(h,m):de.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield N_(i.remoteStore):"acknowledged"===t||"rejected"===t?(xB(i,e,r||null),SB(i,e),l=e,Ke(Ke(i.localStore).mutationQueue).On(l)):ot(),yield Jc(i,s)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function FB(){return(FB=(0,O.A)(function*(n,e){const t=Ke(n);if(xx(t),UB(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Hte(t,r.toArray());t.Qa=!0,yield iB(t.remoteStore,!0);for(const s of i)Ax(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(B_(t,o),M_(t.localStore,o,!0))),k_(t.remoteStore,o)}),yield i,yield Hte(t,r),function(o){const a=Ke(o);a.Na.forEach((l,c)=>{k_(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new yr(Xe.comparator)}(t),t.Qa=!1,yield iB(t.remoteStore,!1)}})).apply(this,arguments)}function Hte(n,e,t){return LB.apply(this,arguments)}function LB(){return(LB=(0,O.A)(function*(n,e,t){const r=Ke(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&0!==l.length){a=yield R_(r.localStore,Vs(l[0]));for(const c of l){const u=r.Fa.get(c),h=yield zFe(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=yield gte(r.localStore,o);a=yield R_(r.localStore,c),yield _B(r,$te(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function $te(n){return HJ(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function GFe(n){return t=Ke(n).localStore,Ke(Ke(t).persistence).Qi();var t}function qFe(n,e,t,r){return VB.apply(this,arguments)}function VB(){return(VB=(0,O.A)(function*(n,e,t,r){const i=Ke(n);if(i.Qa)return void Le("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield _te(i.localStore,KJ(s[0])),a=wI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,oi.EMPTY_BYTE_STRING);yield Jc(i,o,a);break}case"rejected":yield M_(i.localStore,e,!0),B_(i,e,r);break;default:ot()}})).apply(this,arguments)}function KFe(n,e,t){return BB.apply(this,arguments)}function BB(){return(BB=(0,O.A)(function*(n,e,t){const r=xx(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Le("SyncEngine","Adding an already active target "+i);continue}const s=yield gte(r.localStore,i),o=yield R_(r.localStore,s);yield _B(r,$te(s),o.targetId,!1,o.resumeToken),Ax(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield M_(r.localStore,i,!1).then(()=>{k_(r.remoteStore,i),B_(r,i)}).catch(vd))}})).apply(this,arguments)}function xx(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ute.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jFe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OFe.bind(null,e),e.Ca.d_=wFe.bind(null,e.eventManager),e.Ca.$a=CFe.bind(null,e.eventManager),e}function UB(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FFe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LFe.bind(null,e),e}let U_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,O.A)(function*(){r.serializer=NI(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return hte(this.persistence,new dte,t.initialUser,this.serializer)}Ga(t){return new SV(yx.Zr,this.serializer)}Wa(t){return new Ete}terminate(){var t=this;return(0,O.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class jB extends U_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,O.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield UB(r.Ja.syncEngine),yield N_(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return hte(this.persistence,new dte,e.initialUser,this.serializer)}ja(e,t){return new nte(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new _Ne(t,this.persistence);return new gNe(e.asyncQueue,r)}Ga(e){const t=RV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new DV(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wte(),Tx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ete}}class Wte extends jB{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,O.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof BV&&(r.sharedClientState.syncEngine={no:$Fe.bind(null,i),ro:qFe.bind(null,i),io:KFe.bind(null,i),Qi:GFe.bind(null,i),eo:HFe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,O.A)(function*(o){yield function WFe(n,e){return FB.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=wte();if(!BV.D(t))throw new Ne(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=RV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new BV(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let j_=(()=>{class n{initialize(t,r){var i=this;return(0,O.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>jte(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=UFe.bind(null,i.syncEngine),yield iB(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new IFe}createDatastore(t){const r=NI(t.databaseInfo.databaseId),i=new sFe(t.databaseInfo);return new lFe(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>jte(this.syncEngine,r,0),l=Ite.D()?new Ite:new nFe,new uFe(i,s,o,a,l);var i,s,o,a,l}createSyncEngine(t,r){return function(s,o,a,l,c,u,h){const m=new DFe(s,o,a,l,c,u);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,O.A)(function*(){var r,i,s;yield(s=(0,O.A)(function*(a){const l=Ke(a);Le("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield P_(l),l.k_.shutdown(),l.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function Gte(n,e=10240){let t=0;return{read:()=>(0,O.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,O.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Dx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class XFe{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ts,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,O.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,O.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,O.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new TFe(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,O.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,O.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,O.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ZFe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,O.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ne(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,O.A)(function*(o,a){const l=Ke(o),c={documents:a.map(y=>TI(l.serializer,y))},u=yield l.Lo("BatchGetDocuments",l.serializer.databaseId,pn.emptyPath(),c,a.length),h=new Map;u.forEach(y=>{const b=function mOe(n,e){return"found"in e?function(r,i){ct(!!i.found);const s=Gl(r,i.found.name),o=bi(i.found.updateTime),a=i.found.createTime?bi(i.found.createTime):ft.min(),l=new fs({mapValue:{fields:i.found.fields}});return xr.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){ct(!!i.missing),ct(!!i.readTime);const s=Gl(r,i.missing),o=bi(i.readTime);return xr.newNoDocument(s,o)}(n,e):ot()}(l.serializer,y);h.set(b.key.toString(),b)});const m=[];return a.forEach(y=>{const b=h.get(y.toString());ct(!!b),m.push(b)}),m}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new w_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,O.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Xe.fromPath(i);e.mutations.push(new cV(s,e.precondition(s)))}),yield(r=(0,O.A)(function*(s,o){const a=Ke(s),l={writes:o.map(c=>AI(a.serializer,c))};yield a.Mo("Commit",a.serializer.databaseId,pn.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ft.min())?jr.exists(!1):jr.updateTime(t):jr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ft.min()))throw new Ne(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jr.updateTime(t)}return jr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JFe{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new jV(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,O.A)(function*(){const t=new ZFe(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!lI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!hee(t)}return!1}}class eLe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=es.UNAUTHENTICATED,this.clientId=rJ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,O.A)(function*(l){Le("FirestoreClient","Received user=",l.uid),yield o.authCredentialListener(l),o.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Le("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,O.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=F_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function zB(n,e){return HB.apply(this,arguments)}function HB(){return HB=(0,O.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,O.A)(function*(s){r.isEqual(s)||(yield fte(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),HB.apply(this,arguments)}function qte(n,e){return $B.apply(this,arguments)}function $B(){return($B=(0,O.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield WB(n);Le("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Rte(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Rte(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function WB(n){return GB.apply(this,arguments)}function GB(){return(GB=(0,O.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zB(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;ea("Error using user provided cache. Falling back to memory cache: "+e),yield zB(n,new U_)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield zB(n,new U_);var i;return n._offlineComponents})).apply(this,arguments)}function Rx(n){return qB.apply(this,arguments)}function qB(){return(qB=(0,O.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield qte(n,n._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield qte(n,new j_))),n._onlineComponents})).apply(this,arguments)}function Kte(n){return WB(n).then(e=>e.persistence)}function z_(n){return WB(n).then(e=>e.localStore)}function Qte(n){return Rx(n).then(e=>e.remoteStore)}function KB(n){return Rx(n).then(e=>e.syncEngine)}function H_(n){return QB.apply(this,arguments)}function QB(){return(QB=(0,O.A)(function*(n){const e=yield Rx(n),t=e.eventManager;return t.onListen=RFe.bind(null,e.syncEngine),t.onUnlisten=PFe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MFe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kFe.bind(null,e.syncEngine),t})).apply(this,arguments)}function Xte(n,e,t={}){const r=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function(s,o,a,l,c){const u=new Dx({next:m=>{u.Za(),o.enqueueAndForget(()=>cB(s,h));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Ne(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&"server"===l.source?c.reject(new Ne(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new fB(__(a.path),u,{includeMetadataChanges:!0,_a:!0});return aB(s,h)}(yield H_(n),n.asyncQueue,e,t,r)})),r.promise}function Zte(n,e,t={}){const r=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function(s,o,a,l,c){const u=new Dx({next:m=>{u.Za(),o.enqueueAndForget(()=>cB(s,h)),m.fromCache&&"server"===l.source?c.reject(new Ne(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new fB(a,u,{includeMetadataChanges:!0,_a:!0});return aB(s,h)}(yield H_(n),n.asyncQueue,e,t,r)})),r.promise}function Jte(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const ene=new Map;function YB(n,e,t){if(!t)throw new Ne(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tne(n,e,t,r){if(!0===e&&!0===r)throw new Ne(Ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nne(n){if(!Xe.isDocumentKey(n))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rne(n){if(Xe.isDocumentKey(n))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Mx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":ot()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mx(n);throw new Ne(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ine(n,e){if(e<=0)throw new Ne(Ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class sne{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tne("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Jte(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ne(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class FI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sne({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sne(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new iNe;switch(r.type){case"firstParty":return new lNe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,O.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ene.get(t);r&&(Le("ComponentProvider","Removing Datastore"),ene.delete(t),r.terminate())}(this),Promise.resolve()}}class ps{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ps(this.firestore,e,this._query)}}class Dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ql(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dr(this.firestore,e,this._key)}}class ql extends ps{constructor(e,t,r){super(e,t,__(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dr(this.firestore,null,new Xe(e))}withConverter(e){return new ql(this.firestore,e,this._path)}}function ane(n,e,...t){if(n=(0,k.Ku)(n),YB("collection","path",e),n instanceof FI){const r=pn.fromString(e,...t);return rne(r),new ql(n,null,r)}{if(!(n instanceof Dr||n instanceof ql))throw new Ne(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return rne(r),new ql(n.firestore,null,r)}}function Px(n,e,...t){if(n=(0,k.Ku)(n),1===arguments.length&&(e=rJ.newId()),YB("doc","path",e),n instanceof FI){const r=pn.fromString(e,...t);return nne(r),new Dr(n,null,new Xe(r))}{if(!(n instanceof Dr||n instanceof ql))throw new Ne(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return nne(r),new Dr(n.firestore,n instanceof ql?n.converter:null,new Xe(r))}}function lne(n,e){return n=(0,k.Ku)(n),e=(0,k.Ku)(e),(n instanceof Dr||n instanceof ql)&&(e instanceof Dr||e instanceof ql)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function XB(n,e){return n=(0,k.Ku)(n),e=(0,k.Ku)(e),n instanceof ps&&e instanceof ps&&n.firestore===e.firestore&&gI(n._query,e._query)&&n.converter===e.converter}class cne{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jV(this,"async_queue_retry"),this.Vu=()=>{const r=Tx();r&&Le("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Tx();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Tx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ts;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,O.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!bd(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,vi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=oB.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ot()}verifyOperationInProgress(){}wu(){var e=this;return(0,O.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function ZB(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class fLe{constructor(){this._progressObserver={},this._taskCompletionResolver=new ts,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class lr extends FI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,O.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new cne(t),e._firestoreClient=void 0,yield t}})()}}function zr(n){if(n._terminated)throw new Ne(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||une(n),n._firestoreClient}function une(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new BNe(n._databaseId,l,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Jte(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new eLe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function JB(){return(JB=(0,O.A)(function*(n){ea("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();dne(n,j_.provider,{build:t=>new Wte(t,e.cacheSizeBytes)})})).apply(this,arguments)}function dne(n,e,t){if((n=un(n,lr))._firestoreClient||n._terminated)throw new Ne(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ne(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},une(n)}class Kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kl(oi.fromBase64String(e))}catch(t){throw new Ne(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kl(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class eu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class np{constructor(e){this._methodName=e}}class kx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}class Nx{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const CLe=/^__.*__$/;class TLe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new I_(e,this.data,t,this.fieldTransforms)}}class hne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fne(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class Ox{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ox(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(fne(this.Cu)&&CLe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ALe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||NI(e)}Qu(e,t,r,i=!1){return new Ox({Cu:e,methodName:t,qu:r,path:Sr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rp(n){const e=n._freezeSettings(),t=NI(n._databaseId);return new ALe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Fx(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);oU("Data must be an object, but it was:",o,r);const a=gne(r,o);let l,c;if(s.merge)l=new Mo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const m=BI(e,h,t);if(!o.contains(m))throw new Ne(Ie.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);yne(u,m)||u.push(m)}l=new Mo(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new TLe(new fs(a),l,c)}class VI extends np{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof VI}}function pne(n,e,t){return new Ox({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eU extends np{_toFieldTransform(e){return new bI(e.path,new b_)}isEqual(e){return e instanceof eU}}class tU extends np{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=pne(this,e,!0),r=this.Ku.map(s=>ip(s,t)),i=new qf(r);return new bI(e.path,i)}isEqual(e){return e instanceof tU&&(0,k.bD)(this.Ku,e.Ku)}}class nU extends np{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=pne(this,e,!0),r=this.Ku.map(s=>ip(s,t)),i=new Kf(r);return new bI(e.path,i)}isEqual(e){return e instanceof nU&&(0,k.bD)(this.Ku,e.Ku)}}class rU extends np{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new E_(e.serializer,eee(e.serializer,this.$u));return new bI(e.path,t)}isEqual(e){return e instanceof rU&&this.$u===e.$u}}function iU(n,e,t,r){const i=n.Qu(1,e,t);oU("Data must be an object, but it was:",i,r);const s=[],o=fs.empty();Ed(r,(l,c)=>{const u=Lx(e,l,t);c=(0,k.Ku)(c);const h=i.Nu(u);if(c instanceof VI)s.push(u);else{const m=ip(c,h);null!=m&&(s.push(u),o.set(u,m))}});const a=new Mo(s);return new hne(o,a,i.fieldTransforms)}function sU(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[BI(e,r,t)],l=[i];if(s.length%2!=0)throw new Ne(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(BI(e,s[m])),l.push(s[m+1]);const c=[],u=fs.empty();for(let m=a.length-1;m>=0;--m)if(!yne(c,a[m])){const y=a[m];let b=l[m];b=(0,k.Ku)(b);const T=o.Nu(y);if(b instanceof VI)c.push(y);else{const M=ip(b,T);null!=M&&(c.push(y),u.set(y,M))}}const h=new Mo(c);return new hne(u,h,o.fieldTransforms)}function mne(n,e,t,r=!1){return ip(t,n.Qu(r?4:3,e))}function ip(n,e){if(_ne(n=(0,k.Ku)(n)))return oU("Unsupported field value:",e,n),gne(n,e);if(n instanceof np)return function(r,i){if(!fne(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ip(a,i.Lu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,k.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return eee(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Br.fromDate(r);return{timestampValue:C_(i.serializer,s)}}if(r instanceof Br){const s=new Br(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:C_(i.serializer,s)}}if(r instanceof kx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kl)return{bytesValue:Iee(i.serializer,r._byteString)};if(r instanceof Dr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mV(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nx)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(l=>{if("number"!=typeof l)throw a.Bu("VectorValues must only contain numeric values.");return lV(a.serializer,l)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Mx(r)}`)}(n,e)}function gne(n,e){const t={};return bJ(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ed(n,(r,i)=>{const s=ip(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function _ne(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Br||n instanceof kx||n instanceof Kl||n instanceof Dr||n instanceof np||n instanceof Nx)}function oU(n,e,t){if(!_ne(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Mx(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function BI(n,e,t){if((e=(0,k.Ku)(e))instanceof eu)return e._internalPath;if("string"==typeof e)return Lx(n,e);throw Vx("Field path arguments must be of type string or ",n,!1,void 0,t)}const SLe=new RegExp("[~\\*/\\[\\]]");function Lx(n,e,t){if(e.search(SLe)>=0)throw Vx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eu(...e.split("."))._internalPath}catch{throw Vx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vx(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ne(Ie.INVALID_ARGUMENT,a+n+l)}function yne(n,e){return n.some(t=>t.isEqual(e))}class UI{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xLe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xLe extends UI{data(){return super.data()}}function Bx(n,e){return"string"==typeof e?Lx(n,e):e instanceof eu?e._internalPath:e._delegate._internalPath}function vne(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aU{}class jI extends aU{}function kd(n,e,...t){let r=[];e instanceof aU&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof $_).length,a=s.filter(l=>l instanceof zI).length;if(o>1||o>0&&a>0)throw new Ne(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class zI extends jI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new zI(e,t,r)}_apply(e){const t=this._parse(e);return wne(e._query,t),new ps(e.firestore,e.converter,oV(e._query,t))}_parse(e){const t=rp(e.firestore);return function(s,o,a,l,c,u,h){let m;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){Ine(h,u);const y=[];for(const b of h)y.push(Ene(l,s,b));m={arrayValue:{values:y}}}else m=Ene(l,s,h)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||Ine(h,u),m=mne(a,"where",h,"in"===u||"not-in"===u);return mn.create(c,u,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class $_ extends aU{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)wne(o,l),o=oV(o,l)}(e._query,t),new ps(e.firestore,e.converter,oV(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lU extends jI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lU(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Ne(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ne(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pI(s,o)}(e._query,this._field,this._direction);return new ps(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Qc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Ux extends jI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ux(e,t,r)}_apply(e){return new ps(e.firestore,e.converter,ix(e._query,this._limit,this._limitType))}}class jx extends jI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jx(e,t,r)}_apply(e){const t=bne(e,this.type,this._docOrFields,this._inclusive);return new ps(e.firestore,e.converter,(s=t,new Qc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class zx extends jI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new zx(e,t,r)}_apply(e){const t=bne(e,this.type,this._docOrFields,this._inclusive);return new ps(e.firestore,e.converter,(s=t,new Qc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function bne(n,e,t,r){if(t[0]=(0,k.Ku)(t[0]),t[0]instanceof UI)return function(s,o,a,l,c){if(!l)throw new Ne(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of y_(s))if(h.field.isKeyField())u.push(Wf(o,l.key));else{const m=l.data.field(h.field);if(YS(m))throw new Ne(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=h.field.canonicalString();throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}u.push(m)}return new Ad(u,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=rp(n.firestore);return function(o,a,l,c,u,h){const m=o.explicitOrderBy;if(u.length>m.length)throw new Ne(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let b=0;b<u.length;b++){const T=u[b];if(m[b].field.isKeyField()){if("string"!=typeof T)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!sV(o)&&-1!==T.indexOf("/"))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const M=o.path.child(pn.fromString(T));if(!Xe.isDocumentKey(M))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const B=new Xe(M);y.push(Wf(a,B))}else{const M=mne(l,c,T);y.push(M)}}return new Ad(y,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Ene(n,e,t){if("string"==typeof(t=(0,k.Ku)(t))){if(""===t)throw new Ne(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sV(e)&&-1!==t.indexOf("/"))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!Xe.isDocumentKey(r))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wf(n,new Xe(r))}if(t instanceof Dr)return Wf(n,t._key);throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mx(t)}.`)}function Ine(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wne(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(Ie.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cU{convertValue(e,t="none"){switch(Cd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ot()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ed(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Ur(o.doubleValue));return new Nx(s)}convertGeoPoint(e){return new kx(Ur(e.latitude),Ur(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uI(e));default:return null}}convertTimestamp(e){const t=qc(e);return new Br(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);ct(Nee(r));const i=new Id(r.get(1),r.get(3)),s=new Xe(r.popFirst(5));return i.isEqual(t)||vi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Hx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class LLe extends cU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dr(this.firestore,null,t)}}class sp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tu extends UI{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new HI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Bx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class HI extends tu{data(e={}){return super.data(e)}}class Nd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new HI(this._firestore,this._userDataWriter,r.key,r,new sp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new HI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sp(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new HI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sp(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:BLe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BLe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function Tne(n,e){return n instanceof tu&&e instanceof tu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Nd&&e instanceof Nd&&n._firestore===e._firestore&&XB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Od extends cU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dr(this.firestore,null,t)}}function Ane(n,e,t){n=un(n,Dr);const r=un(n.firestore,lr),i=Hx(n.converter,e,t);return W_(r,[Fx(rp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,jr.none())])}function Sne(n,e,t,...r){n=un(n,Dr);const i=un(n.firestore,lr),s=rp(i);let o;return o="string"==typeof(e=(0,k.Ku)(e))||e instanceof eu?sU(s,"updateDoc",n._key,e,t,r):iU(s,"updateDoc",n._key,e),W_(i,[o.toMutation(n._key,jr.exists(!0))])}function xne(n,...e){var t,r,i;n=(0,k.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||ZB(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ZB(e[o])){const h=e[o];e[o]=null===(t=h.next)||void 0===t?void 0:t.bind(h),e[o+1]=null===(r=h.error)||void 0===r?void 0:r.bind(h),e[o+2]=null===(i=h.complete)||void 0===i?void 0:i.bind(h)}let l,c,u;if(n instanceof Dr)c=un(n.firestore,lr),u=__(n._key.path),l={next:h=>{e[o]&&e[o](uU(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=un(n,ps);c=un(h.firestore,lr),u=h._query;const m=new Od(c);l={next:y=>{e[o]&&e[o](new Nd(c,m,h,y))},error:e[o+1],complete:e[o+2]},vne(n._query)}return function(m,y,b,T){const M=new Dx(T),B=new fB(y,M,b);return m.asyncQueue.enqueueAndForget((0,O.A)(function*(){return aB(yield H_(m),B)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget((0,O.A)(function*(){return cB(yield H_(m),B)}))}}(zr(c),u,a,l)}function W_(n,e){return function(r,i){const s=new ts;return r.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function NFe(n,e,t){return EB.apply(this,arguments)}(yield KB(r),i,s)})),s.promise}(zr(n),e)}function uU(n,e,t){const r=t.docs.get(e._key),i=new Od(n);return new tu(n,i,e._key,r,new sp(t.hasPendingWrites,t.fromCache),e.converter)}const r2e={maxAttempts:5};class Dne{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rp(e)}set(e,t,r){this._verifyNotCommitted();const i=Fd(e,this._firestore),s=Hx(i.converter,t,r),o=Fx(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,jr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Fd(e,this._firestore);let o;return o="string"==typeof(t=(0,k.Ku)(t))||t instanceof eu?sU(this._dataReader,"WriteBatch.update",s._key,t,r,i):iU(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,jr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fd(e,this._firestore);return this._mutations=this._mutations.concat(new w_(t._key,jr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fd(n,e){if((n=(0,k.Ku)(n)).firestore!==e)throw new Ne(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class i2e extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=rp(t)}get(t){const r=Fd(t,this._firestore),i=new LLe(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ot();const o=s[0];if(o.isFoundDocument())return new UI(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new UI(this._firestore,i,r._key,null,r.converter);throw ot()})}set(t,r,i){const s=Fd(t,this._firestore),o=Hx(s.converter,r,i),a=Fx(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Fd(t,this._firestore);let a;return a="string"==typeof(r=(0,k.Ku)(r))||r instanceof eu?sU(this._dataReader,"Transaction.update",o._key,r,i,s):iU(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Fd(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fd(e,this._firestore),r=new Od(this._firestore);return super.get(e).then(i=>new tu(this._firestore,r,t._key,i._document,new sp(!1,!1),t.converter))}}function hU(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kne(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function Nne(){if(!function LNe(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){c_=Hn.SDK_VERSION,(0,Hn._registerComponent)(new Xo.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new lr(new oNe(r.getProvider("auth-internal")),new cNe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ne(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Hn.registerVersion)(eJ,"4.7.3",e),(0,Hn.registerVersion)(eJ,"4.7.3","esm2017")}();class $I{constructor(e){this._delegate=e}static fromBase64String(e){return Nne(),new $I(Kl.fromBase64String(e))}static fromUint8Array(e){return kne(),new $I(Kl.fromUint8Array(e))}toBase64(){return Nne(),this._delegate.toBase64()}toUint8Array(){return kne(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fU(n){return function p2e(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class m2e{enableIndexedDbPersistence(e,t){return function mLe(n,e){ea("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return dne(n,j_.provider,{build:r=>new jB(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gLe(n){return JB.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function _Le(n){if(n._initialized&&!n._terminated)throw new Ne(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ts;return n._queue.enqueueAndForgetEvenWhileRestricted((0,O.A)(function*(){try{yield(t=(0,O.A)(function*(i){if(!zl.D())return Promise.resolve();const s=i+"main";yield zl.delete(s)}),function r(i){return t.apply(this,arguments)})(RV(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class One{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Id||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ea("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function one(n,e,t,r={}){var i;const s=(n=un(n,FI))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=es.MOCK_USER;else{a=(0,k.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ne(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new es(c)}n._authCredentials=new sNe(new tJ(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function vLe(n){return function tLe(n){return n.asyncQueue.enqueue((0,O.A)(function*(){const e=yield Kte(n),t=yield Qte(n);return e.setNetworkEnabled(!0),function(i){const s=Ke(i);return s.L_.delete(0),OI(s)}(t)}))}(zr(n=un(n,lr)))}(this._delegate)}disableNetwork(){return function bLe(n){return function nLe(n){return n.asyncQueue.enqueue((0,O.A)(function*(){const e=yield Kte(n),t=yield Qte(n);return e.setNetworkEnabled(!1),(r=(0,O.A)(function*(s){const o=Ke(s);o.L_.add(0),yield P_(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(zr(n=un(n,lr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tne("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function yLe(n){return function(t){const r=new ts;return t.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function VFe(n,e){return AB.apply(this,arguments)}(yield KB(t),r)})),r.promise}(zr(n=un(n,lr)))}(this._delegate)}onSnapshotsInSync(e){return function KLe(n,e){return function oLe(n,e){const t=new Dx(e);return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return i=yield H_(n),s=t,Ke(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return i=yield H_(n),s=t,void Ke(i).Y_.delete(s);var i,s}))}}(zr(n=un(n,lr)),ZB(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new G_(this,ane(this._delegate,e))}catch(t){throw so(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sa(this,Px(this._delegate,e))}catch(t){throw so(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new oo(this,function hLe(n,e){if(n=un(n,FI),YB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ps(n,null,(r=e,new Qc(pn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw so(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function s2e(n,e,t){n=un(n,lr);const r=Object.assign(Object.assign({},r2e),t);return function(s){if(s.maxAttempts<1)throw new Ne(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new ts;return s.asyncQueue.enqueueAndForget((0,O.A)(function*(){const c=yield function Yte(n){return Rx(n).then(e=>e.datastore)}(s);new JFe(s.asyncQueue,c,a,o,l).au()})),l.promise}(zr(n),i=>e(new i2e(n,i)),r)}(this._delegate,t=>e(new Fne(this,t)))}batch(){return zr(this._delegate),new Lne(new Dne(this._delegate,e=>W_(this._delegate,e)))}loadBundle(e){return function ELe(n,e){const t=zr(n=un(n,lr)),r=new fLe;return function aLe(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?pee().encode(o):o,u=function(u,h){if(u instanceof Uint8Array)return Gte(u,h);if(u instanceof ArrayBuffer)return Gte(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new XFe(u,a);var u}(t,NI(e));n.asyncQueue.enqueueAndForget((0,O.A)(function*(){!function QFe(n,e,t){const r=Ke(n);var i;(i=(0,O.A)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(b,T){const M=Ke(b),B=bi(T.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",V=>M.Gr.getBundleMetadata(V,T.id)).then(V=>!!V&&V.createTime.compareTo(B)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(b=c).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);l._updateProgress(Ote(c));const u=new AFe(c,o.localStore,a.serializer);let h=yield a.Ua();for(;h;){const y=yield u.la(h);y&&l._updateProgress(y),h=yield a.Ua()}const m=yield u.complete();return yield Jc(o,m.Ia,void 0),yield function(b,T){const M=Ke(b);return M.persistence.runTransaction("Save bundle","readwrite",B=>M.Gr.saveBundleMetadata(B,T))}(o.localStore,c),l._completeWith(m.progress),Promise.resolve(m.Pa)}catch(c){return ea("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var b}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield KB(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ILe(n,e){return function lLe(n,e){return n.asyncQueue.enqueue((0,O.A)(function*(){return function(r,i){const s=Ke(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield z_(n),e)}))}(zr(n=un(n,lr)),e).then(t=>t?new ps(n,null,t.query):null)}(this._delegate,e).then(t=>t?new oo(this,t):null)}}class Wx extends cU{constructor(e){super(),this.firestore=e}convertBytes(e){return new $I(new Kl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sa.forKey(t,this.firestore,null)}}class Fne{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Wx(e)}get(e){const t=ap(e);return this._delegate.get(t).then(r=>new WI(this._firestore,new tu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ap(e);return r?(hU("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=ap(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=ap(e);return this._delegate.delete(t),this}}class Lne{constructor(e){this._delegate=e}set(e,t,r){const i=ap(e);return r?(hU("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=ap(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=ap(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class op{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new HI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new GI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=op.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new op(e,new Wx(e),t),i.set(t,s)),s}}op.INSTANCES=new WeakMap;class Sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sa(t,new Dr(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new Sa(t,new Dr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new G_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new G_(this.firestore,ane(this._delegate,e))}catch(t){throw so(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.Ku)(e))instanceof Dr&&lne(this._delegate,e)}set(e,t){t=hU("DocumentReference.set",t);try{return t?Ane(this._delegate,e,t):Ane(this._delegate,e)}catch(r){throw so(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Sne(this._delegate,e):Sne(this._delegate,e,t,...r)}catch(i){throw so(i,"updateDoc()","DocumentReference.update()")}}delete(){return function GLe(n){return W_(un(n.firestore,lr),[new w_(n._key,jr.none())])}(this._delegate)}onSnapshot(...e){const t=Vne(e),r=Bne(e,i=>new WI(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xne(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function jLe(n){n=un(n,Dr);const e=un(n.firestore,lr),t=zr(e),r=new Od(e);return function rLe(n,e){const t=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return(r=(0,O.A)(function*(s,o,a){try{const l=yield function(u,h){const m=Ke(u);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,h))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Ne(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=F_(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield z_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new tu(e,r,n._key,i,new sp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function zLe(n){n=un(n,Dr);const e=un(n.firestore,lr);return Xte(zr(e),n._key,{source:"server"}).then(t=>uU(e,n,t))}(this._delegate):function ULe(n){n=un(n,Dr);const e=un(n.firestore,lr);return Xte(zr(e),n._key).then(t=>uU(e,n,t))}(this._delegate),t.then(r=>new WI(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sa(this.firestore,this._delegate.withConverter(e?op.getInstance(this.firestore,e):null))}}function so(n,e,t){return n.message=n.message.replace(e,t),n}function Vne(n){for(const e of n)if("object"==typeof e&&!fU(e))return e;return{}}function Bne(n,e){var t,r;let i;return i=fU(n[0])?n[0]:fU(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class WI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Tne(this._delegate,e._delegate)}}class GI extends WI{data(e){const t=this._delegate.data(e);return this._delegate._converter||function rNe(n){n||ot()}(void 0!==t),t}}class oo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wx(e)}where(e,t,r){try{return new oo(this.firestore,kd(this._delegate,function DLe(n,e,t){const r=e,i=Bx("where",n);return zI._create(i,r,t)}(e,t,r)))}catch(i){throw so(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new oo(this.firestore,kd(this._delegate,function RLe(n,e="asc"){const t=e,r=Bx("orderBy",n);return lU._create(r,t)}(e,t)))}catch(r){throw so(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new oo(this.firestore,kd(this._delegate,function MLe(n){return ine("limit",n),Ux._create("limit",n,"F")}(e)))}catch(t){throw so(t,"limit()","Query.limit()")}}limitToLast(e){try{return new oo(this.firestore,kd(this._delegate,function PLe(n){return ine("limitToLast",n),Ux._create("limitToLast",n,"L")}(e)))}catch(t){throw so(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new oo(this.firestore,kd(this._delegate,function kLe(...n){return jx._create("startAt",n,!0)}(...e)))}catch(t){throw so(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new oo(this.firestore,kd(this._delegate,function NLe(...n){return jx._create("startAfter",n,!1)}(...e)))}catch(t){throw so(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new oo(this.firestore,kd(this._delegate,function OLe(...n){return zx._create("endBefore",n,!1)}(...e)))}catch(t){throw so(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new oo(this.firestore,kd(this._delegate,function FLe(...n){return zx._create("endAt",n,!0)}(...e)))}catch(t){throw so(t,"endAt()","Query.endAt()")}}isEqual(e){return XB(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function $Le(n){n=un(n,ps);const e=un(n.firestore,lr),t=zr(e),r=new Od(e);return function iLe(n,e){const t=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return(r=(0,O.A)(function*(s,o,a){try{const l=yield Ex(s,o,!0),c=new Vte(o,l.Ts),u=c.ma(l.documents),h=c.applyChanges(u,!1);a.resolve(h.snapshot)}catch(l){const c=F_(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield z_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Nd(e,r,n,i))}(this._delegate):"server"===e?.source?function WLe(n){n=un(n,ps);const e=un(n.firestore,lr),t=zr(e),r=new Od(e);return Zte(t,n._query,{source:"server"}).then(i=>new Nd(e,r,n,i))}(this._delegate):function HLe(n){n=un(n,ps);const e=un(n.firestore,lr),t=zr(e),r=new Od(e);return vne(n._query),Zte(t,n._query).then(i=>new Nd(e,r,n,i))}(this._delegate),t.then(r=>new pU(this.firestore,new Nd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Vne(e),r=Bne(e,i=>new pU(this.firestore,new Nd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xne(this._delegate,t,r)}withConverter(e){return new oo(this.firestore,this._delegate.withConverter(e?op.getInstance(this.firestore,e):null))}}class _2e{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new GI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pU{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new GI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _2e(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new GI(this._firestore,r))})}isEqual(e){return Tne(this._delegate,e._delegate)}}class G_ extends oo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sa(this.firestore,e):null}doc(e){try{return new Sa(this.firestore,void 0===e?Px(this._delegate):Px(this._delegate,e))}catch(t){throw so(t,"doc()","CollectionReference.doc()")}}add(e){return function qLe(n,e){const t=un(n.firestore,lr),r=Px(n),i=Hx(n.converter,e);return W_(t,[Fx(rp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,jr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Sa(this.firestore,t))}isEqual(e){return lne(this._delegate,e._delegate)}withConverter(e){return new G_(this.firestore,this._delegate.withConverter(e?op.getInstance(this.firestore,e):null))}}function ap(n){return un(n,Dr)}class mU{constructor(...e){this._delegate=new eu(...e)}static documentId(){return new mU(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,k.Ku)(e))instanceof eu&&this._delegate._internalPath.isEqual(e._internalPath)}}class lp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function a2e(){return new eU("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new lp(e)}static delete(){const e=function o2e(){return new VI("deleteField")}();return e._methodName="FieldValue.delete",new lp(e)}static arrayUnion(...e){const t=function l2e(...n){return new tU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new lp(t)}static arrayRemove(...e){const t=function c2e(...n){return new nU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new lp(t)}static increment(e){const t=function u2e(n){return new rU("increment",n)}(e);return t._methodName="FieldValue.increment",new lp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const y2e={Firestore:One,GeoPoint:kx,Timestamp:Br,Blob:$I,Transaction:Fne,WriteBatch:Lne,DocumentReference:Sa,DocumentSnapshot:WI,Query:oo,QueryDocumentSnapshot:GI,QuerySnapshot:pU,CollectionReference:G_,FieldPath:mU,FieldValue:lp,setLogLevel:function g2e(n){!function nNe(n){yd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Une(n,e){return function E2e(n,e=mf){return new Ut(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function gU(n,e){return Une(n,e).pipe(Be(t=>({payload:t,type:"query"})))}!function b2e(n){(function v2e(n,e){n.INTERNAL.registerComponent(new Xo.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},y2e)))})(n,(e,t)=>new One(e,t,new m2e)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(jl.A);class jne{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Wne(r,t);return new $ne(i,s,this.afs)}snapshotChanges(){return function I2e(n,e){return Une(n,e).pipe(Qu(void 0),$2(),Be(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ji)}valueChanges(e={}){return this.snapshotChanges().pipe(Be(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return zn(this.ref.get(e)).pipe(ji)}}function Gx(n,e){return gU(n,e).pipe(Qu(void 0),$2(),Be(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(h=>h.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function zne(n,e,t){return Gx(n,t).pipe(yg((r,i)=>function w2e(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function C2e(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _U(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _U(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _U(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),SA(),Be(r=>r.map(i=>({type:i.type,payload:i}))))}function _U(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Hne(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class $ne{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Gx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Be(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Qu(void 0),$2(),ii(([r,i])=>i.length>0||!r),Be(([,r])=>r),ji)}auditTrail(e){return this.stateChanges(e).pipe(yg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Hne(e);return zne(this.query,t,this.afs.schedulers.outsideAngular).pipe(ji)}valueChanges(e={}){return gU(this.query,this.afs.schedulers.outsideAngular).pipe(Be(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ji)}get(e){return zn(this.query.get(e)).pipe(ji)}add(e){return this.ref.add(e)}doc(e){return new jne(this.ref.doc(e),this.afs)}}class T2e{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Gx(this.query,this.afs.schedulers.outsideAngular).pipe(Be(t=>t.filter(r=>e.indexOf(r.type)>-1)),ii(t=>t.length>0),ji):Gx(this.query,this.afs.schedulers.outsideAngular).pipe(ji)}auditTrail(e){return this.stateChanges(e).pipe(yg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Hne(e);return zne(this.query,t,this.afs.schedulers.outsideAngular).pipe(ji)}valueChanges(e={}){return gU(this.query,this.afs.schedulers.outsideAngular).pipe(Be(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ji)}get(e){return zn(this.query.get(e)).pipe(ji)}}const A2e=new Ee("angularfire2.enableFirestorePersistence"),S2e=new Ee("angularfire2.firestore.persistenceSettings"),x2e=new Ee("angularfire2.firestore.settings"),D2e=new Ee("angularfire2.firestore.use-emulator");function Wne(n,e=t=>t){return{query:e(n),ref:n}}let R2e=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,u,h,m,y,b,T,M,B,V){this.schedulers=l;const Q=HS(t,a,r),we=u;h&&H2(Q,a,m,b,T,M,y,B),[this.firestore,this.persistenceEnabled$]=N2(`${Q.name}.firestore`,"AngularFirestore",Q.name,()=>{const je=a.runOutsideAngular(()=>Q.firestore());if(s&&je.settings(s),we&&je.useEmulator(...we),i&&!CT(o)){const $e=()=>{try{return zn(je.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(H){return typeof console<"u"&&console.warn(H),qe(!1)}};return[je,a.runOutsideAngular($e)]}return[je,qe(!1)]},[s,we,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Wne(i,r),a=this.schedulers.ngZone.run(()=>s);return new $ne(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new T2e(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new jne(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Me(nI),Me(rI,8),Me(A2e,8),Me(x2e,8),Me(Ys),Me(yt),Me(Vg),Me(S2e,8),Me(D2e,8),Me(iI,8),Me(L2,8),Me(V2,8),Me(B2,8),Me(U2,8),Me(j2,8),Me(z2,8),Me(NA,8))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),yU=(()=>{class n{constructor(){this.storesSubject=new F([]),this.stores$=this.storesSubject.asObservable(),this.isLocationSearchSubject=new F(!0),this.isLocationSearch$=this.isLocationSearchSubject.asObservable()}setStores(t){this.storesSubject.next(t)}getStores(){return this.storesSubject.getValue()}setIsUserLocationSearch(t){this.isLocationSearchSubject.next(t)}getIsUserLocationSearch(){return this.isLocationSearchSubject.getValue()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const M2e=["determinateSpinner"];function P2e(n,e){if(1&n&&(Ss(),te(0,"svg",11),Et(1,"circle",12),ie()),2&n){const t=Pe();Fr("viewBox",t._viewBox()),se(),Wv("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Fr("r",t._circleRadius())}}const k2e=new Ee("mat-progress-spinner-default-options",{providedIn:"root",factory:function N2e(){return{diameter:Gne}}}),Gne=100;let qne=(()=>{class n{_elementRef=N(Jn);_noopAnimations;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";_determinateCircle;constructor(){const t=N(Ec,{optional:!0}),r=N(k2e);this._noopAnimations="NoopAnimations"===t&&!!r&&!r._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}_value=0;get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}_diameter=Gne;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,i){if(1&r&&Kh(M2e,5),2&r){let s;qa(s=Ka())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,i){2&r&&(Fr("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),tg("mat-"+i.color),Wv("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),Lr("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",F1],diameter:[2,"diameter","diameter",F1],strokeWidth:[2,"strokeWidth","strokeWidth",F1]},exportAs:["matProgressSpinner"],standalone:!0,features:[Fu,wi],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,i){if(1&r&&(st(0,P2e,2,8,"ng-template",null,0,KC),te(2,"div",2,1),Ss(),te(4,"svg",3),Et(5,"circle",4),ie()(),Dh(),te(6,"div",5)(7,"div",6)(8,"div",7),ng(9,8),ie(),te(10,"div",9),ng(11,8),ie(),te(12,"div",10),ng(13,8),ie()()()),2&r){const s=tb(1);se(4),Fr("viewBox",i._viewBox()),se(),Wv("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),Fr("r",i._circleRadius()),se(4),De("ngTemplateOutlet",s),se(2),De("ngTemplateOutlet",s),se(2),De("ngTemplateOutlet",s)}},dependencies:[p7],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return n})(),Kne=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or]})}return n})();const z2e=new Ee("MatFormField");let qI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or,nK,or]})}return n})();function Qne(n,e){return e?t=>Pb(e.pipe(us(1),function H2e(){return ye((n,e)=>{n.subscribe(Fe(e,_s))})}()),t.pipe(Qne(n))):Yi((t,r)=>n(t,r).pipe(us(1),Oq(t)))}const W2e=["panel"],G2e=["*"];function q2e(n,e){if(1&n){const t=Bi();te(0,"div",1,0),Dt("@panelAnimation.done",function(i){return Cn(t),Tn(Pe()._animationDone.next(i))}),Js(2),ie()}if(2&n){const t=e.id,r=Pe();tg(r._classList),Lr("mat-mdc-autocomplete-visible",r.showPanel)("mat-mdc-autocomplete-hidden",!r.showPanel)("mat-primary","primary"===r._color)("mat-accent","accent"===r._color)("mat-warn","warn"===r._color),De("id",r.id)("@panelAnimation",r.isOpen?"visible":"hidden"),Fr("aria-label",r.ariaLabel||null)("aria-labelledby",r._getPanelAriaLabelledby(t))}}const K2e=If("panelAnimation",[wf("void, hidden",Si({opacity:0,transform:"scaleY(0.8)"})),rl(":enter, hidden => visible",[zN([nl("0.03s linear",Si({opacity:1})),nl("0.12s cubic-bezier(0, 0, 0.2, 1)",Si({transform:"scaleY(1)"}))])]),rl(":leave, visible => hidden",[nl("0.075s linear",Si({opacity:0}))])]);class Q2e{source;option;constructor(e,t){this.source=e,this.option=t}}const Yne=new Ee("mat-autocomplete-default-options",{providedIn:"root",factory:function Y2e(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let X2e=(()=>{class n{_changeDetectorRef=N(Sc);_elementRef=N(Jn);_defaults=N(Yne);_activeOptionChanges=Nt.EMPTY;_animationDone=new vn;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(t){this._color=t,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new vn;opened=new vn;closed=new vn;optionActivated=new vn;set classList(t){this._classList=t,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}id=N(kg).getId("mat-autocomplete-");inertGroups;constructor(){const t=N(ks);this.inertGroups=t?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new oTe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const r=new Q2e(this,t);this.optionSelected.emit(r)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_skipPredicate(){return!1}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(r,i,s){if(1&r&&(eb(s,WK,5),eb(s,HK,5)),2&r){let o;qa(o=Ka())&&(i.options=o),qa(o=Ka())&&(i.optionGroups=o)}},viewQuery:function(r,i){if(1&r&&(Kh(Ha,7),Kh(W2e,5)),2&r){let s;qa(s=Ka())&&(i.template=s.first),qa(s=Ka())&&(i.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",Qi],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",Qi],requireSelection:[2,"requireSelection","requireSelection",Qi],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",Qi],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Qi]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[pr([{provide:zK,useExisting:n}]),Fu,wi],ngContentSelectors:G2e,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(r,i){1&r&&(Tc(),st(0,q2e,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[K2e]},changeDetection:0})}return n})();const Z2e={provide:Za,useExisting:qn(()=>Zne),multi:!0},Xne=new Ee("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const n=N(Ns);return()=>n.scrollStrategies.reposition()}}),eVe={provide:Xne,deps:[Ns],useFactory:function J2e(n){return()=>n.scrollStrategies.reposition()}};let Zne=(()=>{class n{_injector=N(Pn);_element=N(Jn);_overlay=N(Ns);_viewContainerRef=N(qo);_zone=N(yt);_changeDetectorRef=N(Sc);_dir=N(Jb,{optional:!0});_formField=N(z2e,{optional:!0,host:!0});_document=N(En);_viewportRuler=N(IN);_scrollStrategy=N(Xne);_renderer=N($a);_defaults=N(Yne,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new E;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=Nt.EMPTY;_breakpointObserver=N(iK);_handsetLandscapeSubscription=Nt.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new E;_windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&RN(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Zu(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(ii(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(ii(()=>this._overlayAttached)):qe()).pipe(Be(t=>t instanceof $K?t:null))}optionSelections=kb(()=>{const t=this.autocomplete?this.autocomplete.options:null;return t?t.changes.pipe(Qu(t),Qt(()=>Zu(...t.map(r=>r.onSelectionChange)))):this._initialized.pipe(Qt(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Ut(t=>{const r=s=>{const o=kl(s),a=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,l=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&o!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!a||!a.contains(o))&&(!l||!l.contains(o))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(o)&&t.next(s)},i=[this._renderer.listen("document","click",r),this._renderer.listen("document","auxclick",r),this._renderer.listen("document","touchend",r)];return()=>{i.forEach(s=>s())}})}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const r=t.keyCode,i=yf(t);if(27===r&&!i&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===r&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===r||40===r;9===r||o&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let r=t.target,i=r.value;if("number"===r.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),i){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&i!==this._getDisplayValue(s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===t.target){const s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const t=new Ut(i=>{Lu(()=>{i.next()},{injector:this._injector})}),r=this.autocomplete.options.changes.pipe(si(()=>this._positionStrategy.reapplyLastPosition()),function $2e(n,e=mf){const t=H9(n,e);return Qne(()=>t)}(0));return Zu(t,r).pipe(Qt(()=>this._zone.run(()=>{const i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),us(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(t){const r=this.autocomplete;return r&&r.displayWith?r.displayWith(t):t}_assignOptionValue(t){const r=this._getDisplayValue(t);null==t&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(r??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const r=this.autocomplete,i=t?t.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),r._emitSelectEvent(i),this._element.nativeElement.focus()):r.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),r._animationDone?r._animationDone.pipe(us(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,r){this.autocomplete?.options?.forEach(i=>{i!==t&&i.selected&&i.deselect(r)})}_openPanelInternal(t=this._element.nativeElement.value){this._attachOverlay(t),this._floatLabel(),this._trackedModal&&aK(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(t){let r=this._overlayRef;r?(this._positionStrategy.setOrigin(this._getConnectedElement()),r.updateSize({width:this._getPanelWidth()})):(this._portal=new TN(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),r=this._overlay.create(this._getOverlayConfig()),this._overlayRef=r,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&r&&r.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe("(max-width: 959.98px) and (orientation: landscape)").subscribe(s=>{s.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),r&&!r.hasAttached()&&(r.attach(this._portal),this._valueOnAttach=t,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=t=>{(27===t.keyCode&&!yf(t)||38===t.keyCode&&yf(t,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),t.stopPropagation(),t.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new NN({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const r=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}];let o;o="above"===this.position?s:"below"===this.position?r:[...r,...s],t.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let r=-1;for(let i=0;i<t.options.length;i++)if(!t.options.get(i).disabled){r=i;break}t._keyManager.setActiveItem(r)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_scrollToOption(t){const r=this.autocomplete,i=function hAe(n,e,t){if(t.length){let r=e.toArray(),i=t.toArray(),s=0;for(let o=0;o<n+1;o++)r[o].group&&r[o].group===i[s]&&s++;return s}return 0}(t,r.options,r.optionGroups);if(0===t&&1===i)r._setScrollTop(0);else if(r.panel){const s=r.options.toArray()[t];if(s){const o=s._getHostElement(),a=function fAe(n,e,t,r){return n<t?n:n+e>t+r?Math.max(0,n-r+e):t}(o.offsetTop,o.offsetHeight,r._getScrollTop(),r.panel.nativeElement.offsetHeight);r._setScrollTop(a)}}}_trackedModal=null;_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const r=this.autocomplete.id;this._trackedModal&&RN(this._trackedModal,"aria-owns",r),aK(t,"aria-owns",r),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(RN(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(r,i){1&r&&Dt("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(o){return i._handleInput(o)})("keydown",function(o){return i._handleKeydown(o)})("click",function(){return i._handleClick()}),2&r&&Fr("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",Qi]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[pr([Z2e]),Fu,as]})}return n})(),tVe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[eVe],imports:[nE,Og,or,tE,Og,or]})}return n})(),nVe=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||n)(xe(Fg),xe(qN))}}static{this.\u0275cmp=Kn({type:n,selectors:[["app-image-dialog"]],decls:4,vars:1,consts:[[1,"dialog-container"],[1,"dialog-image",3,"src"],["mat-icon-button","",1,"close-button",3,"click"]],template:function(r,i){1&r&&(te(0,"div",0),Et(1,"img",1),te(2,"button",2),Dt("click",function(){return i.closeDialog()}),ze(3," \u2716 "),ie()()),2&r&&(se(),De("src",i.data.image,ri))},styles:['@charset "UTF-8";.dialog-container[_ngcontent-%COMP%]{position:relative;padding:20px;display:flex;justify-content:center;align-items:center;background:transparent}.dialog-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;border-radius:8px}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#f4efe6;color:#a18249;border:none;cursor:pointer;font-size:18px;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px #0003;transition:background .3s ease,transform .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:#ede3d4;transform:scale(1.1)}']})}}return n})();function nu(n){return Array.isArray?Array.isArray(n):"[object Array]"===tre(n)}function Ql(n){return"string"==typeof n}function Jne(n){return"number"==typeof n}function ere(n){return"object"==typeof n}function ra(n){return null!=n}function vU(n){return!n.trim().length}function tre(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const dVe=n=>`Missing ${n} property in key`,hVe=n=>`Property 'weight' in key '${n}' must be a positive integer`,nre=Object.prototype.hasOwnProperty;class fVe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=rre(r);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function rre(n){let e=null,t=null,r=null,i=1,s=null;if(Ql(n)||nu(n))r=n,e=ire(n),t=bU(n);else{if(!nre.call(n,"name"))throw new Error(dVe("name"));const o=n.name;if(r=o,nre.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(hVe(o));e=ire(o),t=bU(o),s=n.getFn}return{path:e,id:t,weight:i,src:r,getFn:s}}function ire(n){return nu(n)?n:n.split(".")}function bU(n){return nu(n)?n.join("."):n}var Bt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function pVe(n,e){let t=[],r=!1;const i=(s,o,a)=>{if(ra(s))if(o[a]){const c=s[o[a]];if(!ra(c))return;if(a===o.length-1&&(Ql(c)||Jne(c)||function oVe(n){return!0===n||!1===n||function aVe(n){return ere(n)&&null!==n}(n)&&"[object Boolean]"==tre(n)}(c)))t.push(function sVe(n){return null==n?"":function iVe(n){if("string"==typeof n)return n;let e=n+"";return"0"==e&&1/n==-1/0?"-0":e}(n)}(c));else if(nu(c)){r=!0;for(let u=0,h=c.length;u<h;u+=1)i(c[u],o,a+1)}else o.length&&i(c,o,a+1)}else t.push(s)};return i(n,Ql(e)?e.split("."):e,0),r?t:t[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const mVe=/[^ ]+/g;class EU{constructor({getFn:e=Bt.getFn,fieldNormWeight:t=Bt.fieldNormWeight}={}){this.norm=function gVe(n=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(mVe).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*n),a=parseFloat(Math.round(o*r)/r);return t.set(s,a),a},clear(){t.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ql(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Ql(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!ra(e)||vU(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(ra(o))if(nu(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(ra(u))if(Ql(u)&&!vU(u)){let h={v:u,i:c,n:this.norm.get(u)};a.push(h)}else nu(u)&&u.forEach((h,m)=>{l.push({nestedArrIndex:m,value:h})})}r.$[s]=a}else if(Ql(o)&&!vU(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function sre(n,e,{getFn:t=Bt.getFn,fieldNormWeight:r=Bt.fieldNormWeight}={}){const i=new EU({getFn:t,fieldNormWeight:r});return i.setKeys(n.map(rre)),i.setSources(e),i.create(),i}function _Ve(n,{getFn:e=Bt.getFn,fieldNormWeight:t=Bt.fieldNormWeight}={}){const{keys:r,records:i}=n,s=new EU({getFn:e,fieldNormWeight:t});return s.setKeys(r),s.setIndexRecords(i),s}function qx(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=Bt.distance,ignoreLocation:s=Bt.ignoreLocation}={}){const o=e/n.length;if(s)return o;const a=Math.abs(r-t);return i?o+a/i:a?1:o}function bVe(n){let e={};for(let t=0,r=n.length;t<r;t+=1){const i=n.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}class ore{constructor(e,{location:t=Bt.location,threshold:r=Bt.threshold,distance:i=Bt.distance,includeMatches:s=Bt.includeMatches,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:a=Bt.minMatchCharLength,isCaseSensitive:l=Bt.isCaseSensitive,ignoreLocation:c=Bt.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(m,y)=>{this.chunks.push({pattern:m,alphabet:bVe(m),startIndex:y})},h=this.pattern.length;if(h>32){let m=0;const y=h%32,b=h-y;for(;m<b;)u(this.pattern.substr(m,32),m),m+=32;if(y){const T=h-32;u(this.pattern.substr(T),T)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let b={isMatch:!0,score:0};return r&&(b.indices=[[0,e.length-1]]),b}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],h=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:T,startIndex:M})=>{const{isMatch:B,score:V,indices:Q}=function vVe(n,e,t,{location:r=Bt.location,distance:i=Bt.distance,threshold:s=Bt.threshold,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:a=Bt.minMatchCharLength,includeMatches:l=Bt.includeMatches,ignoreLocation:c=Bt.ignoreLocation}={}){if(e.length>32)throw new Error("Pattern length exceeds max of 32.");const u=e.length,h=n.length,m=Math.max(0,Math.min(r,h));let y=s,b=m;const T=a>1||l,M=T?Array(h):[];let B;for(;(B=n.indexOf(e,b))>-1;){let H=qx(e,{currentLocation:B,expectedLocation:m,distance:i,ignoreLocation:c});if(y=Math.min(H,y),b=B+u,T){let L=0;for(;L<u;)M[B+L]=1,L+=1}}b=-1;let V=[],Q=1,we=u+h;const je=1<<u-1;for(let H=0;H<u;H+=1){let L=0,W=we;for(;L<W;)qx(e,{errors:H,currentLocation:m+W,expectedLocation:m,distance:i,ignoreLocation:c})<=y?L=W:we=W,W=Math.floor((we-L)/2+L);we=W;let J=Math.max(1,m-W+1),re=o?h:Math.min(m+W,h)+u,oe=Array(re+2);oe[re+1]=(1<<H)-1;for(let $r=re;$r>=J;$r-=1){let la=$r-1,at=t[n.charAt(la)];if(T&&(M[la]=+!!at),oe[$r]=(oe[$r+1]<<1|1)&at,H&&(oe[$r]|=(V[$r+1]|V[$r])<<1|1|V[$r+1]),oe[$r]&je&&(Q=qx(e,{errors:H,currentLocation:la,expectedLocation:m,distance:i,ignoreLocation:c}),Q<=y)){if(y=Q,b=la,b<=m)break;J=Math.max(1,2*m-b)}}if(qx(e,{errors:H+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:c})>y)break;V=oe}const $e={isMatch:b>=0,score:Math.max(.001,Q)};if(T){const H=function yVe(n=[],e=Bt.minMatchCharLength){let t=[],r=-1,i=-1,s=0;for(let o=n.length;s<o;s+=1){let a=n[s];a&&-1===r?r=s:!a&&-1!==r&&(i=s-1,i-r+1>=e&&t.push([r,i]),r=-1)}return n[s-1]&&s-r>=e&&t.push([r,s-1]),t}(M,a);H.length?l&&($e.indices=H):$e.isMatch=!1}return $e}(e,b,T,{location:i+M,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});B&&(m=!0),h+=V,B&&Q&&(u=[...u,...Q])});let y={isMatch:m,score:m?h/this.chunks.length:1};return m&&r&&(y.indices=u),y}}class Ld{constructor(e){this.pattern=e}static isMultiMatch(e){return are(e,this.multiRegex)}static isSingleMatch(e){return are(e,this.singleRegex)}search(){}}function are(n,e){const t=n.match(e);return t?t[1]:null}class lre extends Ld{constructor(e,{location:t=Bt.location,threshold:r=Bt.threshold,distance:i=Bt.distance,includeMatches:s=Bt.includeMatches,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:a=Bt.minMatchCharLength,isCaseSensitive:l=Bt.isCaseSensitive,ignoreLocation:c=Bt.ignoreLocation}={}){super(e),this._bitapSearch=new ore(e,{location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class cre extends Ld{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r,t=0;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+s,i.push([r,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const IU=[class EVe extends Ld{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},cre,class wVe extends Ld{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class CVe extends Ld{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class AVe extends Ld{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class TVe extends Ld{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class IVe extends Ld{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=-1===e.indexOf(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},lre],ure=IU.length,SVe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,RVe=new Set([lre.type,cre.type]),wU=[];function CU(n,e){for(let t=0,r=wU.length;t<r;t+=1){let i=wU[t];if(i.condition(n,e))return new i(n,e)}return new ore(n,e)}const Kx_AND="$and",AU=n=>!(!n.$and&&!n.$or),dre=n=>({[Kx_AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function hre(n,e,{auto:t=!0}={}){const r=i=>{let s=Object.keys(i);const o=(n=>!!n.$path)(i);if(!o&&s.length>1&&!AU(i))return r(dre(i));if((n=>!nu(n)&&ere(n)&&!AU(n))(i)){const l=o?i.$path:s[0],c=o?i.$val:i[l];if(!Ql(c))throw new Error((n=>`Invalid value for key ${n}`)(l));const u={keyId:bU(l),pattern:c};return t&&(u.searcher=CU(c,e)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=i[l];nu(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return AU(n)||(n=dre(n)),r(n)}function FVe(n,e){const t=n.matches;e.matches=[],ra(t)&&t.forEach(r=>{if(!ra(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function LVe(n,e){e.score=n.score}let SU=(()=>{class n{constructor(t,r={},i){this.options={...Bt,...r},this._keyStore=new fVe(this.options.keys),this.setCollection(t,i)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof EU))throw new Error("Incorrect 'index' type");this._myIndex=r||sre(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ra(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let i=0,s=this._docs.length;i<s;i+=1){const o=this._docs[i];t(o,i)&&(this.removeAt(i),i-=1,s-=1,r.push(o))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options;let c=Ql(t)?Ql(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function OVe(n,{ignoreFieldNorm:e=Bt.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=r})}(c,{ignoreFieldNorm:l}),o&&c.sort(a),Jne(r)&&r>-1&&(c=c.slice(0,r)),function VVe(n,e,{includeMatches:t=Bt.includeMatches,includeScore:r=Bt.includeScore}={}){const i=[];return t&&i.push(FVe),r&&i.push(LVe),n.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}(c,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(t){const r=CU(t,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:o,i:a,n:l})=>{if(!ra(o))return;const{isMatch:c,score:u,indices:h}=r.searchIn(o);c&&s.push({item:o,idx:a,matches:[{score:u,value:o,norm:l,indices:h}]})}),s}_searchLogical(t){const r=hre(t,this.options),i=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:y}=l,b=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:y});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}const h=[];for(let m=0,y=l.children.length;m<y;m+=1){const T=i(l.children[m],c,u);if(T.length)h.push(...T);else if("$and"===l.operator)return[]}return h},o={},a=[];return this._myIndex.records.forEach(({$:l,i:c})=>{if(ra(l)){let u=i(r,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},a.push(o[c])),u.forEach(({matches:h})=>{o[c].matches.push(...h)}))}}),a}_searchObjectList(t){const r=CU(t,this.options),{keys:i,records:s}=this._myIndex,o=[];return s.forEach(({$:a,i:l})=>{if(!ra(a))return;let c=[];i.forEach((u,h)=>{c.push(...this._findMatches({key:u,value:a[h],searcher:r}))}),c.length&&o.push({idx:l,item:a,matches:c})}),o}_findMatches({key:t,value:r,searcher:i}){if(!ra(r))return[];let s=[];if(nu(r))r.forEach(({v:o,i:a,n:l})=>{if(!ra(o))return;const{isMatch:c,score:u,indices:h}=i.searchIn(o);c&&s.push({score:u,key:t,value:o,idx:a,norm:l,indices:h})});else{const{v:o,n:a}=r,{isMatch:l,score:c,indices:u}=i.searchIn(o);l&&s.push({score:c,key:t,value:o,norm:a,indices:u})}return s}}return n.version="7.0.0",n.createIndex=sre,n.parseIndex=_Ve,n.config=Bt,n})();SU.parseQuery=hre,function PVe(...n){wU.push(...n)}(class MVe{constructor(e,{isCaseSensitive:t=Bt.isCaseSensitive,includeMatches:r=Bt.includeMatches,minMatchCharLength:i=Bt.minMatchCharLength,ignoreLocation:s=Bt.ignoreLocation,findAllMatches:o=Bt.findAllMatches,location:a=Bt.location,threshold:l=Bt.threshold,distance:c=Bt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function DVe(n,e={}){return n.split("|").map(t=>{let r=t.trim().split(SVe).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,c=-1;for(;!l&&++c<ure;){const u=IU[c];let h=u.isMultiMatch(a);h&&(i.push(new u(h,e)),l=!0)}if(!l)for(c=-1;++c<ure;){const u=IU[c];let h=u.isSingleMatch(a);if(h){i.push(new u(h,e));break}}}return i})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const u=t[l];o.length=0,s=0;for(let h=0,m=u.length;h<m;h+=1){const y=u[h],{isMatch:b,indices:T,score:M}=y.search(e);if(!b){a=0,s=0,o.length=0;break}s+=1,a+=M,r&&(RVe.has(y.constructor.type)?o=[...o,...T]:o.push(T))}if(s){let h={isMatch:!0,score:a/s};return r&&(h.indices=o),h}}return{isMatch:!1,score:1}}});let fre=(()=>{class n{transform(t,r=0){const i=parseFloat(t);return isNaN(i)?t:-1===r?`${i.toFixed(0)} \u5143`:i<1e3?`${i.toFixed(r)} \u516c\u5c3a`:`${(i/1e3).toFixed(r)} \u516c\u91cc`}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"round",type:n,pure:!0})}}return n})(),BVe=(()=>{class n{transform(t){return null==t||""===t?"\u66ab\u7121\u8cc7\u8a0a":t.toString()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"emptyInfo",type:n,pure:!0})}}return n})();function UVe(n,e){1&n&&(te(0,"div",17),ze(1," \u65b0\u54c1 "),ie())}function jVe(n,e){1&n&&(te(0,"div",18),ze(1," \u7279\u50f9\u4e2d "),ie())}function zVe(n,e){if(1&n&&(te(0,"div")(1,"div",19)(2,"span",20),ze(3,"\u50f9\u683c(NT$): "),ie(),te(4,"span",21),ze(5),ie(),te(6,"span",22),ze(7,"\u2192"),ie(),te(8,"span",23),ze(9),Ms(10,"round"),ie()(),te(11,"p",24),ze(12),Ms(13,"emptyInfo"),ie(),te(14,"p",24),ze(15),Ms(16,"emptyInfo"),ie()()),2&n){const t=Pe().$implicit,r=Pe(5);se(5),cs(r.getFoodDetail711(t).originalPrice),se(4),en(" ",ig(10,4,r.getFoodDetail711(t).discountedPrice,-1)," "),se(3),en("\u5546\u54c1\u63cf\u8ff0: ",Qh(13,7,r.getFoodDetail711(t).content),""),se(3),en("\u5361\u8def\u91cc(kcal): ",Qh(16,9,r.getFoodDetail711(t).kcal),"")}}function HVe(n,e){1&n&&(te(0,"div")(1,"div",19)(2,"p",24),ze(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),ie()()())}function $Ve(n,e){if(1&n){const t=Bi();te(0,"li")(1,"div",8)(2,"img",9),Dt("click",function(){const i=Cn(t).$implicit,s=Pe(5);return Tn(s.openImageDialog(s.getFoodDetail711(i).image))}),ie(),te(3,"div",10)(4,"div",11)(5,"h3",12),ze(6),ie(),te(7,"div",13),ze(8),ie()(),te(9,"div",14),st(10,UVe,2,0,"div",15)(11,jVe,2,0,"div",16),ie(),st(12,zVe,17,11,"div",0)(13,HVe,4,0,"div",0),ie()()()}if(2&n){const t=e.$implicit,r=Pe(5);se(2),De("src",r.getFoodDetail711(t).image,ri)("alt",r.getFoodDetail711(t).name),se(4),en(" ",t.ItemName," "),se(2),en(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),se(2),De("ngIf","True"===r.getFoodDetail711(t).new),se(),De("ngIf","True"===r.getFoodDetail711(t).special_sale),se(),De("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetail711(t).image),se(),De("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetail711(t).image)}}function WVe(n,e){if(1&n&&(te(0,"div",4)(1,"div",5)(2,"h3",6),ze(3),ie()(),te(4,"ul",7),st(5,$Ve,14,8,"li",2),ie()()),2&n){const t=Pe().$implicit,r=Pe(3);se(3),en(" ",t.Name," "),se(2),De("ngForOf",r.itemsBySubCategory[t.Name])}}function GVe(n,e){if(1&n&&(Ds(0),st(1,WVe,6,2,"div",3),Rs()),2&n){const t=e.$implicit,r=Pe(3);se(),De("ngIf",r.itemsBySubCategory[t.Name]&&r.itemsBySubCategory[t.Name].length>0)}}function qVe(n,e){if(1&n&&(Ds(0),te(1,"h2",1),ze(2),ie(),st(3,GVe,2,1,"ng-container",2),Rs()),2&n){const t=Pe(2);se(2),cs(t.category.Name),se(),De("ngForOf",t.subCategories)}}function KVe(n,e){if(1&n&&(te(0,"div")(1,"p",24),ze(2),Ms(3,"emptyInfo"),ie()()),2&n){const t=Pe().$implicit,r=Pe(5);se(2),en("\u5546\u54c1\u63cf\u8ff0: ",Qh(3,1,r.getFoodDetailFamilyMart(t).Description),"")}}function QVe(n,e){1&n&&(te(0,"div")(1,"div",19)(2,"p",24),ze(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),ie()()())}function YVe(n,e){if(1&n){const t=Bi();te(0,"li")(1,"div",26)(2,"img",9),Dt("click",function(){const i=Cn(t).$implicit,s=Pe(5);return Tn(s.openImageDialog(s.getFoodDetailFamilyMart(i).picture_url))}),ie(),te(3,"div",10)(4,"div",11)(5,"h3",12),ze(6),ie(),te(7,"div",27),ze(8),ie()(),st(9,KVe,4,3,"div",0)(10,QVe,4,0,"div",0),ie()()()}if(2&n){const t=e.$implicit,r=Pe(5);se(2),De("src",r.getFoodDetailFamilyMart(t).picture_url,ri)("alt",r.getFoodDetailFamilyMart(t).title),se(4),en(" ",t.ItemName," "),se(2),en(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),se(),De("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetailFamilyMart(t).picture_url),se(),De("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetailFamilyMart(t).picture_url)}}function XVe(n,e){if(1&n&&(te(0,"div",4)(1,"div",5)(2,"h3",25),ze(3),ie()(),te(4,"ul",7),st(5,YVe,11,6,"li",2),ie()()),2&n){const t=Pe().$implicit,r=Pe(3);se(3),en(" ",t.name," "),se(2),De("ngForOf",r.itemsBySubCategory[t.name])}}function ZVe(n,e){if(1&n&&(Ds(0),st(1,XVe,6,2,"div",3),Rs()),2&n){const t=e.$implicit,r=Pe(3);se(),De("ngIf",r.itemsBySubCategory[t.name]&&r.itemsBySubCategory[t.name].length>0)}}function JVe(n,e){if(1&n&&(Ds(0),te(1,"h2",1),ze(2),ie(),st(3,ZVe,2,1,"ng-container",2),Rs()),2&n){const t=Pe(2);se(2),cs(t.category.name),se(),De("ngForOf",t.subCategories)}}function eBe(n,e){if(1&n&&(te(0,"div"),st(1,qVe,4,2,"ng-container",0)(2,JVe,4,2,"ng-container",0),ie()),2&n){const t=Pe();se(),De("ngIf",t.category.Name),se(),De("ngIf",t.category.name)}}let tBe=(()=>{class n{constructor(t,r){this.sevenElevenRequestService=t,this.dialog=r,this.subCategories=[],this.subCategoriesName="",this.itemsBySubCategory={}}ngOnInit(){}ngOnChanges(t){(t.category||t.store)&&this.loadSubCategories()}loadSubCategories(){if(this.store&&this.category)if(this.store.StoreName)this.subCategories=this.category.Children,this.subCategoriesName=this.category.Name,this.loadItemsBySubCategory();else if(this.store.name){this.subCategories=this.category.categories;var t=[];this.subCategories.forEach(r=>{t.push(...r.products.map(i=>({ItemName:i.name,RemainingQty:i.qty}))),this.itemsBySubCategory[r.name]=t||[],t=[]})}}loadItemsBySubCategory(){this.store&&this.sevenElevenRequestService.getItemsByStoreNo(this.store.StoreNo).subscribe(t=>{if(t.isSuccess&&t.element.StoreStockItem){let r=t.element.StoreStockItem.CategoryStockItems;if("\u751c\u9ede"==this.subCategoriesName){let i="";this.subCategories=this.subCategories.map(s=>"\u86cb\u7cd5"===s.Name?(i=s.ID,{...s,Name:"\u51b7\u85cf\u86cb\u7cd5"}):s),r=r.map(s=>"\u86cb\u7cd5"===s.Name&&s.NodeID.toString()==i?{...s,Name:"\u51b7\u85cf\u86cb\u7cd5"}:s)}if("\u9eb5\u5305\u86cb\u7cd5"==this.subCategoriesName){let i="";this.subCategories=this.subCategories.map(s=>"\u86cb\u7cd5"===s.Name?(i=s.ID,{...s,Name:"\u9eb5\u5305\u86cb\u7cd5"}):s),r=r.map(s=>"\u86cb\u7cd5"===s.Name&&s.NodeID.toString()==i?{...s,Name:"\u9eb5\u5305\u86cb\u7cd5"}:s)}this.subCategories.forEach(i=>{const s=[];r.forEach(o=>{o.Name===i.Name&&s.push(...o.ItemList)}),this.itemsBySubCategory[i.Name]=s||[]})}})}getDiscountedPrice(t){const r=parseFloat(t.replace("NT$","").trim()),s=(new Date).getHours();let o=r;return o*=s>=19&&s<20?.8:s>=10&&s<18||s>=20||s<3?.65:.8,o.toString()}getFoodDetail711(t){const s=new SU(this.foodDetails,{includeScore:!0,threshold:.3,keys:["name"]}).search(t.ItemName),o=s.length>0?s[0].item:{category:"",content:"",image:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png",kcal:"",name:"",new:"False",price:"",special_sale:"False"},a=this.getDiscountedPrice(o.price);return o.discountedPrice=a,o.originalPrice=o.price,o}getFoodDetailFamilyMart(t){const s=new SU(this.foodDetails,{includeScore:!0,threshold:.3,keys:["title"]}).search(t.ItemName);return s.length>0?s[0].item:{category:"",title:"",picture_url:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png","Protein (g)":"","Carb (g)":"","Calories (kcal)":"","Fat (g)":"",Description:""}}openImageDialog(t){this.dialog.open(nVe,{data:{image:t},panelClass:"custom-dialog"})}static{this.\u0275fac=function(r){return new(r||n)(xe(kA),xe(Cf))}}static{this.\u0275cmp=Kn({type:n,selectors:[["app-display"]],inputs:{store:"store",category:"category",foodDetails:"foodDetails"},features:[as],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-2xl","font-bold","mb-4","text-primary-default"],[4,"ngFor","ngForOf"],["class","sub-category-item bg-white border border-gray-100 p-6 mb-8 rounded-lg shadow-lg",4,"ngIf"],[1,"sub-category-item","bg-white","border","border-gray-100","p-6","mb-8","rounded-lg","shadow-lg"],[1,"mb-4"],[1,"text-2xl","font-bold","text-primary-default","text-primary-light"],[1,"space-y-6","sm:space-y-4"],[1,"border","border-gray-300","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"object-contain","rounded-lg","mb-4","sm:mb-0","sm:mr-6","shadow-md","w-24","h-24","sm:w-32","sm:h-32","cursor-pointer",3,"click","src","alt"],[1,"flex-1"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-2"],[1,"text-sm","sm:text-lg","font-semibold","text-gray-600"],[1,"text-center","inline-block","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"flex","space-x-2","mb-2"],["class","inline-block bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],["class","inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[1,"inline-block","bg-red-100","text-red-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"inline-block","bg-yellow-100","text-yellow-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"text-sm","sm:text-base","font-semibold","text-gray-800","mb-2"],[1,"text-gray-800"],[1,"line-through","text-gray-500"],[1,"text-red-600","mx-2"],[1,"text-red-600"],[1,"text-xs","sm:text-sm","text-gray-500","mb-1"],[1,"text-2xl","font-bold","text-primary-default"],[1,"border","border-gray-300","food-item","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"text-center","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"]],template:function(r,i){1&r&&st(0,eBe,3,2,"div",0),2&r&&De("ngIf",i.subCategories.length>0)},dependencies:[_b,Jh,fre,BVe]})}}return n})();const rBe=["mat-icon-button",""],iBe=["*"],sBe=new Ee("MAT_BUTTON_CONFIG"),oBe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let aBe=(()=>{class n{_elementRef=N(Jn);_platform=N(ks);_ngZone=N(yt);_animationMode=N(Ec,{optional:!0});_focusMonitor=N(vK);_rippleLoader=N(pAe);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){N(_f).load(FK);const t=N(sBe,{optional:!0}),r=this._elementRef.nativeElement,i=r.classList;this.disabledInteractive=t?.disabledInteractive??!1,this.color=t?.color??null,this._rippleLoader?.configureRipple(r,{className:"mat-mdc-button-ripple"});for(const{attribute:s,mdcClasses:o}of oBe)r.hasAttribute(s)&&i.add(...o)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Qi],disabled:[2,"disabled","disabled",Qi],ariaDisabled:[2,"aria-disabled","ariaDisabled",Qi],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Qi]},standalone:!0,features:[Fu]})}return n})(),pre=(()=>{class n extends aBe{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,i){2&r&&(Fr("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),tg(i.color?"mat-"+i.color:""),Lr("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[bn,wi],attrs:rBe,ngContentSelectors:iBe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Tc(),Et(0,"span",0),Js(1),Et(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return n})(),mre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or,BN,or]})}return n})();function cBe(n,e){1&n&&(te(0,"small",19),ze(1,"\u5e33\u865f\u70ba\u5fc5\u586b"),ie())}function uBe(n,e){1&n&&(te(0,"small",19),ze(1,"\u8acb\u8f38\u5165\u6709\u6548\u7684\u96fb\u5b50\u90f5\u4ef6"),ie())}function dBe(n,e){1&n&&(te(0,"small",19),ze(1,"\u5bc6\u78bc\u70ba\u5fc5\u586b"),ie())}function hBe(n,e){1&n&&(te(0,"small",19),ze(1,"\u5bc6\u78bc\u81f3\u5c11\u9700\u89816\u500b\u5b57\u5143"),ie())}function fBe(n,e){1&n&&(te(0,"small",19),ze(1," \u5bc6\u78bc\u8207\u518d\u6b21\u8f38\u5165\u7684\u5bc6\u78bc\u4e0d\u4e00\u81f4 "),ie())}function pBe(n,e){1&n&&(te(0,"small",19),ze(1," \u66b1\u7a31\u70ba\u5fc5\u586b "),ie())}function mBe(n,e){if(1&n&&(te(0,"div")(1,"div")(2,"label",20),ze(3,"\u91cd\u65b0\u8f38\u5165\u5bc6\u78bc"),ie(),Et(4,"input",21),st(5,fBe,2,0,"small",8),ie(),te(6,"div")(7,"label",22),ze(8,"\u66b1\u7a31"),ie(),Et(9,"input",23),st(10,pBe,2,0,"small",8),ie()()),2&n){const t=Pe();se(5),De("ngIf",(null==t.authForm.errors?null:t.authForm.errors.passwordsMismatch)&&t.f.rePassword.touched),se(5),De("ngIf",(null==t.authForm.errors?null:t.authForm.errors.displayNameRequired)&&t.f.displayName.touched)}}function gBe(n,e){if(1&n&&(te(0,"p",24),ze(1),ie()),2&n){const t=Pe();se(),cs(t.errorMessage)}}function _Be(n,e){if(1&n){const t=Bi();te(0,"div")(1,"button",25),Dt("click",function(){return Cn(t),Tn(Pe().resendVerificationEmail())}),ze(2," \u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1 "),ie()()}}function yBe(n,e){if(1&n){const t=Bi();te(0,"div",26)(1,"button",27),Dt("click",function(){return Cn(t),Tn(Pe().forgotPassword())}),ze(2," \u5fd8\u8a18\u5bc6\u78bc\uff1f "),ie()()}}let vBe=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.authService=r,this.dialogRef=i,this.dialog=s,this.isRegister=!1,this.errorMessage="",this.authForm=this.fb.group({email:["",[NT.required,NT.email]],password:["",[NT.required,NT.minLength(6)]],rePassword:[""],displayName:[""]},{validators:[this.passwordMatchValidator,this.displayNameRequiredValidator.bind(this)]})}passwordMatchValidator(t){const r=t.get("password")?.value,i=t.get("rePassword")?.value;return r&&i&&r!==i?{passwordsMismatch:!0}:null}displayNameRequiredValidator(t){const r=this.isRegister,i=t.get("displayName")?.value;return!r||i&&""!==i.trim()?null:{displayNameRequired:!0}}submitForm(){this.authForm.invalid?this.markFormGroupTouched(this.authForm):this.isRegister?this.register():this.login()}markFormGroupTouched(t){Object.values(t.controls).forEach(r=>{r instanceof lf?this.markFormGroupTouched(r):r.markAsTouched()})}collectErrors(t){const r=[];return Object.keys(t.controls).forEach(i=>{const s=t.get(i);s&&s.errors&&(s.errors.required&&r.push(`${this.getFieldDisplayName(i)} \u70ba\u5fc5\u586b`),s.errors.email&&r.push(`${this.getFieldDisplayName(i)} \u683c\u5f0f\u4e0d\u6b63\u78ba`),s.errors.minlength&&r.push(`${this.getFieldDisplayName(i)} \u81f3\u5c11\u9700\u8981 ${s.errors.minlength.requiredLength} \u500b\u5b57\u5143`))}),t.errors?.passwordsMismatch&&r.push("\u5bc6\u78bc\u8207\u78ba\u8a8d\u5bc6\u78bc\u4e0d\u4e00\u81f4"),r.join("\n")}getFieldDisplayName(t){return{email:"Email",password:"\u5bc6\u78bc",rePassword:"\u78ba\u8a8d\u5bc6\u78bc",displayName:"\u66b1\u7a31"}[t]||t}login(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;console.log(s),!s||s.emailVerified?(console.log("\u4e00\u822c\u767b\u5165\u6210\u529f"),this.dialog.open(aE,{width:"300px",data:{title:"\u767b\u5165\u6210\u529f",message:`${s.displayName}\uff5e\u6b61\u8fce\u56de\u4f86\u55b5`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(a=>{this.close(!0)})):this.errorMessage="\u60a8\u7684\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49\uff0c\u8acb\u5148\u81f3\u4fe1\u7bb1\u9ede\u64ca\u9a57\u8b49\u9023\u7d50\u5f8c\u518d\u91cd\u65b0\u767b\u5165\u3002"}).catch(i=>{this.errorMessage="auth/invalid-credential"===i.code?"\u5e33\u865f\u4e0d\u5b58\u5728\u6216\u5bc6\u78bc\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\u3002":"\u56e0\u4e0d\u660e\u539f\u56e0\u767b\u5165\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002",console.error(i.message)})}register(){const{email:t,password:r,displayName:i}=this.authForm.value;this.authService.register(t,r,i).then(()=>{this.errorMessage="\u8a3b\u518a\u6210\u529f\uff0c\u8acb\u81f3\u60a8\u7684\u4fe1\u7bb1\u78ba\u8a8d\u5f8c\u91cd\u65b0\u767b\u5165",this.authForm.reset(),this.isRegister=!1}).catch(s=>{this.errorMessage="auth/email-already-in-use"===s.code?"\u5e33\u865f\u5df2\u5b58\u5728\uff0c\u8acb\u4f7f\u7528Google\u6216\u76f4\u63a5\u767b\u5165":"\u56e0\u4e0d\u660e\u539f\u56e0\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}resendVerificationEmail(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;if(console.log("\u9a57\u8b49\u4fe1\u91cd\u767c\u7d66",s),s)return this.authService.sendVerificationEmail(s),void(this.errorMessage="\u9a57\u8b49\u4fe1\u5df2\u91cd\u65b0\u5bc4\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u96fb\u5b50\u90f5\u4ef6\u4e26\u91cd\u65b0\u767b\u5165")}).catch(i=>{console.error(i.message),this.errorMessage="\u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}loginWithGoogle(){this.authService.loginWithGoogle().then(t=>{const r=t.user;console.log("Google\u767b\u5165\u6210\u529f"),this.dialog.open(aE,{width:"300px",data:{title:"\u767b\u5165\u6210\u529f",message:`${r.displayName}\uff5e\u6b61\u8fce\u56de\u4f86\u55b5`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(s=>{this.close(!0)})}).catch(t=>{console.error(t.message),this.errorMessage="Google\u767b\u5165\u5931\u6557\uff0c\u8acb\u91cd\u65b0\u518d\u8a66"})}close(t){this.dialogRef.close(t)}get f(){return this.authForm.controls}forgotPassword(){const{email:t}=this.authForm.value;t?this.authService.forgotPassword(t).then(()=>{this.errorMessage="\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u4fe1\u7bb1"}).catch(r=>{console.error("\u91cd\u8a2d\u5bc6\u78bc\u932f\u8aa4",r.message),this.errorMessage="\u767c\u9001\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u6642\u51fa\u932f\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"}):this.errorMessage="\u8acb\u8f38\u5165\u5e33\u865f\u4f7f\u7528\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740"}static{this.\u0275fac=function(r){return new(r||n)(xe(MIe),xe($S),xe(Fg),xe(Cf))}}static{this.\u0275cmp=Kn({type:n,selectors:[["app-login-page"]],decls:32,vars:12,consts:[[1,"dialog-content"],[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"text-primary-default","text-xl","font-semibold","mb-6"],["mat-icon-button","",1,"text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],[1,"material-icons"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"text-primary-default"],["type","email","id","email","formControlName","email","placeholder","\u8acb\u8f38\u5165\u4fe1\u7bb1\u4f5c\u70ba\u5e33\u865f",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["class","text-red-500",4,"ngIf"],["for","password",1,"text-primary-default"],["type","password","id","password","formControlName","password","placeholder","\u8f38\u5165\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[4,"ngIf"],["type","submit",1,"btn-login","w-full","py-2","px-4","bg-primary-default","text-white","rounded-md","mt-4","hover:bg-gray-400","hover:shadow-lg","transition-all","focus:outline-none"],["class","error-message text-red-500 mb-4",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],[1,"flex","justify-between","items-center","mt-6"],[1,"btn-register","text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"],[1,"btn-google","border","border-gray-300","flex","items-center","py-2","px-4","bg-primary-light","text-gray-700","rounded-md","hover:bg-gray-200","hover:border-gray-400","transition-all","focus:outline-none",3,"click"],["src","assets/google.png","alt","Google Logo",1,"w-5","h-5","mr-2"],[1,"text-red-500"],["for","rePassword",1,"text-primary-default"],["type","password","id","rePassword","formControlName","rePassword","placeholder","\u518d\u6b21\u8f38\u5165\u60a8\u7684\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["for","displayName",1,"text-primary-default"],["type","text","id","displayName","formControlName","displayName","placeholder","\u600e\u9ebc\u7a31\u547c\u60a8",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[1,"error-message","text-red-500","mb-4"],[1,"btn-resend","w-full","py-2","px-4","bg-primary-light","border","border-gray-300","text-gray-700","rounded-md","hover:bg-gray-400","hover:text-white","transition-all","focus:outline-none",3,"click"],[1,"mt-4","text-center"],[1,"text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"]],template:function(r,i){1&r&&(te(0,"mat-dialog-content",0)(1,"div",1)(2,"h2",2),ze(3),ie(),te(4,"button",3),Dt("click",function(){return i.close(!1)}),te(5,"span",4),ze(6,"close"),ie()()(),te(7,"form",5),Dt("ngSubmit",function(){return i.submitForm()}),te(8,"div")(9,"label",6),ze(10,"\u5e33\u865f"),ie(),Et(11,"input",7),st(12,cBe,2,0,"small",8)(13,uBe,2,0,"small",8),ie(),te(14,"div")(15,"label",9),ze(16,"\u5bc6\u78bc"),ie(),Et(17,"input",10),st(18,dBe,2,0,"small",8)(19,hBe,2,0,"small",8),ie(),st(20,mBe,11,2,"div",11),te(21,"button",12),ze(22),ie(),st(23,gBe,2,1,"p",13)(24,_Be,3,0,"div",11),ie(),st(25,yBe,3,0,"div",14),te(26,"div",15)(27,"button",16),Dt("click",function(){return i.isRegister=!i.isRegister}),ze(28),ie(),te(29,"button",17),Dt("click",function(){return i.loginWithGoogle()}),Et(30,"img",18),ze(31," Google \u767b\u5165 "),ie()()()),2&r&&(se(3),en(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),se(4),De("formGroup",i.authForm),se(5),De("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),se(),De("ngIf",(null==i.f.email.errors?null:i.f.email.errors.email)&&i.f.email.touched),se(5),De("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),se(),De("ngIf",(null==i.f.password.errors?null:i.f.password.errors.minlength)&&i.f.password.touched),se(),De("ngIf",i.isRegister),se(2),en(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),se(),De("ngIf",i.errorMessage),se(),De("ngIf",!i.isRegister&&i.errorMessage.includes("\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49")),se(),De("ngIf",!i.isRegister),se(3),en(" ",i.isRegister?"\u5df2\u6709\u5e33\u865f\uff1f\u767b\u5165":"\u8a3b\u518a"," "))},dependencies:[Jh,KN,sQ,pre,Ok,af,Tb,Ck,qT,Bk]})}}return n})();const bBe=["*"];let Qx;function KI(n){return function EBe(){if(void 0===Qx&&(Qx=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Qx=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Qx}()?.createHTML(n)||n}function gre(n){return Error(`Unable to find icon with the name "${n}"`)}function _re(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function yre(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class up{url;svgText;options;svgElement;constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Yx=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new up(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(ls.HTML,i);if(!o)throw yre(i);const a=KI(o);return this._addSvgIconConfig(t,r,new up("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new up(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(ls.HTML,r);if(!s)throw yre(r);const o=KI(s);return this._addSvgIconSetConfig(t,new up("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(ls.RESOURCE_URL,t);if(!r)throw _re(t);const i=this._cachedIconsByUrl.get(r);return i?qe(Xx(i)):this._loadSvgIconFromConfig(new up(t,null)).pipe(si(s=>this._cachedIconsByUrl.set(r,s)),Be(s=>Xx(s)))}getNamedSvgIcon(t,r=""){const i=vre(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):Nb(gre(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?qe(Xx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Be(r=>Xx(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?qe(i):fg(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Sl(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(ls.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),qe(null)})))).pipe(Be(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw gre(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(si(r=>t.svgText=r),Be(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?qe(null):this._fetchIcon(t).pipe(si(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(KI("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(KI("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function IBe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const o=this._sanitizer.sanitize(ls.RESOURCE_URL,r);if(!o)throw _re(r);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Be(c=>KI(c)),dg(()=>this._inProgressUrlFetches.delete(o)),O2());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(vre(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return CBe(s)?new up(s.url,null,s.options):new up(s,null)}}static \u0275fac=function(r){return new(r||n)(Me(wb,8),Me(dk),Me(En,8),Me(Ho))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xx(n){return n.cloneNode(!0)}function vre(n,e){return n+":"+e}function CBe(n){return!(!n.url||!n.options)}const TBe=new Ee("MAT_ICON_DEFAULT_OPTIONS"),ABe=new Ee("mat-icon-location",{providedIn:"root",factory:function SBe(){const n=N(En),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),bre=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],xBe=bre.map(n=>`[${n}]`).join(", "),DBe=/^url\(['"]?#(.*?)['"]?\)$/;let RBe=(()=>{class n{_elementRef=N(Jn);_iconRegistry=N(Yx);_location=N(ABe);_errorHandler=N(Ho);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Nt.EMPTY;constructor(){const t=N(new Cle("aria-hidden"),{optional:!0}),r=N(TBe,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(xBe),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)bre.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(DBe):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(us(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){2&r&&(Fr("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),tg(i.color?"mat-"+i.color:""),Lr("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:[2,"inline","inline",Qi],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Fu,wi],ngContentSelectors:bBe,decls:1,vars:0,template:function(r,i){1&r&&(Tc(),Js(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),MBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or,or]})}return n})();const PBe=["*",[["mat-toolbar-row"]]],kBe=["*","mat-toolbar-row"];let NBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return n})(),OBe=(()=>{class n{_elementRef=N(Jn);_platform=N(ks);_document=N(En);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(1&r&&eb(s,NBe,5),2&r){let o;qa(o=Ka())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,i){2&r&&(tg(i.color?"mat-"+i.color:""),Lr("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[wi],ngContentSelectors:kBe,decls:2,vars:0,template:function(r,i){1&r&&(Tc(PBe),Js(0),Js(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return n})(),FBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or,or]})}return n})(),LBe=(()=>{class n{get vertical(){return this._vertical}set vertical(t){this._vertical=B9(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=B9(t)}_inset=!1;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,i){2&r&&(Fr("aria-orientation",i.vertical?"vertical":"horizontal"),Lr("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[wi],decls:0,vars:0,template:function(r,i){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return n})(),Ere=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or,or]})}return n})();function VBe(n,e){if(1&n){const t=Bi();te(0,"div",30),Dt("click",function(){const i=Cn(t).$implicit,s=Pe(2);return s.onFoodResultClick(i),Tn(s.closeSidebar())}),te(1,"div",31)(2,"span",32),ze(3),ie(),te(4,"div",33)(5,"span",34),ze(6),ie()(),te(7,"div",35)(8,"mat-icon",36),ze(9,"touch_app"),ie(),te(10,"span"),ze(11,"\u9ede\u64ca\u524d\u5f80\u8a72\u5546\u5e97"),ie()()(),te(12,"mat-icon",37),ze(13,"arrow_forward_ios"),ie()()}if(2&n){const t=e.$implicit;se(3),cs(t.foodName),se(3),cs(t.storeName)}}function BBe(n,e){if(1&n&&(te(0,"div",25)(1,"div",26)(2,"span",27),ze(3),ie()(),te(4,"div",28),st(5,VBe,14,2,"div",29),ie()()),2&n){const t=Pe();se(3),en("\u627e\u5230 ",t.foodSearchResults.length," \u500b\u7d50\u679c"),se(2),De("ngForOf",t.foodSearchResults)}}function UBe(n,e){1&n&&(te(0,"div",38)(1,"mat-icon",39),ze(2,"search_off"),ie(),te(3,"span"),ze(4,"\u627e\u4e0d\u5230\u76f8\u95dc\u98df\u7269"),ie()())}function jBe(n,e){1&n&&(te(0,"div",40),Et(1,"mat-spinner",41),te(2,"span"),ze(3,"\u641c\u5c0b\u4e2d..."),ie()())}function zBe(n,e){1&n&&Et(0,"img",46),2&n&&De("src",Pe(3).sevenElevenIconUrl,ri)}function HBe(n,e){1&n&&Et(0,"img",47),2&n&&De("src",Pe(3).familyMartIconUrl,ri)}function $Be(n,e){if(1&n){const t=Bi();te(0,"div",43),Dt("click",function(){Cn(t);const i=Pe().$implicit,s=Pe();return s.onSearchStore(i),Tn(s.closeSidebar())}),st(1,zBe,1,1,"img",44)(2,HBe,1,1,"img",45),te(3,"span",34),ze(4),ie()()}if(2&n){const t=Pe().$implicit;se(),De("ngIf",t.storeName.includes("7-11")),se(),De("ngIf",t.storeName.includes("\u5168\u5bb6")),se(2),cs(t.storeName)}}function WBe(n,e){if(1&n&&(Ds(0),st(1,$Be,5,3,"div",42),Rs()),2&n){const t=Pe();se(),De("ngIf",t.user)}}let GBe=(()=>{class n{constructor(t,r,i,s,o,a){this.authService=t,this.dialog=r,this.sevenElevenService=i,this.familyMartService=s,this.geolocationService=o,this.storeDataService=a,this.favoriteStores=[],this.userUpdated=new vn,this.favoriteStoresUpdated=new vn,this.searchStore=new vn,this.foodSearchResult=new vn,this.sevenElevenIconUrl=Os_sevenElevenUrl_icon,this.familyMartIconUrl=Os_familyMartUrl_icon,this.sidebarOpen=!1,this.foodSearchTerm="",this.foodSearchResults=[],this.isSearching=!1,this.hasStoreData=!1,this.storeDataService.stores$.subscribe(l=>{this.hasStoreData=l&&l.length>0})}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}closeSidebar(){this.sidebarOpen=!1}loginOrlogout(){this.user?(this.authService.logout(),this.user=null,this.favoriteStores=[],this.userUpdated.emit(null),this.favoriteStoresUpdated.emit([]),this.dialog.open(aE,{width:"300px",data:{title:"\u767b\u51fa\u6210\u529f",message:"\u5df2\u9806\u5229\u767b\u51fa",imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(r=>{this.favoriteStores=[]})):this.dialog.open(vBe,{width:"500px",data:{}}).afterClosed().subscribe(r=>{r&&this.authService.getUser().subscribe(i=>{i&&i.emailVerified&&(this.user=i,this.userUpdated.emit(i))})})}onSearchStore(t){this.searchStore.emit(t)}onSearchClick(){this.foodSearchTerm&&this.foodSearchTerm.length>=0&&(this.isSearching=!0,this.searchFoodInStores(this.foodSearchTerm))}getSearchPlaceholder(){return this.hasStoreData?"\u8f38\u5165\u98df\u7269\u540d\u7a31...":"\u8acb\u5148\u641c\u5c0b\u5546\u5e97"}searchFoodInStores(t){this.searchInExistingStores(t)}searchInExistingStores(t){this.isSearching=!0;const r=[],i=this.storeDataService.getStores();if(console.log("\u641c\u5c0b\u98df\u7269 - \u5546\u5e97\u8cc7\u6599:",i),console.log("\u641c\u5c0b\u95dc\u9375\u5b57:",t),!i||0===i.length)return this.foodSearchResults=[],void(this.isSearching=!1);i.forEach((o,a)=>{"\u5168\u5bb6"===o.label&&o.info&&o.info.forEach((l,c)=>{l.categories&&l.categories.forEach((u,h)=>{u.products&&u.products.forEach((m,y)=>{if(m.name){const b=this.calculateMatchScore(m.name,t);(0===t.length||b>0)&&r.push({foodName:m.name,storeName:o.name,storeType:"\u5168\u5bb6",store:{...o,latitude:o.latitude,longitude:o.longitude},distance:o.distance,remainingQty:m.qty,matchScore:b})}})})})});const s=i.filter(o=>"7-11"===o.label);s.length>0?this.searchSevenElevenProducts(s,t,r):this.finalizeSearchResults(r)}searchSevenElevenProducts(t,r,i){fg(t.map(o=>this.sevenElevenService.getItemsByStoreNo(o.StoreNo).pipe(Sl(a=>(console.error(`\u53d6\u5f97 7-11 \u5546\u5e97 ${o.StoreName} \u5546\u54c1\u5931\u6557:`,a),qe(null)))))).subscribe(o=>{o.forEach((a,l)=>{if(a&&a.isSuccess&&a.element.StoreStockItem){const c=t[l];a.element.StoreStockItem.CategoryStockItems.forEach(h=>{h.ItemList&&h.ItemList.length>0&&h.ItemList.forEach(m=>{if(m.ItemName){const y=this.calculateMatchScore(m.ItemName,r);(0===r.length||y>0)&&i.push({foodName:m.ItemName,storeName:`7-11${c.StoreName}\u9580\u5e02`,storeType:"7-11",store:{...c,Latitude:c.Latitude,Longitude:c.Longitude},distance:c.Distance,remainingQty:m.RemainingQty,matchScore:y})}})})}}),this.finalizeSearchResults(i)})}finalizeSearchResults(t){t.sort((r,i)=>i.matchScore!==r.matchScore?i.matchScore-r.matchScore:r.distance-i.distance),console.log("\u641c\u5c0b\u7d50\u679c:",t),this.foodSearchResults=t,this.isSearching=!1}performFoodSearch(t){return zn(this.sevenElevenService.getAccessToken()).pipe(Qt(r=>r&&r.element?(sessionStorage.setItem("711Token",r.element),this.searchFoodInBothStores(t)):qe([])),Sl(r=>(console.error("\u641c\u5c0b\u98df\u7269\u6642\u767c\u751f\u932f\u8aa4:",r),this.isSearching=!1,qe([]))))}searchFoodInBothStores(t){const i={Latitude:this.latitude,Longitude:this.longitude};return fg({sevenEleven:this.sevenElevenService.getNearByStoreList({CurrentLocation:{Latitude:this.latitude,Longitude:this.longitude},SearchLocation:{Latitude:this.latitude,Longitude:this.longitude}}),familyMart:this.familyMartService.getNearByStoreList(i),sevenElevenFoods:this.sevenElevenService.getFoodDetails(),familyMartFoods:this.familyMartService.getFoodDetails()}).pipe(Qt(({sevenEleven:s,familyMart:o})=>{const c=[];return s&&s.element&&s.element.StoreStockItemList&&s.element.StoreStockItemList.forEach(u=>{u.CategoryStockItems&&u.CategoryStockItems.forEach(h=>{h.StockItems&&h.StockItems.forEach(m=>{if(m.ProductName){const y=this.calculateMatchScore(m.ProductName,t);y>0&&c.push({foodName:m.ProductName,storeName:`7-11${u.StoreName}\u9580\u5e02`,storeType:"7-11",store:u,distance:u.Distance,remainingQty:m.RemainingQty,matchScore:y})}})})}),o&&1===o.code&&o.data&&o.data.forEach(u=>{u.info&&u.info.forEach(h=>{h.products&&h.products.forEach(m=>{if(m.name){const y=this.calculateMatchScore(m.name,t);y>0&&c.push({foodName:m.name,storeName:u.name,storeType:"\u5168\u5bb6",store:u,distance:u.distance,remainingQty:m.qty,matchScore:y})}})})}),c.sort((u,h)=>h.matchScore!==u.matchScore?h.matchScore-u.matchScore:u.distance-h.distance),this.foodSearchResults=c,this.isSearching=!1,qe(c)}))}onFoodResultClick(t){this.foodSearchResult.emit({store:t.store,storeType:t.storeType,foodName:t.foodName})}calculateMatchScore(t,r){if(0===r.length)return 50;const i=t.toLowerCase(),s=r.toLowerCase();if(i===s)return 100;if(i.startsWith(s))return 90;if(i.includes(s))return 70;const o=this.calculateFuzzyScore(i,s);if(o>.6)return Math.round(50*o);const a=i.split(/[\s\-_]+/),l=s.split(/[\s\-_]+/);let c=0;for(const u of l)for(const h of a)if(h.includes(u)||u.includes(h)){c+=30;break}return c}calculateFuzzyScore(t,r){if(0===r.length||0===t.length)return 0;const i=t.length,s=r.length;if(s>i)return 0;let o=0,a=0;for(let c=0;c<i&&a<s;c++)t[c]===r[a]&&(o++,a++);const l=o/s;return a===s?l+.2:l}static{this.\u0275fac=function(r){return new(r||n)(xe($S),xe(Cf),xe(kA),xe(cQ),xe(lQ),xe(yU))}}static{this.\u0275cmp=Kn({type:n,selectors:[["app-sider"]],inputs:{user:"user",favoriteStores:"favoriteStores"},outputs:{userUpdated:"userUpdated",favoriteStoresUpdated:"favoriteStoresUpdated",searchStore:"searchStore",foodSearchResult:"foodSearchResult"},decls:41,vars:14,consts:[[1,"toolbar"],["mat-icon-button","","aria-label","Menu",3,"click"],[1,"text-with-shadow"],[1,"sidebar-overlay",3,"click"],[1,"sidebar"],[1,"sidebar-header"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"search-section"],[1,"search-header"],[1,"search-icon"],[1,"search-title"],[1,"search-input-container"],[1,"search-input-wrapper"],["type","text",1,"search-input",3,"ngModelChange","keyup.enter","ngModel","placeholder","disabled"],[1,"search-button",3,"click","disabled"],["class","search-results",4,"ngIf"],["class","no-results",4,"ngIf"],["class","searching",4,"ngIf"],[1,"sidebar-content"],[1,"favorites-header"],[1,"favorites-icon"],[1,"favorites-title"],[4,"ngFor","ngForOf"],[1,"login-section"],[1,"login-btn",3,"click"],[1,"search-results"],[1,"result-header"],[1,"result-count"],[1,"result-list"],["class","result-item",3,"click",4,"ngFor","ngForOf"],[1,"result-item",3,"click"],[1,"result-info"],[1,"food-name"],[1,"store-details"],[1,"store-name"],[1,"click-hint"],[1,"hint-icon"],[1,"arrow-icon"],[1,"no-results"],[1,"no-results-icon"],[1,"searching"],["diameter","20"],["class","store-item",3,"click",4,"ngIf"],[1,"store-item",3,"click"],["alt","7-11","class","store-icon",3,"src",4,"ngIf"],["alt","FamilyMart","class","store-icon",3,"src",4,"ngIf"],["alt","7-11",1,"store-icon",3,"src"],["alt","FamilyMart",1,"store-icon",3,"src"]],template:function(r,i){1&r&&(te(0,"mat-toolbar",0)(1,"button",1),Dt("click",function(){return i.toggleSidebar()}),te(2,"mat-icon"),ze(3,"menu"),ie()(),te(4,"span",2),ze(5,"\u53cb\u5584\u9ed1\u8c93 Friendly Cat"),ie()(),te(6,"div",3),Dt("click",function(){return i.closeSidebar()}),ie(),te(7,"div",4)(8,"div",5)(9,"h3"),ze(10),ie(),te(11,"button",6),Dt("click",function(){return i.closeSidebar()}),te(12,"mat-icon"),ze(13,"close"),ie()()(),Et(14,"mat-divider"),te(15,"div",7)(16,"div",8)(17,"mat-icon",9),ze(18,"search"),ie(),te(19,"span",10),ze(20,"\u641c\u5c0b\u98df\u7269"),ie()(),te(21,"div",11)(22,"div",12)(23,"input",13),rb("ngModelChange",function(o){return WC(i.foodSearchTerm,o)||(i.foodSearchTerm=o),o}),Dt("keyup.enter",function(){return i.onSearchClick()}),ie(),te(24,"button",14),Dt("click",function(){return i.onSearchClick()}),te(25,"mat-icon"),ze(26,"search"),ie()()()(),st(27,BBe,6,2,"div",15)(28,UBe,5,0,"div",16)(29,jBe,4,0,"div",17),ie(),Et(30,"mat-divider"),te(31,"div",18)(32,"div",19)(33,"mat-icon",20),ze(34,"favorite"),ie(),te(35,"span",21),ze(36,"\u6536\u85cf\u5e97\u5bb6"),ie()(),st(37,WBe,2,1,"ng-container",22),te(38,"div",23)(39,"button",24),Dt("click",function(){return i.loginOrlogout(),i.closeSidebar()}),ze(40),ie()()()()),2&r&&(se(6),Lr("active",i.sidebarOpen),se(),Lr("open",i.sidebarOpen),se(3),cs(i.user?"\u53cb\u5584\u9ed1\u8c93 Friendly Cat":"\u767b\u5165\u5f8c\u53ef\u6536\u85cf\u5e97\u5bb6"),se(13),nb("ngModel",i.foodSearchTerm),De("placeholder",i.getSearchPlaceholder())("disabled",!i.hasStoreData),se(),De("disabled",!i.hasStoreData),se(3),De("ngIf",i.foodSearchResults.length>0),se(),De("ngIf",i.foodSearchTerm&&0===i.foodSearchResults.length&&!i.isSearching),se(),De("ngIf",i.isSearching),se(8),De("ngForOf",i.favoriteStores),se(3),en(" ",i.user?i.user.displayName+" \u767b\u51fa":" \u767b\u5165"," "))},dependencies:[_b,Jh,af,Tb,Mb,qne,pre,RBe,OBe,LBe],styles:['@charset "UTF-8";.toolbar[_ngcontent-%COMP%]{background-color:#f4efe6;color:#019863;box-shadow:4px 0 6px #0000001a;position:fixed;top:0;left:0;right:0;z-index:1000}.text-with-shadow[_ngcontent-%COMP%]{font-weight:700;text-shadow:2px 2px 5px rgba(0,0,0,.2)}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:9998;opacity:0;visibility:hidden;transition:all .3s ease}.sidebar-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:-300px;width:300px;height:100vh;background-color:#fff;box-shadow:2px 0 10px #0000001a;z-index:9999;transition:left .3s ease;overflow-y:auto}.sidebar.open[_ngcontent-%COMP%]{left:0}.sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background-color:#f4efe6}.sidebar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:#019863}.sidebar-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#a18249}.sidebar-content[_ngcontent-%COMP%]{padding:16px 0}.store-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;cursor:pointer;transition:background-color .2s ease}.store-item[_ngcontent-%COMP%]:hover{background-color:#f4efe6}.store-item[_ngcontent-%COMP%]   .store-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:12px;display:inline-block;vertical-align:middle}.store-item[_ngcontent-%COMP%]   .store-name[_ngcontent-%COMP%]{color:#a18249;font-size:14px;flex:1}.login-section[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e0e0e0;margin-top:16px}.login-section[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background-color:#a18249;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer;transition:background-color .2s ease}.login-section[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-color:#1c160c}.search-section[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0}.search-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:12px}.search-header[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:#a18249;margin-right:8px}.search-header[_ngcontent-%COMP%]   .search-title[_ngcontent-%COMP%]{font-weight:700;color:#a18249;font-size:14px}.search-input-container[_ngcontent-%COMP%]{margin-bottom:16px}.search-input-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ddd;border-radius:6px;overflow:hidden;transition:border-color .2s ease}.search-input-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:#a18249}.search-input-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]:has(.search-input:disabled){background-color:#f5f5f5;border-color:#e0e0e0;cursor:not-allowed}.search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:none;font-size:14px;outline:none;background:transparent}.search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#999;cursor:not-allowed}.search-input-container[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:8px 12px;background-color:#a18249;color:#fff;border:none;cursor:pointer;transition:background-color .2s ease}.search-input-container[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1c160c}.search-input-container[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.search-input-container[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.search-results[_ngcontent-%COMP%]   .result-header[_ngcontent-%COMP%]{margin-bottom:8px}.search-results[_ngcontent-%COMP%]   .result-header[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:12px;color:#666}.search-results[_ngcontent-%COMP%]   .result-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;border-radius:6px;cursor:pointer;transition:background-color .2s ease;margin-bottom:4px}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]:hover{background-color:#f4efe6}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .food-name[_ngcontent-%COMP%]{font-weight:700;color:#a18249;font-size:14px;margin-bottom:4px}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:4px}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]   .store-name[_ngcontent-%COMP%]{color:#666;font-size:12px;margin-bottom:2px}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]   .store-type[_ngcontent-%COMP%]{color:#999;font-size:11px;margin-bottom:2px}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]   .store-distance[_ngcontent-%COMP%]{display:flex;align-items:center;color:#a18249;font-size:11px;font-weight:500}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]   .store-distance[_ngcontent-%COMP%]   .distance-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-right:4px}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .click-hint[_ngcontent-%COMP%]{display:flex;align-items:center;color:#999;font-size:10px;font-style:italic}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .click-hint[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px;margin-right:4px}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{color:#ccc;font-size:16px}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;color:#999}.no-results[_ngcontent-%COMP%]   .no-results-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.no-results[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.searching[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:20px;color:#666}.searching[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.searching[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.favorites-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 16px 8px}.favorites-header[_ngcontent-%COMP%]   .favorites-icon[_ngcontent-%COMP%]{color:#a18249;margin-right:8px}.favorites-header[_ngcontent-%COMP%]   .favorites-title[_ngcontent-%COMP%]{font-weight:700;color:#a18249;font-size:14px}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:280px;left:-280px}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%]{width:100%;left:-100%}}']})}}return n})();const Zx=n=>({opacity:n});function qBe(n,e){if(1&n&&(te(0,"div",29)(1,"span",30),ze(2),Ms(3,"async"),Et(4,"mat-progress-spinner",31),ie()()),2&n){const t=Pe();se(2),en(" ",Qh(3,1,t.loadingService.message$)," ")}}function KBe(n,e){1&n&&(te(0,"div",32),ze(1," \u770b\u770b\u9644\u8fd1\u6709\u5565\u597d\u5403\u7684\u5427\uff01 "),ie())}function QBe(n,e){if(1&n&&(te(0,"div",35),Et(1,"img",36),te(2,"div",37)(3,"span"),ze(4),ie(),te(5,"span",38),ze(6),ie()()()),2&n){const t=Pe().$implicit,r=Pe();se(),Uu("src",r.sevenElevenIconUrl,ri),se(3),en("",t.name,"\u9580\u5e02"),se(2),cs(t.addr)}}function YBe(n,e){if(1&n&&(te(0,"div",35),Et(1,"img",39),te(2,"div",37)(3,"span"),ze(4),ie(),te(5,"span",38),ze(6),ie()()()),2&n){const t=Pe().$implicit,r=Pe();se(),Uu("src",r.familyMartIconUrl,ri),se(3),en("",t.name.replace("\u5e97",""),"\u9580\u5e02"),se(2),cs(t.addr)}}function XBe(n,e){if(1&n&&(te(0,"mat-option",33),st(1,QBe,7,3,"div",34)(2,YBe,7,3,"div",34),ie()),2&n){const t=e.$implicit;De("value",t),se(),De("ngIf","7-11"===t.label),se(),De("ngIf","\u5168\u5bb6"===t.label)}}function ZBe(n,e){1&n&&ng(0)}function JBe(n,e){if(1&n&&(te(0,"p",63),ze(1),Ms(2,"round"),ie()),2&n){const t=Pe(4).$implicit;se(),en(" \u8ddd\u96e2\u60a8: ",ig(2,1,t.distance,1)," ")}}function eUe(n,e){1&n&&(Ss(),te(0,"svg",64),Et(1,"path",65),ie())}function tUe(n,e){1&n&&(Ss(),te(0,"svg",66),Et(1,"path",65),ie())}function nUe(n,e){if(1&n){const t=Bi();te(0,"div",68),Dt("click",function(){Cn(t);const i=Pe().$implicit,s=Pe(4).$implicit;return Tn(Pe(2).toggleSubCategoryDetails(s,i))}),Et(1,"img",69),te(2,"div")(3,"span",70),ze(4),ie(),te(5,"div",71),ze(6),ie()()()}if(2&n){const t=Pe().$implicit,r=Pe(4).$implicit,i=Pe(2);qv("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n                      ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Lr("pointer-events-none",0===i.getSubCategoryTotalQty(r,t)),se(),Uu("alt",t.Name),De("src",t.ImageUrl,ri)("ngStyle",ib(10,Zx,0===i.getSubCategoryTotalQty(r,t)?.3:1)),se(3),cs(t.Name),se(2),en(" ",i.getSubCategoryTotalQty(r,t)," ")}}function rUe(n,e){if(1&n&&(Ds(0),st(1,nUe,7,12,"div",67),Rs()),2&n){const t=e.$implicit,r=Pe(4).$implicit,i=Pe(2);se(),De("ngIf",i.getSubCategoryTotalQty(r,t)>0)}}function iUe(n,e){if(1&n&&(te(0,"div",72),Et(1,"app-display",73),ie()),2&n){const t=Pe(6);se(),De("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetails711)}}function sUe(n,e){if(1&n){const t=Bi();Ds(0),te(1,"div",47)(2,"div",48)(3,"div",49),Et(4,"img",50),ie(),te(5,"div",51)(6,"h2",52),ze(7),te(8,"a",53),Et(9,"img",54),ie()(),st(10,JBe,3,4,"p",55),ie()(),te(11,"div",56)(12,"button",57),Dt("click",function(){Cn(t);const i=Pe(3).$implicit;return Tn(Pe(2).toggleFavorite(i))}),st(13,eUe,2,0,"svg",58)(14,tUe,2,0,"svg",59),ie()()(),te(15,"div",60)(16,"div",61),st(17,rUe,2,1,"ng-container",40),Ms(18,"slice"),ie(),st(19,iUe,2,3,"div",62),ie(),Rs()}if(2&n){const t=Pe(3).$implicit,r=Pe(2);se(4),De("src",r.sevenElevenIconUrl,ri),se(3),en(" 7-11",t.StoreName,"\u9580\u5e02 "),se(),qh("href","https://www.google.com/maps/search/7-ELEVEN",t.StoreName,"\u9580\u5e02",ri),se(2),De("ngIf",t.distance>=1),se(3),De("ngIf",r.isFavorite(t)&&r.user),se(),De("ngIf",!r.isFavorite(t)&&r.user),se(3),De("ngForOf",ob(18,9,r.foodCategories,0,10)),se(2),De("ngIf",r.selectedCategory&&r.selectedStore===t)}}function oUe(n,e){if(1&n&&(te(0,"div",45),st(1,sUe,20,13,"ng-container",46),ie()),2&n){const t=Pe(2).$implicit;se(),De("ngIf","7-11"===t.label&&t.RemainingQty>0)}}function aUe(n,e){if(1&n&&(te(0,"p",63),ze(1),Ms(2,"round"),ie()),2&n){const t=Pe(3).$implicit;se(),en(" \u8ddd\u96e2\u60a8: ",ig(2,1,t.distance,1)," ")}}function lUe(n,e){1&n&&(Ss(),te(0,"svg",64),Et(1,"path",65),ie())}function cUe(n,e){1&n&&(Ss(),te(0,"svg",66),Et(1,"path",65),ie())}function uUe(n,e){if(1&n){const t=Bi();te(0,"div",68),Dt("click",function(){const i=Cn(t).$implicit,s=Pe(3).$implicit;return Tn(Pe(2).toggleSubCategoryDetails(s,i))}),Et(1,"img",69),te(2,"div")(3,"span",70),ze(4),ie(),te(5,"div",71),ze(6),ie()()()}if(2&n){const t=e.$implicit,r=Pe(3).$implicit,i=Pe(2);qv("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n            ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Lr("pointer-events-none",0===i.getFSubCategoryQty(r,t)),se(),Uu("alt",i.getFCatName(t)),De("src",i.getFUrl(t),ri)("ngStyle",ib(10,Zx,0===i.getFSubCategoryQty(r,t)?.3:1)),se(3),cs(i.getFCatName(t)),se(2),en(" ",i.getFSubCategoryQty(r,t)," ")}}function dUe(n,e){if(1&n&&(te(0,"div",76),Et(1,"app-display",77),ie()),2&n){const t=Pe(5);se(),De("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetailsFamilyMart)}}function hUe(n,e){if(1&n){const t=Bi();te(0,"div",45)(1,"div",47)(2,"div",48)(3,"div",49),Et(4,"img",50),ie(),te(5,"div",51)(6,"h2",52),ze(7),te(8,"a",53),Et(9,"img",54),ie()(),st(10,aUe,3,4,"p",55),ie()(),te(11,"div",56)(12,"button",57),Dt("click",function(){Cn(t);const i=Pe(2).$implicit;return Tn(Pe(2).toggleFavorite(i))}),st(13,lUe,2,0,"svg",58)(14,cUe,2,0,"svg",59),ie()()(),te(15,"div",61),st(16,uUe,7,12,"div",74),Ms(17,"slice"),ie(),st(18,dUe,2,3,"div",75),ie()}if(2&n){const t=Pe(2).$implicit,r=Pe(2);se(4),De("src",r.familyMartIconUrl,ri),se(3),en(" ",t.name," "),se(),qh("href","https://www.google.com/maps/search/\u5168\u5bb6\u4fbf\u5229\u5546\u5e97",r.fStoreName(t.name),"",ri),se(2),De("ngIf",t.distance>=1),se(3),De("ngIf",r.isFavorite(t)&&r.user),se(),De("ngIf",!r.isFavorite(t)&&r.user),se(2),De("ngForOf",ob(17,9,t.info,0,10)),se(2),De("ngIf",r.selectedCategory&&r.selectedStore===t)}}function fUe(n,e){if(1&n&&(te(0,"div",42)(1,"div",43),st(2,oUe,2,1,"div",44)(3,hUe,19,13,"div",44),ie()()),2&n){const t=Pe().$implicit;se(2),De("ngIf",t.RemainingQty>0),se(),De("ngIf","\u5168\u5bb6"===t.label)}}function pUe(n,e){if(1&n&&(Ds(0),st(1,fUe,4,2,"div",41),Rs()),2&n){const t=Pe(2);se(),De("ngIf",t.totalStoresShowList.length>0)}}function mUe(n,e){1&n&&st(0,pUe,2,1,"ng-container",40),2&n&&De("ngForOf",Pe().totalStoresShowList)}function gUe(n,e){1&n&&(te(0,"div",79),ze(1," \u60a8\u641c\u5c0b\u7684\u5546\u5e97\u76ee\u524d\u7121\u6298\u6263\u5546\u54c1\uff0c\u4ee5\u4e0b\u70ba\u9644\u8fd1\u5e97\u5bb6\uff1a "),ie())}function _Ue(n,e){if(1&n&&(Ds(0),te(1,"div",42)(2,"div",43),st(3,gUe,2,0,"div",78),ie()(),Et(4,"br"),Rs()),2&n){const t=Pe(2);se(3),De("ngIf",t.isLocationSearchMode)}}function yUe(n,e){if(1&n&&(te(0,"p",63),ze(1),Ms(2,"round"),ie()),2&n){const t=Pe(4).$implicit;se(),en(" \u8ddd\u96e2\u60a8\u641c\u5c0b\u7684\u5546\u5e97: ",ig(2,1,t.distance,1)," ")}}function vUe(n,e){1&n&&(te(0,"p",81),ze(1," ( \u60a8\u641c\u5c0b\u7684\u5e97\u5bb6 ) "),ie())}function bUe(n,e){1&n&&(Ss(),te(0,"svg",64),Et(1,"path",65),ie())}function EUe(n,e){1&n&&(Ss(),te(0,"svg",66),Et(1,"path",65),ie())}function IUe(n,e){if(1&n){const t=Bi();te(0,"div",68),Dt("click",function(){Cn(t);const i=Pe().$implicit,s=Pe(4).$implicit;return Tn(Pe(2).toggleSubCategoryDetails(s,i))}),Et(1,"img",69),te(2,"div")(3,"span",70),ze(4),ie(),te(5,"div",71),ze(6),ie()()()}if(2&n){const t=Pe().$implicit,r=Pe(4).$implicit,i=Pe(2);qv("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n                      ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Lr("pointer-events-none",0===i.getSubCategoryTotalQty(r,t)),se(),Uu("alt",t.Name),De("src",t.ImageUrl,ri)("ngStyle",ib(10,Zx,0===i.getSubCategoryTotalQty(r,t)?.3:1)),se(3),cs(t.Name),se(2),en(" ",i.getSubCategoryTotalQty(r,t)," ")}}function wUe(n,e){if(1&n&&(Ds(0),st(1,IUe,7,12,"div",67),Rs()),2&n){const t=e.$implicit,r=Pe(4).$implicit,i=Pe(2);se(),De("ngIf",i.getSubCategoryTotalQty(r,t)>0)}}function CUe(n,e){if(1&n&&(te(0,"div",72),Et(1,"app-display",73),ie()),2&n){const t=Pe(6);se(),De("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetails711)}}function TUe(n,e){if(1&n){const t=Bi();Ds(0),te(1,"div",47)(2,"div",48)(3,"div",49),Et(4,"img",50),ie(),te(5,"div",51)(6,"h2",52),ze(7),te(8,"a",53),Et(9,"img",54),ie()(),st(10,yUe,3,4,"p",55)(11,vUe,2,0,"p",80),ie()(),te(12,"div",56)(13,"button",57),Dt("click",function(){Cn(t);const i=Pe(3).$implicit;return Tn(Pe(2).toggleFavorite(i))}),st(14,bUe,2,0,"svg",58)(15,EUe,2,0,"svg",59),ie()()(),te(16,"div",60)(17,"div",61),st(18,wUe,2,1,"ng-container",40),Ms(19,"slice"),ie(),st(20,CUe,2,3,"div",62),ie(),Rs()}if(2&n){const t=Pe(3).$implicit,r=Pe(2);se(4),De("src",r.sevenElevenIconUrl,ri),se(3),en(" 7-11",t.StoreName,"\u9580\u5e02 "),se(),qh("href","https://www.google.com/maps/search/7-ELEVEN",t.StoreName,"\u9580\u5e02",ri),se(2),De("ngIf",t.distance>=1),se(),De("ngIf",t.distance<=1),se(3),De("ngIf",r.isFavorite(t)&&r.user),se(),De("ngIf",!r.isFavorite(t)&&r.user),se(3),De("ngForOf",ob(19,10,r.foodCategories,0,10)),se(2),De("ngIf",r.selectedCategory&&r.selectedStore===t)}}function AUe(n,e){if(1&n&&(te(0,"div",45),st(1,TUe,21,14,"ng-container",46),ie()),2&n){const t=Pe(2).$implicit;se(),De("ngIf","7-11"===t.label&&t.RemainingQty>0)}}function SUe(n,e){if(1&n&&(te(0,"p",63),ze(1),Ms(2,"round"),ie()),2&n){const t=Pe(3).$implicit;se(),en(" \u8ddd\u96e2\u60a8\u641c\u5c0b\u7684\u5546\u5e97: ",ig(2,1,t.distance,1)," ")}}function xUe(n,e){1&n&&(te(0,"p",81),ze(1," ( \u60a8\u641c\u5c0b\u7684\u5e97\u5bb6 ) "),ie())}function DUe(n,e){1&n&&(Ss(),te(0,"svg",64),Et(1,"path",65),ie())}function RUe(n,e){1&n&&(Ss(),te(0,"svg",66),Et(1,"path",65),ie())}function MUe(n,e){if(1&n){const t=Bi();te(0,"div",68),Dt("click",function(){const i=Cn(t).$implicit,s=Pe(3).$implicit;return Tn(Pe(2).toggleSubCategoryDetails(s,i))}),Et(1,"img",69),te(2,"div")(3,"span",70),ze(4),ie(),te(5,"div",71),ze(6),ie()()()}if(2&n){const t=e.$implicit,r=Pe(3).$implicit,i=Pe(2);qv("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n            ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Lr("pointer-events-none",0===i.getFSubCategoryQty(r,t)),se(),Uu("alt",i.getFCatName(t)),De("src",i.getFUrl(t),ri)("ngStyle",ib(10,Zx,0===i.getFSubCategoryQty(r,t)?.3:1)),se(3),cs(i.getFCatName(t)),se(2),en(" ",i.getFSubCategoryQty(r,t)," ")}}function PUe(n,e){if(1&n&&(te(0,"div",76),Et(1,"app-display",77),ie()),2&n){const t=Pe(5);se(),De("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetailsFamilyMart)}}function kUe(n,e){if(1&n){const t=Bi();te(0,"div",45)(1,"div",47)(2,"div",48)(3,"div",49),Et(4,"img",50),ie(),te(5,"div",51)(6,"h2",52),ze(7),te(8,"a",53),Et(9,"img",54),ie()(),st(10,SUe,3,4,"p",55)(11,xUe,2,0,"p",80),ie()(),te(12,"div",56)(13,"button",57),Dt("click",function(){Cn(t);const i=Pe(2).$implicit;return Tn(Pe(2).toggleFavorite(i))}),st(14,DUe,2,0,"svg",58)(15,RUe,2,0,"svg",59),ie()()(),te(16,"div",61),st(17,MUe,7,12,"div",74),Ms(18,"slice"),ie(),st(19,PUe,2,3,"div",75),ie()}if(2&n){const t=Pe(2).$implicit,r=Pe(2);se(4),De("src",r.familyMartIconUrl,ri),se(3),en(" ",t.name," "),se(),qh("href","https://www.google.com/maps/search/\u5168\u5bb6\u4fbf\u5229\u5546\u5e97",r.fStoreName(t.name),"",ri),se(2),De("ngIf",t.distance>=1),se(),De("ngIf",t.distance<=1),se(3),De("ngIf",r.isFavorite(t)&&r.user),se(),De("ngIf",!r.isFavorite(t)&&r.user),se(2),De("ngForOf",ob(18,10,t.info,0,10)),se(2),De("ngIf",r.selectedCategory&&r.selectedStore===t)}}function NUe(n,e){if(1&n&&(te(0,"div",42)(1,"div",43),st(2,AUe,2,1,"div",44)(3,kUe,20,14,"div",44),ie()()),2&n){const t=Pe().$implicit;se(2),De("ngIf",t.RemainingQty>0),se(),De("ngIf","\u5168\u5bb6"===t.label)}}function OUe(n,e){if(1&n&&(Ds(0),st(1,NUe,4,2,"div",41),Rs()),2&n){const t=Pe(2);se(),De("ngIf",t.totalStoresShowList.length>0)}}function FUe(n,e){if(1&n&&st(0,_Ue,5,1,"ng-container",46)(1,OUe,2,1,"ng-container",40),2&n){const t=Pe();De("ngIf",(null==t.totalStoresShowList[0]?null:t.totalStoresShowList[0].distance)>1||0===(null==t.totalStoresShowList[0]?null:t.totalStoresShowList[0].remainingQty)),se(),De("ngForOf",t.totalStoresShowList)}}const LUe=[{path:"**",component:(()=>{class n{constructor(t,r,i,s,o,a,l,c,u){this.http=t,this.geolocationService=r,this.sevenElevenService=i,this.familyMartService=s,this.authService=o,this.loadingService=a,this.dialog=l,this.firestore=c,this.storeDataService=u,this.user=null,this.isLocationSearchMode=!0,this.searchTerm="",this.searchSelectedStore=null,this.selectedStoreName="",this.foodDetails711=[],this.foodDetailsFamilyMart=[],this.storeFilter="all",this.dropDown711List=[],this.dropDownFamilyMartList=[],this.unifiedDropDownList=[],this.sevenElevenIconUrl=Os_sevenElevenUrl_icon,this.familyMartIconUrl=Os_familyMartUrl_icon,this.zipcodes=[],this.cities=[],this.filteredDistricts=[],this.zipcodeList=[],this.selectedCity=null,this.selectedDistrict=null,this.selectedZipcode=null,this.foodCategories=[],this.nearby711Stores=[],this.nearbyFamilyMartStores=[],this.totalStoresShowList=[],this.filteredStoresList=[],this.favoriteStores=[],this.searchInput$=new E,this.searchForm=new lf({selectedStoreName:new gg("")})}ngOnInit(){this.searchInput$.pipe(DN(300),SA()).subscribe(t=>{this.handleSearch(t)}),this.init()}getCityName(){return this.http.get("https://demeter.5fpro.com/tw/zipcodes.json").pipe(si(r=>{this.zipcodes=r,this.cities=[...new Set(r.map(i=>i.city_name))],this.zipcodeList=[...new Set(r.map(i=>i.zipcode))]}))}onCityChange(t){this.filteredDistricts=this.zipcodes.filter(r=>r.city_name===t),this.selectedDistrict=null,this.selectedZipcode=null}onDistrictChange(t){this.selectedZipcode=t}handleError(t){switch(t.code){case 1:return"\u4f7f\u7528\u8005\u62d2\u7d55\u4f4d\u7f6e\u5b58\u53d6";case 2:return"\u7121\u6cd5\u53d6\u5f97\u4f4d\u7f6e\u8cc7\u8a0a";case 3:return"\u4f4d\u7f6e\u8acb\u6c42\u903e\u6642";default:return"\u672a\u77e5\u932f\u8aa4"}}init(){this.authService.getUser().subscribe(t=>{t&&t.emailVerified&&(this.user=t,this.loadFavoriteStores())}),this.loadingService.show("\u8f09\u5165\u5546\u5e97\u8cc7\u8a0a\u4e2d\uff0c\u8acb\u7a0d\u5f8c\u55b5"),this.sevenElevenService.getFoodDetails().subscribe(t=>{this.foodDetails711=t}),this.familyMartService.getFoodDetails().subscribe(t=>{this.foodDetailsFamilyMart=t}),this.getFamilyMartAllStore(),qe(!0).pipe(Qt(()=>this.sevenElevenService.getAccessToken()),Qt(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):qe([])),Sl(t=>(console.error("Error:",t),qe([])))).subscribe(t=>{t&&t.element?(this.foodCategories=t.element,this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}getFamilyMartAllStore(){this.familyMartService.getStores().subscribe(t=>{t.length>0&&(this.dropDownFamilyMartList=t)})}getFoodSubCategoryImage(t){for(let r of this.foodCategories)if(r.Children.find(s=>s.ID===t))return r.ImageUrl;return null}getSubCategoryTotalQty(t,r){let i=0;for(const s of t.CategoryStockItems)for(const o of r.Children)s.NodeID===o.ID&&(i+=s.RemainingQty);return i}toggleSubCategoryDetails(t,r){this.selectedCategory=r,this.selectedStore=t}onInput(t){this.searchInput$.next(t.target.value)}handleSearch(t){t.length>=0?(this.loadingService.show("\u6b63\u5728\u70ba\u60a8\u641c\u5c0b\u5e97\u5bb6"),this.unifiedDropDownList=[],this.latitude||this.longitude?qe(!0).pipe(Qt(()=>this.sevenElevenService.getAccessToken()),Qt(r=>r&&r.element?(sessionStorage.setItem("711Token",r.element),this.sevenElevenService.getStoreByAddress(t)):qe([]))).subscribe(r=>{if(r&&r.isSuccess){this.dropDown711List=r.element;const i=this.dropDownFamilyMartList.map(u=>({...u,Name:u.Name.replace("\u5168\u5bb6","")})).filter(u=>0===t.length||u.Name.includes(t)||u.addr.includes(t)),s=this.dropDown711List.map(u=>({...u,Name:u.StoreName.replace("711","")})).filter(u=>0===t.length||u.Name.includes(t)||u.Address.includes(t)),o=i.map(u=>({name:u.Name,addr:u.addr,label:"\u5168\u5bb6",longitude:u.px_wgs84,latitude:u.py_wgs84}));s.map(u=>({name:u.StoreName,addr:u.Address,label:"7-11",longitude:u.Longitude,latitude:u.Latitude})).forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)}),o.forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)});const l=this.unifiedDropDownList.filter(u=>0===t.length||u.name.includes(t)).sort((u,h)=>(0,Ju.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,Ju.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude})),c=this.unifiedDropDownList.filter(u=>(0===t.length||u.addr.includes(t))&&!l.includes(u)).sort((u,h)=>(0,Ju.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,Ju.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude}));this.unifiedDropDownList=[...l,...c],0===this.unifiedDropDownList.length?(this.loadingService.show("\u597d\u50cf\u627e\u4e0d\u5230\u5e97\u5bb6\u8036\uff5e\u8acb\u91cd\u65b0\u641c\u5c0b"),setTimeout(()=>{this.loadingService.hide()},2e3)):this.loadingService.hide()}},r=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",r),this.loadingService.hide()}):zn(this.geolocationService.getCurrentPosition()).pipe(Qt(r=>{const s=r.coords.longitude;return this.latitude=r.coords.latitude,this.longitude=s,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),qe([])}),Qt(()=>this.sevenElevenService.getAccessToken()),Qt(r=>r&&r.element?(sessionStorage.setItem("711Token",r.element),this.sevenElevenService.getStoreByAddress(t)):[])).subscribe(r=>{if(r&&r.isSuccess){this.dropDown711List=r.element;const i=this.dropDownFamilyMartList.map(u=>({...u,Name:u.Name.replace("\u5168\u5bb6","")})).filter(u=>0===t.length||u.Name.includes(t)||u.addr.includes(t)),s=this.dropDown711List.map(u=>({...u,Name:u.StoreName.replace("711","")})).filter(u=>0===t.length||u.Name.includes(t)||u.Address.includes(t)),o=i.map(u=>({name:u.Name,addr:u.addr,label:"\u5168\u5bb6",longitude:u.px_wgs84,latitude:u.py_wgs84}));s.map(u=>({name:u.StoreName,addr:u.Address,label:"7-11",longitude:u.Longitude,latitude:u.Latitude})).forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)}),o.forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)});const l=this.unifiedDropDownList.filter(u=>0===t.length||u.name.includes(t)).sort((u,h)=>(0,Ju.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,Ju.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude})),c=this.unifiedDropDownList.filter(u=>(0===t.length||u.addr.includes(t))&&!l.includes(u)).sort((u,h)=>(0,Ju.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,Ju.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude}));this.unifiedDropDownList=[...l,...c],0===this.unifiedDropDownList.length?(this.loadingService.show("\u597d\u50cf\u627e\u4e0d\u5230\u5e97\u5bb6\u8036\uff5e\u8acb\u91cd\u65b0\u641c\u5c0b"),setTimeout(()=>{this.loadingService.hide()},2e3)):this.loadingService.hide()}},r=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",r),this.loadingService.hide()})):this.unifiedDropDownList=[]}onOptionSelect(t,r,i){this.isLocationSearchMode=!1,this.totalStoresShowList=[],this.searchSelectedStore=t?.option.value.name,t?.option.value&&(this.searchTerm=t.option.value.label+t.option.value.name.replace("\u5e97","")+"\u9580\u5e02");const a=void 0!==i?i:Number(t?.option.value.longitude),l=void 0!==r?r:Number(t?.option.value.latitude);this.loadingService.show("\u6b63\u5728\u641c\u5c0b\u5e97\u5bb6\u55b5"),zn(this.geolocationService.getCurrentPosition()).pipe(Qt(c=>{const h=c.coords.longitude;return this.latitude=c.coords.latitude,this.longitude=h,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),qe([])}),Qt(c=>c?this.sevenElevenService.getAccessToken():[]),Qt(c=>c&&c.element?(sessionStorage.setItem("711Token",c.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):qe([]))).subscribe(c=>{c?(this.searchCombineAndTransformStores(l,a),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}onSubmit(){console.log("\u8f38\u5165\u7684\u641c\u5c0b\u95dc\u9375\u5b57:",this.searchSelectedStore)}onUseCurrentLocation(){this.isLocationSearchMode=!0,this.totalStoresShowList=[],this.unifiedDropDownList=[],this.searchTerm="",this.loadingService.show("\u641c\u5c0b\u5e97\u5bb6\u4e2d\u55b5"),zn(this.geolocationService.getCurrentPosition()).pipe(Qt(t=>{const i=t.coords.longitude;return this.latitude=t.coords.latitude,this.longitude=i,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),qe([])}),Qt(t=>t?this.sevenElevenService.getAccessToken():[]),Qt(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):qe([]))).subscribe(t=>{t?(this.searchCombineAndTransformStores(),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}combineStoreList(t,r){this.totalStoresShowList=[],this.nearby711Stores.forEach(i=>{const s={...i,storeName:`7-11${i.StoreName}\u9580\u5e02`,label:"7-11",distance:i.Distance,remainingQty:i.RemainingQty,showDistance:!0,CategoryStockItems:i.CategoryStockItems};this.totalStoresShowList.push(s)}),this.nearbyFamilyMartStores.forEach(i=>{const s={...i,storeName:i.name,label:"\u5168\u5bb6",distance:i.distance,showDistance:!0};this.totalStoresShowList.push(s)}),t&&r?(this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),console.log("\u4f7f\u7528\u8005\u641c\u5c0b\u5e97\u5bb6\u9644\u8fd1\u7684\u5546\u5e97:",this.totalStoresShowList)):(this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),console.log("\u4f7f\u7528\u8005\u9644\u8fd1\u7684\u5546\u5e97:",this.totalStoresShowList))}searchCombineAndTransformStores(t,r){const i=t||this.latitude,s=r||this.longitude,a={Latitude:i,Longitude:s};fg({sevenEleven:this.sevenElevenService.getNearByStoreList({CurrentLocation:{Latitude:i,Longitude:s},SearchLocation:{Latitude:i,Longitude:s}}),familyMart:this.familyMartService.getNearByStoreList(a)}).subscribe(({sevenEleven:l,familyMart:c})=>{l&&l.element&&l.element.StoreStockItemList&&(this.nearby711Stores=l.element.StoreStockItemList.sort((u,h)=>u.Distance-h.Distance)),c&&1===c.code&&(this.nearbyFamilyMartStores=c.data.sort((u,h)=>u.distance-h.distance)),t&&r?(this.combineStoreList(t,r),this.storeDataService.setStores(this.totalStoresShowList),this.storeDataService.setIsUserLocationSearch(!1)):(this.combineStoreList(),this.storeDataService.setStores(this.totalStoresShowList),this.storeDataService.setIsUserLocationSearch(!0))},l=>{console.error("Error fetching store data:",l)})}getFStoreQty(t){var r=0;return t.info.forEach(i=>{r+=i.qty}),r}getFUrl(t){return t.iconURL}getFCatName(t){return t.name}getFSubCategoryQty(t,r){return r.qty}fStoreName(t){return t?t.replace("\u5168\u5bb6",""):""}loadFavoriteStores(){this.user.emailVerified&&this.firestore.collection("users").doc(this.user.uid).collection("favorites").valueChanges().subscribe(r=>{this.favoriteStores=r,console.log("favoriteStores",this.favoriteStores)})}toggleFavorite(t){if(this.user.emailVerified){const i=this.firestore.collection("users").doc(this.user.uid).collection("favorites").doc(t.storeName);this.isFavorite(t)?this.dialog.open(aE,{data:{title:"\u53d6\u6d88\u6536\u85cf",message:`\u5df2\u5c07\u300e${t.storeName}\u300f\u5f9e\u6536\u85cf\u4e2d\u79fb\u9664`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(o=>{i.delete()}):this.dialog.open(aE,{data:{title:"\u65b0\u589e\u6536\u85cf",message:`\u300e${t.storeName}\u300f\u5df2\u52a0\u5165\u60a8\u7684\u6536\u85cf\u5e97\u5bb6`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(o=>{const a={storeName:t.storeName};t.StoreName&&(a.store711Name=t.StoreName,a.label="7-11"),t.longitude&&t.latitude&&(a.storeFLongitude=t.longitude,a.storeFLatitude=t.latitude,a.label="\u5168\u5bb6"),i.set(a)})}else console.log("\u7528\u6236\u5c1a\u672a\u767b\u5165\u6216\u4fe1\u7bb1\u672a\u9a57\u8b49")}isFavorite(t){return this.favoriteStores.some(r=>r.storeName===t.storeName)}onUserUpdated(t){this.user=t,t&&this.loadFavoriteStores()}onFavoriteStoresUpdated(t){this.favoriteStores=t}onFavoriteStoreSearch(t){console.log("\u641c\u5c0b\u6536\u85cf\u5e97\u5bb6",t),this.loadingService.show("\u5e6b\u4f60\u627e\u770b\u770b\u5537");var r=0,i=0;"\u5168\u5bb6"===t.label?(this.onOptionSelect(null,r=t.storeFLatitude,i=t.storeFLongitude),this.searchTerm=""):zn(this.geolocationService.getCurrentPosition()).pipe(Qt(s=>{const a=s.coords.longitude;return this.latitude=s.coords.latitude,this.longitude=a,qe([])}),Qt(s=>s?this.sevenElevenService.getAccessToken():[]),Qt(s=>s&&s.element?(sessionStorage.setItem("711Token",s.element),this.sevenElevenService.getStoreByAddress(t.store711Name)):qe([]))).subscribe(s=>{s?(r=s.element[0].Latitude,i=s.element[0].Longitude,console.log(r,i),this.onOptionSelect(null,r,i),this.searchTerm=""):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}onFoodSearchResult(t){console.log("\u98df\u7269\u641c\u5c0b\u7d50\u679c",t),this.loadingService.show("\u6b63\u5728\u8df3\u8f49\u5230\u5546\u5e97..."),this.searchTerm=t.storeName,this.isLocationSearchMode=!1,this.totalStoresShowList=[],this.totalStoresShowList=[t.store],this.storeDataService.setStores(this.totalStoresShowList),this.storeDataService.setIsUserLocationSearch(!1),this.loadingService.hide()}static{this.\u0275fac=function(r){return new(r||n)(xe(wb),xe(lQ),xe(kA),xe(cQ),xe($S),xe(eNe),xe(Cf),xe(R2e),xe(yU))}}static{this.\u0275cmp=Kn({type:n,selectors:[["app-new-search"]],decls:37,vars:14,consts:[["auto","matAutocomplete"],["locationSearchMode",""],["storeSearchMode",""],[3,"userUpdated","favoriteStoresUpdated","searchStore","foodSearchResult","user","favoriteStores"],[1,"container","mx-auto","my-3","p-6","bg-primary-white","max-w-4xl",2,"margin-top","80px"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],["src","assets/S__222224406.jpg","alt","Friendly Superhero",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24"],[1,"text-primary-default","sm:text-xl","font-bold","ml-4","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],["class","loading-container",4,"ngIf"],["class","text-primary-default lg:text-md sm:text-xl",4,"ngIf"],[1,"text-xs","sm:text-sm","text-success","mb-4","text-center"],[1,"w-full",3,"ngSubmit"],[1,"flex","justify-center","w-full"],[1,"w-full","px-4","py-3"],[1,"flex","flex-col","h-12","w-full"],[1,"flex","w-full","items-stretch","rounded-lg","h-full"],["data-icon","MagnifyingGlass","data-size","24px","data-weight","regular",1,"text-primary-default","flex","border-none","bg-primary-light","items-center","justify-center","pl-4","rounded-l-lg","border-r-0"],["xmlns","http://www.w3.org/2000/svg","width","24px","height","24px","fill","currentColor","viewBox","0 0 256 256"],["d","M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"],["mat-input","","placeholder","\u8f38\u5165\u5169\u500b\u5b57\u4ee5\u4e0a\u7684\u5e97\u540d\u6216\u5730\u5740\u641c\u5c0b","name","first",1,"flex","w-full","flex-1","resize-none","overflow-hidden","rounded-lg","text-primary-default","focus:outline-none","focus:ring-0","border-none","bg-primary-light","focus:border-transparent","focus:bg-inherit","h-full","placeholder:text-primary-default","px-4","rounded-l-none","border-l-3","pl-2","text-base","font-normal","leading-normal",3,"ngModelChange","input","matAutocomplete","ngModel"],[3,"optionSelected"],["class","p-2 hover:bg-primary-light focus:bg-primary-default",3,"value",4,"ngFor","ngForOf"],[1,"flex","px-4","py-3","justify-center","items-center"],["type","button",1,"flex","min-w-[84px]","max-w-[480px]","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","h-10","px-4","bg-success","text-white","gap-2","pl-4","text-sm","font-bold","leading-normal","tracking-[0.015em]","text-xs","sm:text-sm","md:text-base",3,"click"],["data-icon","MapPin","data-size","20px","data-weight","regular",1,"text-white"],["xmlns","http://www.w3.org/2000/svg","width","20px","height","20px","fill","currentColor","viewBox","0 0 256 256"],["d","M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z"],[1,"truncate"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"loading-container"],[1,"flex","items-center","text-primary-default","lg:text-md","sm:text-xl"],["mode","indeterminate","diameter","20",1,"text-primary-default"],[1,"text-primary-default","lg:text-md","sm:text-xl"],[1,"p-2","hover:bg-primary-light","focus:bg-primary-default",3,"value"],["class","flex items-center gap-2",4,"ngIf"],[1,"flex","items-center","gap-2"],["alt","7-Eleven Icon",1,"w-4","h-4",3,"src"],[1,"flex","flex-col"],[1,"text-xs","sm:text-sm","text-gray-500"],["alt","FamilyMart Icon",1,"w-4","h-4",3,"src"],[4,"ngFor","ngForOf"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],[1,"w-full","lg:w-4/5","max-w-screen-lg"],["class","store p-4 border border-gray-300 rounded-lg shadow-md mb-6",4,"ngIf"],[1,"store","p-4","border","border-gray-300","rounded-lg","shadow-md","mb-6"],[4,"ngIf"],[1,"flex","items-center","gap-4","bg-primary-white","px-4","min-h-[72px]","py-2","justify-between"],[1,"flex","items-center","gap-4"],["data-icon","Storefront","data-size","24px","data-weight","regular",1,"text-dark","border","border-gray-200","flex","items-center","justify-center","rounded-lg","bg-primary-light","shrink-0","size-12",2,"padding","16px"],["alt","Store Icon","width","24px","height","24px","fill","currentColor",3,"src"],[1,"flex","flex-col","justify-center","text-lg","sm:text-xl","font-semibold"],[1,"text-dark","text-base","font-medium","leading-normal","line-clamp-1"],["target","_blank",1,"ml-2",3,"href"],["src","assets/GoogleMap_icon.png","alt","Google Maps",1,"w-6","h-6","inline-block"],["class","text-success text-sm font-normal leading-normal line-clamp-2",4,"ngIf"],[1,"flex","items-start","justify-end"],[1,"text-red-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"food-categories","mt-4"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-4","gap-0"],["class","sub-category-details mt-4",4,"ngIf"],[1,"text-success","text-sm","font-normal","leading-normal","line-clamp-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[3,"class","pointer-events-none","click",4,"ngIf"],[3,"click"],[1,"w-12","h-12","sm:w-14","sm:h-14","md:w-16","md:h-16","lg:w-20","lg:h-20","mx-auto","mb-2","object-cover",3,"src","alt","ngStyle"],[1,"block","text-sm","sm:text-base","font-semibold"],[1,"inline-block","text-xs","bg-orange-200","text-orange-900","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"sub-category-details","mt-4"],[3,"store","category","foodDetails"],[3,"class","pointer-events-none","click",4,"ngFor","ngForOf"],["class","sub-category-details mt-4 border-gray-700",4,"ngIf"],[1,"sub-category-details","mt-4","border-gray-700"],[1,"border-gray-700",3,"store","category","foodDetails"],["class","text-center text-primary-default text-lg font-bold mt-4",4,"ngIf"],[1,"text-center","text-primary-default","text-lg","font-bold","mt-4"],["class","text-orange-900 text-sm font-normal leading-normal line-clamp-2",4,"ngIf"],[1,"text-orange-900","text-sm","font-normal","leading-normal","line-clamp-2"]],template:function(r,i){if(1&r){const s=Bi();te(0,"app-sider",3),Dt("userUpdated",function(a){return Cn(s),Tn(i.onUserUpdated(a))})("favoriteStoresUpdated",function(a){return Cn(s),Tn(i.onFavoriteStoresUpdated(a))})("searchStore",function(a){return Cn(s),Tn(i.onFavoriteStoreSearch(a))})("foodSearchResult",function(a){return Cn(s),Tn(i.onFoodSearchResult(a))}),ie(),te(1,"div",4),Ds(2),te(3,"div",5),Et(4,"img",6),te(5,"h5",7),st(6,qBe,5,3,"div",8),Ms(7,"async"),st(8,KBe,2,0,"div",9),Ms(9,"async"),ie()(),te(10,"div",10)(11,"p"),ze(12,"* \u8cc7\u8a0a\u50c5\u4f9b\u53c3\u8003\uff0c\u8acb\u4ee5\u5e97\u5167\u5546\u54c1\u70ba\u6e96"),ie()(),te(13,"form",11),Dt("ngSubmit",function(){return Cn(s),Tn(i.onSubmit())}),te(14,"div",12)(15,"div",13)(16,"label",14)(17,"div",15)(18,"div",16),Ss(),te(19,"svg",17),Et(20,"path",18),ie()(),Dh(),te(21,"input",19),rb("ngModelChange",function(a){return Cn(s),WC(i.searchTerm,a)||(i.searchTerm=a),Tn(a)}),Dt("input",function(a){return Cn(s),Tn(i.onInput(a))}),ie()()()()(),te(22,"mat-autocomplete",20,0),Dt("optionSelected",function(a){return Cn(s),Tn(i.onOptionSelect(a))}),st(24,XBe,3,3,"mat-option",21),ie(),te(25,"div",22)(26,"button",23),Dt("click",function(){return Cn(s),Tn(i.onUseCurrentLocation())}),te(27,"div",24),Ss(),te(28,"svg",25),Et(29,"path",26),ie()(),Dh(),te(30,"span",27),ze(31,"\u4f7f\u7528\u76ee\u524d\u4f4d\u7f6e"),ie()()()(),Rs(),ie(),st(32,ZBe,1,0,"ng-container",28)(33,mUe,1,1,"ng-template",null,1,KC)(35,FUe,2,2,"ng-template",null,2,KC)}if(2&r){const s=tb(23),o=tb(34),a=tb(36);De("user",i.user)("favoriteStores",i.favoriteStores),se(6),De("ngIf",Qh(7,10,i.loadingService.loading$)),se(2),De("ngIf",!Qh(9,12,i.loadingService.loading$)),se(13),De("matAutocomplete",s),nb("ngModel",i.searchTerm),se(3),De("ngForOf",i.unifiedDropDownList),se(8),De("ngIf",i.isLocationSearchMode)("ngIfThen",o)("ngIfElse",a)}},dependencies:[_b,Jh,f7,Ok,af,Tb,Ck,Mb,GT,WK,qne,X2e,Zne,tBe,GBe,m7,_7,fre]})}}return n})()}];let VUe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({imports:[L9.forRoot(LUe),L9]})}}return n})();const HUe={provide:new Ee("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const n=N(Ns);return()=>n.scrollStrategies.reposition()}}),deps:[Ns],useFactory:function zUe(n){return()=>n.scrollStrategies.reposition()}};let Ire=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[HUe],imports:[nE,Og,or,tE,qI,Og,or]})}return n})(),$Ue=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({})}return n})(),WUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or,qI,qI,$Ue,or]})}return n})(),wre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[or,or]})}return n})();const tje={provide:new Ee("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const n=N(Ns);return()=>n.scrollStrategies.reposition()}}),deps:[Ns],useFactory:function eje(n){return()=>n.scrollStrategies.reposition()}};let Cre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[tje],imports:[BN,or,nE,tE,or]})}return n})(),Are=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({imports:[J1,Hk,qI,Ire,Og,WUe,Kne,Mq,tVe,mre,MBe,wre,Cre,FBe,Ere]})}}return n})(),nje=(()=>{class n{constructor(t){this.requestService=t,this.url="https://openrouter.ai/api/v1/chat/completions",this.model="deepseek/deepseek-chat-v3-0324:free"}getLLMRes(t,r){const i=JSON.stringify({model:this.model,messages:[{role:"system",content:`\u4f60\u662f\u4e00\u500b\u52a9\u624b\uff0c\u5c08\u9580\u6839\u64da\u5546\u5e97\u8cc7\u8a0a\uff0c\u7be9\u9078\u51fa\u7b26\u5408\u6307\u5b9a\u98df\u7269\u985e\u578b\u7684\u5546\u54c1\u3002\n      \u9019\u908a\u63d0\u4f9bJson\u683c\u5f0f\u7684\u5546\u5e97\u8cc7\u8a0a\u7d66\u4f60\uff1a\n      ${this.jsonListToString(r)}\n\n      1. \u4f60\u7684\u56de\u61c9\u5fc5\u9808\u662f**\u7d14 JSON \u683c\u5f0f**\uff0c\u4e0d\u5305\u542b\u4efb\u4f55\u89e3\u91cb\u6216\u984d\u5916\u6587\u5b57\u3002\n\n      2. \u7576\u5339\u914d foodDesc \u8207\u5546\u5e97\u4e2d\u7684 foodInfo \u6642\uff0c\u8acb\u6aa2\u67e5 foodInfo \u4e2d\u7684\u5546\u54c1\u540d\u7a31\u662f\u5426\u5305\u542b foodDesc \u7684\u95dc\u9375\u5b57\uff08\u4e0d\u5340\u5206\u5927\u5c0f\u5beb\uff09\u3002\u5982\u679c foodDesc \u662f\u591a\u500b\u8a5e\uff0c\u5247\u53ea\u9700\u90e8\u5206\u5339\u914d\u5373\u53ef\u3002\n\n      3. \u5982\u679c foodDesc \u4e2d\u63d0\u5230\u7279\u5b9a\u5546\u5e97\u985e\u578b\uff0c\u8acb\u53ea\u6aa2\u67e5\u8a72\u985e\u578b\u7684\u5546\u5e97\uff1a\n      - \u5168\u5bb6\u4fbf\u5229\u5546\u5e97\uff1a\u8b58\u5225\u8a5e\u5305\u62ec\u300c\u5168\u5bb6\u300d\u300cFamilyMart\u300d\u300cFmaily\u300d\u300c\u5168\u5bb6\u4fbf\u5229\u5546\u5e97\u300d\u3002\n      - 7-11\u4fbf\u5229\u5546\u5e97\uff1a\u8b58\u5225\u8a5e\u5305\u62ec\u300c7-11\u300d\u300c711\u300d\u300c\u7d71\u4e00\u8d85\u5546\u300d\u300c\u4e03\u5341\u4e00\u300d\u3002\n      \u5982\u679c foodDesc \u672a\u6307\u5b9a\u5546\u5e97\u985e\u578b\uff0c\u5247\u6aa2\u67e5\u6240\u6709\u5546\u5e97\u7684 foodInfo\u3002\n\n     4. \u5982\u679c foodDesc \u4e0d\u6d89\u53ca\u5546\u5e97\u5167\u5546\u54c1\uff08\u4f8b\u5982\u5929\u6c23\u3001\u6642\u9593\u3001\u5730\u5740\u7b49\u7121\u95dc\u67e5\u8a62\uff09\uff0c\u8acb\u56de\u50b3\uff1a\n      \`\`\`json\n      { "stores": [], "error": "\u6211\u53ea\u80fd\u5e6b\u5fd9\u641c\u5c0b\u5546\u5e97\u5167\u7684\u98df\u54c1\u8cc7\u8a0a\u5566\u{1f633}" }\n      \`\`\`\n\n      5. \u5982\u679c\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c1\uff0c\u8acb\u56de\u50b3\uff1a\n      \`\`\`json\n      { "stores": [] }\n      \`\`\`\n      `},{role:"user",content:`${t}\u3002\n      \n      \u8acb\u53ea\u56de\u50b3 JSON \u683c\u5f0f\uff0c\u4e0d\u8981\u6709\u5176\u4ed6\u89e3\u91cb\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a\n      \`\`\`json\n      {\n        "stores": [\n        {\n          "storeName": "\u5546\u5e97\u540d\u7a31",\n          "distance": "\u8ddd\u96e2",\n          "items": [\n          "\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c11",\n          "\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c12"\n          ]\n        }\n        ]\n      }\n      \`\`\`\n      `}],max_tokens:6e3});return this.requestService.get("https://square-water-d5e4.jhcheng-alan.workers.dev/").pipe(Qt(s=>{const o=new Headers({Authorization:s.token,"Content-Type":"application/json"});return this.requestService.post(this.url,null,i,o)}))}jsonListToString(t){return t.map(r=>JSON.stringify(r)).join(", ")}static{this.\u0275fac=function(r){return new(r||n)(Me(QN))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const rje=["chatBody"];function ije(n,e){if(1&n&&(te(0,"span",13),ze(1),ie()),2&n){const t=Pe().$implicit;se(),cs(t.text)}}function sje(n,e){if(1&n&&(te(0,"span"),ze(1),ie()),2&n){const t=Pe(2).$implicit;se(),en("\u{1f408}\u200d\u2b1b\uff1a",t.text,"")}}function oje(n,e){if(1&n&&(te(0,"div"),Et(1,"span",16),ie()),2&n){const t=Pe(2).$implicit,r=Pe(3);se(),De("innerHTML",r.formatStoreMessage(t.text),_3)}}function aje(n,e){if(1&n&&(te(0,"div",14),st(1,sje,2,1,"span",15)(2,oje,2,1,"div",15),ie()),2&n){const t=Pe().$implicit,r=Pe(3);se(),De("ngIf",!r.isStoreMessage(t.text)),se(),De("ngIf",r.isStoreMessage(t.text))}}function lje(n,e){if(1&n&&(te(0,"span",17),ze(1),ie()),2&n){const t=Pe().$implicit;se(),en(" \u{1f408}\u200d\u2b1b\uff1a ",t.text," ")}}function cje(n,e){if(1&n&&(te(0,"div",9),st(1,ije,2,1,"span",10)(2,aje,3,2,"div",11)(3,lje,2,1,"span",12),ie()),2&n){const t=e.$implicit;De("ngClass",t.sender),se(),De("ngIf","user"===t.sender),se(),De("ngIf","bot"===t.sender&&!t.isLoading),se(),De("ngIf","bot"===t.sender&&t.isLoading)}}function uje(n,e){if(1&n&&(te(0,"div",7,0),st(2,cje,4,4,"div",8),ie()),2&n){const t=Pe(2);se(2),De("ngForOf",t.messages)}}function dje(n,e){if(1&n){const t=Bi();te(0,"div",18)(1,"input",19),rb("ngModelChange",function(i){Cn(t);const s=Pe(2);return WC(s.userInput,i)||(s.userInput=i),Tn(i)}),Dt("keyup.enter",function(i){return Cn(t),Tn(Pe(2).handleEnter(i))}),ie(),te(2,"button",20),Dt("click",function(){return Cn(t),Tn(Pe(2).sendMessage())}),ze(3,"\u27a4"),ie()()}if(2&n){const t=Pe(2);se(),nb("ngModel",t.userInput),De("disabled",t.messages[t.messages.length-1].isLoading||!1)("placeholder",t.messages[t.messages.length-1].isLoading?"\u641c\u5c0b\u4e2d\uff0c\u8acb\u7a0d\u5f8c...":"\u8acb\u8f38\u5165\u8a0a\u606f")}}function hje(n,e){if(1&n){const t=Bi();te(0,"div",2)(1,"div",3),Dt("click",function(){return Cn(t),Tn(Pe().toggleChat())}),ze(2," \u9ed1\u8c93\u5e6b\u4f60\u627e\u{1f4ac} "),te(3,"button",4),Dt("click",function(i){return Cn(t),Tn(Pe().toggleChat(i))}),ze(4),ie()(),st(5,uje,3,1,"div",5)(6,dje,4,3,"div",6),ie()}if(2&n){const t=Pe();Lr("open",t.isOpen),se(4),en(" ",t.isOpen?"\u2796":"\u2795"," "),se(),De("ngIf",t.isOpen),se(),De("ngIf",t.isOpen)}}let Sre=(()=>{class n{constructor(t,r,i,s){this.authService=t,this.storeDataService=r,this.sevenElevenRequestService=i,this.llmRequestService=s,this.isLogin=!1,this.storesInfo=[],this.isUserLocationSearch=!0,this.isOpen=!1,this.userInput="",this.userName="",this.messages=[],this.sevenElevenFoodCategoryMap=new Map([["\u4fbf\u7576\u7ca5\u54c1",[137,139,140,142,143,185,187,192]],["\u9eb5\u98df",[144,146,149,151,153,155]],["\u751f\u9bae\u852c\u679c",[157,158]],["\u6c99\u62c9",[160,159,189]],["\u914d\u83dc\u6e6f\u54c1",[161,162]],["\u98ef\u7cf0\u624b\u5377",[163,164,165,166,167]],["\u9eb5\u5305\u86cb\u7cd5",[168,169,170,171]],["\u4e09\u660e\u6cbb\u5821\u985e",[172,178,174,175,176,177,190,191]],["\u751c\u9ede",[179,180,181,182,183]]])}ngOnInit(){this.authService.isLoggedIn().subscribe(t=>{this.isLogin=t}),this.authService.getUser().subscribe(t=>{t||(this.isLogin=!1,this.putMessage("\u55e8\uff5e\uff01 \u60f3\u627e\u4ec0\u9ebc\u985e\u578b\u7684\u98df\u7269\u5462\uff1f","bot")),this.userName=t.displayName,this.putMessage(`\u6b61\u8fce\u56de\u4f86\uff5e${this.userName}\uff01 \u60f3\u627e\u4ec0\u9ebc\u985e\u578b\u7684\u98df\u7269\u5462\uff1f`,"bot")}),this.storeDataService.isLocationSearch$.subscribe(t=>{this.isUserLocationSearch=t})}toggleChat(t){t&&t.stopPropagation(),this.isOpen=!this.isOpen}handleEnter(t){t.isComposing?t.preventDefault():this.sendMessage()}sendMessage(){if(this.userInput.trim()){this.storesInfo=this.storeDataService.getStores().filter(r=>!("7-11"===r.label&&0===r.remainingQty)).slice(0,10),console.log("Filtered storesInfo:",this.storesInfo);const t=this.userInput;if(this.userInput="",this.putMessage(t,"user"),this.messages.length>0&&this.messages[this.messages.length-1].isLoading)return void this.putMessage("\u6b63\u5728\u641c\u5c0b\u4e2d\uff0c\u641c\u5c0b\u5b8c\u7562\u5f8c\u8acb\u91cd\u65b0\u67e5\u8a62...","bot",!1);if(0===this.storesInfo.length)return void this.putMessage("\u8acb\u5148\u9ede\u64ca\u300c\u4f7f\u7528\u76ee\u524d\u4f4d\u7f6e\u300d\u641c\u5c0b\u6309\u9215\uff0c\u624d\u80fd\u5e6b\u4f60\u770b\u9644\u8fd1\u5546\u5e97\u5537\uff01","bot");this.putMessage("\u6b63\u5728\u641c\u5c0b\u9644\u8fd1\u7684\u4fbf\u5229\u5546\u5e97...","bot",!0),this.requestSevenInfoAndCombineFm().subscribe(r=>{this.storesInfo=r,this.llmRequestService.getLLMRes(t,this.storesInfo).subscribe({next:i=>{this.messages=this.messages.filter(s=>!s.isLoading);try{let s=i.choices[0].message.content.trim();s=s.replace(/```(json)?/g,"");const o=JSON.parse(s);if(!o.stores)throw new Error("Invalid store response format");if(o.error)return void this.putMessage(o.error,"bot");if(0===o.stores.length)return void this.putMessage("\u627e\u4e0d\u5230\u4f60\u60f3\u8981\u7684\u6771\u897fQQ","bot");let a="\u{1f408}\u200d\u2b1b\uff1a\u9019\u4e9b\u5546\u5e97\u6709\u4f60\u60f3\u8981\u7684\uff01\n\n";o.stores.forEach(l=>{a+=`\u{1f3ea} ${l.storeName}  \n`,a+=this.isUserLocationSearch?`\uff08\u{1f4cd} \u8ddd\u96e2\u60a8 ${l.distance.toFixed(0)} \u516c\u5c3a\uff09\n`:`\uff08\u{1f4cd} \u8ddd\u96e2\u60a8\u641c\u5c0b\u7684\u5546\u5e97 ${l.distance.toFixed(0)} \u516c\u5c3a\uff09\n`,a+=l.items.length>0?`${l.items.map((c,u)=>`${u+1}. ${c}`).join("\n")}\n\n`:"\u26a0\ufe0f \u9019\u9593\u5e97\u6c92\u6709\u627e\u5230\u76f8\u95dc\u5546\u54c1\n\n"}),this.putMessage(a,"bot")}catch(s){console.error("JSON parse error:",s),this.putMessage("\u8655\u7406\u5546\u5e97\u8cc7\u8a0a\u6642\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66","bot")}},error:i=>{console.error("API request error:",i),this.putMessage("\u7121\u6cd5\u53d6\u5f97\u5546\u5e97\u8cc7\u8a0a\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66","bot")}})})}}putMessage(t,r,i){"bot"===r?setTimeout(()=>{this.messages.push({text:t,sender:r,isLoading:i})},500):this.messages.push({text:t,sender:r})}ngAfterViewChecked(){this.isOpen&&this.chatBody&&this.scrollToBottom()}scrollToBottom(){const t=this.chatBody.nativeElement;t.scrollTop=t.scrollHeight}requestSevenInfoAndCombineFm(){return fg(this.storesInfo.map(r=>r.StoreNo?this.sevenElevenRequestService.getItemsByStoreNo(r.StoreNo).pipe(Be(i=>({storeName:r.storeName,distance:r.distance,foodInfo:i.element.StoreStockItem.CategoryStockItems.map(s=>({category:this.getCategoryNameByNodeID(s.NodeID),RemainingQty:s.RemainingQty,ItemList:s.ItemList}))}))):qe({storeName:r.storeName,distance:r.distance,foodInfo:r.info}))).pipe(Be(r=>r.filter(i=>i.foodInfo.length>0)))}getCategoryNameByNodeID(t){for(const[r,i]of this.sevenElevenFoodCategoryMap.entries())if(i.includes(t))return r;return"\u672a\u77e5\u5206\u985e"}isStoreMessage(t){return t.includes("\u{1f3ea}")&&t.includes("\u8ddd\u96e2")}formatStoreMessage(t){const r=t.split("\n");let i="",s=!0;for(let o=0;o<r.length;o++)if(r[o].startsWith("\u{1f3ea}")){i+="<br>";const a=r[o].substring(1).trim();let l="";try{l=encodeURIComponent(a)}catch{l=encodeURIComponent(a.replace(/[^\w\u4e00-\u9fa5]/g,""))}i+=`${r[o]} <a href="https://www.google.com/maps/search/${l}" target="_blank" style="display: inline-block; margin-left: 5px;"><img src="assets/GoogleMap_icon.png" alt="Google \u5730\u5716" class="w-3 h-3 inline-block" style="width: 16px; height: 16px; vertical-align: middle;"></a><br>`,s=!1}else""!==r[o].trim()&&(i+=`${r[o]}<br>`);return i}static{this.\u0275fac=function(r){return new(r||n)(xe($S),xe(yU),xe(kA),xe(nje))}}static{this.\u0275cmp=Kn({type:n,selectors:[["app-chatbot"]],viewQuery:function(r,i){if(1&r&&Kh(rje,5),2&r){let s;qa(s=Ka())&&(i.chatBody=s.first)}},standalone:!0,features:[wi],decls:1,vars:1,consts:[["chatBody",""],["class","chatbot-container",3,"open",4,"ngIf"],[1,"chatbot-container"],[1,"chatbot-header",3,"click"],[1,"toggle-btn",3,"click"],["class","chatbot-body",4,"ngIf"],["class","chatbot-footer",4,"ngIf"],[1,"chatbot-body"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","text-gray-700",4,"ngIf"],["class","text-primary-default",4,"ngIf"],["class","text-primary-default loading-text",4,"ngIf"],[1,"text-gray-700"],[1,"text-primary-default"],[4,"ngIf"],[3,"innerHTML"],[1,"text-primary-default","loading-text"],[1,"chatbot-footer"],["type","text",3,"ngModelChange","keyup.enter","ngModel","disabled","placeholder"],[3,"click"]],template:function(r,i){1&r&&st(0,hje,7,5,"div",1),2&r&&De("ngIf",!0)},dependencies:[Hk,af,Tb,Mb,J1,l7,_b,Jh,Are],styles:['@charset "UTF-8";.chatbot-container[_ngcontent-%COMP%]{position:fixed;bottom:1.5rem;right:1.5rem;width:20rem;max-width:50vw;background:#fff;border:1px solid #F4EFE6;border-radius:.625rem;box-shadow:0 .125rem .625rem #0000001a;display:flex;flex-direction:column;overflow:hidden}.chatbot-container.open[_ngcontent-%COMP%]{resize:vertical;height:25rem;max-height:80vh}.chatbot-header[_ngcontent-%COMP%]{background:#a18249;color:#fff;padding:.625rem;cursor:pointer;text-align:center;display:flex;justify-content:space-between;align-items:center}.chatbot-body[_ngcontent-%COMP%]{flex:1;padding:.625rem;overflow-y:auto;scroll-behavior:smooth}.chatbot-body[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:.3125rem 0}.chatbot-body[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#f4efe6;padding:.5rem .75rem;border-radius:.5rem;display:inline-block}.chatbot-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:.3125rem 0}.chatbot-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fcdab3;padding:.5rem .75rem;border-radius:.5rem;display:inline-block}.chatbot-body[_ngcontent-%COMP%]   .text-primary-default[_ngcontent-%COMP%]{white-space:pre-line}.chatbot-footer[_ngcontent-%COMP%]{display:flex;border-top:1px solid #F4EFE6;padding:.3125rem}.chatbot-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.3125rem;border:none;outline:none}.chatbot-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#a18249;color:#fff;border:none;padding:.3125rem .625rem;cursor:pointer}.toggle-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;font-size:1rem}@media (max-width: 768px){.chatbot-container[_ngcontent-%COMP%]{width:18rem;bottom:1rem;right:1rem}.chatbot-container.open[_ngcontent-%COMP%]{height:20rem}}@media (max-width: 480px){.chatbot-container[_ngcontent-%COMP%]{width:90vw;bottom:.5rem;right:.5rem;border-radius:.5rem}.chatbot-container.open[_ngcontent-%COMP%]{height:70vh}.chatbot-header[_ngcontent-%COMP%], .chatbot-body[_ngcontent-%COMP%]{padding:.5rem}.chatbot-footer[_ngcontent-%COMP%]{padding:.25rem}.chatbot-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.25rem .5rem}.toggle-btn[_ngcontent-%COMP%]{font-size:.875rem}}@keyframes _ngcontent-%COMP%_blink{0%{opacity:1}50%{opacity:.5}to{opacity:1}}.loading-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite}']})}}return n})(),fje=(()=>{class n{constructor(){this.title="friendly-time"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Kn({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&Et(0,"router-outlet")(1,"app-chatbot")},dependencies:[sN,Sre]})}}return n})();function xre(n){return new K(3e3,!1)}function Vd(n){switch(n.length){case 0:return new oE;case 1:return n[0];default:return new QK(n)}}function Dre(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,h=u&&a||new Map;l.forEach((m,y)=>{let b=y,T=m;if("offset"!==y)switch(b=n.normalizePropertyName(b,i),T){case"!":T=t.get(y);break;case Nc:T=r.get(y);break;default:T=n.normalizeStyleValue(y,b,T,i)}h.set(b,T)}),u||s.push(h),a=h,o=c}),i.length)throw function Fje(){return new K(3502,!1)}();return s}function xU(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&DU(t,"start",n)));break;case"done":n.onDone(()=>r(t&&DU(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&DU(t,"destroy",n)))}}function DU(n,e,t){const s=RU(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function RU(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ia(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Rre(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Kje=typeof document>"u"?null:document.documentElement;function MU(n){const e=n.parentNode||n.host||null;return e===Kje?null:e}let dp=null,Mre=!1;function Pre(n,e){for(;e;){if(e===n)return!0;e=MU(e)}return!1}function kre(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let PU=(()=>{class n{validateStyleProperty(t){return function Yje(n){dp||(dp=function Xje(){return typeof document<"u"?document.body:null}()||{},Mre=!!dp.style&&"WebkitAppearance"in dp.style);let e=!0;return dp.style&&!function Qje(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in dp.style,!e&&Mre&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in dp.style)),e}(t)}containsElement(t,r){return Pre(t,r)}getParentElement(t){return MU(t)}query(t,r,i){return kre(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new oE(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();class kU{static{this.NOOP=new PU}}class NU{}const Jje=1e3,OU="ng-enter",Jx="ng-leave",eD="ng-trigger",tD=".ng-trigger",Ore="ng-animating",FU=".ng-animating";function ru(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:LU(parseFloat(e[1]),e[2])}function LU(n,e){return"s"===e?n*Jje:n}function nD(n,e,t){return n.hasOwnProperty("duration")?n:function t4e(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(xre()),{duration:0,delay:0,easing:""};i=LU(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=LU(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function pje(){return new K(3100,!1)}()),a=!0),s<0&&(e.push(function mje(){return new K(3101,!1)}()),a=!0),a&&e.splice(l,0,xre())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Yl(n,e,t){e.forEach((r,i)=>{const s=BU(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function hp(n,e){e.forEach((t,r)=>{const i=BU(r);n.style[i]=""})}function QI(n){return Array.isArray(n)?1==n.length?n[0]:function mAe(n,e=null){return{type:kt.Sequence,steps:n,options:e}}(n):n}const VU=new RegExp("{{\\s*(.+?)\\s*}}","g");function Lre(n){let e=[];if("string"==typeof n){let t;for(;t=VU.exec(n);)e.push(t[1]);VU.lastIndex=0}return e}function YI(n,e,t){const r=`${n}`,i=r.replace(VU,(s,o)=>{let a=e[o];return null==a&&(t.push(function _je(){return new K(3003,!1)}()),a=""),a.toString()});return i==r?n:i}const i4e=/-+([a-z0-9])/g;function BU(n){return n.replace(i4e,(...e)=>e[1].toUpperCase())}function sa(n,e,t){switch(e.type){case kt.Trigger:return n.visitTrigger(e,t);case kt.State:return n.visitState(e,t);case kt.Transition:return n.visitTransition(e,t);case kt.Sequence:return n.visitSequence(e,t);case kt.Group:return n.visitGroup(e,t);case kt.Animate:return n.visitAnimate(e,t);case kt.Keyframes:return n.visitKeyframes(e,t);case kt.Style:return n.visitStyle(e,t);case kt.Reference:return n.visitReference(e,t);case kt.AnimateChild:return n.visitAnimateChild(e,t);case kt.AnimateRef:return n.visitAnimateRef(e,t);case kt.Query:return n.visitQuery(e,t);case kt.Stagger:return n.visitStagger(e,t);default:throw function yje(){return new K(3004,!1)}()}}function UU(n,e){return window.getComputedStyle(n)[e]}const a4e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Vre extends NU{normalizePropertyName(e,t){return BU(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(a4e.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function vje(){return new K(3005,!1)}())}return o+s}}const rD="*";const iD=new Set(["true","1"]),sD=new Set(["false","0"]);function Bre(n,e){const t=iD.has(n)||sD.has(n),r=iD.has(e)||sD.has(e);return(i,s)=>{let o=n==rD||n==i,a=e==rD||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?iD.has(n):sD.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?iD.has(e):sD.has(e)),o&&a}}const d4e=new RegExp("s*:selfs*,?","g");function jU(n,e,t,r){return new h4e(n).build(e,t,r)}class h4e{constructor(e){this._driver=e}build(e,t,r){const i=new m4e(t);return this._resetContextStyleTimingState(i),sa(this,QI(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function bje(){return new K(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==kt.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==kt.Transition){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function Eje(){return new K(3007,!1)}())}),{type:kt.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Lre(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(function Ije(){return new K(3008,!1)}(0,s.values()))}return{type:kt.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=sa(this,QI(e.animation),t),i=function l4e(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function c4e(n,e,t){if(":"==n[0]){const l=function u4e(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Pje(){return new K(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Mje(){return new K(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(Bre(i,o)),"<"==s[0]&&(i!=rD||o!=rD)&&e.push(Bre(o,i))}(r,t,e)):t.push(n),t}(e.expr,t.errors);return{type:kt.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:fp(e.options)}}visitSequence(e,t){return{type:kt.Sequence,steps:e.steps.map(r=>sa(this,r,t)),options:fp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=sa(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:kt.Group,steps:s,options:fp(e.options)}}visitAnimate(e,t){const r=function _4e(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return zU(nD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=zU(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=nD(t,e);return zU(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Si({});if(s.type==kt.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Si(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:kt.Animate,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Nc?r.push(a):t.errors.push(new K(3002,!1)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:kt.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let h=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(function Cje(){return new K(3010,!1)}()),h=!1),s=u.startTime),h&&c.set(l,{startTime:s,endTime:i}),t.options&&function r4e(n,e,t){const r=e.params||{},i=Lre(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function gje(){return new K(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:kt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Tje(){return new K(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(B=>{const V=this._makeStyleAst(B,t);let Q=null!=V.offset?V.offset:function g4e(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),we=0;return null!=Q&&(s++,we=V.offset=Q),l=l||we<0||we>1,a=a||we<c,c=we,o.push(we),V});l&&t.errors.push(function Aje(){return new K(3012,!1)}()),a&&t.errors.push(function Sje(){return new K(3200,!1)}());const h=e.steps.length;let m=0;s>0&&s<h?t.errors.push(function xje(){return new K(3202,!1)}()):0==s&&(m=1/(h-1));const y=h-1,b=t.currentTime,T=t.currentAnimateTimings,M=T.duration;return u.forEach((B,V)=>{const Q=m>0?V==y?1:m*V:o[V],we=Q*M;t.currentTime=b+T.delay+we,T.duration=we,this._validateStyleAst(B,t),B.offset=Q,r.styles.push(B)}),r}visitReference(e,t){return{type:kt.Reference,animation:sa(this,QI(e.animation),t),options:fp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:kt.AnimateChild,options:fp(e.options)}}visitAnimateRef(e,t){return{type:kt.AnimateRef,animation:this.visitReference(e.animation,t),options:fp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function f4e(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(d4e,"")),n=n.replace(/@\*/g,tD).replace(/@\w+/g,t=>tD+"-"+t.slice(1)).replace(/:animating/g,FU),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ia(t.collectedStyles,t.currentQuerySelector,new Map);const a=sa(this,QI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:kt.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:fp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Dje(){return new K(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:nD(e.timings,t.errors,!0);return{type:kt.Stagger,animation:sa(this,QI(e.animation),t),timings:r,options:null}}}class m4e{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function fp(n){return n?(n={...n}).params&&(n.params=function p4e(n){return n?{...n}:null}(n.params)):n={},n}function zU(n,e,t){return{duration:n,delay:e,easing:t}}function HU(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class oD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const b4e=new RegExp(":enter","g"),I4e=new RegExp(":leave","g");function $U(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new w4e).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class w4e{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new oD;const h=new WU(e,t,c,i,s,u,[]);h.options=l;const m=l.delay?ru(l.delay):0;h.currentTimeline.delayNextStep(m),h.currentTimeline.setStyles([o],null,h.errors,l),sa(this,r,h);const y=h.timelines.filter(b=>b.containsAnimation());if(y.length&&a.size){let b;for(let T=y.length-1;T>=0;T--){const M=y[T];if(M.element===t){b=M;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,h.errors,l)}return y.length?y.map(b=>b.buildKeyframes()):[HU(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:ru(YI(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?ru(r.duration):null,a=null!=r.delay?ru(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),sa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){i.previousNode.type==kt.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=aD);const o=ru(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>sa(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ru(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),sa(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return nD(t.params?YI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;s.type==kt.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ru(i.delay):0;s&&(t.previousNode.type===kt.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=aD);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const h=t.createSubContext(e.options,c);s&&h.delayNextStep(s),c===t.element&&(l=h.currentTimeline),sa(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;sa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}}const aD={};class WU{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=aD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new lD(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ru(r.duration)),null!=r.delay&&(i.delay=ru(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=YI(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new WU(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=aD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new C4e(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(b4e,"."+this._enterClassName)).replace(I4e,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function Rje(){return new K(3014,!1)}()),a}}class lD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new lD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Nc),this._currentKeyframe.set(t,Nc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function T4e(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r??=e.keys();for(let s of r)t.set(s,Nc)}else for(let[s,o]of i)t.set(s,o)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=YI(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Nc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((u,h)=>{"!"===u?e.add(h):u===Nc&&t.add(h)}),r||c.set("offset",l/this.duration),i.push(c)});const s=[...e.values()],o=[...t.values()];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return HU(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class C4e extends lD{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);const c=new Map(e[0]);c.set("offset",zre(a)),s.push(c);const u=e.length-1;for(let h=1;h<=u;h++){let m=new Map(e[h]);const y=m.get("offset");m.set("offset",zre((t+y*r)/o)),s.push(m)}r=o,t=0,i="",e=s}return HU(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function zre(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function Hre(n,e,t,r,i,s,o,a,l,c,u,h,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:m}}const GU={};class $re{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function A4e(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,u){const h=[],m=this.ast.options&&this.ast.options.params||GU,b=this.buildStyles(r,a&&a.params||GU,h),T=l&&l.params||GU,M=this.buildStyles(i,T,h),B=new Set,V=new Map,Q=new Map,we="void"===i,je={params:Wre(T,m),delay:this.ast.options?.delay},$e=u?[]:$U(e,t,this.ast.animation,s,o,b,M,je,c,h);let H=0;return $e.forEach(L=>{H=Math.max(L.duration+L.delay,H)}),h.length?Hre(t,this._triggerName,r,i,we,b,M,[],[],V,Q,H,h):($e.forEach(L=>{const W=L.element,J=ia(V,W,new Set);L.preStyleProps.forEach(oe=>J.add(oe));const re=ia(Q,W,new Set);L.postStyleProps.forEach(oe=>re.add(oe)),W!==t&&B.add(W)}),Hre(t,this._triggerName,r,i,we,b,M,$e,[...B.values()],V,Q,H))}}function Wre(n,e){const t={...e};return Object.entries(n).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class S4e{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Wre(e,this.defaultParams);return this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=YI(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class D4e{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new S4e(i.style,i.options&&i.options.params||{},r))}),Gre(this.states,"true","1"),Gre(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new $re(e,i,this.states))}),this.fallbackTransition=function R4e(n,e){return new $re(n,{type:kt.Transition,animation:{type:kt.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Gre(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const M4e=new oD;class P4e{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=jU(this._driver,t,r,[]);if(r.length)throw function Lje(){return new K(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Dre(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=$U(this._driver,t,s,OU,Jx,new Map,new Map,r,M4e,i),o.forEach(u=>{const h=ia(a,u.element,new Map);u.postStyleProps.forEach(m=>h.set(m,null))})):(i.push(function Vje(){return new K(3300,!1)}()),o=[]),i.length)throw function Bje(){return new K(3504,!1)}();a.forEach((u,h)=>{u.forEach((m,y)=>{u.set(y,this._driver.computeStyle(h,y,Nc))})});const c=Vd(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,new Map,h)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Uje(){return new K(3301,!1)}();return t}listen(e,t,r,i){const s=RU(t,"","","");return xU(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const qre="ng-animate-queued",qU="ng-animate-disabled",L4e=[],Kre={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},V4e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ll="__ng_removed";class KU{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function z4e(n){return n??null}(r?e.value:e),r){const{value:s,...o}=e;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const XI="void",QU=new KU(XI);class B4e{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,xa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function jje(){return new K(3302,!1)}();if(null==r||0==r.length)throw function zje(){return new K(3303,!1)}();if(!function H4e(n){return"start"==n||"done"==n}(r))throw function Hje(){return new K(3400,!1)}();const s=ia(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=ia(this._engine.statesByElement,e,new Map);return a.has(t)||(xa(e,eD),xa(e,eD+"-"+t),a.set(t,QU)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function $je(){return new K(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new YU(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(xa(e,eD),xa(e,eD+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new KU(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=QU),c.value!==XI&&l.value===c.value){if(!function G4e(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const T=[],M=s.matchStyles(l.value,l.params,T),B=s.matchStyles(c.value,c.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{hp(e,M),Yl(e,B)})}return}const m=ia(this._engine.playersByElement,e,[]);m.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let y=s.matchTransition(l.value,c.value,e,c.params),b=!1;if(!y){if(!i)return;y=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:b}),b||(xa(e,qre),o.onStart(()=>{q_(e,qre)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const M=this._engine.playersByElement.get(e);if(M){let B=M.indexOf(o);B>=0&&M.splice(B,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,tD,!0);r.forEach(i=>{if(i[ll])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,XI,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Vd(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||QU,u=new KU(XI),h=new YU(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ll];(!s||s===Kre)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){xa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=RU(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,xU(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class U4e{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new B4e(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(cD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!cD(t))return;const s=t[ll];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),xa(e,qU)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),q_(e,qU))}removeNode(e,t,r){if(cD(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ll]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return cD(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,tD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,FU,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Vd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ll];if(t&&t.setForRemoval){if(e[ll]=Kre,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(qU)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)xa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Vd(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Wje(){return new K(3402,!1)}()}_flushAnimations(e,t){const r=new oD,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(at=>{u.add(at);const pt=this.driver.query(at,".ng-animate-queued",!0);for(let It=0;It<pt.length;It++)u.add(pt[It])});const h=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=Xre(m,this.collectedEnterElements),b=new Map;let T=0;y.forEach((at,pt)=>{const It=OU+T++;b.set(pt,It),at.forEach(hn=>xa(hn,It))});const M=[],B=new Set,V=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const pt=this.collectedLeaveElements[at],It=pt[ll];It&&It.setForRemoval&&(M.push(pt),B.add(pt),It.hasAnimation?this.driver.query(pt,".ng-star-inserted",!0).forEach(hn=>B.add(hn)):V.add(pt))}const Q=new Map,we=Xre(m,Array.from(B));we.forEach((at,pt)=>{const It=Jx+T++;Q.set(pt,It),at.forEach(hn=>xa(hn,It))}),e.push(()=>{y.forEach((at,pt)=>{const It=b.get(pt);at.forEach(hn=>q_(hn,It))}),we.forEach((at,pt)=>{const It=Q.get(pt);at.forEach(hn=>q_(hn,It))}),M.forEach(at=>{this.processLeaveNode(at)})});const je=[],$e=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(It=>{const hn=It.player,Ei=It.element;if(je.push(hn),this.collectedEnterElements.length){const li=Ei[ll];if(li&&li.setForMove){if(li.previousTriggersValues&&li.previousTriggersValues.has(It.triggerName)){const au=li.previousTriggersValues.get(It.triggerName),Oo=this.statesByElement.get(It.element);if(Oo&&Oo.has(It.triggerName)){const lu=Oo.get(It.triggerName);lu.value=au,Oo.set(It.triggerName,lu)}}return void hn.destroy()}}const Pa=!h||!this.driver.containsElement(h,Ei),ai=Q.get(Ei),Rr=b.get(Ei),Mr=this._buildInstruction(It,r,Rr,ai,Pa);if(Mr.errors&&Mr.errors.length)return void $e.push(Mr);if(Pa)return hn.onStart(()=>hp(Ei,Mr.fromStyles)),hn.onDestroy(()=>Yl(Ei,Mr.toStyles)),void i.push(hn);if(It.isFallbackTransition)return hn.onStart(()=>hp(Ei,Mr.fromStyles)),hn.onDestroy(()=>Yl(Ei,Mr.toStyles)),void i.push(hn);const Yd=[];Mr.timelines.forEach(li=>{li.stretchStartingKeyframe=!0,this.disabledNodes.has(li.element)||Yd.push(li)}),Mr.timelines=Yd,r.append(Ei,Mr.timelines),o.push({instruction:Mr,player:hn,element:Ei}),Mr.queriedElements.forEach(li=>ia(a,li,[]).push(hn)),Mr.preStyleProps.forEach((li,au)=>{if(li.size){let Oo=l.get(au);Oo||l.set(au,Oo=new Set),li.forEach((lu,Xd)=>Oo.add(Xd))}}),Mr.postStyleProps.forEach((li,au)=>{let Oo=c.get(au);Oo||c.set(au,Oo=new Set),li.forEach((lu,Xd)=>Oo.add(Xd))})});if($e.length){const at=[];$e.forEach(pt=>{at.push(function Gje(){return new K(3505,!1)}())}),je.forEach(pt=>pt.destroy()),this.reportError(at)}const H=new Map,L=new Map;o.forEach(at=>{const pt=at.element;r.has(pt)&&(L.set(pt,pt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,H))}),i.forEach(at=>{const pt=at.element;this._getPreviousPlayers(pt,!1,at.namespaceId,at.triggerName,null).forEach(hn=>{ia(H,pt,[]).push(hn),hn.destroy()})});const W=M.filter(at=>Jre(at,l,c)),J=new Map;Yre(J,this.driver,V,c,Nc).forEach(at=>{Jre(at,l,c)&&W.push(at)});const oe=new Map;y.forEach((at,pt)=>{Yre(oe,this.driver,new Set(at),l,"!")}),W.forEach(at=>{const pt=J.get(at),It=oe.get(at);J.set(at,new Map([...pt?.entries()??[],...It?.entries()??[]]))});const q=[],$r=[],la={};o.forEach(at=>{const{element:pt,player:It,instruction:hn}=at;if(r.has(pt)){if(u.has(pt))return It.onDestroy(()=>Yl(pt,hn.toStyles)),It.disabled=!0,It.overrideTotalTime(hn.totalTime),void i.push(It);let Ei=la;if(L.size>1){let ai=pt;const Rr=[];for(;ai=ai.parentNode;){const Mr=L.get(ai);if(Mr){Ei=Mr;break}Rr.push(ai)}Rr.forEach(Mr=>L.set(Mr,Ei))}const Pa=this._buildAnimation(It.namespaceId,hn,H,s,oe,J);if(It.setRealPlayer(Pa),Ei===la)q.push(It);else{const ai=this.playersByElement.get(Ei);ai&&ai.length&&(It.parentPlayer=Vd(ai)),i.push(It)}}else hp(pt,hn.fromStyles),It.onDestroy(()=>Yl(pt,hn.toStyles)),$r.push(It),u.has(pt)&&i.push(It)}),$r.forEach(at=>{const pt=s.get(at.element);if(pt&&pt.length){const It=Vd(pt);at.setRealPlayer(It)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<M.length;at++){const pt=M[at],It=pt[ll];if(q_(pt,Jx),It&&It.hasAnimation)continue;let hn=[];if(a.size){let Pa=a.get(pt);Pa&&Pa.length&&hn.push(...Pa);let ai=this.driver.query(pt,FU,!0);for(let Rr=0;Rr<ai.length;Rr++){let Mr=a.get(ai[Rr]);Mr&&Mr.length&&hn.push(...Mr)}}const Ei=hn.filter(Pa=>!Pa.destroyed);Ei.length?$4e(this,pt,Ei):this.processLeaveNode(pt)}return M.length=0,q.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const pt=this.players.indexOf(at);this.players.splice(pt,1)}),at.play()}),q}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==XI;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,h=ia(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(y=>{const b=y.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),y.destroy(),h.push(y)})}hp(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,m=t.timelines.map(b=>{const T=b.element;u.add(T);const M=T[ll];if(M&&M.removedBeforeQueried)return new oE(b.duration,b.delay);const B=T!==l,V=function W4e(n){const e=[];return Zre(n,e),e}((r.get(T)||L4e).map(H=>H.getRealPlayer())).filter(H=>!!H.element&&H.element===T),Q=s.get(T),we=o.get(T),je=Dre(this._normalizer,b.keyframes,Q,we),$e=this._buildPlayer(b,je,V);if(b.subTimeline&&i&&h.add(T),B){const H=new YU(e,a,T);H.setRealPlayer($e),c.push(H)}return $e});c.forEach(b=>{ia(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function j4e(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),u.forEach(b=>xa(b,Ore));const y=Vd(m);return y.onDestroy(()=>{u.forEach(b=>q_(b,Ore)),Yl(l,t.toStyles)}),h.forEach(b=>{ia(i,b,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new oE(e.duration,e.delay)}}class YU{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new oE,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>xU(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ia(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function cD(n){return n&&1===n.nodeType}function Qre(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Yre(n,e,t,r,i){const s=[];t.forEach(l=>s.push(Qre(l)));const o=[];r.forEach((l,c)=>{const u=new Map;l.forEach(h=>{const m=e.computeStyle(c,h,i);u.set(h,m),(!m||0==m.length)&&(c[ll]=V4e,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>Qre(l,s[a++])),o}function Xre(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function xa(n,e){n.classList?.add(e)}function q_(n,e){n.classList?.remove(e)}function $4e(n,e,t){Vd(t).onDone(()=>n.processLeaveNode(e))}function Zre(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof QK?Zre(r.players,e):e.push(r)}}function Jre(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class ZI{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new U4e(e.body,t,r),this._timelineEngine=new P4e(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=jU(this._driver,s,l,[]);if(l.length)throw function Oje(){return new K(3404,!1)}();a=function x4e(n,e,t){return new D4e(n,e,t)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=Rre(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=Rre(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class JI{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=JI.initialStylesByElement.get(e);i||JI.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Yl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Yl(this._element,this._initialStyles),this._endStyles&&(Yl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(JI.initialStylesByElement.delete(this._element),this._startStyles&&(hp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hp(this._element,this._endStyles),this._endStyles=null),Yl(this._element,this._initialStyles),this._state=3)}}function XU(n){let e=null;return n.forEach((t,r)=>{(function K4e(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class eie{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:UU(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class tie{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Pre(e,t)}getParentElement(e){return MU(e)}query(e,t,r){return kre(e,t,r)}computeStyle(e,t,r){return UU(e,t)}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(y=>y instanceof eie);(function s4e(n,e){return 0===n||0===e})(r,i)&&u.forEach(y=>{y.currentSnapshot.forEach((b,T)=>c.set(T,b))});let h=function n4e(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(y=>new Map(y));h=function o4e(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,UU(n,a)))}}return e}(e,h,c);const m=function q4e(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=XU(e[0]),e.length>1&&(r=XU(e[e.length-1]))):e instanceof Map&&(t=XU(e)),t||r?new JI(n,t,r):null}(e,h);return new eie(e,h,l,m)}}const nie="@.disabled";class rie{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==nie?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Q4e extends rie{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==nie?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Y4e(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function X4e(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}class Z4e{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const c=this._rendererCache;let u=c.get(i);return u||(u=new rie("",i,this.engine,()=>c.delete(i)),c.set(i,u)),u}const s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new Q4e(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const iie=[{provide:NU,useFactory:function eze(){return new Vre}},{provide:ZI,useClass:(()=>{class n extends ZI{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(Me(En),Me(kU),Me(NU))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})()},{provide:jh,useFactory:function tze(n,e,t){return new Z4e(n,e,t)},deps:[lk,ZI,yt]}],ZU=[{provide:kU,useFactory:()=>new tie},{provide:Ec,useValue:"BrowserAnimations"},...iie],sie=[{provide:kU,useClass:PU},{provide:Ec,useValue:"NoopAnimations"},...iie];let nze=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?sie:ZU}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({providers:ZU,imports:[H7]})}}return n})();const oie="@firebase/installations",JU="0.6.9",aie=1e4,lie=`w:${JU}`,cie="FIS_v2",rze="https://firebaseinstallations.googleapis.com/v1",ize=36e5,iu=new k.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function uie(n){return n instanceof k.g&&n.code.includes("request-failed")}function ej({projectId:n}){return`${rze}/projects/${n}/installations`}function die(n){return{token:n.token,requestStatus:2,expiresIn:lze(n.expiresIn),creationTime:Date.now()}}function tj(n,e){return nj.apply(this,arguments)}function nj(){return(nj=(0,O.A)(function*(n,e){const r=(yield e.json()).error;return iu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function hie({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function rj(n){return ij.apply(this,arguments)}function ij(){return(ij=(0,O.A)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function lze(n){return Number(n.replace("s","000"))}function sj(){return(sj=(0,O.A)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=ej(n),i=hie(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:cie,appId:n.appId,sdkVersion:lie})},l=yield rj(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:die(c.authToken)}}throw yield tj("Create Installation",l)})).apply(this,arguments)}function pie(n){return new Promise(e=>{setTimeout(e,n)})}const hze=/^[cdef][\w-]{21}$/,oj="";function fze(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function pze(n){return function dze(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return hze.test(t)?t:oj}catch{return oj}}function K_(n){return`${n.appName}!${n.appId}`}const Q_=new Map;function mie(n,e){const t=K_(n);gie(t,e),function _ze(n,e){const t=function _ie(){return!pp&&"BroadcastChannel"in self&&(pp=new BroadcastChannel("[Firebase] FID Change"),pp.onmessage=n=>{gie(n.data.key,n.data.fid)}),pp}();t&&t.postMessage({key:n,fid:e}),function yie(){0===Q_.size&&pp&&(pp.close(),pp=null)}()}(t,e)}function gie(n,e){const t=Q_.get(n);if(t)for(const r of t)r(e)}let pp=null;const yze="firebase-installations-database",vze=1,mp="firebase-installations-store";let aj=null;function lj(){return aj||(aj=(0,IQ.P2)(yze,vze,{upgrade:(n,e)=>{0===e&&n.createObjectStore(mp)}})),aj}function dD(n,e){return cj.apply(this,arguments)}function cj(){return(cj=(0,O.A)(function*(n,e){const t=K_(n),i=(yield lj()).transaction(mp,"readwrite"),s=i.objectStore(mp),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&mie(n,e.fid),e})).apply(this,arguments)}function uj(n){return dj.apply(this,arguments)}function dj(){return(dj=(0,O.A)(function*(n){const e=K_(n),r=(yield lj()).transaction(mp,"readwrite");yield r.objectStore(mp).delete(e),yield r.done})).apply(this,arguments)}function e0(n,e){return hj.apply(this,arguments)}function hj(){return(hj=(0,O.A)(function*(n,e){const t=K_(n),i=(yield lj()).transaction(mp,"readwrite"),s=i.objectStore(mp),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&mie(n,a.fid),a})).apply(this,arguments)}function fj(n){return pj.apply(this,arguments)}function pj(){return pj=(0,O.A)(function*(n){let e;const t=yield e0(n.appConfig,r=>{const i=function bze(n){return bie(n||{fid:fze(),registrationStatus:0})}(r),s=function Eze(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(iu.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Ize(n,e){return mj.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:wze(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===oj?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),pj.apply(this,arguments)}function mj(){return mj=(0,O.A)(function*(n,e){try{const t=yield function uze(n,e){return sj.apply(this,arguments)}(n,e);return dD(n.appConfig,t)}catch(t){throw uie(t)&&409===t.customData.serverCode?yield uj(n.appConfig):yield dD(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),mj.apply(this,arguments)}function wze(n){return gj.apply(this,arguments)}function gj(){return(gj=(0,O.A)(function*(n){let e=yield vie(n.appConfig);for(;1===e.registrationStatus;)yield pie(100),e=yield vie(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield fj(n);return r||t}return e})).apply(this,arguments)}function vie(n){return e0(n,e=>{if(!e)throw iu.create("installation-not-found");return bie(e)})}function bie(n){return function Cze(n){return 1===n.registrationStatus&&n.registrationTime+aie<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function _j(){return(_j=(0,O.A)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function Aze(n,{fid:e}){return`${ej(n)}/${e}/authTokens:generate`}(n,t),i=function fie(n,{refreshToken:e}){const t=hie(n);return t.append("Authorization",function cze(n){return`${cie} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:lie,appId:n.appId}})},l=yield rj(()=>fetch(r,a));if(l.ok)return die(yield l.json());throw yield tj("Generate Auth Token",l)})).apply(this,arguments)}function yj(n){return vj.apply(this,arguments)}function vj(){return vj=(0,O.A)(function*(n,e=!1){let t;const r=yield e0(n.appConfig,s=>{if(!Iie(s))throw iu.create("not-registered");const o=s.authToken;if(!e&&function Dze(n){return 2===n.requestStatus&&!function Rze(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+ize}(n)}(o))return s;if(1===o.requestStatus)return t=function Sze(n,e){return bj.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw iu.create("app-offline");const a=function Mze(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function xze(n,e){return Ej.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),vj.apply(this,arguments)}function bj(){return(bj=(0,O.A)(function*(n,e){let t=yield Eie(n.appConfig);for(;1===t.authToken.requestStatus;)yield pie(100),t=yield Eie(n.appConfig);const r=t.authToken;return 0===r.requestStatus?yj(n,e):r})).apply(this,arguments)}function Eie(n){return e0(n,e=>{if(!Iie(e))throw iu.create("not-registered");return function Pze(n){return 1===n.requestStatus&&n.requestTime+aie<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Ej(){return Ej=(0,O.A)(function*(n,e){try{const t=yield function Tze(n,e){return _j.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield dD(n.appConfig,r),t}catch(t){if(!uie(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield dD(n.appConfig,r)}else yield uj(n.appConfig);throw t}}),Ej.apply(this,arguments)}function Iie(n){return void 0!==n&&2===n.registrationStatus}function Ij(){return(Ij=(0,O.A)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield fj(e);return r?r.catch(console.error):yj(e).catch(console.error),t.fid})).apply(this,arguments)}function wj(){return wj=(0,O.A)(function*(n,e=!1){const t=n;return yield function Oze(n){return Cj.apply(this,arguments)}(t),(yield yj(t,e)).token}),wj.apply(this,arguments)}function Cj(){return(Cj=(0,O.A)(function*(n){const{registrationPromise:e}=yield fj(n);e&&(yield e)})).apply(this,arguments)}function Sj(n){return iu.create("missing-app-config-values",{valueName:n})}const wie="installations",Uze=n=>{const e=n.getProvider("app").getImmediate(),t=function Vze(n){if(!n||!n.options)throw Sj("App Configuration");if(!n.name)throw Sj("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Sj(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,Hn._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},jze=n=>{const e=n.getProvider("app").getImmediate(),t=(0,Hn._getProvider)(e,wie).getImmediate();return{getId:()=>function kze(n){return Ij.apply(this,arguments)}(t),getToken:i=>function Nze(n){return wj.apply(this,arguments)}(t,i)}};(function zze(){(0,Hn._registerComponent)(new Xo.uA(wie,Uze,"PUBLIC")),(0,Hn._registerComponent)(new Xo.uA("installations-internal",jze,"PRIVATE"))})(),(0,Hn.registerVersion)(oie,JU),(0,Hn.registerVersion)(oie,JU,"esm2017");const hD="analytics",Hze="firebase_id",$ze="origin",Wze=6e4,Gze="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xj="https://www.googletagmanager.com/gtag/js",rs=new xo.Vy("@firebase/analytics"),ao=new k.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Kze(n){if(!n.startsWith(xj)){const e=ao.create("invalid-gtag-resource",{gtagURL:n});return rs.warn(e.message),""}return n}function Cie(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Dj(){return(Dj=(0,O.A)(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield Cie(t)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){rs.error(a)}n("config",i,s)})).apply(this,arguments)}function Rj(){return(Rj=(0,O.A)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield Cie(t);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){rs.error(s)}})).apply(this,arguments)}const rHe=30,Tie=new class sHe{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function oHe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Mj(){return(Mj=(0,O.A)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:oHe(r)},s=Gze.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw ao.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Pj(){return(Pj=(0,O.A)(function*(n,e=Tie,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw ao.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ao.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new dHe;return setTimeout((0,O.A)(function*(){a.abort()}),void 0!==t?t:Wze),Aie({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function Aie(n,e,t){return kj.apply(this,arguments)}function kj(){return kj=(0,O.A)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Tie){var s;const{appId:o,measurementId:a}=n;try{yield function cHe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ao.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(l){if(a)return rs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield function aHe(n){return Mj.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!function uHe(n){if(!(n instanceof k.g&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return rs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?(0,k.p9)(t,i.intervalMillis,rHe):(0,k.p9)(t,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,h),rs.debug(`Calling attemptFetch again in ${u} millis`),Aie(n,h,r,i)}}),kj.apply(this,arguments)}class dHe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Nj,jj;function Oj(){return(Oj=(0,O.A)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function zj(){return(zj=(0,O.A)(function*(){if(!(0,k.zW)())return rs.warn(ao.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,k.eX)()}catch(n){return rs.warn(ao.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function Hj(){return Hj=(0,O.A)(function*(n,e,t,r,i,s,o){var a;const l=function lHe(n){return Pj.apply(this,arguments)}(n);l.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&rs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>rs.error(y)),e.push(l);const c=function yHe(){return zj.apply(this,arguments)}().then(y=>{if(y)return r.getId()}),[u,h]=yield Promise.all([l,c]);(function nHe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(xj)&&t.src.includes(n))return t;return null})(s)||function Yze(n,e){const t=function Qze(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Kze}),r=document.createElement("script"),i=`${xj}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),jj&&(i("consent","default",jj),function Sie(n){jj=n}(void 0)),i("js",new Date);const m=null!==(a=o?.config)&&void 0!==a?a:{};return m[$ze]="firebase",m.update=!0,null!=h&&(m[Hze]=h),i("config",u.measurementId,m),Nj&&(i("set",Nj),function xie(n){Nj=n}(void 0)),u.measurementId}),Hj.apply(this,arguments)}class bHe{constructor(e){this.app=e}_delete(){return delete Xl[this.app.options.appId],Promise.resolve()}}let Xl={},Die=[];const Rie={};let Pie,Zl,fD="dataLayer",$j=!1;function IHe(n,e,t){!function EHe(){const n=[];if((0,k.sr)()&&n.push("This is a browser extension environment."),(0,k.dM)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ao.create("invalid-analytics-context",{errorInfo:e});rs.warn(t.message)}}();const r=n.options.appId;if(!r)throw ao.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw ao.create("no-api-key");rs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xl[r])throw ao.create("already-exists",{id:r});if(!$j){!function Xze(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(fD);const{wrappedGtag:s,gtagCore:o}=function tHe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function eHe(n,e,t,r){function s(){return s=(0,O.A)(function*(o,...a){try{if("event"===o){const[l,c]=a;yield function Jze(n,e,t,r,i){return Rj.apply(this,arguments)}(n,e,t,l,c)}else if("config"===o){const[l,c]=a;yield function Zze(n,e,t,r,i,s){return Dj.apply(this,arguments)}(n,e,t,r,l,c)}else if("consent"===o){const[l,c]=a;n("consent",l,c)}else if("get"===o){const[l,c,u]=a;n("get",l,c,u)}else if("set"===o){const[l]=a;n("set",l)}else n(o,...a)}catch(l){rs.error(l)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(Xl,Die,Rie,fD,"gtag");Zl=s,Pie=o,$j=!0}return Xl[r]=function vHe(n,e,t,r,i,s,o){return Hj.apply(this,arguments)}(n,Die,Rie,e,Pie,fD,t),new bHe(n)}function wHe(n=(0,Hn.getApp)()){n=(0,k.Ku)(n);const e=(0,Hn._getProvider)(n,hD);return e.isInitialized()?e.getImmediate():function CHe(n,e={}){const t=(0,Hn._getProvider)(n,hD);if(t.isInitialized()){const i=t.getImmediate();if((0,k.bD)(e,t.getOptions()))return i;throw ao.create("already-initialized")}return t.initialize({options:e})}(n)}function THe(){return Wj.apply(this,arguments)}function Wj(){return(Wj=(0,O.A)(function*(){if((0,k.sr)()||!(0,k.dM)()||!(0,k.zW)())return!1;try{return yield(0,k.eX)()}catch{return!1}})).apply(this,arguments)}const kie="@firebase/analytics";!function SHe(){(0,Hn._registerComponent)(new Xo.uA(hD,(e,{options:t})=>IHe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,Hn._registerComponent)(new Xo.uA("analytics-internal",function n(e){try{const t=e.getProvider(hD).getImmediate();return{logEvent:(r,i,s)=>function AHe(n,e,t,r){n=(0,k.Ku)(n),function hHe(n,e,t,r,i){return Oj.apply(this,arguments)}(Zl,Xl[n.app.options.appId],e,t,r).catch(i=>rs.error(i))}(t,r,i,s)}}catch(t){throw ao.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,Hn.registerVersion)(kie,"0.10.8"),(0,Hn.registerVersion)(kie,"0.10.8","esm2017")}();class qj{constructor(e){return e}}const Kj="__angularfire_symbol__analyticsIsSupportedValue",Fie="__angularfire_symbol__analyticsIsSupported";globalThis[Fie]||=THe().then(n=>globalThis[Kj]=n).catch(()=>globalThis[Kj]=!1);const pD={async:()=>globalThis[Fie],sync:()=>{const n=globalThis[Kj];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Analytics"));return n}},DHe=Oc(wHe,!0),Xj=new Ee("angularfire2.analytics-instances");function HHe(n){return(e,t)=>{if(!pD.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new qj(r)}}const $He={provide:class xHe{constructor(){return YN("analytics")}},deps:[[new Mi,Xj]]},WHe={provide:qj,useFactory:function zHe(n,e){if(!pD.sync())return null;const t=uQ("analytics",n,e);return t&&new qj(t)},deps:[[new Mi,Xj],lE]};function GHe(n,...e){return(0,Hn.registerVersion)("angularfire",ed.full,"analytics"),_l([WHe,$He,{provide:ZC,useValue:pD.async,multi:!0},{provide:Xj,useFactory:HHe(n),multi:!0,deps:[yt,Pn,Vg,XN,...e]}])}const Bie="@firebase/database";let Zj="";function Jj(n){Zj=n}class QHe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class YHe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const jie=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QHe(e)}}catch{}return new YHe},gp=jie("localStorage"),e4=jie("sessionStorage"),Y_=new xo.Vy("@firebase/database"),zie=function(){let n=1;return function(){return n++}}(),Hie=function(n){const e=(0,k.kj)(n),t=new k.gz;t.update(e);const r=t.digest();return k.K3.encodeByteArray(r)},n0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=n0.apply(null,r):e+="object"==typeof r?(0,k.As)(r):r,e+=" "}return e};let _p=null,$ie=!0;const Wie=function(n,e){(0,k.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Y_.logLevel=xo.$b.VERBOSE,_p=Y_.log.bind(Y_),e&&e4.set("logging_enabled",!0)):"function"==typeof n?_p=n:(_p=null,e4.remove("logging_enabled"))},is=function(...n){if(!0===$ie&&($ie=!1,null===_p&&!0===e4.get("logging_enabled")&&Wie(!0)),_p){const e=n0.apply(null,n);_p(e)}},r0=function(n){return function(...e){is(n,...e)}},t4=function(...n){const e="FIREBASE INTERNAL ERROR: "+n0(...n);Y_.error(e)},Jl=function(...n){const e=`FIREBASE FATAL ERROR: ${n0(...n)}`;throw Y_.error(e),new Error(e)},js=function(...n){const e="FIREBASE WARNING: "+n0(...n);Y_.warn(e)},mD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Bd="[MIN_NAME]",su="[MAX_NAME]",yp=function(n,e){if(n===e)return 0;if(n===Bd||e===su)return-1;if(e===Bd||n===su)return 1;{const t=Kie(n),r=Kie(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},JHe=function(n,e){return n===e?0:n<e?-1:1},s0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.As)(e))},n4=function(n){if("object"!=typeof n||null===n)return(0,k.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.As)(e[r]),t+=":",t+=n4(n[e[r]]);return t+="}",t},Gie=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ss(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const qie=function(n){(0,k.vA)(!mD(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),h+=m}return h.toLowerCase()},r3e=new RegExp("^-?(0*)\\d{1,10}$"),Kie=function(n){if(r3e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},X_=function(n){try{n()}catch(e){setTimeout(()=>{throw js("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},o0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class a3e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){js(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class l3e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(is("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',js(e)}}let a0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Jie=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rse="long_polling";class i4{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ise(n,e,t){let r;if((0,k.vA)("string"==typeof e,"typeof type must == string"),(0,k.vA)("object"==typeof t,"typeof params must == object"),"websocket"===e)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==rse)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function c3e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ss(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class u3e{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.A4)(this.counters_)}}const s4={},o4={};function a4(n){const e=n.toString();return s4[e]||(s4[e]=new u3e),s4[e]}class h3e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&X_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ud{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=r0(e),this.stats_=a4(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),ise(t,rse,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new h3e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new l4((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Jie.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ud.forceAllow_=!0}static forceDisallow(){Ud.forceDisallow_=!0}static isAvailable(){return!((0,k.$g)()||!Ud.forceAllow_&&(Ud.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.KA)(t),i=Gie(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class l4{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=zie(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=l4.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){is("frame writing exception"),a.stack&&is(a.stack),is(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||is("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{is("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let _D=null;typeof MozWebSocket<"u"?_D=MozWebSocket:typeof WebSocket<"u"&&(_D=WebSocket);let Z_=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=r0(this.connId),this.stats_=a4(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,k.$g)()&&typeof location<"u"&&location.hostname&&Jie.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),ise(t,"websocket",a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gp.set("previous_websocket_failure",!0);try{let i;if((0,k.$g)()){i={headers:{"User-Agent":`Firebase/5/${Zj}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new _D(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==_D&&!n.forceDisallow_}static previouslyFailed(){return gp.isInMemoryStorage||!0===gp.get("previous_websocket_failure")}markConnectionHealthy(){gp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Gie(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),dse=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ud,Z_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Z_&&Z_.isAvailable();let i=r&&!Z_.previouslyFailed();if(t.webSocketOnly&&(r||js("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Z_];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class yse{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=r0("c:"+this.id+":"),this.transportManager_=new dse(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=o0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=s0("t",e),r=s0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=s0("t",e),r=s0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=s0("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?t4("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):t4("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&js("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),o0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):o0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class vse{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class bse{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,k.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class yD extends bse{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yD}getInitialEvent(e){return(0,k.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new Wn("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jd(n){return n.pieces_.length-n.pieceNum_}function cr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Wn(n.pieces_,e)}function u4(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function l0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function wse(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Wn(e,0)}function Hr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Wn(t,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function lo(n,e){const t=an(n),r=an(e);if(null===t)return e;if(t===r)return lo(cr(n),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function N3e(n,e){const t=l0(n,0),r=l0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=yp(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function d4(n,e){if(jd(n)!==jd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Da(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jd(n)>jd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class O3e{constructor(e,t){this.errorPrefix_=t,this.parts_=l0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.OE)(this.parts_[r]);Cse(this)}}function Cse(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+vp(n))}function vp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class h4 extends bse{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new h4}getInitialEvent(e){return(0,k.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const c0=1e3;let bD,bp=(()=>{class n extends vse{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=r0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=c0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,k.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");h4.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&yD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,k.As)(o)),(0,k.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new k.cY,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,k.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.vA)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.gR)(t,"w")){const i=(0,k.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();js(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,k.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):t4("Unrecognized action received from server: "+(0,k.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=c0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=c0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=c0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){(0,k.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?is("getToken() completed but was canceled"):(is("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new yse(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{js(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&js(y),u())}}})()}interrupt(t){is("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){is("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.Im)(this.interruptReasons_)&&(this.reconnectDelay_=c0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>n4(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Wn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){is("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){is("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Zj.replace(/\./g,"-")]=1,(0,k.jZ)()?t["framework.cordova"]=1:(0,k.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=yD.getInstance().currentlyOnline();return(0,k.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new dn(e,t)}}class vD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new dn(Bd,e),i=new dn(Bd,t);return 0!==this.compare(r,i)}minPost(){return dn.MIN}}class Sse extends vD{static get __EMPTY_NODE(){return bD}static set __EMPTY_NODE(e){bD=e}compare(e,t){return yp(e.name,t.name)}isDefinedOn(e){throw(0,k.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return dn.MIN}maxPost(){return new dn(su,bD)}makePost(e,t){return(0,k.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new dn(e,bD)}toString(){return".key"}}const ec=new Sse;class ED{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let p4,cl=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ko.EMPTY_NODE,this.right=o??ko.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ko.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ko.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ko{constructor(e,t=ko.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ko(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cl.BLACK,null,null))}remove(e){return new ko(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ED(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ED(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ED(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ED(this.root_,null,this.comparator_,!0,e)}}function H3e(n,e){return yp(n.name,e.name)}function f4(n,e){return yp(n,e)}ko.EMPTY_NODE=new class z3e{copy(e,t,r,i,s){return this}insert(e,t,r){return new cl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const xse=function(n){return"number"==typeof n?"number:"+qie(n):"string:"+n},Dse=function(n){if(n.isLeafNode()){const e=n.val();(0,k.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.gR)(e,".sv"),"Priority must be a string or number.")}else(0,k.vA)(n===p4||n.isEmpty(),"priority of unexpected type.");(0,k.vA)(n===p4||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Rse,Mse,Pse,J_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Dse(this.priorityNode_)}static set __childrenNodeConstructor(t){Rse=t}static get __childrenNodeConstructor(){return Rse}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ln(t)?this:".priority"===an(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=an(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.vA)(".priority"!==i||1===jd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+xse(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?qie(this.value_):this.value_,this.lazyHash_=Hie(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.vA)(s>=0,"Unknown leaf type: "+r),(0,k.vA)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const vr=new class q3e extends vD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?yp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(su,new J_("[PRIORITY-POST]",Pse))}makePost(e,t){const r=Mse(e);return new dn(t,new J_("[PRIORITY-POST]",r))}toString(){return".priority"}},K3e=Math.log(2);class Q3e{constructor(e){this.count=parseInt(Math.log(e+1)/K3e,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ID=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let h,m;if(0===u)return null;if(1===u)return h=n[l],m=t?t(h):h,new cl(m,h.node,cl.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return h=n[y],m=t?t(h):h,new cl(m,h.node,cl.BLACK,b,T)}},a=function(l){let c=null,u=null,h=n.length;const m=function(b,T){const M=h-b,B=h;h-=b;const V=i(M+1,B),Q=n[M],we=t?t(Q):Q;y(new cl(we,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),M=Math.pow(2,l.count-(b+1));T?m(M,cl.BLACK):(m(M,cl.BLACK),m(M,cl.RED))}return u}(new Q3e(n.length));return new ko(r||e,a)};let m4;const ey={};class ou{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.vA)(ey&&vr,"ChildrenNode.ts has not been loaded"),m4=m4||new ou({".priority":ey},{".priority":vr}),m4}get(e){const t=(0,k.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ko?t:null}hasIndex(e){return(0,k.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.vA)(e!==ec,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(dn.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?ID(r,e.getCompare()):ey;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ou(u,c)}addToIndexes(e,t){const r=(0,k.kH)(this.indexes_,(i,s)=>{const o=(0,k.yw)(this.indexSet_,s);if((0,k.vA)(o,"Missing index implementation for "+s),i===ey){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(dn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),ID(a,o.getCompare())}return ey}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new dn(e.name,a))),l.insert(e,e.node)}});return new ou(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.kH)(this.indexes_,i=>{if(i===ey)return i;{const s=t.get(e.name);return s?i.remove(new dn(e.name,s)):i}});return new ou(r,this.indexSet_)}}let u0,Gt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Dse(this.priorityNode_),this.children_.isEmpty()&&(0,k.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return u0||(u0=new n(new ko(f4),null,ou.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||u0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?u0:r}}getChild(t){const r=an(t);return null===r?this:this.getImmediateChild(r).getChild(cr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new dn(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?u0:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=an(t);if(null===i)return r;{(0,k.vA)(".priority"!==an(t)||1===jd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(cr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(vr,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+xse(this.getPriority().val())+":"),this.forEachChild(vr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Hie(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new dn(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,dn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,dn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===d0?-1:0}withIndex(t){if(t===ec||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ec||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(vr),s=r.getIterator(vr);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===ec?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const d0=new class Y3e extends Gt{constructor(){super(new ko(f4),Gt.EMPTY_NODE,ou.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Gt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(dn,{MIN:{value:new dn(Bd,Gt.EMPTY_NODE)},MAX:{value:new dn(su,d0)}}),Sse.__EMPTY_NODE=Gt.EMPTY_NODE,J_.__childrenNodeConstructor=Gt,function $3e(n){p4=n}(d0),function G3e(n){Pse=n}(d0);const X3e=!0;function Xr(n,e=null){if(null===n)return Gt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new J_(n,Xr(e));if(n instanceof Array||!X3e){let t=Gt.EMPTY_NODE;return ss(n,(r,i)=>{if((0,k.gR)(n,r)&&"."!==r.substring(0,1)){const s=Xr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Xr(e))}{const t=[];let r=!1;if(ss(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Xr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new dn(o,l)))}}),0===t.length)return Gt.EMPTY_NODE;const s=ID(t,H3e,o=>o.name,f4);if(r){const o=ID(t,vr.getCompare());return new Gt(s,Xr(e),new ou({".priority":o},{".priority":vr}))}return new Gt(s,Xr(e),ou.Default)}}!function W3e(n){Mse=n}(Xr);class g4 extends vD{constructor(e){super(),this.indexPath_=e,(0,k.vA)(!ln(e)&&".priority"!==an(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?yp(e.name,t.name):s}makePost(e,t){const r=Xr(e),i=Gt.EMPTY_NODE.updateChild(this.indexPath_,r);return new dn(t,i)}maxPost(){const e=Gt.EMPTY_NODE.updateChild(this.indexPath_,d0);return new dn(su,e)}toString(){return l0(this.indexPath_,0).join("/")}}const _4=new class Z3e extends vD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?yp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(e,t){const r=Xr(e);return new dn(t,r)}toString(){return".value"}};function kse(n){return{type:"value",snapshotNode:n}}function ty(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function h0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function f0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class y4{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,k.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(h0(t,a)):(0,k.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ty(t,r)):o.trackChildChange(f0(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(vr,(i,s)=>{t.hasChild(i)||r.trackChildChange(h0(i,s))}),t.isLeafNode()||t.forEachChild(vr,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(f0(i,s,o))}else r.trackChildChange(ty(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Gt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class p0{constructor(e){this.indexedFilter_=new y4(e.getIndex()),this.index_=e.getIndex(),this.startPost_=p0.getStartPost_(e),this.endPost_=p0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new dn(t,r))||(r=Gt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Gt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Gt.EMPTY_NODE);const s=this;return t.forEachChild(vr,(o,a)=>{s.matches(new dn(o,a))||(i=i.updateImmediateChild(o,Gt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class e$e{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new p0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new dn(t,r))||(r=Gt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Gt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Gt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(m,y)=>h(y,m)}else o=this.index_.getCompare();const a=e;(0,k.vA)(a.numChildren()===this.limit_,"");const l=new dn(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const h=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(f0(t,r,h)),a.updateImmediateChild(t,r);{s?.trackChildChange(h0(t,h));const T=a.updateImmediateChild(t,Gt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(ty(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(h0(c.name,c.node)),s.trackChildChange(ty(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,Gt.EMPTY_NODE)):e}}class wD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:su}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vr}copy(){const e=new wD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function v4(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function b4(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function CD(n,e){const t=n.copy();return t.index_=e,t}function Nse(n){const e={};if(n.isDefault())return e;let t;if(n.index_===vr?t="$priority":n.index_===_4?t="$value":n.index_===ec?t="$key":((0,k.vA)(n.index_ instanceof g4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Ose(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==vr&&(e.i=n.index_.toString()),e}class TD extends vse{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=r0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=TD.getListenId_(e,r),a={};this.listens_[o]=a;const l=Nse(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(404===c&&(h=null,c=null),null===c&&this.onDataUpdate_(s,h,!1,r),(0,k.yw)(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=TD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Nse(e._queryParams),r=e._path.toString(),i=new k.cY;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.Am)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,k.$L)(a.responseText)}catch{js("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&js("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class o$e{constructor(){this.rootNode_=Gt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function AD(){return{value:null,children:new Map}}function ny(n,e,t){if(ln(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=an(e);n.children.has(r)||n.children.set(r,AD()),ny(n.children.get(r),e=cr(e),t)}}function E4(n,e){if(ln(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(vr,(r,i)=>{ny(n,new Wn(r),i)}),E4(n,e)}}if(n.children.size>0){const t=an(e);return e=cr(e),n.children.has(t)&&E4(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function I4(n,e,t){null!==n.value?t(e,n.value):function a$e(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{I4(i,new Wn(e.toString()+"/"+r),t)})}class l$e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ss(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class d$e{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new l$e(e);const r=1e4+2e4*Math.random();o0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ss(e,(i,s)=>{s>0&&(0,k.gR)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),o0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var tc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(tc||{});function T4(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class SD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=tc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,k.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Wn(e));return new SD(Nn(),t,this.revert)}}return(0,k.vA)(an(this.path)===e,"operationForChild called for unrelated child."),new SD(cr(this.path),this.affectedTree,this.revert)}}class m0{constructor(e,t){this.source=e,this.path=t,this.type=tc.LISTEN_COMPLETE}operationForChild(e){return ln(this.path)?new m0(this.source,Nn()):new m0(this.source,cr(this.path))}}class Ep{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=tc.OVERWRITE}operationForChild(e){return ln(this.path)?new Ep(this.source,Nn(),this.snap.getImmediateChild(e)):new Ep(this.source,cr(this.path),this.snap)}}class ry{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=tc.MERGE}operationForChild(e){if(ln(this.path)){const t=this.children.subtree(new Wn(e));return t.isEmpty()?null:t.value?new Ep(this.source,Nn(),t.value):new ry(this.source,Nn(),t)}return(0,k.vA)(an(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ry(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class zd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ln(e))return this.isFullyInitialized()&&!this.filtered_;const t=an(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class h$e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function g0(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function m$e(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.Hk)("Should only compare child_ events.");const r=new dn(e.childName,e.snapshotNode),i=new dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function p$e(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function xD(n,e){return{eventCache:n,serverCache:e}}function _0(n,e,t,r){return xD(new zd(e,t,r),n.serverCache)}function Lse(n,e,t,r){return xD(n.eventCache,new zd(e,t,r))}function DD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ip(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let A4;class br{constructor(e,t=(()=>(A4||(A4=new ko(JHe)),A4))()){this.value=e,this.children=t}static fromObject(e){let t=new br(null);return ss(e,(r,i)=>{t=t.set(new Wn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(ln(e))return null;{const r=an(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(cr(e),t);return null!=s?{path:Hr(new Wn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ln(e))return this;{const t=an(e),r=this.children.get(t);return null!==r?r.subtree(cr(e)):new br(null)}}set(e,t){if(ln(e))return new br(t,this.children);{const r=an(e),s=(this.children.get(r)||new br(null)).set(cr(e),t),o=this.children.insert(r,s);return new br(this.value,o)}}remove(e){if(ln(e))return this.children.isEmpty()?new br(null):new br(null,this.children);{const t=an(e),r=this.children.get(t);if(r){const i=r.remove(cr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new br(null):new br(this.value,s)}return this}}get(e){if(ln(e))return this.value;{const t=an(e),r=this.children.get(t);return r?r.get(cr(e)):null}}setTree(e,t){if(ln(e))return t;{const r=an(e),s=(this.children.get(r)||new br(null)).setTree(cr(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new br(this.value,o)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Hr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ln(e))return null;{const s=an(e),o=this.children.get(s);return o?o.findOnPath_(cr(e),Hr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,r){if(ln(e))return this;{this.value&&r(t,this.value);const i=an(e),s=this.children.get(i);return s?s.foreachOnPath_(cr(e),Hr(t,i),r):new br(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Hr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ul{constructor(e){this.writeTree_=e}static empty(){return new ul(new br(null))}}function y0(n,e,t){if(ln(e))return new ul(new br(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=lo(i,e);return s=s.updateChild(o,t),new ul(n.writeTree_.set(i,s))}{const i=new br(t),s=n.writeTree_.setTree(e,i);return new ul(s)}}}function S4(n,e,t){let r=n;return ss(t,(i,s)=>{r=y0(r,Hr(e,i),s)}),r}function Vse(n,e){if(ln(e))return ul.empty();{const t=n.writeTree_.setTree(e,new br(null));return new ul(t)}}function x4(n,e){return null!=wp(n,e)}function wp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(lo(t.path,e)):null}function Bse(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(vr,(r,i)=>{e.push(new dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new dn(r,i.value))}),e}function Hd(n,e){if(ln(e))return n;{const t=wp(n,e);return new ul(null!=t?new br(t):n.writeTree_.subtree(e))}}function D4(n){return n.writeTree_.isEmpty()}function iy(n,e){return Use(Nn(),n.writeTree_,e)}function Use(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,k.vA)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=Use(Hr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Hr(n,".priority"),r)),t}}function RD(n,e){return Wse(e,n)}function E$e(n,e){if(n.snap)return Da(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Da(Hr(n.path,t),e))return!0;return!1}function w$e(n){return n.visible}function jse(n,e,t){let r=ul.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Da(t,o)?(a=lo(t,o),r=y0(r,a,s.snap)):Da(o,t)&&(a=lo(o,t),r=y0(r,Nn(),s.snap.getChild(a)));else{if(!s.children)throw(0,k.Hk)("WriteRecord should have .snap or .children");if(Da(t,o))a=lo(t,o),r=S4(r,a,s.children);else if(Da(o,t))if(a=lo(o,t),ln(a))r=S4(r,Nn(),s.children);else{const l=(0,k.yw)(s.children,an(a));if(l){const c=l.getChild(cr(a));r=y0(r,Nn(),c)}}}}}return r}function zse(n,e,t,r,i){if(r||i){const s=Hd(n.visibleWrites,e);return!i&&D4(s)?t:i||null!=t||x4(s,Nn())?iy(jse(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Da(c.path,e)||Da(e,c.path))},e),t||Gt.EMPTY_NODE):null}{const s=wp(n.visibleWrites,e);if(null!=s)return s;{const o=Hd(n.visibleWrites,e);return D4(o)?t:null!=t||x4(o,Nn())?iy(o,t||Gt.EMPTY_NODE):null}}}function MD(n,e,t,r){return zse(n.writeTree,n.treePath,e,t,r)}function R4(n,e){return function C$e(n,e,t){let r=Gt.EMPTY_NODE;const i=wp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(vr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Hd(n.visibleWrites,e);return t.forEachChild(vr,(o,a)=>{const l=iy(Hd(s,new Wn(o)),a);r=r.updateImmediateChild(o,l)}),Bse(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return Bse(Hd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function Hse(n,e,t,r){return function T$e(n,e,t,r,i){(0,k.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Hr(e,t);if(x4(n.visibleWrites,s))return null;{const o=Hd(n.visibleWrites,s);return D4(o)?i.getChild(t):iy(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function PD(n,e){return function S$e(n,e){return wp(n.visibleWrites,e)}(n.writeTree,Hr(n.treePath,e))}function M4(n,e,t){return function A$e(n,e,t,r){const i=Hr(e,t),s=wp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?iy(Hd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function $se(n,e){return Wse(Hr(n.treePath,e),n.writeTree)}function Wse(n,e){return{treePath:n,writeTree:e}}class M$e{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,f0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,h0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,ty(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,k.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,f0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Gse=new class P$e{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class P4{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new zd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return M4(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ip(this.viewCache_),s=function R$e(n,e,t,r,i,s){return function x$e(n,e,t,r,i,s,o){let a;const l=Hd(n.visibleWrites,e),c=wp(l,Nn());if(null!=c)a=c;else{if(null==t)return[];a=iy(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==h(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function qse(n,e,t,r,i,s){const o=e.eventCache;if(null!=PD(r,t))return e;{let a,l;if(ln(t))if((0,k.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ip(e),h=R4(r,c instanceof Gt?c:Gt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=MD(r,Ip(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=an(t);if(".priority"===c){(0,k.vA)(1===jd(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=Hse(r,t,u,l);a=null!=h?n.filter.updatePriority(u,h):o.getNode()}else{const u=cr(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=Hse(r,t,o.getNode(),l);h=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else h=M4(r,c,e.serverCache);a=null!=h?n.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return _0(e,a,o.isFullyInitialized()||ln(t),n.filter.filtersNodes())}}function kD(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(ln(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=an(t);if(!l.isCompleteForPath(t)&&jd(t)>1)return e;const b=cr(t),M=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),M):u.updateChild(l.getNode(),y,M,b,Gse,null)}const h=Lse(e,c,l.isFullyInitialized()||ln(t),u.filtersNodes());return qse(n,h,t,i,new P4(i,h,s),a)}function k4(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new P4(i,e,s);if(ln(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=_0(e,c,!0,n.filter.filtersNodes());else{const h=an(t);if(".priority"===h)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=_0(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=cr(t),y=a.getNode().getImmediateChild(h);let b;if(ln(m))b=r;else{const T=u.getCompleteChild(h);b=null!=T?".priority"===u4(m)&&T.getChild(wse(m)).isEmpty()?T:T.updateChild(m,r):Gt.EMPTY_NODE}l=y.equals(b)?e:_0(e,n.filter.updateChild(a.getNode(),h,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function Kse(n,e){return n.eventCache.isCompleteForChild(e)}function Qse(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function N4(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=ln(t)?r:new br(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,m)=>{if(u.hasChild(h)){const b=Qse(0,e.serverCache.getNode().getImmediateChild(h),m);l=kD(n,l,new Wn(h),b,i,s,o,a)}}),c.children.inorderTraversal((h,m)=>{const y=!e.serverCache.isCompleteForChild(h)&&null===m.value;if(!u.hasChild(h)&&!y){const T=Qse(0,e.serverCache.getNode().getImmediateChild(h),m);l=kD(n,l,new Wn(h),T,i,s,o,a)}}),l}class j$e{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new y4(r.getIndex()),s=function t$e(n){return n.loadsAllData()?new y4(n.getIndex()):n.hasLimit()?new e$e(n):new p0(n)}(r);this.processor_=function k$e(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Gt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Gt.EMPTY_NODE,a.getNode(),null),u=new zd(l,o.isFullyInitialized(),i.filtersNodes()),h=new zd(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=xD(h,u),this.eventGenerator_=new h$e(this.query_)}get query(){return this.query_}}function $$e(n,e){const t=Ip(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ln(e)&&!t.getImmediateChild(an(e)).isEmpty())?t.getChild(e):null}function Yse(n){return 0===n.eventRegistrations_.length}function Xse(n,e,t){const r=[];if(t){(0,k.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Zse(n,e,t,r){e.type===tc.MERGE&&null!==e.source.queryId&&((0,k.vA)(Ip(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.vA)(DD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function O$e(n,e,t,r,i){const s=new M$e;let o,a;if(t.type===tc.OVERWRITE){const c=t;c.source.fromUser?o=k4(n,e,c.path,c.snap,r,i,s):((0,k.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ln(c.path),o=kD(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===tc.MERGE){const c=t;c.source.fromUser?o=function L$e(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Hr(t,l);Kse(e,an(u))&&(a=k4(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Hr(t,l);Kse(e,an(u))||(a=k4(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,k.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=N4(n,e,c.path,c.children,r,i,a,s))}else if(t.type===tc.ACK_USER_WRITE){const c=t;o=c.revert?function U$e(n,e,t,r,i,s){let o;if(null!=PD(r,t))return e;{const a=new P4(r,e,i),l=e.eventCache.getNode();let c;if(ln(t)||".priority"===an(t)){let u;if(e.serverCache.isFullyInitialized())u=MD(r,Ip(e));else{const h=e.serverCache.getNode();(0,k.vA)(h instanceof Gt,"serverChildren would be complete if leaf node"),u=R4(r,h)}c=n.filter.updateFullNode(l,u,s)}else{const u=an(t);let h=M4(r,u,e.serverCache);null==h&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),c=null!=h?n.filter.updateChild(l,u,h,cr(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,Gt.EMPTY_NODE,cr(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=MD(r,Ip(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=PD(r,Nn()),_0(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function V$e(n,e,t,r,i,s,o){if(null!=PD(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(ln(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return kD(n,e,t,l.getNode().getChild(t),i,s,a,o);if(ln(t)){let c=new br(null);return l.getNode().forEachChild(ec,(u,h)=>{c=c.set(new Wn(u),h)}),N4(n,e,t,c,i,s,a,o)}return e}{let c=new br(null);return r.foreach((u,h)=>{const m=Hr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),N4(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==tc.LISTEN_COMPLETE)throw(0,k.Hk)("Unknown operation type: "+t.type);o=function B$e(n,e,t,r,i){const s=e.serverCache;return qse(n,Lse(e,s.getNode(),s.isFullyInitialized()||ln(t),s.isFiltered()),t,r,Gse,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function F$e(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=DD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(kse(DD(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function N$e(n,e){(0,k.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,k.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Jse(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Jse(n,e,t,r){return function f$e(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function J3e(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),g0(n,i,"child_removed",e,r,t),g0(n,i,"child_added",e,r,t),g0(n,i,"child_moved",s,r,t),g0(n,i,"child_changed",e,r,t),g0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ND,FD;class eoe{constructor(){this.views=new Map}}function O4(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,k.vA)(null!=s,"SyncTree gave us an op for an invalid query."),Zse(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(Zse(o,e,t,r));return s}}function toe(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=MD(t,i?r:null),l=!1;a?l=!0:r instanceof Gt?(a=R4(t,r),l=!1):(a=Gt.EMPTY_NODE,l=!1);const c=xD(new zd(a,l,!1),new zd(r,i,!1));return new j$e(e,c)}return o}function noe(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function $d(n,e){let t=null;for(const r of n.views.values())t=t||$$e(r,e);return t}function roe(n,e){return e._queryParams.loadsAllData()?OD(n):n.views.get(e._queryIdentifier)}function ioe(n,e){return null!=roe(n,e)}function Wd(n){return null!=OD(n)}function OD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let eWe=1;class soe{constructor(e){this.listenProvider_=e,this.syncPointTree_=new br(null),this.pendingWriteTree_=function D$e(){return{visibleWrites:ul.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function F4(n,e,t,r,i){return function _$e(n,e,t,r,i){(0,k.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=y0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?sy(n,new Ep({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Gd(n,e,t=!1){const r=function v$e(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function b$e(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,k.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&E$e(a,r.path)?i=!1:Da(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function I$e(n){n.visibleWrites=jse(n.allWrites,w$e,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Vse(n.visibleWrites,r.path):ss(r.children,l=>{n.visibleWrites=Vse(n.visibleWrites,Hr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new br(null);return null!=r.snap?s=s.set(Nn(),!0):ss(r.children,o=>{s=s.set(new Wn(o),!0)}),sy(n,new SD(r.path,s,t))}return[]}function v0(n,e,t){return sy(n,new Ep({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function LD(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||ioe(o,e))){const l=function X$e(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Wd(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(Xse(c,t,r)),Yse(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(Xse(l,t,r)),Yse(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Wd(n)&&s.push(new(function K$e(){return(0,k.vA)(ND,"Reference.ts has not been loaded"),ND}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function Q$e(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(s,(m,y)=>Wd(y));if(u&&!h){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function aWe(n){return n.fold((e,t,r)=>{if(t&&Wd(t))return[OD(t)];{let i=[];return t&&(i=noe(t)),ss(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],M=T.query,B=coe(n,T);n.listenProvider_.startListening(E0(M),b0(n,M),B.hashFn,B.onComplete)}}}!h&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(E0(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(BD(m));n.listenProvider_.stopListening(E0(m),y)}))}!function lWe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=BD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function ooe(n,e,t,r){const i=V4(n,r);if(null!=i){const s=B4(i),o=s.path,a=s.queryId,l=lo(o,e);return U4(n,o,new Ep(T4(a),l,t))}return[]}function L4(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=lo(m,i);s=s||$d(y,b),o=o||Wd(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||Wd(a),s=s||$d(a,Nn())):(a=new eoe,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=Gt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=$d(b,Nn());T&&(s=s.updateImmediateChild(y,T))}));const c=ioe(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=BD(e);(0,k.vA)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function cWe(){return eWe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let h=function Y$e(n,e,t,r,i,s){const o=toe(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function W$e(n,e){n.eventRegistrations_.push(e)}(o,t),function G$e(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(vr,(s,o)=>{r.push(ty(s,o))}),t.isFullyInitialized()&&r.push(kse(t.getNode())),Jse(n,r,t.getNode(),e)}(o,t)}(a,e,t,RD(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=roe(a,e);h=h.concat(function uWe(n,e,t){const r=e._path,i=b0(n,e),s=coe(n,t),o=n.listenProvider_.startListening(E0(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,k.vA)(!Wd(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!ln(c)&&u&&Wd(u))return[OD(u).query];{let m=[];return u&&(m=m.concat(noe(u).map(y=>y.query))),ss(h,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(E0(u),b0(n,u))}}return o}(n,e,m))}return h}function VD(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=$d(a,lo(o,e));if(c)return c});return zse(i,e,s,t,!0)}function sy(n,e){return aoe(e,n.syncPointTree_,null,RD(n.pendingWriteTree_,Nn()))}function aoe(n,e,t,r){if(ln(n.path))return loe(n,e,t,r);{const i=e.get(Nn());null==t&&null!=i&&(t=$d(i,Nn()));let s=[];const o=an(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=$se(r,o);s=s.concat(aoe(a,l,c,u))}return i&&(s=s.concat(O4(i,n,r,t))),s}}function loe(n,e,t,r){const i=e.get(Nn());null==t&&null!=i&&(t=$d(i,Nn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=$se(r,o),u=n.operationForChild(o);u&&(s=s.concat(loe(u,a,l,c)))}),i&&(s=s.concat(O4(i,n,r,t))),s}function coe(n,e){const t=e.query,r=b0(n,t);return{hashFn:()=>(function z$e(n){return n.viewCache_.serverCache.getNode()}(e)||Gt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function iWe(n,e,t){const r=V4(n,t);if(r){const i=B4(r),s=i.path,o=i.queryId,a=lo(s,e);return U4(n,s,new m0(T4(o),a))}return[]}(n,t._path,r):function rWe(n,e){return sy(n,new m0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function n3e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return LD(n,t,null,s)}}}}function b0(n,e){const t=BD(e);return n.queryToTagMap.get(t)}function BD(n){return n._path.toString()+"$"+n._queryIdentifier}function V4(n,e){return n.tagToQueryMap.get(e)}function B4(n){const e=n.indexOf("$");return(0,k.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Wn(n.substr(0,e))}}function U4(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.vA)(r,"Missing sync point for query tag that we're tracking"),O4(r,t,RD(n.pendingWriteTree_,e),null)}function E0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function J$e(){return(0,k.vA)(FD,"Reference.ts has not been loaded"),FD}())(n._repo,n._path):n}class j4{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new j4(t)}node(){return this.node_}}class z4{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Hr(this.path_,e);return new z4(this.syncTree_,t)}node(){return VD(this.syncTree_,this.path_)}}const dWe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},uoe=function(n,e,t){return n&&"object"==typeof n?((0,k.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?hWe(n[".sv"],e,t):"object"==typeof n[".sv"]?fWe(n[".sv"],e):void(0,k.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},hWe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.vA)(!1,"Unexpected server value: "+n)},fWe=function(n,e,t){n.hasOwnProperty("increment")||(0,k.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},doe=function(n,e,t,r){return $4(e,new z4(t,n),r)},H4=function(n,e,t){return $4(n,new j4(e),t)};function $4(n,e,t){const r=n.getPriority().val(),i=uoe(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=uoe(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new J_(a,Xr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new J_(i))),o.forEachChild(vr,(a,l)=>{const c=$4(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class W4{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function UD(n,e){let t=e instanceof Wn?e:new Wn(e),r=n,i=an(t);for(;null!==i;){const s=(0,k.yw)(r.node.children,i)||{children:{},childCount:0};r=new W4(i,r,s),t=cr(t),i=an(t)}return r}function Cp(n){return n.node.value}function G4(n,e){n.node.value=e,q4(n)}function hoe(n){return n.node.childCount>0}function jD(n,e){ss(n.node.children,(t,r)=>{e(new W4(t,n,r))})}function foe(n,e,t,r){t&&!r&&e(n),jD(n,i=>{foe(i,e,!0,r)}),t&&r&&e(n)}function I0(n){return new Wn(null===n.parent?n.name:I0(n.parent)+"/"+n.name)}function q4(n){null!==n.parent&&function gWe(n,e,t){const r=function pWe(n){return void 0===Cp(n)&&!hoe(n)}(t),i=(0,k.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,q4(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,q4(n))}(n.parent,n.name,n)}const _We=/[\[\].#$\/\u0000-\u001F\u007F]/,yWe=/[\[\].#$\u0000-\u001F\u007F]/,K4=10485760,zD=function(n){return"string"==typeof n&&0!==n.length&&!_We.test(n)},poe=function(n){return"string"==typeof n&&0!==n.length&&!yWe.test(n)},w0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!mD(n)||n&&"object"==typeof n&&(0,k.gR)(n,".sv")},nc=function(n,e,t,r){r&&void 0===e||C0((0,k.dI)(n,"value"),e,t)},C0=function(n,e,t){const r=t instanceof Wn?new O3e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+vp(r));if("function"==typeof e)throw new Error(n+"contains a function "+vp(r)+" with contents = "+e.toString());if(mD(e))throw new Error(n+"contains "+e.toString()+" "+vp(r));if("string"==typeof e&&e.length>K4/3&&(0,k.OE)(e)>K4)throw new Error(n+"contains a string greater than "+K4+" utf8 bytes "+vp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ss(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!zD(o)))throw new Error(n+" contains an invalid key ("+o+") "+vp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function F3e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.OE)(e),Cse(n)})(r,o),C0(n,a,r),function L3e(n){const e=n.parts_.pop();n.byteLength_-=(0,k.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+vp(r)+" in addition to actual children.")}},moe=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ss(e,(o,a)=>{const l=new Wn(o);if(C0(i,a,Hr(t,l)),".priority"===u4(l)&&!w0(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=l0(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!zD(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(N3e);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Da(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Q4=function(n,e,t){if(!t||void 0!==e){if(mD(e))throw new Error((0,k.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!w0(e))throw new Error((0,k.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},T0=function(n,e,t,r){if(!(r&&void 0===t||zD(t)))throw new Error((0,k.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},A0=function(n,e,t,r){if(!(r&&void 0===t||poe(t)))throw new Error((0,k.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},EWe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),A0(n,e,t,r)},Ra=function(n,e){if(".info"===an(e))throw new Error(n+" failed = Can't modify data under /.info/")},goe=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!zD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),poe(n)}(t))throw new Error((0,k.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class IWe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function HD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!d4(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function _oe(n,e,t){HD(n,t),yoe(n,r=>d4(r,e))}function oa(n,e,t){HD(n,t),yoe(n,r=>Da(r,e)||Da(e,r))}function yoe(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(wWe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function wWe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();_p&&is("event: "+t.toString()),X_(r)}}}const voe="repo_interrupt",CWe=25;class TWe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new IWe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=AD(),this.transactionQueueTree_=new W4,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function boe(n){const t=n.infoData_.getNode(new Wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function S0(n){return dWe({timestamp:boe(n)})}function Eoe(n,e,t,r,i){n.dataUpdateCount++;const s=new Wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,k.kH)(t,c=>Xr(c));o=function sWe(n,e,t,r){const i=V4(n,r);if(i){const s=B4(i),o=s.path,a=s.queryId,l=lo(o,e),c=br.fromObject(t);return U4(n,o,new ry(T4(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Xr(t);o=ooe(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,k.kH)(t,c=>Xr(c));o=function nWe(n,e,t){const r=br.fromObject(t);return sy(n,new ry({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Xr(t);o=v0(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ay(n,s)),oa(n.eventQueue_,a,o)}function Ioe(n,e){Y4(n,"connected",e),!1===e&&function RWe(n){oy(n,"onDisconnectEvents");const e=S0(n),t=AD();I4(n.onDisconnect_,Nn(),(i,s)=>{const o=doe(i,s,n.serverSyncTree_,e);ny(t,i,o)});let r=[];I4(t,Nn(),(i,s)=>{r=r.concat(v0(n.serverSyncTree_,i,s));const o=ez(n,i);ay(n,o)}),n.onDisconnect_=AD(),oa(n.eventQueue_,Nn(),r)}(n)}function Y4(n,e,t){const r=new Wn("/.info/"+e),i=Xr(t);n.infoData_.updateSnapshot(r,i);const s=v0(n.infoSyncTree_,r,i);oa(n.eventQueue_,r,s)}function $D(n){return n.nextWriteId_++}function X4(n,e,t,r,i){oy(n,"set",{path:e.toString(),value:t,priority:r});const s=S0(n),o=Xr(t,r),a=VD(n.serverSyncTree_,e),l=H4(o,a,s),c=$D(n),u=F4(n.serverSyncTree_,e,l,c,!0);HD(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(m,y)=>{const b="ok"===m;b||js("set at "+e+" failed: "+m);const T=Gd(n.serverSyncTree_,c,!b);oa(n.eventQueue_,e,T),qd(0,i,m,y)});const h=ez(n,e);ay(n,h),oa(n.eventQueue_,h,[])}function MWe(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&E4(n.onDisconnect_,e),qd(0,t,r,i)})}function woe(n,e,t,r){const i=Xr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&ny(n.onDisconnect_,e,i),qd(0,r,s,o)})}function Z4(n,e,t){let r;r=".info"===an(e._path)?LD(n.infoSyncTree_,e,t):LD(n.serverSyncTree_,e,t),_oe(n.eventQueue_,e._path,r)}function Coe(n){n.persistentConnection_&&n.persistentConnection_.interrupt(voe)}function oy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),is(t,...e)}function qd(n,e,t,r){e&&X_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function J4(n,e,t){return VD(n.serverSyncTree_,e,t)||Gt.EMPTY_NODE}function WD(n,e=n.transactionQueueTree_){if(e||GD(n,e),Cp(e)){const t=Aoe(n,e);(0,k.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function LWe(n,e,t){const r=t.map(c=>c.currentWriteId),i=J4(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];(0,k.vA)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=lo(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{oy(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const h=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(Gd(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&h.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();GD(n,UD(n.transactionQueueTree_,e)),WD(n,n.transactionQueueTree_),oa(n.eventQueue_,e,u);for(let m=0;m<h.length;m++)X_(h[m])}else{if("datastale"===c)for(let h=0;h<t.length;h++)t[h].status=3===t[h].status?4:0;else{js("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}ay(n,e)}},o)}(n,I0(e),t)}else hoe(e)&&jD(e,t=>{WD(n,t)})}function ay(n,e){const t=Toe(n,e),r=I0(t);return function VWe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=lo(t,l.path);let h,u=!1;if((0,k.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,h=l.abortReason,i=i.concat(Gd(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=CWe)u=!0,h="maxretry",i=i.concat(Gd(n.serverSyncTree_,l.currentWriteId,!0));else{const m=J4(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){C0("transaction failed: Data returned ",y,l.path);let b=Xr(y);"object"==typeof y&&null!=y&&(0,k.gR)(y,".priority")||(b=b.updatePriority(m.getPriority()));const M=l.currentWriteId,B=S0(n),V=H4(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=$D(n),o.splice(o.indexOf(M),1),i=i.concat(F4(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(Gd(n.serverSyncTree_,M,!0))}else u=!0,h="nodata",i=i.concat(Gd(n.serverSyncTree_,l.currentWriteId,!0))}oa(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===h?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(h),!1,null)))}GD(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)X_(r[a]);WD(n,n.transactionQueueTree_)}(n,Aoe(n,t),r),r}function Toe(n,e){let t,r=n.transactionQueueTree_;for(t=an(e);null!==t&&void 0===Cp(r);)r=UD(r,t),t=an(e=cr(e));return r}function Aoe(n,e){const t=[];return Soe(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Soe(n,e,t){const r=Cp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);jD(e,i=>{Soe(n,i,t)})}function GD(n,e){const t=Cp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,G4(e,t.length>0?t:void 0)}jD(e,r=>{GD(n,r)})}function ez(n,e){const t=I0(Toe(n,e)),r=UD(n.transactionQueueTree_,e);return function mWe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{tz(n,i)}),tz(n,r),foe(r,i=>{tz(n,i)}),t}function tz(n,e){const t=Cp(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,k.vA)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,k.vA)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Gd(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?G4(e,void 0):t.length=s+1,oa(n.eventQueue_,I0(e),i);for(let o=0;o<r.length;o++)X_(r[o])}}const nz=function(n,e){const t=jWe(n),r=t.namespace;return"firebase.com"===t.domain&&Jl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Jl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&js("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new i4(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Wn(t.pathString)}},jWe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=function BWe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,h)));const m=function UWe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):js(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},xoe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zWe=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=xoe.charAt(t%64),t=Math.floor(t/64);(0,k.vA)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=xoe.charAt(e[i]);return(0,k.vA)(20===o.length,"nextPushId: Length should be 20."),o}}();class Doe{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.As)(this.snapshot.exportVal())}}class Roe{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class rz{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Moe{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.cY;return MWe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ra("OnDisconnect.remove",this._path);const e=new k.cY;return woe(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ra("OnDisconnect.set",this._path),nc("OnDisconnect.set",e,this._path,!1);const t=new k.cY;return woe(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ra("OnDisconnect.setWithPriority",this._path),nc("OnDisconnect.setWithPriority",e,this._path,!1),Q4("OnDisconnect.setWithPriority",t,!1);const r=new k.cY;return function PWe(n,e,t,r,i){const s=Xr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&ny(n.onDisconnect_,e,s),qd(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ra("OnDisconnect.update",this._path),moe("OnDisconnect.update",e,this._path,!1);const t=new k.cY;return function kWe(n,e,t,r){if((0,k.Im)(t))return is("onDisconnect().update() called with empty data.  Don't do anything."),void qd(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ss(t,(o,a)=>{const l=Xr(a);ny(n.onDisconnect_,Hr(e,o),l)}),qd(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class No{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:u4(this._path)}get ref(){return new Ma(this._repo,this._path)}get _queryIdentifier(){const e=Ose(this._queryParams),t=n4(e);return"{}"===t?"default":t}get _queryObject(){return Ose(this._queryParams)}isEqual(e){if(!((e=(0,k.Ku)(e))instanceof No))return!1;const t=this._repo===e._repo,r=d4(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function k3e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function qD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Kd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ec){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Bd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==su)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===vr){if(null!=e&&!w0(e)||null!=t&&!w0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.vA)(n.getIndex()instanceof g4||n.getIndex()===_4,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function KD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ma extends No{constructor(e,t){super(e,t,new wD,!1)}get parent(){const e=wse(this._path);return null===e?null:new Ma(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Tp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Wn(e),r=Ap(this.ref,e);return new Tp(this._node.getChild(t),r,vr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Tp(i,Ap(this.ref,r),vr)))}hasChild(e){const t=new Wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Poe(n,e){return(n=(0,k.Ku)(n))._checkNotDeleted("ref"),void 0!==e?Ap(n._root,e):n._root}function koe(n,e){(n=(0,k.Ku)(n))._checkNotDeleted("refFromURL");const t=nz(e,n._repo.repoInfo_.nodeAdmin);goe("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Jl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Poe(n,t.path.toString())}function Ap(n,e){return null===an((n=(0,k.Ku)(n))._path)?EWe("child","path",e,!1):A0("child","path",e,!1),new Ma(n._repo,Hr(n._path,e))}function iz(n,e){n=(0,k.Ku)(n),Ra("set",n._path),nc("set",e,n._path,!1);const t=new k.cY;return X4(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qWe(n,e){moe("update",e,n._path,!1);const t=new k.cY;return function DWe(n,e,t,r){oy(n,"update",{path:e.toString(),value:t});let i=!0;const s=S0(n),o={};if(ss(t,(a,l)=>{i=!1,o[a]=doe(Hr(e,a),Xr(l),n.serverSyncTree_,s)}),i)is("update() called with empty data.  Don't do anything."),qd(0,r,"ok",void 0);else{const a=$D(n),l=function tWe(n,e,t,r){!function y$e(n,e,t,r){(0,k.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=S4(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=br.fromObject(t);return sy(n,new ry({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);HD(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{const h="ok"===c;h||js("update at "+e+" failed: "+c);const m=Gd(n.serverSyncTree_,a,!h),y=m.length>0?ay(n,e):e;oa(n.eventQueue_,y,m),qd(0,r,c,u)}),ss(t,c=>{const u=ez(n,Hr(e,c));ay(n,u)}),oa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function KWe(n){n=(0,k.Ku)(n);const e=new rz(()=>{}),t=new x0(e);return function xWe(n,e,t){const r=function oWe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const h=lo(c,t);r=r||$d(u,h)});let i=n.syncPointTree_.get(t);i?r=r||$d(i,Nn()):(i=new eoe,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new zd(r,!0,!1):null;return function H$e(n){return DD(n.viewCache_)}(toe(i,e,RD(n.pendingWriteTree_,e._path),s?o.getNode():Gt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Xr(i).withIndex(e._queryParams.getIndex());let o;if(L4(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=v0(n.serverSyncTree_,e._path,s);else{const a=b0(n.serverSyncTree_,e);o=ooe(n.serverSyncTree_,e._path,s,a)}return oa(n.eventQueue_,e._path,o),LD(n.serverSyncTree_,e,t,null,!0),s},i=>(oy(n,"get for query "+(0,k.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Tp(r,new Ma(n._repo,n._path),n._queryParams.getIndex()))}class x0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Doe("value",this,new Tp(e.snapshotNode,new Ma(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Roe(this,e,t):null}matches(e){return e instanceof x0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class QD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Roe(this,e,t):null}createEvent(e,t){(0,k.vA)(null!=e.childName,"Child events should have a childName.");const r=Ap(new Ma(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Doe(e.type,this,new Tp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof QD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function D0(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(u,h)=>{Z4(n._repo,n,a),l(u,h)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new rz(t,s||void 0),a="value"===e?new x0(o):new QD(e,o);return function NWe(n,e,t){let r;r=".info"===an(e._path)?L4(n.infoSyncTree_,e,t):L4(n.serverSyncTree_,e,t),_oe(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>Z4(n._repo,n,a)}function sz(n,e,t,r){return D0(n,"value",e,t,r)}function Noe(n,e,t,r){return D0(n,"child_added",e,t,r)}function Ooe(n,e,t,r){return D0(n,"child_changed",e,t,r)}function Foe(n,e,t,r){return D0(n,"child_moved",e,t,r)}function Loe(n,e,t,r){return D0(n,"child_removed",e,t,r)}function Voe(n,e,t){let r=null;const i=t?new rz(t):null;"value"===e?r=new x0(i):e&&(r=new QD(e,i)),Z4(n._repo,n,r)}class dl{}class Boe extends dl{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){nc("endAt",this._value,e._path,!0);const t=b4(e._queryParams,this._value,this._key);if(KD(t),Kd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class YWe extends dl{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){nc("endBefore",this._value,e._path,!1);const t=function s$e(n,e,t){let r;return r=b4(n,e,n.index_===ec||t?t:Bd),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(KD(t),Kd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class Uoe extends dl{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){nc("startAt",this._value,e._path,!0);const t=v4(e._queryParams,this._value,this._key);if(KD(t),Kd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class JWe extends dl{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){nc("startAfter",this._value,e._path,!1);const t=function i$e(n,e,t){let r;return r=v4(n,e,n.index_===ec||t?t:su),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(KD(t),Kd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class t5e extends dl{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(e._repo,e._path,function n$e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class r5e extends dl{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(e._repo,e._path,function r$e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class s5e extends dl{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){qD(e,"orderByChild");const t=new Wn(this._path);if(ln(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new g4(t),i=CD(e._queryParams,r);return Kd(i),new No(e._repo,e._path,i,!0)}}class a5e extends dl{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){qD(e,"orderByKey");const t=CD(e._queryParams,ec);return Kd(t),new No(e._repo,e._path,t,!0)}}class c5e extends dl{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){qD(e,"orderByPriority");const t=CD(e._queryParams,vr);return Kd(t),new No(e._repo,e._path,t,!0)}}class d5e extends dl{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){qD(e,"orderByValue");const t=CD(e._queryParams,_4);return Kd(t),new No(e._repo,e._path,t,!0)}}class f5e extends dl{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(nc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Boe(this._value,this._key)._apply(new Uoe(this._value,this._key)._apply(e))}}function hl(n,...e){let t=(0,k.Ku)(n);for(const r of e)t=r._apply(t);return t}(function q$e(n){(0,k.vA)(!ND,"__referenceConstructor has already been defined"),ND=n})(Ma),function Z$e(n){(0,k.vA)(!FD,"__referenceConstructor has already been defined"),FD=n}(Ma);const oz={};function az(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Jl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),is("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=nz(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=nz(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new a0(a0.OWNER):new l3e(n.name,n.options,e);goe("Invalid Firebase Database URL",o),ln(o.path)||Jl("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function y5e(n,e,t,r){let i=oz[e.name];i||(i={},oz[e.name]=i);let s=i[n.toURLString()];return s&&Jl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new TWe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new a3e(n.name,t));return new b5e(h,n)}class b5e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function AWe(n,e,t){if(n.stats_=a4(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new TD(n.repoInfo_,(r,i,s,o)=>{Eoe(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ioe(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new bp(n.repoInfo_,e,(r,i,s,o)=>{Eoe(n,r,i,s,o)},r=>{Ioe(n,r)},r=>{!function SWe(n,e){ss(e,(t,r)=>{Y4(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function d3e(n,e){const t=n.toString();return o4[t]||(o4[t]=e()),o4[t]}(n.repoInfo_,()=>new d$e(n.stats_,n.server_)),n.infoData_=new o$e,n.infoSyncTree_=new soe({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=v0(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Y4(n,"connected",!1),n.serverSyncTree_=new soe({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);oa(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ma(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function _5e(n,e){const t=oz[e];(!t||t[n.key]!==n)&&Jl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Coe(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Jl("Cannot call "+e+" on a deleted database.")}}function zoe(){dse.IS_TRANSPORT_INITIALIZED&&js("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function E5e(){zoe(),Ud.forceDisallow()}function I5e(){zoe(),Z_.forceDisallow(),Ud.forceAllow()}function T5e(n,e){Wie(n,e)}const S5e={".sv":"timestamp"};class R5e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}bp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},bp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function A5e(n){Jj(Hn.SDK_VERSION),(0,Hn._registerComponent)(new Xo.uA("database",(e,{instanceIdentifier:t})=>az(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Hn.registerVersion)(Bie,"1.0.8",n),(0,Hn.registerVersion)(Bie,"1.0.8","esm2017")}();const N5e=new xo.Vy("@firebase/database-compat"),$oe=function(n){N5e.warn("FIREBASE WARNING: "+n)};class L5e{constructor(e){this._delegate=e}cancel(e){(0,k.od)("OnDisconnect.cancel",0,1,arguments.length),(0,k.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.od)("OnDisconnect.remove",0,1,arguments.length),(0,k.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.od)("OnDisconnect.set",1,2,arguments.length),(0,k.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,k.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,$oe("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class V5e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Qd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),A0("DataSnapshot.child","path",e,!1),new Qd(this._database,this._delegate.child(e))}hasChild(e){return(0,k.od)("DataSnapshot.hasChild",1,1,arguments.length),A0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.od)("DataSnapshot.forEach",1,1,arguments.length),(0,k.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Qd(this._database,t)))}hasChildren(){return(0,k.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.od)("DataSnapshot.ref",0,0,arguments.length),new aa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ms{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,k.od)("Query.on",2,4,arguments.length),(0,k.oD)("Query.on","callback",t,!1);const o=ms.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{t.call(o.context,new Qd(this.database,c),u)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return sz(this._delegate,a,l),t;case"child_added":return Noe(this._delegate,a,l),t;case"child_removed":return Loe(this._delegate,a,l),t;case"child_changed":return Ooe(this._delegate,a,l),t;case"child_moved":return Foe(this._delegate,a,l),t;default:throw new Error((0,k.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.od)("Query.off",0,3,arguments.length),function(n,e){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.oD)("Query.off","callback",t,!0),(0,k.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Voe(this._delegate,e,i)}else Voe(this._delegate,e)}get(){return KWe(this._delegate).then(e=>new Qd(this.database,e))}once(e,t,r,i){(0,k.od)("Query.once",1,4,arguments.length),(0,k.oD)("Query.once","callback",t,!0);const s=ms.getCancelAndContextArgs_("Query.once",r,i),o=new k.cY,a=(c,u)=>{const h=new Qd(this.database,c);t&&t.call(s.context,h,u),o.resolve(h)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":sz(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Noe(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Loe(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Ooe(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Foe(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,k.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,k.od)("Query.limitToFirst",1,1,arguments.length),new ms(this.database,hl(this._delegate,function n5e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new t5e(n)}(e)))}limitToLast(e){return(0,k.od)("Query.limitToLast",1,1,arguments.length),new ms(this.database,hl(this._delegate,function i5e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new r5e(n)}(e)))}orderByChild(e){return(0,k.od)("Query.orderByChild",1,1,arguments.length),new ms(this.database,hl(this._delegate,function o5e(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return A0("orderByChild","path",n,!1),new s5e(n)}(e)))}orderByKey(){return(0,k.od)("Query.orderByKey",0,0,arguments.length),new ms(this.database,hl(this._delegate,function l5e(){return new a5e}()))}orderByPriority(){return(0,k.od)("Query.orderByPriority",0,0,arguments.length),new ms(this.database,hl(this._delegate,function u5e(){return new c5e}()))}orderByValue(){return(0,k.od)("Query.orderByValue",0,0,arguments.length),new ms(this.database,hl(this._delegate,function h5e(){return new d5e}()))}startAt(e=null,t){return(0,k.od)("Query.startAt",0,2,arguments.length),new ms(this.database,hl(this._delegate,function ZWe(n=null,e){return T0("startAt","key",e,!0),new Uoe(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.od)("Query.startAfter",0,2,arguments.length),new ms(this.database,hl(this._delegate,function e5e(n,e){return T0("startAfter","key",e,!0),new JWe(n,e)}(e,t)))}endAt(e=null,t){return(0,k.od)("Query.endAt",0,2,arguments.length),new ms(this.database,hl(this._delegate,function QWe(n,e){return T0("endAt","key",e,!0),new Boe(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.od)("Query.endBefore",0,2,arguments.length),new ms(this.database,hl(this._delegate,function XWe(n,e){return T0("endBefore","key",e,!0),new YWe(n,e)}(e,t)))}equalTo(e,t){return(0,k.od)("Query.equalTo",1,2,arguments.length),new ms(this.database,hl(this._delegate,function p5e(n,e){return T0("equalTo","key",e,!0),new f5e(n,e)}(e,t)))}toString(){return(0,k.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.od)("Query.isEqual",1,1,arguments.length),!(e instanceof ms))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,k.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new aa(this.database,new Ma(this._delegate._repo,this._delegate._path))}}class aa extends ms{constructor(e,t){super(e,new No(t._repo,t._path,new wD,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new aa(this.database,Ap(this._delegate,e))}getParent(){(0,k.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new aa(this.database,e):null}getRoot(){return(0,k.od)("Reference.root",0,0,arguments.length),new aa(this.database,this._delegate.root)}set(e,t){(0,k.od)("Reference.set",1,2,arguments.length),(0,k.oD)("Reference.set","onComplete",t,!0);const r=iz(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,$oe("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ra("Reference.update",this._delegate._path),(0,k.oD)("Reference.update","onComplete",t,!0);const r=qWe(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.od)("Reference.setWithPriority",2,3,arguments.length),(0,k.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function GWe(n,e,t){if(Ra("setWithPriority",n._path),nc("setWithPriority",e,n._path,!1),Q4("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.cY;return X4(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,k.od)("Reference.remove",0,1,arguments.length),(0,k.oD)("Reference.remove","onComplete",e,!0);const t=function $We(n){return Ra("remove",n._path),iz(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.od)("Reference.transaction",1,3,arguments.length),(0,k.oD)("Reference.transaction","transactionUpdate",e,!1),(0,k.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function M5e(n,e,t){var r;if(n=(0,k.Ku)(n),Ra("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new k.cY,a=sz(n,()=>{});return function FWe(n,e,t,r,i,s){oy(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:zie(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=J4(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{C0("transaction failed: Data returned ",l,o.path),o.status=0;const c=UD(n.transactionQueueTree_,e),u=Cp(c)||[];let h;u.push(o),G4(c,u),"object"==typeof l&&null!==l&&(0,k.gR)(l,".priority")?(h=(0,k.yw)(l,".priority"),(0,k.vA)(w0(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(VD(n.serverSyncTree_,e)||Gt.EMPTY_NODE).getPriority().val();const m=S0(n),y=Xr(l,h),b=H4(y,a,m);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=b,o.currentWriteId=$D(n);const T=F4(n.serverSyncTree_,e,b,o.currentWriteId,o.applyLocally);oa(n.eventQueue_,e,T),WD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,u)=>{let h=null;l?s.reject(l):(h=new Tp(u,new Ma(n._repo,n._path),vr),s.resolve(new R5e(c,h)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new V5e(s.committed,new Qd(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,k.od)("Reference.setPriority",1,2,arguments.length),(0,k.oD)("Reference.setPriority","onComplete",t,!0);const r=function WWe(n,e){n=(0,k.Ku)(n),Ra("setPriority",n._path),Q4("setPriority",e,!1);const t=new k.cY;return X4(n._repo,Hr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.od)("Reference.push",0,2,arguments.length),(0,k.oD)("Reference.push","onComplete",t,!0);const r=function HWe(n,e){n=(0,k.Ku)(n),Ra("push",n._path),nc("push",e,n._path,!0);const t=boe(n._repo),r=zWe(t),i=Ap(n,r),s=Ap(n,r);let o;return o=null!=e?iz(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new aa(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new aa(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Ra("Reference.onDisconnect",this._delegate._path),new L5e(new Moe(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class R0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:E5e,forceLongPolling:I5e}}useEmulator(e,t,r={}){!function Hoe(n,e,t,r={}){(n=(0,k.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Jl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new a0(a0.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Fy)(r.mockUserToken,n.app.options.projectId);s=new a0(o)}!function g5e(n,e,t,r){n.repoInfo_=new i4(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,k.od)("database.ref",0,1,arguments.length),e instanceof aa){const t=koe(this._delegate,e.toString());return new aa(this,t)}{const t=Poe(this._delegate,e);return new aa(this,t)}}refFromURL(e){(0,k.od)("database.refFromURL",1,1,arguments.length);const r=koe(this._delegate,e);return new aa(this,r)}goOffline(){return(0,k.od)("database.goOffline",0,0,arguments.length),function w5e(n){(n=(0,k.Ku)(n))._checkNotDeleted("goOffline"),Coe(n._repo)}(this._delegate)}goOnline(){return(0,k.od)("database.goOnline",0,0,arguments.length),function C5e(n){(n=(0,k.Ku)(n))._checkNotDeleted("goOnline"),function OWe(n){n.persistentConnection_&&n.persistentConnection_.resume(voe)}(n._repo)}(this._delegate)}}R0.ServerValue={TIMESTAMP:function x5e(){return S5e}(),increment:n=>function D5e(n){return{".sv":{increment:n}}}(n)};var U5e=Object.freeze({__proto__:null,initStandalone:function B5e({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){Jj(t);const a=new Xo.h1("database-standalone"),l=new Xo.Kq("auth-internal",a);let c;return l.setComponent(new Xo.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new Xo.Kq("app-check-internal",a),c.setComponent(new Xo.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new R0(az(n,l,c,e,o),n),namespace:s}}});const j5e=R0.ServerValue;function M0(n,e,t="on",r=mf){return new Ut(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(Be(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),O2())}function Woe(n){return null==n}function Goe(n){return"function"==typeof n.set}function qoe(n,e){return Goe(e)?e:n.ref(e)}function Koe(n,e){if(function H5e(n){return"string"==typeof n}(n))return e.stringCase();if(Goe(n))return e.firebaseCase();if(function $5e(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Qoe(n){return(Woe(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Yoe(n,e,t){return Zu(...(e=Qoe(e)).map(i=>M0(n,i,"on",t)))}function Xoe(n,e){return function(r,i){return Koe(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function K5e(n){return function(t){return t?Koe(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Zoe(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function X5e(n,e){const{payload:t,prevKey:r,key:i}=e,s=Zoe(n,i),o=function Y5e(n,e){if(Woe(e))return 0;{const t=Zoe(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function Joe(n,e,t){return function Q5e(n,e,t){return M0(n,"value","once",t).pipe(Qt(r=>{const i=[qe(r)];return e.forEach(s=>i.push(M0(n,s,"on",t))),Zu(...i).pipe(yg(X5e,[]))}),SA())}(n,e=Qoe(e),t)}function eae(n,e){return function(){return M0(n,"value","on",e)}}!function z5e(n){n.INTERNAL.registerComponent(new Xo.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new R0(i,r)},"PUBLIC").setServiceProps({Reference:aa,Query:ms,Database:R0,DataSnapshot:Qd,enableLogging:T5e,INTERNAL:U5e,ServerValue:j5e}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.8")}(jl.A);const eGe=new Ee("angularfire2.realtimeDatabaseURL"),tGe=new Ee("angularfire2.database.use-emulator");let nGe=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,c,u,h,m,y,b,T,M){this.schedulers=a;const B=l,V=HS(t,o,r);c&&H2(V,o,u,m,y,b,h,T),this.database=N2(`${V.name}.database.${i}`,"AngularFireDatabase",V.name,()=>{const Q=o.runOutsideAngular(()=>V.database(i||void 0));return B&&Q.useEmulator(...B),Q},[B])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>qoe(this.database,t));let s=i;return r&&(s=r(i)),function Z5e(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Xoe(r,"update"),set:Xoe(r,"set"),push:i=>r.push(i),remove:K5e(r),snapshotChanges:i=>Joe(n,i,t).pipe(ji),stateChanges:i=>Yoe(n,i,t).pipe(ji),auditTrail:i=>function W5e(n,e,t){return function q5e(n,e,t){return function G5e(n,e){return M0(n,"value","on",e).pipe(Be(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function qHe(...n){const e=fk(n);return ye((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)no(n[l]).subscribe(Fe(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Ri))&&(o=null))},_s));t.subscribe(Fe(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}(e),Be(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function KHe(n){return ye((e,t)=>{let r=!1,i=0;e.subscribe(Fe(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),Be(i=>i.actions))}(n,Yoe(n,e).pipe(yg((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(ji),valueChanges:(i,s)=>Joe(n,i,t).pipe(Be(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),ji)}}(s,this)}object(t){return function J5e(n,e){return{query:n,snapshotChanges:()=>eae(n,e.schedulers.outsideAngular)().pipe(ji),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>eae(n,e.schedulers.outsideAngular)().pipe(ji,Be(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>qoe(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(Me(nI),Me(rI,8),Me(eGe,8),Me(Ys),Me(yt),Me(Vg),Me(tGe,8),Me(iI,8),Me(L2,8),Me(V2,8),Me(B2,8),Me(U2,8),Me(j2,8),Me(z2,8),Me(NA,8))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),rGe=(()=>{class n{constructor(){jl.A.registerVersion("angularfire",ed.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[nGe]})}return n})(),iGe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n,bootstrap:[fje]})}static{this.\u0275inj=$t({providers:[vEe(rf(Wu.LegacyInterceptors,[{provide:y8,useFactory:lEe},{provide:Cb,useExisting:y8,multi:!0}])),$Ae(()=>WAe(Os_firebaseConfig)),XAe(()=>JAe()),GHe(()=>DHe())],imports:[H7,VUe,Are,nze,qI,Ire,Og,Kne,SAe,mre,Hk,Mq,Kke.initializeApp(Os_firebaseConfig),Jke,rGe,Ere,wre,Cre,Sre]})}}return n})();Cbe().bootstrapModule(iGe).catch(n=>console.error(n))},443:(vt,U,G)=>{G.d(U,{$:()=>nw,A:()=>$,G:()=>Ve,K:()=>mR,L:()=>nh,N:()=>go,P:()=>Uo,R:()=>ut,U:()=>gt,V:()=>Vp,W:()=>Hz,X:()=>oh,Y:()=>Cy,Z:()=>Bp,_:()=>jp,a:()=>jy,a0:()=>Me,a1:()=>Wp,a2:()=>uc,a3:()=>ch,a4:()=>aw,a5:()=>yn,a6:()=>cw,a7:()=>Kp,a8:()=>vo,a9:()=>wR,aA:()=>du,aB:()=>St,aC:()=>ae,aD:()=>qi,aE:()=>ye,aF:()=>Be,aG:()=>dm,aH:()=>qR,aI:()=>Zz,aJ:()=>wr,aN:()=>ws,aQ:()=>yu,aa:()=>uw,ab:()=>fh,ac:()=>dw,ad:()=>CR,ae:()=>My,af:()=>AR,ag:()=>SR,ah:()=>xR,ak:()=>DR,al:()=>Kn,am:()=>RR,ap:()=>lh,aq:()=>Gi,as:()=>_w,at:()=>Oi,au:()=>bt,av:()=>mo,aw:()=>G0,ax:()=>At,ay:()=>Cn,az:()=>Ts,b:()=>hc,c:()=>Gz,d:()=>Kz,e:()=>qz,f:()=>Rw,g:()=>Mw,h:()=>QR,i:()=>fc,j:()=>ZR,k:()=>wo,l:()=>Su,m:()=>Vw,o:()=>lM,p:()=>ee,r:()=>rm,s:()=>ma,u:()=>gc,y:()=>NR});var D=G(467),Z=G(1631),x=G(1401),me=G(5398),he=G(1635),ne=G(8779);const ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ve=function fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},nt=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new x.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new me.Vy("@firebase/auth");function Jt(g,...d){et.logLevel<=me.$b.ERROR&&et.error(`Auth (${Z.SDK_VERSION}): ${g}`,...d)}function At(g,...d){throw Ue(g,...d)}function St(g,...d){return Ue(g,...d)}function Lt(g,d,f){const _=Object.assign(Object.assign({},nt()),{[d]:f});return new x.FA("auth","Firebase",_).create(d,{appName:g.name})}function _t(g){return Lt(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wt(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&At(g,"argument-error"),Lt(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return Ze.create(g,...d)}function ae(g,d,...f){if(!g)throw Ue(d,...f)}function it(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Jt(d),new Error(d)}function bt(g,d){g||it(d)}function Ht(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Sn(){return"http:"===xn()||"https:"===xn()}function xn(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class rr{constructor(d,f){this.shortDelay=d,this.longDelay=f,bt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,x.jZ)()||(0,x.lV)()}get(){return function Er(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Sn()||(0,x.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dr(g,d){bt(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class Wr{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},be=new rr(3e4,6e4);function le(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function ue(g,d,f,_){return ve.apply(this,arguments)}function ve(){return(ve=(0,D.A)(function*(g,d,f,_,w={}){return _e(g,w,(0,D.A)(function*(){let R={},Y={};_&&("GET"===d?Y=_:R={body:JSON.stringify(_)});const ge=(0,x.Am)(Object.assign({key:g.config.apiKey},Y)).slice(1),ke=yield g._getAdditionalHeaders();ke["Content-Type"]="application/json",g.languageCode&&(ke["X-Firebase-Locale"]=g.languageCode);const rt=Object.assign({method:d,headers:ke},R);return(0,x.c1)()||(rt.referrerPolicy="no-referrer"),Wr.fetch()(Ct(g,g.config.apiHost,f,ge),rt)}))})).apply(this,arguments)}function _e(g,d,f){return lt.apply(this,arguments)}function lt(){return(lt=(0,D.A)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},pe),d);try{const w=new mt(g),R=yield Promise.race([f(),w.promise]);w.clearNetworkTimeout();const Y=yield R.json();if("needConfirmation"in Y)throw Zr(g,"account-exists-with-different-credential",Y);if(R.ok&&!("errorMessage"in Y))return Y;{const ge=R.ok?Y.errorMessage:Y.error.message,[ke,rt]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Zr(g,"credential-already-in-use",Y);if("EMAIL_EXISTS"===ke)throw Zr(g,"email-already-in-use",Y);if("USER_DISABLED"===ke)throw Zr(g,"user-disabled",Y);const dt=_[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Lt(g,dt,rt);At(g,dt)}}catch(w){if(w instanceof x.g)throw w;At(g,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function Pt(g,d,f,_){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,D.A)(function*(g,d,f,_,w={}){const R=yield ue(g,d,f,_,w);return"mfaPendingCredential"in R&&At(g,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ct(g,d,f,_){const w=`${d}${f}?${_}`;return g.config.emulator?dr(g.config,w):`${g.config.apiScheme}://${w}`}function wn(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mt{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(St(this.auth,"network-request-failed")),be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zr(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const w=St(g,d,_);return w.customData._tokenResponse=f,w}function tn(g){return void 0!==g&&void 0!==g.getResponse}function nn(g){return void 0!==g&&void 0!==g.enterprise}class Nt{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return wn(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Ii(){return(Ii=(0,D.A)(function*(g){return(yield ue(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function kr(g,d){return ei.apply(this,arguments)}function ei(){return(ei=(0,D.A)(function*(g,d){return ue(g,"GET","/v2/recaptchaConfig",le(g,d))})).apply(this,arguments)}function ka(){return(ka=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Ws(){return(Ws=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function fo(g,d){return ua.apply(this,arguments)}function ua(){return(ua=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Gs(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function qs(){return(qs=(0,D.A)(function*(g,d=!1){const f=(0,x.Ku)(g),_=yield f.getIdToken(d),w=Fo(_);ae(w&&w.exp&&w.auth_time&&w.iat,f.auth,"internal-error");const R="object"==typeof w.firebase?w.firebase:void 0,Y=R?.sign_in_provider;return{claims:w,token:_,authTime:Gs(os(w.auth_time)),issuedAtTime:Gs(os(w.iat)),expirationTime:Gs(os(w.exp)),signInProvider:Y||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function os(g){return 1e3*Number(g)}function Fo(g){const[d,f,_]=g.split(".");if(void 0===d||void 0===f||void 0===_)return Jt("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,x.u)(f);return w?JSON.parse(w):(Jt("Failed to decode base64 JWT payload"),null)}catch(w){return Jt("Caught error parsing JWT payload as JSON",w?.toString()),null}}function ys(g){const d=Fo(g);return ae(d,"internal-error"),ae(typeof d.exp<"u","internal-error"),ae(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function Fn(g,d){return $i.apply(this,arguments)}function $i(){return($i=(0,D.A)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof x.g&&function vs({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class pl{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const w=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,D.A)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,D.A)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class di{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gs(this.lastLoginAt),this.creationTime=Gs(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bs(g){return po.apply(this,arguments)}function po(){return(po=(0,D.A)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),w=yield Fn(g,fo(f,{idToken:_}));ae(w?.users.length,f,"internal-error");const R=w.users[0];g._notifyReloadListener(R);const Y=null!==(d=R.providerUserInfo)&&void 0!==d&&d.length?Ut(R.providerUserInfo):[],ge=function ha(g,d){return[...g.filter(_=>!d.some(w=>w.providerId===_.providerId)),...d]}(g.providerData,Y),dt=!!g.isAnonymous&&!(g.email&&R.passwordHash||ge?.length),rn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ge,metadata:new di(R.createdAt,R.lastLoginAt),isAnonymous:dt};Object.assign(g,rn)})).apply(this,arguments)}function Na(){return(Na=(0,D.A)(function*(g){const d=(0,x.Ku)(g);yield bs(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ut(g){return g.map(d=>{var{providerId:f}=d,_=(0,he.Tt)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Qe(){return(Qe=(0,D.A)(function*(g,d){const f=yield _e(g,{},(0,D.A)(function*(){const _=(0,x.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:w,apiKey:R}=g.config,Y=Ct(g,w,"/v1/token",`key=${R}`),ge=yield g._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",Wr.fetch()(Y,{method:"POST",headers:ge,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,D.A)(function*(g,d){return ue(g,"POST","/v2/accounts:revokeToken",le(g,d))})).apply(this,arguments)}class E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ae(d.idToken,"internal-error"),ae(typeof d.idToken<"u","internal-error"),ae(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):ys(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}updateFromIdToken(d){ae(0!==d.length,"internal-error");const f=ys(d);this.updateTokensAndExpiration(d,null,f)}getToken(d,f=!1){var _=this;return(0,D.A)(function*(){return f||!_.accessToken||_.isExpired?(ae(_.refreshToken,d,"user-token-expired"),_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null):_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,D.A)(function*(){const{accessToken:w,refreshToken:R,expiresIn:Y}=yield function rc(g,d){return Qe.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(w,R,Number(Y))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:w,expirationTime:R}=f,Y=new E;return _&&(ae("string"==typeof _,"internal-error",{appName:d}),Y.refreshToken=_),w&&(ae("string"==typeof w,"internal-error",{appName:d}),Y.accessToken=w),R&&(ae("number"==typeof R,"internal-error",{appName:d}),Y.expirationTime=R),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new E,this.toJSON())}_performRefresh(){return it("not implemented")}}function S(g,d){ae("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class F{constructor(d){var{uid:f,auth:_,stsTokenManager:w}=d,R=(0,he.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new di(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,D.A)(function*(){const _=yield Fn(f,f.stsTokenManager.getToken(f.auth,d));return ae(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function da(g){return qs.apply(this,arguments)}(this,d)}reload(){return function Ri(g){return Na.apply(this,arguments)}(this)}_assign(d){this!==d&&(ae(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new F(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,D.A)(function*(){let w=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),w=!0),f&&(yield bs(_)),yield _.auth._persistUserIfCurrent(_),w&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,D.A)(function*(){if((0,Z._isFirebaseServerApp)(d.auth.app))return Promise.reject(_t(d.auth));const f=yield d.getIdToken();return yield Fn(d,function ho(g,d){return ka.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,w,R,Y,ge,ke,rt,dt;const rn=null!==(_=f.displayName)&&void 0!==_?_:void 0,Mn=null!==(w=f.email)&&void 0!==w?w:void 0,As=null!==(R=f.phoneNumber)&&void 0!==R?R:void 0,Bn=null!==(Y=f.photoURL)&&void 0!==Y?Y:void 0,Ss=null!==(ge=f.tenantId)&&void 0!==ge?ge:void 0,rv=null!==(ke=f._redirectEventId)&&void 0!==ke?ke:void 0,Dh=null!==(rt=f.createdAt)&&void 0!==rt?rt:void 0,jw=null!==(dt=f.lastLoginAt)&&void 0!==dt?dt:void 0,{uid:ym,emailVerified:iv,isAnonymous:Ru,providerData:Co,stsTokenManager:zw}=f;ae(ym&&zw,d,"internal-error");const vm=E.fromJSON(this.name,zw);ae("string"==typeof ym,d,"internal-error"),S(rn,d.name),S(Mn,d.name),ae("boolean"==typeof iv,d,"internal-error"),ae("boolean"==typeof Ru,d,"internal-error"),S(As,d.name),S(Bn,d.name),S(Ss,d.name),S(rv,d.name),S(Dh,d.name),S(jw,d.name);const Mu=new F({uid:ym,auth:d,email:Mn,emailVerified:iv,displayName:rn,isAnonymous:Ru,photoURL:Bn,phoneNumber:As,tenantId:Ss,stsTokenManager:vm,createdAt:Dh,lastLoginAt:jw});return Co&&Array.isArray(Co)&&(Mu.providerData=Co.map(bm=>Object.assign({},bm))),rv&&(Mu._redirectEventId=rv),Mu}static _fromIdTokenResponse(d,f,_=!1){return(0,D.A)(function*(){const w=new E;w.updateFromServerResponse(f);const R=new F({uid:f.localId,auth:d,stsTokenManager:w,isAnonymous:_});return yield bs(R),R})()}static _fromGetAccountInfoResponse(d,f,_){return(0,D.A)(function*(){const w=f.users[0];ae(void 0!==w.localId,"internal-error");const R=void 0!==w.providerUserInfo?Ut(w.providerUserInfo):[],Y=!(w.email&&w.passwordHash||R?.length),ge=new E;ge.updateFromIdToken(_);const ke=new F({uid:w.localId,auth:d,stsTokenManager:ge,isAnonymous:Y}),rt={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:R,metadata:new di(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||R?.length)};return Object.assign(ke,rt),ke})()}}const j=new Map;function ye(g){bt(g instanceof Function,"Expected a class definition");let d=j.get(g);return d?(bt(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,j.set(g,d),d)}const gt=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(f,_){var w=this;return(0,D.A)(function*(){w.storage[f]=_})()}_get(f){var _=this;return(0,D.A)(function*(){const w=_.storage[f];return void 0===w?null:w})()}_remove(f){var _=this;return(0,D.A)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function Be(g,d,f){return`firebase:${g}:${d}:${f}`}class gn{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:w,name:R}=this.auth;this.fullUserKey=Be(this.userKey,w.apiKey,R),this.fullPersistenceKey=Be("persistence",w.apiKey,R),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,D.A)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?F._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,D.A)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,D.A)(function*(){if(!f.length)return new gn(ye(gt),d,_);const w=(yield Promise.all(f.map(function(){var rt=(0,D.A)(function*(dt){if(yield dt._isAvailable())return dt});return function(dt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let R=w[0]||ye(gt);const Y=Be(_,d.config.apiKey,d.name);let ge=null;for(const rt of f)try{const dt=yield rt._get(Y);if(dt){const rn=F._fromJSON(d,dt);rt!==R&&(ge=rn),R=rt;break}}catch{}const ke=w.filter(rt=>rt._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],ge&&(yield R._set(Y,ge.toJSON())),yield Promise.all(f.map(function(){var rt=(0,D.A)(function*(dt){if(dt!==R)try{yield dt._remove(Y)}catch{}});return function(dt){return rt.apply(this,arguments)}}())),new gn(R,d,_)):new gn(R,d,_)})()}}function Ir(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(th(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(K(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(dR(d))return"Blackberry";if(hy(d))return"Webos";if(Yn(d))return"Safari";if((d.includes("chrome/")||Ks(d))&&!d.includes("edge/"))return"Chrome";if(G0(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function K(g=(0,x.ZQ)()){return/firefox\//i.test(g)}function Yn(g=(0,x.ZQ)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ks(g=(0,x.ZQ)()){return/crios\//i.test(g)}function th(g=(0,x.ZQ)()){return/iemobile/i.test(g)}function G0(g=(0,x.ZQ)()){return/android/i.test(g)}function dR(g=(0,x.ZQ)()){return/blackberry/i.test(g)}function hy(g=(0,x.ZQ)()){return/webos/i.test(g)}function mo(g=(0,x.ZQ)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function du(g=(0,x.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}function fy(g=(0,x.ZQ)()){return mo(g)||G0(g)||hy(g)||dR(g)||/windows phone/i.test(g)||th(g)}function Mp(g,d=[]){let f;switch(g){case"Browser":f=Ir((0,x.ZQ)());break;case"Worker":f=`${Ir((0,x.ZQ)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${Z.SDK_VERSION}/${_}`}class pu{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=R=>new Promise((Y,ge)=>{try{Y(d(R))}catch(ke){ge(ke)}});_.onAbort=f,this.queue.push(_);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,D.A)(function*(){if(f.auth.currentUser===d)return;const _=[];try{for(const w of f.queue)yield w(d),w.onAbort&&_.push(w.onAbort)}catch(w){_.reverse();for(const R of _)try{R()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function Gn(){return(Gn=(0,D.A)(function*(g,d={}){return ue(g,"GET","/v2/passwordPolicy",le(g,d))})).apply(this,arguments)}class Oz{constructor(d){var f,_,w,R;const Y=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Y.minPasswordLength)&&void 0!==f?f:6,Y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Y.maxPasswordLength),void 0!==Y.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Y.containsLowercaseCharacter),void 0!==Y.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Y.containsUppercaseCharacter),void 0!==Y.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Y.containsNumericCharacter),void 0!==Y.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Y.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(_=d.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(R=d.forceUpgradeOnSignin)&&void 0!==R&&R,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,_,w,R,Y,ge;const ke={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,ke),this.validatePasswordCharacterOptions(d,ke),ke.isValid&&(ke.isValid=null===(f=ke.meetsMinPasswordLength)||void 0===f||f),ke.isValid&&(ke.isValid=null===(_=ke.meetsMaxPasswordLength)||void 0===_||_),ke.isValid&&(ke.isValid=null===(w=ke.containsLowercaseLetter)||void 0===w||w),ke.isValid&&(ke.isValid=null===(R=ke.containsUppercaseLetter)||void 0===R||R),ke.isValid&&(ke.isValid=null===(Y=ke.containsNumericCharacter)||void 0===Y||Y),ke.isValid&&(ke.isValid=null===(ge=ke.containsNonAlphanumericCharacter)||void 0===ge||ge),ke}validatePasswordLengthOptions(d,f){const _=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;_&&(f.meetsMinPasswordLength=d.length>=_),w&&(f.meetsMaxPasswordLength=d.length<=w)}validatePasswordCharacterOptions(d,f){let _;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let w=0;w<d.length;w++)_=d.charAt(w),this.updatePasswordCharacterOptionsStatuses(f,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(d,f,_,w,R){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=R))}}class Ln{constructor(d,f,_,w){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ti(this),this.idTokenSubscription=new ti(this),this.beforeStateQueue=new pu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=ye(f)),this._initializationPromise=this.queue((0,D.A)(function*(){var w,R;if(!_._deleted&&(_.persistenceManager=yield gn.create(_,d),!_._deleted)){if(null!==(w=_._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,D.A)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(d){var f=this;return(0,D.A)(function*(){try{const _=yield fo(f,{idToken:d}),w=yield F._fromGetAccountInfoResponse(f,_,d);yield f.directlySetCurrentUser(w)}catch(_){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",_),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var f=this;return(0,D.A)(function*(){var _;if((0,Z._isFirebaseServerApp)(f.app)){const ge=f.app.settings.authIdToken;return ge?new Promise(ke=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(ge).then(ke,ke))}):f.directlySetCurrentUser(null)}const w=yield f.assertedPersistence.getCurrentUser();let R=w,Y=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const ge=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,ke=R?._redirectEventId,rt=yield f.tryRedirectSignIn(d);(!ge||ge===ke)&&rt?.user&&(R=rt.user,Y=!0)}if(!R)return f.directlySetCurrentUser(null);if(!R._redirectEventId){if(Y)try{yield f.beforeStateQueue.runMiddleware(R)}catch(ge){R=w,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(ge))}return R?f.reloadAndSetCurrentUserOrClear(R):f.directlySetCurrentUser(null)}return ae(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===R._redirectEventId?f.directlySetCurrentUser(R):f.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(d){var f=this;return(0,D.A)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,D.A)(function*(){try{yield bs(d)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Dn(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,D.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,D.A)(function*(){if((0,Z._isFirebaseServerApp)(f.app))return Promise.reject(_t(f));const _=d?(0,x.Ku)(d):null;return _&&ae(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,D.A)(function*(){if(!_._deleted)return d&&ae(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,D.A)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,D.A)(function*(){return(0,Z._isFirebaseServerApp)(d.app)?Promise.reject(_t(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var f=this;return(0,Z._isFirebaseServerApp)(this.app)?Promise.reject(_t(this)):this.queue((0,D.A)(function*(){yield f.assertedPersistence.setPersistence(ye(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,D.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const _=f._getPasswordPolicyInternal();return _.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,D.A)(function*(){const f=yield function kz(g){return Gn.apply(this,arguments)}(d),_=new Oz(f);null===d.tenantId?d._projectPasswordPolicy=_:d._tenantPasswordPolicies[d.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new x.FA("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const _=this.onAuthStateChanged(()=>{_(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,D.A)(function*(){if(f.currentUser){const _=yield f.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:_};null!=f.tenantId&&(w.tenantId=f.tenantId),yield function Se(g,d){return C.apply(this,arguments)}(f,w)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,D.A)(function*(){const w=yield _.getOrInitRedirectPersistenceManager(f);return null===d?w.removeCurrentUser():w.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,D.A)(function*(){if(!f.redirectPersistenceManager){const _=d&&ye(d)||f._popupRedirectResolver;ae(_,f,"argument-error"),f.redirectPersistenceManager=yield gn.create(f,[ye(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,D.A)(function*(){var _,w;return f._isInitialized&&(yield f.queue((0,D.A)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,D.A)(function*(){if(d===f.currentUser)return f.queue((0,D.A)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,w){if(this._deleted)return()=>{};const R="function"==typeof f?f:f.next.bind(f);let Y=!1;const ge=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(ge,this,"internal-error"),ge.then(()=>{Y||R(this.currentUser)}),"function"==typeof f){const ke=d.addObserver(f,_,w);return()=>{Y=!0,ke()}}{const ke=d.addObserver(f);return()=>{Y=!0,ke()}}}directlySetCurrentUser(d){var f=this;return(0,D.A)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Mp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,D.A)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const w=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();w&&(_["X-Firebase-Client"]=w);const R=yield d._getAppCheckToken();return R&&(_["X-Firebase-AppCheck"]=R),_})()}_getAppCheckToken(){var d=this;return(0,D.A)(function*(){var f;const _=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function qt(g,...d){et.logLevel<=me.$b.WARN&&et.warn(`Auth (${Z.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function wr(g){return(0,x.Ku)(g)}class ti{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,x.tD)(f=>this.observer=f)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ic={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function py(g){return ic.loadJS(g)}function Es(g){return`__${g}${Math.floor(1e6*Math.random())}`}class fR{constructor(d){this.type="recaptcha-enterprise",this.auth=wr(d)}verify(d="verify",f=!1){var _=this;return(0,D.A)(function*(){function R(){return R=(0,D.A)(function*(ge){if(!f){if(null==ge.tenantId&&null!=ge._agentRecaptchaConfig)return ge._agentRecaptchaConfig.siteKey;if(null!=ge.tenantId&&void 0!==ge._tenantRecaptchaConfigs[ge.tenantId])return ge._tenantRecaptchaConfigs[ge.tenantId].siteKey}return new Promise(function(){var ke=(0,D.A)(function*(rt,dt){kr(ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(rn=>{if(void 0!==rn.recaptchaKey){const Mn=new Nt(rn);return null==ge.tenantId?ge._agentRecaptchaConfig=Mn:ge._tenantRecaptchaConfigs[ge.tenantId]=Mn,rt(Mn.siteKey)}dt(new Error("recaptcha Enterprise site key undefined"))}).catch(rn=>{dt(rn)})});return function(rt,dt){return ke.apply(this,arguments)}}())}),R.apply(this,arguments)}function Y(ge,ke,rt){const dt=window.grecaptcha;nn(dt)?dt.enterprise.ready(()=>{dt.enterprise.execute(ge,{action:d}).then(rn=>{ke(rn)}).catch(()=>{ke("NO_RECAPTCHA")})}):rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ge,ke)=>{(function w(ge){return R.apply(this,arguments)})(_.auth).then(rt=>{if(!f&&nn(window.grecaptcha))Y(rt,ge,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));let dt=function xt(){return ic.recaptchaEnterpriseScript}();0!==dt.length&&(dt+=rt),py(dt).then(()=>{Y(rt,ge,ke)}).catch(rn=>{ke(rn)})}}).catch(rt=>{ke(rt)})})})()}}function Oa(g,d,f){return q0.apply(this,arguments)}function q0(){return(q0=(0,D.A)(function*(g,d,f,_=!1){const w=new fR(g);let R;try{R=yield w.verify(f)}catch{R=yield w.verify(f,!0)}const Y=Object.assign({},d);return Object.assign(Y,_?{captchaResp:R}:{captchaResponse:R}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}function kp(g,d,f,_){return K0.apply(this,arguments)}function K0(){return K0=(0,D.A)(function*(g,d,f,_){var w;if(null!==(w=g._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const R=yield Oa(g,d,f,"getOobCode"===f);return _(g,R)}return _(g,d).catch(function(){var R=(0,D.A)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ge=yield Oa(g,d,f,"getOobCode"===f);return _(g,ge)}return Promise.reject(Y)});return function(Y){return R.apply(this,arguments)}}())}),K0.apply(this,arguments)}function mR(g,d,f){const _=wr(g);ae(_._canInitEmulator,_,"emulator-config-failed"),ae(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const w=!!f?.disableWarnings,R=Is(d),{host:Y,port:ge}=function Tt(g){const d=Is(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(_);if(w){const R=w[1];return{host:R,port:gR(_.substr(R.length+1))}}{const[R,Y]=_.split(":");return{host:R,port:gR(Y)}}}(d);_.config.emulator={url:`${R}//${Y}${null===ge?"":`:${ge}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:Y,port:ge,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function Uz(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}function Is(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function gR(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class nh{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return it("not implemented")}_getIdTokenResponse(d){return it("not implemented")}_linkToIdToken(d,f){return it("not implemented")}_getReauthenticationResolver(d){return it("not implemented")}}function _R(g,d){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:resetPassword",le(g,d))})).apply(this,arguments)}function Y0(){return(Y0=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function $t(g,d){return mu.apply(this,arguments)}function mu(){return(mu=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Np(){return(Np=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:update",le(g,d))})).apply(this,arguments)}function vR(g,d){return gu.apply(this,arguments)}function gu(){return(gu=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithPassword",le(g,d))})).apply(this,arguments)}function sc(g,d){return rh.apply(this,arguments)}function rh(){return(rh=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:sendOobCode",le(g,d))})).apply(this,arguments)}function gy(){return(gy=(0,D.A)(function*(g,d){return sc(g,d)})).apply(this,arguments)}function Ee(g,d){return ih.apply(this,arguments)}function ih(){return(ih=(0,D.A)(function*(g,d){return sc(g,d)})).apply(this,arguments)}function _y(g,d){return Op.apply(this,arguments)}function Op(){return(Op=(0,D.A)(function*(g,d){return sc(g,d)})).apply(this,arguments)}function vy(){return(vy=(0,D.A)(function*(g,d){return sc(g,d)})).apply(this,arguments)}function Z0(){return(Z0=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithEmailLink",le(g,d))})).apply(this,arguments)}function J0(){return(J0=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithEmailLink",le(g,d))})).apply(this,arguments)}class Fp extends nh{constructor(d,f,_,w=null){super("password",_),this._email=d,this._password=f,this._tenantId=w}static _fromEmailAndPassword(d,f){return new Fp(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new Fp(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,D.A)(function*(){switch(f.signInMethod){case"password":return kp(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vR);case"emailLink":return function by(g,d){return Z0.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:At(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,D.A)(function*(){switch(_.signInMethod){case"password":return kp(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$t);case"emailLink":return function jz(g,d){return J0.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:At(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Lo(g,d){return oc.apply(this,arguments)}function oc(){return(oc=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithIdp",le(g,d))})).apply(this,arguments)}class go extends nh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new go(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):At("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:w}=f,R=(0,he.Tt)(f,["providerId","signInMethod"]);if(!_||!w)return null;const Y=new go(_,w);return Y.idToken=R.idToken||void 0,Y.accessToken=R.accessToken||void 0,Y.secret=R.secret,Y.nonce=R.nonce,Y.pendingToken=R.pendingToken||null,Y}_getIdTokenResponse(d){return Lo(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Lo(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Lo(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,x.Am)(f)}return d}}function Vo(){return(Vo=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:sendVerificationCode",le(g,d))})).apply(this,arguments)}function Lp(){return(Lp=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithPhoneNumber",le(g,d))})).apply(this,arguments)}function _n(){return(_n=(0,D.A)(function*(g,d){const f=yield Pt(g,"POST","/v1/accounts:signInWithPhoneNumber",le(g,d));if(f.temporaryProof)throw Zr(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const zz={USER_NOT_FOUND:"user-not-found"};function Iy(){return(Iy=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithPhoneNumber",le(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),zz)})).apply(this,arguments)}class _u extends nh{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new _u({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new _u({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function sh(g,d){return Lp.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Ot(g,d){return _n.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function bR(g,d){return Iy.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:w}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:w}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}=d;return _||f||w||R?new _u({verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}):null}}class jt{constructor(d){var f,_,w,R,Y,ge;const ke=(0,x.I9)((0,x.hp)(d)),rt=null!==(f=ke.apiKey)&&void 0!==f?f:null,dt=null!==(_=ke.oobCode)&&void 0!==_?_:null,rn=function ER(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=ke.mode)&&void 0!==w?w:null);ae(rt&&dt&&rn,"argument-error"),this.apiKey=rt,this.operation=rn,this.code=dt,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(Y=ke.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ge=ke.tenantId)&&void 0!==ge?ge:null}static parseLink(d){const f=function wy(g){const d=(0,x.I9)((0,x.hp)(g)).link,f=d?(0,x.I9)((0,x.hp)(d)).deep_link_id:null,_=(0,x.I9)((0,x.hp)(g)).deep_link_id;return(_?(0,x.I9)((0,x.hp)(_)).link:null)||_||f||d||g}(d);try{return new jt(f)}catch{return null}}}let Vp=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return Fp._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const w=jt.parseLink(_);return ae(w,"argument-error"),Fp._fromEmailAndCode(f,w.code,w.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Nr{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ac extends Nr{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Bp extends ac{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return ae("providerId"in f&&"signInMethod"in f,"argument-error"),go._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ae(d.idToken||d.accessToken,"argument-error"),go._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Bp.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Bp.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:w,pendingToken:R,nonce:Y,providerId:ge}=d;if(!_&&!w&&!f&&!R||!ge)return null;try{return new Bp(ge)._credential({idToken:f,accessToken:_,nonce:Y,pendingToken:R})}catch{return null}}}let Hz=(()=>{class g extends ac{constructor(){super("facebook.com")}static credential(f){return go._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),oh=(()=>{class g extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return go._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:w}=f;if(!_&&!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Cy=(()=>{class g extends ac{constructor(){super("github.com")}static credential(f){return go._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class yu extends nh{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Lo(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Lo(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Lo(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:w,pendingToken:R}=f;return _&&w&&R&&_===w?new yu(_,R):null}static _create(d,f){return new yu(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class jp extends Nr{constructor(d){ae(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return jp.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return jp.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=yu.fromJSON(d);return ae(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return yu._create(_,f)}catch{return null}}}let nw=(()=>{class g extends ac{constructor(){super("twitter.com")}static credential(f,_){return go._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:w}=f;if(!_||!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function lc(g,d){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signUp",le(g,d))})).apply(this,arguments)}class hi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,w=!1){return(0,D.A)(function*(){const R=yield F._fromIdTokenResponse(d,_,w),Y=rw(_);return new hi({user:R,providerId:Y,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,D.A)(function*(){yield d._updateTokensIfNecessary(_,!0);const w=rw(_);return new hi({user:d,providerId:w,_tokenResponse:_,operationType:f})})()}}function rw(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Me(g){return zp.apply(this,arguments)}function zp(){return(zp=(0,D.A)(function*(g){var d;if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const f=wr(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new hi({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield lc(f,{returnSecureToken:!0}),w=yield hi._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(w.user),w})).apply(this,arguments)}class N extends x.g{constructor(d,f,_,w){var R;super(f.code,f.message),this.operationType=_,this.user=w,Object.setPrototypeOf(this,N.prototype),this.customData={appName:d.name,tenantId:null!==(R=d.tenantId)&&void 0!==R?R:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,w){return new N(d,f,_,w)}}function ah(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?N._fromErrorAndOperation(g,R,d,_):R})}function Hp(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function lh(g,d){return Ay.apply(this,arguments)}function Ay(){return Ay=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);yield $p(!0,f,d);const{providerUserInfo:_}=yield function _s(g,d){return Ws.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),w=Hp(_||[]);return f.providerData=f.providerData.filter(R=>w.has(R.providerId)),w.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Ay.apply(this,arguments)}function Sy(g,d){return xy.apply(this,arguments)}function xy(){return(xy=(0,D.A)(function*(g,d,f=!1){const _=yield Fn(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return hi._forOperation(g,"link",_)})).apply(this,arguments)}function $p(g,d,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,D.A)(function*(g,d,f){yield bs(d);const w=!1===g?"provider-already-linked":"no-such-provider";ae(Hp(d.providerData).has(f)===g,d.auth,w)})).apply(this,arguments)}function iw(g,d){return cc.apply(this,arguments)}function cc(){return(cc=(0,D.A)(function*(g,d,f=!1){const{auth:_}=g;if((0,Z._isFirebaseServerApp)(_.app))return Promise.reject(_t(_));const w="reauthenticate";try{const R=yield Fn(g,ah(_,w,d,g),f);ae(R.idToken,_,"internal-error");const Y=Fo(R.idToken);ae(Y,_,"internal-error");const{sub:ge}=Y;return ae(g.uid===ge,_,"user-mismatch"),hi._forOperation(g,w,R)}catch(R){throw"auth/user-not-found"===R?.code&&At(_,"user-mismatch"),R}})).apply(this,arguments)}function sw(g,d){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,D.A)(function*(g,d,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _="signIn",w=yield ah(g,_,d),R=yield hi._fromIdTokenResponse(g,_,w);return f||(yield g._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Wp(g,d){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,D.A)(function*(g,d){return sw(wr(g),d)})).apply(this,arguments)}function uc(g,d){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);return yield $p(!1,f,d.providerId),Sy(f,d)})).apply(this,arguments)}function ch(g,d){return vu.apply(this,arguments)}function vu(){return(vu=(0,D.A)(function*(g,d){return iw((0,x.Ku)(g),d)})).apply(this,arguments)}function ow(){return(ow=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithCustomToken",le(g,d))})).apply(this,arguments)}function aw(g,d){return lw.apply(this,arguments)}function lw(){return lw=(0,D.A)(function*(g,d){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const f=wr(g),_=yield function Dy(g,d){return ow.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),w=yield hi._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(w.user),w}),lw.apply(this,arguments)}class Pi{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?uh._fromServerResponse(d,f):"totpInfo"in f?ml._fromServerResponse(d,f):At(d,"internal-error")}}class uh extends Pi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new uh(f)}}class ml extends Pi{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new ml(f)}}function Ry(g,d,f){var _;ae((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),ae(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ae(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(ae(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function qp(g){return _o.apply(this,arguments)}function _o(){return(_o=(0,D.A)(function*(g){const d=wr(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function yn(g,d,f){return yo.apply(this,arguments)}function yo(){return(yo=(0,D.A)(function*(g,d,f){const _=wr(g),w={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&Ry(_,w,f),yield kp(_,w,"getOobCode",Ee)})).apply(this,arguments)}function cw(g,d,f){return dh.apply(this,arguments)}function dh(){return dh=(0,D.A)(function*(g,d,f){yield _R((0,x.Ku)(g),{oobCode:d,newPassword:f}).catch(function(){var _=(0,D.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&qp(g),w});return function(w){return _.apply(this,arguments)}}())}),dh.apply(this,arguments)}function Kp(g,d){return bu.apply(this,arguments)}function bu(){return bu=(0,D.A)(function*(g,d){yield function yR(g,d){return Np.apply(this,arguments)}((0,x.Ku)(g),{oobCode:d})}),bu.apply(this,arguments)}function vo(g,d){return fa.apply(this,arguments)}function fa(){return(fa=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g),_=yield _R(f,{oobCode:d}),w=_.requestType;switch(ae(w,f,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(_.mfaInfo,f,"internal-error");default:ae(_.email,f,"internal-error")}let R=null;return _.mfaInfo&&(R=Pi._fromServerResponse(wr(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:w}})).apply(this,arguments)}function wR(g,d){return hh.apply(this,arguments)}function hh(){return(hh=(0,D.A)(function*(g,d){const{data:f}=yield vo((0,x.Ku)(g),d);return f.email})).apply(this,arguments)}function uw(g,d,f){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=wr(g),Y=yield kp(_,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lc).catch(ke=>{throw"auth/password-does-not-meet-requirements"===ke.code&&qp(g),ke}),ge=yield hi._fromIdTokenResponse(_,"signIn",Y);return yield _._updateCurrentUser(ge.user),ge})).apply(this,arguments)}function fh(g,d,f){return(0,Z._isFirebaseServerApp)(g.app)?Promise.reject(_t(g)):Wp((0,x.Ku)(g),Vp.credential(d,f)).catch(function(){var _=(0,D.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&qp(g),w});return function(w){return _.apply(this,arguments)}}())}function dw(g,d,f){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,D.A)(function*(g,d,f){const _=wr(g),w={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function R(Y,ge){ae(ge.handleCodeInApp,_,"argument-error"),ge&&Ry(_,Y,ge)})(w,f),yield kp(_,w,"getOobCode",_y)})).apply(this,arguments)}function CR(g,d){const f=jt.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}function My(g,d,f){return Py.apply(this,arguments)}function Py(){return(Py=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=(0,x.Ku)(g),w=Vp.credentialWithLink(d,f||Ht());return ae(w._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Wp(_,w)})).apply(this,arguments)}function Qs(){return(Qs=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:createAuthUri",le(g,d))})).apply(this,arguments)}function AR(g,d){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,D.A)(function*(g,d){const _={identifier:d,continueUri:Sn()?Ht():"http://localhost"},{signinMethods:w}=yield function TR(g,d){return Qs.apply(this,arguments)}((0,x.Ku)(g),_);return w||[]}),Xp.apply(this,arguments)}function SR(g,d){return ky.apply(this,arguments)}function ky(){return ky=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g),w={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Ry(f.auth,w,d);const{email:R}=yield function X0(g,d){return gy.apply(this,arguments)}(f.auth,w);R!==g.email&&(yield g.reload())}),ky.apply(this,arguments)}function xR(g,d,f){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&Ry(_.auth,R,f);const{email:Y}=yield function yy(g,d){return vy.apply(this,arguments)}(_.auth,R);Y!==g.email&&(yield g.reload())}),Ny.apply(this,arguments)}function Oy(){return(Oy=(0,D.A)(function*(g,d){return ue(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function DR(g,d){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,D.A)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,x.Ku)(g),R={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},Y=yield Fn(_,function hw(g,d){return Oy.apply(this,arguments)}(_.auth,R));_.displayName=Y.displayName||null,_.photoURL=Y.photoUrl||null;const ge=_.providerData.find(({providerId:ke})=>"password"===ke);ge&&(ge.displayName=_.displayName,ge.photoURL=_.photoURL),yield _._updateTokensIfNecessary(Y)}),Fy.apply(this,arguments)}function Kn(g,d){const f=(0,x.Ku)(g);return(0,Z._isFirebaseServerApp)(f.auth.app)?Promise.reject(_t(f.auth)):fw(f,d,null)}function RR(g,d){return fw((0,x.Ku)(g),null,d)}function fw(g,d,f){return zt.apply(this,arguments)}function zt(){return zt=(0,D.A)(function*(g,d,f){const{auth:_}=g,R={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(R.email=d),f&&(R.password=f);const Y=yield Fn(g,function Oe(g,d){return Y0.apply(this,arguments)}(_,R));yield g._updateTokensIfNecessary(Y,!0)}),zt.apply(this,arguments)}class tt{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class ki extends tt{constructor(d,f,_,w){super(d,f,_),this.username=w}}class Xt extends tt{constructor(d,f){super(d,"facebook.com",f)}}class fi extends ki{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Ni extends tt{constructor(d,f){super(d,"google.com",f)}}class gl extends ki{constructor(d,f,_){super(d,"twitter.com",f,_)}}function Gi(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function pw(g){var d,f;if(!g)return null;const{providerId:_}=g,w=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},R=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const Y=null===(f=null===(d=Fo(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(Y)return new tt(R,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!_)return null;switch(_){case"facebook.com":return new Xt(R,w);case"github.com":return new fi(R,w);case"google.com":return new Ni(R,w);case"twitter.com":return new gl(R,w,g.screenName||null);case"custom":case"anonymous":return new tt(R,null);default:return new tt(R,_,w)}}(f)}function NR(g,d,f,_){return(0,x.Ku)(g).onAuthStateChanged(d,f,_)}class La{constructor(d,f,_){this.type=d,this.credential=f,this.user=_}static _fromIdtoken(d,f){return new La("enroll",d,f)}static _fromMfaPendingCredential(d){return new La("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return La._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return La._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Zp{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=wr(d),w=f.customData._serverResponse,R=(w.mfaInfo||[]).map(ge=>Pi._fromServerResponse(_,ge));ae(w.mfaPendingCredential,_,"internal-error");const Y=La._fromMfaPendingCredential(w.mfaPendingCredential);return new Zp(Y,R,function(){var ge=(0,D.A)(function*(ke){const rt=yield ke._process(_,Y);delete w.mfaInfo,delete w.mfaPendingCredential;const dt=Object.assign(Object.assign({},w),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(f.operationType){case"signIn":const rn=yield hi._fromIdTokenResponse(_,f.operationType,dt);return yield _._updateCurrentUser(rn.user),rn;case"reauthenticate":return ae(f.user,_,"internal-error"),hi._forOperation(f.user,f.operationType,dt);default:At(_,"internal-error")}});return function(ke){return ge.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,D.A)(function*(){return f.signInResolver(d)})()}}function _w(g,d){var f;const _=(0,x.Ku)(g),w=d;return ae(d.customData.operationType,_,"argument-error"),ae(null===(f=w.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),Zp._fromError(_,w)}class ph{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>Pi._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new ph(d)}getSession(){var d=this;return(0,D.A)(function*(){return La._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var _=this;return(0,D.A)(function*(){const w=d,R=yield _.getSession(),Y=yield Fn(_.user,w._process(_.user.auth,R,f));return yield _.user._updateTokensIfNecessary(Y),_.user.reload()})()}unenroll(d){var f=this;return(0,D.A)(function*(){const _="string"==typeof d?d:d.uid,w=yield f.user.getIdToken();try{const R=yield Fn(f.user,function LR(g,d){return ue(g,"POST","/v2/accounts/mfaEnrollment:withdraw",le(g,d))}(f.user.auth,{idToken:w,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Y})=>Y!==_),yield f.user._updateTokensIfNecessary(R),yield f.user.reload()}catch(R){throw R}})()}}const Eu=new WeakMap;function Oi(g){const d=(0,x.Ku)(g);return Eu.has(d)||Eu.set(d,ph._fromUser(d)),Eu.get(d)}const Va="__sak";class em{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Va,"1"),this.storage.removeItem(Va),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const hc=(()=>{class g extends em{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fy(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const w=this.storage.getItem(_),R=this.localCache[_];w!==R&&f(_,R,w)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((ge,ke,rt)=>{this.notifyListeners(ge,rt)});const w=f.key;_?this.detachListener():this.stopPolling();const R=()=>{const ge=this.storage.getItem(w);!_&&this.localCache[w]===ge||this.notifyListeners(w,ge)},Y=this.storage.getItem(w);!function fu(){return(0,x.lT)()&&10===document.documentMode}()||Y===f.newValue||f.newValue===f.oldValue?R():setTimeout(R,10)}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var w=()=>super._set,R=this;return(0,D.A)(function*(){yield w().call(R,f,_),R.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,w=this;return(0,D.A)(function*(){const R=yield _().call(w,f);return w.localCache[f]=JSON.stringify(R),R})()}_remove(f){var _=()=>super._remove,w=this;return(0,D.A)(function*(){yield _().call(w,f),delete w.localCache[f]})()}}return g.type="LOCAL",g})(),jy=(()=>{class g extends em{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let zy=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(R=>R.isListeningto(f));if(_)return _;const w=new g(f);return this.receivers.push(w),w}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,D.A)(function*(){const w=f,{eventId:R,eventType:Y,data:ge}=w.data,ke=_.handlersMap[Y];if(!ke?.size)return;w.ports[0].postMessage({status:"ack",eventId:R,eventType:Y});const rt=Array.from(ke).map(function(){var rn=(0,D.A)(function*(Mn){return Mn(w.origin,ge)});return function(Mn){return rn.apply(this,arguments)}}()),dt=yield function jR(g){return Promise.all(g.map(function(){var d=(0,D.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(rt);w.ports[0].postMessage({status:"done",eventId:R,eventType:Y,response:dt})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function ws(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class vw{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var w=this;return(0,D.A)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let Y,ge;return new Promise((ke,rt)=>{const dt=ws("",20);R.port1.start();const rn=setTimeout(()=>{rt(new Error("unsupported_event"))},_);ge={messageChannel:R,onMessage(Mn){const As=Mn;if(As.data.eventId===dt)switch(As.data.status){case"ack":clearTimeout(rn),Y=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),ke(As.data.response);break;default:clearTimeout(rn),clearTimeout(Y),rt(new Error("invalid_response"))}}},w.handlers.add(ge),R.port1.addEventListener("message",ge.onMessage),w.target.postMessage({eventType:d,eventId:dt,data:f},[R.port2])}).finally(()=>{ge&&w.removeMessageHandler(ge)})})()}}function Or(){return window}function Hy(){return typeof Or().WorkerGlobalScope<"u"&&"function"==typeof Or().importScripts}function Gr(){return(Gr=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wu="firebaseLocalStorageDb",tm="firebaseLocalStorage",Ew="fbase_key";class mh{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function nm(g,d){return g.transaction([tm],d?"readwrite":"readonly").objectStore(tm)}function gh(){const g=indexedDB.open(wu,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(tm,{keyPath:Ew})}catch(w){f(w)}}),g.addEventListener("success",(0,D.A)(function*(){const _=g.result;_.objectStoreNames.contains(tm)?d(_):(_.close(),yield function WR(){const g=indexedDB.deleteDatabase(wu);return new mh(g).toPromise()}(),d(yield gh()))}))})}function _h(g,d,f){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,D.A)(function*(g,d,f){const _=nm(g,!0).put({[Ew]:d,value:f});return new mh(_).toPromise()})).apply(this,arguments)}function ht(){return(ht=(0,D.A)(function*(g,d){const f=nm(g,!1).get(d),_=yield new mh(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function qr(g,d){const f=nm(g,!0).delete(d);return new mh(f).toPromise()}const fc=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,D.A)(function*(){return f.db||(f.db=yield gh()),f.db})()}_withRetries(f){var _=this;return(0,D.A)(function*(){let w=0;for(;;)try{const R=yield _._openDb();return yield f(R)}catch(R){if(w++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,D.A)(function*(){return Hy()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,D.A)(function*(){f.receiver=zy._getInstance(function HR(){return Hy()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,D.A)(function*(w,R){return{keyProcessed:(yield f._poll()).includes(R.key)}});return function(w,R){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,D.A)(function*(w,R){return["keyChanged"]});return function(w,R){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,D.A)(function*(){var _,w;if(f.activeServiceWorker=yield function zR(){return Gr.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new vw(f.activeServiceWorker);const R=yield f.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(w=R[0])&&void 0!==w&&w.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,D.A)(function*(){if(_.sender&&_.activeServiceWorker&&function bw(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const f=yield gh();return yield _h(f,Va,"1"),yield qr(f,Va),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,D.A)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var w=this;return(0,D.A)(function*(){return w._withPendingWrite((0,D.A)(function*(){return yield w._withRetries(R=>_h(R,f,_)),w.localCache[f]=_,w.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,D.A)(function*(){const w=yield _._withRetries(R=>function He(g,d){return ht.apply(this,arguments)}(R,f));return _.localCache[f]=w,w})()}_remove(f){var _=this;return(0,D.A)(function*(){return _._withPendingWrite((0,D.A)(function*(){return yield _._withRetries(w=>qr(w,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,D.A)(function*(){const _=yield f._withRetries(Y=>{const ge=nm(Y,!1).getAll();return new mh(ge).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const w=[],R=new Set;if(0!==_.length)for(const{fbase_key:Y,value:ge}of _)R.add(Y),JSON.stringify(f.localCache[Y])!==JSON.stringify(ge)&&(f.notifyListeners(Y,ge),w.push(Y));for(const Y of Object.keys(f.localCache))f.localCache[Y]&&!R.has(Y)&&(f.notifyListeners(Y,null),w.push(Y));return w})()}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),vh=1e12;class Cu{constructor(d){this.auth=d,this.counter=vh,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new hr(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||vh;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||vh))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,D.A)(function*(){var _;return null===(_=f._widgets.get(d||vh))||void 0===_||_.execute(),""})()}}class hr{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof d?document.getElementById(d):d;ae(w,"argument-error",{appName:f}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pc(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yl=Es("rcb"),Ba=new rr(3e4,6e4);class Tu{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Or().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return ae(function Iw(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&tn(Or().grecaptcha)?Promise.resolve(Or().grecaptcha):new Promise((_,w)=>{const R=Or().setTimeout(()=>{w(St(d,"network-request-failed"))},Ba.get());Or()[yl]=()=>{Or().clearTimeout(R),delete Or()[yl];const ge=Or().grecaptcha;if(!ge||!tn(ge))return void w(St(d,"internal-error"));const ke=ge.render;ge.render=(rt,dt)=>{const rn=ke(rt,dt);return this.counter++,rn},this.hostLanguage=f,_(ge)},py(`${function qn(){return ic.recaptchaV2Script}()}?${(0,x.Am)({onload:yl,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(R),w(St(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Or().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vl{load(d){return(0,D.A)(function*(){return new Cu(d)})()}clearedOneInstance(){}}const bh="recaptcha",bo={theme:"light",type:"image"};class ut{constructor(d,f,_=Object.assign({},bo)){this.parameters=_,this.type=bh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wr(d),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof f?document.getElementById(f):f;ae(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vl:new Tu,this.validateStartingState()}verify(){var d=this;return(0,D.A)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(R=>{const Y=ge=>{ge&&(d.tokenChangeListeners.delete(Y),R(ge))};d.tokenChangeListeners.add(Y),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=Or()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,D.A)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,D.A)(function*(){ae(Sn()&&!Hy(),d.auth,"internal-error"),yield function $y(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Jr(g){return Ii.apply(this,arguments)}(d.auth);ae(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mc{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=_u._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function ma(g,d,f){return Au.apply(this,arguments)}function Au(){return(Au=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=wr(g),w=yield pi(_,d,(0,x.Ku)(f));return new mc(w,R=>Wp(_,R))})).apply(this,arguments)}function Su(g,d,f){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);yield $p(!1,_,"phone");const w=yield pi(_.auth,d,(0,x.Ku)(f));return new mc(w,R=>uc(_,R))})).apply(this,arguments)}function rm(g,d,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(_t(_.auth));const w=yield pi(_.auth,d,(0,x.Ku)(f));return new mc(w,R=>ch(_,R))})).apply(this,arguments)}function pi(g,d,f){return Eh.apply(this,arguments)}function Eh(){return Eh=(0,D.A)(function*(g,d,f){var _;const w=yield f.verify();try{let R;if(ae("string"==typeof w,g,"argument-error"),ae(f.type===bh,g,"argument-error"),R="string"==typeof d?{phoneNumber:d}:d,"session"in R){const Y=R.session;if("phoneNumber"in R)return ae("enroll"===Y.type,g,"internal-error"),(yield function dc(g,d){return ue(g,"POST","/v2/accounts/mfaEnrollment:start",le(g,d))}(g,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{ae("signin"===Y.type,g,"internal-error");const ge=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return ae(ge,g,"missing-multi-factor-info"),(yield function Zn(g,d){return ue(g,"POST","/v2/accounts/mfaSignIn:start",le(g,d))}(g,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function ew(g,d){return Vo.apply(this,arguments)}(g,{phoneNumber:R.phoneNumber,recaptchaToken:w});return Y}}finally{f._reset()}}),Eh.apply(this,arguments)}function gc(g,d){return xu.apply(this,arguments)}function xu(){return(xu=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(f.auth.app))return Promise.reject(_t(f.auth));yield Sy(f,d)})).apply(this,arguments)}let Uo=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=wr(f)}verifyPhoneNumber(f,_){return pi(this.auth,f,(0,x.Ku)(_))}static credential(f,_){return _u._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:w}=f;return _&&w?_u._fromTokenResponse(_,w):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function jo(g,d){return d?ye(d):(ae(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class im extends nh{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Lo(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Lo(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Lo(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function GR(g){return sw(g.auth,new im(g),g.bypassAuthState)}function Wy(g){const{auth:d,user:f}=g;return ae(f,d,"internal-error"),iw(f,new im(g),g.bypassAuthState)}function ww(g){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,D.A)(function*(g){const{auth:d,user:f}=g;return ae(f,d,"internal-error"),Sy(f,new im(g),g.bypassAuthState)})).apply(this,arguments)}class sm{constructor(d,f,_,w,R=!1){this.auth=d,this.resolver=_,this.user=w,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,D.A)(function*(_,w){d.pendingPromise={resolve:_,reject:w};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(R){d.reject(R)}});return function(_,w){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,D.A)(function*(){const{urlResponse:_,sessionId:w,postBody:R,tenantId:Y,error:ge,type:ke}=d;if(ge)return void f.reject(ge);const rt={auth:f.auth,requestUri:_,sessionId:w,tenantId:Y||void 0,postBody:R||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(ke)(rt))}catch(dt){f.reject(dt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return GR;case"linkViaPopup":case"linkViaRedirect":return ww;case"reauthViaPopup":case"reauthViaRedirect":return Wy;default:At(this.auth,"internal-error")}}resolve(d){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wz=new rr(2e3,1e4);function Gz(g,d,f){return Cw.apply(this,arguments)}function Cw(){return(Cw=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(St(g,"operation-not-supported-in-this-environment"));const _=wr(g);wt(g,d,Nr);const w=jo(_,f);return new Sw(_,"signInViaPopup",d,w).executeNotNull()})).apply(this,arguments)}function qz(g,d,f){return Tw.apply(this,arguments)}function Tw(){return(Tw=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(St(_.auth,"operation-not-supported-in-this-environment"));wt(_.auth,d,Nr);const w=jo(_.auth,f);return new Sw(_.auth,"reauthViaPopup",d,w,_).executeNotNull()})).apply(this,arguments)}function Kz(g,d,f){return Aw.apply(this,arguments)}function Aw(){return(Aw=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);wt(_.auth,d,Nr);const w=jo(_.auth,f);return new Sw(_.auth,"linkViaPopup",d,w,_).executeNotNull()})).apply(this,arguments)}let Sw=(()=>{class g extends sm{constructor(f,_,w,R,Y){super(f,_,R,Y),this.provider=w,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,D.A)(function*(){const _=yield f.execute();return ae(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,D.A)(function*(){bt(1===f.filter.length,"Popup operations only handle one event");const _=ws();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(w=>{f.reject(w)}),f.resolver._isIframeWebStorageSupported(f.auth,w=>{w||f.reject(St(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,w;this.pollId=null!==(w=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Wz.get())};f()}}return g.currentPopupAction=null,g})();const Qz="pendingRedirect",om=new Map;class Yz extends sm{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,D.A)(function*(){let _=om.get(f.auth._key());if(!_){try{const R=(yield function Xz(g,d){return am.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(R)}catch(w){_=()=>Promise.reject(w)}om.set(f.auth._key(),_)}return f.bypassAuthState||om.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,D.A)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const w=yield _.auth._redirectUserForId(d.eventId);if(w)return _.user=w,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function am(){return(am=(0,D.A)(function*(g,d){const f=Dw(d),_=KR(g);if(!(yield _._isAvailable()))return!1;const w="true"===(yield _._get(f));return yield _._remove(f),w})).apply(this,arguments)}function lm(g,d){return xw.apply(this,arguments)}function xw(){return(xw=(0,D.A)(function*(g,d){return KR(g)._set(Dw(d),"true")})).apply(this,arguments)}function Zz(){om.clear()}function qR(g,d){om.set(g._key(),d)}function KR(g){return ye(g._redirectPersistence)}function Dw(g){return Be(Qz,g.config.apiKey,g.name)}function Rw(g,d,f){return function as(g,d,f){return cm.apply(this,arguments)}(g,d,f)}function cm(){return(cm=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=wr(g);wt(g,d,Nr),yield _._initializationPromise;const w=jo(_,f);return yield lm(w,_),w._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function QR(g,d,f){return function YR(g,d,f){return um.apply(this,arguments)}(g,d,f)}function um(){return(um=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if(wt(_.auth,d,Nr),(0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(_t(_.auth));yield _.auth._initializationPromise;const w=jo(_.auth,f);yield lm(w,_.auth);const R=yield fn(_);return w._openRedirect(_.auth,d,"reauthViaRedirect",R)})).apply(this,arguments)}function Mw(g,d,f){return function XR(g,d,f){return Ih.apply(this,arguments)}(g,d,f)}function Ih(){return(Ih=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);wt(_.auth,d,Nr),yield _.auth._initializationPromise;const w=jo(_.auth,f);yield $p(!1,_,d.providerId),yield lm(w,_.auth);const R=yield fn(_);return w._openRedirect(_.auth,d,"linkViaRedirect",R)})).apply(this,arguments)}function ZR(g,d){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,D.A)(function*(g,d){return yield wr(g)._initializationPromise,dm(g,d,!1)})).apply(this,arguments)}function dm(g,d){return hm.apply(this,arguments)}function hm(){return(hm=(0,D.A)(function*(g,d,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=wr(g),w=jo(_,d),Y=yield new Yz(_,w,f).execute();return Y&&!f&&(delete Y.user._redirectEventId,yield _._persistUserIfCurrent(Y.user),yield _._setRedirectUser(null,d)),Y})).apply(this,arguments)}function fn(g){return wh.apply(this,arguments)}function wh(){return(wh=(0,D.A)(function*(g){const d=ws(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class qi{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function _c(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Du(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!Du(d)){const w=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(St(this.auth,w))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pw(d))}saveEventToCache(d){this.cachedEventUids.add(Pw(d)),this.lastProcessedEventTime=Date.now()}}function Pw(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function Du({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Ts(g){return qy.apply(this,arguments)}function qy(){return(qy=(0,D.A)(function*(g,d={}){return ue(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Ky=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JR=/^https?/;function fm(){return(fm=(0,D.A)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Ts(g);for(const f of d)try{if(kw(f))return}catch{}At(g,"unauthorized-domain")})).apply(this,arguments)}function kw(g){const d=Ht(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const Y=new URL(g);return""===Y.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&Y.hostname===_}if(!JR.test(f))return!1;if(Ky.test(g))return _===g;const w=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(_)}const Nw=new rr(3e4,6e4);function Th(){const g=Or().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let yc=null;const Yy=new rr(5e3,15e3),Ua="__/auth/iframe",Mt="emulator/auth/iframe",mm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ow(g){const d=g.config;ae(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?dr(d,Mt):`https://${g.config.authDomain}/${Ua}`,_={apiKey:d.apiKey,appName:g.name,v:Z.SDK_VERSION},w=Xy.get(g.config.apiHost);w&&(_.eid=w);const R=g._getFrameworks();return R.length&&(_.fw=R.join(",")),`${f}?${(0,x.Am)(_).slice(1)}`}function Zy(){return Zy=(0,D.A)(function*(g){const d=yield function pm(g){return yc=yc||function Qy(g){return new Promise((d,f)=>{var _,w,R;function Y(){Th(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Th(),f(St(g,"network-request-failed"))},timeout:Nw.get()})}if(null!==(w=null===(_=Or().gapi)||void 0===_?void 0:_.iframes)&&void 0!==w&&w.Iframe)d(gapi.iframes.getContext());else{if(null===(R=Or().gapi)||void 0===R||!R.load){const ge=Es("iframefcb");return Or()[ge]=()=>{gapi.load?Y():f(St(g,"network-request-failed"))},py(`${function Pp(){return ic.gapiScript}()}?onload=${ge}`).catch(ke=>f(ke))}Y()}}).catch(d=>{throw yc=null,d})}(g),yc}(g),f=Or().gapi;return ae(f,g,"internal-error"),d.open({where:document.body,url:Ow(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mm,dontclear:!0},_=>new Promise(function(){var w=(0,D.A)(function*(R,Y){yield _.restyle({setHideOnLeave:!1});const ge=St(g,"network-request-failed"),ke=Or().setTimeout(()=>{Y(ge)},Yy.get());function rt(){Or().clearTimeout(ke),R(_)}_.ping(rt).then(rt,()=>{Y(ge)})});return function(R,Y){return w.apply(this,arguments)}}()))}),Zy.apply(this,arguments)}const eM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lw{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const sM="__/auth/handler",Te="emulator/auth/handler",Kt=encodeURIComponent("fac");function Cn(g,d,f,_,w,R){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,D.A)(function*(g,d,f,_,w,R){ae(g.config.authDomain,g,"auth-domain-config-required"),ae(g.config.apiKey,g,"invalid-api-key");const Y={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:Z.SDK_VERSION,eventId:w};if(d instanceof Nr){d.setDefaultLanguage(g.languageCode),Y.providerId=d.providerId||"",(0,x.Im)(d.getCustomParameters())||(Y.customParameters=JSON.stringify(d.getCustomParameters()));for(const[dt,rn]of Object.entries(R||{}))Y[dt]=rn}if(d instanceof ac){const dt=d.getScopes().filter(rn=>""!==rn);dt.length>0&&(Y.scopes=dt.join(","))}g.tenantId&&(Y.tid=g.tenantId);const ge=Y;for(const dt of Object.keys(ge))void 0===ge[dt]&&delete ge[dt];const ke=yield g._getAppCheckToken(),rt=ke?`#${Kt}=${encodeURIComponent(ke)}`:"";return`${function Vn({config:g}){return g.emulator?dr(g,Te):`https://${g.authDomain}/${sM}`}(g)}?${(0,x.Am)(ge).slice(1)}${rt}`})).apply(this,arguments)}const gm="webStorageSupport",wo=class Ah{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jy,this._completeRedirectFn=dm,this._overrideRedirectResult=qR}_openPopup(d,f,_,w){var R=this;return(0,D.A)(function*(){var Y;bt(null===(Y=R.eventManagers[d._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ge=yield Cn(d,f,_,Ht(),w);return function rM(g,d,f,_=500,w=600){const R=Math.max((window.screen.availHeight-w)/2,0).toString(),Y=Math.max((window.screen.availWidth-_)/2,0).toString();let ge="";const ke=Object.assign(Object.assign({},eM),{width:_.toString(),height:w.toString(),top:R,left:Y}),rt=(0,x.ZQ)().toLowerCase();f&&(ge=Ks(rt)?"_blank":f),K(rt)&&(d=d||"http://localhost",ke.scrollbars="yes");const dt=Object.entries(ke).reduce((Mn,[As,Bn])=>`${Mn}${As}=${Bn},`,"");if(function hu(g=(0,x.ZQ)()){var d;return mo(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(rt)&&"_self"!==ge)return function iM(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",ge),new Lw(null);const rn=window.open(d||"",ge,dt);ae(rn,g,"popup-blocked");try{rn.focus()}catch{}return new Lw(rn)}(d,ge,ws())})()}_openRedirect(d,f,_,w){var R=this;return(0,D.A)(function*(){return yield R._originValidation(d),function Iu(g){Or().location.href=g}(yield Cn(d,f,_,Ht(),w)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:w,promise:R}=this.eventManagers[f];return w?Promise.resolve(w):(bt(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,D.A)(function*(){const _=yield function Jz(g){return Zy.apply(this,arguments)}(d),w=new qi(d);return _.register("authEvent",R=>(ae(R?.authEvent,d,"invalid-auth-event"),{status:w.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:w},f.iframes[d._key()]=_,w})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(gm,{type:gm},w=>{var R;const Y=null===(R=w?.[0])||void 0===R?void 0:R[gm];void 0!==Y&&f(!!Y),At(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Io(g){return fm.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return fy()||Yn()||mo()}};class _m{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return it("unexpected MultiFactorSessionType")}}}class Sh extends _m{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Sh(d)}_finalizeEnroll(d,f,_){return function FR(g,d){return ue(g,"POST","/v2/accounts/mfaEnrollment:finalize",le(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function ni(g,d){return ue(g,"POST","/v2/accounts/mfaSignIn:finalize",le(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vw=(()=>{class g{constructor(){}static assertion(f){return Sh._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var ev="@firebase/auth";class ja{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,D.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const oM=(0,x.XA)("authIdTokenMaxAge")||300;let tv=null;const aM=g=>function(){var d=(0,D.A)(function*(f){const _=f&&(yield f.getIdTokenResult()),w=_&&((new Date).getTime()-Date.parse(_.issuedAtTime))/1e3;if(w&&w>oM)return;const R=_?.token;tv!==R&&(tv=R,yield fetch(g,{method:R?"POST":"DELETE",headers:R?{Authorization:`Bearer ${R}`}:{}}))});return function(f){return d.apply(this,arguments)}}();function lM(g=(0,Z.getApp)()){const d=(0,Z._getProvider)(g,"auth");if(d.isInitialized())return d.getImmediate();const f=function Bz(g,d){const f=(0,Z._getProvider)(g,"auth");if(f.isInitialized()){const w=f.getImmediate(),R=f.getOptions();if((0,x.bD)(R,d??{}))return w;At(w,"already-initialized")}return f.initialize({options:d})}(g,{popupRedirectResolver:wo,persistence:[fc,hc,jy]}),_=(0,x.XA)("authTokenSyncURL");if(_&&"boolean"==typeof isSecureContext&&isSecureContext){const R=new URL(_,location.origin);if(location.origin===R.origin){const Y=aM(R.toString());(function _l(g,d,f){(0,x.Ku)(g).beforeAuthStateChanged(d,f)})(f,Y,()=>Y(f.currentUser)),function kR(g,d,f,_){(0,x.Ku)(g).onIdTokenChanged(d,f,_)}(f,ge=>Y(ge))}}const w=(0,x.Tj)("auth");return w&&mR(f,`http://${w}`),f}(function Fz(g){ic=g})({loadJS:g=>new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=w=>{const R=St("internal-error");R.customData=w,f(R)},_.type="text/javascript",_.charset="UTF-8",function nv(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function zo(g){(0,Z._registerComponent)(new ne.uA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),w=d.getProvider("heartbeat"),R=d.getProvider("app-check-internal"),{apiKey:Y,authDomain:ge}=_.options;ae(Y&&!Y.includes(":"),"invalid-api-key",{appName:_.name});const ke={apiKey:Y,authDomain:ge,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mp(g)},rt=new Ln(_,w,R,ke);return function pR(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(ye);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(rt,f),rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new ne.uA("auth-internal",d=>{const f=wr(d.getProvider("auth").getImmediate());return new ja(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(ev,"1.7.9",function Uw(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Z.registerVersion)(ev,"1.7.9","esm2017")}("Browser")},1401:(vt,U,G)=>{G.d(U,{$L:()=>Rn,$g:()=>dr,A4:()=>$,Am:()=>_s,As:()=>Ct,Bd:()=>it,Cv:()=>tn,FA:()=>_e,Fy:()=>_t,HN:()=>vs,Hk:()=>x,I9:()=>Ws,Im:()=>Ii,K3:()=>ne,KA:()=>ee,Ku:()=>Se,Ll:()=>ae,OE:()=>di,T9:()=>At,Tj:()=>qt,Uj:()=>X,XA:()=>St,ZQ:()=>wt,bD:()=>ei,c1:()=>Ht,cY:()=>Lt,dI:()=>ys,dM:()=>le,eX:()=>be,g:()=>ve,gR:()=>Nt,gz:()=>ua,hp:()=>fo,jZ:()=>Ue,kH:()=>kr,kj:()=>pl,lT:()=>Dn,lV:()=>xn,mS:()=>Ve,nr:()=>Wr,oD:()=>$i,od:()=>Fo,p7:()=>bt,p9:()=>Ut,qc:()=>nn,sr:()=>Sn,tD:()=>Gs,u:()=>z,vA:()=>Z,yw:()=>Jr,zW:()=>pe,zw:()=>fe});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(C,E){if(!C)throw x(E)},x=function(C){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+C)},me=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):55296==(64512&j)&&F+1<C.length&&56320==(64512&C.charCodeAt(F+1))?(j=65536+((1023&j)<<10)+(1023&C.charCodeAt(++F)),E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,E){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=E?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let j=0;j<C.length;j+=3){const ye=C[j],Fe=j+1<C.length,gt=Fe?C[j+1]:0,Be=j+2<C.length,gn=Be?C[j+2]:0;let Yn=(15&gt)<<2|gn>>6,Ks=63&gn;Be||(Ks=64,Fe||(Yn=64)),F.push(S[ye>>2],S[(3&ye)<<4|gt>>4],S[Yn],S[Ks])}return F.join("")},encodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?btoa(C):this.encodeByteArray(me(C),E)},decodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?atob(C):function(C){const E=[];let S=0,F=0;for(;S<C.length;){const j=C[S++];if(j<128)E[F++]=String.fromCharCode(j);else if(j>191&&j<224){const ye=C[S++];E[F++]=String.fromCharCode((31&j)<<6|63&ye)}else if(j>239&&j<365){const Be=((7&j)<<18|(63&C[S++])<<12|(63&C[S++])<<6|63&C[S++])-65536;E[F++]=String.fromCharCode(55296+(Be>>10)),E[F++]=String.fromCharCode(56320+(1023&Be))}else{const ye=C[S++],Fe=C[S++];E[F++]=String.fromCharCode((15&j)<<12|(63&ye)<<6|63&Fe)}}return E.join("")}(this.decodeStringToByteArray(C,E))},decodeStringToByteArray(C,E){this.init_();const S=E?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let j=0;j<C.length;){const ye=S[C.charAt(j++)],gt=j<C.length?S[C.charAt(j)]:0;++j;const gn=j<C.length?S[C.charAt(j)]:64;++j;const K=j<C.length?S[C.charAt(j)]:64;if(++j,null==ye||null==gt||null==gn||null==K)throw new Ae;F.push(ye<<2|gt>>4),64!==gn&&(F.push(gt<<4&240|gn>>2),64!==K&&F.push(gn<<6&192|K))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ee=function(C){const E=me(C);return ne.encodeByteArray(E,!0)},X=function(C){return ee(C).replace(/\./g,"")},z=function(C){try{return ne.decodeString(C,!0)}catch(E){console.error("base64Decode failed: ",E)}return null};function $(C){return fe(void 0,C)}function fe(C,E){if(!(E instanceof Object))return E;switch(E.constructor){case Date:return new Date(E.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return E}for(const S in E)!E.hasOwnProperty(S)||!Re(S)||(C[S]=fe(C[S],E[S]));return C}function Re(C){return"__proto__"!==C}function Ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const et=()=>{try{return Ve().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const E=C&&z(C[1]);return E&&JSON.parse(E)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},qt=C=>{var E,S;return null===(S=null===(E=et())||void 0===E?void 0:E.emulatorHosts)||void 0===S?void 0:S[C]},At=()=>{var C;return null===(C=et())||void 0===C?void 0:C.config},St=C=>{var E;return null===(E=et())||void 0===E?void 0:E[`_${C}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((E,S)=>{this.resolve=E,this.reject=S})}wrapCallback(E){return(S,F)=>{S?this.reject(S):this.resolve(F),"function"==typeof E&&(this.promise.catch(()=>{}),1===E.length?E(S):E(S,F))}}}function _t(C,E){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=E||"demo-project",j=C.iat||0,ye=C.sub||C.user_id;if(!ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:j,exp:j+3600,auth_time:j,sub:ye,user_id:ye,firebase:{sign_in_provider:"custom",identities:{}}},C);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(Fe)),""].join(".")}function wt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function ae(){var C;const E=null===(C=et())||void 0===C?void 0:C.forceEnvironment;if("node"===E)return!0;if("browser"===E)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return typeof window<"u"||bt()}function bt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ht(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Sn(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function xn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Dn(){const C=wt();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function dr(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function Wr(){return!ae()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){try{return"object"==typeof indexedDB}catch{return!1}}function be(){return new Promise((C,E)=>{try{let S=!0;const F="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(F);j.onsuccess=()=>{j.result.close(),S||self.indexedDB.deleteDatabase(F),C(!0)},j.onupgradeneeded=()=>{S=!1},j.onerror=()=>{var ye;E((null===(ye=j.error)||void 0===ye?void 0:ye.message)||"")}}catch(S){E(S)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ve extends Error{constructor(E,S,F){super(S),this.code=E,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_e.prototype.create)}}class _e{constructor(E,S,F){this.service=E,this.serviceName=S,this.errors=F}create(E,...S){const F=S[0]||{},j=`${this.service}/${E}`,ye=this.errors[E],Fe=ye?function lt(C,E){return C.replace(Pt,(S,F)=>{const j=E[F];return null!=j?String(j):`<${F}?>`})}(ye,F):"Error";return new ve(j,`${this.serviceName}: ${Fe} (${j}).`,F)}}const Pt=/\{\$([^}]+)}/g;function Rn(C){return JSON.parse(C)}function Ct(C){return JSON.stringify(C)}const wn=function(C){let E={},S={},F={},j="";try{const ye=C.split(".");E=Rn(z(ye[0])||""),S=Rn(z(ye[1])||""),j=ye[2],F=S.d||{},delete S.d}catch{}return{header:E,claims:S,data:F,signature:j}},tn=function(C){const S=wn(C).claims;return!!S&&"object"==typeof S&&S.hasOwnProperty("iat")},nn=function(C){const E=wn(C).claims;return"object"==typeof E&&!0===E.admin};function Nt(C,E){return Object.prototype.hasOwnProperty.call(C,E)}function Jr(C,E){if(Object.prototype.hasOwnProperty.call(C,E))return C[E]}function Ii(C){for(const E in C)if(Object.prototype.hasOwnProperty.call(C,E))return!1;return!0}function kr(C,E,S){const F={};for(const j in C)Object.prototype.hasOwnProperty.call(C,j)&&(F[j]=E.call(S,C[j],j,C));return F}function ei(C,E){if(C===E)return!0;const S=Object.keys(C),F=Object.keys(E);for(const j of S){if(!F.includes(j))return!1;const ye=C[j],Fe=E[j];if(ho(ye)&&ho(Fe)){if(!ei(ye,Fe))return!1}else if(ye!==Fe)return!1}for(const j of F)if(!S.includes(j))return!1;return!0}function ho(C){return null!==C&&"object"==typeof C}function _s(C){const E=[];for(const[S,F]of Object.entries(C))Array.isArray(F)?F.forEach(j=>{E.push(encodeURIComponent(S)+"="+encodeURIComponent(j))}):E.push(encodeURIComponent(S)+"="+encodeURIComponent(F));return E.length?"&"+E.join("&"):""}function Ws(C){const E={};return C.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[j,ye]=F.split("=");E[decodeURIComponent(j)]=decodeURIComponent(ye)}}),E}function fo(C){const E=C.indexOf("?");if(!E)return"";const S=C.indexOf("#",E);return C.substring(E,S>0?S:void 0)}class ua{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let E=1;E<this.blockSize;++E)this.pad_[E]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(E,S){S||(S=0);const F=this.W_;if("string"==typeof E)for(let K=0;K<16;K++)F[K]=E.charCodeAt(S)<<24|E.charCodeAt(S+1)<<16|E.charCodeAt(S+2)<<8|E.charCodeAt(S+3),S+=4;else for(let K=0;K<16;K++)F[K]=E[S]<<24|E[S+1]<<16|E[S+2]<<8|E[S+3],S+=4;for(let K=16;K<80;K++){const Yn=F[K-3]^F[K-8]^F[K-14]^F[K-16];F[K]=4294967295&(Yn<<1|Yn>>>31)}let gn,Ir,j=this.chain_[0],ye=this.chain_[1],Fe=this.chain_[2],gt=this.chain_[3],Be=this.chain_[4];for(let K=0;K<80;K++){K<40?K<20?(gn=gt^ye&(Fe^gt),Ir=1518500249):(gn=ye^Fe^gt,Ir=1859775393):K<60?(gn=ye&Fe|gt&(ye|Fe),Ir=2400959708):(gn=ye^Fe^gt,Ir=3395469782);const Yn=(j<<5|j>>>27)+gn+Be+Ir+F[K]&4294967295;Be=gt,gt=Fe,Fe=4294967295&(ye<<30|ye>>>2),ye=j,j=Yn}this.chain_[0]=this.chain_[0]+j&4294967295,this.chain_[1]=this.chain_[1]+ye&4294967295,this.chain_[2]=this.chain_[2]+Fe&4294967295,this.chain_[3]=this.chain_[3]+gt&4294967295,this.chain_[4]=this.chain_[4]+Be&4294967295}update(E,S){if(null==E)return;void 0===S&&(S=E.length);const F=S-this.blockSize;let j=0;const ye=this.buf_;let Fe=this.inbuf_;for(;j<S;){if(0===Fe)for(;j<=F;)this.compress_(E,j),j+=this.blockSize;if("string"==typeof E){for(;j<S;)if(ye[Fe]=E.charCodeAt(j),++Fe,++j,Fe===this.blockSize){this.compress_(ye),Fe=0;break}}else for(;j<S;)if(ye[Fe]=E[j],++Fe,++j,Fe===this.blockSize){this.compress_(ye),Fe=0;break}}this.inbuf_=Fe,this.total_+=S}digest(){const E=[];let S=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let j=this.blockSize-1;j>=56;j--)this.buf_[j]=255&S,S/=256;this.compress_(this.buf_);let F=0;for(let j=0;j<5;j++)for(let ye=24;ye>=0;ye-=8)E[F]=this.chain_[j]>>ye&255,++F;return E}}function Gs(C,E){const S=new ui(C,E);return S.subscribe.bind(S)}class ui{constructor(E,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{E(this)}).catch(F=>{this.error(F)})}next(E){this.forEachObserver(S=>{S.next(E)})}error(E){this.forEachObserver(S=>{S.error(E)}),this.close(E)}complete(){this.forEachObserver(E=>{E.complete()}),this.close()}subscribe(E,S,F){let j;if(void 0===E&&void 0===S&&void 0===F)throw new Error("Missing Observer.");j=function qs(C,E){if("object"!=typeof C||null===C)return!1;for(const S of E)if(S in C&&"function"==typeof C[S])return!0;return!1}(E,["next","error","complete"])?E:{next:E,error:S,complete:F},void 0===j.next&&(j.next=os),void 0===j.error&&(j.error=os),void 0===j.complete&&(j.complete=os);const ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?j.error(this.finalError):j.complete()}catch{}}),this.observers.push(j),ye}unsubscribeOne(E){void 0===this.observers||void 0===this.observers[E]||(delete this.observers[E],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(E){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,E)}sendOne(E,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[E])try{S(this.observers[E])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(E){this.finalized||(this.finalized=!0,void 0!==E&&(this.finalError=E),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function os(){}const Fo=function(C,E,S,F){let j;if(F<E?j="at least "+E:F>S&&(j=0===S?"none":"no more than "+S),j)throw new Error(C+" failed: Was called with "+F+(1===F?" argument.":" arguments.")+" Expects "+j+".")};function ys(C,E){return`${C} failed: ${E} argument `}function $i(C,E,S,F){if((!F||S)&&"function"!=typeof S)throw new Error(ys(C,E)+"must be a valid function.")}function vs(C,E,S,F){if((!F||S)&&("object"!=typeof S||null===S))throw new Error(ys(C,E)+"must be a valid context object.")}const pl=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);if(j>=55296&&j<=56319){const ye=j-55296;F++,Z(F<C.length,"Surrogate pair missing trail surrogate."),j=65536+(ye<<10)+(C.charCodeAt(F)-56320)}j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):j<65536?(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},di=function(C){let E=0;for(let S=0;S<C.length;S++){const F=C.charCodeAt(S);F<128?E++:F<2048?E+=2:F>=55296&&F<=56319?(E+=4,S++):E+=3}return E},po=1e3,Ri=2,Na=144e5,ha=.5;function Ut(C,E=po,S=Ri){const F=E*Math.pow(S,C),j=Math.round(ha*F*(Math.random()-.5)*2);return Math.min(Na,F+j)}function Se(C){return C&&C._delegate?C._delegate:C}},2222:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ne(G(7029)),Z=ne(G(3100)),x=ne(G(5705)),me=ne(G(942)),he=G(7636);function ne(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$,fe){var Re=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,Ve=(0,D.default)(z),nt=(0,Z.default)(z),Ze=$/Re,Je=(0,x.default)(fe),et=(0,x.default)(Ve),qt=(0,x.default)(nt),Jt=Math.asin(Math.sin(et)*Math.cos(Ze)+Math.cos(et)*Math.sin(Ze)*Math.cos(Je)),At=qt+Math.atan2(Math.sin(Je)*Math.sin(Ze)*Math.cos(et),Math.cos(Ze)-Math.sin(et)*Math.sin(Jt)),St=(0,me.default)(At);return(St<he.MINLON||St>he.MAXLON)&&(At=(At+3*Math.PI)%(2*Math.PI)-Math.PI,St=(0,me.default)(At)),{latitude:(0,me.default)(Jt),longitude:St}}},7636:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.areaConversion=U.timeConversion=U.distanceConversion=U.altitudeKeys=U.latitudeKeys=U.longitudeKeys=U.MAXLON=U.MINLON=U.MAXLAT=U.MINLAT=U.earthRadius=U.sexagesimalPattern=void 0,U.sexagesimalPattern=/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['\u2032]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["\u2033]\s*)?([NEOSW]?)$/,U.earthRadius=6378137,U.MINLAT=-90,U.MAXLAT=90,U.MINLON=-180,U.MAXLON=180,U.longitudeKeys=["lng","lon","longitude",0],U.latitudeKeys=["lat","latitude",1],U.altitudeKeys=["alt","altitude","elevation","elev",2],U.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},U.timeConversion={m:60,h:3600,d:86400};var $={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};U.areaConversion=$,$.sqm=$.m2,$.sqkm=$.km2,$.sqft=$.ft2,$.sqyd=$.yd2,$.sqin=$.in2},179:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(he){var Ae=D.areaConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(Ae)return he*Ae;throw new Error("Invalid unit used for area conversion.")}},917:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(he){var Ae=D.distanceConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(Ae)return he*Ae;throw new Error("Invalid unit used for distance conversion.")}},1167:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(he){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh"){case"kmh":return he*D.timeConversion.h*D.distanceConversion.km;case"mph":return he*D.timeConversion.h*D.distanceConversion.mi;default:return he}}},8948:(vt,U)=>{function G(X,z){return function he(X){if(Array.isArray(X))return X}(X)||function me(X,z){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(X)){var $=[],fe=!0,Re=!1,Ve=void 0;try{for(var Ze,nt=X[Symbol.iterator]();!(fe=(Ze=nt.next()).done)&&($.push(Ze.value),!z||$.length!==z);fe=!0);}catch(Je){Re=!0,Ve=Je}finally{try{!fe&&null!=nt.return&&nt.return()}finally{if(Re)throw Ve}}return $}}(X,z)||function Z(X,z){if(X){if("string"==typeof X)return x(X,z);var $=Object.prototype.toString.call(X).slice(8,-1);if("Object"===$&&X.constructor&&($=X.constructor.name),"Map"===$||"Set"===$)return Array.from(X);if("Arguments"===$||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return x(X,z)}}(X,z)||function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(X,z){(null==z||z>X.length)&&(z=X.length);for(var $=0,fe=new Array(z);$<z;$++)fe[$]=X[$];return fe}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(z){var fe=G(z.toString().split("."),2),Ve=fe[1],nt=Math.abs(Number(fe[0])),Ze=60*+("0."+(Ve||0)),Je=Ze.toString().split("."),et=Math.floor(Ze),qt=function(z){var fe=Math.pow(10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:4);return Math.round(z*fe)/fe}(60*+("0."+(Je[1]||0))).toString(),At=G(qt.split("."),2),St=At[0],Lt=At[1],_t=void 0===Lt?"0":Lt;return nt+"\xb0 "+et.toString().padStart(2,"0")+"' "+St.padStart(2,"0")+"."+_t.padEnd(1,"0")+'"'}},1118:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(he){return he&&he.__esModule?he:{default:he}}(G(2447));U.default=function(ne,Ae){return(0,D.default)(ne,Ae)[0]}},1691:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=he(G(5705)),Z=he(G(7029)),x=he(G(3100)),me=G(7636);function he(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){var z=0;if(X.length>2){for(var $,fe,Re,Ve=0;Ve<X.length;Ve++){Ve===X.length-2?($=X.length-2,fe=X.length-1,Re=0):Ve===X.length-1?($=X.length-1,fe=0,Re=1):($=Ve,fe=Ve+1,Re=Ve+2);var nt=(0,x.default)(X[$]),Ze=(0,Z.default)(X[fe]),Je=(0,x.default)(X[Re]);z+=((0,D.default)(Je)-(0,D.default)(nt))*Math.sin((0,D.default)(Ze))}z=z*me.earthRadius*me.earthRadius/2}return Math.abs(z)}},9144:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(7029)),Z=x(G(3100));function x(ne){return ne&&ne.__esModule?ne:{default:ne}}U.default=function(Ae){if(!1===Array.isArray(Ae)||0===Ae.length)throw new Error("No points were given.");return Ae.reduce(function(ee,X){var z=(0,D.default)(X),$=(0,Z.default)(X);return{maxLat:Math.max(z,ee.maxLat),minLat:Math.min(z,ee.minLat),maxLng:Math.max($,ee.maxLng),minLng:Math.min($,ee.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}},190:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ne(G(7029)),Z=ne(G(3100)),x=ne(G(5705)),me=ne(G(942)),he=G(7636);function ne(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var Lt,_t,fe=(0,D.default)(z),Re=(0,Z.default)(z),Ve=(0,x.default)(fe),nt=(0,x.default)(Re),Ze=$/he.earthRadius,Je=Ve-Ze,et=Ve+Ze,qt=(0,x.default)(he.MAXLAT),Jt=(0,x.default)(he.MINLAT),At=(0,x.default)(he.MAXLON),St=(0,x.default)(he.MINLON);if(Je>Jt&&et<qt){var wt=Math.asin(Math.sin(Ze)/Math.cos(Ve));(Lt=nt-wt)<St&&(Lt+=2*Math.PI),(_t=nt+wt)>At&&(_t-=2*Math.PI)}else Je=Math.max(Je,Jt),et=Math.min(et,qt),Lt=St,_t=At;return[{latitude:(0,me.default)(Je),longitude:(0,me.default)(Lt)},{latitude:(0,me.default)(et),longitude:(0,me.default)(_t)}]}},5524:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=he(G(7029)),Z=he(G(3100)),x=he(G(5705)),me=he(G(942));function he(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){if(!1===Array.isArray(X)||0===X.length)return!1;var z=X.length,$=X.reduce(function(nt,Ze){var Je=(0,x.default)((0,D.default)(Ze)),et=(0,x.default)((0,Z.default)(Ze));return{X:nt.X+Math.cos(Je)*Math.cos(et),Y:nt.Y+Math.cos(Je)*Math.sin(et),Z:nt.Z+Math.sin(Je)}},{X:0,Y:0,Z:0}),fe=$.X/z,Re=$.Y/z,Ve=$.Z/z;return{longitude:(0,me.default)(Math.atan2(Re,fe)),latitude:(0,me.default)(Math.atan2(Ve,Math.sqrt(fe*fe+Re*Re)))}}},7088:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(he){return he&&he.__esModule?he:{default:he}}(G(9144));U.default=function(ne){var Ae=(0,D.default)(ne),X=Ae.minLng+(Ae.maxLng-Ae.minLng)/2;return{latitude:parseFloat((Ae.minLat+(Ae.maxLat-Ae.minLat)/2).toFixed(6)),longitude:parseFloat(X.toFixed(6))}}},9952:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(he){return he&&he.__esModule?he:{default:he}}(G(939));U.default=function(ne,Ae){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default,X="function"==typeof ee?ee(ne,Ae):(0,D.default)(ne,Ae);if(isNaN(X))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(X/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}},8744:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x,me){return me.reduce(function(he,ne){if(typeof x>"u"||null===x)throw new Error("'".concat(x,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(x,ne)&&typeof ne<"u"&&typeof he>"u"?(he=ne,ne):he},void 0)}},4695:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=function x(X){return X&&X.__esModule?X:{default:X}}(G(8744));function me(X,z){var $=Object.keys(X);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(X);z&&(fe=fe.filter(function(Re){return Object.getOwnPropertyDescriptor(X,Re).enumerable})),$.push.apply($,fe)}return $}function ne(X,z,$){return z in X?Object.defineProperty(X,z,{value:$,enumerable:!0,configurable:!0,writable:!0}):X[z]=$,X}U.default=function(z){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:D.longitudeKeys,latitude:D.latitudeKeys,altitude:D.altitudeKeys},fe=(0,Z.default)(z,$.longitude),Re=(0,Z.default)(z,$.latitude),Ve=(0,Z.default)(z,$.altitude);return function he(X){for(var z=1;z<arguments.length;z++){var $=null!=arguments[z]?arguments[z]:{};z%2?me(Object($),!0).forEach(function(fe){ne(X,fe,$[fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors($)):me(Object($)).forEach(function(fe){Object.defineProperty(X,fe,Object.getOwnPropertyDescriptor($,fe))})}return X}({latitude:Re,longitude:fe},Ve?{altitude:Ve}:{})}},8674:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ne(G(7029)),Z=ne(G(3100)),x=ne(G(5705)),me=ne(G(6522)),he=G(7636);function ne(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var fe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;fe=typeof fe<"u"&&!isNaN(fe)?fe:1;var Re=(0,D.default)(z),Ve=(0,Z.default)(z),nt=(0,D.default)($),Ze=(0,Z.default)($),Je=Math.acos((0,me.default)(Math.sin((0,x.default)(nt))*Math.sin((0,x.default)(Re))+Math.cos((0,x.default)(nt))*Math.cos((0,x.default)(Re))*Math.cos((0,x.default)(Ve)-(0,x.default)(Ze))))*he.earthRadius;return Math.round(Je/fe)*fe}},7504:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(8674)),Z=x(G(6522));function x(ne){return ne&&ne.__esModule?ne:{default:ne}}U.default=function(Ae,ee,X){var z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,$=(0,D.default)(ee,Ae,z),fe=(0,D.default)(Ae,X,z),Re=(0,D.default)(ee,X,z),Ve=Math.acos((0,Z.default)(($*$+Re*Re-fe*fe)/(2*$*Re))),nt=Math.acos((0,Z.default)((fe*fe+Re*Re-$*$)/(2*fe*Re)));return Ve>Math.PI/2?$:nt>Math.PI/2?fe:Math.sin(Ve)*$}},884:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=he(G(7029)),Z=he(G(3100)),x=he(G(5705)),me=he(G(942));function he(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,D.default)(z),fe=(0,Z.default)(z),Re=(0,D.default)(X),Ve=(0,Z.default)(X);return((0,me.default)(Math.atan2(Math.sin((0,x.default)(fe)-(0,x.default)(Ve))*Math.cos((0,x.default)($)),Math.cos((0,x.default)(Re))*Math.sin((0,x.default)($))-Math.sin((0,x.default)(Re))*Math.cos((0,x.default)($))*Math.cos((0,x.default)(fe)-(0,x.default)(Ve))))+360)%360}},7029:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=me(G(8744)),x=me(G(5101));function me(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}U.default=function(ee,X){var z=(0,Z.default)(ee,D.latitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,x.default)($)}}},3100:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=me(G(8744)),x=me(G(5101));function me(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}U.default=function(ee,X){var z=(0,Z.default)(ee,D.longitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,x.default)($)}}},5378:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ne){return ne&&ne.__esModule?ne:{default:ne}}(G(8674));function x(ne){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(ne)}U.default=function(Ae){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.default;return Ae.reduce(function(X,z){return"object"===x(X)&&null!==X.last&&(X.distance+=ee(z,X.last)),X.last=z,X},{last:null,distance:0}).distance}},2671:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=he(G(7029)),Z=he(G(3100)),x=he(G(5705)),me=G(7636);function he(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;$=typeof $<"u"&&!isNaN($)?$:1;var qt,Jt,At,St,Lt,_t,xn,fe=(0,D.default)(X),Re=(0,Z.default)(X),Ve=(0,D.default)(z),nt=(0,Z.default)(z),Ze=6356752.314245,Je=1/298.257223563,et=(0,x.default)(nt-Re),wt=Math.atan((1-Je)*Math.tan((0,x.default)(parseFloat(fe)))),Ue=Math.atan((1-Je)*Math.tan((0,x.default)(parseFloat(Ve)))),ae=Math.sin(wt),it=Math.cos(wt),bt=Math.sin(Ue),Ht=Math.cos(Ue),Sn=et,Er=100;do{var Dn=Math.sin(Sn),rr=Math.cos(Sn);if(0===(_t=Math.sqrt(Ht*Dn*(Ht*Dn)+(it*bt-ae*Ht*rr)*(it*bt-ae*Ht*rr))))return 0;qt=ae*bt+it*Ht*rr,Jt=Math.atan2(_t,qt),Lt=qt-2*ae*bt/(St=1-(At=it*Ht*Dn/_t)*At),isNaN(Lt)&&(Lt=0);var dr=Je/16*St*(4+Je*(4-3*St));xn=Sn,Sn=et+(1-dr)*Je*At*(Jt+dr*_t*(Lt+dr*qt*(2*Lt*Lt-1)))}while(Math.abs(Sn-xn)>1e-12&&--Er>0);if(0===Er)return NaN;var Wr=St*(me.earthRadius*me.earthRadius-Ze*Ze)/(Ze*Ze),be=Wr/1024*(256+Wr*(Wr*(74-47*Wr)-128));return Math.round(Ze*(1+Wr/16384*(4096+Wr*(Wr*(320-175*Wr)-768)))*(Jt-be*_t*(Lt+be/4*(qt*(2*Lt*Lt-1)-be/6*Lt*(4*_t*_t-3)*(4*Lt*Lt-3))))/$)*$}},939:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=he(G(7029)),Z=he(G(3100)),x=he(G(5705)),me=he(G(942));function he(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,x.default)((0,Z.default)(z))-(0,x.default)((0,Z.default)(X)),fe=Math.log(Math.tan((0,x.default)((0,D.default)(z))/2+Math.PI/4)/Math.tan((0,x.default)((0,D.default)(X))/2+Math.PI/4));return Math.abs($)>Math.PI&&($=$>0?-1*(2*Math.PI-$):2*Math.PI+$),((0,me.default)(Math.atan2($,fe))+360)%360}},2845:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return/^(NNE|NE|NNW|N)$/.test(x)?"N":/^(ENE|E|ESE|SE)$/.test(x)?"E":/^(SSE|S|SSW|SW)$/.test(x)?"S":/^(WSW|W|WNW|NW)$/.test(x)?"W":void 0}},8950:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(he){return he&&he.__esModule?he:{default:he}}(G(8674));U.default=function(ne,Ae){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default)(ne,Ae)/(Number(Ae.time)-Number(ne.time))*1e3}},2541:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0});var D={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(U,"computeDestinationPoint",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(U,"convertArea",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(U,"convertDistance",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(U,"convertSpeed",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(U,"decimalToSexagesimal",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(U,"findNearest",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(U,"getAreaOfPolygon",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(U,"getBounds",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(U,"getBoundsOfDistance",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(U,"getCenter",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(U,"getCenterOfBounds",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(U,"getCompassDirection",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(U,"getCoordinateKey",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(U,"getCoordinateKeys",{enumerable:!0,get:function(){return nt.default}}),Object.defineProperty(U,"getDistance",{enumerable:!0,get:function(){return Ze.default}}),Object.defineProperty(U,"getDistanceFromLine",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(U,"getGreatCircleBearing",{enumerable:!0,get:function(){return et.default}}),Object.defineProperty(U,"getLatitude",{enumerable:!0,get:function(){return qt.default}}),Object.defineProperty(U,"getLongitude",{enumerable:!0,get:function(){return Jt.default}}),Object.defineProperty(U,"getPathLength",{enumerable:!0,get:function(){return At.default}}),Object.defineProperty(U,"getPreciseDistance",{enumerable:!0,get:function(){return St.default}}),Object.defineProperty(U,"getRhumbLineBearing",{enumerable:!0,get:function(){return Lt.default}}),Object.defineProperty(U,"getRoughCompassDirection",{enumerable:!0,get:function(){return _t.default}}),Object.defineProperty(U,"getSpeed",{enumerable:!0,get:function(){return wt.default}}),Object.defineProperty(U,"isDecimal",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(U,"isPointInLine",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(U,"isPointInPolygon",{enumerable:!0,get:function(){return it.default}}),Object.defineProperty(U,"isPointNearLine",{enumerable:!0,get:function(){return bt.default}}),Object.defineProperty(U,"isPointWithinRadius",{enumerable:!0,get:function(){return Ht.default}}),Object.defineProperty(U,"isSexagesimal",{enumerable:!0,get:function(){return Sn.default}}),Object.defineProperty(U,"isValidCoordinate",{enumerable:!0,get:function(){return xn.default}}),Object.defineProperty(U,"isValidLatitude",{enumerable:!0,get:function(){return Er.default}}),Object.defineProperty(U,"isValidLongitude",{enumerable:!0,get:function(){return Dn.default}}),Object.defineProperty(U,"orderByDistance",{enumerable:!0,get:function(){return rr.default}}),Object.defineProperty(U,"sexagesimalToDecimal",{enumerable:!0,get:function(){return dr.default}}),Object.defineProperty(U,"toDecimal",{enumerable:!0,get:function(){return Wr.default}}),Object.defineProperty(U,"toRad",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(U,"toDeg",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(U,"wktToPolygon",{enumerable:!0,get:function(){return le.default}});var Z=ve(G(2222)),x=ve(G(179)),me=ve(G(917)),he=ve(G(1167)),ne=ve(G(8948)),Ae=ve(G(1118)),ee=ve(G(1691)),X=ve(G(9144)),z=ve(G(190)),$=ve(G(5524)),fe=ve(G(7088)),Re=ve(G(9952)),Ve=ve(G(8744)),nt=ve(G(4695)),Ze=ve(G(8674)),Je=ve(G(7504)),et=ve(G(884)),qt=ve(G(7029)),Jt=ve(G(3100)),At=ve(G(5378)),St=ve(G(2671)),Lt=ve(G(939)),_t=ve(G(2845)),wt=ve(G(8950)),Ue=ve(G(3026)),ae=ve(G(4194)),it=ve(G(3536)),bt=ve(G(2787)),Ht=ve(G(202)),Sn=ve(G(4902)),xn=ve(G(7637)),Er=ve(G(6563)),Dn=ve(G(266)),rr=ve(G(2447)),dr=ve(G(1532)),Wr=ve(G(5101)),pe=ve(G(5705)),be=ve(G(942)),le=ve(G(354)),ue=G(7636);function ve(_e){return _e&&_e.__esModule?_e:{default:_e}}Object.keys(ue).forEach(function(_e){"default"===_e||"__esModule"===_e||Object.prototype.hasOwnProperty.call(D,_e)||Object.defineProperty(U,_e,{enumerable:!0,get:function(){return ue[_e]}})})},3026:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){var me=x.toString().trim();return!isNaN(parseFloat(me))&&parseFloat(me)===Number(me)}},4194:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(he){return he&&he.__esModule?he:{default:he}}(G(8674));U.default=function(ne,Ae,ee){return(0,D.default)(Ae,ne)+(0,D.default)(ne,ee)===(0,D.default)(Ae,ee)}},3536:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(7029)),Z=x(G(3100));function x(ne){return ne&&ne.__esModule?ne:{default:ne}}U.default=function(Ae,ee){for(var X=!1,z=ee.length,$=-1,fe=z-1;++$<z;fe=$)((0,Z.default)(ee[$])<=(0,Z.default)(Ae)&&(0,Z.default)(Ae)<(0,Z.default)(ee[fe])||(0,Z.default)(ee[fe])<=(0,Z.default)(Ae)&&(0,Z.default)(Ae)<(0,Z.default)(ee[$]))&&(0,D.default)(Ae)<((0,D.default)(ee[fe])-(0,D.default)(ee[$]))*((0,Z.default)(Ae)-(0,Z.default)(ee[$]))/((0,Z.default)(ee[fe])-(0,Z.default)(ee[$]))+(0,D.default)(ee[$])&&(X=!X);return X}},2787:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(he){return he&&he.__esModule?he:{default:he}}(G(7504));U.default=function(ne,Ae,ee,X){return(0,D.default)(ne,Ae,ee)<X}},202:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(he){return he&&he.__esModule?he:{default:he}}(G(8674));U.default=function(ne,Ae,ee){return(0,D.default)(ne,Ae,.01)<ee}},4902:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(he){return D.sexagesimalPattern.test(he.toString().trim())}},7637:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=me(G(4695)),Z=me(G(6563)),x=me(G(266));function me(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}U.default=function(ee){var X=(0,D.default)(ee),z=X.latitude,$=X.longitude;if(Array.isArray(ee)&&ee.length>=2)return(0,x.default)(ee[0])&&(0,Z.default)(ee[1]);if(typeof z>"u"||typeof $>"u")return!1;var fe=ee[$],Re=ee[z];return!(typeof Re>"u"||typeof fe>"u"||!1===(0,Z.default)(Re)||!1===(0,x.default)(fe))}},6563:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=he(G(3026)),Z=he(G(4902)),x=he(G(1532)),me=G(7636);function he(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,D.default)(X)?!(parseFloat(X)>me.MAXLAT||X<me.MINLAT):!!(0,Z.default)(X)&&ee((0,x.default)(X))}},266:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=he(G(3026)),Z=he(G(4902)),x=he(G(1532)),me=G(7636);function he(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,D.default)(X)?!(parseFloat(X)>me.MAXLON||X<me.MINLON):!!(0,Z.default)(X)&&ee((0,x.default)(X))}},2447:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(he){return he&&he.__esModule?he:{default:he}}(G(8674));U.default=function(ne,Ae){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default;return ee="function"==typeof ee?ee:D.default,Ae.slice().sort(function(X,z){return ee(ne,X)-ee(ne,z)})}},6522:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return x>1?1:x<-1?-1:x}},1532:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(he){var ne=new RegExp(D.sexagesimalPattern).exec(he.toString().trim());if(typeof ne>"u"||null===ne)throw new Error("Given value is not in sexagesimal format");var Ae=Number(ne[2])/60||0,ee=Number(ne[4])/3600||0,X=parseFloat(ne[1])+Ae+ee;return["S","W"].includes(ne[7])?-X:X}},5101:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ne(G(3026)),Z=ne(G(4902)),x=ne(G(1532)),me=ne(G(7637)),he=ne(G(4695));function ne(fe){return fe&&fe.__esModule?fe:{default:fe}}function Ae(fe,Re){var Ve=Object.keys(fe);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(fe);Re&&(nt=nt.filter(function(Ze){return Object.getOwnPropertyDescriptor(fe,Ze).enumerable})),Ve.push.apply(Ve,nt)}return Ve}function ee(fe){for(var Re=1;Re<arguments.length;Re++){var Ve=null!=arguments[Re]?arguments[Re]:{};Re%2?Ae(Object(Ve),!0).forEach(function(nt){X(fe,nt,Ve[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(fe,Object.getOwnPropertyDescriptors(Ve)):Ae(Object(Ve)).forEach(function(nt){Object.defineProperty(fe,nt,Object.getOwnPropertyDescriptor(Ve,nt))})}return fe}function X(fe,Re,Ve){return Re in fe?Object.defineProperty(fe,Re,{value:Ve,enumerable:!0,configurable:!0,writable:!0}):fe[Re]=Ve,fe}U.default=function fe(Re){if((0,D.default)(Re))return Number(Re);if((0,Z.default)(Re))return(0,x.default)(Re);if((0,me.default)(Re)){var Ve=(0,he.default)(Re);return Array.isArray(Re)?Re.map(function(nt,Ze){return[0,1].includes(Ze)?fe(nt):nt}):ee(ee(ee({},Re),Ve.latitude&&X({},Ve.latitude,fe(Re[Ve.latitude]))),Ve.longitude&&X({},Ve.longitude,fe(Re[Ve.longitude])))}return Array.isArray(Re)?Re.map(function(nt){return(0,me.default)(nt)?fe(nt):nt}):Re}},942:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return 180*x/Math.PI}},5705:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return x*Math.PI/180}},354:(vt,U)=>{function x(ee,X){(null==X||X>ee.length)&&(X=ee.length);for(var z=0,$=new Array(X);z<X;z++)$[z]=ee[z];return $}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(X){if(!X.startsWith("POLYGON"))throw new Error("Invalid wkt.");return X.slice(X.indexOf("(")+2,X.indexOf(")")).split(", ").map(function(fe){var Ve=function G(ee,X){return function he(ee){if(Array.isArray(ee))return ee}(ee)||function me(ee,X){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(ee)){var z=[],$=!0,fe=!1,Re=void 0;try{for(var nt,Ve=ee[Symbol.iterator]();!($=(nt=Ve.next()).done)&&(z.push(nt.value),!X||z.length!==X);$=!0);}catch(Ze){fe=!0,Re=Ze}finally{try{!$&&null!=Ve.return&&Ve.return()}finally{if(fe)throw Re}}return z}}(ee,X)||function Z(ee,X){if(ee){if("string"==typeof ee)return x(ee,X);var z=Object.prototype.toString.call(ee).slice(8,-1);if("Object"===z&&ee.constructor&&(z=ee.constructor.name),"Map"===z||"Set"===z)return Array.from(ee);if("Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return x(ee,X)}}(ee,X)||function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(fe.split(" "),2),Ze=Ve[1];return{longitude:parseFloat(Ve[0]),latitude:parseFloat(Ze)}})}},9574:(vt,U,G)=>{G.d(U,{A:()=>nt});var D=G(1401),Z=G(8779),x=G(1631),me=G(5398);class he{constructor(Je,et){this._delegate=Je,this.firebase=et,(0,x._addComponent)(Je,new Z.uA("app-compat",()=>this,"PUBLIC")),this.container=Je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this._delegate.automaticDataCollectionEnabled=Je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Je=>{this._delegate.checkDestroyed(),Je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(Je,et=x._DEFAULT_ENTRY_NAME){var qt;this._delegate.checkDestroyed();const Jt=this._delegate.container.getProvider(Je);return!Jt.isInitialized()&&"EXPLICIT"===(null===(qt=Jt.getComponent())||void 0===qt?void 0:qt.instantiationMode)&&Jt.initialize(),Jt.getImmediate({identifier:et})}_removeServiceInstance(Je,et=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Je).clearInstance(et)}_addComponent(Je){(0,x._addComponent)(this._delegate,Je)}_addOrOverwriteComponent(Je){(0,x._addOrOverwriteComponent)(this._delegate,Je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new D.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function X(){const Ze=function ee(Ze){const Je={},et={__esModule:!0,initializeApp:function At(wt,Ue={}){const ae=x.initializeApp(wt,Ue);if((0,D.gR)(Je,ae.name))return Je[ae.name];const it=new Ze(ae,et);return Je[ae.name]=it,it},app:Jt,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function Lt(wt){const Ue=wt.name,ae=Ue.replace("-compat","");if(x._registerComponent(wt)&&"PUBLIC"===wt.type){const it=(bt=Jt())=>{if("function"!=typeof bt[ae])throw Ae.create("invalid-app-argument",{appName:Ue});return bt[ae]()};void 0!==wt.serviceProps&&(0,D.zw)(it,wt.serviceProps),et[ae]=it,Ze.prototype[ae]=function(...bt){return this._getService.bind(this,Ue).apply(this,wt.multipleInstances?bt:[])}}return"PUBLIC"===wt.type?et[ae]:null},removeApp:function qt(wt){delete Je[wt]},useAsService:function _t(wt,Ue){return"serverAuth"===Ue?null:Ue},modularAPIs:x}};function Jt(wt){if(!(0,D.gR)(Je,wt=wt||x._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:wt});return Je[wt]}return et.default=et,Object.defineProperty(et,"apps",{get:function St(){return Object.keys(Je).map(wt=>Je[wt])}}),Jt.App=Ze,et}(he);return Ze.INTERNAL=Object.assign(Object.assign({},Ze.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function Je(et){(0,D.zw)(Ze,et)},createSubscribe:D.tD,ErrorFactory:D.FA,deepExtend:D.zw}),Ze}(),$=new me.Vy("@firebase/app-compat");try{const Ze=(0,D.mS)();if(void 0!==Ze.firebase){$.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Je=Ze.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&$.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const nt=z;!function Ve(Ze){(0,x.registerVersion)("@firebase/app-compat","0.2.43",Ze)}()},1631:(vt,U,G)=>{G.r(U),G.d(U,{FirebaseError:()=>me.g,SDK_VERSION:()=>Ii,_DEFAULT_ENTRY_NAME:()=>pe,_addComponent:()=>_e,_addOrOverwriteComponent:()=>lt,_apps:()=>le,_clearComponents:()=>Zr,_components:()=>ve,_getProvider:()=>Rn,_isFirebaseApp:()=>wn,_isFirebaseServerApp:()=>mt,_registerComponent:()=>Pt,_removeServiceInstance:()=>Ct,_serverApps:()=>ue,deleteApp:()=>_s,getApp:()=>ho,getApps:()=>ka,initializeApp:()=>kr,initializeServerApp:()=>ei,onLog:()=>ua,registerVersion:()=>fo,setLogLevel:()=>Gs});var D=G(467),Z=G(8779),x=G(5398),me=G(1401),he=G(6749);class ne{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(C=>{if(function Ae(Qe){const Se=Qe.getComponent();return"VERSION"===Se?.type}(C)){const E=C.getImmediate();return`${E.library}/${E.version}`}return null}).filter(C=>C).join(" ")}}const ee="@firebase/app",X="0.10.13",z=new x.Vy("@firebase/app"),$="@firebase/app-compat",fe="@firebase/analytics-compat",Re="@firebase/analytics",Ve="@firebase/app-check-compat",nt="@firebase/app-check",Ze="@firebase/auth",Je="@firebase/auth-compat",et="@firebase/database",qt="@firebase/data-connect",Jt="@firebase/database-compat",At="@firebase/functions",St="@firebase/functions-compat",Lt="@firebase/installations",_t="@firebase/installations-compat",wt="@firebase/messaging",Ue="@firebase/messaging-compat",ae="@firebase/performance",it="@firebase/performance-compat",bt="@firebase/remote-config",Ht="@firebase/remote-config-compat",Sn="@firebase/storage",xn="@firebase/storage-compat",Er="@firebase/firestore",Dn="@firebase/vertexai-preview",rr="@firebase/firestore-compat",dr="firebase",pe="[DEFAULT]",be={[ee]:"fire-core",[$]:"fire-core-compat",[Re]:"fire-analytics",[fe]:"fire-analytics-compat",[nt]:"fire-app-check",[Ve]:"fire-app-check-compat",[Ze]:"fire-auth",[Je]:"fire-auth-compat",[et]:"fire-rtdb",[qt]:"fire-data-connect",[Jt]:"fire-rtdb-compat",[At]:"fire-fn",[St]:"fire-fn-compat",[Lt]:"fire-iid",[_t]:"fire-iid-compat",[wt]:"fire-fcm",[Ue]:"fire-fcm-compat",[ae]:"fire-perf",[it]:"fire-perf-compat",[bt]:"fire-rc",[Ht]:"fire-rc-compat",[Sn]:"fire-gcs",[xn]:"fire-gcs-compat",[Er]:"fire-fst",[rr]:"fire-fst-compat",[Dn]:"fire-vertex","fire-js":"fire-js",[dr]:"fire-js-all"},le=new Map,ue=new Map,ve=new Map;function _e(Qe,Se){try{Qe.container.addComponent(Se)}catch(C){z.debug(`Component ${Se.name} failed to register with FirebaseApp ${Qe.name}`,C)}}function lt(Qe,Se){Qe.container.addOrOverwriteComponent(Se)}function Pt(Qe){const Se=Qe.name;if(ve.has(Se))return z.debug(`There were multiple attempts to register component ${Se}.`),!1;ve.set(Se,Qe);for(const C of le.values())_e(C,Qe);for(const C of ue.values())_e(C,Qe);return!0}function Rn(Qe,Se){const C=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return C&&C.triggerHeartbeat(),Qe.container.getProvider(Se)}function Ct(Qe,Se,C=pe){Rn(Qe,Se).clearInstance(C)}function wn(Qe){return void 0!==Qe.options}function mt(Qe){return void 0!==Qe.settings}function Zr(){ve.clear()}const nn=new me.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Nt{constructor(Se,C,E){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},C),this._name=C.name,this._automaticDataCollectionEnabled=C.automaticDataCollectionEnabled,this._container=E,this.container.addComponent(new Z.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}class Jr extends Nt{constructor(Se,C,E,S){const F=void 0!==C.automaticDataCollectionEnabled&&C.automaticDataCollectionEnabled,j={name:E,automaticDataCollectionEnabled:F};super(void 0!==Se.apiKey?Se:Se.options,j,S),this._serverConfig=Object.assign({automaticDataCollectionEnabled:F},C),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,C.releaseOnDeref=void 0,fo(ee,X,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Se){this.isDeleted||(this._refCount++,void 0!==Se&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Se,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){_s(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nn.create("server-app-deleted")}}const Ii="10.14.1";function kr(Qe,Se={}){let C=Qe;"object"!=typeof Se&&(Se={name:Se});const E=Object.assign({name:pe,automaticDataCollectionEnabled:!1},Se),S=E.name;if("string"!=typeof S||!S)throw nn.create("bad-app-name",{appName:String(S)});if(C||(C=(0,me.T9)()),!C)throw nn.create("no-options");const F=le.get(S);if(F){if((0,me.bD)(C,F.options)&&(0,me.bD)(E,F.config))return F;throw nn.create("duplicate-app",{appName:S})}const j=new Z.h1(S);for(const Fe of ve.values())j.addComponent(Fe);const ye=new Nt(C,E,j);return le.set(S,ye),ye}function ei(Qe,Se){if((0,me.Bd)()&&!(0,me.p7)())throw nn.create("invalid-server-app-environment");let C;void 0===Se.automaticDataCollectionEnabled&&(Se.automaticDataCollectionEnabled=!1),C=wn(Qe)?Qe.options:Qe;const E=Object.assign(Object.assign({},Se),C);if(void 0!==E.releaseOnDeref&&delete E.releaseOnDeref,void 0!==Se.releaseOnDeref&&typeof FinalizationRegistry>"u")throw nn.create("finalization-registry-not-supported",{});const F=""+(gt=JSON.stringify(E),[...gt].reduce((Be,gn)=>Math.imul(31,Be)+gn.charCodeAt(0)|0,0)),j=ue.get(F);var gt;if(j)return j.incRefCount(Se.releaseOnDeref),j;const ye=new Z.h1(F);for(const gt of ve.values())ye.addComponent(gt);const Fe=new Jr(C,Se,F,ye);return ue.set(F,Fe),Fe}function ho(Qe=pe){const Se=le.get(Qe);if(!Se&&Qe===pe&&(0,me.T9)())return kr();if(!Se)throw nn.create("no-app",{appName:Qe});return Se}function ka(){return Array.from(le.values())}function _s(Qe){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,D.A)(function*(Qe){let Se=!1;const C=Qe.name;le.has(C)?(Se=!0,le.delete(C)):ue.has(C)&&Qe.decRefCount()<=0&&(ue.delete(C),Se=!0),Se&&(yield Promise.all(Qe.container.getProviders().map(E=>E.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function fo(Qe,Se,C){var E;let S=null!==(E=be[Qe])&&void 0!==E?E:Qe;C&&(S+=`-${C}`);const F=S.match(/\s|\//),j=Se.match(/\s|\//);if(F||j){const ye=[`Unable to register library "${S}" with version "${Se}":`];return F&&ye.push(`library name "${S}" contains illegal characters (whitespace or "/")`),F&&j&&ye.push("and"),j&&ye.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void z.warn(ye.join(" "))}Pt(new Z.uA(`${S}-version`,()=>({library:S,version:Se}),"VERSION"))}function ua(Qe,Se){if(null!==Qe&&"function"!=typeof Qe)throw nn.create("invalid-log-argument");(0,x.Ey)(Qe,Se)}function Gs(Qe){(0,x.He)(Qe)}const ui="firebase-heartbeat-database",da=1,qs="firebase-heartbeat-store";let os=null;function Fo(){return os||(os=(0,he.P2)(ui,da,{upgrade:(Qe,Se)=>{if(0===Se)try{Qe.createObjectStore(qs)}catch(C){console.warn(C)}}}).catch(Qe=>{throw nn.create("idb-open",{originalErrorMessage:Qe.message})})),os}function Fn(){return(Fn=(0,D.A)(function*(Qe){try{const C=(yield Fo()).transaction(qs),E=yield C.objectStore(qs).get(pl(Qe));return yield C.done,E}catch(Se){if(Se instanceof me.g)z.warn(Se.message);else{const C=nn.create("idb-get",{originalErrorMessage:Se?.message});z.warn(C.message)}}})).apply(this,arguments)}function $i(Qe,Se){return vs.apply(this,arguments)}function vs(){return(vs=(0,D.A)(function*(Qe,Se){try{const E=(yield Fo()).transaction(qs,"readwrite");yield E.objectStore(qs).put(Se,pl(Qe)),yield E.done}catch(C){if(C instanceof me.g)z.warn(C.message);else{const E=nn.create("idb-set",{originalErrorMessage:C?.message});z.warn(E.message)}}})).apply(this,arguments)}function pl(Qe){return`${Qe.name}!${Qe.options.appId}`}class po{constructor(Se){this.container=Se,this._heartbeatsCache=null;const C=this.container.getProvider("app").getImmediate();this._storage=new ha(C),this._heartbeatsCachePromise=this._storage.read().then(E=>(this._heartbeatsCache=E,E))}triggerHeartbeat(){var Se=this;return(0,D.A)(function*(){var C,E;try{const F=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),j=Ri();return null==(null===(C=Se._heartbeatsCache)||void 0===C?void 0:C.heartbeats)&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise,null==(null===(E=Se._heartbeatsCache)||void 0===E?void 0:E.heartbeats))||Se._heartbeatsCache.lastSentHeartbeatDate===j||Se._heartbeatsCache.heartbeats.some(ye=>ye.date===j)?void 0:(Se._heartbeatsCache.heartbeats.push({date:j,agent:F}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(ye=>{const Fe=new Date(ye.date).valueOf();return Date.now()-Fe<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache))}catch(S){z.warn(S)}})()}getHeartbeatsHeader(){var Se=this;return(0,D.A)(function*(){var C;try{if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null==(null===(C=Se._heartbeatsCache)||void 0===C?void 0:C.heartbeats)||0===Se._heartbeatsCache.heartbeats.length)return"";const E=Ri(),{heartbeatsToSend:S,unsentEntries:F}=function Na(Qe,Se=1024){const C=[];let E=Qe.slice();for(const S of Qe){const F=C.find(j=>j.agent===S.agent);if(F){if(F.dates.push(S.date),Ut(C)>Se){F.dates.pop();break}}else if(C.push({agent:S.agent,dates:[S.date]}),Ut(C)>Se){C.pop();break}E=E.slice(1)}return{heartbeatsToSend:C,unsentEntries:E}}(Se._heartbeatsCache.heartbeats),j=(0,me.Uj)(JSON.stringify({version:2,heartbeats:S}));return Se._heartbeatsCache.lastSentHeartbeatDate=E,F.length>0?(Se._heartbeatsCache.heartbeats=F,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),j}catch(E){return z.warn(E),""}})()}}function Ri(){return(new Date).toISOString().substring(0,10)}class ha{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,me.zW)()&&(0,me.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,D.A)(function*(){if(yield Se._canUseIndexedDBPromise){const E=yield function ys(Qe){return Fn.apply(this,arguments)}(Se.app);return E?.heartbeats?E:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Se){var C=this;return(0,D.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return $i(C.app,{lastSentHeartbeatDate:null!==(E=Se.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var C=this;return(0,D.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return $i(C.app,{lastSentHeartbeatDate:null!==(E=Se.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:[...F.heartbeats,...Se.heartbeats]})}})()}}function Ut(Qe){return(0,me.Uj)(JSON.stringify({version:2,heartbeats:Qe})).length}!function rc(Qe){Pt(new Z.uA("platform-logger",Se=>new ne(Se),"PRIVATE")),Pt(new Z.uA("heartbeat",Se=>new po(Se),"PRIVATE")),fo(ee,X,Qe),fo(ee,X,"esm2017"),fo("fire-js","")}("")},8779:(vt,U,G)=>{G.d(U,{Kq:()=>he,h1:()=>ee,uA:()=>x});var D=G(467),Z=G(1401);class x{constructor(z,$,fe){this.name=z,this.instanceFactory=$,this.type=fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const me="[DEFAULT]";class he{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const fe=new Z.cY;if(this.instancesDeferred.set($,fe),this.isInitialized($)||this.shouldAutoInitialize())try{const Re=this.getOrInitializeService({instanceIdentifier:$});Re&&fe.resolve(Re)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const fe=this.normalizeInstanceIdentifier(z?.identifier),Re=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(fe)&&!this.shouldAutoInitialize()){if(Re)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:fe})}catch(Ve){if(Re)return null;throw Ve}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function Ae(X){return"EAGER"===X.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:me})}catch{}for(const[$,fe]of this.instancesDeferred.entries()){const Re=this.normalizeInstanceIdentifier($);try{const Ve=this.getOrInitializeService({instanceIdentifier:Re});fe.resolve(Ve)}catch{}}}}clearInstance(z=me){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,D.A)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(fe=>"INTERNAL"in fe).map(fe=>fe.INTERNAL.delete()),...$.filter(fe=>"_delete"in fe).map(fe=>fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=me){return this.instances.has(z)}getOptions(z=me){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,fe=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(fe))throw Error(`${this.name}(${fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Re=this.getOrInitializeService({instanceIdentifier:fe,options:$});for(const[Ve,nt]of this.instancesDeferred.entries())fe===this.normalizeInstanceIdentifier(Ve)&&nt.resolve(Re);return Re}onInit(z,$){var fe;const Re=this.normalizeInstanceIdentifier($),Ve=null!==(fe=this.onInitCallbacks.get(Re))&&void 0!==fe?fe:new Set;Ve.add(z),this.onInitCallbacks.set(Re,Ve);const nt=this.instances.get(Re);return nt&&z(nt,Re),()=>{Ve.delete(z)}}invokeOnInitCallbacks(z,$){const fe=this.onInitCallbacks.get($);if(fe)for(const Re of fe)try{Re(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let fe=this.instances.get(z);if(!fe&&this.component&&(fe=this.component.instanceFactory(this.container,{instanceIdentifier:(X=z,X===me?void 0:X),options:$}),this.instances.set(z,fe),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(fe,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,fe)}catch{}var X;return fe||null}normalizeInstanceIdentifier(z=me){return this.component?this.component.multipleInstances?z:me:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new he(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},5398:(vt,U,G)=>{G.d(U,{$b:()=>Z,Ey:()=>X,He:()=>ee,Vy:()=>Ae});const D=[];var Z=function(z){return z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",z}(Z||{});const x={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},me=Z.INFO,he={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},ne=(z,$,...fe)=>{if($<z.logLevel)return;const Re=(new Date).toISOString(),Ve=he[$];if(!Ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ve](`[${Re}]  ${z.name}:`,...fe)};class Ae{constructor($){this.name=$,this._logLevel=me,this._logHandler=ne,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Z))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?x[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...$),this._logHandler(this,Z.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...$),this._logHandler(this,Z.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...$),this._logHandler(this,Z.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...$),this._logHandler(this,Z.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...$),this._logHandler(this,Z.ERROR,...$)}}function ee(z){D.forEach($=>{$.setLogLevel(z)})}function X(z,$){for(const fe of D){let Re=null;$&&$.level&&(Re=x[$.level]),fe.userLogHandler=null===z?null:(Ve,nt,...Ze)=>{const Je=Ze.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");nt>=(Re??Ve.logLevel)&&z({level:Z[nt].toLowerCase(),message:Je,args:Ze,type:Ve.name})}}}},5046:(vt,U,G)=>{var D=G(467),Z=G(9574),x=G(443),me=G(1401),Ae=(G(1631),G(5398),G(8779));function ee(){return window}function $(){return $=(0,D.A)(function*(C,E,S){var F;const{BuildInfo:j}=ee();(0,x.au)(E.sessionId,"AuthEvent did not contain a session ID");const ye=yield function et(C){return qt.apply(this,arguments)}(E.sessionId),Fe={};return(0,x.av)()?Fe.ibi=j.packageName:(0,x.aw)()?Fe.apn=j.packageName:(0,x.ax)(C,"operation-not-supported-in-this-environment"),j.displayName&&(Fe.appDisplayName=j.displayName),Fe.sessionId=ye,(0,x.ay)(C,S,E.type,void 0,null!==(F=E.eventId)&&void 0!==F?F:void 0,Fe)}),$.apply(this,arguments)}function Re(){return(Re=(0,D.A)(function*(C){const{BuildInfo:E}=ee(),S={};(0,x.av)()?S.iosBundleId=E.packageName:(0,x.aw)()?S.androidPackageName=E.packageName:(0,x.ax)(C,"operation-not-supported-in-this-environment"),yield(0,x.az)(C,S)})).apply(this,arguments)}function Ze(){return(Ze=(0,D.A)(function*(C,E,S){const{cordova:F}=ee();let j=()=>{};try{yield new Promise((ye,Fe)=>{let gt=null;function Be(){var K;ye();const Yn=null===(K=F.plugins.browsertab)||void 0===K?void 0:K.close;"function"==typeof Yn&&Yn(),"function"==typeof S?.close&&S.close()}function gn(){gt||(gt=window.setTimeout(()=>{Fe((0,x.aB)(C,"redirect-cancelled-by-user"))},2e3))}function Ir(){"visible"===document?.visibilityState&&gn()}E.addPassiveListener(Be),document.addEventListener("resume",gn,!1),(0,x.aw)()&&document.addEventListener("visibilitychange",Ir,!1),j=()=>{E.removePassiveListener(Be),document.removeEventListener("resume",gn,!1),document.removeEventListener("visibilitychange",Ir,!1),gt&&window.clearTimeout(gt)}})}finally{j()}})).apply(this,arguments)}function qt(){return(qt=(0,D.A)(function*(C){const E=function Jt(C){if((0,x.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const E=new ArrayBuffer(C.length),S=new Uint8Array(E);for(let F=0;F<C.length;F++)S[F]=C.charCodeAt(F);return S}(C),S=yield crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(S)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class St extends x.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(E=>{this.resolveInitialized=E})}addPassiveListener(E){this.passiveListeners.add(E)}removePassiveListener(E){this.passiveListeners.delete(E)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(E){return this.resolveInitialized(),this.passiveListeners.forEach(S=>S(E)),super.onEvent(E)}initialized(){var E=this;return(0,D.A)(function*(){yield E.initPromise})()}}function wt(C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,D.A)(function*(C){const E=yield bt()._get(Ht(C));return E&&(yield bt()._remove(Ht(C))),E})).apply(this,arguments)}function it(){const C=[];for(let S=0;S<20;S++){const F=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(F))}return C.join("")}function bt(){return(0,x.aE)(x.b)}function Ht(C){return(0,x.aF)("authEvent",C.config.apiKey,C.name)}function Er(C){if(!C?.includes("?"))return{};const[E,...S]=C.split("?");return(0,me.I9)(S.join("?"))}const dr=class rr{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(E){var S=this;return(0,D.A)(function*(){const F=E._key();let j=S.eventManagers.get(F);return j||(j=new St(E),S.eventManagers.set(F,j),S.attachCallbackListeners(E,j)),j})()}_openPopup(E){(0,x.ax)(E,"operation-not-supported-in-this-environment")}_openRedirect(E,S,F,j){var ye=this;return(0,D.A)(function*(){!function Je(C){var E,S,F,j,ye,Fe,gt,Be,gn,Ir;const K=ee();(0,x.aC)("function"==typeof(null===(E=K?.universalLinks)||void 0===E?void 0:E.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.aC)(typeof(null===(S=K?.BuildInfo)||void 0===S?void 0:S.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.aC)("function"==typeof(null===(ye=null===(j=null===(F=K?.cordova)||void 0===F?void 0:F.plugins)||void 0===j?void 0:j.browsertab)||void 0===ye?void 0:ye.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(Be=null===(gt=null===(Fe=K?.cordova)||void 0===Fe?void 0:Fe.plugins)||void 0===gt?void 0:gt.browsertab)||void 0===Be?void 0:Be.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(Ir=null===(gn=K?.cordova)||void 0===gn?void 0:gn.InAppBrowser)||void 0===Ir?void 0:Ir.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(E);const Fe=yield ye._initialize(E);yield Fe.initialized(),Fe.resetRedirect(),(0,x.aI)(),yield ye._originValidation(E);const gt=function Lt(C,E,S=null){return{type:E,eventId:S,urlResponse:null,sessionId:it(),postBody:null,tenantId:C.tenantId,error:(0,x.aB)(C,"no-auth-event")}}(E,F,j);yield function _t(C,E){return bt()._set(Ht(C),E)}(E,gt);const Be=yield function z(C,E,S){return $.apply(this,arguments)}(E,gt,S),gn=yield function Ve(C){const{cordova:E}=ee();return new Promise(S=>{E.plugins.browsertab.isAvailable(F=>{let j=null;F?E.plugins.browsertab.openUrl(C):j=E.InAppBrowser.open(C,(0,x.aA)()?"_blank":"_system","location=yes"),S(j)})})}(Be);return function nt(C,E,S){return Ze.apply(this,arguments)}(E,Fe,gn)})()}_isIframeWebStorageSupported(E,S){throw new Error("Method not implemented.")}_originValidation(E){const S=E._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function fe(C){return Re.apply(this,arguments)}(E)),this.originValidationPromises[S]}attachCallbackListeners(E,S){const{universalLinks:F,handleOpenURL:j,BuildInfo:ye}=ee(),Fe=setTimeout((0,D.A)(function*(){yield wt(E),S.onEvent(Wr())}),500),gt=function(){var Ir=(0,D.A)(function*(K){clearTimeout(Fe);const Yn=yield wt(E);let Ks=null;Yn&&K?.url&&(Ks=function ae(C,E){var S,F;const j=function xn(C){const E=Er(C),S=E.link?decodeURIComponent(E.link):void 0,F=Er(S).link,j=E.deep_link_id?decodeURIComponent(E.deep_link_id):void 0;return Er(j).link||j||F||S||C}(E);if(j.includes("/__/auth/callback")){const ye=Er(j),Fe=ye.firebaseError?function Sn(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(ye.firebaseError)):null,gt=null===(F=null===(S=Fe?.code)||void 0===S?void 0:S.split("auth/"))||void 0===F?void 0:F[1],Be=gt?(0,x.aB)(gt):null;return Be?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:j,postBody:null}}return null}(Yn,K.url)),S.onEvent(Ks||Wr())});return function(Yn){return Ir.apply(this,arguments)}}();typeof F<"u"&&"function"==typeof F.subscribe&&F.subscribe(null,gt);const Be=j,gn=`${ye.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var Ir=(0,D.A)(function*(K){if(K.toLowerCase().startsWith(gn)&&gt({url:K}),"function"==typeof Be)try{Be(K)}catch(Yn){console.error(Yn)}});return function(K){return Ir.apply(this,arguments)}}()}};function Wr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aB)("no-auth-event")}}function ve(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function lt(C=(0,me.ZQ)()){return!("file:"!==ve()&&"ionic:"!==ve()&&"capacitor:"!==ve()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function mt(){try{const C=self.localStorage,E=x.aN();if(C)return C.setItem(E,"1"),C.removeItem(E),!function wn(C=(0,me.ZQ)()){return function Rn(){return(0,me.lT)()&&11===document?.documentMode}()||function Ct(C=(0,me.ZQ)()){return/Edge\/\d+/.test(C)}(C)}()||(0,me.zW)()}catch{return Zr()&&(0,me.zW)()}return!1}function Zr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tn(){return(function _e(){return"http:"===ve()||"https:"===ve()}()||(0,me.sr)()||lt())&&!function Pt(){return(0,me.lV)()||(0,me.Ll)()}()&&mt()&&!Zr()}function nn(){return lt()&&typeof document<"u"}function Jr(){return(Jr=(0,D.A)(function*(){return!!nn()&&new Promise(C=>{const E=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(E),C(!0)})})})).apply(this,arguments)}const kr={LOCAL:"local",NONE:"none",SESSION:"session"},ei=x.aC,ho="persistence";function _s(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,D.A)(function*(C){yield C._initializationPromise;const E=ua(),S=x.aF(ho,C.config.apiKey,C.name);E&&E.setItem(S,C._getPersistence())})).apply(this,arguments)}function ua(){var C;try{return(null===(C=function Ii(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const Gs=x.aC;class ui{constructor(){this.browserResolver=x.aE(x.k),this.cordovaResolver=x.aE(dr),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(E){var S=this;return(0,D.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._initialize(E)})()}_openPopup(E,S,F,j){var ye=this;return(0,D.A)(function*(){return yield ye.selectUnderlyingResolver(),ye.assertedUnderlyingResolver._openPopup(E,S,F,j)})()}_openRedirect(E,S,F,j){var ye=this;return(0,D.A)(function*(){return yield ye.selectUnderlyingResolver(),ye.assertedUnderlyingResolver._openRedirect(E,S,F,j)})()}_isIframeWebStorageSupported(E,S){this.assertedUnderlyingResolver._isIframeWebStorageSupported(E,S)}_originValidation(E){return this.assertedUnderlyingResolver._originValidation(E)}get _shouldInitProactively(){return nn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var E=this;return(0,D.A)(function*(){if(E.underlyingResolver)return;const S=yield function Nt(){return Jr.apply(this,arguments)}();E.underlyingResolver=S?E.cordovaResolver:E.browserResolver})()}}function da(C){return C.unwrap()}function os(C){return ys(C)}function ys(C){const{_tokenResponse:E}=C instanceof me.g?C.customData:C;if(!E)return null;if(!(C instanceof me.g)&&"temporaryProof"in E&&"phoneNumber"in E)return x.P.credentialFromResult(C);const S=E.providerId;if(!S||S===x.p.PASSWORD)return null;let F;switch(S){case x.p.GOOGLE:F=x.X;break;case x.p.FACEBOOK:F=x.W;break;case x.p.GITHUB:F=x.Y;break;case x.p.TWITTER:F=x.$;break;default:const{oauthIdToken:j,oauthAccessToken:ye,oauthTokenSecret:Fe,pendingToken:gt,nonce:Be}=E;return ye||Fe||j||gt?gt?S.startsWith("saml.")?x.aQ._create(S,gt):x.N._fromParams({providerId:S,signInMethod:S,pendingToken:gt,idToken:j,accessToken:ye}):new x.Z(S).credential({idToken:j,accessToken:ye,rawNonce:Be}):null}return C instanceof me.g?F.credentialFromError(C):F.credentialFromResult(C)}function Fn(C,E){return E.catch(S=>{throw S instanceof me.g&&function Fo(C,E){var S;const F=null===(S=E.customData)||void 0===S?void 0:S._tokenResponse;if("auth/multi-factor-auth-required"===E?.code)E.resolver=new pl(C,x.as(C,E));else if(F){const j=ys(E),ye=E;j&&(ye.credential=j,ye.tenantId=F.tenantId||void 0,ye.email=F.email||void 0,ye.phoneNumber=F.phoneNumber||void 0)}}(C,S),S}).then(S=>{const j=S.user;return{operationType:S.operationType,credential:os(S),additionalUserInfo:x.aq(S),user:di.getOrCreate(j)}})}function $i(C,E){return vs.apply(this,arguments)}function vs(){return(vs=(0,D.A)(function*(C,E){const S=yield E;return{verificationId:S.verificationId,confirm:F=>Fn(C,S.confirm(F))}})).apply(this,arguments)}class pl{constructor(E,S){this.resolver=S,this.auth=function qs(C){return C.wrapped()}(E)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(E){return Fn(da(this.auth),this.resolver.resolveSignIn(E))}}class di{constructor(E){this._delegate=E,this.multiFactor=x.at(E)}static getOrCreate(E){return di.USER_MAP.has(E)||di.USER_MAP.set(E,new di(E)),di.USER_MAP.get(E)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(E){return this._delegate.getIdTokenResult(E)}getIdToken(E){return this._delegate.getIdToken(E)}linkAndRetrieveDataWithCredential(E){return this.linkWithCredential(E)}linkWithCredential(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.a2(S._delegate,E))})()}linkWithPhoneNumber(E,S){var F=this;return(0,D.A)(function*(){return $i(F.auth,x.l(F._delegate,E,S))})()}linkWithPopup(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.d(S._delegate,E,ui))})()}linkWithRedirect(E){var S=this;return(0,D.A)(function*(){return yield _s(x.aJ(S.auth)),x.g(S._delegate,E,ui)})()}reauthenticateAndRetrieveDataWithCredential(E){return this.reauthenticateWithCredential(E)}reauthenticateWithCredential(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.a3(S._delegate,E))})()}reauthenticateWithPhoneNumber(E,S){return $i(this.auth,x.r(this._delegate,E,S))}reauthenticateWithPopup(E){return Fn(this.auth,x.e(this._delegate,E,ui))}reauthenticateWithRedirect(E){var S=this;return(0,D.A)(function*(){return yield _s(x.aJ(S.auth)),x.h(S._delegate,E,ui)})()}sendEmailVerification(E){return x.ag(this._delegate,E)}unlink(E){var S=this;return(0,D.A)(function*(){return yield x.ap(S._delegate,E),S})()}updateEmail(E){return x.al(this._delegate,E)}updatePassword(E){return x.am(this._delegate,E)}updatePhoneNumber(E){return x.u(this._delegate,E)}updateProfile(E){return x.ak(this._delegate,E)}verifyBeforeUpdateEmail(E,S){return x.ah(this._delegate,E,S)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}di.USER_MAP=new WeakMap;const bs=x.aC;let po=(()=>{class C{constructor(S,F){if(this.app=S,F.isInitialized())return this._delegate=F.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=S.options;bs(j,"invalid-api-key",{appName:S.name}),bs(j,"invalid-api-key",{appName:S.name});const ye=typeof window<"u"?ui:void 0;this._delegate=F.initialize({options:{persistence:Na(j,S.name),popupRedirectResolver:ye}}),this._delegate._updateErrorMap(x.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?di.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(S){this._delegate.languageCode=S}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(S){this._delegate.tenantId=S}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(S,F){x.K(this._delegate,S,F)}applyActionCode(S){return x.a7(this._delegate,S)}checkActionCode(S){return x.a8(this._delegate,S)}confirmPasswordReset(S,F){return x.a6(this._delegate,S,F)}createUserWithEmailAndPassword(S,F){var j=this;return(0,D.A)(function*(){return Fn(j._delegate,x.aa(j._delegate,S,F))})()}fetchProvidersForEmail(S){return this.fetchSignInMethodsForEmail(S)}fetchSignInMethodsForEmail(S){return x.af(this._delegate,S)}isSignInWithEmailLink(S){return x.ad(this._delegate,S)}getRedirectResult(){var S=this;return(0,D.A)(function*(){bs(tn(),S._delegate,"operation-not-supported-in-this-environment");const F=yield x.j(S._delegate,ui);return F?Fn(S._delegate,Promise.resolve(F)):{credential:null,user:null}})()}addFrameworkForLogging(S){!function pe(C,E){(0,x.aJ)(C)._logFramework(E)}(this._delegate,S)}onAuthStateChanged(S,F,j){const{next:ye,error:Fe,complete:gt}=Ri(S,F,j);return this._delegate.onAuthStateChanged(ye,Fe,gt)}onIdTokenChanged(S,F,j){const{next:ye,error:Fe,complete:gt}=Ri(S,F,j);return this._delegate.onIdTokenChanged(ye,Fe,gt)}sendSignInLinkToEmail(S,F){return x.ac(this._delegate,S,F)}sendPasswordResetEmail(S,F){return x.a5(this._delegate,S,F||void 0)}setPersistence(S){var F=this;return(0,D.A)(function*(){let j;switch(function ka(C,E){ei(Object.values(kr).includes(E),C,"invalid-persistence-type"),(0,me.lV)()?ei(E!==kr.SESSION,C,"unsupported-persistence-type"):(0,me.Ll)()?ei(E===kr.NONE,C,"unsupported-persistence-type"):Zr()?ei(E===kr.NONE||E===kr.LOCAL&&(0,me.zW)(),C,"unsupported-persistence-type"):ei(E===kr.NONE||mt(),C,"unsupported-persistence-type")}(F._delegate,S),S){case kr.SESSION:j=x.a;break;case kr.LOCAL:j=(yield x.aE(x.i)._isAvailable())?x.i:x.b;break;case kr.NONE:j=x.U;break;default:return x.ax("argument-error",{appName:F._delegate.name})}return F._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(S){return this.signInWithCredential(S)}signInAnonymously(){return Fn(this._delegate,x.a0(this._delegate))}signInWithCredential(S){return Fn(this._delegate,x.a1(this._delegate,S))}signInWithCustomToken(S){return Fn(this._delegate,x.a4(this._delegate,S))}signInWithEmailAndPassword(S,F){return Fn(this._delegate,x.ab(this._delegate,S,F))}signInWithEmailLink(S,F){return Fn(this._delegate,x.ae(this._delegate,S,F))}signInWithPhoneNumber(S,F){return $i(this._delegate,x.s(this._delegate,S,F))}signInWithPopup(S){var F=this;return(0,D.A)(function*(){return bs(tn(),F._delegate,"operation-not-supported-in-this-environment"),Fn(F._delegate,x.c(F._delegate,S,ui))})()}signInWithRedirect(S){var F=this;return(0,D.A)(function*(){return bs(tn(),F._delegate,"operation-not-supported-in-this-environment"),yield _s(F._delegate),x.f(F._delegate,S,ui)})()}updateCurrentUser(S){return this._delegate.updateCurrentUser(S)}verifyPasswordResetCode(S){return x.a9(this._delegate,S)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=kr,C})();function Ri(C,E,S){let F=C;"function"!=typeof C&&({next:F,error:E,complete:S}=C);const j=F;return{next:Fe=>j(Fe&&di.getOrCreate(Fe)),error:E,complete:S}}function Na(C,E){const S=function fo(C,E){const S=ua();if(!S)return[];const F=x.aF(ho,C,E);switch(S.getItem(F)){case kr.NONE:return[x.U];case kr.LOCAL:return[x.i,x.a];case kr.SESSION:return[x.a];default:return[]}}(C,E);if(typeof self<"u"&&!S.includes(x.i)&&S.push(x.i),typeof window<"u")for(const F of[x.b,x.a])S.includes(F)||S.push(F);return S.includes(x.U)||S.push(x.U),S}class ha{constructor(){this.providerId="phone",this._delegate=new x.P(da(Z.A.auth()))}static credential(E,S){return x.P.credential(E,S)}verifyPhoneNumber(E,S){return this._delegate.verifyPhoneNumber(E,S)}unwrap(){return this._delegate}}ha.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,ha.PROVIDER_ID=x.P.PROVIDER_ID;const Ut=x.aC;class rc{constructor(E,S,F=Z.A.app()){var j;Ut(null===(j=F.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:F.name}),this._delegate=new x.R(F.auth(),E,S),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Se(C){C.INTERNAL.registerComponent(new Ae.uA("auth-compat",E=>{const S=E.getProvider("app-compat").getImmediate(),F=E.getProvider("auth");return new po(S,F)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.V,FacebookAuthProvider:x.W,GithubAuthProvider:x.Y,GoogleAuthProvider:x.X,OAuthProvider:x.Z,SAMLAuthProvider:x._,PhoneAuthProvider:ha,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:rc,TwitterAuthProvider:x.$,Auth:po,AuthCredential:x.L,Error:me.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.14")}(Z.A)},6749:(vt,U,G)=>{G.d(U,{P2:()=>Jt});var D=G(467);const Z=(Ue,ae)=>ae.some(it=>Ue instanceof it);let x,me;const Ae=new WeakMap,ee=new WeakMap,X=new WeakMap,z=new WeakMap,$=new WeakMap;let Ve={get(Ue,ae,it){if(Ue instanceof IDBTransaction){if("done"===ae)return ee.get(Ue);if("objectStoreNames"===ae)return Ue.objectStoreNames||X.get(Ue);if("store"===ae)return it.objectStoreNames[1]?void 0:it.objectStore(it.objectStoreNames[0])}return et(Ue[ae])},set:(Ue,ae,it)=>(Ue[ae]=it,!0),has:(Ue,ae)=>Ue instanceof IDBTransaction&&("done"===ae||"store"===ae)||ae in Ue};function Je(Ue){return"function"==typeof Ue?function Ze(Ue){return Ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ue)?function(...ae){return Ue.apply(qt(this),ae),et(Ae.get(this))}:function(...ae){return et(Ue.apply(qt(this),ae))}:function(ae,...it){const bt=Ue.call(qt(this),ae,...it);return X.set(bt,ae.sort?ae.sort():[ae]),et(bt)}}(Ue):(Ue instanceof IDBTransaction&&function Re(Ue){if(ee.has(Ue))return;const ae=new Promise((it,bt)=>{const Ht=()=>{Ue.removeEventListener("complete",Sn),Ue.removeEventListener("error",xn),Ue.removeEventListener("abort",xn)},Sn=()=>{it(),Ht()},xn=()=>{bt(Ue.error||new DOMException("AbortError","AbortError")),Ht()};Ue.addEventListener("complete",Sn),Ue.addEventListener("error",xn),Ue.addEventListener("abort",xn)});ee.set(Ue,ae)}(Ue),Z(Ue,function he(){return x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ue,Ve):Ue)}function et(Ue){if(Ue instanceof IDBRequest)return function fe(Ue){const ae=new Promise((it,bt)=>{const Ht=()=>{Ue.removeEventListener("success",Sn),Ue.removeEventListener("error",xn)},Sn=()=>{it(et(Ue.result)),Ht()},xn=()=>{bt(Ue.error),Ht()};Ue.addEventListener("success",Sn),Ue.addEventListener("error",xn)});return ae.then(it=>{it instanceof IDBCursor&&Ae.set(it,Ue)}).catch(()=>{}),$.set(ae,Ue),ae}(Ue);if(z.has(Ue))return z.get(Ue);const ae=Je(Ue);return ae!==Ue&&(z.set(Ue,ae),$.set(ae,Ue)),ae}const qt=Ue=>$.get(Ue);function Jt(Ue,ae,{blocked:it,upgrade:bt,blocking:Ht,terminated:Sn}={}){const xn=indexedDB.open(Ue,ae),Er=et(xn);return bt&&xn.addEventListener("upgradeneeded",Dn=>{bt(et(xn.result),Dn.oldVersion,Dn.newVersion,et(xn.transaction),Dn)}),it&&xn.addEventListener("blocked",Dn=>it(Dn.oldVersion,Dn.newVersion,Dn)),Er.then(Dn=>{Sn&&Dn.addEventListener("close",()=>Sn()),Ht&&Dn.addEventListener("versionchange",rr=>Ht(rr.oldVersion,rr.newVersion,rr))}).catch(()=>{}),Er}const St=["get","getKey","getAll","getAllKeys","count"],Lt=["put","add","delete","clear"],_t=new Map;function wt(Ue,ae){if(!(Ue instanceof IDBDatabase)||ae in Ue||"string"!=typeof ae)return;if(_t.get(ae))return _t.get(ae);const it=ae.replace(/FromIndex$/,""),bt=ae!==it,Ht=Lt.includes(it);if(!(it in(bt?IDBIndex:IDBObjectStore).prototype)||!Ht&&!St.includes(it))return;const Sn=function(){var xn=(0,D.A)(function*(Er,...Dn){const rr=this.transaction(Er,Ht?"readwrite":"readonly");let dr=rr.store;return bt&&(dr=dr.index(Dn.shift())),(yield Promise.all([dr[it](...Dn),Ht&&rr.done]))[0]});return function(Dn){return xn.apply(this,arguments)}}();return _t.set(ae,Sn),Sn}!function nt(Ue){Ve=Ue(Ve)}(Ue=>({...Ue,get:(ae,it,bt)=>wt(ae,it)||Ue.get(ae,it,bt),has:(ae,it)=>!!wt(ae,it)||Ue.has(ae,it)}))},467:(vt,U,G)=>{function D(x,me,he,ne,Ae,ee,X){try{var z=x[ee](X),$=z.value}catch(fe){return void he(fe)}z.done?me($):Promise.resolve($).then(ne,Ae)}function Z(x){return function(){var me=this,he=arguments;return new Promise(function(ne,Ae){var ee=x.apply(me,he);function X($){D(ee,ne,Ae,X,z,"next",$)}function z($){D(ee,ne,Ae,X,z,"throw",$)}X(void 0)})}}G.d(U,{A:()=>Z})},1635:(vt,U,G)=>{function me(pe,be){var le={};for(var ue in pe)Object.prototype.hasOwnProperty.call(pe,ue)&&be.indexOf(ue)<0&&(le[ue]=pe[ue]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(ue=Object.getOwnPropertySymbols(pe);ve<ue.length;ve++)be.indexOf(ue[ve])<0&&Object.prototype.propertyIsEnumerable.call(pe,ue[ve])&&(le[ue[ve]]=pe[ue[ve]])}return le}function fe(pe,be,le,ue){return new(le||(le=Promise))(function(_e,lt){function Pt(wn){try{Ct(ue.next(wn))}catch(mt){lt(mt)}}function Rn(wn){try{Ct(ue.throw(wn))}catch(mt){lt(mt)}}function Ct(wn){wn.done?_e(wn.value):function ve(_e){return _e instanceof le?_e:new le(function(lt){lt(_e)})}(wn.value).then(Pt,Rn)}Ct((ue=ue.apply(pe,be||[])).next())})}function At(pe){return this instanceof At?(this.v=pe,this):new At(pe)}function St(pe,be,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,ue=le.apply(pe,be||[]),_e=[];return ve=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Pt("next"),Pt("throw"),Pt("return",function lt(tn){return function(nn){return Promise.resolve(nn).then(tn,mt)}}),ve[Symbol.asyncIterator]=function(){return this},ve;function Pt(tn,nn){ue[tn]&&(ve[tn]=function(Nt){return new Promise(function(Jr,Ii){_e.push([tn,Nt,Jr,Ii])>1||Rn(tn,Nt)})},nn&&(ve[tn]=nn(ve[tn])))}function Rn(tn,nn){try{!function Ct(tn){tn.value instanceof At?Promise.resolve(tn.value.v).then(wn,mt):Zr(_e[0][2],tn)}(ue[tn](nn))}catch(Nt){Zr(_e[0][3],Nt)}}function wn(tn){Rn("next",tn)}function mt(tn){Rn("throw",tn)}function Zr(tn,nn){tn(nn),_e.shift(),_e.length&&Rn(_e[0][0],_e[0][1])}}function _t(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,be=pe[Symbol.asyncIterator];return be?be.call(pe):(pe=function Ze(pe){var be="function"==typeof Symbol&&Symbol.iterator,le=be&&pe[be],ue=0;if(le)return le.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&ue>=pe.length&&(pe=void 0),{value:pe&&pe[ue++],done:!pe}}};throw new TypeError(be?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),le={},ue("next"),ue("throw"),ue("return"),le[Symbol.asyncIterator]=function(){return this},le);function ue(_e){le[_e]=pe[_e]&&function(lt){return new Promise(function(Pt,Rn){!function ve(_e,lt,Pt,Rn){Promise.resolve(Rn).then(function(Ct){_e({value:Ct,done:Pt})},lt)}(Pt,Rn,(lt=pe[_e](lt)).done,lt.value)})}}}G.d(U,{AQ:()=>St,N3:()=>At,Tt:()=>me,sH:()=>fe,xN:()=>_t}),"function"==typeof SuppressedError&&SuppressedError}},vt=>{vt(vt.s=9269)}]);