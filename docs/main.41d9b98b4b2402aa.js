"use strict";(self.webpackChunkfriendly_time=self.webpackChunkfriendly_time||[]).push([[792],{9269:(yt,U,G)=>{function D(n,e){return Object.is(n,e)}let Z=null,x=!1,he=1;const ce=Symbol("SIGNAL");function te(n){const e=Z;return Z=n,e}const z={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $(n){if(x)throw new Error("");if(null===Z)return;Z.consumerOnSignalRead(n);const e=Z.nextProducerIndex++;gt(Z),e<Z.producerNode.length&&Z.producerNode[e]!==n&&Ot(Z)&&At(Z.producerNode[e],Z.producerIndexOfThis[e]),Z.producerNode[e]!==n&&(Z.producerNode[e]=n,Z.producerIndexOfThis[e]=Ot(Z)?Tt(n,Z,e):0),Z.producerLastReadVersion[e]=n.version}function xe(n){if((!Ot(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==he)){if(!n.producerMustRecompute(n)&&!Gt(n))return n.dirty=!1,void(n.lastCleanEpoch=he);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=he}}function Fe(n){if(void 0===n.liveConsumerNode)return;const e=x;x=!0;try{for(const t of n.liveConsumerNode)t.dirty||Xe(t)}finally{x=e}}function tt(){return!1!==Z?.consumerAllowSignalWrites}function Xe(n){n.dirty=!0,Fe(n),n.consumerMarkedDirty?.(n)}function Je(n){return n&&(n.nextProducerIndex=0),te(n)}function et(n,e){if(te(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ot(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)At(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Gt(n){gt(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(xe(t),r!==t.version))return!0}return!1}function Jt(n){if(gt(n),Ot(n))for(let e=0;e<n.producerNode.length;e++)At(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Tt(n,e,t){if(Et(n),0===n.liveConsumerNode.length&&Ve(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Tt(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function At(n,e){if(Et(n),1===n.liveConsumerNode.length&&Ve(n))for(let r=0;r<n.producerNode.length;r++)At(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];gt(i),i.producerIndexOfThis[r]=e}}function Ot(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function gt(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Et(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Ve(n){return void 0!==n.producerNode}const it=Symbol("UNSET"),vt=Symbol("COMPUTING"),zt=Symbol("ERRORED"),Tn={...z,value:it,dirty:!0,error:null,equal:D,producerMustRecompute:n=>n.value===it||n.value===vt,producerRecomputeValue(n){if(n.value===vt)throw new Error("Detected cycle in computations.");const e=n.value;n.value=vt;const t=Je(n);let r;try{r=n.computation()}catch(i){r=zt,n.error=i}finally{et(n,t)}e!==it&&e!==zt&&r!==zt&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let Ir=function An(){throw new Error};function Sn(){Ir()}let fr=null;function se(n,e){tt()||Sn(),n.equal(n.value,e)||(n.value=e,function at(n){n.version++,function ue(){he++}(),Fe(n),fr?.()}(n))}const pe={...z,equal:D,value:void 0};const Mn=()=>{},It={...z,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Mn};function pt(n){return"function"==typeof n}function Zr(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const en=Zr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function tn(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class xt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(pt(r))try{r()}catch(s){e=s instanceof en?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Nr(s)}catch(o){e=e??[],o instanceof en?e=[...e,...o.errors]:e.push(o)}}if(e)throw new en(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Nr(e);else{if(e instanceof xt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&tn(t,e)}remove(e){const{_finalizers:t}=this;t&&tn(t,e),e instanceof xt&&e._removeParent(this)}}xt.EMPTY=(()=>{const n=new xt;return n.closed=!0,n})();const Jr=xt.EMPTY;function wi(n){return n instanceof xt||n&&"closed"in n&&pt(n.remove)&&pt(n.add)&&pt(n.unsubscribe)}function Nr(n){pt(n)?n():n.unsubscribe()}const ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},lo={setTimeout(n,e,...t){const{delegate:r}=lo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=lo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function La(n){lo.setTimeout(()=>{const{onUnhandledError:e}=ei;if(!e)throw n;e(n)})}function gs(){}const js=zs("C",void 0,void 0);function zs(n,e,t){return{kind:n,value:e,error:t}}let di=null;function ua(n){if(ei.useDeprecatedSynchronousErrorHandling){const e=!di;if(e&&(di={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=di;if(di=null,t)throw r}}else n()}class os extends xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wi(e)&&e.add(this)):this.destination=vs}static create(e,t,r){return new Hi(e,t,r)}next(e){this.isStopped?hi(function ca(n){return zs("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?hi(function co(n){return zs("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hi(js,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const No=Function.prototype.bind;function _s(n,e){return No.call(n,e)}class Fn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ys(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ys(r)}else ys(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ys(t)}}}class Hi extends os{constructor(e,t,r){let i;if(super(),pt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ei.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_s(e.next,s),error:e.error&&_s(e.error,s),complete:e.complete&&_s(e.complete,s)}):i=e}this.destination=new Fn(i)}}function ys(n){ei.useDeprecatedSynchronousErrorHandling?function Hs(n){ei.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=n)}(n):La(n)}function hi(n,e){const{onStoppedNotification:t}=ei;t&&lo.setTimeout(()=>t(n,e))}const vs={closed:!0,next:gs,error:function yl(n){throw n},complete:gs},uo="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ri(n){return n}function da(n){return 0===n.length?Ri:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Vt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Se(n){return n&&n instanceof os||function qe(n){return n&&pt(n.next)&&pt(n.error)&&pt(n.complete)}(n)&&wi(n)}(t)?t:new Hi(t,r,i);return ua(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=lc(r))((i,s)=>{const o=new Hi({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return da(t)(this)}toPromise(t){return new(t=lc(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function lc(n){var e;return null!==(e=n??ei.Promise)&&void 0!==e?e:Promise}const C=Zr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class n extends Vt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new S(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new C}next(t){ua(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ua(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ua(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Jr:(this.currentObservers=null,s.push(t),new xt(()=>{this.currentObservers=null,tn(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Vt;return t.source=this,t}}return n.create=(e,t)=>new S(e,t),n})();class S extends E{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Jr}}class F extends E{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function j(n){return pt(n?.lift)}function me(n){return e=>{if(j(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(n,e,t,r,i){return new mt(n,e,t,r,i)}class mt extends os{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Le(n,e){return me((t,r)=>{let i=0;t.subscribe(Ne(r,s=>{r.next(n.call(e,s,i++))}))})}const wr="https://g.co/ng/security#xss";class K extends Error{constructor(e,t){super(function Xn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ho(n){return{toString:n}.toString()}const mu="__parameters__";function _u(n,e,t){return ho(()=>{const r=function Pp(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(mu)?l[mu]:Object.defineProperty(l,mu,{value:[]})[mu];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const Kn=globalThis;function Ln(n){for(let e in n)if(n[e]===Ln)return e;throw Error("Could not find renamed property on target object.")}function Cr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ti(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ti).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function cc(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const py=Ln({__forward_ref__:Ln});function Qn(n){return n.__forward_ref__=Qn,n.toString=function(){return ti(this())},n}function St(n){return kp(n)?n():n}function kp(n){return"function"==typeof n&&n.hasOwnProperty(py)&&n.__forward_ref__===Qn}function ke(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ht(n){return{providers:n.providers||[],imports:n.imports||[]}}function yu(n){return Op(n,uc)||Op(n,$w)}function Op(n,e){return n.hasOwnProperty(e)?n[e]:null}function vu(n){return n&&(n.hasOwnProperty(ah)||n.hasOwnProperty(gy))?n[ah]:null}const uc=Ln({\u0275prov:Ln}),ah=Ln({\u0275inj:Ln}),$w=Ln({ngInjectableDef:Ln}),gy=Ln({ngInjectorDef:Ln});class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ke({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Oo(n){return n&&!!n.\u0275providers}const dc=Ln({\u0275cmp:Ln}),Ey=Ln({\u0275dir:Ln}),fo=Ln({\u0275pipe:Ln}),qw=Ln({\u0275mod:Ln}),Fo=Ln({\u0275fac:Ln}),ch=Ln({__NG_ELEMENT_ID__:Ln}),Vp=Ln({__NG_ENV_ID__:Ln});function kt(n){return"string"==typeof n?n:null==n?"":String(n)}function wy(n,e){throw new K(-201,!1)}var Bt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Bt||{});let Kw;function Bp(){return Kw}function Or(n){const e=Kw;return Kw=n,e}function hc(n,e,t){const r=yu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Bt.Optional?null:void 0!==e?e:void wy()}const uh={},Cy="__NG_DI_FLAG__",jp="ngTempTokenPath",wR=/\n/gm,Qw="__source";let fc;function fi(n){const e=fc;return fc=n,e}function Yw(n,e=Bt.Default){if(void 0===fc)throw new K(-203,!1);return null===fc?hc(n,void 0,e):fc.get(n,e&Bt.Optional?null:void 0,e)}function Re(n,e=Bt.Default){return(Bp()||Yw)(St(n),e)}function k(n,e=Bt.Default){return Re(n,dh(e))}function dh(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $p(n){const e=[];for(let t=0;t<n.length;t++){const r=St(n[t]);if(Array.isArray(r)){if(0===r.length)throw new K(900,!1);let i,s=Bt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Ay(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Re(i,s))}else e.push(Re(r))}return e}function hh(n,e){return n[Cy]=e,n.prototype[Cy]=e,n}function Ay(n){return n[Cy]}const Mi=hh(_u("Optional"),8),pc=hh(_u("SkipSelf"),4);function Ua(n,e){return n.hasOwnProperty(Fo)?n[Fo]:null}function mc(n,e){n.forEach(t=>Array.isArray(t)?mc(t,e):e(t))}function qp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pi(n,e,t){let r=vl(n,e);return r>=0?n[1|r]=t:(r=~r,function e0(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function ph(n,e){const t=vl(n,e);if(t>=0)return n[1|t]}function vl(n,e){return function Kp(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const po={},vn=[],mo=new ye(""),n0=new ye("",-1),mh=new ye("");class Qp{get(e,t=uh){if(t===uh){const r=new Error(`NullInjectorError: No provider for ${ti(e)}!`);throw r.name="NullInjectorError",r}return t}}var wu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(wu||{}),go=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(go||{}),ha=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ha||{});function CR(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function gh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Yp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function r0(n){return 3===n||4===n||6===n}function Yp(n){return 64===n.charCodeAt(0)}function _h(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||s0(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function s0(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Xp="ng-template";function TR(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==CR(e[i+1].toLowerCase(),t,0))return!0}else if(My(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function My(n){return 4===n.type&&n.value!==Xp}function Py(n,e,t){return e===(4!==n.type||t?n.value:Xp)}function AR(n,e,t){let r=4;const i=n.attrs,s=null!==i?function ky(n){for(let e=0;e<n.length;e++)if(r0(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Py(n,l,t)||""===l&&1===e.length){if(Ws(r))return!1;o=!0}}else if(8&r){if(null===i||!TR(n,i,l,t)){if(Ws(r))return!1;o=!0}}else{const c=e[++a],u=SR(l,i,My(n),t);if(-1===u){if(Ws(r))return!1;o=!0;continue}if(""!==c){let h;if(h=u>s?"":i[u+1].toLowerCase(),2&r&&c!==h){if(Ws(r))return!1;o=!0}}}}else{if(!o&&!Ws(r)&&!Ws(l))return!1;if(o&&Ws(l))continue;o=!1,r=l|1&r}}return Ws(r)||o}function Ws(n){return!(1&n)}function SR(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function DR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Zp(n,e,t=!1){for(let r=0;r<e.length;r++)if(AR(n,e[r],t))return!0;return!1}function Ny(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function o0(n,e){return n?":not("+e.trim()+")":e}function Oy(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ws(o)&&(e+=o0(s,i),i=""),r=o,s=s||!Ws(r);t++}return""!==i&&(e+=o0(s,i)),e}function Vn(n){return ho(()=>{const e=PR(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||go.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""};kR(t);const r=n.dependencies;return t.directiveDefs=Ly(r,!1),t.pipeDefs=Ly(r,!0),t.id=function NR(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function MR(n){return Yt(n)||pi(n)}function a0(n){return null!==n}function Ut(n){return ho(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function l0(n,e){if(null==n)return po;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=ha.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==ha.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Ze(n){return ho(()=>{const e=PR(n);return kR(e),e})}function ki(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Yt(n){return n[dc]||null}function pi(n){return n[Ey]||null}function Ni(n){return n[fo]||null}function Wi(n,e){const t=n[qw]||null;if(!t&&!0===e)throw new Error(`Type ${ti(n)} does not have '\u0275mod' property.`);return t}function PR(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||po,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:l0(n.inputs,e),outputs:l0(n.outputs),debugInfo:null}}function kR(n){n.features?.forEach(e=>e(n))}function Ly(n,e){if(!n)return null;const t=e?Ni:MR;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(a0)}function El(n){return{\u0275providers:n}}function OR(...n){return{\u0275providers:c0(0,n),\u0275fromNgModule:!0}}function c0(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return mc(e,o=>{const a=o;By(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&FR(i,s),t}function FR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];u0(i,s=>{e(s,r)})}}function By(n,e,t,r){if(!(n=St(n)))return!1;let i=null,s=vu(n);const o=!s&&Yt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=vu(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)By(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{mc(s.imports,u=>{By(u,e,t,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&FR(c,e)}if(!a){const c=Ua(i)||(()=>new i);e({provide:i,useFactory:c,deps:vn},i),e({provide:mh,useValue:i,multi:!0},i),e({provide:mo,useValue:()=>Re(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;u0(l,u=>{e(u,c)})}}}return i!==n&&void 0!==n.providers}function u0(n,e){for(let t of n)Oo(t)&&(t=t.\u0275providers),Array.isArray(t)?u0(t,e):e(t)}const Uy=Ln({provide:String,useValue:Ln});function ja(n){return null!==n&&"object"==typeof n&&Uy in n}function gc(n){return"function"==typeof n}const h0=new ye(""),em={},VR={};let yh;function Cu(){return void 0===yh&&(yh=new Qp),yh}class Oi{}class za extends Oi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zy(e,o=>this.processProvider(o)),this.records.set(n0,_c(void 0,this)),i.has("environment")&&this.records.set(Oi,_c(void 0,this));const s=this.records.get(h0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(mh,vn,Bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=te(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=fi(this),r=Or(void 0);try{return e()}finally{fi(t),Or(r)}}get(e,t=uh,r=Bt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Vp))return e[Vp](this);r=dh(r);const s=fi(this),o=Or(void 0);try{if(!(r&Bt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function zR(n){return"function"==typeof n||"object"==typeof n&&n instanceof ye}(e)&&yu(e);l=c&&this.injectableDefInScope(c)?_c(tm(e),em):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&Bt.Self?Cu():this.parent).get(e,t=r&Bt.Optional&&t===uh?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[jp]=a[jp]||[]).unshift(ti(e)),s)throw a;return function Sy(n,e,t,r){const i=n[jp];throw e[Qw]&&i.unshift(e[Qw]),n.message=function xy(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ti(e);if(Array.isArray(e))i=e.map(ti).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ti(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(wR,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[jp]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Or(o),fi(s)}}resolveInjectorInitializers(){const e=te(null),t=fi(this),r=Or(void 0);try{const s=this.get(mo,vn,Bt.Self);for(const o of s)o()}finally{fi(t),Or(r),te(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ti(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){let t=gc(e=St(e))?e:St(e&&e.provide);const r=function UR(n){return ja(n)?_c(void 0,n.useValue):_c(jR(n),em)}(e);if(!gc(e)&&!0===e.multi){let i=this.records.get(t);i||(i=_c(void 0,em,!0),i.factory=()=>$p(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=te(null);try{return t.value===em&&(t.value=VR,t.value=t.factory()),"object"==typeof t.value&&t.value&&function jy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=St(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function tm(n){const e=yu(n),t=null!==e?e.factory:Ua(n);if(null!==t)return t;if(n instanceof ye)throw new K(204,!1);if(n instanceof Function)return function BR(n){if(n.length>0)throw new K(204,!1);const t=function bR(n){return n&&(n[uc]||n[$w])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new K(204,!1)}function jR(n,e,t){let r;if(gc(n)){const i=St(n);return Ua(i)||tm(i)}if(ja(n))r=()=>St(n.useValue);else if(function d0(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...$p(n.deps||[]));else if(function Jp(n){return!(!n||!n.useExisting)}(n))r=()=>Re(St(n.useExisting));else{const i=St(n&&(n.useClass||n.provide));if(!function t4(n){return!!n.deps}(n))return Ua(i)||tm(i);r=()=>new i(...$p(n.deps))}return r}function _c(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zy(n,e){for(const t of n)Array.isArray(t)?zy(t,e):t&&Oo(t)?zy(t.\u0275providers,e):e(t)}function Is(n,e){n instanceof za&&n.assertNotDestroyed();const r=fi(n),i=Or(void 0);try{return e()}finally{fi(r),Or(i)}}function f0(){return void 0!==Bp()||null!=function Ty(){return fc}()}function Fr(n){if(!f0())throw new K(-203,!1)}const Zn=0,Ue=1,dt=2,Gr=3,Lo=4,Fi=5,ws=6,yc=7,Jn=8,ni=9,fa=10,Dt=11,Ih=12,wh=13,Su=14,pr=15,vc=16,Il=17,Ha=18,xu=19,g0=20,wl=21,Ch=22,_o=23,ct=25,$y=1,pa=7,Ru=9,Tr=10;var im=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(im||{});function qr(n){return Array.isArray(n)&&"object"==typeof n[$y]}function mi(n){return Array.isArray(n)&&!0===n[$y]}function Th(n){return!!(4&n.flags)}function Ec(n){return n.componentOffset>-1}function Mu(n){return!(1&~n.flags)}function Vo(n){return!!n.template}function Bo(n){return!!(512&n[dt])}class w0{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function C0(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function as(){return um}function um(n){return n.type.prototype.ngOnChanges&&(n.setInput=XR),YR}function YR(){const n=T0(this),e=n?.current;if(e){const t=n.previous;if(t===po)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function XR(n,e,t,r,i){const s=this.declaredInputs[r],o=T0(n)||function ZR(n,e){return n[dm]=e}(n,{previous:po,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new w0(c&&c.currentValue,t,l===po),C0(n,e,i,t)}as.ngInherit=!0;const dm="__ngSimpleChanges__";function T0(n){return n[dm]||null}const yo=function(n,e,t){},hm="svg";function fn(n){for(;Array.isArray(n);)n=n[Zn];return n}function xh(n,e){return fn(e[n])}function Gi(n,e){return fn(e[n.index])}function Pu(n,e){return n.data[e]}function Ic(n,e){return n[e]}function Cs(n,e){const t=e[n];return qr(t)?t:t[Zn]}function Ky(n){return!(128&~n[dt])}function vo(n,e){return null==e?null:n[e]}function pm(n){n[Il]=0}function S0(n){1024&n[dt]||(n[dt]|=1024,Ky(n)&&wc(n))}function Dh(n){return!!(9216&n[dt]||n[_o]?.dirty)}function Qy(n){n[fa].changeDetectionScheduler?.notify(8),64&n[dt]&&(n[dt]|=1024),Dh(n)&&wc(n)}function wc(n){n[fa].changeDetectionScheduler?.notify(0);let e=$a(n);for(;null!==e&&!(8192&e[dt])&&(e[dt]|=8192,Ky(e));)e=$a(e)}function mm(n,e){if(!(256&~n[dt]))throw new K(911,!1);null===n[wl]&&(n[wl]=[]),n[wl].push(e)}function $a(n){const e=n[Gr];return mi(e)?e[Gr]:e}const Rt={lFrame:fe(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let D0=!1;function R0(){return Rt.bindingsEnabled}function Cc(){return null!==Rt.skipHydrationRootTNode}function we(){return Rt.lFrame.lView}function qt(){return Rt.lFrame.tView}function xn(n){return Rt.lFrame.contextLView=n,n[Jn]}function Dn(n){return Rt.lFrame.contextLView=null,n}function Bn(){let n=_m();for(;null!==n&&64===n.type;)n=n.parent;return n}function _m(){return Rt.lFrame.currentTNode}function bo(n,e){const t=Rt.lFrame;t.currentTNode=n,t.isParent=e}function ym(){return Rt.lFrame.isParent}function Mh(){Rt.lFrame.isParent=!1}function Ph(){return D0}function ev(n){D0=n}function qi(){const n=Rt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Uo(){return Rt.lFrame.bindingIndex++}function Ga(n){const e=Rt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function lM(n,e){const t=Rt.lFrame;t.bindingIndex=t.bindingRootIndex=n,nv(e)}function nv(n){Rt.lFrame.currentDirectiveIndex=n}function d(){return Rt.lFrame.currentQueryIndex}function f(n){Rt.lFrame.currentQueryIndex=n}function _(n){const e=n[Ue];return 2===e.type?e.declTNode:1===e.type?n[Fi]:null}function w(n,e,t){if(t&Bt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Bt.Host||(i=_(s),null===i||(s=s[Su],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Rt.lFrame=Y();return r.currentTNode=e,r.lView=n,!0}function R(n){const e=Y(),t=n[Ue];Rt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Y(){const n=Rt.lFrame,e=null===n?null:n.child;return null===e?fe(n):e}function fe(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Me(){const n=Rt.lFrame;return Rt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const nt=Me;function ut(){const n=Me();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pn(){return Rt.lFrame.selectedIndex}function Ts(n){Rt.lFrame.selectedIndex=n}function Un(){const n=Rt.lFrame;return Pu(n.tView,n.selectedIndex)}function jo(){Rt.lFrame.currentNamespace=hm}function kh(){!function O0(){Rt.lFrame.currentNamespace=null}()}let iv=!0;function ku(){return iv}function Eo(n){iv=n}function bm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Nu(n,e,t){d4(n,e,3,t)}function Em(n,e,t,r){(3&n[dt])===t&&d4(n,e,t,r)}function uM(n,e){let t=n[dt];(3&t)===e&&(t&=16383,t+=1,n[dt]=t)}function d4(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Il]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Il]+=65536),(a<s||-1==s)&&(hle(n,t,e,l),n[Il]=(4294901760&n[Il])+l+2),l++}function h4(n,e){yo(4,n,e);const t=te(null);try{e.call(n)}finally{te(t),yo(5,n,e)}}function hle(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[dt]>>14<n[Il]>>16&&(3&n[dt])===e&&(n[dt]+=16384,h4(a,s)):h4(a,s)}const Im=-1;class sv{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const hM={};class Nh{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=dh(r);const i=this.injector.get(e,hM,r);return i!==hM||t===hM?i:this.parentInjector.get(e,t,r)}}function fM(n){return n!==Im}function ov(n){return 32767&n}function av(n,e){let t=function _le(n){return n>>16}(n),r=e;for(;t>0;)r=r[Su],t--;return r}let pM=!0;function L0(n){const e=pM;return pM=n,e}const p4=255,m4=5;let vle=0;const Cl={};function V0(n,e){const t=g4(n,e);if(-1!==t)return t;const r=e[Ue];r.firstCreatePass&&(n.injectorIndex=e.length,mM(r.data,n),mM(e,null),mM(r.blueprint,null));const i=B0(n,e),s=n.injectorIndex;if(fM(i)){const o=ov(i),a=av(i,e),l=a[Ue].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function mM(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g4(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function B0(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=w4(i),null===r)return Im;if(t++,i=i[Su],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Im}function gM(n,e,t){!function ble(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ch)&&(r=t[ch]),null==r&&(r=t[ch]=vle++);const i=r&p4;e.data[n+(i>>m4)]|=1<<i}(n,e,t)}function _4(n,e,t){if(t&Bt.Optional||void 0!==n)return n;wy()}function y4(n,e,t,r){if(t&Bt.Optional&&void 0===r&&(r=null),!(t&(Bt.Self|Bt.Host))){const i=n[ni],s=Or(void 0);try{return i?i.get(e,r,t&Bt.Optional):hc(e,r,t&Bt.Optional)}finally{Or(s)}}return _4(r,0,t)}function v4(n,e,t,r=Bt.Default,i){if(null!==n){if(2048&e[dt]&&!(r&Bt.Self)){const o=function Tle(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[dt]&&!(512&o[dt]);){const a=b4(s,o,t,r|Bt.Self,Cl);if(a!==Cl)return a;let l=s.parent;if(!l){const c=o[g0];if(c){const u=c.get(t,Cl,r);if(u!==Cl)return u}l=w4(o),o=o[Su]}s=l}return i}(n,e,t,r,Cl);if(o!==Cl)return o}const s=b4(n,e,t,r,Cl);if(s!==Cl)return s}return y4(e,t,r,i)}function b4(n,e,t,r,i){const s=function wle(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ch)?n[ch]:void 0;return"number"==typeof e?e>=0?e&p4:Cle:e}(t);if("function"==typeof s){if(!w(e,n,r))return r&Bt.Host?_4(i,0,r):y4(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Bt.Optional)return o;wy()}finally{nt()}}else if("number"==typeof s){let o=null,a=g4(n,e),l=Im,c=r&Bt.Host?e[pr][Fi]:null;for((-1===a||r&Bt.SkipSelf)&&(l=-1===a?B0(n,e):e[a+8],l!==Im&&I4(r,!1)?(o=e[Ue],a=ov(l),e=av(l,e)):a=-1);-1!==a;){const u=e[Ue];if(E4(s,a,u.data)){const h=Ile(a,e,t,o,r,c);if(h!==Cl)return h}l=e[a+8],l!==Im&&I4(r,e[Ue].data[a+8]===c)&&E4(s,a,e)?(o=u,a=ov(l),e=av(l,e)):a=-1}}return i}function Ile(n,e,t,r,i,s){const o=e[Ue],a=o.data[n+8],u=U0(a,o,t,null==r?Ec(a)&&pM:r!=o&&!!(3&a.type),i&Bt.Host&&s===a);return null!==u?Oh(e,o,u,a):Cl}function U0(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,m=i?a+u:n.directiveEnd;for(let y=r?a:a+u;y<m;y++){const b=o[y];if(y<l&&t===b||y>=l&&b.type===t)return y}if(i){const y=o[l];if(y&&Vo(y)&&y.type===t)return l}return null}function Oh(n,e,t,r){let i=n[t];const s=e.data;if(function fle(n){return n instanceof sv}(i)){const o=i;o.resolving&&function Iy(n,e){throw e&&e.join(" > "),new K(-200,n)}(function yn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():kt(n)}(s[t]));const a=L0(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Or(o.injectImpl):null;w(n,r,Bt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function F0(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=um(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Or(c),L0(a),o.resolving=!1,nt()}}return i}function E4(n,e,t){return!!(t[e+(n>>m4)]&1<<n)}function I4(n,e){return!(n&Bt.Self||n&Bt.Host&&e)}class Li{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return v4(this._tNode,this._lView,e,dh(r),t)}}function Cle(){return new Li(Bn(),we())}function Kr(n){return ho(()=>{const e=n.prototype.constructor,t=e[Fo]||_M(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Fo]||_M(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function _M(n){return kp(n)?()=>{const e=_M(St(n));return e&&e()}:Ua(n)}function w4(n){const e=n[Ue],t=e.type;return 2===t?e.declTNode:1===t?n[Fi]:null}function x4(n,e=null,t=null,r){const i=D4(n,e,t,r);return i.resolveInjectorInitializers(),i}function D4(n,e=null,t=null,r,i=new Set){const s=[t||vn,OR(n)];return r=r||("object"==typeof n?void 0:ti(n)),new za(s,e||Cu(),r||null,i)}class Rn{static{this.THROW_IF_NOT_FOUND=uh}static{this.NULL=new Qp}static create(e,t){if(Array.isArray(e))return x4({name:""},t,e,"");{const r=e.name??"";return x4({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ke({token:Rn,providedIn:"any",factory:()=>Re(n0)})}static{this.__NG_ELEMENT_ID__=-1}}class kle{constructor(e){this.attributeName=e,this.__NG_ELEMENT_ID__=()=>function lv(n){return function Ele(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(r0(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Bn(),n)}(this.attributeName)}toString(){return`HostAttributeToken ${this.attributeName}`}}new ye("").__NG_ELEMENT_ID__=n=>{const e=Bn();if(null===e)throw new K(204,!1);if(2&e.type)return e.value;if(n&Bt.Optional)return null;throw new K(204,!1)};function vM(n){return n.ngOriginalError}const M4=!0;let cv=(()=>{class n{static{this.__NG_ELEMENT_ID__=Fle}static{this.__NG_ENV_ID__=t=>t}}return n})();class Ole extends cv{constructor(e){super(),this._lView=e}onDestroy(e){return mm(this._lView,e),()=>function Yy(n,e){if(null===n[wl])return;const t=n[wl].indexOf(e);-1!==t&&n[wl].splice(t,1)}(this._lView,e)}}function Fle(){return new Ole(we())}let Tc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}}return n})();const dn=class Lle extends E{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,f0()&&(this.destroyRef=k(cv,{optional:!0})??void 0,this.pendingTasks=k(Tc,{optional:!0})??void 0)}emit(e){const t=te(null);try{super.next(e)}finally{te(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof xt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function z0(...n){}function P4(n){let e,t;function r(){n=z0;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function k4(n){return queueMicrotask(()=>n()),()=>{n=z0}}const bM="isAngularZone",H0=bM+"_ID";let Vle=0;class _t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dn(!1),this.onMicrotaskEmpty=new dn(!1),this.onStable=new dn(!1),this.onError=new dn(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=M4}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function jle(n){const e=()=>{!function Ule(n){function e(){P4(()=>{n.callbackScheduled=!1,IM(n),n.isCheckStableRunning=!0,EM(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),IM(n))}(n)},t=Vle++;n._inner=n._inner.fork({name:"angular",properties:{[bM]:!0,[H0]:t,[H0+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(function zle(n){return F4(n,"__ignore_ng_zone__")}(l))return r.invokeTask(s,o,a,l);try{return N4(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),O4(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return N4(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function Hle(n){return F4(n,"__scheduler_tick__")}(l)&&e(),O4(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,IM(n),EM(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(bM)}static assertInAngularZone(){if(!_t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(_t.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ble,z0,z0);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Ble={};function EM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function IM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function N4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function O4(n){n._nesting--,EM(n)}class wM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dn,this.onMicrotaskEmpty=new dn,this.onStable=new dn,this.onError=new dn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function F4(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class zo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vM(e);for(;t&&vM(t);)t=vM(t);return t||null}}const Wle=new ye("",{providedIn:"root",factory:()=>{const n=k(_t),e=k(zo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Gle(){return Tm(Bn(),we())}function Tm(n,e){return new jn(Gi(n,e))}let jn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Gle}}return n})();function V4(n){return n instanceof jn?n.nativeElement:n}function qle(){return this._results[Symbol.iterator]()}class Fh{get changes(){return this._changes??=new dn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Fh.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=qle)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function $i(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Gp(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function dv(n){return!(128&~n.flags)}const TM=new Map;let Qle=0;function AM(n){TM.delete(n[xu])}const $0="__ngContext__";function As(n,e){qr(e)?(n[$0]=e[xu],function Xle(n){TM.set(n[xu],n)}(e)):n[$0]=e}function K4(n){return Y4(n[Ih])}function Q4(n){return Y4(n[Lo])}function Y4(n){for(;null!==n&&!mi(n);)n=n[Lo];return n}let xM;const Lh=new ye("",{providedIn:"root",factory:()=>pce}),pce="ng",i$=new ye(""),Gs=new ye("",{providedIn:"platform",factory:()=>"unknown"}),Tl=new ye(""),DM=new ye("",{providedIn:"root",factory:()=>function Ou(){if(void 0!==xM)return xM;if(typeof document<"u")return document;throw new K(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let s$=()=>null;function FM(n,e,t=!1){return s$(n,e,t)}const f$=new ye("",{providedIn:"root",factory:()=>!1});let Z0;function Dm(n){return function jM(){if(void 0===Z0&&(Z0=null,Kn.trustedTypes))try{Z0=Kn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Z0}()?.createHTML(n)||n}class Bh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wr})`}}class xce extends Bh{getTypeName(){return"HTML"}}class Dce extends Bh{getTypeName(){return"Style"}}class Rce extends Bh{getTypeName(){return"Script"}}class Mce extends Bh{getTypeName(){return"URL"}}class Pce extends Bh{getTypeName(){return"ResourceURL"}}function Ho(n){return n instanceof Bh?n.changingThisBreaksApplicationSecurity:n}function Al(n,e){const t=function kce(n){return n instanceof Bh&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wr})`)}return t===e}class Bce{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Dm(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}}class Uce{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Dm(e),t}}const zce=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function eC(n){return(n=String(n)).match(zce)?n:"unsafe:"+n}function Ac(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function yv(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const b$=Ac("area,br,col,hr,img,wbr"),E$=Ac("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),I$=Ac("rp,rt"),HM=yv(b$,yv(E$,Ac("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yv(I$,Ac("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yv(I$,E$)),$M=Ac("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),w$=yv($M,Ac("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ac("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hce=Ac("script,style,template");class $ce{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=qce(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=Gce(t);if(s){t=s;break}t=i.pop()}return this.buf.join("")}startElement(e){const t=C$(e).toLowerCase();if(!HM.hasOwnProperty(t))return this.sanitizedSomething=!0,!Hce.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!w$.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;$M[a]&&(l=eC(l)),this.buf.push(" ",o,'="',A$(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=C$(e).toLowerCase();HM.hasOwnProperty(t)&&!b$.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(A$(e))}}function Gce(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw T$(e);return e}function qce(n){const e=n.firstChild;if(e&&function Wce(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw T$(e);return e}function C$(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function T$(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const Kce=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qce=/([^\#-~ |!])/g;function A$(n){return n.replace(/&/g,"&amp;").replace(Kce,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Qce,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let tC;function S$(n,e){let t=null;try{tC=tC||function v$(n){const e=new Uce(n);return function jce(){try{return!!(new window.DOMParser).parseFromString(Dm(""),"text/html")}catch{return!1}}()?new Bce(e):e}(n);let r=e?String(e):"";t=tC.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=tC.getInertBodyElement(r)}while(r!==s);return Dm((new $ce).sanitizeChildren(WM(t)||t))}finally{if(t){const r=WM(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function WM(n){return"content"in n&&function Yce(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ls=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ls||{});function Ss(n){const e=function vv(){const n=we();return n&&n[fa].sanitizer}();return e?e.sanitize(ls.URL,n)||"":Al(n,"URL")?Ho(n):eC(kt(n))}const rue=/^>|^->|<!--|-->|--!>|<!-$/g,iue=/(<|>)/g,sue="\u200b$1\u200b";function $o(n){return n instanceof Function?n():n}function Wo(n){return"browser"===(n??k(Rn)).get(Gs)}var Fu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Fu||{});let KM;function QM(n,e){return KM(n,e)}function Mm(n,e,t,r,i){if(null!=r){let s,o=!1;mi(r)?s=r:qr(r)&&(o=!0,r=r[Zn]);const a=fn(r);0===n&&null!==t?null==i?z$(e,t,a):Uh(e,t,a,i||null,!0):1===n&&null!==t?Uh(e,t,a,i||null,!0):2===n?function Ev(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Tue(n,e,t,r,i){const s=t[pa];s!==fn(t)&&Mm(e,n,r,s,i);for(let a=Tr;a<t.length;a++){const l=t[a];aC(l[Ue],l,n,e,r,s)}}(e,n,s,t,i)}}function XM(n,e){return n.createComment(function R$(n){return n.replace(rue,e=>e.replace(iue,sue))}(e))}function iC(n,e,t){return n.createElement(e,t)}function B$(n,e){e[fa].changeDetectionScheduler?.notify(9),aC(n,e,e[Dt],2,null,null)}function U$(n,e){const t=n[Ru],r=e[Gr];(qr(r)||e[pr]!==r[Gr][pr])&&(n[dt]|=im.HasTransplantedViews),null===t?n[Ru]=[e]:t.push(e)}function ZM(n,e){const t=n[Ru],r=t.indexOf(e);t.splice(r,1)}function bv(n,e){if(n.length<=Tr)return;const t=Tr+e,r=n[t];if(r){const i=r[vc];null!==i&&i!==n&&ZM(i,r),e>0&&(n[t-1][Lo]=r[Lo]);const s=fh(n,Tr+e);!function _ue(n,e){B$(n,e),e[Zn]=null,e[Fi]=null}(r[Ue],r);const o=s[Ha];null!==o&&o.detachView(s[Ue]),r[Gr]=null,r[Lo]=null,r[dt]&=-129}return r}function sC(n,e){if(!(256&e[dt])){const t=e[Dt];t.destroyNode&&aC(n,e,t,3,null,null),function vue(n){let e=n[Ih];if(!e)return JM(n[Ue],n);for(;e;){let t=null;if(qr(e))t=e[Ih];else{const r=e[Tr];r&&(t=r)}if(!t){for(;e&&!e[Lo]&&e!==n;)qr(e)&&JM(e[Ue],e),e=e[Gr];null===e&&(e=n),qr(e)&&JM(e[Ue],e),t=e&&e[Lo]}e=t}}(e)}}function JM(n,e){if(256&e[dt])return;const t=te(null);try{e[dt]&=-129,e[dt]|=256,e[_o]&&Jt(e[_o]),function Iue(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof sv)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];yo(4,a,l);try{l.call(a)}finally{yo(5,a,l)}}else{yo(4,i,s);try{s.call(i)}finally{yo(5,i,s)}}}}}(n,e),function Eue(n,e){const t=n.cleanup,r=e[yc];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[yc]=null);const i=e[wl];if(null!==i){e[wl]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Ue].type&&e[Dt].destroy();const r=e[vc];if(null!==r&&mi(e[Gr])){r!==e[Gr]&&ZM(r,e);const i=e[Ha];null!==i&&i.detachView(n)}AM(e)}finally{te(t)}}function eP(n,e,t){return function j$(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[Zn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===go.None||s===go.Emulated)return null}return Gi(r,t)}}(n,e.parent,t)}function Uh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function z$(n,e,t){n.appendChild(e,t)}function H$(n,e,t,r,i){null!==r?Uh(n,e,t,r,i):z$(n,e,t)}function tP(n,e){return n.parentNode(e)}function $$(n,e,t){return G$(n,e,t)}let nP,G$=function W$(n,e,t){return 40&n.type?Gi(n,t):null};function oC(n,e,t,r){const i=eP(n,r,e),s=e[Dt],a=$$(r.parent||e[Fi],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)H$(s,i,t[l],a,!1);else H$(s,i,t,a,!1);void 0!==nP&&nP(s,r,e,t,i)}function jh(n,e){if(null!==e){const t=e.type;if(3&t)return Gi(e,n);if(4&t)return rP(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return jh(n,r);{const i=n[e.index];return mi(i)?rP(-1,i):fn(i)}}if(128&t)return jh(n,e.next);if(32&t)return QM(e,n)()||fn(n[e.index]);{const r=K$(n,e);return null!==r?Array.isArray(r)?r[0]:jh($a(n[pr]),r):jh(n,e.next)}}return null}function K$(n,e){return null!==e?n[pr][Fi].projection[e.projection]:null}function rP(n,e){const t=Tr+n+1;if(t<e.length){const r=e[t],i=r[Ue].firstChild;if(null!==i)return jh(r,i)}return e[pa]}function iP(n,e,t,r,i,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],l=t.type;if(o&&0===e&&(a&&As(fn(a),r),t.flags|=2),32&~t.flags)if(8&l)iP(n,e,t.child,r,i,s,!1),Mm(e,n,i,a,s);else if(32&l){const c=QM(t,r);let u;for(;u=c();)Mm(e,n,i,u,s);Mm(e,n,i,a,s)}else 16&l?Y$(n,e,r,t,i,s):Mm(e,n,i,a,s);t=o?t.projectionNext:t.next}}function aC(n,e,t,r,i,s){iP(t,r,n.firstChild,e,i,s,!1)}function Y$(n,e,t,r,i,s){const o=t[pr],l=o[Fi].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Mm(e,n,i,l[c],s);else{let c=l;const u=o[Gr];dv(r)&&(c.flags|=128),iP(n,e,c,u,i,s,!0)}}function X$(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Z$(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&gh(n,e,r),null!==i&&X$(n,e,i),null!==s&&function Sue(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Ft={};function Ae(n=1){J$(qt(),we(),Pn()+n,!1)}function J$(n,e,t,r){if(!r)if(3&~e[dt]){const s=n.preOrderHooks;null!==s&&Em(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Nu(e,s,t)}Ts(t)}function De(n,e=Bt.Default){const t=we();return null===t?Re(n,e):v4(Bn(),t,St(n),e)}function tW(n,e,t,r,i,s){const o=te(null);try{let a=null;i&ha.SignalBased&&(a=e[r][ce]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&ha.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):C0(e,a,r,s)}finally{te(o)}}function lC(n,e,t,r,i,s,o,a,l,c,u){const h=e.blueprint.slice();return h[Zn]=i,h[dt]=204|r,(null!==c||n&&2048&n[dt])&&(h[dt]|=2048),pm(h),h[Gr]=h[Su]=n,h[Jn]=t,h[fa]=o||n&&n[fa],h[Dt]=a||n&&n[Dt],h[ni]=l||n&&n[ni]||null,h[Fi]=s,h[xu]=function Yle(){return Qle++}(),h[ws]=u,h[g0]=c,h[pr]=2==e.type?n[pr]:h,h}function zh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function sP(n,e,t,r,i){const s=_m(),o=ym(),l=n.data[e]=function Oue(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Cc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function aM(){return Rt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Rh(){const n=Rt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return bo(s,!0),s}function Iv(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function nW(n,e,t,r,i){const s=Pn(),o=2&r;try{Ts(-1),o&&e.length>ct&&J$(n,e,ct,!1),yo(o?2:0,i),t(r,i)}finally{Ts(s),yo(o?3:1,i)}}function oP(n,e,t){if(Th(e)){const r=te(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{te(r)}}}function aP(n,e,t){R0()&&(function zue(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ec(t)&&function Que(n,e,t){const r=Gi(e,n),i=rW(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=cC(n,lC(n,i,null,o,r,e,null,n[fa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||V0(t,e),As(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Oh(e,n,a,t);As(c,e),null!==o&&Yue(0,a-i,c,l,0,o),Vo(l)&&(Cs(t.index,e)[Jn]=Oh(e,n,a,t))}}(n,e,t,Gi(t,e)),!(64&~t.flags)&&lW(n,e,t))}function lP(n,e,t=Gi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function rW(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=cP(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function cP(n,e,t,r,i,s,o,a,l,c,u){const h=ct+r,m=h+i,y=function Due(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ft);return t}(h,m),b="function"==typeof c?c():c;return y[Ue]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:u}}let iW=()=>null;function sW(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,l=ha.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==i){if(!i.hasOwnProperty(s))continue;c=i[s]}0===n?oW(r,t,c,a,l):oW(r,t,c,a)}return r}function oW(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function wo(n,e,t,r,i,s,o,a){const l=Gi(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(pP(n,t,u,r,i),Ec(e)&&function Vue(n,e){const t=Cs(e,n);16&t[dt]||(t[dt]|=64)}(t,e.index)):3&e.type&&(r=function Lue(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function uP(n,e,t,r){if(R0()){const i=null===r?null:{"":-1},s=function $ue(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Zp(e,o.selectors,!1))if(r||(r=[]),Vo(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),dP(n,e,a.length)}else r.unshift(o),dP(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&aW(n,e,t,o,i,a),i&&function Wue(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new K(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=_h(t.mergedAttrs,t.attrs)}function aW(n,e,t,r,i,s){for(let c=0;c<r.length;c++)gM(V0(t,e),n,r[c].type);!function que(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Iv(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=_h(t.mergedAttrs,u.hostAttrs),Kue(n,t,e,l,u),Gue(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function Fue(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const h=s[u],m=t?t.get(h):null,b=m?m.outputs:null;l=sW(0,h.inputs,u,l,m?m.inputs:null),c=sW(1,h.outputs,u,c,b);const T=null===l||null===o||My(e)?null:Xue(l,u,o);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function lW(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function cM(){return Rt.lFrame.currentDirectiveIndex}();try{Ts(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];nv(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Hue(l,c)}}finally{Ts(-1),nv(o)}}function Hue(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function dP(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Gue(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Vo(e)&&(t[""]=n)}}function Kue(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ua(i.type)),o=new sv(s,Vo(i),De);n.blueprint[r]=o,t[r]=o,function Uue(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function jue(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Iv(n,t,i.hostVars,Ft),i)}function Sl(n,e,t,r,i,s){const o=Gi(n,e);!function hP(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?kt(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Dt],o,s,n.value,t,r,i)}function Yue(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)tW(r,t,o[a++],o[a++],o[a++],o[a++])}function Xue(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function cW(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function uW(n,e){const t=n.contentQueries;if(null!==t){const r=te(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];f(t[i]),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function cC(n,e){return n[Ih]?n[wh][Lo]=e:n[Ih]=e,n[wh]=e,e}function fP(n,e,t){f(0);const r=te(null);try{e(n,t)}finally{te(r)}}function dW(n){return n[yc]??=[]}function hW(n){return n.cleanup??=[]}function uC(n,e){const t=n[ni],r=t?t.get(zo,null):null;r&&r.handleError(e)}function pP(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=t[s++];tW(n.data[o],e[o],r,a,l,i)}}function Zue(n,e){const t=Cs(e,n),r=t[Ue];!function Jue(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Zn];null!==i&&null===t[ws]&&(t[ws]=FM(i,t[ni])),mP(r,t,t[Jn])}function mP(n,e,t){R(e);try{const r=n.viewQuery;null!==r&&fP(1,r,t);const i=n.template;null!==i&&nW(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ha]?.finishViewCreation(n),n.staticContentQueries&&uW(n,e),n.staticViewQueries&&fP(2,n.viewQuery,t);const s=n.components;null!==s&&function ede(n,e){for(let t=0;t<e.length;t++)Zue(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[dt]&=-5,ut()}}function Pm(n,e,t,r){const i=te(null);try{const s=e.tView,l=lC(n,s,t,4096&n[dt]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[vc]=n[e.index];const u=n[Ha];return null!==u&&(l[Ha]=u.createEmbeddedView(s)),mP(s,l,t),l}finally{te(i)}}function Hh(n,e){return!e||null===e.firstChild||dv(n)}function km(n,e,t,r=!0){const i=e[Ue];if(function bue(n,e,t,r){const i=Tr+r,s=t.length;r>0&&(t[i-1][Lo]=e),r<s-Tr?(e[Lo]=t[i],qp(t,Tr+r,e)):(t.push(e),e[Lo]=null),e[Gr]=t;const o=e[vc];null!==o&&t!==o&&U$(o,e);const a=e[Ha];null!==a&&a.insertView(n),Qy(e),e[dt]|=128}(i,e,n,t),r){const o=rP(t,n),a=e[Dt],l=tP(a,n[pa]);null!==l&&function yue(n,e,t,r,i,s){r[Zn]=i,r[Fi]=e,aC(n,r,t,1,i,s)}(i,n[Fi],a,e,l,o)}const s=e[ws];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function wv(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&r.push(fn(s)),mi(s)&&mW(s,r);const o=t.type;if(8&o)wv(n,e,t.child,r);else if(32&o){const a=QM(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=K$(e,t);if(Array.isArray(a))r.push(...a);else{const l=$a(e[pr]);wv(l[Ue],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function mW(n,e){for(let t=Tr;t<n.length;t++){const r=n[t],i=r[Ue].firstChild;null!==i&&wv(r[Ue],r,i,e)}n[pa]!==n[Zn]&&e.push(n[pa])}let gW=[];const ide={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wc(n.lView)},consumerOnSignalRead(){this.lView[_o]=this}},ode={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=$a(n.lView);for(;e&&!_W(e[Ue]);)e=$a(e);e&&S0(e)},consumerOnSignalRead(){this.lView[_o]=this}};function _W(n){return 2!==n.type}const ade=100;function dC(n,e=!0,t=0){const r=n[fa],i=r.rendererFactory;i.begin?.();try{!function lde(n,e){const t=Ph();try{ev(!0),_P(n,e);let r=0;for(;Dh(n);){if(r===ade)throw new K(103,!1);r++,_P(n,1)}}finally{ev(t)}}(n,t)}catch(o){throw e&&uC(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function cde(n,e,t,r){const i=e[dt];if(!(256&~i))return;e[fa].inlineEffectRunner?.flush(),R(e);let a=!0,l=null,c=null;_W(n)?(c=function tde(n){return n[_o]??function nde(n){const e=gW.pop()??Object.create(ide);return e.lView=n,e}(n)}(e),l=Je(c)):null===function Ce(){return Z}()?(a=!1,c=function sde(n){const e=n[_o]??Object.create(ode);return e.lView=n,e}(e),l=Je(c)):e[_o]&&(Jt(e[_o]),e[_o]=null);try{pm(e),function N0(n){return Rt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&nW(n,e,t,2,r);const u=!(3&~i);if(u){const y=n.preOrderCheckHooks;null!==y&&Nu(e,y,null)}else{const y=n.preOrderHooks;null!==y&&Em(e,y,0,null),uM(e,0)}if(function ude(n){for(let e=K4(n);null!==e;e=Q4(e)){if(!(e[dt]&im.HasTransplantedViews))continue;const t=e[Ru];for(let r=0;r<t.length;r++)S0(t[r])}}(e),vW(e,0),null!==n.contentQueries&&uW(n,e),u){const y=n.contentCheckHooks;null!==y&&Nu(e,y)}else{const y=n.contentHooks;null!==y&&Em(e,y,1),uM(e,1)}!function xue(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ts(~i);else{const s=i,o=t[++r],a=t[++r];lM(o,s),a(2,e[s])}}}finally{Ts(-1)}}(n,e);const h=n.components;null!==h&&EW(e,h,0);const m=n.viewQuery;if(null!==m&&fP(2,m,r),u){const y=n.viewCheckHooks;null!==y&&Nu(e,y)}else{const y=n.viewHooks;null!==y&&Em(e,y,2),uM(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ch]){for(const y of e[Ch])y();e[Ch]=null}e[dt]&=-73}catch(u){throw wc(e),u}finally{null!==c&&(et(c,l),a&&function rde(n){n.lView[_o]!==n&&(n.lView=null,gW.push(n))}(c)),ut()}}function vW(n,e){for(let t=K4(n);null!==t;t=Q4(t))for(let r=Tr;r<t.length;r++)bW(t[r],e)}function dde(n,e,t){bW(Cs(e,n),t)}function bW(n,e){Ky(n)&&_P(n,e)}function _P(n,e){const r=n[Ue],i=n[dt],s=n[_o];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!Gt(s)),o||=!1,s&&(s.dirty=!1),n[dt]&=-9217,o)cde(r,n,r.template,n[Jn]);else if(8192&i){vW(n,1);const a=r.components;null!==a&&EW(n,a,1)}}function EW(n,e,t){for(let r=0;r<e.length;r++)dde(n,e[r],t)}function Cv(n,e){const t=Ph()?64:1088;for(n[fa].changeDetectionScheduler?.notify(e);n;){n[dt]|=t;const r=$a(n);if(Bo(n)&&!r)return n;n=r}return null}class Tv{get rootNodes(){const e=this._lView,t=e[Ue];return wv(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jn]}set context(e){this._lView[Jn]=e}get destroyed(){return!(256&~this._lView[dt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Gr];if(mi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(bv(e,r),fh(t,r))}this._attachedToViewContainer=!1}sC(this._lView[Ue],this._lView)}onDestroy(e){mm(this._lView,e)}markForCheck(){Cv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[dt]&=-129}reattach(){Qy(this._lView),this._lView[dt]|=128}detectChanges(){this._lView[dt]|=1024,dC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Bo(this._lView),t=this._lView[vc];null!==t&&!e&&ZM(t,this._lView),B$(this._lView[Ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;const t=Bo(this._lView),r=this._lView[vc];null!==r&&!t&&U$(r,this._lView),Qy(this._lView)}}let ma=(()=>{class n{static{this.__NG_ELEMENT_ID__=pde}}return n})();const hde=ma,fde=class extends hde{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Pm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Tv(i)}};function pde(){return hC(Bn(),we())}function hC(n,e){return 4&n.type?new fde(e,n,Tm(n,e)):null}let zW=()=>null;function Wh(n,e){return zW(n,e)}class Om{}const kv=new ye("",{providedIn:"root",factory:()=>!1}),HW=new ye(""),xP=new ye("");class ohe{}class $W{}class lhe{resolveComponentFactory(e){throw function ahe(n){const e=Error(`No component factory found for ${ti(n)}.`);return e.ngComponent=n,e}(e)}}class yC{static{this.NULL=new lhe}}class Gh{}let qa=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function che(){const n=we(),t=Cs(Bn().index,n);return(qr(t)?t:n)[Dt]}()}}return n})(),uhe=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>null})}}return n})();function bC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=cc(i,a):2==s&&(r=cc(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class KW extends yC{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Yt(e);return new Fv(t,this.ngModule)}}function QW(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;t.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:ha.None)&ha.SignalBased)}:{propName:o,templateName:r})}return t}class Fv extends $W{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=QW(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return QW(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function RR(n){return n.map(Oy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=te(null);try{let o=(i=i||this.ngModule)instanceof Oi?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Nh(e,o):e,l=a.get(Gh,null);if(null===l)throw new K(407,!1);const h={rendererFactory:l,sanitizer:a.get(uhe,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(Om,null)},m=l.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?function Rue(n,e,t,r){const s=r.get(f$,!1)||t===go.ShadowDom,o=n.selectRootElement(e,s);return function Mue(n){iW(n)}(o),o}(m,r,this.componentDef.encapsulation,a):iC(m,y,function fhe(n){const e=n.toLowerCase();return"svg"===e?hm:"math"===e?"math":null}(y));let T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let M=null;null!==b&&(M=FM(b,a,!0));const B=cP(0,null,null,1,0,null,null,null,null,null,null),V=lC(null,B,null,T,null,null,h,m,a,null,M);R(V);let Q,be,Be=null;try{const je=this.componentDef;let H,L=null;je.findHostDirectiveDefs?(H=[],L=new Map,je.findHostDirectiveDefs(je,H,L),H.push(je)):H=[je];const W=function mhe(n,e){const t=n[Ue],r=ct;return n[r]=e,zh(t,r,2,"#host",null)}(V,b);Be=function ghe(n,e,t,r,i,s,o){const a=i[Ue];!function _he(n,e,t,r){for(const i of n)e.mergedAttrs=_h(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(bC(e,e.mergedAttrs,!0),null!==t&&Z$(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=FM(e,i[ni]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const h=lC(i,rW(t),null,u,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&dP(a,n,r.length-1),cC(i,h),i[n.index]=h}(W,b,je,H,V,h,m),be=Pu(B,ct),b&&function vhe(n,e,t,r){if(r)gh(n,t,["ng-version","18.2.13"]);else{const{attrs:i,classes:s}=function Fy(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Ws(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&gh(n,t,i),s&&s.length>0&&X$(n,t,s.join(" "))}}(m,je,b,r),void 0!==t&&function bhe(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(be,this.ngContentSelectors,t),Q=function yhe(n,e,t,r,i,s){const o=Bn(),a=i[Ue],l=Gi(o,i);aW(a,i,o,t,null,r);for(let u=0;u<t.length;u++)As(Oh(i,a,o.directiveStart+u,o),i);lW(a,i,o),l&&As(l,i);const c=Oh(i,a,o.directiveStart+o.componentOffset,o);if(n[Jn]=i[Jn]=c,null!==s)for(const u of s)u(c,e);return oP(a,o,i),c}(Be,je,H,L,V,[Ehe]),mP(B,V,null)}catch(je){throw null!==Be&&AM(Be),AM(V),je}finally{ut()}return new phe(this.componentType,Q,Tm(be,V),V,be)}finally{te(s)}}}class phe extends ohe{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Tv(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;pP(s[Ue],s,i,e,t),this.previousInputValues.set(e,t),Cv(Cs(this._tNode.index,s),1)}}get injector(){return new Li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Ehe(){const n=Bn();bm(we()[Ue],n)}let Co=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ihe}}return n})();function Ihe(){return ZW(Bn(),we())}const whe=Co,YW=class extends whe{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Tm(this._hostTNode,this._hostLView)}get injector(){return new Li(this._hostTNode,this._hostLView)}get parentInjector(){const e=B0(this._hostTNode,this._hostLView);if(fM(e)){const t=av(e,this._hostLView),r=ov(e);return new Li(t[Ue].data[r+8],t)}return new Li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=XW(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Tr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=Wh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Hh(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function Au(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const l=o?e:new Fv(Yt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const T=(o?c:this.parentInjector).get(Oi,null);T&&(s=T)}const u=Yt(l.componentType??{}),h=Wh(this._lContainer,u?.id??null),y=l.create(c,i,h?.firstChild??null,s);return this.insertImpl(y.hostView,a,Hh(this._hostTNode,h)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function eM(n){return mi(n[Gr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[Gr],c=new YW(l,l[Fi],l[Gr]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return km(o,i,s,r),e.attachToViewContainerRef(),qp(MP(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=XW(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=bv(this._lContainer,t);r&&(fh(MP(this._lContainer),t),sC(r[Ue],r))}detach(e){const t=this._adjustIndex(e,-1),r=bv(this._lContainer,t);return r&&null!=fh(MP(this._lContainer),t)?new Tv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function XW(n){return n[8]}function MP(n){return n[8]||(n[8]=[])}function ZW(n,e){let t;const r=e[n.index];return mi(r)?t=r:(t=cW(r,e,null,n),e[n.index]=t,cC(e,t)),JW(t,e,n,r),new YW(t,n,e)}let JW=function t3(n,e,t,r){if(n[pa])return;let i;i=8&t.type?fn(r):function Che(n,e){const t=n[Dt],r=t.createComment(""),i=Gi(e,n);return Uh(t,tP(t,i),r,function wue(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[pa]=i},PP=()=>!1;class kP{constructor(e){this.queryList=e,this.matches=null}clone(){return new kP(this.queryList)}setDirty(){this.queryList.setDirty()}}class NP{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new NP(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==BP(e,t).matches&&this.queries[t].setDirty()}}class n3{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function Phe(n){return n.split(",").map(e=>e.trim())}(e):e}}class OP{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new OP(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class FP{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new FP(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,xhe(t,s)),this.matchTNodeWithReadOption(e,t,U0(t,e,s,!1,!1))}else r===ma?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,U0(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===jn||i===Co||i===ma&&4&t.type)this.addMatch(t.index,-2);else{const s=U0(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function xhe(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Rhe(n,e,t,r){return-1===t?function Dhe(n,e){return 11&n.type?Tm(n,e):4&n.type?hC(n,e):null}(e,n):-2===t?function Mhe(n,e,t){return t===jn?Tm(e,n):t===ma?hC(e,n):t===Co?ZW(e,n):void 0}(n,e,r):Oh(n,n[Ue],t,e)}function r3(n,e,t,r){const i=e[Ha].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:Rhe(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function LP(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=r3(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let h=Tr;h<u.length;h++){const m=u[h];m[vc]===m[Gr]&&LP(m[Ue],m,c,r)}if(null!==u[Ru]){const h=u[Ru];for(let m=0;m<h.length;m++){const y=h[m];LP(y[Ue],y,c,r)}}}}}return r}function i3(n,e,t){const r=new Fh(!(4&~t));return function Nue(n,e,t,r){const i=dW(e);i.push(t),n.firstCreatePass&&hW(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[Ha]??=new NP).queries.push(new kP(r))-1}function a3(n,e,t){null===n.queries&&(n.queries=new OP),n.queries.track(new FP(e,t))}function BP(n,e){return n.queries.getByIndex(e)}function l3(n,e){const t=n[Ue],r=BP(t,e);return r.crossesNgTemplate?LP(t,n,e,[]):r3(t,n,r,e)}const c3=new Set;function qs(n){c3.has(n)||(c3.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Lv(n){return"function"==typeof n&&void 0!==n[ce]}function qh(n,e){qs("NgSignals");const t=function $r(n){const e=Object.create(pe);e.value=n;const t=()=>($(e),e.value);return t[ce]=e,t}(n),r=t[ce];return e?.equal&&(r.equal=e.equal),t.set=i=>se(r,i),t.update=i=>function ae(n,e){tt()||Sn(),se(n,e(n.value))}(r,i),t.asReadonly=u3.bind(t),t}function u3(){const n=this[ce];if(void 0===n.readonlyFn){const e=()=>this();e[ce]=n,n.readonlyFn=e}return n.readonlyFn}function d3(n){return Lv(n)&&"function"==typeof n.set}function bn(n){let e=function I3(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Vo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=IC(n.inputs),o.inputTransforms=IC(n.inputTransforms),o.declaredInputs=IC(n.declaredInputs),o.outputs=IC(n.outputs);const a=i.hostBindings;a&&qhe(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&Whe(n,l),c&&Ghe(n,c),Hhe(n,i),Cr(n.outputs,i.outputs),Vo(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===bn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function $he(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_h(i.hostAttrs,t=_h(t,i.hostAttrs))}}(r)}function Hhe(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function IC(n){return n===po?{}:n===vn?[]:n}function Whe(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Ghe(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function qhe(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function w3(n){const e=t=>{const r=Array.isArray(n);null===t.hostDirectives?(t.findHostDirectiveDefs=C3,t.hostDirectives=r?n.map(jP):[n]):r?t.hostDirectives.unshift(...n.map(jP)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function C3(n,e,t){if(null!==n.hostDirectives)for(const r of n.hostDirectives)if("function"==typeof r){const i=r();for(const s of i)T3(jP(s),e,t)}else T3(r,e,t)}function T3(n,e,t){const r=pi(n.directive);(function Xhe(n,e){for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=n[t])})(r.declaredInputs,n.inputs),C3(r,e,t),t.set(r,n),e.push(r)}function jP(n){return"function"==typeof n?{directive:St(n),inputs:po,outputs:po}:{directive:St(n.directive),inputs:A3(n.inputs),outputs:A3(n.outputs)}}function A3(n){if(void 0===n||0===n.length)return po;const e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function xl(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class xc{}class x3{}class zP extends xc{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new KW(this);const s=Wi(e);this._bootstrapComponents=$o(s.bootstrap),this._r3Injector=D4(e,t,[{provide:xc,useValue:this},{provide:yC,useValue:this.componentFactoryResolver},...r],ti(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class HP extends x3{constructor(e){super(),this.moduleType=e}create(e){return new zP(this.moduleType,e,[])}}class D3 extends xc{constructor(e){super(),this.componentFactoryResolver=new KW(this),this.instance=null;const t=new za([...e.providers,{provide:xc,useValue:this},{provide:yC,useValue:this.componentFactoryResolver}],e.parent||Cu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function wC(n,e,t=null){return new D3({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function CC(n){return!!$P(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function $P(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Dl(n,e,t){return n[e]=t}function gi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Kh(n,e,t,r){const i=gi(n,e,t);return gi(n,e+1,r)||i}function Uv(n,e,t,r,i,s,o,a,l,c){const u=t+ct,h=e.firstCreatePass?function ife(n,e,t,r,i,s,o,a,l){const c=e.consts,u=zh(e,n,4,o||null,a||null);uP(e,t,u,vo(c,l)),bm(e,u);const h=u.tView=cP(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,e,n,r,i,s,o,a,l):e.data[u];bo(h,!1);const m=R3(e,n,h,t);ku()&&oC(e,n,m,h),As(m,n);const y=cW(m,n,m,h);return n[u]=y,cC(n,y),function e3(n,e,t){return PP(n,e,t)}(y,h,n),Mu(h)&&aP(e,n,h),null!=l&&lP(n,h,c),h}function Ct(n,e,t,r,i,s,o,a){const l=we(),c=qt();return Uv(l,c,n,e,t,r,i,vo(c.consts,s),o,a),Ct}let R3=function M3(n,e,t,r){return Eo(!0),e[Dt].createComment("")};var Bm=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Bm||{});let L3=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}}return n})();class Hv{constructor(){this.ngZone=k(_t),this.scheduler=k(Om),this.errorHandler=k(zo,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Bm.EarlyRead,Bm.Write,Bm.MixedReadWrite,Bm.Read]}execute(){this.executing=!0;for(const e of Hv.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ke({token:Hv,providedIn:"root",factory:()=>new Hv})}}class lfe{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function Dc(n,e){!e?.injector&&Fr();const t=e?.injector??k(Rn);return Wo(t)?(qs("NgAfterNextRender"),B3(n,t,e,!0)):U3}function B3(n,e,t,r){const i=e.get(L3);i.impl??=e.get(Hv);const s=t?.phase??Bm.MixedReadWrite,o=!0!==t?.manualCleanup?e.get(cv):null,a=new lfe(i.impl,function cfe(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),r,o);return i.impl.register(a),a}const U3={destroy(){}};function er(n,e,t,r){const i=we();return gi(i,Uo(),e)&&(qt(),Sl(Un(),i,n,e,t,r)),er}function Gm(n,e,t,r){return gi(n,Uo(),t)?e+kt(t)+r:Ft}function MC(n,e){return n<<17|e<<2}function Uu(n){return n>>17&32767}function tk(n){return 2|n}function Yh(n){return(131068&n)>>2}function nk(n,e){return-131069&n|e<<2}function rk(n){return 1|n}function h5(n,e,t,r){const i=n[t+1],s=null===e;let o=r?Uu(i):Yh(i),a=!1;for(;0!==o&&(!1===a||s);){const c=n[o+1];Wfe(n[o],e)&&(a=!0,n[o+1]=r?rk(c):tk(c)),o=r?Uu(c):Yh(c)}a&&(n[t+1]=r?tk(i):rk(i))}function Wfe(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&vl(n,e)>=0}const Vi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function f5(n){return n.substring(Vi.key,Vi.keyEnd)}function p5(n,e){const t=Vi.textEnd;return t===e?-1:(e=Vi.keyEnd=function Qfe(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Vi.key=e,t),eg(n,e,t))}function eg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function ze(n,e,t){const r=we();return gi(r,Uo(),e)&&wo(qt(),Un(),r,n,e,r[Dt],t,!1),ze}function ik(n,e,t,r,i){const o=i?"class":"style";pP(n,t,e.inputs[o],o,r)}function Wv(n,e,t){return Ka(n,e,t,!1),Wv}function ri(n,e){return Ka(n,e,null,!0),ri}function Xh(n){Qa(ipe,Ml,n,!0)}function Ml(n,e){for(let t=function qfe(n){return function g5(n){Vi.key=0,Vi.keyEnd=0,Vi.value=0,Vi.valueEnd=0,Vi.textEnd=n.length}(n),p5(n,eg(n,0,Vi.textEnd))}(e);t>=0;t=p5(e,t))Pi(n,f5(e),!0)}function Ka(n,e,t,r){const i=we(),s=qt(),o=Ga(2);s.firstUpdatePass&&b5(s,n,o,r),e!==Ft&&gi(i,o,e)&&I5(s,s.data[Pn()],i,i[Dt],n,i[o+1]=function ope(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ti(Ho(n)))),n}(e,t),r,o)}function Qa(n,e,t,r){const i=qt(),s=Ga(2);i.firstUpdatePass&&b5(i,null,s,r);const o=we();if(t!==Ft&&gi(o,s,t)){const a=i.data[Pn()];if(C5(a,r)&&!v5(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=cc(l,t||"")),ik(i,a,o,t,r)}else!function spe(n,e,t,r,i,s,o,a){i===Ft&&(i=vn);let l=0,c=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const m=l<i.length?i[l+1]:void 0,y=c<s.length?s[c+1]:void 0;let T,b=null;u===h?(l+=2,c+=2,m!==y&&(b=h,T=y)):null===h||null!==u&&u<h?(l+=2,b=u):(c+=2,b=h,T=y),null!==b&&I5(n,e,t,r,b,T,o,a),u=l<i.length?i[l]:null,h=c<s.length?s[c]:null}}(i,a,o,o[Dt],o[s+1],o[s+1]=function rpe(n,e,t){if(null==t||""===t)return vn;const r=[],i=Ho(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}function v5(n,e){return e>=n.expandoStartIndex}function b5(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Pn()],o=v5(n,t);C5(s,r)&&null===e&&!o&&(e=!1),e=function Jfe(n,e,t,r){const i=function g(n){const e=Rt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Gv(t=sk(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=sk(i,n,e,t,r),null===s){let l=function epe(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Yh(r))return n[Uu(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=sk(null,n,e,l[1],r),l=Gv(l,e.attrs,r),function tpe(n,e,t,r){n[Uu(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function npe(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Gv(r,n[s].hostAttrs,t);return Gv(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Hfe(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Uu(o),l=Yh(o);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||vl(t,u)>0)&&(c=!0)):u=t,i)if(0!==l){const m=Uu(n[a+1]);n[r+1]=MC(m,a),0!==m&&(n[m+1]=nk(n[m+1],r)),n[a+1]=function jfe(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=MC(a,0),0!==a&&(n[a+1]=nk(n[a+1],r)),a=r;else n[r+1]=MC(l,0),0===a?a=r:n[l+1]=nk(n[l+1],r),l=r;c&&(n[r+1]=tk(n[r+1])),h5(n,u,r,!0),h5(n,u,r,!1),function $fe(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&vl(s,e)>=0&&(t[r+1]=rk(t[r+1]))}(e,u,n,r,s),o=MC(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function sk(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Gv(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Gv(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pi(n,o,!!t||e[++s]))}return void 0===n?null:n}function ipe(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Pi(n,r,t)}function I5(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function zfe(n){return!(1&~n)}(c)?w5(l,e,t,i,Yh(c),o):void 0;PC(u)||(PC(s)||function Ufe(n){return!(2&~n)}(c)&&(s=w5(l,null,t,i,a,o)),function Aue(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Fu.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Fu.Important),n.setStyle(t,r,i,s))}}(r,o,xh(Pn(),t),i,s))}function w5(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let m=t[i+1];m===Ft&&(m=h?vn:void 0);let y=h?ph(m,r):u===r?m:void 0;if(c&&!PC(y)&&(y=ph(l,r)),PC(y)&&(a=y,o))return a;const b=n[i+1];i=o?Uu(b):Yh(b)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=ph(l,r))}return a}function PC(n){return void 0!==n}function C5(n,e){return!!(n.flags&(e?8:16))}function ok(n,e,t){Qa(Pi,Ml,Gm(we(),n,e,t),!0)}function qv(n,e){qs("NgControlFlow");const t=we(),r=Uo(),i=t[r]!==Ft?t[r]:-1,s=-1!==i?kC(t,ct+i):void 0;if(gi(t,r,n)){const a=te(null);try{if(void 0!==s&&function gP(n,e){const t=bv(n,e);return void 0!==t&&sC(t[Ue],t),t}(s,0),-1!==n){const l=ct+n,c=kC(t,l),u=function ck(n,e){return Pu(n,e)}(t[Ue],l),h=Wh(c,u.tView.ssrId);km(c,Pm(t,u,e,{dehydratedView:h}),0,Hh(u,h))}}finally{te(a)}}else if(void 0!==s){const a=function pW(n,e){const t=Tr+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Jn]=e)}}function kC(n,e){return n[e]}function Ie(n,e,t,r){const i=we(),s=qt(),o=ct+n,a=i[Dt],l=s.firstCreatePass?function Spe(n,e,t,r,i,s){const o=e.consts,l=zh(e,n,2,r,vo(o,i));return uP(e,t,l,vo(o,s)),null!==l.attrs&&bC(l,l.attrs,!1),null!==l.mergedAttrs&&bC(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=x5(s,i,l,a,e,n);i[o]=c;const u=Mu(l);return bo(l,!0),Z$(a,c,l),!function Lm(n){return!(32&~n.flags)}(l)&&ku()&&oC(s,i,c,l),0===function Zy(){return Rt.lFrame.elementDepthCount}()&&As(c,i),function tM(){Rt.lFrame.elementDepthCount++}(),u&&(aP(s,i,l),oP(s,l,i)),null!==r&&lP(i,l),Ie}function Te(){let n=Bn();ym()?Mh():(n=n.parent,bo(n,!1));const e=n;(function rM(n){return Rt.skipHydrationRootTNode===n})(e)&&function oM(){Rt.skipHydrationRootTNode=null}(),function nM(){Rt.lFrame.elementDepthCount--}();const t=qt();return t.firstCreatePass&&(bm(t,n),Th(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function mle(n){return!!(8&n.flags)}(e)&&ik(t,e,we(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gle(n){return!!(16&n.flags)}(e)&&ik(t,e,we(),e.stylesWithoutHost,!1),Te}function Xt(n,e,t,r){return Ie(n,e,t,r),Te(),Xt}let x5=(n,e,t,r,i,s)=>(Eo(!0),iC(r,i,function vm(){return Rt.lFrame.currentNamespace}()));function _a(n,e,t){const r=we(),i=qt(),s=n+ct,o=i.firstCreatePass?function Rpe(n,e,t,r,i){const s=e.consts,o=vo(s,r),a=zh(e,n,8,"ng-container",o);return null!==o&&bC(a,o,!0),uP(e,t,a,vo(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];bo(o,!0);const a=D5(i,r,o,n);return r[s]=a,ku()&&oC(i,r,a,o),As(a,r),Mu(o)&&(aP(i,r,o),oP(i,o,r)),null!=t&&lP(r,o),_a}function ya(){let n=Bn();const e=qt();return ym()?Mh():(n=n.parent,bo(n,!1)),e.firstCreatePass&&(bm(e,n),Th(n)&&e.queries.elementEnd(n)),ya}function Kv(n,e,t){return _a(n,e,t),ya(),Kv}let D5=(n,e,t,r)=>(Eo(!0),XM(e[Dt],""));function xs(){return we()}function Qv(n,e,t){const r=we();return gi(r,Uo(),e)&&wo(qt(),Un(),r,n,e,r[Dt],t,!0),Qv}const NC="en-US";let k5=NC,X5=(n,e,t)=>{};function jt(n,e,t,r){const i=we(),s=qt(),o=Bn();return hk(s,i,i[Dt],o,n,e,r),jt}function hk(n,e,t,r,i,s,o){const a=Mu(r),c=n.firstCreatePass&&hW(n),u=e[Jn],h=dW(e);let m=!0;if(3&r.type||o){const T=Gi(r,e),M=o?o(T):T,B=h.length,V=o?be=>o(fn(be[r.index])):r.index;let Q=null;if(!o&&a&&(Q=function wme(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[yc],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,m=!1;else{s=tG(r,e,u,s),X5(T,i,s);const be=t.listen(M,i,s);h.push(s,be),c&&c.push(i,V,B,B+1)}}else s=tG(r,e,u,s);const y=r.outputs;let b;if(m&&null!==y&&(b=y[i])){const T=b.length;if(T)for(let M=0;M<T;M+=2){const Be=e[b[M]][b[M+1]].subscribe(s),je=h.length;h.push(s,Be),c&&c.push(i,r.index,je,-(je+1))}}}function eG(n,e,t,r){const i=te(null);try{return yo(6,e,t),!1!==t(r)}catch(s){return uC(n,s),!1}finally{yo(7,e,t),te(i)}}function tG(n,e,t,r){return function i(s){if(s===Function)return r;Cv(n.componentOffset>-1?Cs(n.index,e):e,5);let a=eG(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)a=eG(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function We(n=1){return function nn(n){return(Rt.lFrame.contextLView=function x0(n,e){for(;n>0;)e=e[Su],n--;return e}(n,Rt.lFrame.contextLView))[Jn]}(n)}function Cme(n,e){let t=null;const r=function xR(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Zp(n,s,!0):Ny(r,s))return i}else t=i}return t}function Ya(n){const e=we()[pr][Fi];if(!e.projection){const r=e.projection=function Iu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){if(128!==s.type){const o=n?Cme(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Ki(n,e=0,t,r,i,s){const o=we(),a=qt(),l=r?n+1:null;null!==l&&Uv(o,a,l,r,i,s,null,t);const c=zh(a,ct+n,16,null,t||null);null===c.projection&&(c.projection=e),Mh();const h=!o[ws]||Cc();null===o[pr][Fi].projection[c.projection]&&null!==l?function Tme(n,e,t){const r=ct+t,i=e.data[r],s=n[r],o=Wh(s,i.tView.ssrId);km(s,Pm(n,i,void 0,{dehydratedView:o}),0,Hh(i,o))}(o,a,l):h&&32&~c.flags&&function Cue(n,e,t){Y$(e[Dt],0,e,t,eP(n,t,e),$$(t.parent||e[Fi],t,e))}(a,o,c)}function ng(n,e,t){return tb(n,"",e,"",t),ng}function tb(n,e,t,r,i){const s=we(),o=Gm(s,e,t,r);return o!==Ft&&wo(qt(),Un(),s,n,o,s[Dt],i,!1),tb}function ju(n,e,t,r){!function o3(n,e,t,r){const i=qt();if(i.firstCreatePass){const s=Bn();a3(i,new n3(e,t,r),s.index),function khe(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return i3(i,we(),t)}(n,e,t,r)}function zu(n,e,t){!function s3(n,e,t){const r=qt();return r.firstCreatePass&&(a3(r,new n3(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),i3(r,we(),e)}(n,e,t)}function Qs(n){const e=we(),t=qt(),r=d();f(r+1);const i=BP(t,r);if(n.dirty&&function qy(n){return!(4&~n[dt])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=l3(e,r);n.reset(s,V4),n.notifyOnChanges()}return!0}return!1}function Ys(){return function VP(n,e){return n[Ha].queries[e].queryList}(we(),d())}function VC(n){return Ic(function P0(){return Rt.lFrame.contextLView}(),ct+n)}function rt(n,e=""){const t=we(),r=qt(),i=n+ct,s=r.firstCreatePass?zh(r,i,1,e,null):r.data[i],o=vG(r,t,s,e,n);t[i]=o,ku()&&oC(r,t,o,s),bo(s,!1)}let vG=(n,e,t,r,i)=>(Eo(!0),function YM(n,e){return n.createText(e)}(e[Dt],r));function va(n){return En("",n,""),va}function En(n,e,t){const r=we(),i=Gm(r,n,e,t);return i!==Ft&&function Sc(n,e,t){const r=xh(e,n);!function V$(n,e,t){n.setValue(e,t)}(n[Dt],r,t)}(r,Pn(),i),En}function BC(n,e,t){d3(e)&&(e=e());const r=we();return gi(r,Uo(),e)&&wo(qt(),Un(),r,n,e,r[Dt],t,!1),BC}function pk(n,e){const t=d3(n);return t&&n.set(e),t}function UC(n,e){const t=we(),r=qt(),i=Bn();return hk(r,t,t[Dt],i,n,e),UC}function mk(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let s=0;s<n.length;s++)mk(n[s],e,t,r,i);else{const s=qt(),o=we(),a=Bn();let l=gc(n)?n:St(n.provide);const c=jR(n),u=1048575&a.providerIndexes,h=a.directiveStart,m=a.providerIndexes>>20;if(gc(n)||!n.multi){const y=new sv(c,i,De),b=_k(l,e,i?u:u+m,h);-1===b?(gM(V0(a,o),s,l),gk(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[b]=y,o[b]=y)}else{const y=_k(l,e,u+m,h),b=_k(l,e,u,u+m),M=b>=0&&t[b];if(i&&!M||!i&&!(y>=0&&t[y])){gM(V0(a,o),s,l);const B=function Wme(n,e,t,r,i){const s=new sv(n,t,De);return s.multi=[],s.index=e,s.componentProviders=0,RG(s,i,r&&!t),s}(i?$me:Hme,t.length,i,r,c);!i&&M&&(t[b].providerFactory=B),gk(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),o.push(B)}else gk(s,n,y>-1?y:b,RG(t[i?b:y],c,!i&&r));!i&&r&&M&&t[b].componentProviders++}}}function gk(n,e,t,r){const i=gc(e),s=function LR(n){return!!n.useClass}(e);if(i||s){const l=(s?St(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function RG(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _k(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Hme(n,e,t,r){return yk(this.multi,[])}function $me(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Oh(t,t[Ue],this.providerFactory.index,r);s=a.slice(0,o),yk(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],yk(i,s);return s}function yk(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function sr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function zme(n,e,t){const r=qt();if(r.firstCreatePass){const i=Vo(n);mk(t,r.data,r.blueprint,i,!0),mk(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let Gme=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=c0(0,t.type),i=r.length>0?wC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ke({token:n,providedIn:"environment",factory:()=>new n(Re(Oi))})}}return n})();function ii(n){qs("NgStandalone"),n.getStandaloneInjector=e=>e.get(Gme).getOrCreateStandaloneInjector(n)}function vk(n,e,t,r){return kG(we(),qi(),n,e,t,r)}function nb(n,e){const t=n[e];return t===Ft?void 0:t}function kG(n,e,t,r,i,s){const o=e+t;return gi(n,o,i)?Dl(n,o+1,s?r.call(s,i):r(i)):nb(n,o+1)}function OG(n,e,t,r,i,s,o,a){const l=e+t;return function TC(n,e,t,r,i){const s=Kh(n,e,t,r);return gi(n,e+2,i)||s}(n,l,i,s,o)?Dl(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):nb(n,l+3)}function qo(n,e){const t=qt();let r;const i=n+ct;t.firstCreatePass?(r=function sge(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ua(r.type)),a=Or(De);try{const l=L0(!1),c=s();return L0(l),function fk(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,we(),i,c),c}finally{Or(a)}}function Hu(n,e,t){const r=n+ct,i=we(),s=Ic(i,r);return rb(i,r)?kG(i,qi(),e,s.transform,t,s):s.transform(t)}function HC(n,e,t,r){const i=n+ct,s=we(),o=Ic(s,i);return rb(s,i)?function NG(n,e,t,r,i,s,o){const a=e+t;return Kh(n,a,i,s)?Dl(n,a+2,o?r.call(o,i,s):r(i,s)):nb(n,a+2)}(s,qi(),e,o.transform,t,r,o):o.transform(t,r)}function bk(n,e,t,r,i){const s=n+ct,o=we(),a=Ic(o,s);return rb(o,s)?OG(o,qi(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function rb(n,e){return n[Ue].data[e].pure}function VG(n,e){return hC(n,e)}class Jh{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const e6=new Jh("18.2.13");let t6=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const o6=new ye(""),GC=new ye("");let xk,Ak=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,xk||(function e_e(n){xk=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(Re(_t),Re(Sk),Re(GC))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),Sk=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return xk?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function ob(n){return!!n&&"function"==typeof n.then}function a6(n){return!!n&&"function"==typeof n.subscribe}const qC=new ye("");let l6=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k(qC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(ob(s))t.push(s);else if(a6(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const KC=new ye("");function u6(n,e){return Array.isArray(e)?e.reduce(u6,n):{...n,...e}}let ba=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(Wle),this.afterRenderManager=k(L3),this.zonelessEnabled=k(kv),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new E,this.afterTick=new E,this.componentTypes=[],this.components=[],this.isStable=k(Tc).hasPendingTasks.pipe(Le(t=>!t)),this._injector=k(Oi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof $W;if(!this._injector.get(l6).done)throw!i&&function bl(n){const e=Yt(n)||pi(n)||Ni(n);return null!==e&&e.standalone}(t),new K(405,!1);let o;o=i?t:this._injector.get(yC).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function t_e(n){return n.isBoundToModule}(o)?void 0:this._injector.get(xc),c=o.create(Rn.NULL,[],r||o.selector,a),u=c.location.nativeElement,h=c.injector.get(o6,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),QC(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);const t=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Gh,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)i_e(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Dh(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;QC(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(KC,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>QC(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function i_e(n,e,t,r){(t||Dh(n))&&dC(n,e,t&&!r?0:1)}class s_e{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let h6=(()=>{class n{compileModuleSync(t){return new HP(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=$o(Wi(t).declarations).reduce((o,a)=>{const l=Yt(a);return l&&o.push(new Fv(l)),o},[]);return new s_e(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),l_e=(()=>{class n{constructor(){this.zone=k(_t),this.changeDetectionScheduler=k(Om),this.applicationRef=k(ba)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Dk({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _t({...Rk(),scheduleInRootZone:t}),[{provide:_t,useFactory:n},{provide:mo,multi:!0,useFactory:()=>{const r=k(l_e,{optional:!0});return()=>r.initialize()}},{provide:mo,multi:!0,useFactory:()=>{const r=k(u_e);return()=>{r.initialize()}}},!0===e?{provide:HW,useValue:!0}:[],{provide:xP,useValue:t??M4}]}function Rk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let u_e=(()=>{class n{constructor(){this.subscription=new xt,this.initialized=!1,this.zone=k(_t),this.pendingTasks=k(Tc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_t.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ab=(()=>{class n{constructor(){this.appRef=k(ba),this.taskService=k(Tc),this.ngZone=k(_t),this.zonelessEnabled=k(kv),this.disableScheduling=k(HW,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new xt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(H0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(xP,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wM||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?k4:P4;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(H0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,k4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Rc=new ye("",{providedIn:"root",factory:()=>k(Rc,Bt.Optional|Bt.SkipSelf)||function d_e(){return typeof $localize<"u"&&$localize.locale||NC}()}),XC=new ye("");function ZC(n){return!n.moduleRef}let y6=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[Dk({ngZoneFactory:()=>function $le(n="zone.js",e){return"noop"===n?new wM:"zone.js"===n?new _t(e):n}(r?.ngZone,{...Rk({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:o}),{provide:Om,useExisting:ab}],l=function Jhe(n,e,t){return new zP(n,e,t,!1)}(t.moduleType,this.injector,a);return function _6(n){const e=ZC(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_t);return t.run(()=>{ZC(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(zo,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),ZC(n)){const s=()=>e.destroy(),o=n.platformInjector.get(XC);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(XC);o.add(s),n.moduleRef.onDestroy(()=>{QC(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return function r_e(n,e,t){try{const r=t();return ob(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const s=e.get(l6);return s.runInitializers(),s.donePromise.then(()=>{if(function Bpe(n){"string"==typeof n&&(k5=n.toLowerCase().replace(/_/g,"-"))}(e.get(Rc,NC)||NC),ZC(n)){const a=e.get(ba);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function __e(n,e){const t=n.injector.get(ba);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new K(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){const i=u6({},r);return function a_e(n,e,t){const r=new HP(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(XC,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(Re(Rn))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),$u=null;const v6=new ye("");function b6(n,e,t=[]){const r=`Platform: ${e}`,i=new ye(r);return(s=[])=>{let o=Pk();if(!o||o.injector.get(v6,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function y_e(n){if($u&&!$u.get(v6,!1))throw new K(400,!1);(function c6(){!function ir(n){Ir=n}(()=>{throw new K(600,!1)})})(),$u=n;const e=n.get(y6);(function I6(n){n.get(i$,null)?.forEach(t=>t())})(n)}(function E6(n=[],e){return Rn.create({name:e,providers:[{provide:h0,useValue:"platform"},{provide:XC,useValue:new Set([()=>$u=null])},...n]})}(a,r))}return function v_e(){const e=Pk();if(!e)throw new K(401,!1);return e}()}}function Pk(){return $u?.get(y6)??null}let Ea=(()=>{class n{static{this.__NG_ELEMENT_ID__=E_e}}return n})();function E_e(n){return function I_e(n,e,t){if(Ec(n)&&!t){const r=Cs(n.index,e);return new Tv(r,r)}return 175&n.type?new Tv(e[pr],e):null}(Bn(),we(),!(16&~n))}class x6{constructor(){}supports(e){return CC(e)}create(e){return new S_e(e)}}const A_e=(n,e)=>e;class S_e{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||A_e}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<R6(r,i,s)?t:r,a=R6(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,b=y+m;u<=b&&b<c&&(s[m]=y+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!CC(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function nfe(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new x_e(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new D6),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new D6),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class x_e{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class D_e{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class D6{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new D_e,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function R6(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class M6{constructor(){}supports(e){return e instanceof Map||$P(e)}create(){return new R_e}}class R_e{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||$P(e)))throw new K(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new M_e(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class M_e{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function P6(){return new Lk([new x6])}let Lk=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:P6})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||P6()),deps:[[n,new pc,new Mi]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new K(901,!1)}}return n})();function k6(){return new tT([new M6])}let tT=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:k6})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||k6()),deps:[[n,new pc,new Mi]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();const N_e=b6(null,"core",[]);let O_e=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(Re(ba))}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({})}}return n})();function si(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Uk(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}function db(n,e){qs("NgSignals");const t=function ie(n){const e=Object.create(Tn);e.computation=n;const t=()=>{if(xe(e),$(e),e.value===zt)throw e.error;return e.value};return t[ce]=e,t}(n);return e?.equal&&(t[ce].equal=e.equal),t}function Xa(n){const e=te(null);try{return n()}finally{te(e)}}const fye=new ye("",{providedIn:"root",factory:()=>k(pye)});let pye=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new mye})}}return n})();class mye{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=k(Tc),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){const t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}class gye{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=function Mt(n,e,t){const r=Object.create(It);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=l=>{r.cleanupFn=l};return r.ref={notify:()=>Xe(r),run:()=>{if(null===r.fn)return;if(function ee(){return x}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Gt(r))return;r.hasRun=!0;const l=Je(r);try{r.cleanupFn(),r.cleanupFn=Mn,r.fn(i)}finally{et(r,l)}},cleanup:()=>r.cleanupFn(),destroy:()=>function o(l){(function s(l){return null===l.fn&&null===l.schedule})(l)||(Jt(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Mn)}(r),[ce]:r},r.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(zo,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function r7(n,e){const t=Yt(n),r=e.elementInjector||Cu();return new Fv(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}let i7=null;function Wu(){return i7}class vye{}const pn=new ye("");let jk=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>k(Eye),providedIn:"platform"})}}return n})();const bye=new ye("");let Eye=(()=>{class n extends jk{constructor(){super(),this._doc=k(pn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wu().getBaseHref(this._doc)}onPopState(t){const r=Wu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Wu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function zk(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function s7(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Mc(n){return n&&"?"!==n[0]?"?"+n:n}let tf=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>k(a7),providedIn:"root"})}}return n})();const o7=new ye("");let a7=(()=>{class n extends tf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(pn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return zk(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Mc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Mc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Mc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(jk),Re(o7,8))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Iye=(()=>{class n extends tf{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=zk(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Mc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Mc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(jk),Re(o7,8))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),sg=(()=>{class n{constructor(t){this._subject=new dn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Tye(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(s7(l7(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mc(r))}normalize(t){return n.stripTrailingSlash(function Cye(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,l7(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Mc}static{this.joinWithSlash=zk}static{this.stripTrailingSlash=s7}static{this.\u0275fac=function(r){return new(r||n)(Re(tf))}}static{this.\u0275prov=ke({token:n,factory:()=>function wye(){return new sg(Re(tf))}(),providedIn:"root"})}}return n})();function l7(n){return n.replace(/\/index.html$/,"")}function _7(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const Zk=/\s+/,y7=[];let v7=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=y7,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Zk):y7}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Zk):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Zk).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(De(jn),De(qa))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class uve{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fb=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new uve(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),E7(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{E7(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(Co),De(ma),De(Lk))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function E7(n,e){n.context.$implicit=e.item}let nf=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dve,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){I7("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){I7("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(Co),De(ma))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class dve{constructor(){this.$implicit=null,this.ngIf=null}}function I7(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ti(e)}'.`)}let C7=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Fu.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(De(jn),De(tT),De(qa))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),T7=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static{this.\u0275fac=function(r){return new(r||n)(De(Co))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[as]})}}return n})();function Ja(n,e){return new K(2100,!1)}class mve{createSubscription(e,t){return Xa(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Xa(()=>e.unsubscribe())}}class gve{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const _ve=new gve,yve=new mve;let A7=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ob(t))return _ve;if(a6(t))return yve;throw Ja()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(De(Ea,16))}}static{this.\u0275pipe=ki({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),x7=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Ja();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"slice",type:n,pure:!1,standalone:!0})}}return n})(),rN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({})}}return n})();const D7="browser";function R7(n){return n===D7}function vT(n){return"server"===n}let Lve=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>R7(k(Gs))?new Vve(k(pn),window):new Uve})}}return n})();class Vve{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Bve(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class Uve{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class M7{}class pbe extends vye{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class aN extends pbe{static makeCurrent(){!function yye(n){i7??=n}(new aN)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function mbe(){return gb=gb||document.querySelector("base"),gb?gb.getAttribute("href"):null}();return null==t?null:function gbe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){gb=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _7(document.cookie,e)}}let gb=null,ybe=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const lN=new ye("");let z7=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Re(lN),Re(_t))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class H7{constructor(e){this._doc=e}}const cN="ng-app-id";let $7=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vT(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${cN}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(cN),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(cN,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Re(pn),Re(Lh),Re(DM,8),Re(Gs))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const uN={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dN=/%COMP%/g,Ibe=new ye("",{providedIn:"root",factory:()=>!0});function G7(n,e){return e.map(t=>t.replace(dN,n))}let hN=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=vT(a),this.defaultRenderer=new fN(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===go.ShadowDom&&(r={...r,encapsulation:go.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof K7?i.applyToHost(t):i instanceof pN&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case go.Emulated:s=new K7(l,c,r,this.appId,u,o,a,h);break;case go.ShadowDom:return new Abe(l,c,t,r,o,a,this.nonce,h);default:s=new pN(l,c,r,u,o,a,h)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Re(z7),Re($7),Re(Lh),Re(Ibe),Re(pn),Re(Gs),Re(_t),Re(DM))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class fN{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(uN[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(q7(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(q7(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=uN[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=uN[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Fu.DashCase|Fu.Important)?e.style.setProperty(t,r,i&Fu.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Fu.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Wu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function q7(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Abe extends fN{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=G7(i.id,i.styles);for(const u of c){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pN extends fN{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?G7(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class K7 extends pN{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function wbe(n){return"_ngcontent-%COMP%".replace(dN,n)}(c),this.hostAttr=function Cbe(n){return"_nghost-%COMP%".replace(dN,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Sbe=(()=>{class n extends H7{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Re(pn))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const Q7=["alt","control","meta","shift"],xbe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dbe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rbe=(()=>{class n extends H7{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wu().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Q7.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=xbe[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Q7.forEach(o=>{o!==i&&(0,Dbe[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Re(pn))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const Nbe=b6(N_e,"browser",[{provide:Gs,useValue:D7},{provide:i$,useValue:function Mbe(){aN.makeCurrent()},multi:!0},{provide:pn,useFactory:function kbe(){return function fce(n){xM=n}(document),document},deps:[]}]),Obe=new ye(""),Z7=[{provide:GC,useClass:class _be{addToWindow(e){Kn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new K(5103,!1);return s},Kn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kn.getAllAngularRootElements=()=>e.getAllRootElements(),Kn.frameworkStabilizers||(Kn.frameworkStabilizers=[]),Kn.frameworkStabilizers.push(r=>{const i=Kn.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Wu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:o6,useClass:Ak,deps:[_t,Sk,GC]},{provide:Ak,useClass:Ak,deps:[_t,Sk,GC]}],J7=[{provide:h0,useValue:"root"},{provide:zo,useFactory:function Pbe(){return new zo},deps:[]},{provide:lN,useClass:Sbe,multi:!0,deps:[pn,_t,Gs]},{provide:lN,useClass:Rbe,multi:!0,deps:[pn]},hN,$7,z7,{provide:Gh,useExisting:hN},{provide:M7,useClass:ybe,deps:[]},[]];let eq=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Lh,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(Re(Obe,12))}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({providers:[...J7,...Z7],imports:[rN,O_e]})}}return n})(),Fbe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Re(pn))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(r){let i=null;return i=r?new(r||n):Re(Ube),i},providedIn:"root"})}}return n})(),Ube=(()=>{class n extends mN{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case ls.NONE:return r;case ls.HTML:return Al(r,"HTML")?Ho(r):S$(this._doc,String(r)).toString();case ls.STYLE:return Al(r,"Style")?Ho(r):r;case ls.SCRIPT:if(Al(r,"Script"))return Ho(r);throw new K(5200,!1);case ls.URL:return Al(r,"URL")?Ho(r):eC(String(r));case ls.RESOURCE_URL:if(Al(r,"ResourceURL"))return Ho(r);throw new K(5201,!1);default:throw new K(5202,!1)}}bypassSecurityTrustHtml(t){return function Nce(n){return new xce(n)}(t)}bypassSecurityTrustStyle(t){return function Oce(n){return new Dce(n)}(t)}bypassSecurityTrustScript(t){return function Fce(n){return new Rce(n)}(t)}bypassSecurityTrustUrl(t){return function Lce(n){return new Mce(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Vce(n){return new Pce(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(pn))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O=G(467);function rq(n){return n&&pt(n.schedule)}function gN(n){return n[n.length-1]}function _N(n){return pt(gN(n))?n.pop():void 0}function _b(n){return rq(gN(n))?n.pop():void 0}var Nc=G(1635);const yN=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function iq(n){return pt(n?.then)}function sq(n){return pt(n[uo])}function oq(n){return Symbol.asyncIterator&&pt(n?.[Symbol.asyncIterator])}function aq(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const lq=function zbe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function cq(n){return pt(n?.[lq])}function uq(n){return(0,Nc.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Nc.N3)(t.read());if(i)return yield(0,Nc.N3)(void 0);yield yield(0,Nc.N3)(r)}}finally{t.releaseLock()}})}function dq(n){return pt(n?.getReader)}function Js(n){if(n instanceof Vt)return n;if(null!=n){if(sq(n))return function Hbe(n){return new Vt(e=>{const t=n[uo]();if(pt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(yN(n))return function $be(n){return new Vt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(iq(n))return function Wbe(n){return new Vt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,La)})}(n);if(oq(n))return hq(n);if(cq(n))return function Gbe(n){return new Vt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(dq(n))return function qbe(n){return hq(uq(n))}(n)}throw aq(n)}function hq(n){return new Vt(e=>{(function Kbe(n,e){var t,r,i,s;return(0,Nc.sH)(this,void 0,void 0,function*(){try{for(t=(0,Nc.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Oc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Gu(n,e=0){return me((t,r)=>{t.subscribe(Ne(r,i=>Oc(r,n,()=>r.next(i),e),()=>Oc(r,n,()=>r.complete(),e),i=>Oc(r,n,()=>r.error(i),e)))})}function sf(n,e=0){return me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function fq(n,e){if(!n)throw new Error("Iterable cannot be null");return new Vt(t=>{Oc(t,e,()=>{const r=n[Symbol.asyncIterator]();Oc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Wn(n,e){return e?function eEe(n,e){if(null!=n){if(sq(n))return function Qbe(n,e){return Js(n).pipe(sf(e),Gu(e))}(n,e);if(yN(n))return function Xbe(n,e){return new Vt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(iq(n))return function Ybe(n,e){return Js(n).pipe(sf(e),Gu(e))}(n,e);if(oq(n))return fq(n,e);if(cq(n))return function Zbe(n,e){return new Vt(t=>{let r;return Oc(t,e,()=>{r=n[lq](),Oc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>pt(r?.return)&&r.return()})}(n,e);if(dq(n))return function Jbe(n,e){return fq(uq(n),e)}(n,e)}throw aq(n)}(n,e):Js(n)}function Ke(...n){return Wn(n,_b(n))}function Qi(n,e,t=1/0){return pt(e)?Qi((r,i)=>Le((s,o)=>e(r,s,i,o))(Js(n(r,i))),t):("number"==typeof e&&(t=e),me((r,i)=>function tEe(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,h=!1;const m=()=>{h&&!l.length&&!c&&e.complete()},y=T=>c<r?b(T):l.push(T),b=T=>{s&&e.next(T),c++;let M=!1;Js(t(T,u++)).subscribe(Ne(e,B=>{i?.(B),s?y(B):e.next(B)},()=>{M=!0},void 0,()=>{if(M)try{for(c--;l.length&&c<r;){const B=l.shift();o?Oc(e,o,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(Ne(e,y,()=>{h=!0,m()})),()=>{a?.()}}(r,i,n,t)))}function lg(n,e){return pt(e)?Qi(n,e,1):Qi(n,1)}function Qr(n,e){return me((t,r)=>{let i=0;t.subscribe(Ne(r,s=>n.call(e,s,i++)&&r.next(s)))})}function cg(n){return me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kt(n,e){return me((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Ne(r,l=>{i?.unsubscribe();let c=0;const u=s++;Js(n(l,u)).subscribe(i=Ne(r,h=>r.next(e?e(l,h,u,c++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}class CT{}class TT{}class Ca{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ca?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ca;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ca?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class nEe{encodeKey(e){return pq(e)}encodeValue(e){return pq(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const iEe=/%(\d[a-f0-9])/gi,sEe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pq(n){return encodeURIComponent(n).replace(iEe,(e,t)=>sEe[t]??e)}function AT(n){return`${n}`}class Pl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new nEe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rEe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(AT):[AT(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Pl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(AT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(AT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class oEe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function mq(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function gq(n){return typeof Blob<"u"&&n instanceof Blob}function _q(n){return typeof FormData<"u"&&n instanceof FormData}class yb{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function aEe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ca,this.context??=new oEe,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Pl,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||mq(this.body)||gq(this.body)||_q(this.body)||function lEe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Pl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_q(this.body)?null:gq(this.body)?this.body.type||null:mq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Pl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),u)),new yb(t,r,o,{params:u,headers:c,context:h,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}}var qu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(qu||{});class vN{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ca,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ST extends vN{constructor(e={}){super(e),this.type=qu.ResponseHeader}clone(e={}){return new ST({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class af extends vN{constructor(e={}){super(e),this.type=qu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new af({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ug extends vN{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function bN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let vb=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof yb)s=t;else{let l,c;l=i.headers instanceof Ca?i.headers:new Ca(i.headers),i.params&&(c=i.params instanceof Pl?i.params:new Pl({fromObject:i.params})),s=new yb(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=Ke(s).pipe(lg(l=>this.handler.handle(l)));if(t instanceof yb||"events"===i.observe)return o;const a=o.pipe(Qr(l=>l instanceof af));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Le(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Le(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Le(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Le(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Pl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,bN(i,r))}post(t,r,i={}){return this.request("POST",t,bN(i,r))}put(t,r,i={}){return this.request("PUT",t,bN(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Re(CT))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const dEe=/^\)\]\}',?\n/;function vq(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let EN=(()=>{class n{constructor(){this.fetchImpl=k(fEe,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=k(_t)}handle(t){return new Vt(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(IN,s=>r.error(new ug({error:s}))),()=>i.abort()})}doRequest(t,r,i){var s=this;return(0,O.A)(function*(){const o=s.createRequestInit(t);let a;try{const b=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:r,...o}));(function pEe(n){n.then(IN,IN)})(b),i.next({type:qu.Sent}),a=yield b}catch(b){return void i.error(new ug({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}))}const l=new Ca(a.headers),c=a.statusText,u=vq(a)??t.urlWithParams;let h=a.status,m=null;if(t.reportProgress&&i.next(new ST({headers:l,status:h,statusText:c,url:u})),a.body){const b=a.headers.get("content-length"),T=[],M=a.body.getReader();let V,Q,B=0;const be=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,O.A)(function*(){for(;;){const{done:je,value:H}=yield M.read();if(je)break;if(T.push(H),B+=H.length,t.reportProgress){Q="text"===t.responseType?(Q??"")+(V??=new TextDecoder).decode(H,{stream:!0}):void 0;const L=()=>i.next({type:qu.DownloadProgress,total:b?+b:void 0,loaded:B,partialText:Q});be?be.run(L):L()}}}));const Be=s.concatChunks(T,B);try{const je=a.headers.get("Content-Type")??"";m=s.parseBody(t,Be,je)}catch(je){return void i.error(new ug({error:je,headers:new Ca(a.headers),status:a.status,statusText:a.statusText,url:vq(a)??t.urlWithParams}))}}0===h&&(h=m?200:0),h>=200&&h<300?(i.next(new af({body:m,headers:l,status:h,statusText:c,url:u})),i.complete()):i.error(new ug({error:m,headers:l,status:h,statusText:c,url:u}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const s=(new TextDecoder).decode(r).replace(dEe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let s=0;for(const o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class fEe{}function IN(){}function bq(n,e){return e(n)}function mEe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const _Ee=new ye(""),bb=new ye(""),Eq=new ye(""),Iq=new ye("",{providedIn:"root",factory:()=>!0});function yEe(){let n=null;return(e,t)=>{null===n&&(n=(k(_Ee,{optional:!0})??[]).reduceRight(mEe,bq));const r=k(Tc);if(k(Iq)){const s=r.add();return n(e,t).pipe(cg(()=>r.remove(s)))}return n(e,t)}}let wq=(()=>{class n extends CT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=k(Tc),this.contributeToStability=k(Iq)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(bb),...this.injector.get(Eq,[])]));this.chain=r.reduceRight((i,s)=>function gEe(n,e,t){return(r,i)=>Is(t,()=>e(r,s=>n(s,i)))}(i,s,this.injector),bq)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(cg(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Re(TT),Re(Oi))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const wEe=/^\)\]\}',?\n/;let Tq=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new K(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Wn(r.\u0275loadImpl()):Ke(null)).pipe(Kt(()=>new Vt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((T,M)=>o.setRequestHeader(T,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const T=t.detectContentTypeHeader();null!==T&&o.setRequestHeader("Content-Type",T)}if(t.responseType){const T=t.responseType.toLowerCase();o.responseType="json"!==T?T:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const T=o.statusText||"OK",M=new Ca(o.getAllResponseHeaders()),B=function CEe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new ST({headers:M,status:o.status,statusText:T,url:B}),l},u=()=>{let{headers:T,status:M,statusText:B,url:V}=c(),Q=null;204!==M&&(Q=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=Q?200:0);let be=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof Q){const Be=Q;Q=Q.replace(wEe,"");try{Q=""!==Q?JSON.parse(Q):null}catch(je){Q=Be,be&&(be=!1,Q={error:je,text:Q})}}be?(s.next(new af({body:Q,headers:T,status:M,statusText:B,url:V||void 0})),s.complete()):s.error(new ug({error:Q,headers:T,status:M,statusText:B,url:V||void 0}))},h=T=>{const{url:M}=c(),B=new ug({error:T,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(B)};let m=!1;const y=T=>{m||(s.next(c()),m=!0);let M={type:qu.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(M.total=T.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},b=T=>{let M={type:qu.UploadProgress,loaded:T.loaded};T.lengthComputable&&(M.total=T.total),s.next(M)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),t.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:qu.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Re(M7))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const wN=new ye(""),Aq=new ye("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Sq=new ye("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class xq{}let SEe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=_7(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Re(pn),Re(Gs),Re(Aq))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function xEe(n,e){const t=n.url.toLowerCase();if(!k(wN)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=k(xq).getToken(),i=k(Sq);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ku=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ku||{});function lf(n,e){return{\u0275kind:n,\u0275providers:e}}function DEe(...n){const e=[vb,Tq,wq,{provide:CT,useExisting:wq},{provide:TT,useFactory:()=>k(EN,{optional:!0})??k(Tq)},{provide:bb,useValue:xEe,multi:!0},{provide:wN,useValue:!0},{provide:xq,useClass:SEe}];for(const t of n)e.push(...t.\u0275providers);return El(e)}const Dq=new ye(""),{isArray:BEe}=Array,{getPrototypeOf:UEe,prototype:jEe,keys:zEe}=Object;function Lq(n){if(1===n.length){const e=n[0];if(BEe(e))return{args:e,keys:null};if(function HEe(n){return n&&"object"==typeof n&&UEe(n)===jEe}(e)){const t=zEe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:$Ee}=Array;function CN(n){return Le(e=>function WEe(n,e){return $Ee(e)?n(...e):n(e)}(n,e))}function Vq(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function DT(...n){const e=_N(n),{args:t,keys:r}=Lq(n),i=new Vt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;Js(t[u]).subscribe(Ne(s,m=>{h||(h=!0,c--),a[u]=m},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(r?Vq(r,a):a),s.complete())}))}});return e?i.pipe(CN(e)):i}let Bq=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(De(qa),De(jn))}}static{this.\u0275dir=Ze({type:n})}}return n})(),cf=(()=>{class n extends Bq{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})()}static{this.\u0275dir=Ze({type:n,features:[bn]})}}return n})();const el=new ye(""),qEe={provide:el,useExisting:Qn(()=>dg),multi:!0},QEe=new ye("");let dg=(()=>{class n extends Bq{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function KEe(){const n=Wu()?Wu().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(De(qa),De(jn),De(QEe,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&jt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[sr([qEe]),bn]})}}return n})();function Qu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function jq(n){return null!=n&&"number"==typeof n.length}const Ds=new ye(""),Yu=new ye(""),YEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class RT{static min(e){return function zq(n){return e=>{if(Qu(e.value)||Qu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Hq(n){return e=>{if(Qu(e.value)||Qu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function $q(n){return Qu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Wq(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Gq(n){return Qu(n.value)||YEe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function qq(n){return e=>Qu(e.value)||!jq(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Kq(n){return e=>jq(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Qq(n){if(!n)return MT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Qu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return t8(e)}static composeAsync(e){return n8(e)}}function MT(n){return null}function Yq(n){return null!=n}function Xq(n){return ob(n)?Wn(n):n}function Zq(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Jq(n,e){return e.map(t=>t(n))}function e8(n){return n.map(e=>function XEe(n){return!n.validate}(e)?e:t=>e.validate(t))}function t8(n){if(!n)return null;const e=n.filter(Yq);return 0==e.length?null:function(t){return Zq(Jq(t,e))}}function TN(n){return null!=n?t8(e8(n)):null}function n8(n){if(!n)return null;const e=n.filter(Yq);return 0==e.length?null:function(t){return DT(Jq(t,e).map(Xq)).pipe(Le(Zq))}}function AN(n){return null!=n?n8(e8(n)):null}function r8(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function i8(n){return n._rawValidators}function s8(n){return n._rawAsyncValidators}function SN(n){return n?Array.isArray(n)?n:[n]:[]}function PT(n,e){return Array.isArray(n)?n.includes(e):n===e}function o8(n,e){const t=SN(e);return SN(n).forEach(i=>{PT(t,i)||t.push(i)}),t}function a8(n,e){return SN(e).filter(t=>!PT(n,t))}class l8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class eo extends l8{get formDirective(){return null}get path(){return null}}class Xu extends l8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class c8{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let kT=(()=>{class n extends c8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Xu,2))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ri("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[bn]})}}return n})(),xN=(()=>{class n extends c8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(eo,10))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&ri("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[bn]})}}return n})();const Eb="VALID",OT="INVALID",hg="PENDING",Ib="DISABLED";class fg{}class d8 extends fg{constructor(e,t){super(),this.value=e,this.source=t}}class MN extends fg{constructor(e,t){super(),this.pristine=e,this.source=t}}class PN extends fg{constructor(e,t){super(),this.touched=e,this.source=t}}class FT extends fg{constructor(e,t){super(),this.status=e,this.source=t}}class nIe extends fg{constructor(e){super(),this.source=e}}class rIe extends fg{constructor(e){super(),this.source=e}}function kN(n){return(LT(n)?n.validators:n)||null}function NN(n,e){return(LT(e)?e.asyncValidators:n)||null}function LT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function h8(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[t])throw new K(1001,"")}function f8(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new K(1002,"")})}class VT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=db(()=>this.statusReactive()),this.statusReactive=qh(void 0),this._pristine=db(()=>this.pristineReactive()),this.pristineReactive=qh(!0),this._touched=db(()=>this.touchedReactive()),this.touchedReactive=qh(!1),this._events=new E,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xa(this.statusReactive)}set status(e){Xa(()=>this.statusReactive.set(e))}get valid(){return this.status===Eb}get invalid(){return this.status===OT}get pending(){return this.status==hg}get disabled(){return this.status===Ib}get enabled(){return this.status!==Ib}get pristine(){return Xa(this.pristineReactive)}set pristine(e){Xa(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Xa(this.touchedReactive)}set touched(e){Xa(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(o8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(o8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(a8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(a8(e,this._rawAsyncValidators))}hasValidator(e){return PT(this._rawValidators,e)}hasAsyncValidator(e){return PT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new PN(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new PN(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new MN(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new MN(!0,r))}markAsPending(e={}){this.status=hg;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new FT(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ib,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new d8(this.value,r)),this._events.next(new FT(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Eb,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Eb||this.status===hg)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new d8(this.value,t)),this._events.next(new FT(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ib:Eb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=hg,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=Xq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new FT(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new dn,this.statusChanges=new dn}_calculateStatus(){return this._allControlsDisabled()?Ib:this.errors?OT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hg)?hg:this._anyControlsHaveStatus(OT)?OT:Eb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new MN(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new PN(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){LT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function iIe(n){return Array.isArray(n)?TN(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function sIe(n){return Array.isArray(n)?AN(n):n||null}(this._rawAsyncValidators)}}class uf extends VT{constructor(e,t,r){super(kN(t),NN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){f8(this,0,e),Object.keys(e).forEach(r=>{h8(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class p8 extends uf{}const df=new ye("CallSetDisabledState",{providedIn:"root",factory:()=>wb}),wb="always";function BT(n,e){return[...e.path,n]}function Cb(n,e,t=wb){ON(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function aIe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&m8(n,e)})}(n,e),function cIe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function lIe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&m8(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function oIe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function UT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),zT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function jT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ON(n,e){const t=i8(n);null!==e.validator?n.setValidators(r8(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=s8(n);null!==e.asyncValidator?n.setAsyncValidators(r8(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();jT(e._rawValidators,i),jT(e._rawAsyncValidators,i)}function zT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=i8(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=s8(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return jT(e._rawValidators,r),jT(e._rawAsyncValidators,r),t}function m8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function g8(n,e){ON(n,e)}function LN(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function _8(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function VN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===dg?t=s:function hIe(n){return Object.getPrototypeOf(n.constructor)===cf}(s)?r=s:i=s}),i||r||t||null}const pIe={provide:eo,useExisting:Qn(()=>HT)},Tb=Promise.resolve();let HT=(()=>{class n extends eo{get submitted(){return Xa(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=db(()=>this.submittedReactive()),this.submittedReactive=qh(!1),this._directives=new Set,this.ngSubmit=new dn,this.form=new uf({},TN(t),AN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Tb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Cb(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Tb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Tb.then(()=>{const r=this._findContainer(t.path),i=new uf({});g8(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Tb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Tb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),_8(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(De(Ds,10),De(Yu,10),De(df,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&jt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sr([pIe]),bn]})}}return n})();function y8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function v8(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const pg=class extends VT{constructor(e=null,t,r){super(kN(t),NN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),LT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=v8(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){y8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){y8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){v8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},_Ie={provide:Xu,useExisting:Qn(()=>$T)},I8=Promise.resolve();let $T=(()=>{class n extends Xu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new pg,this._registered=!1,this.name="",this.update=new dn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=VN(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),LN(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){I8.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&si(r);I8.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?BT(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(De(eo,9),De(Ds,10),De(Yu,10),De(el,10),De(Ea,8),De(df,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sr([_Ie]),bn,as]})}}return n})(),BN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const UN=new ye(""),wIe={provide:eo,useExisting:Qn(()=>WT)};let WT=(()=>{class n extends eo{get submitted(){return Xa(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=db(()=>this._submittedReactive()),this._submittedReactive=qh(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new dn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Cb(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){UT(t.control||null,t,!1),function fIe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),_8(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new nIe(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new rIe(this.form))}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(UT(r||null,t),(n=>n instanceof pg)(i)&&(Cb(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);g8(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function uIe(n,e){return zT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ON(this.form,this),this._oldForm&&zT(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||n)(De(Ds,10),De(Yu,10),De(df,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&jt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sr([wIe]),bn,as]})}}return n})();const AIe={provide:Xu,useExisting:Qn(()=>HN)};let HN=(()=>{class n extends Xu{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new dn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=VN(0,s)}ngOnChanges(t){this._added||this._setUpControl(),LN(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return BT(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(De(eo,13),De(Ds,10),De(Yu,10),De(el,10),De(UN,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[sr([AIe]),bn,as]})}}return n})(),B8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({})}}return n})();class U8 extends VT{constructor(e,t,r){super(kN(t),NN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){f8(this,0,e),e.forEach((r,i)=>{h8(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function j8(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let jIe=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return j8(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new uf(i,s)}record(t,r=null){const i=this._reduceControls(t);return new p8(i,r)}control(t,r,i){let s={};return this.useNonNullable?(j8(r)?s=r:(s.validators=r,s.asyncValidators=i),new pg(t,{...s,nonNullable:!0})):new pg(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new U8(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof pg||t instanceof VT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:df,useValue:t.callSetDisabledState??wb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({imports:[B8]})}}return n})(),z8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:UN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:df,useValue:t.callSetDisabledState??wb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({imports:[B8]})}}return n})();function GT(...n){const e=_b(n),t=_N(n),{args:r,keys:i}=Lq(n);if(0===r.length)return Wn([],e);const s=new Vt(function zIe(n,e,t=Ri){return r=>{H8(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)H8(e,()=>{const c=Wn(n[l],e);let u=!1;c.subscribe(Ne(r,h=>{s[l]=h,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Vq(i,o):Ri));return t?s.pipe(CN(t)):s}function H8(n,e,t){n?Oc(t,n,e):e()}const qT=Zr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function mg(n=1/0){return Qi(Ri,n)}function Ab(...n){return function HIe(){return mg(1)}()(Wn(n,_b(n)))}function Sb(n){return new Vt(e=>{Js(n()).subscribe(e)})}function xb(n,e){const t=pt(n)?n:()=>n,r=i=>i.error(t());return new Vt(e?i=>e.schedule(r,0,i):r)}const tl=new Vt(n=>n.complete());function QN(){return me((n,e)=>{let t=null;n._refCount++;const r=Ne(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class $8 extends Vt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,j(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xt;const t=this.getSubject();e.add(this.source.subscribe(Ne(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xt.EMPTY)}return e}refCount(){return QN()(this)}}function Yi(n){return n<=0?()=>tl:me((e,t)=>{let r=0;e.subscribe(Ne(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function nl(...n){const e=_b(n);return me((t,r)=>{(e?Ab(n,t,e):Ab(n,t)).subscribe(r)})}function KT(n){return me((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function W8(n=WIe){return me((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function WIe(){return new qT}function Zu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qr((i,s)=>n(i,s,r)):Ri,Yi(1),t?KT(e):W8(()=>new qT))}function oi(n,e,t){const r=pt(n)||e||t?{next:n,error:e,complete:t}:n;return r?me((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ne(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Ri}function Ju(n){return me((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Ne(t,void 0,void 0,o=>{s=Js(n(o,Ju(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function gg(n,e){return me(function GIe(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Ne(o,u=>{const h=c++;l=a?n(l,u,h):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function YN(n){return n<=0?()=>tl:me((e,t)=>{let r=[];e.subscribe(Ne(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function G8(n){return Le(()=>n)}function _g(n){return me((e,t)=>{Js(n).subscribe(Ne(t,()=>t.complete(),gs)),!t.closed&&e.subscribe(t)})}const Zt="primary",Db=Symbol("RouteTitle");class KIe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function yg(n){return new KIe(n)}function QIe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function kl(n,e){const t=n?XN(n):void 0,r=e?XN(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!q8(n[i],e[i]))return!1;return!0}function XN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function q8(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function K8(n){return n.length>0?n[n.length-1]:null}function ed(n){return function KN(n){return!!n&&(n instanceof Vt||pt(n.lift)&&pt(n.subscribe))}(n)?n:ob(n)?Wn(Promise.resolve(n)):Ke(n)}const XIe={exact:function X8(n,e,t){if(!pf(n.segments,e.segments)||!QT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!X8(n.children[r],e.children[r],t))return!1;return!0},subset:Z8},Q8={exact:function ZIe(n,e){return kl(n,e)},subset:function JIe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>q8(n[t],e[t]))},ignored:()=>!0};function Y8(n,e,t){return XIe[t.paths](n.root,e.root,t.matrixParams)&&Q8[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Z8(n,e,t){return J8(n,e,e.segments,t)}function J8(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!pf(i,t)||e.hasChildren()||!QT(i,t,r))}if(n.segments.length===t.length){if(!pf(n.segments,t)||!QT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Z8(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(pf(n.segments,i)&&QT(n.segments,i,r)&&n.children[Zt])&&J8(n.children[Zt],e,s,r)}}function QT(n,e,t){return e.every((r,i)=>Q8[t](n[i].parameters,r.parameters))}class ff{constructor(e=new tr([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yg(this.queryParams),this._queryParamMap}toString(){return nwe.serialize(this)}}class tr{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return XT(this)}}class Rb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=yg(this.parameters),this._parameterMap}toString(){return n9(this)}}function pf(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let vg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>new YT,providedIn:"root"})}}return n})();class YT{parse(e){const t=new fwe(e);return new ff(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Mb(e.root,!0)}`,r=function swe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ZT(t)}=${ZT(i)}`).join("&"):`${ZT(t)}=${ZT(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function rwe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const nwe=new YT;function XT(n){return n.segments.map(e=>n9(e)).join("/")}function Mb(n,e){if(!n.hasChildren())return XT(n);if(e){const t=n.children[Zt]?Mb(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Zt&&r.push(`${i}:${Mb(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function twe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Zt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Zt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Zt?[Mb(n.children[Zt],!1)]:[`${i}:${Mb(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${XT(n)}/${t[0]}`:`${XT(n)}/(${t.join("//")})`}}function e9(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ZT(n){return e9(n).replace(/%3B/gi,";")}function ZN(n){return e9(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function JT(n){return decodeURIComponent(n)}function t9(n){return JT(n.replace(/\+/g,"%20"))}function n9(n){return`${ZN(n.path)}${function iwe(n){return Object.entries(n).map(([e,t])=>`;${ZN(e)}=${ZN(t)}`).join("")}(n.parameters)}`}const owe=/^[^\/()?;#]+/;function JN(n){const e=n.match(owe);return e?e[0]:""}const awe=/^[^\/()?;=#]+/,cwe=/^[^=?&#]+/,dwe=/^[^&#]+/;class fwe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tr([],{}):new tr([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new tr(e,t)),r}parseSegment(){const e=JN(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Rb(JT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function lwe(n){const e=n.match(awe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=JN(this.remaining);i&&(r=i,this.capture(r))}e[JT(t)]=JT(r)}parseQueryParam(e){const t=function uwe(n){const e=n.match(cwe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function hwe(n){const e=n.match(dwe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=t9(t),s=t9(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=JN(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Zt]:new tr([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}}function r9(n){return n.segments.length>0?new tr([],{[Zt]:n}):n}function i9(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=i9(i);if(r===Zt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function pwe(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new tr(n.segments.concat(e.segments),e.children)}return n}(new tr(n.segments,e))}function mf(n){return n instanceof ff}function s9(n){let e;const i=r9(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new tr(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function o9(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return e1(i,i,i,t,r);const s=function gwe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new l9(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new l9(t,e,r)}(e);if(s.toRoot())return e1(i,i,new tr([],{}),t,r);const o=function _we(n,e,t){if(n.isAbsolute)return new tA(e,!0,0);if(!t)return new tA(e,!1,NaN);if(null===t.parent)return new tA(t,!0,0);const r=eA(n.commands[0])?0:1;return function ywe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new tA(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?kb(o.segmentGroup,o.index,s.commands):c9(o.segmentGroup,o.index,s.commands);return e1(i,o.segmentGroup,a,t,r)}function eA(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Pb(n){return"object"==typeof n&&null!=n&&n.outlets}function e1(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:a9(n,e,t);const a=r9(i9(o));return new ff(a,s,i)}function a9(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:a9(s,e,t)}),new tr(n.segments,r)}class l9{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&eA(r[0]))throw new K(4003,!1);const i=r.find(Pb);if(i&&i!==K8(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function c9(n,e,t){if(n??=new tr([],{}),0===n.segments.length&&n.hasChildren())return kb(n,e,t);const r=function bwe(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Pb(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!d9(l,c,o))return s;r+=2}else{if(!d9(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new tr(n.segments.slice(0,r.pathIndex),{});return s.children[Zt]=new tr(n.segments.slice(r.pathIndex),n.children),kb(s,0,i)}return r.match&&0===i.length?new tr(n.segments,{}):r.match&&!n.hasChildren()?t1(n,e,t):r.match?kb(n,0,i):t1(n,e,t)}function kb(n,e,t){if(0===t.length)return new tr(n.segments,{});{const r=function vwe(n){return Pb(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Zt)&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const s=kb(n.children[Zt],e,t);return new tr(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=c9(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new tr(n.segments,i)}}function t1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Pb(s)){const l=Ewe(s.outlets);return new tr(r,l)}if(0===i&&eA(t[0])){r.push(new Rb(n.segments[e].path,u9(t[0]))),i++;continue}const o=Pb(s)?s.outlets[Zt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&eA(a)?(r.push(new Rb(o,u9(a))),i+=2):(r.push(new Rb(o,{})),i++)}return new tr(r,{})}function Ewe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=t1(new tr([],{}),0,r))}),e}function u9(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function d9(n,e,t){return n==t.path&&kl(e,t.parameters)}const Nb="imperative";var In=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(In||{});class Nl{constructor(e,t){this.id=e,this.url=t}}class nA extends Nl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=In.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fc extends Nl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=In.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Qo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qo||{}),rA=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(rA||{});class gf extends Nl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=In.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bg extends Nl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=In.NavigationSkipped}}class n1 extends Nl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=In.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class h9 extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=In.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Iwe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=In.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wwe extends Nl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=In.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cwe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=In.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Twe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=In.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Awe{constructor(e){this.route=e,this.type=In.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Swe{constructor(e){this.route=e,this.type=In.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xwe{constructor(e){this.snapshot=e,this.type=In.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dwe{constructor(e){this.snapshot=e,this.type=In.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rwe{constructor(e){this.snapshot=e,this.type=In.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mwe{constructor(e){this.snapshot=e,this.type=In.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class f9{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=In.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class r1{}class iA{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function rl(n){return n.outlet||Zt}function Ob(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Lwe{get injector(){return Ob(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Fb(this.rootInjector),this.attachRef=null}}let Fb=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Lwe(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Re(Oi))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class p9{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=s1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=s1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=o1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return o1(e,this._root).map(t=>t.value)}}function s1(n,e){if(n===e.value)return e;for(const t of e.children){const r=s1(n,t);if(r)return r}return null}function o1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=o1(n,t);if(r.length)return r.unshift(e),r}return[]}class il{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Eg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class m9 extends p9{constructor(e,t){super(e),this.snapshot=t,a1(this,e)}toString(){return this.snapshot.toString()}}function g9(n){const e=function Vwe(n){const s=new oA([],{},{},"",{},Zt,n,null,{});return new _9("",new il(s,[]))}(n),t=new F([new Rb("",{})]),r=new F({}),i=new F({}),s=new F({}),o=new F(""),a=new Ig(t,r,s,o,i,Zt,n,e.root);return a.snapshot=e.root,new m9(new il(a,[]),e)}class Ig{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Le(c=>c[Db]))??Ke(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Le(e=>yg(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Le(e=>yg(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sA(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&v9(i)&&(r.resolve[Db]=i.title),r}class oA{get title(){return this.data?.[Db]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yg(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yg(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _9 extends p9{constructor(e,t){super(t),this.url=e,a1(this,t)}toString(){return y9(this._root)}}function a1(n,e){e.value._routerState=n,e.children.forEach(t=>a1(n,t))}function y9(n){const e=n.children.length>0?` { ${n.children.map(y9).join(", ")} } `:"";return`${n.value}${e}`}function l1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kl(e.params,t.params)||n.paramsSubject.next(t.params),function YIe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),kl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function c1(n,e){const t=kl(n.params,e.params)&&function ewe(n,e){return pf(n,e)&&n.every((t,r)=>kl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||c1(n.parent,e.parent))}function v9(n){return"string"==typeof n.title||null===n.title}let u1=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new dn,this.deactivateEvents=new dn,this.attachEvents=new dn,this.detachEvents=new dn,this.parentContexts=k(Fb),this.location=k(Co),this.changeDetector=k(Ea),this.inputBinder=k(aA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new d1(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[as]})}}return n})();class d1{__ngOutletInjector(e){return new d1(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ig?this.route:e===Fb?this.childContexts:this.parent.get(e,t)}}const aA=new ye("");let b9=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=GT([r.queryParams,r.params,r.data]).pipe(Kt(([s,o,a],l)=>(a={...s,...o,...a},0===l?Ke(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function _ye(n){const e=Yt(n);if(!e)return null;const t=new Fv(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function Lb(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Uwe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lb(n,r,i);return Lb(n,r)})}(n,e,t);return new il(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Lb(n,a)),o}}const r=function jwe(n){return new Ig(new F(n.url),new F(n.params),new F(n.queryParams),new F(n.fragment),new F(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Lb(n,s));return new il(r,i)}}class h1{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const E9="ngNavigationCancelingError";function lA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=mf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=I9(!1,Qo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function I9(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[E9]=!0,t.cancellationCode=e,t}function w9(n){return!!n&&n[E9]}class $we{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),l1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Eg(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Eg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Eg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Eg(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Mwe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Dwe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(l1(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),l1(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class C9{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cA{constructor(e,t){this.component=e,this.route=t}}function Wwe(n,e,t){const r=n._root;return Vb(r,e?e._root:null,t,[r.value])}function wg(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function vR(n){return null!==yu(n)}(n)?e.get(n):n:r}function Vb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Eg(e);return n.children.forEach(o=>{(function qwe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Kwe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pf(n.url,e.url)||!kl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!c1(n,e)||!kl(n.queryParams,e.queryParams);default:return!c1(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new C9(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Vb(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new cA(a.outlet.component,o))}else o&&Bb(e,a,i),i.canActivateChecks.push(new C9(r)),Vb(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Bb(a,t.getContext(o),i)),i}function Bb(n,e,t){const r=Eg(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Bb(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new cA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ub(n){return"function"==typeof n}function T9(n){return n instanceof qT||"EmptyError"===n?.name}const uA=Symbol("INITIAL_VALUE");function Cg(){return Kt(n=>GT(n.map(e=>e.pipe(Yi(1),nl(uA)))).pipe(Le(e=>{for(const t of e)if(!0!==t){if(t===uA)return uA;if(!1===t||t0e(t))return t}return!0}),Qr(e=>e!==uA),Yi(1)))}function t0e(n){return mf(n)||n instanceof h1}function A9(n){return function Va(...n){return da(n)}(oi(e=>{if("boolean"!=typeof e)throw lA(0,e)}),Le(e=>!0===e))}class f1{constructor(e){this.segmentGroup=e||null}}class dA extends Error{constructor(e){super(),this.urlTree=e}}function Tg(n){return xb(new f1(n))}class p0e{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ke(r);if(i.numberOfChildren>1||!i.children[Zt])return xb(new K(4e3,!1));i=i.children[Zt]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:l,fragment:c,routeConfig:u,url:h,outlet:m,params:y,data:b,title:T}=i,M=Is(s,()=>a({params:y,data:b,queryParams:l,fragment:c,routeConfig:u,url:h,outlet:m,title:T}));if(M instanceof ff)throw new dA(M);t=M}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new dA(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new ff(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new tr(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const p1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function m0e(n,e,t,r,i){const s=S9(n,e,t);return s.matched?(r=function Pwe(n,e){return n.providers&&!n._injector&&(n._injector=wC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function d0e(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ke(i.map(o=>{const a=wg(o,n);return ed(function e0e(n){return n&&Ub(n.canMatch)}(a)?a.canMatch(e,t):Is(n,()=>a(e,t)))})).pipe(Cg(),A9()):Ke(!0)}(r,e,t).pipe(Le(o=>!0===o?s:{...p1}))):Ke(s)}function S9(n,e,t){if("**"===e.path)return function g0e(n){return{matched:!0,parameters:n.length>0?K8(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...p1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||QIe)(t,n,e);if(!i)return{...p1};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function x9(n,e,t,r){return t.length>0&&function v0e(n,e,t){return t.some(r=>hA(n,e,r)&&rl(r)!==Zt)}(n,t,r)?{segmentGroup:new tr(e,y0e(r,new tr(t,n.children))),slicedSegments:[]}:0===t.length&&function b0e(n,e,t){return t.some(r=>hA(n,e,r))}(n,t,r)?{segmentGroup:new tr(n.segments,_0e(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new tr(n.segments,n.children),slicedSegments:t}}function _0e(n,e,t,r){const i={};for(const s of t)if(hA(n,e,s)&&!r[rl(s)]){const o=new tr([],{});i[rl(s)]=o}return{...r,...i}}function y0e(n,e){const t={};t[Zt]=e;for(const r of n)if(""===r.path&&rl(r)!==Zt){const i=new tr([],{});t[rl(r)]=i}return t}function hA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class I0e{}class T0e{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new p0e(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){const e=x9(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Le(({children:t,rootSnapshot:r})=>{const i=new il(r,t),s=new _9("",i),o=function mwe(n,e,t=null,r=null){return o9(s9(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new oA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Zt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Zt,t).pipe(Le(r=>({children:r,rootSnapshot:t})),Ju(r=>{if(r instanceof dA)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof f1?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Le(o=>o instanceof il?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return Wn(s).pipe(lg(o=>{const a=r.children[o],l=function Fwe(n,e){const t=n.filter(r=>rl(r)===e);return t.push(...n.filter(r=>rl(r)!==e)),t}(t,o);return this.processSegmentGroup(e,l,a,o,i)}),gg((o,a)=>(o.push(...a),o)),KT(null),function qIe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qr((i,s)=>n(i,s,r)):Ri,YN(1),t?KT(e):W8(()=>new qT))}(),Qi(o=>{if(null===o)return Tg(r);const a=D9(o);return function A0e(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Ke(a)}))}processSegment(e,t,r,i,s,o,a){return Wn(t).pipe(lg(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(Ju(c=>{if(c instanceof f1)return Ke(null);throw c}))),Zu(l=>!!l),Ju(l=>{if(T9(l))return function E0e(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?Ke(new I0e):Tg(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return rl(r)===o||o!==Zt&&hA(i,s,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):Tg(i):Tg(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:h,remainingSegments:m}=S9(t,i,s);if(!l)return Tg(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const y=new oA(s,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R9(i),rl(i),i.component??i._loadedComponent??null,i,M9(i)),b=sA(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);const T=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,y,e);return this.applyRedirects.lineralizeSegments(i,T).pipe(Qi(M=>this.processSegment(e,r,t,M.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=m0e(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(Kt(l=>l.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Kt(({routes:c})=>{const u=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:y}=l,b=new oA(m,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R9(r),rl(r),r.component??r._loadedComponent??null,r,M9(r)),T=sA(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(T.params),b.data=Object.freeze(T.data);const{segmentGroup:M,slicedSegments:B}=x9(t,m,y,c);if(0===B.length&&M.hasChildren())return this.processChildren(u,c,M,b).pipe(Le(Q=>new il(b,Q)));if(0===c.length&&0===B.length)return Ke(new il(b,[]));const V=rl(r)===s;return this.processSegment(u,c,M,B,V?Zt:s,!0,b).pipe(Le(Q=>new il(b,Q instanceof il?[Q]:[])))})):Tg(t)))}getChildConfig(e,t,r){return t.children?Ke({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ke({routes:t._loadedRoutes,injector:t._loadedInjector}):function u0e(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ke(!0):Ke(i.map(o=>{const a=wg(o,n);return ed(function Ywe(n){return n&&Ub(n.canLoad)}(a)?a.canLoad(e,t):Is(n,()=>a(e,t)))})).pipe(Cg(),A9())}(e,t,r).pipe(Qi(i=>i?this.configLoader.loadChildren(e,t).pipe(oi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function f0e(){return xb(I9(!1,Qo.GuardRejected))}())):Ke({routes:[],injector:e})}}function S0e(n){const e=n.value.routeConfig;return e&&""===e.path}function D9(n){const e=[],t=new Set;for(const r of n){if(!S0e(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=D9(r.children);e.push(new il(r.value,i))}return e.filter(r=>!t.has(r))}function R9(n){return n.data||{}}function M9(n){return n.resolve||{}}function P9(n){const e=n.children.map(t=>P9(t)).flat();return[n,...e]}function m1(n){return Kt(e=>{const t=n(e);return t?Wn(t).pipe(Le(()=>e)):Ke(e)})}let k9=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[Db]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>k(k0e),providedIn:"root"})}}return n})(),k0e=(()=>{class n extends k9{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Re(Fbe))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ag=new ye("",{providedIn:"root",factory:()=>({})});let N9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vn({type:n,selectors:[["ng-component"]],standalone:!0,features:[ii],decls:1,vars:0,template:function(r,i){1&r&&Xt(0,"router-outlet")},dependencies:[u1],encapsulation:2})}}return n})();function g1(n){const e=n.children&&n.children.map(g1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=N9),t}const Sg=new ye("");let _1=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(h6)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ke(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ed(t.loadComponent()).pipe(Le(O9),oi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),cg(()=>{this.componentLoaders.delete(t)})),i=new $8(r,()=>new E).pipe(QN());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ke({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function N0e(n,e,t,r){return ed(n.loadChildren()).pipe(Le(O9),Qi(i=>i instanceof x3||Array.isArray(i)?Ke(i):Wn(e.compileModuleAsync(i))),Le(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Sg,[],{optional:!0,self:!0}).flat()),{routes:o.map(g1),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(cg(()=>{this.childrenLoaders.delete(r)})),o=new $8(s,()=>new E).pipe(QN());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function O9(n){return function O0e(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let y1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>k(F0e),providedIn:"root"})}}return n})(),F0e=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const F9=new ye(""),L9=new ye("");function L0e(n,e,t){const r=n.get(L9),i=n.get(pn);return n.get(_t).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s;const o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),function V0e(n){return new Promise(e=>{Dc({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:l}=r;return l&&Is(n,()=>l({transition:a,from:e,to:t})),o})}const V9=new ye("");let fA=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new E,this.transitionAbortSubject=new E,this.configLoader=k(_1),this.environmentInjector=k(Oi),this.urlSerializer=k(vg),this.rootContexts=k(Fb),this.location=k(sg),this.inputBindingEnabled=null!==k(aA,{optional:!0}),this.titleStrategy=k(k9),this.options=k(Ag,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(y1),this.createViewTransition=k(F9,{optional:!0}),this.navigationErrorHandler=k(V9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ke(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Swe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Awe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new F({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Nb,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qr(s=>0!==s.id),Le(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Kt(s=>{let o=!1,a=!1;return Ke(s).pipe(Kt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Qo.SupersededByNewNavigation),tl;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:"string"==typeof l.extras.browserUrl?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new bg(l.id,this.urlSerializer.serialize(l.rawUrl),h,rA.IgnoredSameUrlNavigation)),l.resolve(!1),tl}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ke(l).pipe(Kt(h=>{const m=this.transitions?.getValue();return this.events.next(new nA(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?tl:Promise.resolve(h)}),function x0e(n,e,t,r,i,s){return Qi(o=>function w0e(n,e,t,r,i,s,o="emptyOnly"){return new T0e(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Le(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),oi(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const m=new h9(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:h,extractedUrl:m,source:y,restoredState:b,extras:T}=l,M=new nA(h,this.urlSerializer.serialize(m),y,b);this.events.next(M);const B=g9(this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:B,urlAfterRedirects:m,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=m,Ke(s)}{const h="";return this.events.next(new bg(l.id,this.urlSerializer.serialize(l.extractedUrl),h,rA.IgnoredByUrlHandlingStrategy)),l.resolve(!1),tl}}),oi(l=>{const c=new Iwe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Le(l=>(this.currentTransition=s={...l,guards:Wwe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function n0e(n,e){return Qi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ke({...t,guardsResult:!0}):function r0e(n,e,t,r){return Wn(n).pipe(Qi(i=>function c0e(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ke(s.map(a=>{const l=Ob(e)??i,c=wg(a,l);return ed(function Jwe(n){return n&&Ub(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):Is(l,()=>c(n,e,t,r))).pipe(Zu())})).pipe(Cg()):Ke(!0)}(i.component,i.route,t,e,r)),Zu(i=>!0!==i,!0))}(o,r,i,n).pipe(Qi(a=>a&&function Qwe(n){return"boolean"==typeof n}(a)?function i0e(n,e,t,r){return Wn(e).pipe(lg(i=>Ab(function o0e(n,e){return null!==n&&e&&e(new xwe(n)),Ke(!0)}(i.route.parent,r),function s0e(n,e){return null!==n&&e&&e(new Rwe(n)),Ke(!0)}(i.route,r),function l0e(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Gwe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Sb(()=>Ke(o.guards.map(l=>{const c=Ob(o.node)??t,u=wg(l,c);return ed(function Zwe(n){return n&&Ub(n.canActivateChild)}(u)?u.canActivateChild(r,n):Is(c,()=>u(r,n))).pipe(Zu())})).pipe(Cg())));return Ke(s).pipe(Cg())}(n,i.path,t),function a0e(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ke(!0);const i=r.map(s=>Sb(()=>{const o=Ob(e)??t,a=wg(s,o);return ed(function Xwe(n){return n&&Ub(n.canActivate)}(a)?a.canActivate(e,n):Is(o,()=>a(e,n))).pipe(Zu())}));return Ke(i).pipe(Cg())}(n,i.route,t))),Zu(i=>!0!==i,!0))}(r,s,n,e):Ke(a)),Le(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),oi(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw lA(0,l.guardsResult);const c=new wwe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Qr(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",Qo.GuardRejected),!1)),m1(l=>{if(l.guards.canActivateChecks.length)return Ke(l).pipe(oi(c=>{const u=new Cwe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Kt(c=>{let u=!1;return Ke(c).pipe(function D0e(n,e){return Qi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ke(t);const s=new Set(i.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const c of P9(l))o.add(c);let a=0;return Wn(o).pipe(lg(l=>s.has(l)?function R0e(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!v9(i)&&(s[Db]=i.title),function M0e(n,e,t,r){const i=XN(n);if(0===i.length)return Ke({});const s={};return Wn(i).pipe(Qi(o=>function P0e(n,e,t,r){const i=Ob(e)??r,s=wg(n,i);return ed(s.resolve?s.resolve(e,t):Is(i,()=>s(e,t)))}(n[o],e,t,r).pipe(Zu(),oi(a=>{if(a instanceof h1)throw lA(new YT,a);s[o]=a}))),YN(1),G8(s),Ju(o=>T9(o)?tl:xb(o)))}(s,n,e,r).pipe(Le(o=>(n._resolvedData=o,n.data=sA(n,n.parent,t).resolve,null)))}(l,r,n,e):(l.data=sA(l,l.parent,n).resolve,Ke(void 0))),oi(()=>a++),YN(1),Qi(l=>a===o.size?Ke(t):tl))})}(this.paramsInheritanceStrategy,this.environmentInjector),oi({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Qo.NoDataFromResolver)}}))}),oi(c=>{const u=new Twe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),m1(l=>{const c=u=>{const h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(oi(m=>{u.component=m}),Le(()=>{})));for(const m of u.children)h.push(...c(m));return h};return GT(c(l.targetSnapshot.root)).pipe(KT(null),Yi(1))}),m1(()=>this.afterPreactivation()),Kt(()=>{const{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?Wn(u).pipe(Le(()=>s)):Ke(s)}),Le(l=>{const c=function Bwe(n,e,t){const r=Lb(n,e._root,t?t._root:void 0);return new m9(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,s}),oi(()=>{this.events.next(new r1)}),((n,e,t,r)=>Le(i=>(new $we(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Yi(1),oi({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),_g(this.transitionAbortSubject.pipe(oi(l=>{throw l}))),cg(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Qo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ju(l=>{if(a=!0,w9(l))this.events.next(new gf(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function zwe(n){return w9(n)&&mf(n.url)}(l)?this.events.next(new iA(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{const c=new n1(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{const u=Is(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof h1){const{message:h,cancellationCode:m}=lA(0,u);this.events.next(new gf(s.id,this.urlSerializer.serialize(s.extractedUrl),h,m)),this.events.next(new iA(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);const h=t.errorHandler(l);s.resolve(!!h)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return tl}))}))}cancelNavigationTransition(t,r,i){const s=new gf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B0e(n){return n!==Nb}let U0e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>k(z0e),providedIn:"root"})}}return n})();class j0e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let z0e=(()=>{class n extends j0e{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})()}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),B9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>k(H0e),providedIn:"root"})}}return n})(),H0e=(()=>{class n extends B9{constructor(){super(...arguments),this.location=k(sg),this.urlSerializer=k(vg),this.options=k(Ag,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(y1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ff,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=g9(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof nA)this.stateMemento=this.createStateMemento();else if(t instanceof bg)this.rawUrlTree=r.initialUrl;else if(t instanceof h9){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof r1?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof gf&&(t.code===Qo.GuardRejected||t.code===Qo.NoDataFromResolver)?this.restoreHistory(r):t instanceof n1?this.restoreHistory(r,!0):t instanceof Fc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof ff?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})()}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jb=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(jb||{});function U9(n,e){n.events.pipe(Qr(t=>t instanceof Fc||t instanceof gf||t instanceof n1||t instanceof bg),Le(t=>t instanceof Fc||t instanceof bg?jb.COMPLETE:t instanceof gf&&(t.code===Qo.Redirect||t.code===Qo.SupersededByNewNavigation)?jb.REDIRECTING:jb.FAILED),Qr(t=>t!==jb.REDIRECTING),Yi(1)).subscribe(()=>{e()})}function $0e(n){throw n}const W0e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G0e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ol=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(t6),this.stateManager=k(B9),this.options=k(Ag,{optional:!0})||{},this.pendingTasks=k(Tc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(fA),this.urlSerializer=k(vg),this.location=k(sg),this.urlHandlingStrategy=k(y1),this._events=new E,this.errorHandler=this.options.errorHandler||$0e,this.navigated=!1,this.routeReuseStrategy=k(U0e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Sg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(aA,{optional:!0}),this.eventsSubscription=new xt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof gf&&r.code!==Qo.Redirect&&r.code!==Qo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fc)this.navigated=!0;else if(r instanceof iA){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||B0e(i.source),...o};this.scheduleNavigation(a,Nb,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function K0e(n){return!(n instanceof r1||n instanceof iA)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nb,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(g1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let h,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{h=s9(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),h=this.currentUrlTree.root}return o9(h,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=mf(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Nb,null,r)}navigate(t,r={skipLocationChange:!1}){return function q0e(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new K(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...W0e}:!1===r?{...G0e}:r,mf(t))return Y8(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Y8(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,m)=>{a=h,l=m});const u=this.pendingTasks.add();return U9(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class j9{}let X0e=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Qr(t=>t instanceof Fc),lg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=wC(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Wn(i).pipe(mg())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ke(null);const s=i.pipe(Qi(o=>null===o?Ke(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?Wn([s,this.loader.loadComponent(r)]).pipe(mg()):s})}static{this.\u0275fac=function(r){return new(r||n)(Re(Ol),Re(h6),Re(Oi),Re(j9),Re(_1))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const b1=new ye("");let z9=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof bg&&t.code===rA.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof f9&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new f9(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function eW(){throw new Error("invalid")}()}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function Fl(n,e){return{\u0275kind:n,\u0275providers:e}}function $9(){const n=k(Rn);return e=>{const t=n.get(ba);if(e!==t.components[0])return;const r=n.get(Ol),i=n.get(W9);1===n.get(E1)&&r.initialNavigation(),n.get(G9,null,Bt.Optional)?.setUpPreloading(),n.get(b1,null,Bt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const W9=new ye("",{factory:()=>new E}),E1=new ye("",{providedIn:"root",factory:()=>1}),G9=new ye("");function tCe(n){return Fl(0,[{provide:G9,useExisting:X0e},{provide:j9,useExisting:n}])}function rCe(n){return Fl(9,[{provide:F9,useValue:L0e},{provide:L9,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const q9=new ye("ROUTER_FORROOT_GUARD"),iCe=[sg,{provide:vg,useClass:YT},Ol,Fb,{provide:Ig,useFactory:function H9(n){return n.routerState.root},deps:[Ol]},_1,[]];let K9=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[iCe,[],{provide:Sg,multi:!0,useValue:t},{provide:q9,useFactory:lCe,deps:[[Ol,new Mi,new pc]]},{provide:Ag,useValue:r||{}},r?.useHash?{provide:tf,useClass:Iye}:{provide:tf,useClass:a7},{provide:b1,useFactory:()=>{const n=k(Lve),e=k(_t),t=k(Ag),r=k(fA),i=k(vg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new z9(i,r,n,e,t)}},r?.preloadingStrategy?tCe(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?cCe(r):[],r?.bindToComponentInputs?Fl(8,[b9,{provide:aA,useExisting:b9}]).\u0275providers:[],r?.enableViewTransitions?rCe().\u0275providers:[],[{provide:Q9,useFactory:$9},{provide:KC,multi:!0,useExisting:Q9}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Sg,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Re(q9,8))}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({})}}return n})();function lCe(n){return"guarded"}function cCe(n){return["disabled"===n.initialNavigation?Fl(3,[{provide:qC,multi:!0,useFactory:()=>{const e=k(Ol);return()=>{e.setUpLocationChangeListener()}}},{provide:E1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fl(2,[{provide:E1,useValue:0},{provide:qC,multi:!0,deps:[Rn],useFactory:e=>{const t=e.get(bye,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ol),s=e.get(W9);U9(i,()=>{r(!0)}),e.get(fA).afterPreactivation=()=>(r(!0),s.closed?Ke(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const Q9=new ye("");function Y9(n){return null!=n&&"false"!=`${n}`}function X9(n,e=0){return function dCe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):2===arguments.length?e:0}function pA(n){return Array.isArray(n)?n:[n]}function Ai(n){return null==n?"":"string"==typeof n?n:`${n}px`}function xg(n){return n instanceof jn?n.nativeElement:n}const hCe=["addListener","removeListener"],fCe=["addEventListener","removeEventListener"],pCe=["on","off"];function mA(n,e,t,r){if(pt(t)&&(r=t,t=void 0),r)return mA(n,e,t).pipe(CN(r));const[i,s]=function _Ce(n){return pt(n.addEventListener)&&pt(n.removeEventListener)}(n)?fCe.map(o=>a=>n[o](e,a,t)):function mCe(n){return pt(n.addListener)&&pt(n.removeListener)}(n)?hCe.map(Z9(n,e)):function gCe(n){return pt(n.on)&&pt(n.off)}(n)?pCe.map(Z9(n,e)):[];if(!i&&yN(n))return Qi(o=>mA(o,e,t))(Js(n));if(!i)throw new TypeError("Invalid event target");return new Vt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function Z9(n,e){return t=>r=>n[t](e,r)}class yCe extends xt{constructor(e,t){super()}schedule(e,t=0){return this}}const gA={setInterval(n,e,...t){const{delegate:r}=gA;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=gA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class _A extends yCe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return gA.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&gA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,tn(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const zb={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=zb;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new xt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=zb;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=zb;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},I1={now:()=>(I1.delegate||Date).now(),delegate:void 0};class Hb{constructor(e,t=Hb.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Hb.now=I1.now;class yA extends Hb{constructor(e,t=Hb.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class bCe extends yA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class vCe extends _A{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=zb.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(zb.cancelAnimationFrame(t),e._scheduled=void 0)}});let w1,ICe=1;const vA={};function J9(n){return n in vA&&(delete vA[n],!0)}const wCe={setImmediate(n){const e=ICe++;return vA[e]=!0,w1||(w1=Promise.resolve()),w1.then(()=>J9(e)&&n()),e},clearImmediate(n){J9(n)}},{setImmediate:CCe,clearImmediate:TCe}=wCe,bA={setImmediate(...n){const{delegate:e}=bA;return(e?.setImmediate||CCe)(...n)},clearImmediate(n){const{delegate:e}=bA;return(e?.clearImmediate||TCe)(n)},delegate:void 0},_f=(new class SCe extends yA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class ACe extends _A{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=bA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(bA.clearImmediate(t),e._scheduled=void 0)}}),new yA(_A)),DCe=_f;function eK(n=0,e,t=DCe){let r=-1;return null!=e&&(rq(e)?t=e:r=e),new Vt(i=>{let s=function MCe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function tK(n,e=_f){return function RCe(n){return me((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(Ne(t,c=>{r=!0,i=c,s||Js(n(c)).subscribe(s=Ne(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>eK(n,e))}let C1;try{C1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{C1=!1}let $b,Rs=(()=>{class n{_platformId=k(Gs);isBrowser=this._platformId?R7(this._platformId):"object"==typeof document&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!(!window.chrome&&!C1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rg(n){return function PCe(){if(null==$b&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>$b=!0}))}finally{$b=$b||!1}return $b}()?n:!!n.capture}var Ll=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Ll||{});let EA,yf,T1;function rK(){if(null==yf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return yf=!1,yf;if("scrollBehavior"in document.documentElement.style)yf=!0;else{const n=Element.prototype.scrollTo;yf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return yf}function Wb(){if("object"!=typeof document||!document)return Ll.NORMAL;if(null==EA){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),EA=Ll.NORMAL,0===n.scrollLeft&&(n.scrollLeft=1,EA=0===n.scrollLeft?Ll.NEGATED:Ll.INVERTED),n.remove()}return EA}function A1(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Vl(n){return n.composedPath?n.composedPath()[0]:n.target}function iK(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const OCe=new ye("cdk-dir-doc",{providedIn:"root",factory:function FCe(){return k(pn)}}),LCe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Mg=(()=>{class n{value="ltr";change=new dn;constructor(){const t=k(OCe,{optional:!0});t&&(this.value=function VCe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?LCe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({})}return n})(),sK=(()=>{class n{_ngZone=k(_t);_platform=k(Rs);_document=k(pn,{optional:!0});constructor(){}_scrolled=new E;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Vt(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(tK(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ke()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Qr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=xg(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>mA(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UCe=(()=>{class n{elementRef=k(jn);scrollDispatcher=k(sK);ngZone=k(_t);dir=k(Mg,{optional:!0});_destroyed=new E;_elementScrolled=new Vt(t=>this.ngZone.runOutsideAngular(()=>mA(this.elementRef.nativeElement,"scroll").pipe(_g(this._destroyed)).subscribe(t)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&Wb()!=Ll.NORMAL?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),Wb()==Ll.INVERTED?t.left=t.right:Wb()==Ll.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;rK()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?i:r:"end"==t&&(t=o?r:i),o&&Wb()==Ll.INVERTED?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Wb()==Ll.NEGATED?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),S1=(()=>{class n{_platform=k(Rs);_listeners;_viewportSize;_change=new E;_document=k(pn,{optional:!0});constructor(){const t=k(_t),r=k(Gh).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){const i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(tK(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({})}return n})(),oK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[Gb,qb,Gb,qb]})}return n})();class x1{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class D1 extends x1{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=s}}class IA extends x1{templateRef;viewContainerRef;context;injector;constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class zCe extends x1{element;constructor(e){super(),this.element=e instanceof jn?e.nativeElement:e}}class R1{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof D1?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof IA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof zCe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class HCe extends R1{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,r,i,s){super(),this.outletElement=e,this._appRef=r,this._defaultInjector=i,this._document=s}attachComponentPortal(e){let t;if(e.viewContainerRef){const r=e.injector||e.viewContainerRef.injector,i=r.get(xc,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else t=r7(e.component,{elementInjector:e.injector||this._defaultInjector||Rn.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(t.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(t.hostView),t.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}attachDomPortal=e=>{const t=e.element,r=this._document.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let M1=(()=>{class n extends R1{_moduleRef=k(xc,{optional:!0});_document=k(pn);_viewContainerRef=k(Co);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new dn;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,i=r.createComponent(t.component,{index:r.length,injector:t.injector||r.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=t=>{const r=t.element,i=this._document.createComment("dom-portal");t.setAttachedHost(this),r.parentNode.insertBefore(i,r),this._getRootNode().appendChild(r),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(r,i)})};_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[bn]})}return n})(),wA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({})}return n})();const CA=new WeakMap;let td=(()=>{class n{_appRef;_injector=k(Rn);_environmentInjector=k(Oi);load(t){const r=this._appRef=this._appRef||this._injector.get(ba);let i=CA.get(r);i||(i={loaders:new Set,refs:[]},CA.set(r,i),r.onDestroy(()=>{CA.get(r)?.refs.forEach(s=>s.destroy()),CA.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(r7(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],standalone:!0,features:[ii],decls:0,vars:0,template:function(r,i){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function nd(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function F1(n,e=_f){return me((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(Ne(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function uK(n){return Qr((e,t)=>n<=t)}function AA(n,e=Ri){return n=n??rTe,me((t,r)=>{let i,s=!0;t.subscribe(Ne(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function rTe(n,e){return n===e}let iTe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[iTe]})}return n})();const fK=new Set;let vf,sTe=(()=>{class n{_platform=k(Rs);_nonce=k(DM,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):aTe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function oTe(n,e){if(!fK.has(n))try{vf||(vf=document.createElement("style"),e&&vf.setAttribute("nonce",e),vf.setAttribute("type","text/css"),document.head.appendChild(vf)),vf.sheet&&(vf.sheet.insertRule(`@media ${n} {body{ }}`,0),fK.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aTe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let pK=(()=>{class n{_mediaMatcher=k(sTe);_zone=k(_t);_queries=new Map;_destroySubject=new E;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return mK(pA(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=GT(mK(pA(t)).map(o=>this._registerQuery(o).observable));return s=Ab(s.pipe(Yi(1)),s.pipe(uK(1),F1(0))),s.pipe(Le(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Vt(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(nl(r),Le(({matches:o})=>({query:t,matches:o})),_g(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mK(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function _K(n,e,t){const r=yK(n,e);t=t.trim(),!r.some(i=>i.trim()===t)&&(r.push(t),n.setAttribute(e,r.join(" ")))}function L1(n,e,t){const r=yK(n,e);t=t.trim();const i=r.filter(s=>s!==t);i.length?n.setAttribute(e,i.join(" ")):n.removeAttribute(e)}function yK(n,e){return n.getAttribute(e)?.match(/\S+/g)??[]}class vK{_letterKeyStream=new E;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new E;selectedItem=this._selectedItem;constructor(e,t){const r="number"==typeof t?.debounceInterval?t.debounceInterval:200;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){const t=e.keyCode;e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(oi(t=>this._pressedLetters.push(t)),F1(e),Qr(()=>this._pressedLetters.length>0),Le(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let r=1;r<this._items.length+1;r++){const s=this._items[(this._selectedItemIndex+r)%this._items.length];if(!this._skipPredicateFn?.(s)&&0===s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)){this._selectedItem.next(s);break}}this._pressedLetters=[]})}}class bK{_items;_activeItemIndex=-1;_activeItem=qh(null);_wrap=!1;_typeaheadSubscription=xt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof Fh?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):Lv(e)&&(this._effectRef=function n7(n,e){qs("NgSignals"),!e?.injector&&Fr();const t=e?.injector??k(Rn),r=!0!==e?.manualCleanup?t.get(cv):null,i=new gye(t.get(fye),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(Ea,null,{optional:!0});return s&&8&s._lView[dt]?(s._lView[Ch]??=[]).push(i.watcher.notify):i.watcher.notify(),i}(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new E;change=new E;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();const t=this._getItemsArray();return this._typeahead=new vK(t,{debounceInterval:"number"==typeof e?e:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((i||nd(e,"shiftKey"))&&this._typeahead?.handleKey(e))}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem.set(t[r]??null),this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return Lv(this._items)?this._items():this._items instanceof Fh?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);const t=this._activeItem();if(t){const r=e.indexOf(t);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r))}}}class hTe extends bK{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class fTe extends bK{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let wK=(()=>{class n{_platform=k(Rs);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function yTe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function _Te(n){try{return n.frameElement}catch{return null}}(function ATe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===TK(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=TK(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function CTe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function TTe(n){return!function bTe(n){return function ITe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function vTe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function ETe(n){return function wTe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||CK(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CK(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function TK(n){if(!CK(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class AK{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,r,i,s=!1,o){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._injector=o,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Dc(e,{injector:this._injector}):setTimeout(e)}}let STe=(()=>{class n{_checker=k(wK);_ngZone=k(_t);_document=k(pn);_injector=k(Rn);constructor(){k(td).load(aK)}create(t,r=!1){return new AK(t,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V1(n){return 0===n.buttons||0===n.detail}function B1(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const xTe=new ye("cdk-input-modality-detector-options"),DTe={ignoreKeys:[18,17,224,91,16]},Pg=Rg({passive:!0,capture:!0});let RTe=(()=>{class n{_platform=k(Rs);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new F(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Vl(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(V1(t)?"keyboard":"mouse"),this._mostRecentTarget=Vl(t))};_onTouchstart=t=>{B1(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vl(t))};constructor(){const t=k(_t),r=k(pn),i=k(xTe,{optional:!0});this._options={...DTe,...i},this.modalityDetected=this._modality.pipe(uK(1)),this.modalityChanged=this.modalityDetected.pipe(AA()),this._platform.isBrowser&&t.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Pg),r.addEventListener("mousedown",this._onMousedown,Pg),r.addEventListener("touchstart",this._onTouchstart,Pg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Pg),document.removeEventListener("mousedown",this._onMousedown,Pg),document.removeEventListener("touchstart",this._onTouchstart,Pg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SA=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(SA||{});const PTe=new ye("cdk-focus-monitor-default-options"),xA=Rg({passive:!0,capture:!0});let DA=(()=>{class n{_ngZone=k(_t);_platform=k(Rs);_inputModalityDetector=k(RTe);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=k(pn,{optional:!0});_stopInputModalityDetector=new E;constructor(){const t=k(PTe,{optional:!0});this._detectionMode=t?.detectionMode||SA.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{for(let i=Vl(t);i;i=i.parentElement)"focus"===t.type?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){const i=xg(t);if(!this._platform.isBrowser||1!==i.nodeType)return Ke();const s=function NCe(n){if(function kCe(){if(null==T1){const n=typeof document<"u"?document.head:null;T1=!(!n||!n.createShadowRoot&&!n.attachShadow)}return T1}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new E,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=xg(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=xg(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===SA.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===SA.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Vl(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,xA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,xA)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(_g(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,xA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,xA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bf=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(bf||{});const xK="cdk-high-contrast-black-on-white",DK="cdk-high-contrast-white-on-black",U1="cdk-high-contrast-active";let RK=(()=>{class n{_platform=k(Rs);_hasCheckedHighContrastMode;_document=k(pn);_breakpointSubscription;constructor(){this._breakpointSubscription=k(pK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return bf.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return bf.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return bf.BLACK_ON_WHITE}return bf.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(U1,xK,DK),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===bf.BLACK_ON_WHITE?t.add(U1,xK):r===bf.WHITE_ON_BLACK&&t.add(U1,DK)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kTe=(()=>{class n{constructor(){k(RK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[hK]})}return n})();const j1={};let Ef=(()=>{class n{_appId=k(Lh);getId(t){return"ng"!==this._appId&&(t+=this._appId),j1.hasOwnProperty(t)||(j1[t]=0),`${t}${j1[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sl(...n){const e=_b(n),t=function jbe(n,e){return"number"==typeof gN(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Js(r[0]):mg(t)(Wn(r,e)):tl}const MK=rK();class NTe{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ai(-this._previousScrollPosition.left),e.style.top=Ai(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),MK&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),MK&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class OTe{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Qr(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}class PK{enable(){}disable(){}attach(){}}function z1(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function kK(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class FTe{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();z1(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let LTe=(()=>{class n{_scrollDispatcher=k(sK);_viewportRuler=k(S1);_ngZone=k(_t);_document=k(pn);constructor(){}noop=()=>new PK;close=t=>new OTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,t);block=()=>new NTe(this._viewportRuler,this._document);reposition=t=>new FTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,t);static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class RA{positionStrategy;scrollStrategy=new PK;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class VTe{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let NK=(()=>{class n{_attachedOverlays=[];_document=k(pn);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BTe=(()=>{class n extends NK{_ngZone=k(_t);_renderer=k(Gh).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{const r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UTe=(()=>{class n extends NK{_platform=k(Rs);_ngZone=k(_t,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=t=>{this._pointerDownEventTarget=Vl(t)};_clickListener=t=>{const r=Vl(t),i="click"===t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;const s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){const a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(OK(a.overlayElement,r)||OK(a.overlayElement,i))break;const l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OK(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let FK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],standalone:!0,features:[ii],decls:0,vars:0,template:function(r,i){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),H1=(()=>{class n{_platform=k(Rs);_containerElement;_document=k(pn);_styleLoader=k(td);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||iK()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),iK()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(FK)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class $1{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropElement=null;_backdropTimeout;_backdropClick=new E;_attachments=new E;_detachments=new E;_positionStrategy;_scrollStrategy;_locationChanges=xt.EMPTY;_cleanupBackdropClick;_cleanupBackdropTransitionEnd;_previousHostParent;_keydownEvents=new E;_outsidePointerEvents=new E;_renders=new E;_afterRenderRef;_afterNextRenderRef;constructor(e,t,r,i,s,o,a,l,c,u=!1,h,m){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=h,this._renderer=m,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=Xa(()=>function V3(n,e){!e?.injector&&Fr();const t=e?.injector??k(Rn);return Wo(t)?(qs("NgAfterRender"),B3(n,t,e,!1)):U3}(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Dc(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ai(this._config.width),e.height=Ai(this._config.height),e.minWidth=Ai(this._config.minWidth),e.minHeight=Ai(this._config.minHeight),e.maxWidth=Ai(this._config.maxWidth),e.maxHeight=Ai(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._cleanupBackdropClick?.(),this._cleanupBackdropClick=this._renderer.listen(this._backdropElement,"click",t=>this._backdropClick.next(t)),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{this._cleanupBackdropTransitionEnd?.(),this._cleanupBackdropTransitionEnd=this._renderer.listen(e,"transitionend",t=>{this._disposeBackdrop(t.target)})}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=pA(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(_g(sl(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){this._cleanupBackdropClick?.(),this._cleanupBackdropTransitionEnd?.(),e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const LK="cdk-overlay-connected-position-bounding-box",jTe=/([A-Za-z%]+)$/;class zTe{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new E;_resizeSubscription=xt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(LK),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&If(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(LK),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=BK(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let m=0-a,y=a+s.height-r.height,b=this._subtractOverflows(s.width,0-o,o+s.width-r.width),T=this._subtractOverflows(s.height,m,y),M=b*T;return{visibleArea:M,isCompletelyWithinViewport:s.width*s.height===M,fitsInViewportVertically:T===s.height,fitsInViewportHorizontally:b==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=VK(this._overlayRef.getConfig().minHeight),a=VK(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=BK(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,h=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,h=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function HTe(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,r)){const i=new VTe(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,h,m;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const y=Math.min(r.bottom-e.y+r.top,e.y),b=this._lastBoundingBoxSize.height;s=2*y,o=e.y-y,s>b&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-b/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)m=r.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)h=e.x,u=r.right-e.x;else{const y=Math.min(r.right-e.x+r.left,e.x),b=this._lastBoundingBoxSize.width;u=2*y,h=e.x-y,u>b&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-b/2)}return{top:o,left:h,bottom:a,right:m,width:u,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Ai(r.height),i.top=Ai(r.top),i.bottom=Ai(r.bottom),i.width=Ai(r.width),i.left=Ai(r.left),i.right=Ai(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Ai(s)),o&&(i.maxWidth=Ai(o))}this._lastBoundingBoxSize=r,If(this._boundingBox.style,i)}_resetBoundingBoxStyles(){If(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){If(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();If(r,this._getExactOverlayY(t,e,u)),If(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Ai(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Ai(o.maxWidth):s&&(r.maxWidth="")),If(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Ai(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Ai(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:kK(e,r),isOriginOutsideView:z1(e,r),isOverlayClipped:kK(t,r),isOverlayOutsideView:z1(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&pA(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof jn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function If(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function VK(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(jTe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function BK(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const UK="cdk-global-overlay-wrapper";class $Te{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(UK),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let y="",b="",T="";l?T="flex-start":"center"===u?(T="center",m?b=h:y=h):m?"left"===u||"end"===u?(T="flex-end",y=h):("right"===u||"start"===u)&&(T="flex-start",b=h):"left"===u||"start"===u?(T="flex-start",y=h):("right"===u||"end"===u)&&(T="flex-end",b=h),e.position=this._cssPosition,e.marginLeft=l?"0":y,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":b,t.justifyContent=T,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(UK),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let WTe=(()=>{class n{_viewportRuler=k(S1);_document=k(pn);_platform=k(Rs);_overlayContainer=k(H1);constructor(){}global(){return new $Te}flexibleConnectedTo(t){return new zTe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cs=(()=>{class n{scrollStrategies=k(LTe);_overlayContainer=k(H1);_positionBuilder=k(WTe);_keyboardDispatcher=k(BTe);_injector=k(Rn);_ngZone=k(_t);_document=k(pn);_directionality=k(Mg);_location=k(sg);_outsideClickDispatcher=k(UTe);_animationsModuleType=k(Tl,{optional:!0});_idGenerator=k(Ef);_renderer=k(Gh).createRenderer(null,null);_appRef;_styleLoader=k(td);constructor(){}create(t){this._styleLoader.load(FK);const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new RA(t);return o.direction=o.direction||this._directionality.value,new $1(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(Oi),this._renderer)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id=this._idGenerator.getId("cdk-overlay-"),r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ba)),new HCe(t,null,this._appRef,this._injector,this._document)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const KTe={provide:new ye("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.reposition()}}),deps:[cs],useFactory:function qTe(n){return()=>n.scrollStrategies.reposition()}};let Qb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[cs,KTe],imports:[Gb,wA,oK,oK]})}return n})();function QTe(n,e){}class Yb{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext}let jK=(()=>{class n extends R1{_elementRef=k(jn);_focusTrapFactory=k(STe);_config;_interactivityChecker=k(wK);_ngZone=k(_t);_overlayRef=k($1);_focusMonitor=k(DA);_renderer=k(qa);_platform=k(Rs);_document=k(pn,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=k(Ea);_injector=k(Rn);_isDestroyed=!1;constructor(){super(),this._config=k(Yb,{optional:!0})||new Yb,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}attachDomPortal=t=>{this._portalOutlet.hasAttached();const r=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{s(),o(),t.removeAttribute("tabindex")},s=this._renderer.listen(t,"blur",i),o=this._renderer.listen(t,"mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){this._isDestroyed||Dc(()=>{const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=A1(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=A1();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=A1()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&zu(M1,7),2&r){let s;Qs(s=Ys())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&er("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},standalone:!0,features:[bn,ii],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&Ct(0,QTe,0,0,"ng-template",0)},dependencies:[M1],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class W1{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new E;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!nd(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const zK=new ye("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.block()}}),YTe=new ye("DialogData"),XTe=new ye("DefaultDialogConfig");let HK=(()=>{class n{_overlay=k(cs);_injector=k(Rn);_defaultOptions=k(XTe,{optional:!0});_parentDialog=k(n,{optional:!0,skipSelf:!0});_overlayContainer=k(H1);_idGenerator=k(Ef);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;_ariaHiddenElements=new Map;_scrollStrategy=k(zK);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Sb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(nl(void 0)));constructor(){}open(t,r){(r={...this._defaultOptions||new Yb,...r}).id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),o=this._overlay.create(s),a=new W1(o,r),l=this._attachContainer(o,a,r);return a.containerInstance=l,this._attachDialogContent(t,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){G1(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){G1(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),G1(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new RA({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,o=[{provide:Yb,useValue:i},{provide:W1,useValue:r},{provide:$1,useValue:t}];let a;i.container?"function"==typeof i.container?a=i.container:(a=i.container.type,o.push(...i.container.providers(i))):a=jK;const l=new D1(a,i.viewContainerRef,Rn.create({parent:s||this._injector,providers:o}));return t.attach(l).instance}_attachDialogContent(t,r,i,s){if(t instanceof ma){const o=this._createInjector(s,r,i,void 0);let a={$implicit:s.data,dialogRef:r};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new IA(t,null,a,o))}else{const o=this._createInjector(s,r,i,this._injector),a=i.attachComponentPortal(new D1(t,s.viewContainerRef,o));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,i,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:YTe,useValue:t.data},{provide:W1,useValue:r}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(r,t,i)):a.push(...t.providers)),t.direction&&(!o||!o.get(Mg,null,{optional:!0}))&&a.push({provide:Mg,useValue:{value:t.direction,change:Ke()}}),Rn.create({parent:o||s,providers:a})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function G1(n,e){let t=n.length;for(;t--;)e(n[t])}let JTe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[HK],imports:[Qb,wA,kTe,wA]})}return n})();const eAe=["text"],tAe=[[["mat-icon"]],"*"],nAe=["mat-icon","*"];function rAe(n,e){if(1&n&&Xt(0,"mat-pseudo-checkbox",1),2&n){const t=We();ze("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function iAe(n,e){1&n&&Xt(0,"mat-pseudo-checkbox",3),2&n&&ze("disabled",We().disabled)}function sAe(n,e){if(1&n&&(Ie(0,"span",4),rt(1),Te()),2&n){const t=We();Ae(),En("(",t.group.label,")")}}let lr=(()=>{class n{constructor(){k(RK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[Gb,Gb]})}return n})(),q1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["structural-styles"]],standalone:!0,features:[ii],decls:0,vars:0,template:function(r,i){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var Ta=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Ta||{});class dAe{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ta.HIDDEN;constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}}const $K=Rg({passive:!0,capture:!0});class hAe{_events=new Map;addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,$K)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,$K)))}_delegateEventHandler=e=>{const t=Vl(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}const MA={enterDuration:225,exitDuration:150},WK=Rg({passive:!0,capture:!0}),GK=["mousedown","touchstart"],qK=["mouseup","mouseleave","touchend","touchcancel"];let pAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],standalone:!0,features:[ii],decls:0,vars:0,template:function(r,i){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})();class Zb{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new hAe;constructor(e,t,r,i,s){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=xg(r)),s&&s.get(td).load(pAe)}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...MA,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function mAe(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),y=h.transitionDuration,b="none"===h.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,T=new dAe(this,u,r,b);u.style.transform="scale3d(1, 1, 1)",T.state=Ta.FADING_IN,r.persistent||(this._mostRecentTransientRipple=T);let M=null;return!b&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const B=()=>{M&&(M.fallbackTimer=null),clearTimeout(Q),this._finishRippleTransition(T)},V=()=>this._destroyRipple(T),Q=setTimeout(V,c+100);u.addEventListener("transitionend",B),u.addEventListener("transitioncancel",V),M={onTransitionEnd:B,onTransitionCancel:V,fallbackTimer:Q}}),this._activeRipples.set(T,M),(b||!c)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(e.state===Ta.FADING_OUT||e.state===Ta.HIDDEN)return;const t=e.element,r={...MA,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Ta.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=xg(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,GK.forEach(r=>{Zb._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{qK.forEach(t=>{this._triggerElement.addEventListener(t,this,WK)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ta.FADING_IN?this._startFadeOutTransition(e):e.state===Ta.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Ta.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ta.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=V1(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!B1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Ta.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ta.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(GK.forEach(t=>Zb._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(qK.forEach(t=>e.removeEventListener(t,this,WK)),this._pointerUpEventsRegistered=!1))}}const KK=new ye("mat-ripple-global-options");let QK=(()=>{class n{_elementRef=k(jn);_animationMode=k(Tl,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){const t=k(_t),r=k(Rs),i=k(KK,{optional:!0}),s=k(Rn);this._globalOptions=i||{},this._rippleRenderer=new Zb(this,t,this._elementRef,r,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&ri("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),K1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr,lr]})}return n})(),gAe=(()=>{class n{_animationMode=k(Tl,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,i){2&r&&ri("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[ii],decls:0,vars:0,template:function(r,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})(),_Ae=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr]})}return n})();const YK=new ye("MAT_OPTION_PARENT_COMPONENT"),XK=new ye("MatOptgroup");class ZK{source;isUserInput;constructor(e,t=!1){this.source=e,this.isUserInput=t}}let JK=(()=>{class n{_element=k(jn);_changeDetectorRef=k(Ea);_parent=k(YK,{optional:!0});group=k(XK,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=k(Ef).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=t}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}onSelectionChange=new dn;_text;_stateChanges=new E;constructor(){k(td).load(q1),k(td).load(aK),this._signalDisableRipple=!!this._parent&&Lv(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!nd(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new ZK(this,t))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-option"]],viewQuery:function(r,i){if(1&r&&zu(eAe,7),2&r){let s;Qs(s=Ys())&&(i._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,i){1&r&&jt("click",function(){return i._selectViaInteraction()})("keydown",function(o){return i._handleKeydown(o)}),2&r&&(Qv("id",i.id),er("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),ri("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",si]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[xl,ii],ngContentSelectors:nAe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,i){1&r&&(Ya(tAe),Ct(0,rAe,1,2,"mat-pseudo-checkbox",1),Ki(1),Ie(2,"span",2,0),Ki(4,1),Te(),Ct(5,iAe,1,1,"mat-pseudo-checkbox",3)(6,sAe,2,1,"span",4),Xt(7,"div",5)),2&r&&(qv(i.multiple?0:-1),Ae(5),qv(i.multiple||!i.selected||i.hideSingleSelectionIndicator?-1:5),Ae(),qv(i.group&&i.group._inert?6:-1),Ae(),ze("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[gAe,QK],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),Ng=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[K1,lr,_Ae]})}return n})();const eQ={capture:!0},tQ=["focus","mousedown","mouseenter","touchstart"],Q1="mat-ripple-loader-uninitialized",Y1="mat-ripple-loader-class-name",nQ="mat-ripple-loader-centered",PA="mat-ripple-loader-disabled";let bAe=(()=>{class n{_document=k(pn,{optional:!0});_animationMode=k(Tl,{optional:!0});_globalRippleOptions=k(KK,{optional:!0});_platform=k(Rs);_ngZone=k(_t);_injector=k(Rn);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(const t of tQ)this._document?.addEventListener(t,this._onInteraction,eQ)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of tQ)this._document?.removeEventListener(r,this._onInteraction,eQ)}configureRipple(t,r){t.setAttribute(Q1,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(Y1))&&t.setAttribute(Y1,r.className||""),r.centered&&t.setAttribute(nQ,""),r.disabled&&t.setAttribute(PA,"")}setDisabled(t,r){const i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(PA,""):t.removeAttribute(PA)}_onInteraction=t=>{const r=Vl(t);if(r instanceof HTMLElement){const i=r.closest(`[${Q1}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(Y1)),t.append(r);const i="NoopAnimations"===this._animationMode,s=this._globalRippleOptions,o=i?0:s?.animation?.enterDuration??MA.enterDuration,a=i?0:s?.animation?.exitDuration??MA.exitDuration,l={rippleDisabled:i||s?.disabled||t.hasAttribute(PA),rippleConfig:{centered:t.hasAttribute(nQ),terminateOnPointerUp:s?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:a}}},c=new Zb(l,this._ngZone,r,this._platform,this._injector),u=!l.rippleDisabled;u&&c.setupTriggerEvents(t),this._hosts.set(t,{target:l,renderer:c,hasSetUpEvents:u}),t.removeAttribute(Q1)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Pt||{});const Lc="*";function wf(n,e){return{type:Pt.Trigger,name:n,definitions:e,options:{}}}function ol(n,e=null){return{type:Pt.Animate,styles:e,timings:n}}function X1(n,e=null){return{type:Pt.Group,steps:n,options:e}}function Si(n){return{type:Pt.Style,styles:n,offset:null}}function Cf(n,e,t){return{type:Pt.State,name:n,styles:e,options:t}}function al(n,e,t=null){return{type:Pt.Transition,expr:n,animation:e,options:t}}class Jb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class rQ{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function AAe(n,e){}class iQ{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration}const tO="mdc-dialog--open",sQ="mdc-dialog--opening",oQ="mdc-dialog--closing";let aQ=(()=>{class n extends jK{_animationMode=k(Tl,{optional:!0});_animationStateChanged=new dn;_animationsEnabled="NoopAnimations"!==this._animationMode;_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?cQ(this._config.enterAnimationDuration)??150:0;_exitAnimationDuration=this._animationsEnabled?cQ(this._config.exitAnimationDuration)??75:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(lQ,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(sQ,tO)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(tO),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(tO),this._animationsEnabled?(this._hostElement.style.setProperty(lQ,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(oQ)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(sQ,oQ)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275cmp=Vn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){2&r&&(Qv("id",i._config.id),er("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),ri("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},standalone:!0,features:[bn,ii],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(Ie(0,"div",0)(1,"div",1),Ct(2,AAe,0,0,"ng-template",2),Te()())},dependencies:[M1],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})();const lQ="--mat-dialog-transition-duration";function cQ(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?X9(n.substring(0,n.length-2)):n.endsWith("s")?1e3*X9(n.substring(0,n.length-1)):"0"===n?0:null}var kA=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(kA||{});class Og{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new E;_beforeClosed=new E;_result;_closeFallbackTimeout;_state=kA.OPEN;_closeInteractionType;constructor(e,t,r){this._ref=e,this._containerInstance=r,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(Qr(i=>"opened"===i.state),Yi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Qr(i=>"closed"===i.state),Yi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),sl(this.backdropClick(),this.keydownEvents().pipe(Qr(i=>27===i.keyCode&&!this.disableClose&&!nd(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function uQ(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Qr(t=>"closing"===t.state),Yi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=kA.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=kA.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const nO=new ye("MatMdcDialogData"),DAe=new ye("mat-mdc-dialog-default-options"),dQ=new ye("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.block()}});let Tf=(()=>{class n{_overlay=k(cs);_defaultOptions=k(DAe,{optional:!0});_scrollStrategy=k(dQ);_parentDialog=k(n,{optional:!0,skipSelf:!0});_idGenerator=k(Ef);_dialog=k(HK);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;dialogConfigClass=iQ;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Sb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(nl(void 0)));constructor(){this._dialogRefConstructor=Og,this._dialogContainerType=aQ,this._dialogDataToken=nO}open(t,r){let i;(r={...this._defaultOptions||new iQ,...r}).id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:Yb,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(o,a,l)=>(i=new this._dialogRefConstructor(o,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=s.componentRef,i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hQ=(()=>{class n{_dialogRef=k(Og,{optional:!0});_elementRef=k(jn);_dialog=k(Tf);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=function pQ(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,standalone:!0})}return n})(),rO=(()=>{class n extends hQ{id=k(Ef).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,i){2&r&&Qv("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[bn]})}return n})(),fQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[w3([UCe])]})}return n})();let kAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[Tf],imports:[JTe,Qb,wA,lr,lr]})}return n})();function NAe(n,e){1&n&&Xt(0,"img",8),2&n&&ze("src",We().imgPath,Ss)}let Fg=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r,this.title=r.title||"\u63d0\u793a",this.message=r.message||"\u8acb\u7a0d\u5f8c\u518d\u8a66",this.imgPath=r.imgPath||"",this.closeMessage=r.closeMessage||"\u95dc\u9589"}close(){this.dialogRef.close()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(De(Og),De(nO))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-message-dialog"]],decls:11,vars:4,consts:[["mat-dialog-title","",1,"text-xl","font-semibold","text-primary-default","mb-4"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],[1,"flex","w-4/5","items-center","justify-start"],["alt","\u7121\u641c\u5c0b\u7d50\u679c","class","w-24 h-24 sm:w-16 sm:h-16 md:w-24 md:h-24",3,"src",4,"ngIf"],[1,"text-primary-default","sm:text-xl","font-bold","ml-2","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],[1,"text-primary-default","lg:text-md","sm:text-xl"],[1,"flex","items-center","bg-primary-white","justify-center","py-3"],[1,"px-2","py-2","text-white","bg-success","rounded-full","hover:bg-primary-default","focus:outline-none","focus:ring-2","focus:ring-primary-light",3,"click"],["alt","\u7121\u641c\u5c0b\u7d50\u679c",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24",3,"src"]],template:function(r,i){1&r&&(Ie(0,"h1",0),rt(1),Te(),Ie(2,"div",1)(3,"div",2),Ct(4,NAe,1,1,"img",3),Ie(5,"h5",4)(6,"div",5),rt(7),Te()()()(),Ie(8,"div",6)(9,"button",7),jt("click",function(){return i.close()}),rt(10),Te()()),2&r&&(Ae(),En(" ",i.title,"\n"),Ae(3),ze("ngIf",i.imgPath),Ae(3),En(" ",i.message," "),Ae(3),En(" ",i.closeMessage," "))},dependencies:[nf,rO]})}}return n})();const Ms_familyMartUrl_icon="https://www.family.com.tw/NewEnterprise/CSR/images/favicon.ico",Ms_familyMartUrl_base="https://stamp.family.com.tw/api/maps",Ms_familyMartUrl_endpoint={mapClassificationInfo:"/MapClassificationInfo",mapProductInfo:"/MapProductInfo"},Ms_sevenElevenUrl_icon="https://www.7-11.com.tw/favicon.ico",Ms_sevenElevenUrl_base="https://lovefood.openpoint.com.tw/LoveFood/api/",Ms_sevenElevenUrl_endpoint={accessToken:"Auth/FrontendAuth/AccessToken",getList:"Master/FrontendItemCategory/GetList",getStoreByAddress:"Master/FrontendStore/GetStoreByAddress",getNearbyStoreList:"Search/FrontendStoreItemStock/GetNearbyStoreList",getStoreDetail:"Search/FrontendStoreItemStock/GetStoreDetail"},Ms_sevenElevenUrl_params={mid_v:"W0_DiF4DlgU5OeQoRswrRcaaNHMWOL7K3ra3385ocZcv-bBOWySZvoUtH6j-7pjiccl0C5h30uRUNbJXsABCKMqiekSb7tdiBNdVq8Ro5jgk6sgvhZla5iV0H3-8dZfASc7AhEm85679LIK3hxN7Sam6D0LAnYK9Lb0DZhn7xeTeksB4IsBx4Msr_VI"},Ms_firebaseConfig={apiKey:"AIzaSyA3i_YLXpXuHNrmrHULrqnsIj5Z919aCfw",authDomain:"friendly-cat-for-you.firebaseapp.com",databaseURL:"https://friendly-cat-for-you-default-rtdb.firebaseio.com",projectId:"friendly-cat-for-you",storageBucket:"friendly-cat-for-you.firebasestorage.app",messagingSenderId:"614210455616",appId:"1:614210455616:web:cedabfd68dca95ae4337a5",measurementId:"G-3V3740GPG7"};var rd=G(2541);let OAe=(()=>{class n{constructor(){}getCurrentPosition(){return new Promise((t,r)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>t(i),i=>r(i)):r(new Error("\u700f\u89bd\u5668\u4e0d\u652f\u63f4\u5730\u7406\u4f4d\u7f6e\u529f\u80fd"))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iO=(()=>{class n{constructor(t){this.http=t}get(t,r={}){let i=new Pl;for(const s in r)r.hasOwnProperty(s)&&(i=i.set(s,r[s]));return this.http.get(t,{params:i})}post(t,r,i,s){let o=new Pl;if(r)for(const a in r)r.hasOwnProperty(a)&&(o=o.set(a,r[a]));return this.http.post(t,i||{},{params:o,headers:s})}static{this.\u0275fac=function(r){return new(r||n)(Re(vb))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sO=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=Ms_sevenElevenUrl_base}getAccessToken(){return this.requestService.post(this.baseUrl+Ms_sevenElevenUrl_endpoint.accessToken,Ms_sevenElevenUrl_params)}getStoreByAddress(t){const r=this.baseUrl+Ms_sevenElevenUrl_endpoint.getStoreByAddress,i={token:sessionStorage.getItem("711Token"),keyword:t};return this.requestService.post(r,i)}getNearByStoreList(t){const r=this.baseUrl+Ms_sevenElevenUrl_endpoint.getNearbyStoreList,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,t)}getFoodCategory(){const t=this.baseUrl+Ms_sevenElevenUrl_endpoint.getList,r={token:sessionStorage.getItem("711Token")};return this.requestService.post(t,r)}getItemsByStoreNo(t){const r=this.baseUrl+Ms_sevenElevenUrl_endpoint.getStoreDetail,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,{storeNo:t,CurrentLocation:{Latitude:25.0375197,Longitude:121.5636704}})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/seven_eleven_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Re(iO))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),FAe=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=Ms_familyMartUrl_base}getStores(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/family_mart_stores.json")}getNearByStoreList(t){return this.requestService.post(this.baseUrl+Ms_familyMartUrl_endpoint.mapProductInfo,null,{ProjectCode:"202106302",OldPKeys:[],PostInfo:"",Latitude:t.Latitude,Longitude:t.Longitude})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/family_mart_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Re(iO))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $n=G(1631);(0,$n.registerVersion)("firebase","10.14.1","app");const jAe=new class UAe extends yA{}(class BAe extends _A{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),id=new Jh("ANGULARFIRE2_VERSION");function gQ(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const oO=(n,e)=>{const t=e?[e]:(0,$n.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class NA{constructor(){return oO(HAe)}}const HAe="app-check";function Lg(){}class _Q{zone;delegate;constructor(e,t=jAe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class $Ae{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lg,{},Lg,Lg)),t.pipe(oi({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vg=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new _Q(Zone.current)),this.insideAngular=t.run(()=>new _Q(Zone.current,_f)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Re(_t))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bg(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Af(n){return Bg().ngZone.run(()=>n())}function Ui(n){return function GAe(n){return function(t){return(t=t.lift(new $Ae(n.ngZone))).pipe(sf(n.outsideAngular),Gu(n.insideAngular))}}(Bg())(n)}const qAe=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Af(()=>n.apply(void 0,r))},Vc=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Af(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lg,{},Lg,Lg))),r[s]=qAe(r[s],t));const i=function WAe(n){return Bg().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Vt){const s=Bg();return i.pipe(sf(s.outsideAngular),Gu(s.insideAngular))}return Af(()=>i)}return i instanceof Vt?i.pipe(Ui):i instanceof Promise?Af(()=>new Promise((s,o)=>i.then(a=>Af(()=>s(a)),a=>Af(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Af(()=>i)};class eE{constructor(e){return e}}class aO{constructor(){return(0,$n.getApps)()}}const lO=new ye("angularfire2._apps"),QAe={provide:eE,useFactory:function KAe(n){return n&&1===n.length?n[0]:new eE((0,$n.getApp)())},deps:[[new Mi,lO]]},YAe={provide:aO,deps:[[new Mi,lO]]};function XAe(n){return(e,t)=>{const r=t.get(Gs);(0,$n.registerVersion)("angularfire",id.full,"core"),(0,$n.registerVersion)("angularfire",id.full,"app"),(0,$n.registerVersion)("angular",e6.full,r.toString());const i=e.runOutsideAngular(()=>n(t));return new eE(i)}}function ZAe(n,...e){return El([QAe,YAe,{provide:lO,useFactory:XAe(n),multi:!0,deps:[_t,Rn,Vg,...e]}])}const JAe=Vc($n.initializeApp,!0);var sd=G(443),N=G(1401),Ao=G(5398),Yo=G(8779);class OA{constructor(e){return e}}const cO=new ye("angularfire2.auth-instances");function nSe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OA(r)}}const rSe={provide:class eSe{constructor(){return oO("auth")}},deps:[[new Mi,cO]]},iSe={provide:OA,useFactory:function tSe(n,e){const t=gQ("auth",n,e);return t&&new OA(t)},deps:[[new Mi,cO],eE]};function sSe(n,...e){return(0,$n.registerVersion)("angularfire",id.full,"auth"),El([iSe,rSe,{provide:cO,useFactory:nSe(n),multi:!0,deps:[_t,Rn,Vg,aO,[new Mi,NA],...e]}])}const oSe=Vc(sd.aa,!0),aSe=Vc(sd.o,!0),lSe=Vc(sd.y,!0),uO=Vc(sd.ag,!0),cSe=Vc(sd.ab,!0),uSe=Vc(sd.c,!0),dSe=Vc(sd.ak,!0),He=function(n,e){if(!n)throw Ug(e)},Ug=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},vQ=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},hO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let m=(15&a)<<2|c>>6,y=63&c;l||(y=64,o||(m=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vQ(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==h)throw new fSe;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==h&&r.push(c<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fSe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bQ=function(n){const e=vQ(n);return hO.encodeByteArray(e,!0)},FA=function(n){return bQ(n).replace(/\./g,"")},LA=function(n){try{return hO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pSe(n){return EQ(void 0,n)}function EQ(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!mSe(t)||(n[t]=EQ(n[t],e[t]));return n}function mSe(n){return"__proto__"!==n}const VA=()=>{try{return function gSe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&LA(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},IQ=n=>{var e,t;return null===(t=null===(e=VA())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},wQ=()=>{var n;return null===(n=VA())||void 0===n?void 0:n.config},CQ=n=>{var e;return null===(e=VA())||void 0===e?void 0:e[`_${n}`]};class BA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function us(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(us())}function TQ(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class od extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,od.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tE.prototype.create)}}class tE{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function RSe(n,e){return n.replace(MSe,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new od(i,`${this.serviceName}: ${o} (${i}).`,r)}}const MSe=/\{\$([^}]+)}/g;function nE(n){return JSON.parse(n)}function ji(n){return JSON.stringify(n)}const UA=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=nE(LA(s[0])||""),t=nE(LA(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Bl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function jg(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function pO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jA(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function zA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(AQ(s)&&AQ(o)){if(!zA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function AQ(n){return null!==n&&"object"==typeof n}function zg(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class NSe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let h=0;h<16;h++)r[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)r[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const m=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=4294967295&(m<<1|m>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const m=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class FSe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function LSe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=mO),void 0===i.error&&(i.error=mO),void 0===i.complete&&(i.complete=mO);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mO(){}function Hg(n,e){return`${n} failed: ${e} argument `}const HA=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function Aa(n){return n&&n._delegate?n._delegate:n}class Sf{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xf="[DEFAULT]";class $Se{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new BA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function GSe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,O.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=xf){return this.instances.has(e)}getOptions(e=xf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===xf?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=xf){return this.component?this.component.multipleInstances?e:xf:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qSe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $Se(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const gO=[];var nr=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(nr||{});const SQ={debug:nr.DEBUG,verbose:nr.VERBOSE,info:nr.INFO,warn:nr.WARN,error:nr.ERROR,silent:nr.SILENT},KSe=nr.INFO,QSe={[nr.DEBUG]:"log",[nr.VERBOSE]:"log",[nr.INFO]:"info",[nr.WARN]:"warn",[nr.ERROR]:"error"},YSe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=QSe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class _O{constructor(e){this.name=e,this._logLevel=KSe,this._logHandler=YSe,this._userLogHandler=null,gO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?SQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nr.DEBUG,...e),this._logHandler(this,nr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nr.VERBOSE,...e),this._logHandler(this,nr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nr.INFO,...e),this._logHandler(this,nr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nr.WARN,...e),this._logHandler(this,nr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nr.ERROR,...e),this._logHandler(this,nr.ERROR,...e)}}var xQ=G(6749);class XSe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function ZSe(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const $A="@firebase/app",yO="0.10.17",Uc=new _O("@firebase/app"),JSe="@firebase/app-compat",exe="@firebase/analytics-compat",txe="@firebase/analytics",nxe="@firebase/app-check-compat",rxe="@firebase/app-check",ixe="@firebase/auth",sxe="@firebase/auth-compat",oxe="@firebase/database",axe="@firebase/data-connect",lxe="@firebase/database-compat",cxe="@firebase/functions",uxe="@firebase/functions-compat",dxe="@firebase/installations",hxe="@firebase/installations-compat",fxe="@firebase/messaging",pxe="@firebase/messaging-compat",mxe="@firebase/performance",gxe="@firebase/performance-compat",_xe="@firebase/remote-config",yxe="@firebase/remote-config-compat",vxe="@firebase/storage",bxe="@firebase/storage-compat",Exe="@firebase/firestore",Ixe="@firebase/vertexai",wxe="@firebase/firestore-compat",Cxe="firebase",WA="[DEFAULT]",Axe={[$A]:"fire-core",[JSe]:"fire-core-compat",[txe]:"fire-analytics",[exe]:"fire-analytics-compat",[rxe]:"fire-app-check",[nxe]:"fire-app-check-compat",[ixe]:"fire-auth",[sxe]:"fire-auth-compat",[oxe]:"fire-rtdb",[axe]:"fire-data-connect",[lxe]:"fire-rtdb-compat",[cxe]:"fire-fn",[uxe]:"fire-fn-compat",[dxe]:"fire-iid",[hxe]:"fire-iid-compat",[fxe]:"fire-fcm",[pxe]:"fire-fcm-compat",[mxe]:"fire-perf",[gxe]:"fire-perf-compat",[_xe]:"fire-rc",[yxe]:"fire-rc-compat",[vxe]:"fire-gcs",[bxe]:"fire-gcs-compat",[Exe]:"fire-fst",[wxe]:"fire-fst-compat",[Ixe]:"fire-vertex","fire-js":"fire-js",[Cxe]:"fire-js-all"},Df=new Map,rE=new Map,iE=new Map;function DQ(n,e){try{n.container.addComponent(e)}catch(t){Uc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $g(n){const e=n.name;if(iE.has(e))return Uc.debug(`There were multiple attempts to register component ${e}.`),!1;iE.set(e,n);for(const t of Df.values())DQ(t,n);for(const t of rE.values())DQ(t,n);return!0}function GA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ad(n){return void 0!==n.settings}const Sa=new tE("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class RQ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sa.create("app-deleted",{appName:this._name})}}const Wg="11.1.0";function MQ(n=WA){const e=Df.get(n);if(!e&&n===WA&&wQ())return function Rxe(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:WA,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Sa.create("bad-app-name",{appName:String(i)});if(t||(t=wQ()),!t)throw Sa.create("no-options");const s=Df.get(i);if(s){if(zA(t,s.options)&&zA(r,s.config))return s;throw Sa.create("duplicate-app",{appName:i})}const o=new qSe(i);for(const l of iE.values())o.addComponent(l);const a=new RQ(t,r,o);return Df.set(i,a),a}();if(!e)throw Sa.create("no-app",{appName:n});return e}function ld(n,e,t){var r;let i=null!==(r=Axe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Uc.warn(a.join(" "))}$g(new Sf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Pxe="firebase-heartbeat-database",kxe=1,sE="firebase-heartbeat-store";let bO=null;function PQ(){return bO||(bO=(0,xQ.P2)(Pxe,kxe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(sE)}catch(t){console.warn(t)}}}).catch(n=>{throw Sa.create("idb-open",{originalErrorMessage:n.message})})),bO}function EO(){return(EO=(0,O.A)(function*(n){try{const t=(yield PQ()).transaction(sE),r=yield t.objectStore(sE).get(NQ(n));return yield t.done,r}catch(e){if(e instanceof od)Uc.warn(e.message);else{const t=Sa.create("idb-get",{originalErrorMessage:e?.message});Uc.warn(t.message)}}})).apply(this,arguments)}function kQ(n,e){return IO.apply(this,arguments)}function IO(){return(IO=(0,O.A)(function*(n,e){try{const r=(yield PQ()).transaction(sE,"readwrite");yield r.objectStore(sE).put(e,NQ(n)),yield r.done}catch(t){if(t instanceof od)Uc.warn(t.message);else{const r=Sa.create("idb-set",{originalErrorMessage:t?.message});Uc.warn(r.message)}}})).apply(this,arguments)}function NQ(n){return`${n.name}!${n.options.appId}`}class Lxe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bxe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,O.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=OQ();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Uc.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,O.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=OQ(),{heartbeatsToSend:i,unsentEntries:s}=function Vxe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),FQ(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),FQ(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=FA(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Uc.warn(r),""}})()}}function OQ(){return(new Date).toISOString().substring(0,10)}class Bxe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,O.A)(function*(){return!!function SSe(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function xSe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,O.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Nxe(n){return EO.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,O.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return kQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,O.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return kQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function FQ(n){return FA(JSON.stringify({version:2,heartbeats:n})).length}!function Uxe(n){$g(new Sf("platform-logger",e=>new XSe(e),"PRIVATE")),$g(new Sf("heartbeat",e=>new Lxe(e),"PRIVATE")),ld($A,yO,n),ld($A,yO,"esm2017"),ld("fire-js","")}("");const LQ="@firebase/database";let wO="";class jxe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ji(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:nE(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class zxe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Bl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const UQ=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jxe(e)}}catch{}return new zxe},Rf=UQ("localStorage"),CO=UQ("sessionStorage"),Gg=new _O("@firebase/database"),jQ=function(){let n=1;return function(){return n++}}(),zQ=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,He(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new NSe;t.update(e);const r=t.digest();return hO.encodeByteArray(r)},oE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=oE.apply(null,r):e+="object"==typeof r?ji(r):r,e+=" "}return e};let Mf=null,HQ=!0;const Xi=function(...n){if(!0===HQ&&(HQ=!1,null===Mf&&!0===CO.get("logging_enabled")&&function(n,e){He(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Gg.logLevel=nr.VERBOSE,Mf=Gg.log.bind(Gg),e&&CO.set("logging_enabled",!0)):"function"==typeof n?Mf=n:(Mf=null,CO.remove("logging_enabled"))}(!0)),Mf){const e=oE.apply(null,n);Mf(e)}},aE=function(n){return function(...e){Xi(n,...e)}},TO=function(...n){const e="FIREBASE INTERNAL ERROR: "+oE(...n);Gg.error(e)},Ul=function(...n){const e=`FIREBASE FATAL ERROR: ${oE(...n)}`;throw Gg.error(e),new Error(e)},Ps=function(...n){const e="FIREBASE WARNING: "+oE(...n);Gg.warn(e)},qA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},cd="[MIN_NAME]",jc="[MAX_NAME]",Pf=function(n,e){if(n===e)return 0;if(n===cd||e===jc)return-1;if(e===cd||n===jc)return 1;{const t=qQ(n),r=qQ(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Wxe=function(n,e){return n===e?0:n<e?-1:1},lE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ji(e))},AO=function(n){if("object"!=typeof n||null===n)return ji(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=ji(e[r]),t+=":",t+=AO(n[e[r]]);return t+="}",t},WQ=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Zi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const GQ=function(n){He(!qA(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),h+=m}return h.toLowerCase()},Qxe=new RegExp("^-?(0*)\\d{1,10}$"),qQ=function(n){if(Qxe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},qg=function(n){try{n()}catch(e){setTimeout(()=>{throw Ps("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},cE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Jxe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ps(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class eDe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ps(e)}}let uE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ZQ=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tY="websocket",nY="long_polling";class xO{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rf.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rY(n,e,t){let r;if(He("string"==typeof e,"typeof type must == string"),He("object"==typeof t,"typeof params must == object"),e===tY)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==nY)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function tDe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Zi(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class nDe{constructor(){this.counters_={}}incrementCounter(e,t=1){Bl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return pSe(this.counters_)}}const DO={},RO={};function MO(n){const e=n.toString();return DO[e]||(DO[e]=new nDe),DO[e]}class iDe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&qg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ud{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=aE(e),this.stats_=MO(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),rY(t,nY,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new iDe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new PO((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ZQ.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ud.forceAllow_=!0}static forceDisallow(){ud.forceDisallow_=!0}static isAvailable(){return!(!ud.forceAllow_&&(ud.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ji(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=bQ(t),i=WQ(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ji(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class PO{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=jQ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=PO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xi("frame writing exception"),a.stack&&Xi(a.stack),Xi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Xi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Xi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let QA=null;typeof MozWebSocket<"u"?QA=MozWebSocket:typeof WebSocket<"u"&&(QA=WebSocket);let Kg=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=aE(this.connId),this.stats_=MO(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&ZQ.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),rY(t,tY,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rf.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new QA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==QA&&!n.forceDisallow_}static previouslyFailed(){return Rf.isInMemoryStorage||!0===Rf.get("previous_websocket_failure")}markConnectionHealthy(){Rf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=nE(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(He(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=ji(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=WQ(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),uY=(()=>{class n{static get ALL_TRANSPORTS(){return[ud,Kg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=Kg&&Kg.isAvailable();let i=r&&!Kg.previouslyFailed();if(t.webSocketOnly&&(r||Ps("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Kg];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _Y{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=aE("c:"+this.id+":"),this.transportManager_=new uY(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=cE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=lE("t",e),r=lE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=lE("t",e),r=lE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=lE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?TO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ps("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),cE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yY{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class vY{constructor(e){this.allowedEvents_=e,this.listeners_={},He(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){He(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class YA extends vY{static getInstance(){return new YA}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!fO()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return He("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function kn(){return new Gn("")}function rn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dd(n){return n.pieces_.length-n.pieceNum_}function cr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Gn(n.pieces_,e)}function NO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function dE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function IY(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Gn(e,0)}function Lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Gn(t,0)}function sn(n){return n.pieceNum_>=n.pieces_.length}function to(n,e){const t=rn(n),r=rn(e);if(null===t)return e;if(t===r)return to(cr(n),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function OO(n,e){if(dd(n)!==dd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function xa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dd(n)>dd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class SDe{constructor(e,t){this.errorPrefix_=t,this.parts_=dE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=HA(this.parts_[r]);wY(this)}}function wY(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kf(n))}function kf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class FO extends vY{static getInstance(){return new FO}constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return He("visible"===e,"Unknown event type: "+e),[this.visible_]}}const hE=1e3;let ZA,Nf=(()=>{class n extends yY{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=aE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&YA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(ji(o)),He(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new BA,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),He(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),He(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Bl(t,"w")){const i=jg(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ps(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=UA(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=UA(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),He(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ji(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):TO("Unrecognized action received from server: "+ji(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){He(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=hE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=hE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){He(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?Xi("getToken() completed but was canceled"):(Xi("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new _Y(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{Ps(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&Ps(y),u())}}})()}interrupt(t){Xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],pO(this.interruptReasons_)&&(this.reconnectDelay_=hE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>AO(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Gn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Xi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Xi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+wO.replace(/\./g,"-")]=1,fO()?t["framework.cordova"]=1:TQ()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=YA.getInstance().currentlyOnline();return pO(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ln{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ln(e,t)}}class XA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ln(cd,e),i=new ln(cd,t);return 0!==this.compare(r,i)}minPost(){return ln.MIN}}class AY extends XA{static get __EMPTY_NODE(){return ZA}static set __EMPTY_NODE(e){ZA=e}compare(e,t){return Pf(e.name,t.name)}isDefinedOn(e){throw Ug("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ln.MIN}maxPost(){return new ln(jc,ZA)}makePost(e,t){return He("string"==typeof e,"KeyIndex indexValue must always be a string."),new ln(e,ZA)}toString(){return".key"}}const jl=new AY;class JA{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let VO,ll=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??So.EMPTY_NODE,this.right=o??So.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return So.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return So.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class So{constructor(e,t=So.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new So(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ll.BLACK,null,null))}remove(e){return new So(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ll.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new JA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new JA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new JA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new JA(this.root_,null,this.comparator_,!0,e)}}function ODe(n,e){return Pf(n.name,e.name)}function LO(n,e){return Pf(n,e)}So.EMPTY_NODE=new class NDe{copy(e,t,r,i,s){return this}insert(e,t,r){return new ll(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const SY=function(n){return"number"==typeof n?"number:"+GQ(n):"string:"+n},xY=function(n){if(n.isLeafNode()){const e=n.val();He("string"==typeof e||"number"==typeof e||"object"==typeof e&&Bl(e,".sv"),"Priority must be a string or number.")}else He(n===VO||n.isEmpty(),"priority of unexpected type.");He(n===VO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let DY,RY,MY,Qg=(()=>{class n{static set __childrenNodeConstructor(t){DY=t}static get __childrenNodeConstructor(){return DY}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,He(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xY(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return sn(t)?this:".priority"===rn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=rn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(He(".priority"!==i||1===dd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+SY(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?GQ(this.value_):this.value_,this.lazyHash_=zQ(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(He(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return He(s>=0,"Unknown leaf type: "+r),He(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _r=new class BDe extends XA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Pf(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ln.MIN}maxPost(){return new ln(jc,new Qg("[PRIORITY-POST]",MY))}makePost(e,t){const r=RY(e);return new ln(t,new Qg("[PRIORITY-POST]",r))}toString(){return".priority"}},UDe=Math.log(2);class jDe{constructor(e){this.count=parseInt(Math.log(e+1)/UDe,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const eS=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let h,m;if(0===u)return null;if(1===u)return h=n[l],m=t?t(h):h,new ll(m,h.node,ll.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return h=n[y],m=t?t(h):h,new ll(m,h.node,ll.BLACK,b,T)}},a=function(l){let c=null,u=null,h=n.length;const m=function(b,T){const M=h-b,B=h;h-=b;const V=i(M+1,B),Q=n[M],be=t?t(Q):Q;y(new ll(be,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),M=Math.pow(2,l.count-(b+1));T?m(M,ll.BLACK):(m(M,ll.BLACK),m(M,ll.RED))}return u}(new jDe(n.length));return new So(r||e,a)};let BO;const Yg={};class zc{static get Default(){return He(Yg&&_r,"ChildrenNode.ts has not been loaded"),BO=BO||new zc({".priority":Yg},{".priority":_r}),BO}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=jg(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof So?t:null}hasIndex(e){return Bl(this.indexSet_,e.toString())}addIndex(e,t){He(e!==jl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(ln.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?eS(r,e.getCompare()):Yg;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new zc(u,c)}addToIndexes(e,t){const r=jA(this.indexes_,(i,s)=>{const o=jg(this.indexSet_,s);if(He(o,"Missing index implementation for "+s),i===Yg){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(ln.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),eS(a,o.getCompare())}return Yg}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new ln(e.name,a))),l.insert(e,e.node)}});return new zc(r,this.indexSet_)}removeFromIndexes(e,t){const r=jA(this.indexes_,i=>{if(i===Yg)return i;{const s=t.get(e.name);return s?i.remove(new ln(e.name,s)):i}});return new zc(r,this.indexSet_)}}let fE,$t=(()=>{class n{static get EMPTY_NODE(){return fE||(fE=new n(new So(LO),null,zc.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&xY(this.priorityNode_),this.children_.isEmpty()&&He(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?fE:r}}getChild(t){const r=rn(t);return null===r?this:this.getImmediateChild(r).getChild(cr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(He(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new ln(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?fE:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=rn(t);if(null===i)return r;{He(".priority"!==rn(t)||1===dd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(cr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(_r,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+SY(this.getPriority().val())+":"),this.forEachChild(_r,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":zQ(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new ln(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ln(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ln(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,ln.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,ln.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===pE?-1:0}withIndex(t){if(t===jl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===jl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(_r),s=r.getIterator(_r);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===jl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const pE=new class zDe extends $t{constructor(){super(new So(LO),$t.EMPTY_NODE,zc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $t.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ln,{MIN:{value:new ln(cd,$t.EMPTY_NODE)},MAX:{value:new ln(jc,pE)}}),AY.__EMPTY_NODE=$t.EMPTY_NODE,Qg.__childrenNodeConstructor=$t,function FDe(n){VO=n}(pE),function VDe(n){MY=n}(pE);const HDe=!0;function Yr(n,e=null){if(null===n)return $t.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),He(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Qg(n,Yr(e));if(n instanceof Array||!HDe){let t=$t.EMPTY_NODE;return Zi(n,(r,i)=>{if(Bl(n,r)&&"."!==r.substring(0,1)){const s=Yr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Yr(e))}{const t=[];let r=!1;if(Zi(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Yr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new ln(o,l)))}}),0===t.length)return $t.EMPTY_NODE;const s=eS(t,ODe,o=>o.name,LO);if(r){const o=eS(t,_r.getCompare());return new $t(s,Yr(e),new zc({".priority":o},{".priority":_r}))}return new $t(s,Yr(e),zc.Default)}}!function LDe(n){RY=n}(Yr);class UO extends XA{constructor(e){super(),this.indexPath_=e,He(!sn(e)&&".priority"!==rn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Pf(e.name,t.name):s}makePost(e,t){const r=Yr(e),i=$t.EMPTY_NODE.updateChild(this.indexPath_,r);return new ln(t,i)}maxPost(){const e=$t.EMPTY_NODE.updateChild(this.indexPath_,pE);return new ln(jc,e)}toString(){return dE(this.indexPath_,0).join("/")}}const jO=new class $De extends XA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Pf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ln.MIN}maxPost(){return ln.MAX}makePost(e,t){const r=Yr(e);return new ln(t,r)}toString(){return".value"}};function PY(n){return{type:"value",snapshotNode:n}}function Xg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function mE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function gE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class zO{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){He(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(mE(t,a)):He(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Xg(t,r)):o.trackChildChange(gE(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(_r,(i,s)=>{t.hasChild(i)||r.trackChildChange(mE(i,s))}),t.isLeafNode()||t.forEachChild(_r,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(gE(i,s,o))}else r.trackChildChange(Xg(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$t.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _E{constructor(e){this.indexedFilter_=new zO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_E.getStartPost_(e),this.endPost_=_E.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new ln(t,r))||(r=$t.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=$t.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority($t.EMPTY_NODE);const s=this;return t.forEachChild(_r,(o,a)=>{s.matches(new ln(o,a))||(i=i.updateImmediateChild(o,$t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class GDe{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new _E(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new ln(t,r))||(r=$t.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=$t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=$t.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority($t.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,$t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(m,y)=>h(y,m)}else o=this.index_.getCompare();const a=e;He(a.numChildren()===this.limit_,"");const l=new ln(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const h=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(gE(t,r,h)),a.updateImmediateChild(t,r);{s?.trackChildChange(mE(t,h));const T=a.updateImmediateChild(t,$t.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Xg(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(mE(c.name,c.node)),s.trackChildChange(Xg(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,$t.EMPTY_NODE)):e}}class HO{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_r}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return He(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return He(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cd}hasEnd(){return this.endSet_}getIndexEndValue(){return He(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return He(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return He(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_r}copy(){const e=new HO;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kY(n){const e={};if(n.isDefault())return e;let t;if(n.index_===_r?t="$priority":n.index_===jO?t="$value":n.index_===jl?t="$key":(He(n.index_ instanceof UO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ji(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=ji(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+ji(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=ji(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+ji(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function NY(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_r&&(e.i=n.index_.toString()),e}class nS extends yY{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(He(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=aE("p:rest:"),this.listens_={}}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=nS.getListenId_(e,r),a={};this.listens_[o]=a;const l=kY(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(404===c&&(h=null,c=null),null===c&&this.onDataUpdate_(s,h,!1,r),jg(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=nS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=kY(e._queryParams),r=e._path.toString(),i=new BA;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zg(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=nE(a.responseText)}catch{Ps("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Ps("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class ZDe{constructor(){this.rootNode_=$t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function rS(){return{value:null,children:new Map}}function Zg(n,e,t){if(sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=rn(e);n.children.has(r)||n.children.set(r,rS()),Zg(n.children.get(r),e=cr(e),t)}}function qO(n,e,t){null!==n.value?t(e,n.value):function JDe(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{qO(i,new Gn(e.toString()+"/"+r),t)})}class eRe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class rRe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new eRe(e);const r=1e4+2e4*Math.random();cE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Zi(e,(i,s)=>{s>0&&Bl(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),cE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zl=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(zl||{});function YO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(sn(this.path)){if(null!=this.affectedTree.value)return He(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Gn(e));return new iS(kn(),t,this.revert)}}return He(rn(this.path)===e,"operationForChild called for unrelated child."),new iS(cr(this.path),this.affectedTree,this.revert)}}class yE{constructor(e,t){this.source=e,this.path=t,this.type=zl.LISTEN_COMPLETE}operationForChild(e){return sn(this.path)?new yE(this.source,kn()):new yE(this.source,cr(this.path))}}class Of{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zl.OVERWRITE}operationForChild(e){return sn(this.path)?new Of(this.source,kn(),this.snap.getImmediateChild(e)):new Of(this.source,cr(this.path),this.snap)}}class Jg{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zl.MERGE}operationForChild(e){if(sn(this.path)){const t=this.children.subtree(new Gn(e));return t.isEmpty()?null:t.value?new Of(this.source,kn(),t.value):new Jg(this.source,kn(),t)}return He(rn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Jg(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=rn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class iRe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function vE(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function aRe(n,e,t){if(null==e.childName||null==t.childName)throw Ug("Should only compare child_ events.");const r=new ln(e.childName,e.snapshotNode),i=new ln(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function oRe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function sS(n,e){return{eventCache:n,serverCache:e}}function bE(n,e,t,r){return sS(new hd(e,t,r),n.serverCache)}function FY(n,e,t,r){return sS(n.eventCache,new hd(e,t,r))}function oS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ff(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let XO;class yr{static fromObject(e){let t=new yr(null);return Zi(e,(r,i)=>{t=t.set(new Gn(r),i)}),t}constructor(e,t=(()=>(XO||(XO=new So(Wxe)),XO))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:kn(),value:this.value};if(sn(e))return null;{const r=rn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(cr(e),t);return null!=s?{path:Lr(new Gn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(sn(e))return this;{const t=rn(e),r=this.children.get(t);return null!==r?r.subtree(cr(e)):new yr(null)}}set(e,t){if(sn(e))return new yr(t,this.children);{const r=rn(e),s=(this.children.get(r)||new yr(null)).set(cr(e),t),o=this.children.insert(r,s);return new yr(this.value,o)}}remove(e){if(sn(e))return this.children.isEmpty()?new yr(null):new yr(null,this.children);{const t=rn(e),r=this.children.get(t);if(r){const i=r.remove(cr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new yr(null):new yr(this.value,s)}return this}}get(e){if(sn(e))return this.value;{const t=rn(e),r=this.children.get(t);return r?r.get(cr(e)):null}}setTree(e,t){if(sn(e))return t;{const r=rn(e),s=(this.children.get(r)||new yr(null)).setTree(cr(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new yr(this.value,o)}}fold(e){return this.fold_(kn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,kn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(sn(e))return null;{const s=rn(e),o=this.children.get(s);return o?o.findOnPath_(cr(e),Lr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,kn(),t)}foreachOnPath_(e,t,r){if(sn(e))return this;{this.value&&r(t,this.value);const i=rn(e),s=this.children.get(i);return s?s.foreachOnPath_(cr(e),Lr(t,i),r):new yr(null)}}foreach(e){this.foreach_(kn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class cl{constructor(e){this.writeTree_=e}static empty(){return new cl(new yr(null))}}function EE(n,e,t){if(sn(e))return new cl(new yr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=to(i,e);return s=s.updateChild(o,t),new cl(n.writeTree_.set(i,s))}{const i=new yr(t),s=n.writeTree_.setTree(e,i);return new cl(s)}}}function ZO(n,e,t){let r=n;return Zi(t,(i,s)=>{r=EE(r,Lr(e,i),s)}),r}function LY(n,e){if(sn(e))return cl.empty();{const t=n.writeTree_.setTree(e,new yr(null));return new cl(t)}}function JO(n,e){return null!=Lf(n,e)}function Lf(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(to(t.path,e)):null}function VY(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_r,(r,i)=>{e.push(new ln(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ln(r,i.value))}),e}function fd(n,e){if(sn(e))return n;{const t=Lf(n,e);return new cl(null!=t?new yr(t):n.writeTree_.subtree(e))}}function eF(n){return n.writeTree_.isEmpty()}function e_(n,e){return BY(kn(),n.writeTree_,e)}function BY(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(He(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=BY(Lr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Lr(n,".priority"),r)),t}}function aS(n,e){return $Y(e,n)}function fRe(n,e){if(n.snap)return xa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&xa(Lr(n.path,t),e))return!0;return!1}function mRe(n){return n.visible}function UY(n,e,t){let r=cl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)xa(t,o)?(a=to(t,o),r=EE(r,a,s.snap)):xa(o,t)&&(a=to(o,t),r=EE(r,kn(),s.snap.getChild(a)));else{if(!s.children)throw Ug("WriteRecord should have .snap or .children");if(xa(t,o))a=to(t,o),r=ZO(r,a,s.children);else if(xa(o,t))if(a=to(o,t),sn(a))r=ZO(r,kn(),s.children);else{const l=jg(s.children,rn(a));if(l){const c=l.getChild(cr(a));r=EE(r,kn(),c)}}}}}return r}function jY(n,e,t,r,i){if(r||i){const s=fd(n.visibleWrites,e);return!i&&eF(s)?t:i||null!=t||JO(s,kn())?e_(UY(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(xa(c.path,e)||xa(e,c.path))},e),t||$t.EMPTY_NODE):null}{const s=Lf(n.visibleWrites,e);if(null!=s)return s;{const o=fd(n.visibleWrites,e);return eF(o)?t:null!=t||JO(o,kn())?e_(o,t||$t.EMPTY_NODE):null}}}function lS(n,e,t,r){return jY(n.writeTree,n.treePath,e,t,r)}function tF(n,e){return function gRe(n,e,t){let r=$t.EMPTY_NODE;const i=Lf(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_r,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=fd(n.visibleWrites,e);return t.forEachChild(_r,(o,a)=>{const l=e_(fd(s,new Gn(o)),a);r=r.updateImmediateChild(o,l)}),VY(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return VY(fd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function zY(n,e,t,r){return function _Re(n,e,t,r,i){He(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Lr(e,t);if(JO(n.visibleWrites,s))return null;{const o=fd(n.visibleWrites,s);return eF(o)?i.getChild(t):e_(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function cS(n,e){return function vRe(n,e){return Lf(n.visibleWrites,e)}(n.writeTree,Lr(n.treePath,e))}function nF(n,e,t){return function yRe(n,e,t,r){const i=Lr(e,t),s=Lf(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?e_(fd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function HY(n,e){return $Y(Lr(n.treePath,e),n.writeTree)}function $Y(n,e){return{treePath:n,writeTree:e}}class wRe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;He("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),He(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,gE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,mE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Xg(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Ug("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,gE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const WY=new class CRe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class rF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ff(this.viewCache_),s=function IRe(n,e,t,r,i,s){return function bRe(n,e,t,r,i,s,o){let a;const l=fd(n.visibleWrites,e),c=Lf(l,kn());if(null!=c)a=c;else{if(null==t)return[];a=e_(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==h(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function GY(n,e,t,r,i,s){const o=e.eventCache;if(null!=cS(r,t))return e;{let a,l;if(sn(t))if(He(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ff(e),h=tF(r,c instanceof $t?c:$t.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=lS(r,Ff(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=rn(t);if(".priority"===c){He(1===dd(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=zY(r,t,u,l);a=null!=h?n.filter.updatePriority(u,h):o.getNode()}else{const u=cr(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=zY(r,t,o.getNode(),l);h=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else h=nF(r,c,e.serverCache);a=null!=h?n.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return bE(e,a,o.isFullyInitialized()||sn(t),n.filter.filtersNodes())}}function uS(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(sn(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=rn(t);if(!l.isCompleteForPath(t)&&dd(t)>1)return e;const b=cr(t),M=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),M):u.updateChild(l.getNode(),y,M,b,WY,null)}const h=FY(e,c,l.isFullyInitialized()||sn(t),u.filtersNodes());return GY(n,h,t,i,new rF(i,h,s),a)}function iF(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new rF(i,e,s);if(sn(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=bE(e,c,!0,n.filter.filtersNodes());else{const h=rn(t);if(".priority"===h)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=bE(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=cr(t),y=a.getNode().getImmediateChild(h);let b;if(sn(m))b=r;else{const T=u.getCompleteChild(h);b=null!=T?".priority"===NO(m)&&T.getChild(IY(m)).isEmpty()?T:T.updateChild(m,r):$t.EMPTY_NODE}l=y.equals(b)?e:bE(e,n.filter.updateChild(a.getNode(),h,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function qY(n,e){return n.eventCache.isCompleteForChild(e)}function KY(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function sF(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=sn(t)?r:new yr(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,m)=>{if(u.hasChild(h)){const b=KY(0,e.serverCache.getNode().getImmediateChild(h),m);l=uS(n,l,new Gn(h),b,i,s,o,a)}}),c.children.inorderTraversal((h,m)=>{const y=!e.serverCache.isCompleteForChild(h)&&null===m.value;if(!u.hasChild(h)&&!y){const T=KY(0,e.serverCache.getNode().getImmediateChild(h),m);l=uS(n,l,new Gn(h),T,i,s,o,a)}}),l}class kRe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new zO(r.getIndex()),s=function qDe(n){return n.loadsAllData()?new zO(n.getIndex()):n.hasLimit()?new GDe(n):new _E(n)}(r);this.processor_=function TRe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode($t.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode($t.EMPTY_NODE,a.getNode(),null),u=new hd(l,o.isFullyInitialized(),i.filtersNodes()),h=new hd(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=sS(h,u),this.eventGenerator_=new iRe(this.query_)}get query(){return this.query_}}function FRe(n,e){const t=Ff(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!sn(e)&&!t.getImmediateChild(rn(e)).isEmpty())?t.getChild(e):null}function QY(n){return 0===n.eventRegistrations_.length}function YY(n,e,t){const r=[];if(t){He(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function XY(n,e,t,r){e.type===zl.MERGE&&null!==e.source.queryId&&(He(Ff(n.viewCache_),"We should always have a full cache before handling merges"),He(oS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function SRe(n,e,t,r,i){const s=new wRe;let o,a;if(t.type===zl.OVERWRITE){const c=t;c.source.fromUser?o=iF(n,e,c.path,c.snap,r,i,s):(He(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!sn(c.path),o=uS(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===zl.MERGE){const c=t;c.source.fromUser?o=function DRe(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Lr(t,l);qY(e,rn(u))&&(a=iF(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Lr(t,l);qY(e,rn(u))||(a=iF(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(He(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=sF(n,e,c.path,c.children,r,i,a,s))}else if(t.type===zl.ACK_USER_WRITE){const c=t;o=c.revert?function PRe(n,e,t,r,i,s){let o;if(null!=cS(r,t))return e;{const a=new rF(r,e,i),l=e.eventCache.getNode();let c;if(sn(t)||".priority"===rn(t)){let u;if(e.serverCache.isFullyInitialized())u=lS(r,Ff(e));else{const h=e.serverCache.getNode();He(h instanceof $t,"serverChildren would be complete if leaf node"),u=tF(r,h)}c=n.filter.updateFullNode(l,u,s)}else{const u=rn(t);let h=nF(r,u,e.serverCache);null==h&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),c=null!=h?n.filter.updateChild(l,u,h,cr(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,$t.EMPTY_NODE,cr(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lS(r,Ff(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=cS(r,kn()),bE(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function RRe(n,e,t,r,i,s,o){if(null!=cS(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(sn(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return uS(n,e,t,l.getNode().getChild(t),i,s,a,o);if(sn(t)){let c=new yr(null);return l.getNode().forEachChild(jl,(u,h)=>{c=c.set(new Gn(u),h)}),sF(n,e,t,c,i,s,a,o)}return e}{let c=new yr(null);return r.foreach((u,h)=>{const m=Lr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),sF(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==zl.LISTEN_COMPLETE)throw Ug("Unknown operation type: "+t.type);o=function MRe(n,e,t,r,i){const s=e.serverCache;return GY(n,FY(e,s.getNode(),s.isFullyInitialized()||sn(t),s.isFiltered()),t,r,WY,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function xRe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=oS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(PY(oS(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function ARe(n,e){He(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),He(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),He(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,ZY(n,s.changes,s.viewCache.eventCache.getNode(),null)}function ZY(n,e,t,r){return function sRe(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function WDe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),vE(n,i,"child_removed",e,r,t),vE(n,i,"child_added",e,r,t),vE(n,i,"child_moved",s,r,t),vE(n,i,"child_changed",e,r,t),vE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let dS,fS;class JY{constructor(){this.views=new Map}}function oF(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return He(null!=s,"SyncTree gave us an op for an invalid query."),XY(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(XY(o,e,t,r));return s}}function eX(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=lS(t,i?r:null),l=!1;a?l=!0:r instanceof $t?(a=tF(t,r),l=!1):(a=$t.EMPTY_NODE,l=!1);const c=sS(new hd(a,l,!1),new hd(r,i,!1));return new kRe(e,c)}return o}function tX(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function pd(n,e){let t=null;for(const r of n.views.values())t=t||FRe(r,e);return t}function nX(n,e){return e._queryParams.loadsAllData()?hS(n):n.views.get(e._queryIdentifier)}function rX(n,e){return null!=nX(n,e)}function md(n){return null!=hS(n)}function hS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let GRe=1;class iX{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yr(null),this.pendingWriteTree_=function ERe(){return{visibleWrites:cl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function aF(n,e,t,r,i){return function cRe(n,e,t,r,i){He(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=EE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?t_(n,new Of({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function gd(n,e,t=!1){const r=function dRe(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function hRe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);He(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&fRe(a,r.path)?i=!1:xa(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function pRe(n){n.visibleWrites=UY(n.allWrites,mRe,kn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=LY(n.visibleWrites,r.path):Zi(r.children,l=>{n.visibleWrites=LY(n.visibleWrites,Lr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new yr(null);return null!=r.snap?s=s.set(kn(),!0):Zi(r.children,o=>{s=s.set(new Gn(o),!0)}),t_(n,new iS(r.path,s,t))}return[]}function IE(n,e,t){return t_(n,new Of({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function pS(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||rX(o,e))){const l=function HRe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=md(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(YY(c,t,r)),QY(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(YY(l,t,r)),QY(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!md(n)&&s.push(new(function URe(){return He(dS,"Reference.ts has not been loaded"),dS}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function jRe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(s,(m,y)=>md(y));if(u&&!h){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function JRe(n){return n.fold((e,t,r)=>{if(t&&md(t))return[hS(t)];{let i=[];return t&&(i=tX(t)),Zi(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],M=T.query,B=lX(n,T);n.listenProvider_.startListening(CE(M),wE(n,M),B.hashFn,B.onComplete)}}}!h&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(CE(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(gS(m));n.listenProvider_.stopListening(CE(m),y)}))}!function eMe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=gS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function sX(n,e,t,r){const i=cF(n,r);if(null!=i){const s=uF(i),o=s.path,a=s.queryId,l=to(o,e);return dF(n,o,new Of(YO(a),l,t))}return[]}function lF(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=to(m,i);s=s||pd(y,b),o=o||md(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||md(a),s=s||pd(a,kn())):(a=new JY,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=$t.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=pd(b,kn());T&&(s=s.updateImmediateChild(y,T))}));const c=rX(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=gS(e);He(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function tMe(){return GRe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let h=function zRe(n,e,t,r,i,s){const o=eX(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function LRe(n,e){n.eventRegistrations_.push(e)}(o,t),function VRe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_r,(s,o)=>{r.push(Xg(s,o))}),t.isFullyInitialized()&&r.push(PY(t.getNode())),ZY(n,r,t.getNode(),e)}(o,t)}(a,e,t,aS(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=nX(a,e);h=h.concat(function nMe(n,e,t){const r=e._path,i=wE(n,e),s=lX(n,t),o=n.listenProvider_.startListening(CE(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)He(!md(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!sn(c)&&u&&md(u))return[hS(u).query];{let m=[];return u&&(m=m.concat(tX(u).map(y=>y.query))),Zi(h,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(CE(u),wE(n,u))}}return o}(n,e,m))}return h}function mS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=pd(a,to(o,e));if(c)return c});return jY(i,e,s,t,!0)}function t_(n,e){return oX(e,n.syncPointTree_,null,aS(n.pendingWriteTree_,kn()))}function oX(n,e,t,r){if(sn(n.path))return aX(n,e,t,r);{const i=e.get(kn());null==t&&null!=i&&(t=pd(i,kn()));let s=[];const o=rn(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=HY(r,o);s=s.concat(oX(a,l,c,u))}return i&&(s=s.concat(oF(i,n,r,t))),s}}function aX(n,e,t,r){const i=e.get(kn());null==t&&null!=i&&(t=pd(i,kn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=HY(r,o),u=n.operationForChild(o);u&&(s=s.concat(aX(u,a,l,c)))}),i&&(s=s.concat(oF(i,n,r,t))),s}function lX(n,e){const t=e.query,r=wE(n,t);return{hashFn:()=>(function NRe(n){return n.viewCache_.serverCache.getNode()}(e)||$t.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function YRe(n,e,t){const r=cF(n,t);if(r){const i=uF(r),s=i.path,o=i.queryId,a=to(s,e);return dF(n,s,new yE(YO(o),a))}return[]}(n,t._path,r):function QRe(n,e){return t_(n,new yE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Kxe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return pS(n,t,null,s)}}}}function wE(n,e){const t=gS(e);return n.queryToTagMap.get(t)}function gS(n){return n._path.toString()+"$"+n._queryIdentifier}function cF(n,e){return n.tagToQueryMap.get(e)}function uF(n){const e=n.indexOf("$");return He(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Gn(n.substr(0,e))}}function dF(n,e,t){const r=n.syncPointTree_.get(e);return He(r,"Missing sync point for query tag that we're tracking"),oF(r,t,aS(n.pendingWriteTree_,e),null)}function CE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function WRe(){return He(fS,"Reference.ts has not been loaded"),fS}())(n._repo,n._path):n}class hF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new hF(t)}node(){return this.node_}}class fF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Lr(this.path_,e);return new fF(this.syncTree_,t)}node(){return mS(this.syncTree_,this.path_)}}const rMe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},cX=function(n,e,t){return n&&"object"==typeof n?(He(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?iMe(n[".sv"],e,t):"object"==typeof n[".sv"]?sMe(n[".sv"],e):void He(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},iMe=function(n,e,t){if("timestamp"===n)return t.timestamp;He(!1,"Unexpected server value: "+n)},sMe=function(n,e,t){n.hasOwnProperty("increment")||He(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&He(!1,"Unexpected increment value: "+r);const i=e.node();if(He(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},uX=function(n,e,t,r){return mF(e,new fF(t,n),r)},pF=function(n,e,t){return mF(n,new hF(e),t)};function mF(n,e,t){const r=n.getPriority().val(),i=cX(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=cX(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Qg(a,Yr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Qg(i))),o.forEachChild(_r,(a,l)=>{const c=mF(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class gF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function _S(n,e){let t=e instanceof Gn?e:new Gn(e),r=n,i=rn(t);for(;null!==i;){const s=jg(r.node.children,i)||{children:{},childCount:0};r=new gF(i,r,s),t=cr(t),i=rn(t)}return r}function Vf(n){return n.node.value}function _F(n,e){n.node.value=e,yF(n)}function dX(n){return n.node.childCount>0}function yS(n,e){Zi(n.node.children,(t,r)=>{e(new gF(t,n,r))})}function hX(n,e,t,r){t&&!r&&e(n),yS(n,i=>{hX(i,e,!0,r)}),t&&r&&e(n)}function TE(n){return new Gn(null===n.parent?n.name:TE(n.parent)+"/"+n.name)}function yF(n){null!==n.parent&&function lMe(n,e,t){const r=function oMe(n){return void 0===Vf(n)&&!dX(n)}(t),i=Bl(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,yF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,yF(n))}(n.parent,n.name,n)}const cMe=/[\[\].#$\/\u0000-\u001F\u007F]/,uMe=/[\[\].#$\u0000-\u001F\u007F]/,vF=10485760,vS=function(n){return"string"==typeof n&&0!==n.length&&!cMe.test(n)},fX=function(n){return"string"==typeof n&&0!==n.length&&!uMe.test(n)},SE=function(n,e,t){const r=t instanceof Gn?new SDe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+kf(r));if("function"==typeof e)throw new Error(n+"contains a function "+kf(r)+" with contents = "+e.toString());if(qA(e))throw new Error(n+"contains "+e.toString()+" "+kf(r));if("string"==typeof e&&e.length>vF/3&&HA(e)>vF)throw new Error(n+"contains a string greater than "+vF+" utf8 bytes "+kf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Zi(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!vS(o)))throw new Error(n+" contains an invalid key ("+o+") "+kf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function xDe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=HA(e),wY(n)})(r,o),SE(n,a,r),function DDe(n){const e=n.parts_.pop();n.byteLength_-=HA(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+kf(r)+" in addition to actual children.")}},EF=function(n,e,t,r){if(!(r&&void 0===t||fX(t)))throw new Error(Hg(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fMe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EF(n,e,t,r)};class pMe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Xo(n,e,t){(function bS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!OO(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function _X(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(mMe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>xa(r,e)||xa(e,r))}function mMe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Mf&&Xi("event: "+t.toString()),qg(r)}}}const gMe=25;class _Me{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pMe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rS(),this.transactionQueueTree_=new gF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vX(n){const t=n.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function DE(n){return rMe({timestamp:vX(n)})}function bX(n,e,t,r,i){n.dataUpdateCount++;const s=new Gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=jA(t,c=>Yr(c));o=function XRe(n,e,t,r){const i=cF(n,r);if(i){const s=uF(i),o=s.path,a=s.queryId,l=to(o,e),c=yr.fromObject(t);return dF(n,o,new Jg(YO(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Yr(t);o=sX(n.serverSyncTree_,s,l,i)}else if(r){const l=jA(t,c=>Yr(c));o=function KRe(n,e,t){const r=yr.fromObject(t);return t_(n,new Jg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Yr(t);o=IE(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=r_(n,s)),Xo(n.eventQueue_,a,o)}function EX(n,e){IF(n,"connected",e),!1===e&&function IMe(n){n_(n,"onDisconnectEvents");const e=DE(n),t=rS();qO(n.onDisconnect_,kn(),(i,s)=>{const o=uX(i,s,n.serverSyncTree_,e);Zg(t,i,o)});let r=[];qO(t,kn(),(i,s)=>{r=r.concat(IE(n.serverSyncTree_,i,s));const o=function AF(n,e){const t=TE(CX(n,e)),r=_S(n.transactionQueueTree_,e);return function aMe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{SF(n,i)}),SF(n,r),hX(r,i=>{SF(n,i)}),t}(n,i);r_(n,o)}),n.onDisconnect_=rS(),Xo(n.eventQueue_,kn(),r)}(n)}function IF(n,e,t){const r=new Gn("/.info/"+e),i=Yr(t);n.infoData_.updateSnapshot(r,i);const s=IE(n.infoSyncTree_,r,i);Xo(n.eventQueue_,r,s)}function ES(n){return n.nextWriteId_++}function n_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Xi(t,...e)}function TF(n,e,t){return mS(n.serverSyncTree_,e,t)||$t.EMPTY_NODE}function IS(n,e=n.transactionQueueTree_){if(e||wS(n,e),Vf(e)){const t=TX(n,e);He(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function DMe(n,e,t){const r=t.map(c=>c.currentWriteId),i=TF(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];He(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=to(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{n_(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const h=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(gd(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&h.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();wS(n,_S(n.transactionQueueTree_,e)),IS(n,n.transactionQueueTree_),Xo(n.eventQueue_,e,u);for(let m=0;m<h.length;m++)qg(h[m])}else{if("datastale"===c)for(let h=0;h<t.length;h++)t[h].status=3===t[h].status?4:0;else{Ps("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}r_(n,e)}},o)}(n,TE(e),t)}else dX(e)&&yS(e,t=>{IS(n,t)})}function r_(n,e){const t=CX(n,e),r=TE(t);return function RMe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=to(t,l.path);let h,u=!1;if(He(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,h=l.abortReason,i=i.concat(gd(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=gMe)u=!0,h="maxretry",i=i.concat(gd(n.serverSyncTree_,l.currentWriteId,!0));else{const m=TF(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){SE("transaction failed: Data returned ",y,l.path);let b=Yr(y);"object"==typeof y&&null!=y&&Bl(y,".priority")||(b=b.updatePriority(m.getPriority()));const M=l.currentWriteId,B=DE(n),V=pF(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=ES(n),o.splice(o.indexOf(M),1),i=i.concat(aF(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(gd(n.serverSyncTree_,M,!0))}else u=!0,h="nodata",i=i.concat(gd(n.serverSyncTree_,l.currentWriteId,!0))}Xo(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===h?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(h),!1,null)))}wS(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)qg(r[a]);IS(n,n.transactionQueueTree_)}(n,TX(n,t),r),r}function CX(n,e){let t,r=n.transactionQueueTree_;for(t=rn(e);null!==t&&void 0===Vf(r);)r=_S(r,t),t=rn(e=cr(e));return r}function TX(n,e){const t=[];return AX(n,e,t),t.sort((r,i)=>r.order-i.order),t}function AX(n,e,t){const r=Vf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);yS(e,i=>{AX(n,i,t)})}function wS(n,e){const t=Vf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,_F(e,t.length>0?t:void 0)}yS(e,r=>{wS(n,r)})}function SF(n,e){const t=Vf(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(He(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(He(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(gd(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?_F(e,void 0):t.length=s+1,Xo(n.eventQueue_,TE(e),i);for(let o=0;o<r.length;o++)qg(r[o])}}const xF=function(n,e){const t=kMe(n),r=t.namespace;return"firebase.com"===t.domain&&Ul(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ul("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ps("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new xO(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Gn(t.pathString)}},kMe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=function MMe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,h)));const m=function PMe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ps(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class xX{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ji(this.snapshot.exportVal())}}class DX{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class DF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return He(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Zo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return sn(this._path)?null:NO(this._path)}get ref(){return new ul(this._repo,this._path)}get _queryIdentifier(){const e=NY(this._queryParams),t=AO(e);return"{}"===t?"default":t}get _queryObject(){return NY(this._queryParams)}isEqual(e){if(!((e=Aa(e))instanceof Zo))return!1;const t=this._repo===e._repo,r=OO(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function TDe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ul extends Zo{constructor(e,t){super(e,t,new HO,!1)}get parent(){const e=IY(this._path);return null===e?null:new ul(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Bf{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Gn(e),r=i_(this.ref,e);return new Bf(this._node.getChild(t),r,_r)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Bf(i,i_(this.ref,r),_r)))}hasChild(e){const t=new Gn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function i_(n,e){return null===rn((n=Aa(n))._path)?fMe("child","path",e,!1):EF("child","path",e,!1),new ul(n._repo,Lr(n._path,e))}function FMe(n){n=Aa(n);const e=new DF(()=>{}),t=new RE(e);return function bMe(n,e,t){const r=function ZRe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const h=to(c,t);r=r||pd(u,h)});let i=n.syncPointTree_.get(t);i?r=r||pd(i,kn()):(i=new JY,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new hd(r,!0,!1):null;return function ORe(n){return oS(n.viewCache_)}(eX(i,e,aS(n.pendingWriteTree_,e._path),s?o.getNode():$t.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Yr(i).withIndex(e._queryParams.getIndex());let o;if(lF(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=IE(n.serverSyncTree_,e._path,s);else{const a=wE(n.serverSyncTree_,e);o=sX(n.serverSyncTree_,e._path,s,a)}return Xo(n.eventQueue_,e._path,o),pS(n.serverSyncTree_,e,t,null,!0),s},i=>(n_(n,"get for query "+ji(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Bf(r,new ul(n._repo,n._path),n._queryParams.getIndex()))}class RE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new xX("value",this,new Bf(e.snapshotNode,new ul(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new DX(this,e,t):null}matches(e){return e instanceof RE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function BRe(n){He(!dS,"__referenceConstructor has already been defined"),dS=n})(ul),function $Re(n){He(!fS,"__referenceConstructor has already been defined"),fS=n}(ul);const RF={};function OX(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ul("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=xF(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=xF(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new uE(uE.OWNER):new eDe(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fX(n)}(t))throw new Error(Hg(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),sn(o.path)||Ul("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function YMe(n,e,t,r){let i=RF[e.name];i||(i={},RF[e.name]=i);let s=i[n.toURLString()];return s&&Ul("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new _Me(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new Jxe(n.name,t));return new ZMe(h,n)}class ZMe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function yMe(n,e,t){if(n.stats_=MO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new nS(n.repoInfo_,(r,i,s,o)=>{bX(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>EX(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ji(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Nf(n.repoInfo_,e,(r,i,s,o)=>{bX(n,r,i,s,o)},r=>{EX(n,r)},r=>{!function vMe(n,e){Zi(e,(t,r)=>{IF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function rDe(n,e){const t=n.toString();return RO[t]||(RO[t]=e()),RO[t]}(n.repoInfo_,()=>new rRe(n.stats_,n.server_)),n.infoData_=new ZDe,n.infoSyncTree_=new iX({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=IE(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),IF(n,"connected",!1),n.serverSyncTree_=new iX({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Xo(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ul(this._repo,kn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function QMe(n,e){const t=RF[e];(!t||t[n.key]!==n)&&Ul(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function wX(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ul("Cannot call "+e+" on a deleted database.")}}Nf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Nf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function tPe(n){(function BQ(n){wO=n})(Wg),$g(new Sf("database",(e,{instanceIdentifier:t})=>OX(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),ld(LQ,"1.0.10",n),ld(LQ,"1.0.10","esm2017")}();const iPe=function LX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},VX=new tE("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),SS=new _O("@firebase/auth");function xS(n,...e){SS.logLevel<=nr.ERROR&&SS.error(`Auth (${Wg}): ${n}`,...e)}function xo(n,...e){throw PF(n,...e)}function Da(n,...e){return PF(n,...e)}function MF(n,e,t){const r=Object.assign(Object.assign({},iPe()),{[e]:t});return new tE("auth","Firebase",r).create(e,{appName:n.name})}function Ji(n){return MF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PF(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VX.create(n,...e)}function $e(n,e,...t){if(!n)throw PF(e,...t)}function Wl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xS(e),new Error(e)}function vd(n,e){n||Wl(e)}function PE(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function kF(){return"http:"===BX()||"https:"===BX()}function BX(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class kE{constructor(e,t){this.shortDelay=e,this.longDelay=t,vd(t>e,"Short delay should be less than long delay!"),this.isMobile=fO()||TQ()}get(){return function oPe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kF()||function TSe(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function NF(n,e){vd(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class UX{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lPe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},cPe=new kE(3e4,6e4);function Ar(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Sr(n,e,t,r){return OF.apply(this,arguments)}function OF(){return(OF=(0,O.A)(function*(n,e,t,r,i={}){return jX(n,i,(0,O.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=zg(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return function CSe(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(c.referrerPolicy="no-referrer"),UX.fetch()(zX(n,n.config.apiHost,t,a),c)}))})).apply(this,arguments)}function jX(n,e,t){return FF.apply(this,arguments)}function FF(){return(FF=(0,O.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},lPe),e);try{const i=new dPe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw NE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw NE(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw NE(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw NE(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw MF(n,u,c);xo(n,u)}}catch(i){if(i instanceof od)throw i;xo(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function LF(){return(LF=(0,O.A)(function*(n,e,t,r,i={}){const s=yield Sr(n,e,t,r,i);return"mfaPendingCredential"in s&&xo(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function zX(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?NF(n.config,i):`${n.config.apiScheme}://${i}`}class dPe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Da(this.auth,"network-request-failed")),cPe.get())})}}function NE(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Da(n,e,r);return i.customData._tokenResponse=t,i}function UF(){return(UF=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function qX(n,e){return zF.apply(this,arguments)}function zF(){return(zF=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function OE(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function HF(){return(HF=(0,O.A)(function*(n,e=!1){const t=Aa(n),r=yield t.getIdToken(e),i=DS(r);$e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:OE($F(i.auth_time)),issuedAtTime:OE($F(i.iat)),expirationTime:OE($F(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function $F(n){return 1e3*Number(n)}function DS(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return xS("JWT malformed, contained fewer than 3 sections"),null;try{const i=LA(t);return i?JSON.parse(i):(xS("Failed to decode base64 JWT payload"),null)}catch(i){return xS("Caught error parsing JWT payload as JSON",i?.toString()),null}}function KX(n){const e=DS(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $c(n,e){return WF.apply(this,arguments)}function WF(){return(WF=(0,O.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof od&&function gPe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class _Pe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,O.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,O.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class GF{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=OE(this.lastLoginAt),this.creationTime=OE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function FE(n){return qF.apply(this,arguments)}function qF(){return(qF=(0,O.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield $c(n,qX(t,{idToken:r}));$e(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?QX(s.providerUserInfo):[],a=function vPe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new GF(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)})).apply(this,arguments)}function KF(){return(KF=(0,O.A)(function*(n){const e=Aa(n);yield FE(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function QX(n){return n.map(e=>{var{providerId:t}=e,r=(0,Nc.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function QF(){return(QF=(0,O.A)(function*(n,e){const t=yield jX(n,{},(0,O.A)(function*(){const r=zg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=zX(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",UX.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function YF(){return(YF=(0,O.A)(function*(n,e){return Sr(n,"POST","/v2/accounts:revokeToken",Ar(n,e))})).apply(this,arguments)}class o_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KX(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(0!==e.length,"internal-error");const t=KX(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,O.A)(function*(){return t||!r.accessToken||r.isExpired?($e(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,O.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function bPe(n,e){return QF.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new o_;return r&&($e("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&($e("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&($e("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new o_,this.toJSON())}_performRefresh(){return Wl("not implemented")}}function bd(n,e){$e("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Wc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Nc.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _Pe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new GF(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,O.A)(function*(){const r=yield $c(t,t.stsTokenManager.getToken(t.auth,e));return $e(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function mPe(n){return HF.apply(this,arguments)}(this,e)}reload(){return function yPe(n){return KF.apply(this,arguments)}(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,O.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield FE(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,O.A)(function*(){if(ad(e.auth.app))return Promise.reject(Ji(e.auth));const t=yield e.getIdToken();return yield $c(e,function fPe(n,e){return UF.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const h=null!==(r=t.displayName)&&void 0!==r?r:void 0,m=null!==(i=t.email)&&void 0!==i?i:void 0,y=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,b=null!==(o=t.photoURL)&&void 0!==o?o:void 0,T=null!==(a=t.tenantId)&&void 0!==a?a:void 0,M=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,B=null!==(c=t.createdAt)&&void 0!==c?c:void 0,V=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:Q,emailVerified:be,isAnonymous:Be,providerData:je,stsTokenManager:H}=t;$e(Q&&H,e,"internal-error");const L=o_.fromJSON(this.name,H);$e("string"==typeof Q,e,"internal-error"),bd(h,e.name),bd(m,e.name),$e("boolean"==typeof be,e,"internal-error"),$e("boolean"==typeof Be,e,"internal-error"),bd(y,e.name),bd(b,e.name),bd(T,e.name),bd(M,e.name),bd(B,e.name),bd(V,e.name);const W=new Wc({uid:Q,auth:e,email:m,emailVerified:be,displayName:h,isAnonymous:Be,photoURL:b,phoneNumber:y,tenantId:T,stsTokenManager:L,createdAt:B,lastLoginAt:V});return je&&Array.isArray(je)&&(W.providerData=je.map(J=>Object.assign({},J))),M&&(W._redirectEventId=M),W}static _fromIdTokenResponse(e,t,r=!1){return(0,O.A)(function*(){const i=new o_;i.updateFromServerResponse(t);const s=new Wc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield FE(s),s})()}static _fromGetAccountInfoResponse(e,t,r){return(0,O.A)(function*(){const i=t.users[0];$e(void 0!==i.localId,"internal-error");const s=void 0!==i.providerUserInfo?QX(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||s?.length),a=new o_;a.updateFromIdToken(r);const l=new Wc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new GF(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||s?.length)};return Object.assign(l,c),l})()}}const YX=new Map;function Gc(n){vd(n instanceof Function,"Expected a class definition");let e=YX.get(n);return e?(vd(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,YX.set(n,e),e)}const XX=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,O.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,O.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,O.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function RS(n,e,t){return`firebase:${n}:${e}:${t}`}class a_{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=RS(this.userKey,i.apiKey,s),this.fullPersistenceKey=RS("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,O.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Wc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,O.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,O.A)(function*(){if(!t.length)return new a_(Gc(XX),e,r);const i=(yield Promise.all(t.map(function(){var c=(0,O.A)(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Gc(XX);const o=RS(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const h=Wc._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=(0,O.A)(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return c.apply(this,arguments)}}())),new a_(s,e,r)):new a_(s,e,r)})()}}function ZX(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nZ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iZ(e))return"Blackberry";if(sZ(e))return"Webos";if(eZ(e))return"Safari";if((e.includes("chrome/")||tZ(e))&&!e.includes("edge/"))return"Chrome";if(rZ(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function JX(n=us()){return/firefox\//i.test(n)}function eZ(n=us()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tZ(n=us()){return/crios\//i.test(n)}function nZ(n=us()){return/iemobile/i.test(n)}function rZ(n=us()){return/android/i.test(n)}function iZ(n=us()){return/blackberry/i.test(n)}function sZ(n=us()){return/webos/i.test(n)}function XF(n=us()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oZ(n=us()){return XF(n)||rZ(n)||sZ(n)||iZ(n)||/windows phone/i.test(n)||nZ(n)}function aZ(n,e=[]){let t;switch(n){case"Browser":t=ZX(us());break;case"Worker":t=`${ZX(us())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wg}/${r}`}class CPe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,O.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function ZF(){return(ZF=(0,O.A)(function*(n,e={}){return Sr(n,"GET","/v2/passwordPolicy",Ar(n,e))})).apply(this,arguments)}class SPe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=null===(t=l.meetsMinPasswordLength)||void 0===t||t),l.isValid&&(l.isValid=null===(r=l.meetsMaxPasswordLength)||void 0===r||r),l.isValid&&(l.isValid=null===(i=l.containsLowercaseLetter)||void 0===i||i),l.isValid&&(l.isValid=null===(s=l.containsUppercaseLetter)||void 0===s||s),l.isValid&&(l.isValid=null===(o=l.containsNumericCharacter)||void 0===o||o),l.isValid&&(l.isValid=null===(a=l.containsNonAlphanumericCharacter)||void 0===a||a),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class xPe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lZ(this),this.idTokenSubscription=new lZ(this),this.beforeStateQueue=new CPe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Gc(t)),this._initializationPromise=this.queue((0,O.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield a_.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,O.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,O.A)(function*(){try{const r=yield qX(t,{idToken:e}),i=yield Wc._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,O.A)(function*(){var r;if(ad(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(l,l))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=s?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return $e(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,O.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,O.A)(function*(){try{yield FE(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function aPe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,O.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,O.A)(function*(){if(ad(t.app))return Promise.reject(Ji(t));const r=e?Aa(e):null;return r&&$e(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,O.A)(function*(){if(!r._deleted)return e&&$e(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,O.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,O.A)(function*(){return ad(e.app)?Promise.reject(Ji(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return ad(this.app)?Promise.reject(Ji(this)):this.queue((0,O.A)(function*(){yield t.assertedPersistence.setPersistence(Gc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,O.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,O.A)(function*(){const t=yield function TPe(n){return ZF.apply(this,arguments)}(e),r=new SPe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tE("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,O.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function EPe(n,e){return YF.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,O.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,O.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Gc(e)||t._popupRedirectResolver;$e(r,t,"argument-error"),t.redirectPersistenceManager=yield a_.create(t,[Gc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,O.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,O.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,O.A)(function*(){if(e===t.currentUser)return t.queue((0,O.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}{const l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){var t=this;return(0,O.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aZ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,O.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,O.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function sPe(n,...e){SS.logLevel<=nr.WARN&&SS.warn(`Auth (${Wg}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function vi(n){return Aa(n)}class lZ{constructor(e){this.auth=e,this.observer=null,this.addObserver=function OSe(n,e){const t=new FSe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let LE={loadJS:()=>(0,O.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cZ(n){return`__${n}${Math.floor(1e6*Math.random())}`}function hZ(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fZ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class UE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wl("not implemented")}_getIdTokenResponse(e){return Wl("not implemented")}_linkToIdToken(e,t){return Wl("not implemented")}_getReauthenticationResolver(e){return Wl("not implemented")}}function qc(n,e){return gL.apply(this,arguments)}function gL(){return(gL=(0,O.A)(function*(n,e){return function Hc(n,e,t,r){return LF.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Ar(n,e))})).apply(this,arguments)}class Kc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cke extends Kc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,O.A)(function*(){const s=yield Wc._fromIdTokenResponse(e,r,i),o=yZ(r);return new Ra({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,O.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=yZ(r);return new Ra({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function yZ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class OS extends od{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,OS.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new OS(e,t,r,i)}}function vZ(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?OS._fromErrorAndOperation(n,s,e,r):s})}function AL(){return(AL=(0,O.A)(function*(n,e,t=!1){const r=yield $c(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ra._forOperation(n,"link",r)})).apply(this,arguments)}function xL(){return(xL=(0,O.A)(function*(n,e,t=!1){const{auth:r}=n;if(ad(r.app))return Promise.reject(Ji(r));const i="reauthenticate";try{const s=yield $c(n,vZ(r,i,e,n),t);$e(s.idToken,r,"internal-error");const o=DS(s.idToken);$e(o,r,"internal-error");const{sub:a}=o;return $e(n.uid===a,r,"user-mismatch"),Ra._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&xo(r,"user-mismatch"),s}})).apply(this,arguments)}function DL(){return(DL=(0,O.A)(function*(n,e,t=!1){if(ad(n.app))return Promise.reject(Ji(n));const r="signIn",i=yield vZ(n,r,e),s=yield Ra._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function KL(){return(KL=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:createAuthUri",Ar(n,e))})).apply(this,arguments)}function QL(){return QL=(0,O.A)(function*(n,e){const r={identifier:e,continueUri:kF()?PE():"http://localhost"},{signinMethods:i}=yield function gke(n,e){return KL.apply(this,arguments)}(Aa(n),r);return i||[]}),QL.apply(this,arguments)}const VS="__sak";class AZ{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(VS,"1"),this.storage.removeItem(VS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mke=(()=>{class n extends AZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oZ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function wPe(){return function ASe(){const n=us();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,O.A)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,O.A)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,O.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),SZ=(()=>{class n extends AZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let kke=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,O.A)(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var h=(0,O.A)(function*(m){return m(i.origin,a)});return function(m){return h.apply(this,arguments)}}()),u=yield function Pke(n){return Promise.all(n.map(function(){var e=(0,O.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function oV(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class Nke{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,O.A)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=oV("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(y.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function xi(){return window}function aV(){return typeof xi().WorkerGlobalScope<"u"&&"function"==typeof xi().importScripts}function lV(){return(lV=(0,O.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xZ="firebaseLocalStorageDb",BS="firebaseLocalStorage",DZ="fbase_key";class WE{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function US(n,e){return n.transaction([BS],e?"readwrite":"readonly").objectStore(BS)}function cV(){const n=indexedDB.open(xZ,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(BS,{keyPath:DZ})}catch(i){t(i)}}),n.addEventListener("success",(0,O.A)(function*(){const r=n.result;r.objectStoreNames.contains(BS)?e(r):(r.close(),yield function Uke(){const n=indexedDB.deleteDatabase(xZ);return new WE(n).toPromise()}(),e(yield cV()))}))})}function RZ(n,e,t){return uV.apply(this,arguments)}function uV(){return(uV=(0,O.A)(function*(n,e,t){const r=US(n,!0).put({[DZ]:e,value:t});return new WE(r).toPromise()})).apply(this,arguments)}function dV(){return(dV=(0,O.A)(function*(n,e){const t=US(n,!1).get(e),r=yield new WE(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function MZ(n,e){const t=US(n,!0).delete(e);return new WE(t).toPromise()}const $ke=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,O.A)(function*(){return t.db||(t.db=yield cV()),t.db})()}_withRetries(t){var r=this;return(0,O.A)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,O.A)(function*(){return aV()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,O.A)(function*(){t.receiver=kke._getInstance(function Vke(){return aV()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,O.A)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,O.A)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,O.A)(function*(){var r,i;if(t.activeServiceWorker=yield function Fke(){return lV.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new Nke(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,O.A)(function*(){if(r.sender&&r.activeServiceWorker&&function Lke(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,O.A)(function*(){try{if(!indexedDB)return!1;const t=yield cV();return yield RZ(t,VS,"1"),yield MZ(t,VS),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,O.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,O.A)(function*(){return i._withPendingWrite((0,O.A)(function*(){return yield i._withRetries(s=>RZ(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,O.A)(function*(){const i=yield r._withRetries(s=>function jke(n,e){return dV.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,O.A)(function*(){return r._withPendingWrite((0,O.A)(function*(){return yield r._withRetries(i=>MZ(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,O.A)(function*(){const r=yield t._withRetries(o=>{const a=US(o,!1).getAll();return new WE(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;if(0!==r.length)for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,O.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();cZ("rcb"),new kE(3e4,6e4);class IV extends UE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jke(n){return function IZ(n,e){return DL.apply(this,arguments)}(n.auth,new IV(n),n.bypassAuthState)}function eNe(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),function EZ(n,e){return xL.apply(this,arguments)}(t,new IV(n),n.bypassAuthState)}function tNe(n){return wV.apply(this,arguments)}function wV(){return(wV=(0,O.A)(function*(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),function TL(n,e){return AL.apply(this,arguments)}(t,new IV(n),n.bypassAuthState)})).apply(this,arguments)}class nNe{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,O.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,O.A)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jke;case"linkViaPopup":case"linkViaRedirect":return tNe;case"reauthViaPopup":case"reauthViaRedirect":return eNe;default:xo(this.auth,"internal-error")}}resolve(e){vd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new kE(2e3,1e4);const rNe="pendingRedirect",qE=new Map;class iNe extends nNe{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,O.A)(function*(){let r=qE.get(t.auth._key());if(!r){try{const s=(yield function sNe(n,e){return xV.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}qE.set(t.auth._key(),r)}return t.bypassAuthState||qE.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,O.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,O.A)(function*(){})()}cleanUp(){}}function xV(){return(xV=(0,O.A)(function*(n,e){const t=function NZ(n){return RS(rNe,n.config.apiKey,n.name)}(e),r=function kZ(n){return Gc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function oNe(n,e){qE.set(n._key(),e)}function OZ(n,e){return OV.apply(this,arguments)}function OV(){return(OV=(0,O.A)(function*(n,e,t=!1){if(ad(n.app))return Promise.reject(Ji(n));const r=vi(n),i=function jf(n,e){return e?Gc(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),o=yield new iNe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class dNe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function hNe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VZ(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!VZ(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Da(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(LZ(e))}saveEventToCache(e){this.cachedEventUids.add(LZ(e)),this.lastProcessedEventTime=Date.now()}}function LZ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function VZ({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function LV(){return(LV=(0,O.A)(function*(n,e={}){return Sr(n,"GET","/v1/projects",e)})).apply(this,arguments)}const pNe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mNe=/^https?/;function VV(){return VV=(0,O.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function fNe(n){return LV.apply(this,arguments)}(n);for(const t of e)try{if(_Ne(t))return}catch{}xo(n,"unauthorized-domain")}),VV.apply(this,arguments)}function _Ne(n){const e=PE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!mNe.test(t))return!1;if(pNe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const yNe=new kE(3e4,6e4);function BZ(){const n=xi().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function vNe(n){return new Promise((e,t)=>{var r,i,s;function o(){BZ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BZ(),t(Da(n,"network-request-failed"))},timeout:yNe.get()})}if(null!==(i=null===(r=xi().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=xi().gapi)||void 0===s||!s.load){const a=cZ("iframefcb");return xi()[a]=()=>{gapi.load?o():t(Da(n,"network-request-failed"))},function JF(n){return LE.loadJS(n)}(`${function PPe(){return LE.gapiScript}()}?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw jS=null,e})}let jS=null;const ENe=new kE(5e3,15e3),INe="__/auth/iframe",wNe="emulator/auth/iframe",CNe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TNe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ANe(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?NF(e,wNe):`https://${n.config.authDomain}/${INe}`,r={apiKey:e.apiKey,appName:n.name,v:Wg},i=TNe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${zg(r).slice(1)}`}function BV(){return BV=(0,O.A)(function*(n){const e=yield function bNe(n){return jS=jS||vNe(n),jS}(n),t=xi().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:ANe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CNe,dontclear:!0},r=>new Promise(function(){var i=(0,O.A)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Da(n,"network-request-failed"),l=xi().setTimeout(()=>{o(a)},ENe.get());function c(){xi().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),BV.apply(this,arguments)}const xNe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class UZ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ONe="__/auth/handler",FNe="emulator/auth/handler",LNe=encodeURIComponent("fac");function jZ(n,e,t,r,i,s){return UV.apply(this,arguments)}function UV(){return(UV=(0,O.A)(function*(n,e,t,r,i,s){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wg,eventId:i};if(e instanceof Kc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",pO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof cke){const u=e.getScopes().filter(h=>""!==h);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield n._getAppCheckToken(),c=l?`#${LNe}=${encodeURIComponent(l)}`:"";return`${function VNe({config:n}){return n.emulator?NF(n,FNe):`https://${n.authDomain}/${ONe}`}(n)}?${zg(a).slice(1)}${c}`})).apply(this,arguments)}const jV="webStorageSupport",UNe=class BNe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SZ,this._completeRedirectFn=OZ,this._overrideRedirectResult=oNe}_openPopup(e,t,r,i){var s=this;return(0,O.A)(function*(){var o;vd(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield jZ(e,t,r,PE(),i);return function kNe(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xNe),{width:r.toString(),height:i.toString(),top:s,left:o}),c=us().toLowerCase();t&&(a=tZ(c)?"_blank":t),JX(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(function IPe(n=us()){var e;return XF(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function NNe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new UZ(null);const h=window.open(e||"",a,u);$e(h,n,"popup-blocked");try{h.focus()}catch{}return new UZ(h)}(e,a,oV())})()}_openRedirect(e,t,r,i){var s=this;return(0,O.A)(function*(){return yield s._originValidation(e),function Oke(n){xi().location.href=n}(yield jZ(e,t,r,PE(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(vd(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,O.A)(function*(){const r=yield function SNe(n){return BV.apply(this,arguments)}(e),i=new dNe(e);return r.register("authEvent",s=>($e(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jV,{type:jV},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[jV];void 0!==o&&t(!!o),xo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function gNe(n){return VV.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oZ()||eZ()||XF()}};var WZ="@firebase/auth";class jNe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,O.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const WNe=CQ("authIdTokenMaxAge")||300;let qZ=null;const GNe=n=>function(){var e=(0,O.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>WNe)return;const s=r?.token;qZ!==s&&(qZ=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function qNe(n=MQ()){const e=GA(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function jPe(n,e){const t=GA(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(zA(t.getOptions(),e??{}))return i;xo(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:UNe,persistence:[$ke,Mke,SZ]}),r=CQ("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=GNe(s.toString());(function Tke(n,e,t){Aa(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function Cke(n,e,t,r){Aa(n).onIdTokenChanged(e,t,r)}(t,a=>o(a))}}const i=IQ("auth");return i&&function HPe(n,e,t){const r=vi(n);$e(r._canInitEmulator,r,"emulator-config-failed"),$e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=hZ(e),{host:o,port:a}=function $Pe(n){const e=hZ(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:fZ(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:fZ(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function WPe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function DPe(n){LE=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Da("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function KNe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function HNe(n){$g(new Sf("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;$e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aZ(n)},c=new xPe(r,i,s,l);return function zPe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Gc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$g(new Sf("auth-internal",e=>{const t=vi(e.getProvider("auth").getImmediate());return new jNe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ld(WZ,"1.8.1",function zNe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),ld(WZ,"1.8.1","esm2017")}("Browser"),G(5046);var Gl=G(9574);Gl.A.registerVersion("firebase","10.14.1","app-compat");const XNe=["ngOnDestroy"];class KZ{constructor(e){return e}}const KE=new ye("angularfire2.app.options"),QE=new ye("angularfire2.app.name");function HS(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Gl.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Gl.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;e1e("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new KZ(o)}const e1e=(n,...e)=>{},t1e={provide:KZ,useFactory:HS,deps:[KE,_t,[new Mi,QE]]};let n1e=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:KE,useValue:t},{provide:QE,useValue:r}]}}constructor(t){Gl.A.registerVersion("angularfire",id.full,"core"),Gl.A.registerVersion("angularfire",id.full,"app-compat"),Gl.A.registerVersion("angular",e6.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Re(Gs))};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[t1e]})}return n})();function HV(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function r1e(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(QZ("error",`${e} was already initialized on the ${t} Firebase App with different settings.${i1e?" You may need to reload as Firebase is not HMR aware.":""}`),QZ("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const i1e=typeof module<"u"&&!!module.hot,QZ=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class s1e extends E{constructor(e=1/0,t=1/0,r=I1){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function $V(n={}){const{connector:e=()=>new E,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,h=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=l=void 0,u=h=!1},b=()=>{const T=o;y(),T?.unsubscribe()};return me((T,M)=>{c++,!h&&!u&&m();const B=l=l??e();M.add(()=>{c--,0===c&&!h&&!u&&(a=WV(b,i))}),B.subscribe(M),!o&&c>0&&(o=new Hi({next:V=>B.next(V),error:V=>{h=!0,m(),a=WV(y,t,V),B.error(V)},complete:()=>{u=!0,m(),a=WV(y,r),B.complete()}}),Js(T).subscribe(o))})(s)}}function WV(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Hi({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function YZ(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,$V({connector:()=>new s1e(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function XZ(n,e){return pt(e)?Kt(()=>n,e):Kt(()=>n)}const GV=new ye("angularfire2.auth.use-emulator"),qV=new ye("angularfire2.auth.settings"),KV=new ye("angularfire2.auth.tenant-id"),QV=new ye("angularfire2.auth.langugage-code"),YV=new ye("angularfire2.auth.use-device-language"),XV=new ye("angularfire.auth.persistence"),ZV=(n,e,t,r,i,s,o,a)=>HV(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let YE=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,u,h,m,y){const b=new E,T=Ke(void 0).pipe(Gu(o.outsideAngular),Kt(()=>s.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,5046)))),Le(()=>HS(t,s,r)),Le(M=>ZV(M,s,a,c,u,h,l,m)),YZ({bufferSize:1,refCount:!1}));if(vT(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ke(null);else{T.pipe(Zu()).subscribe();const M=T.pipe(Kt(Q=>Q.getRedirectResult().then(be=>be,()=>null)),Ui,YZ({bufferSize:1,refCount:!1})),B=T.pipe(Kt(Q=>new Vt(be=>({unsubscribe:s.runOutsideAngular(()=>Q.onAuthStateChanged(Be=>be.next(Be),Be=>be.error(Be),()=>be.complete()))})))),V=T.pipe(Kt(Q=>new Vt(be=>({unsubscribe:s.runOutsideAngular(()=>Q.onIdTokenChanged(Be=>be.next(Be),Be=>be.error(Be),()=>be.complete()))}))));this.authState=M.pipe(XZ(B),sf(o.outsideAngular),Gu(o.insideAngular)),this.user=M.pipe(XZ(V),sf(o.outsideAngular),Gu(o.insideAngular)),this.idToken=this.user.pipe(Kt(Q=>Q?Wn(Q.getIdToken()):Ke(null))),this.idTokenResult=this.user.pipe(Kt(Q=>Q?Wn(Q.getIdTokenResult()):Ke(null))),this.credential=sl(M,b,this.authState.pipe(Qr(Q=>!Q))).pipe(Le(Q=>Q?.user?Q:null),sf(o.outsideAngular),Gu(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(XNe.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const h=u?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,h),h})})})}))(this,T,s,{spy:{apply:(M,B,V)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&V.then(Q=>b.next(Q))}}})}static \u0275fac=function(r){return new(r||n)(Re(KE),Re(QE,8),Re(Gs),Re(_t),Re(Vg),Re(GV,8),Re(qV,8),Re(KV,8),Re(QV,8),Re(YV,8),Re(XV,8),Re(NA,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),a1e=(()=>{class n{constructor(){Gl.A.registerVersion("angularfire",id.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[YE]})}return n})(),$S=(()=>{class n{constructor(t,r){this.auth=t,this.afAuth=r}get user(){return this.afAuth.authState}login(t,r){return cSe(this.auth,t,r)}register(t,r,i){return oSe(this.auth,t,r).then(s=>{const o=s.user;return o?(dSe(o,{displayName:i}).then(()=>{console.log("\u4f7f\u7528\u8005\u540d\u7a31\u5df2\u66f4\u65b0:",i)}),uO(o).then(()=>{console.log("\u9a57\u8b49\u4fe1\u5df2\u767c\u9001\u81f3:",t)}),o):Promise.reject("\u4f7f\u7528\u8005\u8a3b\u518a\u5931\u6557")})}loginWithGoogle(){const t=new sd.X;return uSe(this.auth,t)}isLoggedIn(){return this.afAuth.authState.pipe(Le(t=>null!==t))}getUser(){return new Vt(t=>{lSe(this.auth,r=>{t.next(r)})})}logout(){this.afAuth.signOut()}getAuthState(){return this.afAuth.authState}getUserData(t){return FMe(function RX(n,e){return(n=Aa(n))._checkNotDeleted("ref"),void 0!==e?i_(n._root,e):n._root}(function JMe(n=MQ(),e){const t=GA(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(()=>{const e=IQ("database");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();r&&function ePe(n,e,t,r={}){(n=Aa(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ul("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ul('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new uE(uE.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:function ESe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[FA(JSON.stringify({alg:"none",type:"JWT"})),FA(JSON.stringify(o)),""].join(".")}(r.mockUserToken,n.app.options.projectId);s=new uE(o)}!function KMe(n,e,t,r){n.repoInfo_=new xO(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}(),`users/${t}`)).then(s=>s.val())}sendVerificationEmail(t){return uO(t)}resendVerificationEmail(t){const r=qNe();return function _ke(n,e){return QL.apply(this,arguments)}(r,t).then(i=>{if(i.includes("password")){const s=r.currentUser;return s?uO(s):Promise.reject(new Error("\u8acb\u5148\u767b\u5165\u4ee5\u5bc4\u9001\u9a57\u8b49\u4fe1\u3002"))}return Promise.reject(new Error("\u6b64\u96fb\u5b50\u90f5\u4ef6\u672a\u8a3b\u518a\u3002"))})}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{console.log("\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001")}).catch(r=>{throw console.error("\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u767c\u9001\u5931\u6557",r),r})}static{this.\u0275fac=function(r){return new(r||n)(Re(OA),Re(YE))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),l1e=(()=>{class n{constructor(){this.loadingSubject=new F(!1),this.messageSubject=new F(""),this.loading$=this.loadingSubject.asObservable(),this.message$=this.messageSubject.asObservable()}show(t){this.loadingSubject.next(!0),this.messageSubject.next(t)}hide(){this.loadingSubject.next(!1),this.messageSubject.next("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JV(){return me((n,e)=>{let t,r=!1;n.subscribe(Ne(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var zf,eJ,ZZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JZ={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(H,L,W){W||(W=0);var J=Array(16);if("string"==typeof L)for(var ne=0;16>ne;++ne)J[ne]=L.charCodeAt(W++)|L.charCodeAt(W++)<<8|L.charCodeAt(W++)<<16|L.charCodeAt(W++)<<24;else for(ne=0;16>ne;++ne)J[ne]=L[W++]|L[W++]<<8|L[W++]<<16|L[W++]<<24;var re=H.g[3],q=(L=H.g[0])+(re^(W=H.g[1])&((ne=H.g[2])^re))+J[0]+3614090360&4294967295;q=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=W+(q<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[1]+3905402710&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[2]+606105819&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[3]+3250441966&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[4]+4118548399&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[5]+1200080426&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[6]+2821735955&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[7]+4249261313&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[8]+1770035416&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[9]+2336552879&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[10]+4294925233&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[11]+2304563134&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[12]+1804603682&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[13]+4254626195&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[14]+2792965006&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[15]+1236535329&4294967295)<<22&4294967295|q>>>10))+((q=L+(ne^re&(W^ne))+J[1]+4129170786&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[6]+3225465664&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[11]+643717713&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[0]+3921069994&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[5]+3593408605&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[10]+38016083&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[15]+3634488961&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[4]+3889429448&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[9]+568446438&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[14]+3275163606&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[3]+4107603335&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[8]+1163531501&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[13]+2850285829&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[2]+4243563512&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[7]+1735328473&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[12]+2368359562&4294967295)<<20&4294967295|q>>>12))+((q=L+(W^ne^re)+J[5]+4294588738&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[8]+2272392833&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[11]+1839030562&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[14]+4259657740&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[1]+2763975236&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[4]+1272893353&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[7]+4139469664&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[10]+3200236656&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[13]+681279174&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[0]+3936430074&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[3]+3572445317&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[6]+76029189&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[9]+3654602809&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[12]+3873151461&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[15]+530742520&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[2]+3299628645&4294967295)<<23&4294967295|q>>>9))+((q=L+(ne^(W|~re))+J[0]+4096336452&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[7]+1126891415&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[14]+2878612391&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[5]+4237533241&4294967295)<<21&4294967295|q>>>11))+((q=L+(ne^(W|~re))+J[12]+1700485571&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[3]+2399980690&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[10]+4293915773&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[1]+2240044497&4294967295)<<21&4294967295|q>>>11))+((q=L+(ne^(W|~re))+J[8]+1873313359&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[15]+4264355552&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[6]+2734768916&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[13]+1309151649&4294967295)<<21&4294967295|q>>>11))+((re=(L=W+((q=L+(ne^(W|~re))+J[4]+4149444226&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[11]+3174756917&4294967295)<<10&4294967295|q>>>22))^((ne=re+((q=ne+(L^(re|~W))+J[2]+718787259&4294967295)<<15&4294967295|q>>>17))|~L))+J[9]+3951481745&4294967295,H.g[0]=H.g[0]+L&4294967295,H.g[1]=H.g[1]+(ne+(q<<21&4294967295|q>>>11))&4294967295,H.g[2]=H.g[2]+ne&4294967295,H.g[3]=H.g[3]+re&4294967295}function o(H,L){this.h=L;for(var W=[],J=!0,ne=H.length-1;0<=ne;ne--){var re=0|H[ne];J&&re==L||(W[ne]=re,J=!1)}this.g=W}(function e(H,L){function W(){}W.prototype=L.prototype,H.D=L.prototype,H.prototype=new W,H.prototype.constructor=H,H.C=function(J,ne,re){for(var q=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)q[Hr-2]=arguments[Hr];return L.prototype[ne].apply(J,q)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(H,L){void 0===L&&(L=H.length);for(var W=L-this.blockSize,J=this.B,ne=this.h,re=0;re<L;){if(0==ne)for(;re<=W;)i(this,H,re),re+=this.blockSize;if("string"==typeof H){for(;re<L;)if(J[ne++]=H.charCodeAt(re++),ne==this.blockSize){i(this,J),ne=0;break}}else for(;re<L;)if(J[ne++]=H[re++],ne==this.blockSize){i(this,J),ne=0;break}}this.h=ne,this.o+=L},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var L=1;L<H.length-8;++L)H[L]=0;var W=8*this.o;for(L=H.length-8;L<H.length;++L)H[L]=255&W,W/=256;for(this.u(H),H=Array(16),L=W=0;4>L;++L)for(var J=0;32>J;J+=8)H[W++]=this.g[L]>>>J&255;return H};var a={};function l(H){return-128<=H&&128>H?function s(H,L){var W=a;return Object.prototype.hasOwnProperty.call(W,H)?W[H]:W[H]=L(H)}(H,function(L){return new o([0|L],0>L?-1:0)}):new o([0|H],0>H?-1:0)}function c(H){if(isNaN(H)||!isFinite(H))return h;if(0>H)return M(c(-H));for(var L=[],W=1,J=0;H>=W;J++)L[J]=H/W|0,W*=4294967296;return new o(L,0)}var h=l(0),m=l(1),y=l(16777216);function b(H){if(0!=H.h)return!1;for(var L=0;L<H.g.length;L++)if(0!=H.g[L])return!1;return!0}function T(H){return-1==H.h}function M(H){for(var L=H.g.length,W=[],J=0;J<L;J++)W[J]=~H.g[J];return new o(W,~H.h).add(m)}function B(H,L){return H.add(M(L))}function V(H,L){for(;(65535&H[L])!=H[L];)H[L+1]+=H[L]>>>16,H[L]&=65535,L++}function Q(H,L){this.g=H,this.h=L}function be(H,L){if(b(L))throw Error("division by zero");if(b(H))return new Q(h,h);if(T(H))return L=be(M(H),L),new Q(M(L.g),M(L.h));if(T(L))return L=be(H,M(L)),new Q(M(L.g),L.h);if(30<H.g.length){if(T(H)||T(L))throw Error("slowDivide_ only works with positive integers.");for(var W=m,J=L;0>=J.l(H);)W=Be(W),J=Be(J);var ne=je(W,1),re=je(J,1);for(J=je(J,2),W=je(W,2);!b(J);){var q=re.add(J);0>=q.l(H)&&(ne=ne.add(W),re=q),J=je(J,1),W=je(W,1)}return L=B(H,ne.j(L)),new Q(ne,L)}for(ne=h;0<=H.l(L);){for(W=Math.max(1,Math.floor(H.m()/L.m())),J=48>=(J=Math.ceil(Math.log(W)/Math.LN2))?1:Math.pow(2,J-48),q=(re=c(W)).j(L);T(q)||0<q.l(H);)q=(re=c(W-=J)).j(L);b(re)&&(re=m),ne=ne.add(re),H=B(H,q)}return new Q(ne,H)}function Be(H){for(var L=H.g.length+1,W=[],J=0;J<L;J++)W[J]=H.i(J)<<1|H.i(J-1)>>>31;return new o(W,H.h)}function je(H,L){var W=L>>5;L%=32;for(var J=H.g.length-W,ne=[],re=0;re<J;re++)ne[re]=0<L?H.i(re+W)>>>L|H.i(re+W+1)<<32-L:H.i(re+W);return new o(ne,H.h)}(n=o.prototype).m=function(){if(T(this))return-M(this).m();for(var H=0,L=1,W=0;W<this.g.length;W++){var J=this.i(W);H+=(0<=J?J:4294967296+J)*L,L*=4294967296}return H},n.toString=function(H){if(2>(H=H||10)||36<H)throw Error("radix out of range: "+H);if(b(this))return"0";if(T(this))return"-"+M(this).toString(H);for(var L=c(Math.pow(H,6)),W=this,J="";;){var ne=be(W,L).g,re=((0<(W=B(W,ne.j(L))).g.length?W.g[0]:W.h)>>>0).toString(H);if(b(W=ne))return re+J;for(;6>re.length;)re="0"+re;J=re+J}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h},n.l=function(H){return T(H=B(this,H))?-1:b(H)?0:1},n.abs=function(){return T(this)?M(this):this},n.add=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0,ne=0;ne<=L;ne++){var re=J+(65535&this.i(ne))+(65535&H.i(ne)),q=(re>>>16)+(this.i(ne)>>>16)+(H.i(ne)>>>16);J=q>>>16,W[ne]=(q&=65535)<<16|(re&=65535)}return new o(W,-2147483648&W[W.length-1]?-1:0)},n.j=function(H){if(b(this)||b(H))return h;if(T(this))return T(H)?M(this).j(M(H)):M(M(this).j(H));if(T(H))return M(this.j(M(H)));if(0>this.l(y)&&0>H.l(y))return c(this.m()*H.m());for(var L=this.g.length+H.g.length,W=[],J=0;J<2*L;J++)W[J]=0;for(J=0;J<this.g.length;J++)for(var ne=0;ne<H.g.length;ne++){var re=this.i(J)>>>16,q=65535&this.i(J),Hr=H.i(ne)>>>16,aa=65535&H.i(ne);W[2*J+2*ne]+=q*aa,V(W,2*J+2*ne),W[2*J+2*ne+1]+=re*aa,V(W,2*J+2*ne+1),W[2*J+2*ne+1]+=q*Hr,V(W,2*J+2*ne+1),W[2*J+2*ne+2]+=re*Hr,V(W,2*J+2*ne+2)}for(J=0;J<L;J++)W[J]=W[2*J+1]<<16|W[2*J];for(J=L;J<2*L;J++)W[J]=0;return new o(W,0)},n.A=function(H){return be(this,H).h},n.and=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)&H.i(J);return new o(W,this.h&H.h)},n.or=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)|H.i(J);return new o(W,this.h|H.h)},n.xor=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)^H.i(J);return new o(W,this.h^H.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eJ=JZ.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(H,L){if(0==H.length)throw Error("number format error: empty string");if(2>(L=L||10)||36<L)throw Error("radix out of range: "+L);if("-"==H.charAt(0))return M(u(H.substring(1),L));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var W=c(Math.pow(L,8)),J=h,ne=0;ne<H.length;ne+=8){var re=Math.min(8,H.length-ne),q=parseInt(H.substring(ne,ne+re),L);8>re?(re=c(Math.pow(L,re)),J=J.j(re).add(c(q))):J=(J=J.j(W)).add(c(q))}return J},zf=JZ.Integer=o}).apply(typeof ZZ<"u"?ZZ:typeof self<"u"?self:typeof window<"u"?window:{});var tJ,XE,nJ,GS,e2,rJ,iJ,sJ,WS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,v,I){return p==Array.prototype||p==Object.prototype||(p[v]=I.value),p},r=function t(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof WS&&WS];for(var v=0;v<p.length;++v){var I=p[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(p,v){if(v)e:{var I=r;p=p.split(".");for(var P=0;P<p.length-1;P++){var oe=p[P];if(!(oe in I))break e;I=I[oe]}(v=v(P=I[p=p[p.length-1]]))!=P&&null!=v&&e(I,p,{configurable:!0,writable:!0,value:v})}}("Array.prototype.values",function(p){return p||function(){return function s(p,v){p instanceof String&&(p+="");var I=0,P=!1,oe={next:function(){if(!P&&I<p.length){var Ee=I++;return{value:v(Ee,p[Ee]),done:!1}}return P=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}(this,function(v,I){return I})}});var o=o||{},a=this||self;function l(p){var v=typeof p;return"array"==(v="object"!=v?v:p?Array.isArray(p)?"array":v:"null")||"object"==v&&"number"==typeof p.length}function c(p){var v=typeof p;return"object"==v&&null!=p||"function"==v}function u(p,v,I){return p.call.apply(p.bind,arguments)}function h(p,v,I){if(!p)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,P),p.apply(v,oe)}}return function(){return p.apply(v,arguments)}}function m(p,v,I){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:h).apply(null,arguments)}function y(p,v){var I=Array.prototype.slice.call(arguments,1);return function(){var P=I.slice();return P.push.apply(P,arguments),p.apply(this,P)}}function b(p,v){function I(){}I.prototype=v.prototype,p.aa=v.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function(P,oe,Ee){for(var Qe=Array(arguments.length-2),hr=2;hr<arguments.length;hr++)Qe[hr-2]=arguments[hr];return v.prototype[oe].apply(P,Qe)}}function T(p){const v=p.length;if(0<v){const I=Array(v);for(let P=0;P<v;P++)I[P]=p[P];return I}return[]}function M(p,v){for(let I=1;I<arguments.length;I++){const P=arguments[I];if(l(P)){const oe=p.length||0,Ee=P.length||0;p.length=oe+Ee;for(let Qe=0;Qe<Ee;Qe++)p[oe+Qe]=P[Qe]}else p.push(P)}}function V(p){return/^[\s\xa0]*$/.test(p)}function Q(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function be(p){return be[" "](p),p}be[" "]=function(){};var Be=!(-1==Q().indexOf("Gecko")||-1!=Q().toLowerCase().indexOf("webkit")&&-1==Q().indexOf("Edge")||-1!=Q().indexOf("Trident")||-1!=Q().indexOf("MSIE")||-1!=Q().indexOf("Edge"));function je(p,v,I){for(const P in p)v.call(I,p[P],P,p)}function L(p){const v={};for(const I in p)v[I]=p[I];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(p,v){let I,P;for(let oe=1;oe<arguments.length;oe++){for(I in P=arguments[oe],P)p[I]=P[I];for(let Ee=0;Ee<W.length;Ee++)I=W[Ee],Object.prototype.hasOwnProperty.call(P,I)&&(p[I]=P[I])}}function ne(p){var v=1;p=p.split(":");const I=[];for(;0<v&&p.length;)I.push(p.shift()),v--;return p.length&&I.push(p.join(":")),I}function re(p){a.setTimeout(()=>{throw p},0)}function q(){var p=hn;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}var aa=new class B{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}(()=>new ot,p=>p.reset());class ot{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,bt=!1,hn=new class Hr{constructor(){this.h=this.g=null}add(v,I){const P=aa.get();P.set(v,I),this.h?this.h.next=P:this.g=P,this.h=P}},Ii=()=>{const p=a.Promise.resolve(void 0);ft=()=>{p.then(Fa)}};var Fa=()=>{for(var p;p=q();){try{p.h.call(p.g)}catch(I){re(I)}var v=aa;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}bt=!1};function li(){this.s=this.s,this.C=this.C}function Mr(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}li.prototype.s=!1,li.prototype.ma=function(){this.s||(this.s=!0,this.N())},li.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Mr.prototype.h=function(){this.defaultPrevented=!0};var Pr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};a.addEventListener("test",I,v),a.removeEventListener("test",I,v)}catch{}return p}();function eh(p,v){if(Mr.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,P=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(Be){e:{try{be(v.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(v=null)}}else"mouseover"==I?v=p.fromElement:"mouseout"==I&&(v=p.toElement);this.relatedTarget=v,P?(this.clientX=void 0!==P.clientX?P.clientX:P.pageX,this.clientY=void 0!==P.clientY?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:vH[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&eh.aa.h.call(this)}}b(eh,Mr);var vH={2:"touch",3:"pen",4:"mouse"};eh.prototype.h=function(){eh.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ci="closure_listenable_"+(1e6*Math.random()|0),uu=0;function ko(p,v,I,P,oe){this.listener=p,this.proxy=null,this.src=v,this.type=I,this.capture=!!P,this.ha=oe,this.key=++uu,this.da=this.fa=!1}function du(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function th(p){this.src=p,this.g={},this.h=0}function bH(p,v){var I=v.type;if(I in p.g){var Ee,P=p.g[I],oe=Array.prototype.indexOf.call(P,v,void 0);(Ee=0<=oe)&&Array.prototype.splice.call(P,oe,1),Ee&&(du(v),0==p.g[I].length&&(delete p.g[I],p.h--))}}function EH(p,v,I,P){for(var oe=0;oe<p.length;++oe){var Ee=p[oe];if(!Ee.da&&Ee.listener==v&&Ee.capture==!!I&&Ee.ha==P)return oe}return-1}th.prototype.add=function(p,v,I,P,oe){var Ee=p.toString();(p=this.g[Ee])||(p=this.g[Ee]=[],this.h++);var Qe=EH(p,v,P,oe);return-1<Qe?(v=p[Qe],I||(v.fa=!1)):((v=new ko(v,this.src,Ee,!!P,oe)).fa=I,p.push(v)),v};var IH="closure_lm_"+(1e6*Math.random()|0),wH={};function uae(p,v,I,P,oe){if(P&&P.once)return hae(p,v,I,P,oe);if(Array.isArray(v)){for(var Ee=0;Ee<v.length;Ee++)uae(p,v[Ee],I,P,oe);return null}return I=SH(I),p&&p[ci]?p.K(v,I,c(P)?!!P.capture:!!P,oe):dae(p,v,I,!1,P,oe)}function dae(p,v,I,P,oe,Ee){if(!v)throw Error("Invalid event type");var Qe=c(oe)?!!oe.capture:!!oe,hr=TH(p);if(hr||(p[IH]=hr=new th(p)),(I=hr.add(v,I,P,Qe,Ee)).proxy)return I;if(P=function q5e(){const v=K5e;return function p(I){return v.call(p.src,p.listener,I)}}(),I.proxy=P,P.src=p,P.listener=I,p.addEventListener)Pr||(oe=Qe),void 0===oe&&(oe=!1),p.addEventListener(v.toString(),P,oe);else if(p.attachEvent)p.attachEvent(pae(v.toString()),P);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(P)}return I}function hae(p,v,I,P,oe){if(Array.isArray(v)){for(var Ee=0;Ee<v.length;Ee++)hae(p,v[Ee],I,P,oe);return null}return I=SH(I),p&&p[ci]?p.L(v,I,c(P)?!!P.capture:!!P,oe):dae(p,v,I,!0,P,oe)}function fae(p,v,I,P,oe){if(Array.isArray(v))for(var Ee=0;Ee<v.length;Ee++)fae(p,v[Ee],I,P,oe);else P=c(P)?!!P.capture:!!P,I=SH(I),p&&p[ci]?(p=p.i,(v=String(v).toString())in p.g&&-1<(I=EH(Ee=p.g[v],I,P,oe))&&(du(Ee[I]),Array.prototype.splice.call(Ee,I,1),0==Ee.length&&(delete p.g[v],p.h--))):p&&(p=TH(p))&&(v=p.g[v.toString()],p=-1,v&&(p=EH(v,I,P,oe)),(I=-1<p?v[p]:null)&&CH(I))}function CH(p){if("number"!=typeof p&&p&&!p.da){var v=p.src;if(v&&v[ci])bH(v.i,p);else{var I=p.type,P=p.proxy;v.removeEventListener?v.removeEventListener(I,P,p.capture):v.detachEvent?v.detachEvent(pae(I),P):v.addListener&&v.removeListener&&v.removeListener(P),(I=TH(v))?(bH(I,p),0==I.h&&(I.src=null,v[IH]=null)):du(p)}}}function pae(p){return p in wH?wH[p]:wH[p]="on"+p}function K5e(p,v){if(p.da)p=!0;else{v=new eh(v,this);var I=p.listener,P=p.ha||p.src;p.fa&&CH(p),p=I.call(P,v)}return p}function TH(p){return(p=p[IH])instanceof th?p:null}var AH="__closure_events_fn_"+(1e9*Math.random()>>>0);function SH(p){return"function"==typeof p?p:(p[AH]||(p[AH]=function(v){return p.handleEvent(v)}),p[AH])}function Vs(){li.call(this),this.i=new th(this),this.M=this,this.F=null}function oo(p,v){var I,P=p.F;if(P)for(I=[];P;P=P.F)I.push(P);if(p=p.M,P=v.type||v,"string"==typeof v)v=new Mr(v,p);else if(v instanceof Mr)v.target=v.target||p;else{var oe=v;J(v=new Mr(P,p),oe)}if(oe=!0,I)for(var Ee=I.length-1;0<=Ee;Ee--){var Qe=v.g=I[Ee];oe=XD(Qe,P,!0,v)&&oe}if(oe=XD(Qe=v.g=p,P,!0,v)&&oe,oe=XD(Qe,P,!1,v)&&oe,I)for(Ee=0;Ee<I.length;Ee++)oe=XD(Qe=v.g=I[Ee],P,!1,v)&&oe}function XD(p,v,I,P){if(!(v=p.i.g[String(v)]))return!0;v=v.concat();for(var oe=!0,Ee=0;Ee<v.length;++Ee){var Qe=v[Ee];if(Qe&&!Qe.da&&Qe.capture==I){var hr=Qe.listener,ms=Qe.ha||Qe.src;Qe.fa&&bH(p.i,Qe),oe=!1!==hr.call(ms,P)&&oe}}return oe&&!P.defaultPrevented}function mae(p,v,I){if("function"==typeof p)I&&(p=m(p,I));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=m(p.handleEvent,p)}return 2147483647<Number(v)?-1:a.setTimeout(p,v||0)}function gae(p){p.g=mae(()=>{p.g=null,p.i&&(p.i=!1,gae(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}b(Vs,li),Vs.prototype[ci]=!0,Vs.prototype.removeEventListener=function(p,v,I,P){fae(this,p,v,I,P)},Vs.prototype.N=function(){if(Vs.aa.N.call(this),this.i){var v,p=this.i;for(v in p.g){for(var I=p.g[v],P=0;P<I.length;P++)du(I[P]);delete p.g[v],p.h--}}this.F=null},Vs.prototype.K=function(p,v,I,P){return this.i.add(String(p),v,!1,I,P)},Vs.prototype.L=function(p,v,I,P){return this.i.add(String(p),v,!0,I,P)};class Q5e extends li{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:gae(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tw(p){li.call(this),this.h=p,this.g={}}b(Tw,li);var _ae=[];function yae(p){je(p.g,function(v,I){this.g.hasOwnProperty(I)&&CH(v)},p),p.g={}}Tw.prototype.N=function(){Tw.aa.N.call(this),yae(this)},Tw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xH=a.JSON.stringify,Y5e=a.JSON.parse,X5e=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function DH(){}function bae(){}DH.prototype.h=null;var Aw={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function RH(){Mr.call(this,"d")}function MH(){Mr.call(this,"c")}b(RH,Mr),b(MH,Mr);var xp={},Eae=null;function ZD(){return Eae=Eae||new Vs}function Iae(p){Mr.call(this,xp.La,p)}function Sw(p){const v=ZD();oo(v,new Iae(v))}function wae(p,v){Mr.call(this,xp.STAT_EVENT,p),this.stat=v}function ao(p){const v=ZD();oo(v,new wae(v,p))}function Cae(p,v){Mr.call(this,xp.Ma,p),this.size=v}function xw(p,v){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},v)}function Dw(){this.g=!0}function ly(p,v,I,P){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+function tGe(p,v){if(!p.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I)for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var P=I[p];if(!(2>P.length)){var oe=P[1];if(Array.isArray(oe)&&!(1>oe.length)){var Ee=oe[0];if("noop"!=Ee&&"stop"!=Ee&&"close"!=Ee)for(var Qe=1;Qe<oe.length;Qe++)oe[Qe]=""}}}return xH(I)}catch{return v}}(p,I)+(P?" "+P:"")})}xp.La="serverreachability",b(Iae,Mr),xp.STAT_EVENT="statevent",b(wae,Mr),xp.Ma="timingevent",b(Cae,Mr),Dw.prototype.xa=function(){this.g=!1},Dw.prototype.info=function(){};var PH,JD={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function eR(){}function nh(p,v,I,P){this.j=p,this.i=v,this.l=I,this.R=P||1,this.U=new Tw(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Aae}function Aae(){this.i=null,this.g="",this.h=!1}b(eR,DH),eR.prototype.g=function(){return new XMLHttpRequest},eR.prototype.i=function(){return{}},PH=new eR;var Sae={},kH={};function NH(p,v,I){p.L=1,p.v=iR(hu(v)),p.m=I,p.P=!0,xae(p,null)}function xae(p,v){p.F=Date.now(),tR(p),p.A=hu(p.v);var I=p.A,P=p.R;Array.isArray(P)||(P=[String(P)]),zae(I.i,"t",P),p.C=0,I=p.j.J,p.h=new Aae,p.g=ole(p.j,I?v:null,!p.m),0<p.O&&(p.M=new Q5e(m(p.Y,p,p.g),p.O)),v=p.U,I=p.g,P=p.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(_ae[0]=oe.toString()),oe=_ae);for(var Ee=0;Ee<oe.length;Ee++){var Qe=uae(I,oe[Ee],P||v.handleEvent,!1,v.h||v);if(!Qe)break;v.g[Qe.key]=Qe}v=p.H?L(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),Sw(),function Z5e(p,v,I,P,oe,Ee){p.info(function(){if(p.g)if(Ee)for(var Qe="",hr=Ee.split("&"),ms=0;ms<hr.length;ms++){var On=hr[ms].split("=");if(1<On.length){var Bs=On[0];On=On[1];var Us=Bs.split("_");Qe=2<=Us.length&&"type"==Us[1]?Qe+(Bs+"=")+On+"&":Qe+(Bs+"=redacted&")}}else Qe=null;else Qe=Ee;return"XMLHTTP REQ ("+P+") [attempt "+oe+"]: "+v+"\n"+I+"\n"+Qe})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Dae(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function nGe(p,v){var I=p.C,P=v.indexOf("\n",I);return-1==P?kH:(I=Number(v.substring(I,P)),isNaN(I)?Sae:(P+=1)+I>v.length?kH:(v=v.slice(P,P+I),p.C=P+I,v))}function tR(p){p.S=Date.now()+p.I,Rae(p,p.I)}function Rae(p,v){if(null!=p.B)throw Error("WatchDog timer not null");p.B=xw(m(p.ba,p),v)}function OH(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function Rw(p){0==p.j.G||p.J||nle(p.j,p)}function Dp(p){OH(p);var v=p.M;v&&"function"==typeof v.ma&&v.ma(),p.M=null,yae(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function FH(p,v){try{var I=p.j;if(0!=I.G&&(I.g==p||LH(I.h,p)))if(!p.K&&LH(I.h,p)&&3==I.G){try{var P=I.Da.g.parse(v)}catch{P=null}if(Array.isArray(P)&&3==P.length){var oe=P;if(0==oe[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<p.F))break e;cR(I),aR(I)}jH(I),ao(18)}}else I.za=oe[1],0<I.za-I.T&&37500>oe[2]&&I.F&&0==I.v&&!I.C&&(I.C=xw(m(I.Za,I),6e3));if(1>=kae(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Mp(I,11)}else if((p.K||I.g==p)&&cR(I),!V(v))for(oe=I.Da.g.parse(v),v=0;v<oe.length;v++){let On=oe[v];if(I.T=On[0],On=On[1],2==I.G)if("c"==On[0]){I.K=On[1],I.ia=On[2];const Bs=On[3];null!=Bs&&(I.la=Bs,I.j.info("VER="+I.la));const Us=On[4];null!=Us&&(I.Aa=Us,I.j.info("SVER="+I.Aa));const dy=On[5];null!=dy&&"number"==typeof dy&&0<dy&&(I.L=P=1.5*dy,I.j.info("backChannelRequestTimeoutMs_="+P)),P=I;const _l=p.g;if(_l){const dR=_l.g?_l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dR){var Ee=P.h;Ee.g||-1==dR.indexOf("spdy")&&-1==dR.indexOf("quic")&&-1==dR.indexOf("h2")||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(VH(Ee,Ee.h),Ee.h=null))}if(P.D){const HH=_l.g?_l.g.getResponseHeader("X-HTTP-Session-Id"):null;HH&&(P.ya=HH,kr(P.I,P.D,HH))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Qe=p;if((P=I).qa=sle(P,P.J?P.ia:null,P.W),Qe.K){Nae(P.h,Qe);var hr=Qe,ms=P.L;ms&&(hr.I=ms),hr.B&&(OH(hr),tR(hr)),P.g=Qe}else ele(P);0<I.i.length&&lR(I)}else"stop"!=On[0]&&"close"!=On[0]||Mp(I,7);else 3==I.G&&("stop"==On[0]||"close"==On[0]?"stop"==On[0]?Mp(I,7):UH(I):"noop"!=On[0]&&I.l&&I.l.ta(On),I.v=0)}Sw()}catch{}}nh.prototype.ca=function(p){p=p.target;const v=this.M;v&&3==fu(p)?v.j():this.Y(p)},nh.prototype.Y=function(p){try{if(p==this.g)e:{const Us=fu(this.g);var v=this.g.Ba();if(this.g.Z(),!(3>Us)&&(3!=Us||this.g&&(this.h.h||this.g.oa()||Qae(this.g)))){this.J||4!=Us||7==v||Sw(),OH(this);var I=this.g.Z();this.X=I;t:if(Dae(this)){var P=Qae(this.g);p="";var oe=P.length,Ee=4==fu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Dp(this),Rw(this);var Qe="";break t}this.h.i=new a.TextDecoder}for(v=0;v<oe;v++)this.h.h=!0,p+=this.h.i.decode(P[v],{stream:!(Ee&&v==oe-1)});P.length=0,this.h.g+=p,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=200==I,function J5e(p,v,I,P,oe,Ee,Qe){p.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+oe+"]: "+v+"\n"+I+"\n"+Ee+" "+Qe})}(this.i,this.u,this.A,this.l,this.R,Us,I),this.o){if(this.T&&!this.K){t:{if(this.g){var hr,ms=this.g;if((hr=ms.g?ms.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(hr)){var On=hr;break t}}On=null}if(!(I=On)){this.o=!1,this.s=3,ao(12),Dp(this),Rw(this);break e}ly(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,FH(this,I)}if(this.P){let _l;for(I=!0;!this.J&&this.C<Qe.length;){if(_l=nGe(this,Qe),_l==kH){4==Us&&(this.s=4,ao(14),I=!1),ly(this.i,this.l,null,"[Incomplete Response]");break}if(_l==Sae){this.s=4,ao(15),ly(this.i,this.l,Qe,"[Invalid Chunk]"),I=!1;break}ly(this.i,this.l,_l,null),FH(this,_l)}if(Dae(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Us||0!=Qe.length||this.h.h||(this.s=1,ao(16),I=!1),this.o=this.o&&I,I){if(0<Qe.length&&!this.W){this.W=!0;var Bs=this.j;Bs.g==this&&Bs.ba&&!Bs.M&&(Bs.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),zH(Bs),Bs.M=!0,ao(11))}}else ly(this.i,this.l,Qe,"[Invalid Chunked Response]"),Dp(this),Rw(this)}else ly(this.i,this.l,Qe,null),FH(this,Qe);4==Us&&Dp(this),this.o&&!this.J&&(4==Us?nle(this.j,this):(this.o=!1,tR(this)))}else(function vGe(p){const v={};p=(p.g&&2<=fu(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let P=0;P<p.length;P++){if(V(p[P]))continue;var I=ne(p[P]);const oe=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const Ee=v[oe]||[];v[oe]=Ee,Ee.push(I)}!function H(p,v){for(const I in p)v.call(void 0,p[I],I,p)}(v,function(P){return P.join(", ")})})(this.g),400==I&&0<Qe.indexOf("Unknown SID")?(this.s=3,ao(12)):(this.s=0,ao(13)),Dp(this),Rw(this)}}}catch{}},nh.prototype.cancel=function(){this.J=!0,Dp(this)},nh.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function eGe(p,v){p.info(function(){return"TIMEOUT: "+v})}(this.i,this.A),2!=this.L&&(Sw(),ao(17)),Dp(this),this.s=2,Rw(this)):Rae(this,this.S-p)};var rGe=class{constructor(p,v){this.g=p,this.map=v}};function Mae(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pae(p){return!!p.h||!!p.g&&p.g.size>=p.j}function kae(p){return p.h?1:p.g?p.g.size:0}function LH(p,v){return p.h?p.h==v:!!p.g&&p.g.has(v)}function VH(p,v){p.g?p.g.add(v):p.h=v}function Nae(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}function Oae(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let v=p.i;for(const I of p.g.values())v=v.concat(I.D);return v}return T(p.i)}function Fae(p,v){if(p.forEach&&"function"==typeof p.forEach)p.forEach(v,void 0);else if(l(p)||"string"==typeof p)Array.prototype.forEach.call(p,v,void 0);else for(var I=function sGe(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||"string"==typeof p){var v=[];p=p.length;for(var I=0;I<p;I++)v.push(I);return v}v=[],I=0;for(const P in p)v[I++]=P;return v}}}(p),P=function iGe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(l(p)){for(var v=[],I=p.length,P=0;P<I;P++)v.push(p[P]);return v}for(P in v=[],I=0,p)v[I++]=p[P];return v}(p),oe=P.length,Ee=0;Ee<oe;Ee++)v.call(void 0,P[Ee],I&&I[Ee],p)}Mae.prototype.cancel=function(){if(this.i=Oae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Lae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rp(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Rp){this.h=p.h,nR(this,p.j),this.o=p.o,this.g=p.g,rR(this,p.s),this.l=p.l;var v=p.i,I=new kw;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),Vae(this,I),this.m=p.m}else p&&(v=String(p).match(Lae))?(this.h=!1,nR(this,v[1]||"",!0),this.o=Mw(v[2]||""),this.g=Mw(v[3]||"",!0),rR(this,v[4]),this.l=Mw(v[5]||"",!0),Vae(this,v[6]||"",!0),this.m=Mw(v[7]||"")):(this.h=!1,this.i=new kw(null,this.h))}function hu(p){return new Rp(p)}function nR(p,v,I){p.j=I?Mw(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function rR(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function Vae(p,v,I){v instanceof kw?(p.i=v,function hGe(p,v){v&&!p.j&&(rh(p),p.i=null,p.g.forEach(function(I,P){var oe=P.toLowerCase();P!=oe&&(Uae(this,P),zae(this,oe,I))},p)),p.j=v}(p.i,p.h)):(I||(v=Pw(v,uGe)),p.i=new kw(v,p.h))}function kr(p,v,I){p.i.set(v,I)}function iR(p){return kr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Mw(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Pw(p,v,I){return"string"==typeof p?(p=encodeURI(p).replace(v,aGe),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function aGe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Rp.prototype.toString=function(){var p=[],v=this.j;v&&p.push(Pw(v,Bae,!0),":");var I=this.g;return(I||"file"==v)&&(p.push("//"),(v=this.o)&&p.push(Pw(v,Bae,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&p.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&p.push("/"),p.push(Pw(I,"/"==I.charAt(0)?cGe:lGe,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",Pw(I,dGe)),p.join("")};var Bae=/[#\/\?@]/g,lGe=/[#\?:]/g,cGe=/[#\?]/g,uGe=/[#\?@]/g,dGe=/#/g;function kw(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function rh(p){p.g||(p.g=new Map,p.h=0,p.i&&function oGe(p,v){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var P=p[I].indexOf("="),oe=null;if(0<=P){var Ee=p[I].substring(0,P);oe=p[I].substring(P+1)}else Ee=p[I];v(Ee,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}(p.i,function(v,I){p.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}function Uae(p,v){rh(p),v=cy(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function jae(p,v){return rh(p),v=cy(p,v),p.g.has(v)}function zae(p,v,I){Uae(p,v),0<I.length&&(p.i=null,p.g.set(cy(p,v),T(I)),p.h+=I.length)}function cy(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function ih(p,v,I,P,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),P(I)}catch{}}function mGe(){this.g=new X5e}function gGe(p,v,I){const P=I||"";try{Fae(p,function(oe,Ee){let Qe=oe;c(oe)&&(Qe=xH(oe)),v.push(P+Ee+"="+encodeURIComponent(Qe))})}catch(oe){throw v.push(P+"type="+encodeURIComponent("_badmap")),oe}}function Nw(p){this.l=p.Ub||null,this.j=p.eb||!1}function sR(p,v){Vs.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Hae(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Ow(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Fw(p)}function Fw(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function $ae(p){let v="";return je(p,function(I,P){v+=P,v+=":",v+=I,v+="\r\n"}),v}function BH(p,v,I){e:{for(P in I){var P=!1;break e}P=!0}P||(I=$ae(I),"string"==typeof p?null!=I&&encodeURIComponent(String(I)):kr(p,v,I))}function ui(p){Vs.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=kw.prototype).add=function(p,v){rh(this),this.i=null,p=cy(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(v),this.h+=1,this},n.forEach=function(p,v){rh(this),this.g.forEach(function(I,P){I.forEach(function(oe){p.call(v,oe,P,this)},this)},this)},n.na=function(){rh(this);const p=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let P=0;P<v.length;P++){const oe=p[P];for(let Ee=0;Ee<oe.length;Ee++)I.push(v[P])}return I},n.V=function(p){rh(this);let v=[];if("string"==typeof p)jae(this,p)&&(v=v.concat(this.g.get(cy(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)v=v.concat(p[I])}return v},n.set=function(p,v){return rh(this),this.i=null,jae(this,p=cy(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},n.get=function(p,v){return p&&0<(p=this.V(p)).length?String(p[0]):v},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var P=v[I];const Ee=encodeURIComponent(String(P)),Qe=this.V(P);for(P=0;P<Qe.length;P++){var oe=Ee;""!==Qe[P]&&(oe+="="+encodeURIComponent(String(Qe[P]))),p.push(oe)}}return this.i=p.join("&")},b(Nw,DH),Nw.prototype.g=function(){return new sR(this.l,this.j)},Nw.prototype.i=function(p){return function(){return p}}({}),b(sR,Vs),(n=sR.prototype).open=function(p,v){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,Fw(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ow(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Fw(this)),this.g&&(this.readyState=3,Fw(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hae(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?Ow(this):Fw(this),3==this.readyState&&Hae(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Ow(this))},n.Qa=function(p){this.g&&(this.response=p,Ow(this))},n.ga=function(){this.g&&Ow(this)},n.setRequestHeader=function(p,v){this.u.append(p,v)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var I=v.next();!I.done;)p.push((I=I.value)[0]+": "+I[1]),I=v.next();return p.join("\r\n")},Object.defineProperty(sR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),b(ui,Vs);var _Ge=/^https?$/i,yGe=["POST","PUT"];function Wae(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,Gae(p),oR(p)}function Gae(p){p.A||(p.A=!0,oo(p,"complete"),oo(p,"error"))}function qae(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=fu(p)||2!=p.Z()))if(p.u&&4==fu(p))mae(p.Ea,0,p);else if(oo(p,"readystatechange"),4==fu(p)){p.h=!1;try{const Qe=p.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var I;if(!(I=v)){var P;if(P=0===Qe){var oe=String(p.D).match(Lae)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),P=!_Ge.test(oe?oe.toLowerCase():"")}I=P}if(I)oo(p,"complete"),oo(p,"success");else{p.m=6;try{var Ee=2<fu(p)?p.g.statusText:""}catch{Ee=""}p.l=Ee+" ["+p.Z()+"]",Gae(p)}}finally{oR(p)}}}function oR(p,v){if(p.g){Kae(p);const I=p.g,P=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||oo(p,"ready");try{I.onreadystatechange=P}catch{}}}function Kae(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function fu(p){return p.g?p.g.readyState:0}function Qae(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Lw(p,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||v}function Yae(p){this.Aa=0,this.i=[],this.j=new Dw,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lw("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lw("baseRetryDelayMs",5e3,p),this.cb=Lw("retryDelaySeedMs",1e4,p),this.Wa=Lw("forwardChannelMaxRetries",2,p),this.wa=Lw("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Mae(p&&p.concurrentRequestLimit),this.Da=new mGe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function UH(p){if(Xae(p),3==p.G){var v=p.U++,I=hu(p.I);if(kr(I,"SID",p.K),kr(I,"RID",v),kr(I,"TYPE","terminate"),Vw(p,I),(v=new nh(p,p.j,v)).L=2,v.v=iR(hu(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=v.v,I=!0),I||(v.g=ole(v.j,null),v.g.ea(v.v)),v.F=Date.now(),tR(v)}ile(p)}function aR(p){p.g&&(zH(p),p.g.cancel(),p.g=null)}function Xae(p){aR(p),p.u&&(a.clearTimeout(p.u),p.u=null),cR(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function lR(p){if(!Pae(p.h)&&!p.s){p.s=!0;var v=p.Ga;ft||Ii(),bt||(ft(),bt=!0),hn.add(v,p),p.B=0}}function Zae(p,v){var I;I=v?v.l:p.U++;const P=hu(p.I);kr(P,"SID",p.K),kr(P,"RID",I),kr(P,"AID",p.T),Vw(p,P),p.m&&p.o&&BH(P,p.m,p.o),I=new nh(p,p.j,I,p.B+1),null===p.m&&(I.H=p.o),v&&(p.i=v.D.concat(p.i)),v=Jae(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),VH(p.h,I),NH(I,P,v)}function Vw(p,v){p.H&&je(p.H,function(I,P){kr(v,P,I)}),p.l&&Fae({},function(I,P){kr(v,P,I)})}function Jae(p,v,I){I=Math.min(p.i.length,I);var P=p.l?m(p.l.Na,p.l,p):null;e:{var oe=p.i;let Ee=-1;for(;;){const Qe=["count="+I];-1==Ee?0<I?(Ee=oe[0].g,Qe.push("ofs="+Ee)):Ee=0:Qe.push("ofs="+Ee);let hr=!0;for(let ms=0;ms<I;ms++){let On=oe[ms].g;const Bs=oe[ms].map;if(On-=Ee,0>On)Ee=Math.max(0,oe[ms].g-100),hr=!1;else try{gGe(Bs,Qe,"req"+On+"_")}catch{P&&P(Bs)}}if(hr){P=Qe.join("&");break e}}}return p=p.i.splice(0,I),v.D=p,P}function ele(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;ft||Ii(),bt||(ft(),bt=!0),hn.add(v,p),p.v=0}}function jH(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=xw(m(p.Fa,p),rle(p,p.v)),p.v++,0))}function zH(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function tle(p){p.g=new nh(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var v=hu(p.qa);kr(v,"RID","rpc"),kr(v,"SID",p.K),kr(v,"AID",p.T),kr(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&kr(v,"TO",p.ja),kr(v,"TYPE","xmlhttp"),Vw(p,v),p.m&&p.o&&BH(v,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=iR(hu(v)),I.m=null,I.P=!0,xae(I,p)}function cR(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function nle(p,v){var I=null;if(p.g==v){cR(p),zH(p),p.g=null;var P=2}else{if(!LH(p.h,v))return;I=v.D,Nae(p.h,v),P=1}if(0!=p.G)if(v.o)if(1==P){I=v.m?v.m.length:0,v=Date.now()-v.F;var oe=p.B;oo(P=ZD(),new Cae(P,I)),lR(p)}else ele(p);else if(3==(oe=v.s)||0==oe&&0<v.X||!(1==P&&function bGe(p,v){return!(kae(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=v.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=xw(m(p.Ga,p,v),rle(p,p.B)),p.B++,0)))}(p,v)||2==P&&jH(p)))switch(I&&0<I.length&&(v=p.h,v.i=v.i.concat(I)),oe){case 1:Mp(p,5);break;case 4:Mp(p,10);break;case 3:Mp(p,6);break;default:Mp(p,2)}}function rle(p,v){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*v}function Mp(p,v){if(p.j.info("Error code "+v),2==v){var I=m(p.fb,p),P=p.Xa;const oe=!P;P=new Rp(P||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||nR(P,"https"),iR(P),oe?function fGe(p,v){const I=new Dw;if(a.Image){const P=new Image;P.onload=y(ih,I,"TestLoadImage: loaded",!0,v,P),P.onerror=y(ih,I,"TestLoadImage: error",!1,v,P),P.onabort=y(ih,I,"TestLoadImage: abort",!1,v,P),P.ontimeout=y(ih,I,"TestLoadImage: timeout",!1,v,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=p}else v(!1)}(P.toString(),I):function pGe(p,v){new Dw;const P=new AbortController,oe=setTimeout(()=>{P.abort(),ih(0,0,!1,v)},1e4);fetch(p,{signal:P.signal}).then(Ee=>{clearTimeout(oe),ih(0,0,!!Ee.ok,v)}).catch(()=>{clearTimeout(oe),ih(0,0,!1,v)})}(P.toString(),I)}else ao(2);p.G=0,p.l&&p.l.sa(v),ile(p),Xae(p)}function ile(p){if(p.G=0,p.ka=[],p.l){const v=Oae(p.h);(0!=v.length||0!=p.i.length)&&(M(p.ka,v),M(p.ka,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.ra()}}function sle(p,v,I){var P=I instanceof Rp?hu(I):new Rp(I);if(""!=P.g)v&&(P.g=v+"."+P.g),rR(P,P.s);else{var oe=a.location;P=oe.protocol,v=v?v+"."+oe.hostname:oe.hostname,oe=+oe.port;var Ee=new Rp(null);P&&nR(Ee,P),v&&(Ee.g=v),oe&&rR(Ee,oe),I&&(Ee.l=I),P=Ee}return v=p.ya,(I=p.D)&&v&&kr(P,I,v),kr(P,"VER",p.la),Vw(p,P),P}function ole(p,v,I){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(v=new ui(p.Ca&&!p.pa?new Nw({eb:I}):p.pa)).Ha(p.J),v}function ale(){}function uR(){}function la(p,v){Vs.call(this),this.g=new Yae(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!V(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,null!==(p=this.h)&&v in p&&v in(p=this.h)&&delete p[v]),this.j=new uy(this)}function lle(p){RH.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const I in v){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,v=null!==v&&p in v?v[p]:void 0),this.data=v}else this.data=p}function cle(){MH.call(this),this.status=1}function uy(p){this.g=p}(n=ui.prototype).Ha=function(p){this.J=p},n.ea=function(p,v,I,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():PH.g(),this.v=function vae(p){return p.h||(p.h=p.i())}(this.o?this.o:PH),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(Ee){return void Wae(this,Ee)}if(p=I||"",I=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var oe in P)I.set(oe,P[oe]);else{if("function"!=typeof P.keys||"function"!=typeof P.get)throw Error("Unknown input type for opt_headers: "+String(P));for(const Ee of P.keys())I.set(Ee,P.get(Ee))}P=Array.from(I.keys()).find(Ee=>"content-type"==Ee.toLowerCase()),oe=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yGe,v,void 0))||P||oe||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Qe]of I)this.g.setRequestHeader(Ee,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kae(this),this.u=!0,this.g.send(p),this.u=!1}catch(Ee){Wae(this,Ee)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,oo(this,"complete"),oo(this,"abort"),oR(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oR(this,!0)),ui.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qae(this):this.bb())},n.bb=function(){qae(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<fu(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&0==v.indexOf(p)&&(v=v.substring(p.length)),Y5e(v)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Yae.prototype).la=8,n.G=1,n.connect=function(p,v,I,P){ao(0),this.W=p,this.H=v||{},I&&void 0!==P&&(this.H.OSID=I,this.H.OAID=P),this.F=this.X,this.I=sle(this,null,this.W),lR(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const oe=new nh(this,this.j,p);let Ee=this.o;if(this.S&&(Ee?(Ee=L(Ee),J(Ee,this.S)):Ee=this.S),null!==this.m||this.O||(oe.H=Ee,Ee=null),this.P)e:{for(var v=0,I=0;I<this.i.length;I++){var P=this.i[I];if(void 0===(P="__data__"in P.map&&"string"==typeof(P=P.map.__data__)?P.length:void 0))break;if(4096<(v+=P)){v=I;break e}if(4096===v||I===this.i.length-1){v=I+1;break e}}v=1e3}else v=1e3;v=Jae(this,oe,v),kr(I=hu(this.I),"RID",p),kr(I,"CVER",22),this.D&&kr(I,"X-HTTP-Session-Id",this.D),Vw(this,I),Ee&&(this.O?v="headers="+encodeURIComponent(String($ae(Ee)))+"&"+v:this.m&&BH(I,this.m,Ee)),VH(this.h,oe),this.Ua&&kr(I,"TYPE","init"),this.P?(kr(I,"$req",v),kr(I,"SID","null"),oe.T=!0,NH(oe,I,null)):NH(oe,I,v),this.G=2}}else 3==this.G&&(p?Zae(this,p):0==this.i.length||Pae(this.h)||Zae(this))},n.Fa=function(){if(this.u=null,tle(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=xw(m(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ao(10),aR(this),tle(this))},n.Za=function(){null!=this.C&&(this.C=null,aR(this),jH(this),ao(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),ao(2)):(this.j.info("Failed to ping google.com"),ao(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=ale.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},uR.prototype.g=function(p,v){return new la(p,v)},b(la,Vs),la.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},la.prototype.close=function(){UH(this.g)},la.prototype.o=function(p){var v=this.g;if("string"==typeof p){var I={};I.__data__=p,p=I}else this.u&&((I={}).__data__=xH(p),p=I);v.i.push(new rGe(v.Ya++,p)),3==v.G&&lR(v)},la.prototype.N=function(){this.g.l=null,delete this.j,UH(this.g),delete this.g,la.aa.N.call(this)},b(lle,RH),b(cle,MH),b(uy,ale),uy.prototype.ua=function(){oo(this.g,"a")},uy.prototype.ta=function(p){oo(this.g,new lle(p))},uy.prototype.sa=function(p){oo(this.g,new cle)},uy.prototype.ra=function(){oo(this.g,"b")},uR.prototype.createWebChannel=uR.prototype.g,la.prototype.send=la.prototype.o,la.prototype.open=la.prototype.m,la.prototype.close=la.prototype.close,sJ=Qc.createWebChannelTransport=function(){return new uR},iJ=Qc.getStatEventTarget=function(){return ZD()},rJ=Qc.Event=xp,e2=Qc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},JD.NO_ERROR=0,JD.TIMEOUT=8,JD.HTTP_ERROR=6,GS=Qc.ErrorCode=JD,Tae.COMPLETE="complete",nJ=Qc.EventType=Tae,bae.EventType=Aw,Aw.OPEN="a",Aw.CLOSE="b",Aw.ERROR="c",Aw.MESSAGE="d",Vs.prototype.listen=Vs.prototype.K,XE=Qc.WebChannel=bae,Qc.FetchXmlHttpFactory=Nw,ui.prototype.listenOnce=ui.prototype.L,ui.prototype.getLastError=ui.prototype.Ka,ui.prototype.getLastErrorCode=ui.prototype.Ba,ui.prototype.getStatus=ui.prototype.Z,ui.prototype.getResponseJson=ui.prototype.Oa,ui.prototype.getResponseText=ui.prototype.oa,ui.prototype.send=ui.prototype.ea,ui.prototype.setWithCredentials=ui.prototype.Ha,tJ=Qc.XhrIo=ui}).apply(typeof WS<"u"?WS:typeof self<"u"?self:typeof window<"u"?window:{});const oJ="@firebase/firestore";class es{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let c_="10.14.0";const Id=new Ao.Vy("@firebase/firestore");function u_(){return Id.logLevel}function Oe(n,...e){if(Id.logLevel<=Ao.$b.DEBUG){const t=e.map(t2);Id.debug(`Firestore (${c_}): ${n}`,...t)}}function bi(n,...e){if(Id.logLevel<=Ao.$b.ERROR){const t=e.map(t2);Id.error(`Firestore (${c_}): ${n}`,...t)}}function Jo(n,...e){if(Id.logLevel<=Ao.$b.WARN){const t=e.map(t2);Id.warn(`Firestore (${c_}): ${n}`,...t)}}function t2(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${c_}) INTERNAL ASSERTION FAILED: `+n;throw bi(e),new Error(e)}function lt(n,e){n||st()}function Ge(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends N.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class aJ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h1e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(es.UNAUTHENTICATED))}shutdown(){}}class f1e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class p1e{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;lt(void 0===this.o);let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ts,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,O.A)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ts)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt("string"==typeof r.accessToken),new aJ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(null===e||"string"==typeof e),new es(e)}}class m1e{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=es.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class g1e{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new m1e(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _1e{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){lt(void 0===this.o);const r=s=>{null!=s.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt("string"==typeof t.token),this.R=t.token,new lJ(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function y1e(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class cJ{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=y1e(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function d_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function uJ(n){return n+"\0"}class Vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vr.fromMillis(Date.now())}static fromDate(e){return Vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Vr(0,0))}static max(){return new ht(new Vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ZE{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ZE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ZE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends ZE{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const v1e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends ZE{construct(e,t,r){return new xr(e,t,r)}static isValidIdentifier(e){return v1e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Pe(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Pe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Pe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Pe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(t)}static emptyPath(){return new xr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(mn.fromString(e))}static fromName(e){return new Ye(mn.fromString(e).popFirst(5))}static empty(){return new Ye(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new mn(e.slice()))}}class h_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function n2(n){return n.fields.find(e=>2===e.kind)}function Hf(n){return n.fields.filter(e=>2!==e.kind)}h_.UNKNOWN_ID=-1;class $f{constructor(e,t){this.fieldPath=e,this.kind=t}}class f_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new f_(0,ea.min())}}function dJ(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(1e9===r?new Vr(t+1,0):new Vr(t,r));return new ea(i,Ye.empty(),e)}function hJ(n){return new ea(n.readTime,n.key,-1)}class ea{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ea(ht.min(),Ye.empty(),-1)}static max(){return new ea(ht.max(),Ye.empty(),-1)}}function r2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const fJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wd(n){return s2.apply(this,arguments)}function s2(){return(s2=(0,O.A)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==fJ)throw n;Oe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new le((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class qS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ts,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new JE(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=o2(r.target.error);this.V.reject(new JE(e,i))}}static open(e,t,r,i){try{return new qS(t,e.transaction(i,r))}catch(s){throw new JE(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new w1e(t)}}class ql{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ql.S((0,N.ZQ)())&&bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Wf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,N.zW)())return!1;if(ql.v())return!0;const e=(0,N.ZQ)(),t=ql.S(e),r=0<t&&t<10,i=mJ(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,O.A)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new JE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Pe(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Pe(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new JE(e,a))},s.onupgradeneeded=o=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,O.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=qS.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),le.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(Oe("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function mJ(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class I1e{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Wf(this.B.delete())}}class JE extends Pe{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cd(n){return"IndexedDbTransactionError"===n.name}class w1e{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wf(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Wf(this.store.add(e))}get(e){return Wf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Wf(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Wf(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new le((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=s=>{const o=o2(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new I1e(a),c=t(a.primaryKey,a.value,l);if(c instanceof le){const u=c.catch(h=>(l.done(),le.reject(h)));r.push(u)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wf(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=o2(r.target.error);t(i)}})}let gJ=!1;function o2(n){const e=ql.S((0,N.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gJ||(gJ=!0,setTimeout(()=>{throw r},0)),r}}return n}class C1e{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Oe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,O.A)(function*(){t.task=null;try{Oe("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Cd(r)?Oe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield wd(r)}yield t.X(6e4)}))}}class T1e{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,O.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return le.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Oe("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Oe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=hJ(s);r2(o,r)>0&&(r=o)}),new ea(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ta=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function eI(n){return null==n}function tI(n){return 0===n&&1/n==-1/0}function _J(n){return"number"==typeof n&&Number.isInteger(n)&&!tI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ks(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yJ(e)),e=A1e(n.get(t),e);return yJ(e)}function A1e(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function yJ(n){return n+"\x01\x01"}function Kl(n){const e=n.length;if(lt(e>=2),2===e)return lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&st(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:st()}s=o+2}return new mn(r)}const vJ=["userId","batchId"];function KS(n,e){return[n,ks(e)]}function bJ(n,e,t){return[n,ks(e),t]}const S1e={},x1e=["prefixPath","collectionGroup","readTime","documentId"],D1e=["prefixPath","collectionGroup","documentId"],R1e=["collectionGroup","readTime","prefixPath","documentId"],M1e=["canonicalId","targetId"],P1e=["targetId","path"],k1e=["path","targetId"],N1e=["collectionId","parent"],O1e=["indexId","uid"],F1e=["uid","sequenceNumber"],L1e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],V1e=["indexId","uid","orderedDocumentKey"],B1e=["userId","collectionPath","documentId"],U1e=["userId","collectionPath","largestBatchId"],j1e=["userId","collectionGroup","largestBatchId"],EJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],z1e=[...EJ,"documentOverlays"],IJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wJ=IJ,a2=[...wJ,"indexConfiguration","indexState","indexEntries"],H1e=a2,$1e=[...a2,"globals"];class l2 extends pJ{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function zi(n,e){const t=Ge(n);return ql.F(t._e,e)}function CJ(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Td(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AJ(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vr{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new QS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new QS(this.root,e,this.comparator,!1)}getReverseIterator(){return new QS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new QS(this.root,e,this.comparator,!0)}}class QS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ds.RED,this.left=i??ds.EMPTY,this.right=s??ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ds(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ds.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ds(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rr{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SJ(this.data.getIterator())}getIteratorFrom(e){return new SJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rr(this.comparator);return t.data=e,t}}class SJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function p_(n){return n.hasNext()?n.getNext():void 0}class Do{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new Do([])}unionWith(e){let t=new rr(xr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Do(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return d_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xJ("Invalid base64 string: "+s):s}}(e);return new ai(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ai(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const G1e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yc(n){if(lt(!!n),"string"==typeof n){let e=0;const t=G1e.exec(n);if(lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Br(n.seconds),nanos:Br(n.nanos)}}function Br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xc(n){return"string"==typeof n?ai.fromBase64String(n):ai.fromUint8Array(n)}function YS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XS(n){const e=n.mapValue.fields.__previous_value__;return YS(e)?XS(e):e}function nI(n){const e=Yc(n.mapValue.fields.__local_write_time__.timestampValue);return new Vr(e.seconds,e.nanos)}class q1e{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ad{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ad("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ad&&e.projectId===this.projectId&&e.database===this.database}}const Sd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ZS={nullValue:"NULL_VALUE"};function xd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YS(n)?4:kJ(n)?9007199254740991:tx(n)?10:11:st()}function Ql(n,e){if(n===e)return!0;const t=xd(n);if(t!==xd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nI(n).isEqual(nI(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yc(i.timestampValue),a=Yc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Xc(n.bytesValue).isEqual(Xc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Br(i.geoPointValue.latitude)===Br(s.geoPointValue.latitude)&&Br(i.geoPointValue.longitude)===Br(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Br(i.integerValue)===Br(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Br(i.doubleValue),a=Br(s.doubleValue);return o===a?tI(o)===tI(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return d_(n.arrayValue.values||[],e.arrayValue.values||[],Ql);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(CJ(o)!==CJ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Ql(o[l],a[l])))return!1;return!0}(n,e);default:return st()}var s}function rI(n,e){return void 0!==(n.values||[]).find(t=>Ql(t,e))}function Dd(n,e){if(n===e)return 0;const t=xd(n),r=xd(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Br(s.integerValue||s.doubleValue),l=Br(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return DJ(n.timestampValue,e.timestampValue);case 4:return DJ(nI(n),nI(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Xc(s),l=Xc(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Nt(a[c],l[c]);if(0!==u)return u}return Nt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Nt(Br(s.latitude),Br(o.latitude));return 0!==a?a:Nt(Br(s.longitude),Br(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RJ(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const y=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(l=(o.fields||{}).value)||void 0===l?void 0:l.arrayValue,T=Nt((null===(c=y?.values)||void 0===c?void 0:c.length)||0,(null===(u=b?.values)||void 0===u?void 0:u.length)||0);return 0!==T?T:RJ(y,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Sd.mapValue&&o===Sd.mapValue)return 0;if(s===Sd.mapValue)return 1;if(o===Sd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const m=Nt(l[h],u[h]);if(0!==m)return m;const y=Dd(a[l[h]],c[u[h]]);if(0!==y)return y}return Nt(l.length,u.length)}(n.mapValue,e.mapValue);default:throw st()}}function DJ(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Yc(n),r=Yc(e),i=Nt(t.seconds,r.seconds);return 0!==i?i:Nt(t.nanos,r.nanos)}function RJ(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Dd(t[i],r[i]);if(s)return s}return Nt(t.length,r.length)}function m_(n){return c2(n)}function c2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xc(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=c2(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${c2(t.fields[o])}`;return i+"}"}(n.mapValue):st()}function Gf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function u2(n){return!!n&&"integerValue"in n}function iI(n){return!!n&&"arrayValue"in n}function MJ(n){return!!n&&"nullValue"in n}function PJ(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ex(n){return!!n&&"mapValue"in n}function tx(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Td(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kJ(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const NJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function K1e(n){return"nullValue"in n?ZS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Gf(Ad.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?tx(n)?NJ:{mapValue:{}}:st()}function Q1e(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Gf(Ad.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?NJ:"mapValue"in n?tx(n)?{mapValue:{}}:Sd:st()}function OJ(n,e){const t=Dd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function FJ(n,e){const t=Dd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ex(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sI(t)}setAll(e){let t=xr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=sI(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());ex(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ql(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ex(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Td(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new hs(sI(this.value))}}function LJ(n){const e=[];return Td(n.fields,(t,r)=>{const i=new xr([t]);if(ex(r)){const s=LJ(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Do(e)}class Dr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dr(e,0,ht.min(),ht.min(),ht.min(),hs.empty(),0)}static newFoundDocument(e,t,r,i){return new Dr(e,1,t,ht.min(),r,i,0)}static newNoDocument(e,t){return new Dr(e,2,t,ht.min(),ht.min(),hs.empty(),0)}static newUnknownDocument(e,t){return new Dr(e,3,t,ht.min(),ht.min(),hs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rd{constructor(e,t){this.position=e,this.inclusive=t}}function VJ(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Ye.comparator(Ye.fromName(o.referenceValue),t.key):Dd(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function BJ(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ql(n.position[t],e.position[t]))return!1;return!0}class oI{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y1e(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class UJ{}class gn extends UJ{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new X1e(e,t,r):"array-contains"===t?new eOe(e,r):"in"===t?new GJ(e,r):"not-in"===t?new tOe(e,r):"array-contains-any"===t?new nOe(e,r):new gn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Z1e(e,r):new J1e(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dd(t,this.value)):null!==t&&xd(this.value)===xd(t)&&this.matchesComparison(Dd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends UJ{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Yn(e,t)}matches(e){return g_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function g_(n){return"and"===n.op}function d2(n){return"or"===n.op}function h2(n){return jJ(n)&&g_(n)}function jJ(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function f2(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+m_(n.value);if(h2(n))return n.filters.map(e=>f2(e)).join(",");{const e=n.filters.map(t=>f2(t)).join(",");return`${n.op}(${e})`}}function zJ(n,e){return n instanceof gn?(r=n,(i=e)instanceof gn&&r.op===i.op&&r.field.isEqual(i.field)&&Ql(r.value,i.value)):n instanceof Yn?function(r,i){return i instanceof Yn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&zJ(o,i.filters[a]),!0)}(n,e):void st();var r,i}function HJ(n,e){const t=n.filters.concat(e);return Yn.create(t,n.op)}function $J(n){return n instanceof gn?`${(t=n).field.canonicalString()} ${t.op} ${m_(t.value)}`:n instanceof Yn?function(t){return t.op.toString()+" {"+t.getFilters().map($J).join(" ,")+"}"}(n):"Filter";var t}class X1e extends gn{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class Z1e extends gn{constructor(e,t){super(e,"in",t),this.keys=WJ(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class J1e extends gn{constructor(e,t){super(e,"not-in",t),this.keys=WJ(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function WJ(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class eOe extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return iI(t)&&rI(t.arrayValue,this.value)}}class GJ extends gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rI(this.value.arrayValue,t)}}class tOe extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(rI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rI(this.value.arrayValue,t)}}class nOe extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!iI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rI(this.value.arrayValue,r))}}class rOe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function p2(n,e=null,t=[],r=[],i=null,s=null,o=null){return new rOe(n,e,t,r,i,s,o)}function qf(n){const e=Ge(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>f2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),eI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>m_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>m_(r)).join(",")),e.ue=t}return e.ue}function aI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y1e(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zJ(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BJ(n.startAt,e.startAt)&&BJ(n.endAt,e.endAt)}function nx(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rx(n,e){return n.filters.filter(t=>t instanceof gn&&t.field.isEqual(e))}function qJ(n,e,t){let r=ZS,i=!0;for(const s of rx(n,e)){let o=ZS,a=!0;switch(s.op){case"<":case"<=":o=K1e(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ZS}OJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];OJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function KJ(n,e,t){let r=Sd,i=!0;for(const s of rx(n,e)){let o=Sd,a=!0;switch(s.op){case">=":case">":o=Q1e(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Sd}FJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];FJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Zc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function QJ(n,e,t,r,i,s,o,a){return new Zc(n,e,t,r,i,s,o,a)}function __(n){return new Zc(n)}function YJ(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function m2(n){return null!==n.collectionGroup}function y_(n){const e=Ge(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rr(xr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new oI(s,r))}),t.has(xr.keyField().canonicalString())||e.ce.push(new oI(xr.keyField(),r))}return e.ce}function Ns(n){const e=Ge(n);return e.le||(e.le=function ZJ(n,e){if("F"===n.limitType)return p2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new oI(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Rd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rd(n.startAt.position,n.startAt.inclusive):null;return p2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,y_(n))),e.le}function g2(n,e){const t=n.filters.concat([e]);return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ix(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lI(n,e){return aI(Ns(n),Ns(e))&&n.limitType===e.limitType}function JJ(n){return`${qf(Ns(n))}|lt:${n.limitType}`}function v_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$J(i)).join(", ")}]`),eI(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>m_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>m_(i)).join(",")),`Target(${r})`}(Ns(n))}; limitType=${n.limitType})`}function cI(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of y_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=VJ(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,y_(r),i)||r.endAt&&!function(o,a,l){const c=VJ(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,y_(r),i)));var r,i}function eee(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tee(n){return(e,t)=>{let r=!1;for(const i of y_(n)){const s=iOe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function iOe(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Dd(l,c):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class Jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Td(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return AJ(this.inner)}size(){return this.innerSize}}const sOe=new vr(Ye.comparator);function Ro(){return sOe}const nee=new vr(Ye.comparator);function uI(...n){let e=nee;for(const t of n)e=e.insert(t.key,t);return e}function ree(n){let e=nee;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yl(){return dI()}function iee(){return dI()}function dI(){return new Jc(n=>n.toString(),(n,e)=>n.isEqual(e))}const oOe=new vr(Ye.comparator),aOe=new rr(Ye.comparator);function Qt(...n){let e=aOe;for(const t of n)e=e.add(t);return e}const lOe=new rr(Nt);function _2(){return lOe}function y2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tI(e)?"-0":e}}function see(n){return{integerValue:""+n}}function oee(n,e){return _J(e)?see(e):y2(n,e)}class sx{constructor(){this._=void 0}}function cOe(n,e,t){return n instanceof b_?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&YS(s)&&(s=XS(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Kf?lee(n,e):n instanceof Qf?cee(n,e):function(i,s){const o=aee(i,s),a=uee(o)+uee(i.Pe);return u2(o)&&u2(i.Pe)?see(a):y2(i.serializer,a)}(n,e)}function uOe(n,e,t){return n instanceof Kf?lee(n,e):n instanceof Qf?cee(n,e):t}function aee(n,e){return n instanceof E_?u2(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class b_ extends sx{}class Kf extends sx{constructor(e){super(),this.elements=e}}function lee(n,e){const t=dee(e);for(const r of n.elements)t.some(i=>Ql(i,r))||t.push(r);return{arrayValue:{values:t}}}class Qf extends sx{constructor(e){super(),this.elements=e}}function cee(n,e){let t=dee(e);for(const r of n.elements)t=t.filter(i=>!Ql(i,r));return{arrayValue:{values:t}}}class E_ extends sx{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function uee(n){return Br(n.integerValue||n.doubleValue)}function dee(n){return iI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hI{constructor(e,t){this.field=e,this.transform=t}}class hOe{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ox(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ax{}function hee(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new w_(n.key,Ur.none()):new I_(n.key,n.data,Ur.none());{const t=n.data,r=hs.empty();let i=new rr(xr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new eu(n.key,r,new Do(i.toArray()),Ur.none())}}function fOe(n,e,t){n instanceof I_?function(i,s,o){const a=i.value.clone(),l=mee(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof eu?function(i,s,o){if(!ox(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=mee(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(pee(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fI(n,e,t,r){return n instanceof I_?function(s,o,a,l){if(!ox(s.precondition,o))return a;const c=s.value.clone(),u=gee(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof eu?function(s,o,a,l){if(!ox(s.precondition,o))return a;const c=gee(s.fieldTransforms,l,o),u=o.data;return u.setAll(pee(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):(a=t,ox(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function pOe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=aee(r.transform,i||null);null!=s&&(null===t&&(t=hs.empty()),t.set(r.field,s))}return t||null}function fee(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&d_(r,i,(s,o)=>function dOe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Kf&&i instanceof Kf||r instanceof Qf&&i instanceof Qf?d_(r.elements,i.elements,Ql):r instanceof E_&&i instanceof E_?Ql(r.Pe,i.Pe):r instanceof b_&&i instanceof b_);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class I_ extends ax{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eu extends ax{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pee(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mee(n,e,t){const r=new Map;lt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uOe(o,a,t[i]))}return r}function gee(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,cOe(s,o,e))}return r}class w_ extends ax{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v2 extends ax{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class b2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fOe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=iee();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=hee(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&d_(this.mutations,e.mutations,(t,r)=>fee(t,r))&&d_(this.baseMutations,e.baseMutations,(t,r)=>fee(t,r))}}class E2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){lt(e.mutations.length===r.length);let i=function(){return oOe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new E2(e,t,r,i)}}class I2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mOe{constructor(e,t){this.count=e,this.unchangedNames=t}}var Di,Cn;function yee(n){switch(n){default:return st();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function vee(n){if(void 0===n)return bi("GRPC error has no .code"),ve.UNKNOWN;switch(n){case Di.OK:return ve.OK;case Di.CANCELLED:return ve.CANCELLED;case Di.UNKNOWN:return ve.UNKNOWN;case Di.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Di.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Di.INTERNAL:return ve.INTERNAL;case Di.UNAVAILABLE:return ve.UNAVAILABLE;case Di.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Di.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Di.NOT_FOUND:return ve.NOT_FOUND;case Di.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Di.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Di.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Di.ABORTED:return ve.ABORTED;case Di.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Di.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Di.DATA_LOSS:return ve.DATA_LOSS;default:return st()}}(Cn=Di||(Di={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";function bee(){return new TextEncoder}const gOe=new zf([4294967295,4294967295],0);function Eee(n){const e=bee().encode(n),t=new eJ;return t.update(e),new Uint8Array(t.digest())}function Iee(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zf([t,r],0),new zf([i,s],0)]}class w2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pI(`Invalid padding: ${t}`);if(r<0)throw new pI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new pI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new pI(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=zf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(zf.fromNumber(r)));return 1===i.compare(gOe)&&(i=new zf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Eee(e),[r,i]=Iee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new w2(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=Eee(e),[r,i]=Iee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class pI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mI{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,gI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new mI(ht.min(),i,new vr(Nt),Ro(),Qt())}}class gI{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gI(r,t,Qt(),Qt(),Qt())}}class cx{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class wee{constructor(e,t){this.targetId=e,this.me=t}}class Cee{constructor(e,t,r=ai.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Tee{constructor(){this.fe=0,this.ge=See(),this.pe=ai.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qt(),t=Qt(),r=Qt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new gI(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=See()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _Oe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ro(),this.qe=Aee(),this.Qe=new vr(Nt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(nx(s))if(0===r){const o=new Ye(s.path);this.Ue(t,o,Dr.newNoDocument(o,ht.min()))}else lt(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Xc(r).toUint8Array()}catch(l){if(l instanceof xJ)return Jo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new w2(o,i,s)}catch(l){return Jo(l instanceof pI?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&nx(a.target)){const l=new Ye(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,Dr.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Qt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new mI(e,t,this.Qe,this.ke,r);return this.ke=Ro(),this.qe=Aee(),this.Qe=new vr(Nt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Tee,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new rr(Nt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tee),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Aee(){return new vr(Ye.comparator)}function See(){return new vr(Ye.comparator)}const yOe={asc:"ASCENDING",desc:"DESCENDING"},vOe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bOe={and:"AND",or:"OR"};class EOe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function C2(n,e){return n.useProto3Json||eI(e)?e:{value:e}}function C_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xee(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IOe(n,e){return C_(n,e.toTimestamp())}function Ei(n){return lt(!!n),ht.fromTimestamp(function(t){const r=Yc(t);return new Vr(r.seconds,r.nanos)}(n))}function T2(n,e){return A2(n,e).canonicalString()}function A2(n,e){const t=(i=n,new mn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function Dee(n){const e=mn.fromString(n);return lt(Uee(e)),e}function _I(n,e){return T2(n.databaseId,e.path)}function Xl(n,e){const t=Dee(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(Pee(t))}function Ree(n,e){return T2(n.databaseId,e)}function Mee(n){const e=Dee(n);return 4===e.length?mn.emptyPath():Pee(e)}function S2(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Pee(n){return lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kee(n,e,t){return{name:_I(n,e),fields:t.value.mapValue.fields}}function Nee(n,e,t){const r=Xl(n,e.name),i=Ei(e.updateTime),s=e.createTime?Ei(e.createTime):ht.min(),o=new hs({mapValue:{fields:e.fields}}),a=Dr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function yI(n,e){let t;if(e instanceof I_)t={update:kee(n,e.key,e.value)};else if(e instanceof w_)t={delete:_I(n,e.key)};else if(e instanceof eu)t={update:kee(n,e.key,e.data),updateMask:ROe(e.fieldMask)};else{if(!(e instanceof v2))return st();t={verify:_I(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof b_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Kf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof E_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:IOe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:st()),t;var s}function x2(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Ur.updateTime(Ei(s.updateTime)):void 0!==s.exists?Ur.exists(s.exists):Ur.none():Ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(lt("REQUEST_TIME"===a.setToServerValue),l=new b_):"appendMissingElements"in a?l=new Kf(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Qf(a.removeAllFromArray.values||[]):"increment"in a?l=new E_(o,a.increment):st();const c=xr.fromServerFormat(a.fieldPath);return new hI(c,l)}(n,i)):[];var s;if(e.update){const i=Xl(n,e.update.name),s=new hs({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Do((e.updateMask.fieldPaths||[]).map(u=>xr.fromServerFormat(u)));return new eu(i,s,o,t,r)}return new I_(i,s,t,r)}if(e.delete){const i=Xl(n,e.delete);return new w_(i,t)}if(e.verify){const i=Xl(n,e.verify);return new v2(i,t)}return st()}function Oee(n,e){return{documents:[Ree(n,e.path)]}}function ux(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ree(n,i);const s=function(c){if(0!==c.length)return Bee(Yn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:Md((m=u).field),direction:SOe(m.dir)};var m})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=C2(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function Lee(n){let e=Mee(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){lt(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const m=Vee(h);return m instanceof Yn&&h2(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new oI(T_((b=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(h){let m;return m="object"==typeof h?h.value:h,eI(m)?null:m}(t.limit));let l=null;var h;t.startAt&&(l=new Rd((h=t.startAt).values||[],!!h.before));let c=null;return t.endAt&&(c=function(h){return new Rd(h.values||[],!h.before)}(t.endAt)),QJ(e,i,o,s,a,"F",l,c)}function Vee(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=T_(t.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=T_(t.unaryFilter.field);return gn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=T_(t.unaryFilter.field);return gn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=T_(t.unaryFilter.field);return gn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?gn.create(T_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Yn.create(t.compositeFilter.filters.map(r=>Vee(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return st()}}(t.compositeFilter.op))}(n):st();var t}function SOe(n){return yOe[n]}function xOe(n){return vOe[n]}function DOe(n){return bOe[n]}function Md(n){return{fieldPath:n.canonicalString()}}function T_(n){return xr.fromServerFormat(n.fieldPath)}function Bee(n){return n instanceof gn?function(t){if("=="===t.op){if(PJ(t.value))return{unaryFilter:{field:Md(t.field),op:"IS_NAN"}};if(MJ(t.value))return{unaryFilter:{field:Md(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(PJ(t.value))return{unaryFilter:{field:Md(t.field),op:"IS_NOT_NAN"}};if(MJ(t.value))return{unaryFilter:{field:Md(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Md(t.field),op:xOe(t.op),value:t.value}}}(n):n instanceof Yn?function(t){const r=t.getFilters().map(i=>Bee(i));return 1===r.length?r[0]:{compositeFilter:{op:DOe(t.op),filters:r}}}(n):st()}function ROe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Uee(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class tu{constructor(e,t,r,i,s=ht.min(),o=ht.min(),a=ai.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jee{constructor(e){this.ct=e}}function zee(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:_I(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:C_(s,o.version.toTimestamp()),createTime:C_(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yf(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Yf(e.version)}}var s,o;return r}function dx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xf(n){const e=new Vr(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function Zf(n,e){const t=(e.baseMutations||[]).map(s=>x2(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>x2(n.ct,s)),i=Vr.fromMillis(e.localWriteTimeMs);return new b2(e.batchId,i,t,r)}function vI(n){const e=Xf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xf(n.lastLimboFreeSnapshotVersion):ht.min();let r;return r=void 0!==n.query.documents?(lt(1===(s=n.query).documents.length),Ns(__(Mee(s.documents[0])))):function(s){return Ns(Lee(s))}(n.query),new tu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ai.fromBase64String(n.resumeToken));var s}function Hee(n,e){const t=Yf(e.snapshotVersion),r=Yf(e.lastLimboFreeSnapshotVersion);let i;i=nx(e.target)?Oee(n.ct,e.target):ux(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function D2(n){const e=Lee({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ix(e,e.limit,"L"):e}function R2(n,e){return new I2(e.largestBatchId,x2(n.ct,e.overlayMutation))}function $ee(n,e){const t=e.path.lastSegment();return[n,ks(e.path.popLast()),t]}function Wee(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Yf(r.readTime),documentKey:ks(r.documentKey.path),largestBatchId:r.largestBatchId}}class POe{getBundleMetadata(e,t){return Gee(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Xf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Gee(e).put({bundleId:(i=t).id,createTime:Yf(Ei(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return qee(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:D2(s.bundledQuery),readTime:Xf(s.readTime)};var s})}saveNamedQuery(e,t){return qee(e).put({name:(i=t).name,readTime:Yf(Ei(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Gee(n){return zi(n,"bundles")}function qee(n){return zi(n,"namedQueries")}class hx{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new hx(e,t.uid||"")}getOverlay(e,t){return bI(e).get($ee(this.userId,t)).next(r=>r?R2(this.serializer,r):null)}getOverlays(e,t){const r=Yl();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new I2(t,o);i.push(this.ht(e,a))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ks(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(bI(e).j("collectionPathOverlayIndex",a))}),le.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Yl(),s=ks(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return bI(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=R2(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Yl();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bI(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=R2(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}ht(e,t){return bI(e).put(function(i,s,o){const[a,l,c]=$ee(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:yI(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function bI(n){return zi(n,"documentOverlays")}class kOe{Pt(e){return zi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?ai.fromUint8Array(r):ai.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Jf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Br(e.integerValue));else if("doubleValue"in e){const r=Br(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),tI(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Yc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?kJ(e)?this.dt(t,Number.MAX_SAFE_INTEGER):tx(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):st()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Br(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Ye.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function NOe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Kee(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=NOe(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Jf.vt=new Jf;class OOe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=Kee(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=Kee(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class FOe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class LOe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class EI{constructor(){this.jt=new OOe,this.Ht=new FOe(this.jt),this.Jt=new LOe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class ep{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ep(this.indexId,this.documentKey,this.arrayValue,r)}}function Pd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Qee(n.arrayValue,e.arrayValue),0!==t?t:(t=Qee(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function Qee(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Yee{constructor(e){this.Xt=new rr((t,r)=>xr.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(lt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=n2(e);if(void 0!==t&&!this.sn(t))return!1;const r=Hf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new rr(xr.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new $f(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new $f(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new $f(r.field,"asc"===r.dir?0:1)));return new h_(h_.UNKNOWN_ID,this.collectionId,t,f_.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Xee(n){var e,t;if(lt(n instanceof gn||n instanceof Yn),n instanceof gn){if(n instanceof GJ){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>gn.create(n.field,"==",s)))||[];return Yn.create(i,"or")}return n}const r=n.filters.map(i=>Xee(i));return Yn.create(r,n.op)}function VOe(n){if(0===n.getFilters().length)return[];const e=k2(Xee(n));return lt(Zee(e)),M2(e)||P2(e)?[e]:e.getFilters()}function M2(n){return n instanceof gn}function P2(n){return n instanceof Yn&&h2(n)}function Zee(n){return M2(n)||P2(n)||function(t){if(t instanceof Yn&&d2(t)){for(const r of t.getFilters())if(!M2(r)&&!P2(r))return!1;return!0}return!1}(n)}function k2(n){if(lt(n instanceof gn||n instanceof Yn),n instanceof gn)return n;if(1===n.filters.length)return k2(n.filters[0]);const e=n.filters.map(r=>k2(r));let t=Yn.create(e,n.op);return t=fx(t),Zee(t)?t:(lt(t instanceof Yn),lt(g_(t)),lt(t.filters.length>1),t.filters.reduce((r,i)=>N2(r,i)))}function N2(n,e){let t;return lt(n instanceof gn||n instanceof Yn),lt(e instanceof gn||e instanceof Yn),t=n instanceof gn?e instanceof gn?Yn.create([n,e],"and"):Jee(n,e):e instanceof gn?Jee(e,n):function(i,s){if(lt(i.filters.length>0&&s.filters.length>0),g_(i)&&g_(s))return HJ(i,s.getFilters());const o=d2(i)?i:s,a=d2(i)?s:i,l=o.filters.map(c=>N2(c,a));return Yn.create(l,"or")}(n,e),fx(t)}function Jee(n,e){if(g_(e))return HJ(e,n.getFilters());{const t=e.filters.map(r=>N2(n,r));return Yn.create(t,"or")}}function fx(n){if(lt(n instanceof gn||n instanceof Yn),n instanceof gn)return n;const e=n.getFilters();if(1===e.length)return fx(e[0]);if(jJ(n))return n;const t=e.map(i=>fx(i)),r=[];return t.forEach(i=>{i instanceof gn?r.push(i):i instanceof Yn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Yn.create(r,n.op)}class BOe{constructor(){this.un=new O2}addToCollectionParentIndex(e,t){return this.un.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(ea.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(ea.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class O2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rr(mn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rr(mn.comparator)).toArray()}}const px=new Uint8Array(0);class UOe{constructor(e,t){this.databaseId=t,this.cn=new O2,this.ln=new Jc(r=>qf(r),(r,i)=>aI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:ks(i)};return ete(e).put(s)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[uJ(t),""],!1,!0);return ete(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Kl(o.parent))}return r})}addFieldIndex(e,t){const r=II(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=S_(e);return s.next(a=>{o.put(Wee(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=II(e),i=S_(e),s=A_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=II(e),r=A_(e),i=S_(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return le.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Yee(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=A_(e);let i=!0;const s=new Map;return le.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Qt();const a=[];return le.forEach(s,(l,c)=>{var Q;Oe("IndexedDbIndexManager",`Using index ${Q=l,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(be=>`${be.fieldPath}:${be.kind}`).join(",")}`} to execute ${qf(t)}`);const u=function(Q,be){const Be=n2(be);if(void 0===Be)return null;for(const je of rx(Q,Be.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(c,l),h=function(Q,be){const Be=new Map;for(const je of Hf(be))for(const H of rx(Q,je.fieldPath))switch(H.op){case"==":case"in":Be.set(je.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return Be.set(je.fieldPath.canonicalString(),H.value),Array.from(Be.values())}return null}(c,l),m=function(Q,be){const Be=[];let je=!0;for(const H of Hf(be)){const L=0===H.kind?qJ(Q,H.fieldPath,Q.startAt):KJ(Q,H.fieldPath,Q.startAt);Be.push(L.value),je&&(je=L.inclusive)}return new Rd(Be,je)}(c,l),y=function(Q,be){const Be=[];let je=!0;for(const H of Hf(be)){const L=0===H.kind?KJ(Q,H.fieldPath,Q.endAt):qJ(Q,H.fieldPath,Q.endAt);Be.push(L.value),je&&(je=L.inclusive)}return new Rd(Be,je)}(c,l),b=this.In(l,c,m),T=this.In(l,c,y),M=this.Tn(l,c,h),B=this.En(l.indexId,u,b,m.inclusive,T,y.inclusive,M);return le.forEach(B,V=>r.G(V,t.limit).next(Q=>{Q.forEach(be=>{const Be=Ye.fromSegments(be.documentKey);o.has(Be)||(o=o.add(Be),a.push(Be))})}))}).next(()=>a)}return le.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:VOe(Yn.create(e.filters,"and")).map(r=>p2(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let h=0;h<l;++h){const m=t?this.dn(t[h/c]):px,y=this.An(e,m,r[h%c],i),b=this.Rn(e,m,s[h%c],o),T=a.map(M=>this.An(e,m,M,!0));u.push(...this.createRange(y,b,T))}return u}An(e,t,r,i){const s=new ep(e,Ye.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new ep(e,Ye.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new Yee(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return le.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new rr(xr.comparator),u=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?u=!0:c=c.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new EI;for(const i of Hf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);Jf.vt.It(s,o)}return r.zt()}dn(e){const t=new EI;return Jf.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new EI;return Jf.vt.It(Gf(this.databaseId,t),r.Yt(function(s){const o=Hf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new EI);let s=0;for(const o of Hf(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&iI(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);Jf.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new EI;l.seed(a.zt()),Jf.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof gn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=II(e),i=S_(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return le.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const m=h?new f_(h.sequenceNumber,new ea(Xf(h.readTime),new Ye(Kl(h.documentKey)),h.largestBatchId)):f_.empty(),y=u.fields.map(([b,T])=>new $f(xr.fromServerFormat(b),T));return new h_(u.indexId,u.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Nt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=II(e),s=S_(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>le.forEach(a,l=>s.put(Wee(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?le.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),le.forEach(a,l=>this.wn(e,i,l).next(c=>{const u=this.Sn(s,l);return c.isEqual(u)?le.resolve():this.bn(e,s,l,c,u)}))))})}Dn(e,t,r,i){return A_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return A_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=A_(e);let s=new rr(Pd);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new ep(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new rr(Pd);const i=this.Vn(t,e);if(null==i)return r;const s=n2(t);if(null!=s){const o=e.data.field(s.fieldPath);if(iI(o))for(const a of o.arrayValue.values||[])r=r.add(new ep(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ep(t.indexId,e.key,px,i));return r}bn(e,t,r,i,s){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,u,h,m){const y=l.getIterator(),b=c.getIterator();let T=p_(y),M=p_(b);for(;T||M;){let B=!1,V=!1;if(T&&M){const Q=u(T,M);Q<0?V=!0:Q>0&&(B=!0)}else null!=T?V=!0:B=!0;B?(h(M),M=p_(b)):V?(m(T),T=p_(y)):(T=p_(y),M=p_(b))}}(i,s,Pd,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),le.waitFor(o)}yn(e){let t=1;return S_(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Pd(o,a)).filter((o,a,l)=>!a||0!==Pd(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=Pd(o,e),l=Pd(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,px,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,px,[]]))}return s}Cn(e,t){return Pd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tte)}getMinOffset(e,t){return le.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||st())).next(tte)}}function ete(n){return zi(n,"collectionParents")}function A_(n){return zi(n,"indexEntries")}function II(n){return zi(n,"indexConfiguration")}function S_(n){return zi(n,"indexState")}function tte(n){lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;r2(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ea(e.readTime,e.documentKey,t)}const nte={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Os{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Os(e,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rte(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(u,h,m)=>(a++,m.delete()));s.push(l.next(()=>{lt(1===a)}));const c=[];for(const u of t.mutations){const h=bJ(e,u.key.path,t.batchId);s.push(i.delete(h)),c.push(u.key)}return le.waitFor(s).next(()=>c)}function mx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Os.DEFAULT_COLLECTION_PERCENTILE=10,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Os.DEFAULT=new Os(41943040,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Os.DISABLED=new Os(-1,0,0);class gx{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){lt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new gx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kd(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=x_(e),o=kd(e);return o.add({}).next(a=>{lt("number"==typeof a);const l=new b2(a,t,r,i),c=function(y,b,T){const M=T.baseMutations.map(V=>yI(y.ct,V)),B=T.mutations.map(V=>yI(y.ct,V));return{userId:b,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:M,mutations:B}}(this.serializer,this.userId,l),u=[];let h=new rr((m,y)=>Nt(m.canonicalString(),y.canonicalString()));for(const m of i){const y=bJ(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),u.push(o.put(c)),u.push(s.put(y,S1e))}return h.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),le.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return kd(e).get(t).next(r=>r?(lt(r.userId===this.userId),Zf(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?le.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return kd(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(lt(a.batchId>=r),s=Zf(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return kd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kd(e).U("userMutationsIndex",t).next(r=>r.map(i=>Zf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=KS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return x_(e).J({range:i},(o,a,l)=>{const[c,u,h]=o,m=Kl(u);if(c===this.userId&&t.path.isEqual(m))return kd(e).get(h).next(y=>{if(!y)throw st();lt(y.userId===this.userId),s.push(Zf(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Nt);const i=[];return t.forEach(s=>{const o=KS(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=x_(e).J({range:a},(c,u,h)=>{const[m,y,b]=c,T=Kl(y);m===this.userId&&s.path.isEqual(T)?r=r.add(b):h.done()});i.push(l)}),le.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=KS(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new rr(Nt);return x_(e).J({range:o},(l,c,u)=>{const[h,m,y]=l,b=Kl(m);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):u.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(kd(e).get(s).next(o=>{if(null===o)throw st();lt(o.userId===this.userId),r.push(Zf(this.serializer,o))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rte(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return x_(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Kl(s[1]);i.push(l)}else a.done()}).next(()=>{lt(0===i.length)})})}containsKey(e,t){return ite(e,this.userId,t)}Nn(e){return ste(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ite(n,e,t){const r=KS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return x_(n).J({range:s,H:!0},(a,l,c)=>{const[u,h,m]=a;u===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function kd(n){return zi(n,"mutations")}function x_(n){return zi(n,"documentMutations")}function ste(n){return zi(n,"mutationQueues")}class tp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new tp(0)}static kn(){return new tp(-1)}}class jOe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new tp(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ht.fromTimestamp(new Vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>D_(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(lt(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return D_(e).J((o,a)=>{const l=vI(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>le.waitFor(s)).next(()=>i)}forEachTarget(e,t){return D_(e).J((r,i)=>{const s=vI(i);t(s)})}qn(e){return ote(e).get("targetGlobalKey").next(t=>(lt(null!==t),t))}Qn(e,t){return ote(e).put("targetGlobalKey",t)}Kn(e,t){return D_(e).put(Hee(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return D_(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=vI(a);aI(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Nd(e);return t.forEach(o=>{const a=ks(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Nd(e);return le.forEach(t,s=>{const o=ks(s.path);return le.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Nd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nd(e);let s=Qt();return i.J({range:r,H:!0},(o,a,l)=>{const c=Kl(o[1]),u=new Ye(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const r=ks(t.path),i=IDBKeyRange.bound([r],[uJ(r)],!1,!0);let s=0;return Nd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return D_(e).get(t).next(r=>r?vI(r):null)}}function D_(n){return zi(n,"targets")}function ote(n){return zi(n,"targetGlobal")}function Nd(n){return zi(n,"targetDocuments")}function ate([n,e],[t,r]){const i=Nt(n,t);return 0===i?Nt(e,r):i}class zOe{constructor(e){this.Un=e,this.buffer=new rr(ate),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ate(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lte{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,O.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Cd(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wd(r)}yield t.Hn(3e5)}))}}class HOe{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(ta.oe);const r=new zOe(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(nte)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nte):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),u_()<=Ao.$b.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${h} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}class $Oe{constructor(e,t){this.db=e,this.garbageCollector=function cte(n,e){return new HOe(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return _x(e,r)}removeReference(e,t,r){return _x(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _x(e,t)}nr(e,t){return function(i,s){let o=!1;return ste(i).Y(a=>ite(i,a,s).next(l=>(l&&(o=!0),le.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ht.min()),Nd(e).delete([0,ks(o.path)])))});i.push(l)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _x(e,t)}tr(e,t){const r=Nd(e);let i,s=ta.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==ta.oe&&t(new Ye(Kl(i)),s),s=c,i=l):s=ta.oe}).next(()=>{s!==ta.oe&&t(new Ye(Kl(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _x(n,e){return Nd(n).put((i=n.currentSequenceNumber,{targetId:0,path:ks(e.path),sequenceNumber:i}));var i}class ute{constructor(){this.changes=new Jc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WOe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return np(e).put(r)}removeEntry(e,t,r){return np(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dx(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Dr.newInvalidDocument(t);return np(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wI(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Dr.newInvalidDocument(t)};return np(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wI(t))},(i,s)=>{r={document:this.ir(t,s),size:mx(s)}}).next(()=>r)}getEntries(e,t){let r=Ro();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Ro(),i=new vr(Ye.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,mx(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return le.resolve();let i=new rr(pte);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(wI(i.first()),wI(i.last())),o=i.getIterator();let a=o.getNext();return np(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=Ye.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&pte(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(wI(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),dx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return np(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=Ro();for(const h of c){const m=this.ir(Ye.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(cI(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let s=Ro();const o=fte(t,r),a=fte(t,ea.max());return np(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.ir(Ye.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new GOe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return hte(e).get("remoteDocumentGlobalKey").next(t=>(lt(!!t),t))}rr(e,t){return hte(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function MOe(n,e){let t;if(e.document)t=Nee(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=Xf(e.noDocument.readTime);t=Dr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ye.fromSegments(e.unknownDocument.path),i=Xf(e.unknownDocument.version);t=Dr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Vr(i[0],i[1]);return ht.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ht.min()))return r}return Dr.newInvalidDocument(e)}}function dte(n){return new WOe(n)}class GOe extends ute{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Jc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new rr((s,o)=>Nt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=zee(this.cr.serializer,o);i=i.add(s.path.popLast());const c=mx(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=zee(this.cr.serializer,o.convertToNoDocument(ht.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function hte(n){return zi(n,"remoteDocumentGlobal")}function np(n){return zi(n,"remoteDocumentsV14")}function wI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fte(n,e){const t=e.documentKey.path.toArray();return[n,dx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pte(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Nt(t[s],r[s]),i)return i;return i=Nt(t.length,r.length),i||(i=Nt(t[t.length-2],r[r.length-2]),i||Nt(t[t.length-1],r[r.length-1]))}class qOe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mte{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&fI(r.mutation,i,Do.empty(),Vr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qt()){const i=Yl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=uI();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Yl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ro();const o=dI(),a=dI();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof eu)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),fI(u.mutation,c,u.mutation.getFieldMask(),Vr.now())):o.set(c.key,Do.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var h;return a.set(c,new qOe(u,null!==(h=o.get(c))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=dI();let i=new vr((o,a)=>o-a),s=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||Do.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Qt()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=iee();u.forEach(m=>{if(!s.has(m)){const y=hee(t.get(m),r.get(m));null!==y&&h.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):m2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):le.resolve(Yl());let a=-1,l=s;return o.next(c=>le.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?le.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Qt())).next(u=>({batchId:a,changes:ree(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=uI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=uI();return this.indexManager.getCollectionParents(e,s).next(a=>le.forEach(a,l=>{const c=(h=t,m=l.child(s),new Zc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,m;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,Dr.newInvalidDocument(u)))});let a=uI();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&fI(u.mutation,c,Do.empty(),Vr.now()),cI(t,c)&&(a=a.insert(l,c))}),a})}}class KOe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return le.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Ei(i.createTime)}),le.resolve();var i}getNamedQuery(e,t){return le.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:D2(i.bundledQuery),readTime:Ei(i.readTime)}),le.resolve();var i}}class QOe{constructor(){this.overlays=new vr(Ye.comparator),this.Ir=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Yl();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Yl(),s=t.length+1,o=new Ye(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new vr((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=Yl(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Yl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return le.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new I2(t,r));let s=this.Ir.get(t);void 0===s&&(s=Qt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class YOe{constructor(){this.sessionToken=ai.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}class F2{constructor(){this.Tr=new rr(ns.Er),this.dr=new rr(ns.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new ns(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ns(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ye(new mn([])),r=new ns(t,e),i=new ns(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ye(new mn([])),r=new ns(t,e),i=new ns(t,e+1);let s=Qt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ns(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ns{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ye.comparator(e.key,t.key)||Nt(e.wr,t.wr)}static Ar(e,t){return Nt(e.wr,t.wr)||Ye.comparator(e.key,t.key)}}class XOe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new rr(ns.Er)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new b2(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ns(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,t){return le.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ns(t,0),i=new ns(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Nt);return t.forEach(i=>{const s=new ns(i,0),o=new ns(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),le.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ye.isDocumentKey(s)||(s=s.child(""));const o=new ns(new Ye(s),0);let a=new rr(Nt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),le.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){lt(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return le.forEach(t.mutations,i=>{const s=new ns(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new ns(t,0),i=this.br.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZOe{constructor(e){this.Mr=e,this.docs=new vr(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Dr.newInvalidDocument(t))}getEntries(e,t){let r=Ro();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ro();const o=t.path,a=new Ye(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||r2(hJ(u),r)<=0||(i.has(u.key)||cI(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,t,r,i){st()}Or(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JOe(this)}getSize(e){return le.resolve(this.size)}}class JOe extends ute{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class eFe{constructor(e){this.persistence=e,this.Nr=new Jc(t=>qf(t),aI),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Lr=0,this.Br=new F2,this.targetCount=0,this.kr=tp.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),le.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new tp(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Kn(t),le.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Br.containsKey(t))}}class L2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ta(0),this.Kr=!1,this.Kr=!0,this.$r=new YOe,this.referenceDelegate=e(this),this.Ur=new eFe(this),this.indexManager=new BOe,this.remoteDocumentCache=new ZOe(r=>this.referenceDelegate.Wr(r)),this.serializer=new jee(t),this.Gr=new KOe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QOe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new XOe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new tFe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return le.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class tFe extends pJ{constructor(e){super(),this.currentSequenceNumber=e}}class yx{constructor(e){this.persistence=e,this.Jr=new F2,this.Yr=null}static Zr(e){return new yx(e)}get Xr(){if(this.Yr)return this.Yr;throw st()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),le.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xr,r=>{const i=Ye.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ht.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return le.or([()=>le.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class nFe{constructor(e){this.serializer=e}O(e,t,r,i){const s=new qS("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vJ,{unique:!0}),l.createObjectStore("documentMutations"),gte(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=le.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),gte(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vJ,{unique:!0});const h=c.store("mutations"),m=u.map(y=>h.put(y));return le.waitFor(m)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:B1e});c.createIndex("collectionPathOverlayIndex",U1e,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",j1e,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:x1e});c.createIndex("documentKeyIndex",D1e),c.createIndex("collectionGroupIndex",R1e)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:O1e}).createIndex("sequenceNumberIndex",F1e,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:L1e}).createIndex("documentKeyIndex",V1e,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(l){l.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=mx(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>le.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>le.forEach(a,l=>{lt(l.userId===s.userId);const c=Zf(this.serializer,l);return rte(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new mn(o),c=[0,ks(l)];s.push(t.get(c).next(u=>u?le.resolve():t.put({targetId:0,path:ks(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:N1e});const r=t.store("collectionParents"),i=new O2,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ks(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new mn(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=Kl(a);return s(u.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=vI(i),o=Hee(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(h=o,h.document?new Ye(mn.fromString(h.document.name).popFirst(5)):h.noDocument?Ye.fromSegments(h.noDocument.path):h.unknownDocument?Ye.fromSegments(h.unknownDocument.path):st()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var h;i.push(a.put(c))}).next(()=>le.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=dte(this.serializer),s=new L2(yx.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Qt();Zf(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),le.forEach(a,(l,c)=>{const u=new es(c),h=hx.lt(this.serializer,u),m=s.getIndexManager(u),y=gx.lt(u,this.serializer,m,s.referenceDelegate);return new mte(i,y,h,m).recalculateAndSaveOverlaysForDocumentKeys(new l2(t,ta.oe),l).next()})})}}function gte(n){n.createObjectStore("targetDocuments",{keyPath:P1e}).createIndex("documentTargetsIndex",k1e,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",M1e,{unique:!0}),n.createObjectStore("targetGlobal")}const V2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class B2{constructor(e,t,r,i,s,o,a,l,c,u,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!B2.D())throw new Pe(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $Oe(this,i),this.Ai=t+"main",this.serializer=new jee(l),this.Ri=new ql(this.Ai,this.hi,new nFe(this.serializer)),this.$r=new kOe,this.Ur=new jOe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dte(this.serializer),this.Gr=new POe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===u&&bi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ve.FAILED_PRECONDITION,V2);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ta(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,O.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,O.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,O.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Cd(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return CI(e).get("owner").next(t=>le.resolve(this.vi(t)))}Ci(e){return bx(e).delete(this.clientId)}Fi(){var e=this;return(0,O.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zi(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return le.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?le.resolve(!0):CI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Pe(ve.FAILED_PRECONDITION,V2);return!1}}return!(!this.networkEnabled||!this.inForeground)||bx(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,O.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new l2(t,ta.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>bx(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return gx.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UOe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hx.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(l=this.hi)?$1e:16===l?H1e:15===l?a2:14===l?wJ:13===l?IJ:12===l?z1e:11===l?EJ:void st();var l;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new l2(a,this.Qr?this.Qr.next():ta.oe),"readwrite-primary"===t?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw bi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Pe(ve.FAILED_PRECONDITION,fJ);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return CI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ve.FAILED_PRECONDITION,V2)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return CI(e).put("owner",t)}static D(){return ql.D()}bi(e){const t=CI(e);return t.get("owner").next(r=>this.vi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(bi(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,N.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){bi("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function CI(n){return zi(n,"owner")}function bx(n){return zi(n,"clientMetadata")}function U2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class j2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Qt(),i=Qt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new j2(e,t.fromCache,r,i)}}class rFe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _te{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,N.nr)()?8:mJ((0,N.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new rFe;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(u_()<=Ao.$b.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",v_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),le.resolve()):(u_()<=Ao.$b.DEBUG&&Oe("QueryEngine","Query:",v_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(u_()<=Ao.$b.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",v_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(t))):le.resolve())}Yi(e,t){if(YJ(t))return le.resolve(null);let r=Ns(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ix(t,null,"F"),r=Ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Qt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,ix(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return YJ(t)||i.isEqual(ht.min())?le.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?le.resolve(null):(u_()<=Ao.$b.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),v_(t)),this.rs(e,o,t,dJ(i,-1)).next(a=>a))})}ts(e,t){let r=new rr(tee(e));return t.forEach((i,s)=>{cI(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return u_()<=Ao.$b.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",v_(t)),this.Ji.getDocumentsMatchingQuery(e,t,ea.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class iFe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new vr(Nt),this._s=new Jc(s=>qf(s),aI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mte(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function yte(n,e,t,r){return new iFe(n,e,t,r)}function vte(n,e){return z2.apply(this,arguments)}function z2(){return(z2=(0,O.A)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Qt();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function bte(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Ete(n,e,t){let r=Qt(),i=Qt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ro();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ht.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Oe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function aFe(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R_(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new tu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function M_(n,e,t){return H2.apply(this,arguments)}function H2(){return(H2=(0,O.A)(function*(n,e,t){const r=Ge(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Cd(o))throw o;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function Ex(n,e,t){const r=Ge(n);let i=ht.min(),s=Qt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Ge(l),m=h._s.get(u);return void 0!==m?le.resolve(h.os.get(m)):h.Ur.getTargetData(c,u)}(r,o,Ns(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ht.min(),t?s:Qt())).next(a=>(Cte(r,eee(e),a),{documents:a,Ts:s})))}function Ite(n,e){const t=Ge(n),r=Ge(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function wte(n,e){const t=Ge(n),r=t.us.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,dJ(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Cte(t,e,i),i))}function Cte(n,e,t){let r=n.us.get(e)||ht.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function $2(){return($2=(0,O.A)(function*(n,e,t,r){const i=Ge(n);let s=Qt(),o=Ro();for(const c of t){const u=e.Es(c.metadata.name);c.document&&(s=s.add(u));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(u,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=yield R_(i,(u=r,Ns(__(mn.fromString(`__bundle__/docs/${u}`)))));var u;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>Ete(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))})).apply(this,arguments)}function cFe(n,e){return W2.apply(this,arguments)}function W2(){return(W2=(0,O.A)(function*(n,e,t=Qt()){const r=yield R_(n,Ns(D2(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ei(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(ai.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function Tte(n,e){return`firestore_clients_${n}_${e}`}function Ate(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function G2(n,e){return`firestore_targets_${n}_${e}`}class Ix{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Pe(i.error.code,i.error.message))),o?new Ix(e,t,i.state,s):(bi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class TI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pe(r.error.code,r.error.message))),s?new TI(e,r.state,i):(bi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=_2();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=_J(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new wx(e,s):(bi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class q2{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new q2(t.clientId,t.onlineState):(bi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class K2{constructor(){this.activeTargetIds=_2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q2{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new vr(Nt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Tte(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new K2),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,O.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(Tte(e.persistenceKey,i));if(s){const o=wx.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(G2(this.persistenceKey,e));if(i){const s=TI.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(G2(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void bi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,O.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=ta.oe;if(null!=o)try{const l=JSON.parse(o);lt("number"==typeof l),a=l}catch(l){bi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==ta.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Ix(this.currentUser,e,t,r),s=Ate(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=Ate(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=G2(this.persistenceKey,e),s=new TI(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return wx.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return Ix.Rs(new es(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return TI.Rs(i,t)}Ls(e){return q2.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,O.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=_2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Ste{constructor(){this.so=new K2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new K2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uFe{_o(e){}shutdown(){}}class xte{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cx=null;function Y2(){return null===Cx?Cx=268435456+Math.round(2147483648*Math.random()):Cx++,"0x"+Cx.toString(16)}const dFe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hFe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Fs="WebChannelConnection";class fFe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=Y2(),l=this.xo(t,r.toUriEncodedString());Oe("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(u=>(Oe("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw Jo("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+c_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${dFe[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=Y2();return new Promise((o,a)=>{const l=new tJ;l.setWithCredentials(!0),l.listenOnce(nJ.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case GS.NO_ERROR:const u=l.getResponseJson();Oe(Fs,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case GS.TIMEOUT:Oe(Fs,`RPC '${e}' ${s} timed out`),a(new Pe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case GS.HTTP_ERROR:const h=l.getStatus();if(Oe(Fs,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const b=function(M){const B=M.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(B)>=0?B:ve.UNKNOWN}(y.status);a(new Pe(b,y.message))}else a(new Pe(ve.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Pe(ve.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Oe(Fs,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Oe(Fs,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=Y2(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sJ(),a=iJ(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");Oe(Fs,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let m=!1,y=!1;const b=new hFe({Io:M=>{y?Oe(Fs,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(Oe(Fs,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),Oe(Fs,`RPC '${e}' stream ${i} sending:`,M),h.send(M))},To:()=>h.close()}),T=(M,B,V)=>{M.listen(B,Q=>{try{V(Q)}catch(be){setTimeout(()=>{throw be},0)}})};return T(h,XE.EventType.OPEN,()=>{y||(Oe(Fs,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),T(h,XE.EventType.CLOSE,()=>{y||(y=!0,Oe(Fs,`RPC '${e}' stream ${i} transport closed`),b.So())}),T(h,XE.EventType.ERROR,M=>{y||(y=!0,Jo(Fs,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new Pe(ve.UNAVAILABLE,"The operation could not be completed")))}),T(h,XE.EventType.MESSAGE,M=>{var B;if(!y){const V=M.data[0];lt(!!V);const be=V.error||(null===(B=V[0])||void 0===B?void 0:B.error);if(be){Oe(Fs,`RPC '${e}' stream ${i} received error:`,be);const Be=be.status;let je=function(W){const J=Di[W];if(void 0!==J)return vee(J)}(Be),H=be.message;void 0===je&&(je=ve.INTERNAL,H="Unknown error status: "+Be+" with message "+be.message),y=!0,b.So(new Pe(je,H)),h.close()}else Oe(Fs,`RPC '${e}' stream ${i} received:`,V),b.bo(V)}}),T(a,rJ.STAT_EVENT,M=>{M.stat===e2.PROXY?Oe(Fs,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===e2.NOPROXY&&Oe(Fs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Dte(){return typeof window<"u"?window:null}function Tx(){return typeof document<"u"?document:null}function AI(n){return new EOe(n,!0)}class X2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Rte{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new X2(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,O.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,O.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,O.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Pe(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,O.A)(function*(){e.state=0,e.start()}))}I_(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pFe extends Rte{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function COe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:st(),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(lt(void 0===u||"string"==typeof u),ai.fromBase64String(u||"")):(lt(void 0===u||u instanceof Buffer||u instanceof Uint8Array),ai.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?ve.UNKNOWN:vee(c.code);return new Pe(u,c.message||"")}(o);t=new Cee(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Xl(n,r.document.name),s=Ei(r.document.updateTime),o=r.document.createTime?Ei(r.document.createTime):ht.min(),a=new hs({mapValue:{fields:r.document.fields}}),l=Dr.newFoundDocument(i,s,o,a);t=new cx(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Xl(n,r.document),s=r.readTime?Ei(r.readTime):ht.min(),o=Dr.newNoDocument(i,s);t=new cx([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Xl(n,r.document);t=new cx([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new mOe(i,s);t=new wee(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ht.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ht.min():o.readTime?Ei(o.readTime):ht.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=S2(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=nx(l)?{documents:Oee(s,l)}:{query:ux(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xee(s,o.resumeToken);const c=C2(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ht.min())>0){a.readTime=C_(s,o.snapshotVersion.toTimestamp());const c=C2(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function AOe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=S2(this.serializer),t.removeTarget=e,this.a_(t)}}class mFe extends Rte{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return lt(!!e.streamToken),this.lastStreamToken=e.streamToken,lt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function TOe(n,e){return n&&n.length>0?(lt(void 0!==e),n.map(t=>function(i,s){let o=Ei(i.updateTime?i.updateTime:s);return o.isEqual(ht.min())&&(o=Ei(s)),new hOe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=S2(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yI(this.serializer,r))};this.a_(t)}}class gFe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Pe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,A2(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(ve.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,A2(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ve.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _Fe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bi(t),this.D_=!1):Oe("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class yFe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,O.A)(function*(){var l;Od(o)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,O.A)(function*(u){const h=Ge(u);h.L_.add(4),yield P_(h),h.q_.set("Unknown"),h.L_.delete(4),yield SI(h)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.q_=new _Fe(r,i)}}function SI(n){return Z2.apply(this,arguments)}function Z2(){return(Z2=(0,O.A)(function*(n){if(Od(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function P_(n){return J2.apply(this,arguments)}function J2(){return(J2=(0,O.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Ax(n,e){const t=Ge(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),nB(t)?tB(t):O_(t).r_()&&eB(t,e))}function k_(n,e){const t=Ge(n),r=O_(t);t.N_.delete(e),r.r_()&&Mte(t,e),0===t.N_.size&&(r.r_()?r.o_():Od(t)&&t.q_.set("Unknown"))}function eB(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}O_(n).A_(e)}function Mte(n,e){n.Q_.xe(e),O_(n).R_(e)}function tB(n){n.Q_=new _Oe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),O_(n).start(),n.q_.v_()}function nB(n){return Od(n)&&!O_(n).n_()&&n.N_.size>0}function Od(n){return 0===Ge(n).L_.size}function Pte(n){n.Q_=void 0}function vFe(n){return rB.apply(this,arguments)}function rB(){return(rB=(0,O.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function bFe(n){return iB.apply(this,arguments)}function iB(){return(iB=(0,O.A)(function*(n){n.N_.forEach((e,t)=>{eB(n,e)})})).apply(this,arguments)}function EFe(n,e){return sB.apply(this,arguments)}function sB(){return(sB=(0,O.A)(function*(n,e){Pte(n),nB(n)?(n.q_.M_(e),tB(n)):n.q_.set("Unknown")})).apply(this,arguments)}function IFe(n,e,t){return oB.apply(this,arguments)}function oB(){return oB=(0,O.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof Cee&&2===e.state&&e.cause)try{yield(r=(0,O.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sx(n,r)}else if(e instanceof cx?n.Q_.Ke(e):e instanceof wee?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ht.min()))try{const r=yield bte(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(ai.EMPTY_BYTE_STRING,u.snapshotVersion)),Mte(s,l);const h=new tu(u.target,l,c,u.sequenceNumber);eB(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield Sx(n,r)}var r}),oB.apply(this,arguments)}function Sx(n,e,t){return aB.apply(this,arguments)}function aB(){return(aB=(0,O.A)(function*(n,e,t){if(!Cd(e))throw e;n.L_.add(1),yield P_(n),n.q_.set("Offline"),t||(t=()=>bte(n.localStore)),n.asyncQueue.enqueueRetryable((0,O.A)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield SI(n)}))})).apply(this,arguments)}function kte(n,e){return e().catch(t=>Sx(n,t,e))}function N_(n){return lB.apply(this,arguments)}function lB(){return(lB=(0,O.A)(function*(n){const e=Ge(n),t=Fd(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wFe(e);)try{const i=yield aFe(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,CFe(e,i)}catch(i){yield Sx(e,i)}Nte(e)&&Ote(e)})).apply(this,arguments)}function wFe(n){return Od(n)&&n.O_.length<10}function CFe(n,e){n.O_.push(e);const t=Fd(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Nte(n){return Od(n)&&!Fd(n).n_()&&n.O_.length>0}function Ote(n){Fd(n).start()}function TFe(n){return cB.apply(this,arguments)}function cB(){return(cB=(0,O.A)(function*(n){Fd(n).p_()})).apply(this,arguments)}function AFe(n){return uB.apply(this,arguments)}function uB(){return(uB=(0,O.A)(function*(n){const e=Fd(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function SFe(n,e,t){return dB.apply(this,arguments)}function dB(){return(dB=(0,O.A)(function*(n,e,t){const r=n.O_.shift(),i=E2.from(r,e,t);yield kte(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield N_(n)})).apply(this,arguments)}function xFe(n,e){return hB.apply(this,arguments)}function hB(){return hB=(0,O.A)(function*(n,e){var t;e&&Fd(n).V_&&(yield(t=(0,O.A)(function*(i,s){if(yee(a=s.code)&&a!==ve.ABORTED){const o=i.O_.shift();Fd(i).s_(),yield kte(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield N_(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),Nte(n)&&Ote(n)}),hB.apply(this,arguments)}function Fte(n,e){return fB.apply(this,arguments)}function fB(){return(fB=(0,O.A)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Od(t);t.L_.add(3),yield P_(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield SI(t)})).apply(this,arguments)}function pB(n,e){return mB.apply(this,arguments)}function mB(){return(mB=(0,O.A)(function*(n,e){const t=Ge(n);e?(t.L_.delete(2),yield SI(t)):e||(t.L_.add(2),yield P_(t),t.q_.set("Unknown"))})).apply(this,arguments)}function O_(n){return n.K_||(n.K_=function(t,r,i){const s=Ge(t);return s.w_(),new pFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:vFe.bind(null,n),Ro:bFe.bind(null,n),mo:EFe.bind(null,n),d_:IFe.bind(null,n)}),n.B_.push(function(){var e=(0,O.A)(function*(t){t?(n.K_.s_(),nB(n)?tB(n):n.q_.set("Unknown")):(yield n.K_.stop(),Pte(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Fd(n){return n.U_||(n.U_=function(t,r,i){const s=Ge(t);return s.w_(),new mFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TFe.bind(null,n),mo:xFe.bind(null,n),f_:AFe.bind(null,n),g_:SFe.bind(null,n)}),n.B_.push(function(){var e=(0,O.A)(function*(t){t?(n.U_.s_(),yield N_(n)):(yield n.U_.stop(),n.O_.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class gB{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new gB(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F_(n,e){if(bi("AsyncQueue",`${e}: ${n}`),Cd(n))return new Pe(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class L_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=uI(),this.sortedSet=new vr(this.comparator)}static emptySet(e){return new L_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof L_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new L_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Lte{constructor(){this.W_=new vr(Ye.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):st():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class V_{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new V_(e,t,L_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class DFe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class RFe{constructor(){this.queries=Vte(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ge(t),s=i.queries;i.queries=Vte(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})}(this,new Pe(ve.ABORTED,"Firestore shutting down"))}}function Vte(){return new Jc(n=>JJ(n),lI)}function _B(n,e){return yB.apply(this,arguments)}function yB(){return(yB=(0,O.A)(function*(n,e){const t=Ge(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new DFe,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=F_(o,`Initialization of query '${v_(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&EB(t)})).apply(this,arguments)}function vB(n,e){return bB.apply(this,arguments)}function bB(){return(bB=(0,O.A)(function*(n,e){const t=Ge(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function MFe(n,e){const t=Ge(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&EB(t)}function PFe(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function EB(n){n.Y_.forEach(e=>{e.next()})}var IB,Bte;(Bte=IB||(IB={})).ea="default",Bte.Cache="cache";class wB{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new V_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=V_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==IB.Cache}}class kFe{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class Ute{constructor(e){this.serializer=e}Es(e){return Xl(this.serializer,e)}ds(e){return e.metadata.exists?Nee(this.serializer,e.document,!1):Dr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ei(e)}}class NFe{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jte(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=mn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new Ute(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Qt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,O.A)(function*(){const t=yield function lFe(n,e,t,r){return $2.apply(this,arguments)}(e.localStore,new Ute(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield cFe(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function jte(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class zte{constructor(e){this.key=e}}class Hte{constructor(e){this.key=e}}class $te{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qt(),this.mutatedKeys=Qt(),this.Aa=tee(e),this.Ra=new L_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Lte,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const m=i.get(u),y=cI(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?b!==T&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(l||c)&&(a=!0)),M&&(y?(o=o.add(y),s=T?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,h)=>function(y,b){const T=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return T(y)-T(b)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],l=0===this.da.size&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,0!==o.length||c?{snapshot:new V_(this.query,e.Ra,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Lte,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Hte(r))}),this.da.forEach(r=>{e.has(r)||t.push(new zte(r))}),t}ba(e){this.Ta=e.Ts,this.da=Qt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return V_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class OFe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class FFe{constructor(e){this.key=e,this.va=!1}}class LFe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Jc(a=>JJ(a),lI),this.Ma=new Map,this.xa=new Set,this.Oa=new vr(Ye.comparator),this.Na=new Map,this.La=new F2,this.Ba={},this.ka=new Map,this.qa=tp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function VFe(n,e){return CB.apply(this,arguments)}function CB(){return(CB=(0,O.A)(function*(n,e,t=!0){const r=xx(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Wte(r,e,t,!0),i})).apply(this,arguments)}function BFe(n,e){return TB.apply(this,arguments)}function TB(){return(TB=(0,O.A)(function*(n,e){const t=xx(n);yield Wte(t,e,!0,!1)})).apply(this,arguments)}function Wte(n,e,t,r){return AB.apply(this,arguments)}function AB(){return(AB=(0,O.A)(function*(n,e,t,r){const i=yield R_(n.localStore,Ns(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield SB(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Ax(n.remoteStore,i),a})).apply(this,arguments)}function SB(n,e,t,r,i){return xB.apply(this,arguments)}function xB(){return xB=(0,O.A)(function*(n,e,t,r,i){n.Ka=(h,m,y)=>{return(b=(0,O.A)(function*(M,B,V,Q){let be=B.view.ma(V);be.ns&&(be=yield Ex(M.localStore,B.query,!1).then(({documents:L})=>B.view.ma(L,be)));const Be=Q&&Q.targetChanges.get(B.targetId),je=Q&&null!=Q.targetMismatches.get(B.targetId),H=B.view.applyChanges(be,M.isPrimaryClient,Be,je);return BB(M,B.targetId,H.wa),H.snapshot}),function T(M,B,V,Q){return b.apply(this,arguments)})(n,h,m,y);var b};const s=yield Ex(n.localStore,e,!0),o=new $te(e,s.Ts),a=o.ma(s.documents),l=gI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);BB(n,t,c.wa);const u=new OFe(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),xB.apply(this,arguments)}function UFe(n,e,t){return DB.apply(this,arguments)}function DB(){return(DB=(0,O.A)(function*(n,e,t){const r=Ge(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!lI(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield M_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&k_(r.remoteStore,i.targetId),B_(r,i.targetId)}).catch(wd))):(B_(r,i.targetId),yield M_(r.localStore,i.targetId,!0))})).apply(this,arguments)}function jFe(n,e){return RB.apply(this,arguments)}function RB(){return(RB=(0,O.A)(function*(n,e){const t=Ge(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),k_(t.remoteStore,r.targetId))})).apply(this,arguments)}function MB(){return(MB=(0,O.A)(function*(n,e,t){const r=YB(n);try{const i=yield function(o,a){const l=Ge(o),c=Vr.now(),u=a.reduce((y,b)=>y.add(b.key),Qt());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Ro(),T=Qt();return l.cs.getEntries(y,u).next(M=>{b=M,b.forEach((B,V)=>{V.isValidDocument()||(T=T.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(M=>{h=M;const B=[];for(const V of a){const Q=pOe(V,h.get(V.key).overlayedDocument);null!=Q&&B.push(new eu(V.key,Q,LJ(Q.value.mapValue),Ur.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,B,a)}).next(M=>{m=M;const B=M.applyToLocalDocumentSet(h,T);return l.documentOverlayCache.saveOverlays(y,M.batchId,B)})}).then(()=>({batchId:m.batchId,changes:ree(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new vr(Nt)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),yield nu(r,i.changes),yield N_(r.remoteStore)}catch(i){const s=F_(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function Gte(n,e){return PB.apply(this,arguments)}function PB(){return(PB=(0,O.A)(function*(n,e){const t=Ge(n);try{const r=yield function oFe(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((u,h)=>{const m=i.get(h);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,h)));let y=m.withSequenceNumber(s.currentSequenceNumber);var T,M,B;null!==e.targetMismatches.get(h)?y=y.withResumeToken(ai.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,r)),i=i.insert(h,y),M=y,B=u,(0===(T=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,y))});let l=Ro(),c=Qt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Ete(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(ht.min())){const u=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return le.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?lt(o.va):i.removedDocuments.size>0&&(lt(o.va),o.va=!1))}),yield nu(t,r,e)}catch(r){yield wd(r)}})).apply(this,arguments)}function qte(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ge(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const m of h.j_)m.Z_(a)&&(c=!0)}),c&&EB(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function HFe(n,e,t){return kB.apply(this,arguments)}function kB(){return(kB=(0,O.A)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new vr(Ye.comparator);o=o.insert(s,Dr.newNoDocument(s,ht.min()));const a=Qt().add(s),l=new mI(ht.min(),new Map,new vr(Nt),o,a);yield Gte(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),UB(r)}else yield M_(r.localStore,e,!1).then(()=>B_(r,e,t)).catch(wd)})).apply(this,arguments)}function $Fe(n,e){return NB.apply(this,arguments)}function NB(){return(NB=(0,O.A)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield function sFe(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,m=h.keys();let y=le.resolve();return m.forEach(b=>{y=y.next(()=>u.getEntry(l,b)).next(T=>{const M=c.docVersions.get(b);lt(null!==M),T.version.compareTo(M)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),u.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Qt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);VB(t,r,null),LB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nu(t,i)}catch(i){yield wd(i)}})).apply(this,arguments)}function WFe(n,e,t){return OB.apply(this,arguments)}function OB(){return(OB=(0,O.A)(function*(n,e,t){const r=Ge(n);try{const i=yield function(o,a){const l=Ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(lt(null!==h),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);VB(r,e,t),LB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nu(r,i)}catch(i){yield wd(i)}})).apply(this,arguments)}function FB(){return(FB=(0,O.A)(function*(n,e){const t=Ge(n);Od(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ge(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=F_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function LB(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function VB(n,e,t){const r=Ge(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function B_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Kte(n,r)})}function Kte(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(k_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),UB(n))}function BB(n,e,t){for(const r of t)r instanceof zte?(n.La.addReference(r.key,e),qFe(n,r)):r instanceof Hte?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Kte(n,r.key)):st()}function qFe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.xa.add(r),UB(n))}function UB(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ye(mn.fromString(e)),r=n.qa.next();n.Na.set(r,new FFe(t)),n.Oa=n.Oa.insert(t,r),Ax(n.remoteStore,new tu(Ns(__(t.path)),r,"TargetPurposeLimboResolution",ta.oe))}}function nu(n,e,t){return jB.apply(this,arguments)}function jB(){return jB=(0,O.A)(function*(n,e,t){const r=Ge(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:null===(u=t?.targetChanges.get(l.targetId))||void 0===u?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=j2.Wi(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,O.A)(function*(c,u){const h=Ge(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>le.forEach(u,y=>le.forEach(y.$i,b=>h.persistence.referenceDelegate.addReference(m,y.targetId,b)).next(()=>le.forEach(y.Ui,b=>h.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))}catch(m){if(!Cd(m))throw m;Oe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const y=m.targetId;if(!m.fromCache){const b=h.os.get(y),M=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);h.os=h.os.insert(y,M)}}}),function l(c,u){return a.apply(this,arguments)})(r.localStore,s))}),jB.apply(this,arguments)}function KFe(n,e){return zB.apply(this,arguments)}function zB(){return(zB=(0,O.A)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield vte(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(l=>{l.reject(new Pe(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nu(t,r.hs)}var s})).apply(this,arguments)}function QFe(n,e){const t=Ge(n),r=t.Na.get(e);if(r&&r.va)return Qt().add(r.key);{let i=Qt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function YFe(n,e){return HB.apply(this,arguments)}function HB(){return(HB=(0,O.A)(function*(n,e){const t=Ge(n),r=yield Ex(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&BB(t,e.targetId,i.wa),i})).apply(this,arguments)}function XFe(n,e){return $B.apply(this,arguments)}function $B(){return($B=(0,O.A)(function*(n,e){const t=Ge(n);return wte(t.localStore,e).then(r=>nu(t,r))})).apply(this,arguments)}function ZFe(n,e,t,r){return WB.apply(this,arguments)}function WB(){return(WB=(0,O.A)(function*(n,e,t,r){const i=Ge(n),s=yield function(a,l){const c=Ge(a),u=Ge(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Mn(h,l).next(m=>m?c.localDocuments.getDocuments(h,m):le.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield N_(i.remoteStore):"acknowledged"===t||"rejected"===t?(VB(i,e,r||null),LB(i,e),l=e,Ge(Ge(i.localStore).mutationQueue).On(l)):st(),yield nu(i,s)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function GB(){return(GB=(0,O.A)(function*(n,e){const t=Ge(n);if(xx(t),YB(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Qte(t,r.toArray());t.Qa=!0,yield pB(t.remoteStore,!0);for(const s of i)Ax(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(B_(t,o),M_(t.localStore,o,!0))),k_(t.remoteStore,o)}),yield i,yield Qte(t,r),function(o){const a=Ge(o);a.Na.forEach((l,c)=>{k_(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new vr(Ye.comparator)}(t),t.Qa=!1,yield pB(t.remoteStore,!1)}})).apply(this,arguments)}function Qte(n,e,t){return qB.apply(this,arguments)}function qB(){return(qB=(0,O.A)(function*(n,e,t){const r=Ge(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&0!==l.length){a=yield R_(r.localStore,Ns(l[0]));for(const c of l){const u=r.Fa.get(c),h=yield YFe(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=yield Ite(r.localStore,o);a=yield R_(r.localStore,c),yield SB(r,Yte(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function Yte(n){return QJ(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function eLe(n){return t=Ge(n).localStore,Ge(Ge(t).persistence).Qi();var t}function tLe(n,e,t,r){return KB.apply(this,arguments)}function KB(){return(KB=(0,O.A)(function*(n,e,t,r){const i=Ge(n);if(i.Qa)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield wte(i.localStore,eee(s[0])),a=mI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ai.EMPTY_BYTE_STRING);yield nu(i,o,a);break}case"rejected":yield M_(i.localStore,e,!0),B_(i,e,r);break;default:st()}})).apply(this,arguments)}function nLe(n,e,t){return QB.apply(this,arguments)}function QB(){return(QB=(0,O.A)(function*(n,e,t){const r=xx(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const s=yield Ite(r.localStore,i),o=yield R_(r.localStore,s);yield SB(r,Yte(s),o.targetId,!1,o.resumeToken),Ax(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield M_(r.localStore,i,!1).then(()=>{k_(r.remoteStore,i),B_(r,i)}).catch(wd))}})).apply(this,arguments)}function xx(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gte.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QFe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HFe.bind(null,e),e.Ca.d_=MFe.bind(null,e.eventManager),e.Ca.$a=PFe.bind(null,e.eventManager),e}function YB(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$Fe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WFe.bind(null,e),e}let U_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,O.A)(function*(){r.serializer=AI(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return yte(this.persistence,new _te,t.initialUser,this.serializer)}Ga(t){return new L2(yx.Zr,this.serializer)}Wa(t){return new Ste}terminate(){var t=this;return(0,O.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class XB extends U_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,O.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield YB(r.Ja.syncEngine),yield N_(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return yte(this.persistence,new _te,e.initialUser,this.serializer)}ja(e,t){return new lte(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new T1e(t,this.persistence);return new C1e(e.asyncQueue,r)}Ga(e){const t=U2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Os.withCacheSize(this.cacheSizeBytes):Os.DEFAULT;return new B2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Dte(),Tx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ste}}class Xte extends XB{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,O.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof Q2&&(r.sharedClientState.syncEngine={no:ZFe.bind(null,i),ro:tLe.bind(null,i),io:nLe.bind(null,i),Qi:eLe.bind(null,i),eo:XFe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,O.A)(function*(o){yield function JFe(n,e){return GB.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=Dte();if(!Q2.D(t))throw new Pe(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=U2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Q2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let j_=(()=>{class n{initialize(t,r){var i=this;return(0,O.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>qte(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=KFe.bind(null,i.syncEngine),yield pB(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new RFe}createDatastore(t){const r=AI(t.databaseInfo.databaseId),i=new fFe(t.databaseInfo);return new gFe(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>qte(this.syncEngine,r,0),l=xte.D()?new xte:new uFe,new yFe(i,s,o,a,l);var i,s,o,a,l}createSyncEngine(t,r){return function(s,o,a,l,c,u,h){const m=new LFe(s,o,a,l,c,u);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,O.A)(function*(){var r,i,s;yield(s=(0,O.A)(function*(a){const l=Ge(a);Oe("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield P_(l),l.k_.shutdown(),l.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function Zte(n,e=10240){let t=0;return{read:()=>(0,O.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,O.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Dx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class sLe{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ts,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,O.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,O.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,O.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new kFe(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,O.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,O.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,O.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class oLe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,O.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Pe(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,O.A)(function*(o,a){const l=Ge(o),c={documents:a.map(y=>_I(l.serializer,y))},u=yield l.Lo("BatchGetDocuments",l.serializer.databaseId,mn.emptyPath(),c,a.length),h=new Map;u.forEach(y=>{const b=function wOe(n,e){return"found"in e?function(r,i){lt(!!i.found);const s=Xl(r,i.found.name),o=Ei(i.found.updateTime),a=i.found.createTime?Ei(i.found.createTime):ht.min(),l=new hs({mapValue:{fields:i.found.fields}});return Dr.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){lt(!!i.missing),lt(!!i.readTime);const s=Xl(r,i.missing),o=Ei(i.readTime);return Dr.newNoDocument(s,o)}(n,e):st()}(l.serializer,y);h.set(b.key.toString(),b)});const m=[];return a.forEach(y=>{const b=h.get(y.toString());lt(!!b),m.push(b)}),m}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new w_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,O.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ye.fromPath(i);e.mutations.push(new v2(s,e.precondition(s)))}),yield(r=(0,O.A)(function*(s,o){const a=Ge(s),l={writes:o.map(c=>yI(a.serializer,c))};yield a.Mo("Commit",a.serializer.databaseId,mn.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?Ur.exists(!1):Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new Pe(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class aLe{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new X2(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,O.A)(function*(){const t=new oLe(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!eI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yee(t)}return!1}}class lLe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=es.UNAUTHENTICATED,this.clientId=cJ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,O.A)(function*(l){Oe("FirestoreClient","Received user=",l.uid),yield o.authCredentialListener(l),o.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Oe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,O.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=F_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function ZB(n,e){return JB.apply(this,arguments)}function JB(){return JB=(0,O.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,O.A)(function*(s){r.isEqual(s)||(yield vte(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),JB.apply(this,arguments)}function Jte(n,e){return eU.apply(this,arguments)}function eU(){return(eU=(0,O.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield tU(n);Oe("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Fte(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Fte(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function tU(n){return nU.apply(this,arguments)}function nU(){return(nU=(0,O.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ZB(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Jo("Error using user provided cache. Falling back to memory cache: "+e),yield ZB(n,new U_)}}else Oe("FirestoreClient","Using default OfflineComponentProvider"),yield ZB(n,new U_);var i;return n._offlineComponents})).apply(this,arguments)}function Rx(n){return rU.apply(this,arguments)}function rU(){return(rU=(0,O.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Jte(n,n._uninitializedComponentsProvider._online)):(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield Jte(n,new j_))),n._onlineComponents})).apply(this,arguments)}function ene(n){return tU(n).then(e=>e.persistence)}function z_(n){return tU(n).then(e=>e.localStore)}function tne(n){return Rx(n).then(e=>e.remoteStore)}function iU(n){return Rx(n).then(e=>e.syncEngine)}function H_(n){return sU.apply(this,arguments)}function sU(){return(sU=(0,O.A)(function*(n){const e=yield Rx(n),t=e.eventManager;return t.onListen=VFe.bind(null,e.syncEngine),t.onUnlisten=UFe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BFe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jFe.bind(null,e.syncEngine),t})).apply(this,arguments)}function rne(n,e,t={}){const r=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function(s,o,a,l,c){const u=new Dx({next:m=>{u.Za(),o.enqueueAndForget(()=>vB(s,h));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Pe(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&"server"===l.source?c.reject(new Pe(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new wB(__(a.path),u,{includeMetadataChanges:!0,_a:!0});return _B(s,h)}(yield H_(n),n.asyncQueue,e,t,r)})),r.promise}function ine(n,e,t={}){const r=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function(s,o,a,l,c){const u=new Dx({next:m=>{u.Za(),o.enqueueAndForget(()=>vB(s,h)),m.fromCache&&"server"===l.source?c.reject(new Pe(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new wB(a,u,{includeMetadataChanges:!0,_a:!0});return _B(s,h)}(yield H_(n),n.asyncQueue,e,t,r)})),r.promise}function sne(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const one=new Map;function oU(n,e,t){if(!t)throw new Pe(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ane(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lne(n){if(!Ye.isDocumentKey(n))throw new Pe(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cne(n){if(Ye.isDocumentKey(n))throw new Pe(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Mx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":st()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mx(n);throw new Pe(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function une(n,e){if(e<=0)throw new Pe(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class dne{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ane("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=sne(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Pe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dne({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dne(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new h1e;switch(r.type){case"firstParty":return new g1e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,O.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=one.get(t);r&&(Oe("ComponentProvider","Removing Datastore"),one.delete(t),r.terminate())}(this),Promise.resolve()}}class fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class Rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}}class Zl extends fs{constructor(e,t,r){super(e,t,__(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new Ye(e))}withConverter(e){return new Zl(this.firestore,e,this._path)}}function fne(n,e,...t){if(n=(0,N.Ku)(n),oU("collection","path",e),n instanceof xI){const r=mn.fromString(e,...t);return cne(r),new Zl(n,null,r)}{if(!(n instanceof Rr||n instanceof Zl))throw new Pe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return cne(r),new Zl(n.firestore,null,r)}}function Px(n,e,...t){if(n=(0,N.Ku)(n),1===arguments.length&&(e=cJ.newId()),oU("doc","path",e),n instanceof xI){const r=mn.fromString(e,...t);return lne(r),new Rr(n,null,new Ye(r))}{if(!(n instanceof Rr||n instanceof Zl))throw new Pe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return lne(r),new Rr(n.firestore,n instanceof Zl?n.converter:null,new Ye(r))}}function pne(n,e){return n=(0,N.Ku)(n),e=(0,N.Ku)(e),(n instanceof Rr||n instanceof Zl)&&(e instanceof Rr||e instanceof Zl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function aU(n,e){return n=(0,N.Ku)(n),e=(0,N.Ku)(e),n instanceof fs&&e instanceof fs&&n.firestore===e.firestore&&lI(n._query,e._query)&&n.converter===e.converter}class mne{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new X2(this,"async_queue_retry"),this.Vu=()=>{const r=Tx();r&&Oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Tx();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Tx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ts;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,O.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Cd(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,bi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=gB.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&st()}verifyOperationInProgress(){}wu(){var e=this;return(0,O.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function lU(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class ELe{constructor(){this._progressObserver={},this._taskCompletionResolver=new ts,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends xI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,O.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new mne(t),e._firestoreClient=void 0,yield t}})()}}function jr(n){if(n._terminated)throw new Pe(ve.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gne(n),n._firestoreClient}function gne(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new q1e(n._databaseId,l,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,sne(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lLe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function cU(){return(cU=(0,O.A)(function*(n){Jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();_ne(n,j_.provider,{build:t=>new Xte(t,e.cacheSizeBytes)})})).apply(this,arguments)}function _ne(n,e,t){if((n=cn(n,ur))._firestoreClient||n._terminated)throw new Pe(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Pe(ve.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},gne(n)}class Jl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jl(ai.fromBase64String(e))}catch(t){throw new Pe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jl(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ru{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rp{constructor(e){this._methodName=e}}class kx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}class Nx{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const PLe=/^__.*__$/;class kLe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new I_(e,this.data,t,this.fieldTransforms)}}class yne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vne(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Ox{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ox(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(vne(this.Cu)&&PLe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NLe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||AI(e)}Qu(e,t,r,i=!1){return new Ox({Cu:e,methodName:t,qu:r,path:xr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ip(n){const e=n._freezeSettings(),t=AI(n._databaseId);return new NLe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Fx(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);gU("Data must be an object, but it was:",o,r);const a=Ine(r,o);let l,c;if(s.merge)l=new Do(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const m=MI(e,h,t);if(!o.contains(m))throw new Pe(ve.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Cne(u,m)||u.push(m)}l=new Do(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new kLe(new hs(a),l,c)}class RI extends rp{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof RI}}function bne(n,e,t){return new Ox({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uU extends rp{_toFieldTransform(e){return new hI(e.path,new b_)}isEqual(e){return e instanceof uU}}class dU extends rp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=bne(this,e,!0),r=this.Ku.map(s=>sp(s,t)),i=new Kf(r);return new hI(e.path,i)}isEqual(e){return e instanceof dU&&(0,N.bD)(this.Ku,e.Ku)}}class hU extends rp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=bne(this,e,!0),r=this.Ku.map(s=>sp(s,t)),i=new Qf(r);return new hI(e.path,i)}isEqual(e){return e instanceof hU&&(0,N.bD)(this.Ku,e.Ku)}}class fU extends rp{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new E_(e.serializer,oee(e.serializer,this.$u));return new hI(e.path,t)}isEqual(e){return e instanceof fU&&this.$u===e.$u}}function pU(n,e,t,r){const i=n.Qu(1,e,t);gU("Data must be an object, but it was:",i,r);const s=[],o=hs.empty();Td(r,(l,c)=>{const u=Lx(e,l,t);c=(0,N.Ku)(c);const h=i.Nu(u);if(c instanceof RI)s.push(u);else{const m=sp(c,h);null!=m&&(s.push(u),o.set(u,m))}});const a=new Do(s);return new yne(o,a,i.fieldTransforms)}function mU(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[MI(e,r,t)],l=[i];if(s.length%2!=0)throw new Pe(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(MI(e,s[m])),l.push(s[m+1]);const c=[],u=hs.empty();for(let m=a.length-1;m>=0;--m)if(!Cne(c,a[m])){const y=a[m];let b=l[m];b=(0,N.Ku)(b);const T=o.Nu(y);if(b instanceof RI)c.push(y);else{const M=sp(b,T);null!=M&&(c.push(y),u.set(y,M))}}const h=new Do(c);return new yne(u,h,o.fieldTransforms)}function Ene(n,e,t,r=!1){return sp(t,n.Qu(r?4:3,e))}function sp(n,e){if(wne(n=(0,N.Ku)(n)))return gU("Unsupported field value:",e,n),Ine(n,e);if(n instanceof rp)return function(r,i){if(!vne(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=sp(a,i.Lu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,N.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return oee(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Vr.fromDate(r);return{timestampValue:C_(i.serializer,s)}}if(r instanceof Vr){const s=new Vr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:C_(i.serializer,s)}}if(r instanceof kx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jl)return{bytesValue:xee(i.serializer,r._byteString)};if(r instanceof Rr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:T2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nx)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(l=>{if("number"!=typeof l)throw a.Bu("VectorValues must only contain numeric values.");return y2(a.serializer,l)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Mx(r)}`)}(n,e)}function Ine(n,e){const t={};return AJ(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Td(n,(r,i)=>{const s=sp(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function wne(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vr||n instanceof kx||n instanceof Jl||n instanceof Rr||n instanceof rp||n instanceof Nx)}function gU(n,e,t){if(!wne(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Mx(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function MI(n,e,t){if((e=(0,N.Ku)(e))instanceof ru)return e._internalPath;if("string"==typeof e)return Lx(n,e);throw Vx("Field path arguments must be of type string or ",n,!1,void 0,t)}const OLe=new RegExp("[~\\*/\\[\\]]");function Lx(n,e,t){if(e.search(OLe)>=0)throw Vx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ru(...e.split("."))._internalPath}catch{throw Vx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vx(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Pe(ve.INVALID_ARGUMENT,a+n+l)}function Cne(n,e){return n.some(t=>t.isEqual(e))}class PI{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new FLe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class FLe extends PI{data(){return super.data()}}function Bx(n,e){return"string"==typeof e?Lx(n,e):e instanceof ru?e._internalPath:e._delegate._internalPath}function Tne(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _U{}class kI extends _U{}function Ld(n,e,...t){let r=[];e instanceof _U&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof $_).length,a=s.filter(l=>l instanceof NI).length;if(o>1||o>0&&a>0)throw new Pe(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class NI extends kI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new NI(e,t,r)}_apply(e){const t=this._parse(e);return Dne(e._query,t),new fs(e.firestore,e.converter,g2(e._query,t))}_parse(e){const t=ip(e.firestore);return function(s,o,a,l,c,u,h){let m;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Pe(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){xne(h,u);const y=[];for(const b of h)y.push(Sne(l,s,b));m={arrayValue:{values:y}}}else m=Sne(l,s,h)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||xne(h,u),m=Ene(a,"where",h,"in"===u||"not-in"===u);return gn.create(c,u,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class $_ extends _U{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Dne(o,l),o=g2(o,l)}(e._query,t),new fs(e.firestore,e.converter,g2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yU extends kI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yU(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Pe(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oI(s,o)}(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Ux extends kI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ux(e,t,r)}_apply(e){return new fs(e.firestore,e.converter,ix(e._query,this._limit,this._limitType))}}class jx extends kI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jx(e,t,r)}_apply(e){const t=Ane(e,this.type,this._docOrFields,this._inclusive);return new fs(e.firestore,e.converter,(s=t,new Zc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class zx extends kI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new zx(e,t,r)}_apply(e){const t=Ane(e,this.type,this._docOrFields,this._inclusive);return new fs(e.firestore,e.converter,(s=t,new Zc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function Ane(n,e,t,r){if(t[0]=(0,N.Ku)(t[0]),t[0]instanceof PI)return function(s,o,a,l,c){if(!l)throw new Pe(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of y_(s))if(h.field.isKeyField())u.push(Gf(o,l.key));else{const m=l.data.field(h.field);if(YS(m))throw new Pe(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=h.field.canonicalString();throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}u.push(m)}return new Rd(u,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ip(n.firestore);return function(o,a,l,c,u,h){const m=o.explicitOrderBy;if(u.length>m.length)throw new Pe(ve.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let b=0;b<u.length;b++){const T=u[b];if(m[b].field.isKeyField()){if("string"!=typeof T)throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!m2(o)&&-1!==T.indexOf("/"))throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const M=o.path.child(mn.fromString(T));if(!Ye.isDocumentKey(M))throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const B=new Ye(M);y.push(Gf(a,B))}else{const M=Ene(l,c,T);y.push(M)}}return new Rd(y,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Sne(n,e,t){if("string"==typeof(t=(0,N.Ku)(t))){if(""===t)throw new Pe(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m2(e)&&-1!==t.indexOf("/"))throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Ye.isDocumentKey(r))throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gf(n,new Ye(r))}if(t instanceof Rr)return Gf(n,t._key);throw new Pe(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mx(t)}.`)}function xne(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dne(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(ve.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class vU{convertValue(e,t="none"){switch(xd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Td(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Br(o.doubleValue));return new Nx(s)}convertGeoPoint(e){return new kx(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nI(e));default:return null}}convertTimestamp(e){const t=Yc(e);return new Vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);lt(Uee(r));const i=new Ad(r.get(1),r.get(3)),s=new Ye(r.popFirst(5));return i.isEqual(t)||bi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Hx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class WLe extends vU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,t)}}class op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iu extends PI{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new OI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Bx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class OI extends iu{data(e={}){return super.data(e)}}class Vd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new op(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new OI(this._firestore,this._userDataWriter,r.key,r,new op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new OI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new op(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new OI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new op(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:qLe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qLe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function Mne(n,e){return n instanceof iu&&e instanceof iu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Vd&&e instanceof Vd&&n._firestore===e._firestore&&aU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bd extends vU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,t)}}function Pne(n,e,t){n=cn(n,Rr);const r=cn(n.firestore,ur),i=Hx(n.converter,e,t);return W_(r,[Fx(ip(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ur.none())])}function kne(n,e,t,...r){n=cn(n,Rr);const i=cn(n.firestore,ur),s=ip(i);let o;return o="string"==typeof(e=(0,N.Ku)(e))||e instanceof ru?mU(s,"updateDoc",n._key,e,t,r):pU(s,"updateDoc",n._key,e),W_(i,[o.toMutation(n._key,Ur.exists(!0))])}function Nne(n,...e){var t,r,i;n=(0,N.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||lU(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(lU(e[o])){const h=e[o];e[o]=null===(t=h.next)||void 0===t?void 0:t.bind(h),e[o+1]=null===(r=h.error)||void 0===r?void 0:r.bind(h),e[o+2]=null===(i=h.complete)||void 0===i?void 0:i.bind(h)}let l,c,u;if(n instanceof Rr)c=cn(n.firestore,ur),u=__(n._key.path),l={next:h=>{e[o]&&e[o](bU(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=cn(n,fs);c=cn(h.firestore,ur),u=h._query;const m=new Bd(c);l={next:y=>{e[o]&&e[o](new Vd(c,m,h,y))},error:e[o+1],complete:e[o+2]},Tne(n._query)}return function(m,y,b,T){const M=new Dx(T),B=new wB(y,M,b);return m.asyncQueue.enqueueAndForget((0,O.A)(function*(){return _B(yield H_(m),B)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget((0,O.A)(function*(){return vB(yield H_(m),B)}))}}(jr(c),u,a,l)}function W_(n,e){return function(r,i){const s=new ts;return r.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function zFe(n,e,t){return MB.apply(this,arguments)}(yield iU(r),i,s)})),s.promise}(jr(n),e)}function bU(n,e,t){const r=t.docs.get(e._key),i=new Bd(n);return new iu(n,i,e._key,r,new op(t.hasPendingWrites,t.fromCache),e.converter)}const dVe={maxAttempts:5};class One{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ip(e)}set(e,t,r){this._verifyNotCommitted();const i=Ud(e,this._firestore),s=Hx(i.converter,t,r),o=Fx(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ud(e,this._firestore);let o;return o="string"==typeof(t=(0,N.Ku)(t))||t instanceof ru?mU(this._dataReader,"WriteBatch.update",s._key,t,r,i):pU(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ud(e,this._firestore);return this._mutations=this._mutations.concat(new w_(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ud(n,e){if((n=(0,N.Ku)(n)).firestore!==e)throw new Pe(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hVe extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ip(t)}get(t){const r=Ud(t,this._firestore),i=new WLe(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return st();const o=s[0];if(o.isFoundDocument())return new PI(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new PI(this._firestore,i,r._key,null,r.converter);throw st()})}set(t,r,i){const s=Ud(t,this._firestore),o=Hx(s.converter,r,i),a=Fx(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Ud(t,this._firestore);let a;return a="string"==typeof(r=(0,N.Ku)(r))||r instanceof ru?mU(this._dataReader,"Transaction.update",o._key,r,i,s):pU(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Ud(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ud(e,this._firestore),r=new Bd(this._firestore);return super.get(e).then(i=>new iu(this._firestore,r,t._key,i._document,new op(!1,!1),t.converter))}}function IU(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Bne(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function Une(){if(!function W1e(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){c_=$n.SDK_VERSION,(0,$n._registerComponent)(new Yo.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ur(new p1e(r.getProvider("auth-internal")),new _1e(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Pe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ad(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(oJ,"4.7.3",e),(0,$n.registerVersion)(oJ,"4.7.3","esm2017")}();class FI{constructor(e){this._delegate=e}static fromBase64String(e){return Une(),new FI(Jl.fromBase64String(e))}static fromUint8Array(e){return Bne(),new FI(Jl.fromUint8Array(e))}toBase64(){return Une(),this._delegate.toBase64()}toUint8Array(){return Bne(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wU(n){return function IVe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class wVe{enableIndexedDbPersistence(e,t){return function wLe(n,e){Jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return _ne(n,j_.provider,{build:r=>new XB(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function CLe(n){return cU.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function TLe(n){if(n._initialized&&!n._terminated)throw new Pe(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ts;return n._queue.enqueueAndForgetEvenWhileRestricted((0,O.A)(function*(){try{yield(t=(0,O.A)(function*(i){if(!ql.D())return Promise.resolve();const s=i+"main";yield ql.delete(s)}),function r(i){return t.apply(this,arguments)})(U2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jne{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ad||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function hne(n,e,t,r={}){var i;const s=(n=cn(n,xI))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=es.MOCK_USER;else{a=(0,N.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Pe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new es(c)}n._authCredentials=new f1e(new aJ(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function SLe(n){return function cLe(n){return n.asyncQueue.enqueue((0,O.A)(function*(){const e=yield ene(n),t=yield tne(n);return e.setNetworkEnabled(!0),function(i){const s=Ge(i);return s.L_.delete(0),SI(s)}(t)}))}(jr(n=cn(n,ur)))}(this._delegate)}disableNetwork(){return function xLe(n){return function uLe(n){return n.asyncQueue.enqueue((0,O.A)(function*(){const e=yield ene(n),t=yield tne(n);return e.setNetworkEnabled(!1),(r=(0,O.A)(function*(s){const o=Ge(s);o.L_.add(0),yield P_(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(jr(n=cn(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ane("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ALe(n){return function(t){const r=new ts;return t.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function GFe(n,e){return FB.apply(this,arguments)}(yield iU(t),r)})),r.promise}(jr(n=cn(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function nVe(n,e){return function pLe(n,e){const t=new Dx(e);return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return i=yield H_(n),s=t,Ge(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return i=yield H_(n),s=t,void Ge(i).Y_.delete(s);var i,s}))}}(jr(n=cn(n,ur)),lU(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new G_(this,fne(this._delegate,e))}catch(t){throw no(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ma(this,Px(this._delegate,e))}catch(t){throw no(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ro(this,function bLe(n,e){if(n=cn(n,xI),oU("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fs(n,null,(r=e,new Zc(mn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw no(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fVe(n,e,t){n=cn(n,ur);const r=Object.assign(Object.assign({},dVe),t);return function(s){if(s.maxAttempts<1)throw new Pe(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new ts;return s.asyncQueue.enqueueAndForget((0,O.A)(function*(){const c=yield function nne(n){return Rx(n).then(e=>e.datastore)}(s);new aLe(s.asyncQueue,c,a,o,l).au()})),l.promise}(jr(n),i=>e(new hVe(n,i)),r)}(this._delegate,t=>e(new zne(this,t)))}batch(){return jr(this._delegate),new Hne(new One(this._delegate,e=>W_(this._delegate,e)))}loadBundle(e){return function DLe(n,e){const t=jr(n=cn(n,ur)),r=new ELe;return function mLe(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?bee().encode(o):o,u=function(u,h){if(u instanceof Uint8Array)return Zte(u,h);if(u instanceof ArrayBuffer)return Zte(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new sLe(u,a);var u}(t,AI(e));n.asyncQueue.enqueueAndForget((0,O.A)(function*(){!function rLe(n,e,t){const r=Ge(n);var i;(i=(0,O.A)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(b,T){const M=Ge(b),B=Ei(T.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",V=>M.Gr.getBundleMetadata(V,T.id)).then(V=>!!V&&V.createTime.compareTo(B)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(b=c).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);l._updateProgress(jte(c));const u=new NFe(c,o.localStore,a.serializer);let h=yield a.Ua();for(;h;){const y=yield u.la(h);y&&l._updateProgress(y),h=yield a.Ua()}const m=yield u.complete();return yield nu(o,m.Ia,void 0),yield function(b,T){const M=Ge(b);return M.persistence.runTransaction("Save bundle","readwrite",B=>M.Gr.saveBundleMetadata(B,T))}(o.localStore,c),l._completeWith(m.progress),Promise.resolve(m.Pa)}catch(c){return Jo("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var b}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield iU(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function RLe(n,e){return function gLe(n,e){return n.asyncQueue.enqueue((0,O.A)(function*(){return function(r,i){const s=Ge(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield z_(n),e)}))}(jr(n=cn(n,ur)),e).then(t=>t?new fs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ro(this,t):null)}}class Wx extends vU{constructor(e){super(),this.firestore=e}convertBytes(e){return new FI(new Jl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ma.forKey(t,this.firestore,null)}}class zne{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Wx(e)}get(e){const t=lp(e);return this._delegate.get(t).then(r=>new LI(this._firestore,new iu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=lp(e);return r?(IU("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=lp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=lp(e);return this._delegate.delete(t),this}}class Hne{constructor(e){this._delegate=e}set(e,t,r){const i=lp(e);return r?(IU("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=lp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=lp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ap{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new OI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new VI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ap.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new ap(e,new Wx(e),t),i.set(t,s)),s}}ap.INSTANCES=new WeakMap;class Ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ma(t,new Rr(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Ma(t,new Rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new G_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new G_(this.firestore,fne(this._delegate,e))}catch(t){throw no(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.Ku)(e))instanceof Rr&&pne(this._delegate,e)}set(e,t){t=IU("DocumentReference.set",t);try{return t?Pne(this._delegate,e,t):Pne(this._delegate,e)}catch(r){throw no(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?kne(this._delegate,e):kne(this._delegate,e,t,...r)}catch(i){throw no(i,"updateDoc()","DocumentReference.update()")}}delete(){return function eVe(n){return W_(cn(n.firestore,ur),[new w_(n._key,Ur.none())])}(this._delegate)}onSnapshot(...e){const t=$ne(e),r=Wne(e,i=>new LI(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Nne(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function QLe(n){n=cn(n,Rr);const e=cn(n.firestore,ur),t=jr(e),r=new Bd(e);return function dLe(n,e){const t=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return(r=(0,O.A)(function*(s,o,a){try{const l=yield function(u,h){const m=Ge(u);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,h))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Pe(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=F_(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield z_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new iu(e,r,n._key,i,new op(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function YLe(n){n=cn(n,Rr);const e=cn(n.firestore,ur);return rne(jr(e),n._key,{source:"server"}).then(t=>bU(e,n,t))}(this._delegate):function KLe(n){n=cn(n,Rr);const e=cn(n.firestore,ur);return rne(jr(e),n._key).then(t=>bU(e,n,t))}(this._delegate),t.then(r=>new LI(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ma(this.firestore,this._delegate.withConverter(e?ap.getInstance(this.firestore,e):null))}}function no(n,e,t){return n.message=n.message.replace(e,t),n}function $ne(n){for(const e of n)if("object"==typeof e&&!wU(e))return e;return{}}function Wne(n,e){var t,r;let i;return i=wU(n[0])?n[0]:wU(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class LI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Mne(this._delegate,e._delegate)}}class VI extends LI{data(e){const t=this._delegate.data(e);return this._delegate._converter||function d1e(n){n||st()}(void 0!==t),t}}class ro{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wx(e)}where(e,t,r){try{return new ro(this.firestore,Ld(this._delegate,function LLe(n,e,t){const r=e,i=Bx("where",n);return NI._create(i,r,t)}(e,t,r)))}catch(i){throw no(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ro(this.firestore,Ld(this._delegate,function VLe(n,e="asc"){const t=e,r=Bx("orderBy",n);return yU._create(r,t)}(e,t)))}catch(r){throw no(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ro(this.firestore,Ld(this._delegate,function BLe(n){return une("limit",n),Ux._create("limit",n,"F")}(e)))}catch(t){throw no(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ro(this.firestore,Ld(this._delegate,function ULe(n){return une("limitToLast",n),Ux._create("limitToLast",n,"L")}(e)))}catch(t){throw no(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ro(this.firestore,Ld(this._delegate,function jLe(...n){return jx._create("startAt",n,!0)}(...e)))}catch(t){throw no(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ro(this.firestore,Ld(this._delegate,function zLe(...n){return jx._create("startAfter",n,!1)}(...e)))}catch(t){throw no(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ro(this.firestore,Ld(this._delegate,function HLe(...n){return zx._create("endBefore",n,!1)}(...e)))}catch(t){throw no(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ro(this.firestore,Ld(this._delegate,function $Le(...n){return zx._create("endAt",n,!0)}(...e)))}catch(t){throw no(t,"endAt()","Query.endAt()")}}isEqual(e){return aU(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ZLe(n){n=cn(n,fs);const e=cn(n.firestore,ur),t=jr(e),r=new Bd(e);return function hLe(n,e){const t=new ts;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return(r=(0,O.A)(function*(s,o,a){try{const l=yield Ex(s,o,!0),c=new $te(o,l.Ts),u=c.ma(l.documents),h=c.applyChanges(u,!1);a.resolve(h.snapshot)}catch(l){const c=F_(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield z_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Vd(e,r,n,i))}(this._delegate):"server"===e?.source?function JLe(n){n=cn(n,fs);const e=cn(n.firestore,ur),t=jr(e),r=new Bd(e);return ine(t,n._query,{source:"server"}).then(i=>new Vd(e,r,n,i))}(this._delegate):function XLe(n){n=cn(n,fs);const e=cn(n.firestore,ur),t=jr(e),r=new Bd(e);return Tne(n._query),ine(t,n._query).then(i=>new Vd(e,r,n,i))}(this._delegate),t.then(r=>new CU(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$ne(e),r=Wne(e,i=>new CU(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Nne(this._delegate,t,r)}withConverter(e){return new ro(this.firestore,this._delegate.withConverter(e?ap.getInstance(this.firestore,e):null))}}class TVe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new VI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CU{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ro(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new VI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TVe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new VI(this._firestore,r))})}isEqual(e){return Mne(this._delegate,e._delegate)}}class G_ extends ro{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ma(this.firestore,e):null}doc(e){try{return new Ma(this.firestore,void 0===e?Px(this._delegate):Px(this._delegate,e))}catch(t){throw no(t,"doc()","CollectionReference.doc()")}}add(e){return function tVe(n,e){const t=cn(n.firestore,ur),r=Px(n),i=Hx(n.converter,e);return W_(t,[Fx(ip(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ma(this.firestore,t))}isEqual(e){return pne(this._delegate,e._delegate)}withConverter(e){return new G_(this.firestore,this._delegate.withConverter(e?ap.getInstance(this.firestore,e):null))}}function lp(n){return cn(n,Rr)}class TU{constructor(...e){this._delegate=new ru(...e)}static documentId(){return new TU(xr.keyField().canonicalString())}isEqual(e){return(e=(0,N.Ku)(e))instanceof ru&&this._delegate._internalPath.isEqual(e._internalPath)}}class cp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mVe(){return new uU("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cp(e)}static delete(){const e=function pVe(){return new RI("deleteField")}();return e._methodName="FieldValue.delete",new cp(e)}static arrayUnion(...e){const t=function gVe(...n){return new dU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cp(t)}static arrayRemove(...e){const t=function _Ve(...n){return new hU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cp(t)}static increment(e){const t=function yVe(n){return new fU("increment",n)}(e);return t._methodName="FieldValue.increment",new cp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const AVe={Firestore:jne,GeoPoint:kx,Timestamp:Vr,Blob:FI,Transaction:zne,WriteBatch:Hne,DocumentReference:Ma,DocumentSnapshot:LI,Query:ro,QueryDocumentSnapshot:VI,QuerySnapshot:CU,CollectionReference:G_,FieldPath:TU,FieldValue:cp,setLogLevel:function CVe(n){!function u1e(n){Id.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Gne(n,e){return function DVe(n,e=_f){return new Vt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function AU(n,e){return Gne(n,e).pipe(Le(t=>({payload:t,type:"query"})))}!function xVe(n){(function SVe(n,e){n.INTERNAL.registerComponent(new Yo.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},AVe)))})(n,(e,t)=>new jne(e,t,new wVe)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Gl.A);class qne{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Xne(r,t);return new Yne(i,s,this.afs)}snapshotChanges(){return function RVe(n,e){return Gne(n,e).pipe(nl(void 0),JV(),Le(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return this.snapshotChanges().pipe(Le(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return Wn(this.ref.get(e)).pipe(Ui)}}function Gx(n,e){return AU(n,e).pipe(nl(void 0),JV(),Le(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(h=>h.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function Kne(n,e,t){return Gx(n,t).pipe(gg((r,i)=>function MVe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PVe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return SU(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return SU(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SU(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),AA(),Le(r=>r.map(i=>({type:i.type,payload:i}))))}function SU(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Qne(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Yne{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Gx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Le(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(nl(void 0),JV(),Qr(([r,i])=>i.length>0||!r),Le(([,r])=>r),Ui)}auditTrail(e){return this.stateChanges(e).pipe(gg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Qne(e);return Kne(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return AU(this.query,this.afs.schedulers.outsideAngular).pipe(Le(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ui)}get(e){return Wn(this.query.get(e)).pipe(Ui)}add(e){return this.ref.add(e)}doc(e){return new qne(this.ref.doc(e),this.afs)}}class kVe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Gx(this.query,this.afs.schedulers.outsideAngular).pipe(Le(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qr(t=>t.length>0),Ui):Gx(this.query,this.afs.schedulers.outsideAngular).pipe(Ui)}auditTrail(e){return this.stateChanges(e).pipe(gg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Qne(e);return Kne(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return AU(this.query,this.afs.schedulers.outsideAngular).pipe(Le(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ui)}get(e){return Wn(this.query.get(e)).pipe(Ui)}}const NVe=new ye("angularfire2.enableFirestorePersistence"),OVe=new ye("angularfire2.firestore.persistenceSettings"),FVe=new ye("angularfire2.firestore.settings"),LVe=new ye("angularfire2.firestore.use-emulator");function Xne(n,e=t=>t){return{query:e(n),ref:n}}let VVe=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,u,h,m,y,b,T,M,B,V){this.schedulers=l;const Q=HS(t,a,r),be=u;h&&ZV(Q,a,m,b,T,M,y,B),[this.firestore,this.persistenceEnabled$]=HV(`${Q.name}.firestore`,"AngularFirestore",Q.name,()=>{const Be=a.runOutsideAngular(()=>Q.firestore());if(s&&Be.settings(s),be&&Be.useEmulator(...be),i&&!vT(o)){const je=()=>{try{return Wn(Be.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(H){return typeof console<"u"&&console.warn(H),Ke(!1)}};return[Be,a.runOutsideAngular(je)]}return[Be,Ke(!1)]},[s,be,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Xne(i,r),a=this.schedulers.ngZone.run(()=>s);return new Yne(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new kVe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qne(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Re(KE),Re(QE,8),Re(NVe,8),Re(FVe,8),Re(Gs),Re(_t),Re(Vg),Re(OVe,8),Re(LVe,8),Re(YE,8),Re(GV,8),Re(qV,8),Re(KV,8),Re(QV,8),Re(YV,8),Re(XV,8),Re(NA,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Zne=(()=>{class n{constructor(){this.storesSubject=new F([]),this.stores$=this.storesSubject.asObservable()}setStores(t){this.storesSubject.next(t)}getStores(){return this.storesSubject.getValue()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const BVe=["determinateSpinner"];function UVe(n,e){if(1&n&&(jo(),Ie(0,"svg",11),Xt(1,"circle",12),Te()),2&n){const t=We();er("viewBox",t._viewBox()),Ae(),Wv("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),er("r",t._circleRadius())}}const jVe=new ye("mat-progress-spinner-default-options",{providedIn:"root",factory:function zVe(){return{diameter:Jne}}}),Jne=100;let $Ve=(()=>{class n{_elementRef=k(jn);_noopAnimations;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";_determinateCircle;constructor(){const t=k(Tl,{optional:!0}),r=k(jVe);this._noopAnimations="NoopAnimations"===t&&!!r&&!r._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}_value=0;get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}_diameter=Jne;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,i){if(1&r&&zu(BVe,5),2&r){let s;Qs(s=Ys())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,i){2&r&&(er("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),Xh("mat-"+i.color),Wv("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),ri("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Uk],diameter:[2,"diameter","diameter",Uk],strokeWidth:[2,"strokeWidth","strokeWidth",Uk]},exportAs:["matProgressSpinner"],standalone:!0,features:[xl,ii],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,i){if(1&r&&(Ct(0,UVe,2,8,"ng-template",null,0,VG),Ie(2,"div",2,1),jo(),Ie(4,"svg",3),Xt(5,"circle",4),Te()(),kh(),Ie(6,"div",5)(7,"div",6)(8,"div",7),Kv(9,8),Te(),Ie(10,"div",9),Kv(11,8),Te(),Ie(12,"div",10),Kv(13,8),Te()()()),2&r){const s=VC(1);Ae(4),er("viewBox",i._viewBox()),Ae(),Wv("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),er("r",i._circleRadius()),Ae(4),ze("ngTemplateOutlet",s),Ae(2),ze("ngTemplateOutlet",s),Ae(2),ze("ngTemplateOutlet",s)}},dependencies:[T7],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return n})(),ere=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr]})}return n})();const XVe=new ye("MatFormField");let BI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr,hK,lr]})}return n})();function tre(n,e){return e?t=>Ab(e.pipe(Yi(1),function ZVe(){return me((n,e)=>{n.subscribe(Ne(e,gs))})}()),t.pipe(tre(n))):Qi((t,r)=>n(t,r).pipe(Yi(1),G8(t)))}const e2e=["panel"],t2e=["*"];function n2e(n,e){if(1&n){const t=xs();Ie(0,"div",1,0),jt("@panelAnimation.done",function(i){return xn(t),Dn(We()._animationDone.next(i))}),Ki(2),Te()}if(2&n){const t=e.id,r=We();Xh(r._classList),ri("mat-mdc-autocomplete-visible",r.showPanel)("mat-mdc-autocomplete-hidden",!r.showPanel)("mat-primary","primary"===r._color)("mat-accent","accent"===r._color)("mat-warn","warn"===r._color),ze("id",r.id)("@panelAnimation",r.isOpen?"visible":"hidden"),er("aria-label",r.ariaLabel||null)("aria-labelledby",r._getPanelAriaLabelledby(t))}}const r2e=wf("panelAnimation",[Cf("void, hidden",Si({opacity:0,transform:"scaleY(0.8)"})),al(":enter, hidden => visible",[X1([ol("0.03s linear",Si({opacity:1})),ol("0.12s cubic-bezier(0, 0, 0.2, 1)",Si({transform:"scaleY(1)"}))])]),al(":leave, visible => hidden",[ol("0.075s linear",Si({opacity:0}))])]);class i2e{source;option;constructor(e,t){this.source=e,this.option=t}}const nre=new ye("mat-autocomplete-default-options",{providedIn:"root",factory:function s2e(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let o2e=(()=>{class n{_changeDetectorRef=k(Ea);_elementRef=k(jn);_defaults=k(nre);_activeOptionChanges=xt.EMPTY;_animationDone=new dn;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(t){this._color=t,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new dn;opened=new dn;closed=new dn;optionActivated=new dn;set classList(t){this._classList=t,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}id=k(Ef).getId("mat-autocomplete-");inertGroups;constructor(){const t=k(Rs);this.inertGroups=t?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new hTe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const r=new i2e(this,t);this.optionSelected.emit(r)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_skipPredicate(){return!1}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(r,i,s){if(1&r&&(ju(s,JK,5),ju(s,XK,5)),2&r){let o;Qs(o=Ys())&&(i.options=o),Qs(o=Ys())&&(i.optionGroups=o)}},viewQuery:function(r,i){if(1&r&&(zu(ma,7),zu(e2e,5)),2&r){let s;Qs(s=Ys())&&(i.template=s.first),Qs(s=Ys())&&(i.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",si],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",si],requireSelection:[2,"requireSelection","requireSelection",si],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",si],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",si]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[sr([{provide:YK,useExisting:n}]),xl,ii],ngContentSelectors:t2e,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(r,i){1&r&&(Ya(),Ct(0,n2e,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[r2e]},changeDetection:0})}return n})();const a2e={provide:el,useExisting:Qn(()=>ire),multi:!0},rre=new ye("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.reposition()}}),c2e={provide:rre,deps:[cs],useFactory:function l2e(n){return()=>n.scrollStrategies.reposition()}};let ire=(()=>{class n{_injector=k(Rn);_element=k(jn);_overlay=k(cs);_viewContainerRef=k(Co);_zone=k(_t);_changeDetectorRef=k(Ea);_dir=k(Mg,{optional:!0});_formField=k(XVe,{optional:!0,host:!0});_document=k(pn);_viewportRuler=k(S1);_scrollStrategy=k(rre);_renderer=k(qa);_defaults=k(nre,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new E;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=xt.EMPTY;_breakpointObserver=k(pK);_handsetLandscapeSubscription=xt.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new E;_windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&L1(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return sl(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Qr(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Qr(()=>this._overlayAttached)):Ke()).pipe(Le(t=>t instanceof ZK?t:null))}optionSelections=Sb(()=>{const t=this.autocomplete?this.autocomplete.options:null;return t?t.changes.pipe(nl(t),Kt(()=>sl(...t.map(r=>r.onSelectionChange)))):this._initialized.pipe(Kt(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Vt(t=>{const r=s=>{const o=Vl(s),a=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,l=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&o!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!a||!a.contains(o))&&(!l||!l.contains(o))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(o)&&t.next(s)},i=[this._renderer.listen("document","click",r),this._renderer.listen("document","auxclick",r),this._renderer.listen("document","touchend",r)];return()=>{i.forEach(s=>s())}})}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const r=t.keyCode,i=nd(t);if(27===r&&!i&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===r&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===r||40===r;9===r||o&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let r=t.target,i=r.value;if("number"===r.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),i){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&i!==this._getDisplayValue(s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===t.target){const s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const t=new Vt(i=>{Dc(()=>{i.next()},{injector:this._injector})}),r=this.autocomplete.options.changes.pipe(oi(()=>this._positionStrategy.reapplyLastPosition()),function JVe(n,e=_f){const t=eK(n,e);return tre(()=>t)}(0));return sl(t,r).pipe(Kt(()=>this._zone.run(()=>{const i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Yi(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(t){const r=this.autocomplete;return r&&r.displayWith?r.displayWith(t):t}_assignOptionValue(t){const r=this._getDisplayValue(t);null==t&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(r??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const r=this.autocomplete,i=t?t.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),r._emitSelectEvent(i),this._element.nativeElement.focus()):r.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),r._animationDone?r._animationDone.pipe(Yi(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,r){this.autocomplete?.options?.forEach(i=>{i!==t&&i.selected&&i.deselect(r)})}_openPanelInternal(t=this._element.nativeElement.value){this._attachOverlay(t),this._floatLabel(),this._trackedModal&&_K(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(t){let r=this._overlayRef;r?(this._positionStrategy.setOrigin(this._getConnectedElement()),r.updateSize({width:this._getPanelWidth()})):(this._portal=new IA(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),r=this._overlay.create(this._getOverlayConfig()),this._overlayRef=r,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&r&&r.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe("(max-width: 959.98px) and (orientation: landscape)").subscribe(s=>{s.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),r&&!r.hasAttached()&&(r.attach(this._portal),this._valueOnAttach=t,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=t=>{(27===t.keyCode&&!nd(t)||38===t.keyCode&&nd(t,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),t.stopPropagation(),t.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new RA({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const r=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}];let o;o="above"===this.position?s:"below"===this.position?r:[...r,...s],t.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let r=-1;for(let i=0;i<t.options.length;i++)if(!t.options.get(i).disabled){r=i;break}t._keyManager.setActiveItem(r)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_scrollToOption(t){const r=this.autocomplete,i=function yAe(n,e,t){if(t.length){let r=e.toArray(),i=t.toArray(),s=0;for(let o=0;o<n+1;o++)r[o].group&&r[o].group===i[s]&&s++;return s}return 0}(t,r.options,r.optionGroups);if(0===t&&1===i)r._setScrollTop(0);else if(r.panel){const s=r.options.toArray()[t];if(s){const o=s._getHostElement(),a=function vAe(n,e,t,r){return n<t?n:n+e>t+r?Math.max(0,n-r+e):t}(o.offsetTop,o.offsetHeight,r._getScrollTop(),r.panel.nativeElement.offsetHeight);r._setScrollTop(a)}}}_trackedModal=null;_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const r=this.autocomplete.id;this._trackedModal&&L1(this._trackedModal,"aria-owns",r),_K(t,"aria-owns",r),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(L1(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(r,i){1&r&&jt("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(o){return i._handleInput(o)})("keydown",function(o){return i._handleKeydown(o)})("click",function(){return i._handleClick()}),2&r&&er("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",si]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[sr([a2e]),xl,as]})}return n})(),u2e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[c2e],imports:[Qb,Ng,lr,qb,Ng,lr]})}return n})(),d2e=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||n)(De(Og),De(nO))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-image-dialog"]],decls:4,vars:1,consts:[[1,"dialog-container"],[1,"dialog-image",3,"src"],["mat-icon-button","",1,"close-button",3,"click"]],template:function(r,i){1&r&&(Ie(0,"div",0),Xt(1,"img",1),Ie(2,"button",2),jt("click",function(){return i.closeDialog()}),rt(3," \u2716 "),Te()()),2&r&&(Ae(),ze("src",i.data.image,Ss))},styles:['@charset "UTF-8";.dialog-container[_ngcontent-%COMP%]{position:relative;padding:20px;display:flex;justify-content:center;align-items:center;background:transparent}.dialog-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;border-radius:8px}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#f4efe6;color:#a18249;border:none;cursor:pointer;font-size:18px;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px #0003;transition:background .3s ease,transform .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:#ede3d4;transform:scale(1.1)}']})}}return n})();function su(n){return Array.isArray?Array.isArray(n):"[object Array]"===are(n)}function ec(n){return"string"==typeof n}function sre(n){return"number"==typeof n}function ore(n){return"object"==typeof n}function na(n){return null!=n}function xU(n){return!n.trim().length}function are(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const b2e=n=>`Missing ${n} property in key`,E2e=n=>`Property 'weight' in key '${n}' must be a positive integer`,lre=Object.prototype.hasOwnProperty;class I2e{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=cre(r);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function cre(n){let e=null,t=null,r=null,i=1,s=null;if(ec(n)||su(n))r=n,e=ure(n),t=DU(n);else{if(!lre.call(n,"name"))throw new Error(b2e("name"));const o=n.name;if(r=o,lre.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(E2e(o));e=ure(o),t=DU(o),s=n.getFn}return{path:e,id:t,weight:i,src:r,getFn:s}}function ure(n){return su(n)?n:n.split(".")}function DU(n){return su(n)?n.join("."):n}var Lt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function w2e(n,e){let t=[],r=!1;const i=(s,o,a)=>{if(na(s))if(o[a]){const c=s[o[a]];if(!na(c))return;if(a===o.length-1&&(ec(c)||sre(c)||function m2e(n){return!0===n||!1===n||function g2e(n){return ore(n)&&null!==n}(n)&&"[object Boolean]"==are(n)}(c)))t.push(function p2e(n){return null==n?"":function f2e(n){if("string"==typeof n)return n;let e=n+"";return"0"==e&&1/n==-1/0?"-0":e}(n)}(c));else if(su(c)){r=!0;for(let u=0,h=c.length;u<h;u+=1)i(c[u],o,a+1)}else o.length&&i(c,o,a+1)}else t.push(s)};return i(n,ec(e)?e.split("."):e,0),r?t:t[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const C2e=/[^ ]+/g;class RU{constructor({getFn:e=Lt.getFn,fieldNormWeight:t=Lt.fieldNormWeight}={}){this.norm=function T2e(n=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(C2e).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*n),a=parseFloat(Math.round(o*r)/r);return t.set(s,a),a},clear(){t.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ec(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();ec(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!na(e)||xU(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(na(o))if(su(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(na(u))if(ec(u)&&!xU(u)){let h={v:u,i:c,n:this.norm.get(u)};a.push(h)}else su(u)&&u.forEach((h,m)=>{l.push({nestedArrIndex:m,value:h})})}r.$[s]=a}else if(ec(o)&&!xU(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function dre(n,e,{getFn:t=Lt.getFn,fieldNormWeight:r=Lt.fieldNormWeight}={}){const i=new RU({getFn:t,fieldNormWeight:r});return i.setKeys(n.map(cre)),i.setSources(e),i.create(),i}function A2e(n,{getFn:e=Lt.getFn,fieldNormWeight:t=Lt.fieldNormWeight}={}){const{keys:r,records:i}=n,s=new RU({getFn:e,fieldNormWeight:t});return s.setKeys(r),s.setIndexRecords(i),s}function qx(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=Lt.distance,ignoreLocation:s=Lt.ignoreLocation}={}){const o=e/n.length;if(s)return o;const a=Math.abs(r-t);return i?o+a/i:a?1:o}function D2e(n){let e={};for(let t=0,r=n.length;t<r;t+=1){const i=n.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}class hre{constructor(e,{location:t=Lt.location,threshold:r=Lt.threshold,distance:i=Lt.distance,includeMatches:s=Lt.includeMatches,findAllMatches:o=Lt.findAllMatches,minMatchCharLength:a=Lt.minMatchCharLength,isCaseSensitive:l=Lt.isCaseSensitive,ignoreLocation:c=Lt.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(m,y)=>{this.chunks.push({pattern:m,alphabet:D2e(m),startIndex:y})},h=this.pattern.length;if(h>32){let m=0;const y=h%32,b=h-y;for(;m<b;)u(this.pattern.substr(m,32),m),m+=32;if(y){const T=h-32;u(this.pattern.substr(T),T)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let b={isMatch:!0,score:0};return r&&(b.indices=[[0,e.length-1]]),b}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],h=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:T,startIndex:M})=>{const{isMatch:B,score:V,indices:Q}=function x2e(n,e,t,{location:r=Lt.location,distance:i=Lt.distance,threshold:s=Lt.threshold,findAllMatches:o=Lt.findAllMatches,minMatchCharLength:a=Lt.minMatchCharLength,includeMatches:l=Lt.includeMatches,ignoreLocation:c=Lt.ignoreLocation}={}){if(e.length>32)throw new Error("Pattern length exceeds max of 32.");const u=e.length,h=n.length,m=Math.max(0,Math.min(r,h));let y=s,b=m;const T=a>1||l,M=T?Array(h):[];let B;for(;(B=n.indexOf(e,b))>-1;){let H=qx(e,{currentLocation:B,expectedLocation:m,distance:i,ignoreLocation:c});if(y=Math.min(H,y),b=B+u,T){let L=0;for(;L<u;)M[B+L]=1,L+=1}}b=-1;let V=[],Q=1,be=u+h;const Be=1<<u-1;for(let H=0;H<u;H+=1){let L=0,W=be;for(;L<W;)qx(e,{errors:H,currentLocation:m+W,expectedLocation:m,distance:i,ignoreLocation:c})<=y?L=W:be=W,W=Math.floor((be-L)/2+L);be=W;let J=Math.max(1,m-W+1),ne=o?h:Math.min(m+W,h)+u,re=Array(ne+2);re[ne+1]=(1<<H)-1;for(let Hr=ne;Hr>=J;Hr-=1){let aa=Hr-1,ot=t[n.charAt(aa)];if(T&&(M[aa]=+!!ot),re[Hr]=(re[Hr+1]<<1|1)&ot,H&&(re[Hr]|=(V[Hr+1]|V[Hr])<<1|1|V[Hr+1]),re[Hr]&Be&&(Q=qx(e,{errors:H,currentLocation:aa,expectedLocation:m,distance:i,ignoreLocation:c}),Q<=y)){if(y=Q,b=aa,b<=m)break;J=Math.max(1,2*m-b)}}if(qx(e,{errors:H+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:c})>y)break;V=re}const je={isMatch:b>=0,score:Math.max(.001,Q)};if(T){const H=function S2e(n=[],e=Lt.minMatchCharLength){let t=[],r=-1,i=-1,s=0;for(let o=n.length;s<o;s+=1){let a=n[s];a&&-1===r?r=s:!a&&-1!==r&&(i=s-1,i-r+1>=e&&t.push([r,i]),r=-1)}return n[s-1]&&s-r>=e&&t.push([r,s-1]),t}(M,a);H.length?l&&(je.indices=H):je.isMatch=!1}return je}(e,b,T,{location:i+M,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});B&&(m=!0),h+=V,B&&Q&&(u=[...u,...Q])});let y={isMatch:m,score:m?h/this.chunks.length:1};return m&&r&&(y.indices=u),y}}class jd{constructor(e){this.pattern=e}static isMultiMatch(e){return fre(e,this.multiRegex)}static isSingleMatch(e){return fre(e,this.singleRegex)}search(){}}function fre(n,e){const t=n.match(e);return t?t[1]:null}class pre extends jd{constructor(e,{location:t=Lt.location,threshold:r=Lt.threshold,distance:i=Lt.distance,includeMatches:s=Lt.includeMatches,findAllMatches:o=Lt.findAllMatches,minMatchCharLength:a=Lt.minMatchCharLength,isCaseSensitive:l=Lt.isCaseSensitive,ignoreLocation:c=Lt.ignoreLocation}={}){super(e),this._bitapSearch=new hre(e,{location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class mre extends jd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r,t=0;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+s,i.push([r,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const MU=[class R2e extends jd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},mre,class P2e extends jd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class k2e extends jd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class O2e extends jd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class N2e extends jd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class M2e extends jd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=-1===e.indexOf(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},pre],gre=MU.length,F2e=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,B2e=new Set([pre.type,mre.type]),PU=[];function kU(n,e){for(let t=0,r=PU.length;t<r;t+=1){let i=PU[t];if(i.condition(n,e))return new i(n,e)}return new hre(n,e)}const Kx_AND="$and",OU=n=>!(!n.$and&&!n.$or),_re=n=>({[Kx_AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function yre(n,e,{auto:t=!0}={}){const r=i=>{let s=Object.keys(i);const o=(n=>!!n.$path)(i);if(!o&&s.length>1&&!OU(i))return r(_re(i));if((n=>!su(n)&&ore(n)&&!OU(n))(i)){const l=o?i.$path:s[0],c=o?i.$val:i[l];if(!ec(c))throw new Error((n=>`Invalid value for key ${n}`)(l));const u={keyId:DU(l),pattern:c};return t&&(u.searcher=kU(c,e)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=i[l];su(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return OU(n)||(n=_re(n)),r(n)}function W2e(n,e){const t=n.matches;e.matches=[],na(t)&&t.forEach(r=>{if(!na(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function G2e(n,e){e.score=n.score}let FU=(()=>{class n{constructor(t,r={},i){this.options={...Lt,...r},this._keyStore=new I2e(this.options.keys),this.setCollection(t,i)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof RU))throw new Error("Incorrect 'index' type");this._myIndex=r||dre(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){na(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let i=0,s=this._docs.length;i<s;i+=1){const o=this._docs[i];t(o,i)&&(this.removeAt(i),i-=1,s-=1,r.push(o))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options;let c=ec(t)?ec(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function $2e(n,{ignoreFieldNorm:e=Lt.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=r})}(c,{ignoreFieldNorm:l}),o&&c.sort(a),sre(r)&&r>-1&&(c=c.slice(0,r)),function q2e(n,e,{includeMatches:t=Lt.includeMatches,includeScore:r=Lt.includeScore}={}){const i=[];return t&&i.push(W2e),r&&i.push(G2e),n.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}(c,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(t){const r=kU(t,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:o,i:a,n:l})=>{if(!na(o))return;const{isMatch:c,score:u,indices:h}=r.searchIn(o);c&&s.push({item:o,idx:a,matches:[{score:u,value:o,norm:l,indices:h}]})}),s}_searchLogical(t){const r=yre(t,this.options),i=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:y}=l,b=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:y});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}const h=[];for(let m=0,y=l.children.length;m<y;m+=1){const T=i(l.children[m],c,u);if(T.length)h.push(...T);else if("$and"===l.operator)return[]}return h},o={},a=[];return this._myIndex.records.forEach(({$:l,i:c})=>{if(na(l)){let u=i(r,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},a.push(o[c])),u.forEach(({matches:h})=>{o[c].matches.push(...h)}))}}),a}_searchObjectList(t){const r=kU(t,this.options),{keys:i,records:s}=this._myIndex,o=[];return s.forEach(({$:a,i:l})=>{if(!na(a))return;let c=[];i.forEach((u,h)=>{c.push(...this._findMatches({key:u,value:a[h],searcher:r}))}),c.length&&o.push({idx:l,item:a,matches:c})}),o}_findMatches({key:t,value:r,searcher:i}){if(!na(r))return[];let s=[];if(su(r))r.forEach(({v:o,i:a,n:l})=>{if(!na(o))return;const{isMatch:c,score:u,indices:h}=i.searchIn(o);c&&s.push({score:u,key:t,value:o,idx:a,norm:l,indices:h})});else{const{v:o,n:a}=r,{isMatch:l,score:c,indices:u}=i.searchIn(o);l&&s.push({score:c,key:t,value:o,norm:a,indices:u})}return s}}return n.version="7.0.0",n.createIndex=dre,n.parseIndex=A2e,n.config=Lt,n})();FU.parseQuery=yre,function j2e(...n){PU.push(...n)}(class U2e{constructor(e,{isCaseSensitive:t=Lt.isCaseSensitive,includeMatches:r=Lt.includeMatches,minMatchCharLength:i=Lt.minMatchCharLength,ignoreLocation:s=Lt.ignoreLocation,findAllMatches:o=Lt.findAllMatches,location:a=Lt.location,threshold:l=Lt.threshold,distance:c=Lt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function V2e(n,e={}){return n.split("|").map(t=>{let r=t.trim().split(F2e).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,c=-1;for(;!l&&++c<gre;){const u=MU[c];let h=u.isMultiMatch(a);h&&(i.push(new u(h,e)),l=!0)}if(!l)for(c=-1;++c<gre;){const u=MU[c];let h=u.isSingleMatch(a);if(h){i.push(new u(h,e));break}}}return i})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const u=t[l];o.length=0,s=0;for(let h=0,m=u.length;h<m;h+=1){const y=u[h],{isMatch:b,indices:T,score:M}=y.search(e);if(!b){a=0,s=0,o.length=0;break}s+=1,a+=M,r&&(B2e.has(y.constructor.type)?o=[...o,...T]:o.push(T))}if(s){let h={isMatch:!0,score:a/s};return r&&(h.indices=o),h}}return{isMatch:!1,score:1}}});let vre=(()=>{class n{transform(t,r=0){const i=parseFloat(t);return isNaN(i)?t:-1===r?`${i.toFixed(0)} \u5143`:i<1e3?`${i.toFixed(r)} \u516c\u5c3a`:`${(i/1e3).toFixed(r)} \u516c\u91cc`}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"round",type:n,pure:!0})}}return n})(),K2e=(()=>{class n{transform(t){return null==t||""===t?"\u66ab\u7121\u8cc7\u8a0a":t.toString()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ki({name:"emptyInfo",type:n,pure:!0})}}return n})();function Q2e(n,e){1&n&&(Ie(0,"div",17),rt(1," \u65b0\u54c1 "),Te())}function Y2e(n,e){1&n&&(Ie(0,"div",18),rt(1," \u7279\u50f9\u4e2d "),Te())}function X2e(n,e){if(1&n&&(Ie(0,"div")(1,"div",19)(2,"span",20),rt(3,"\u50f9\u683c(NT$): "),Te(),Ie(4,"span",21),rt(5),Te(),Ie(6,"span",22),rt(7,"\u2192"),Te(),Ie(8,"span",23),rt(9),qo(10,"round"),Te()(),Ie(11,"p",24),rt(12),qo(13,"emptyInfo"),Te(),Ie(14,"p",24),rt(15),qo(16,"emptyInfo"),Te()()),2&n){const t=We().$implicit,r=We(5);Ae(5),va(r.getFoodDetail711(t).originalPrice),Ae(4),En(" ",HC(10,4,r.getFoodDetail711(t).discountedPrice,-1)," "),Ae(3),En("\u5546\u54c1\u63cf\u8ff0: ",Hu(13,7,r.getFoodDetail711(t).content),""),Ae(3),En("\u5361\u8def\u91cc(kcal): ",Hu(16,9,r.getFoodDetail711(t).kcal),"")}}function Z2e(n,e){1&n&&(Ie(0,"div")(1,"div",19)(2,"p",24),rt(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),Te()()())}function J2e(n,e){if(1&n){const t=xs();Ie(0,"li")(1,"div",8)(2,"img",9),jt("click",function(){const i=xn(t).$implicit,s=We(5);return Dn(s.openImageDialog(s.getFoodDetail711(i).image))}),Te(),Ie(3,"div",10)(4,"div",11)(5,"h3",12),rt(6),Te(),Ie(7,"div",13),rt(8),Te()(),Ie(9,"div",14),Ct(10,Q2e,2,0,"div",15)(11,Y2e,2,0,"div",16),Te(),Ct(12,X2e,17,11,"div",0)(13,Z2e,4,0,"div",0),Te()()()}if(2&n){const t=e.$implicit,r=We(5);Ae(2),ze("src",r.getFoodDetail711(t).image,Ss)("alt",r.getFoodDetail711(t).name),Ae(4),En(" ",t.ItemName," "),Ae(2),En(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),Ae(2),ze("ngIf","True"===r.getFoodDetail711(t).new),Ae(),ze("ngIf","True"===r.getFoodDetail711(t).special_sale),Ae(),ze("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetail711(t).image),Ae(),ze("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetail711(t).image)}}function eBe(n,e){if(1&n&&(Ie(0,"div",4)(1,"div",5)(2,"h3",6),rt(3),Te()(),Ie(4,"ul",7),Ct(5,J2e,14,8,"li",2),Te()()),2&n){const t=We().$implicit,r=We(3);Ae(3),En(" ",t.Name," "),Ae(2),ze("ngForOf",r.itemsBySubCategory[t.Name])}}function tBe(n,e){if(1&n&&(_a(0),Ct(1,eBe,6,2,"div",3),ya()),2&n){const t=e.$implicit,r=We(3);Ae(),ze("ngIf",r.itemsBySubCategory[t.Name]&&r.itemsBySubCategory[t.Name].length>0)}}function nBe(n,e){if(1&n&&(_a(0),Ie(1,"h2",1),rt(2),Te(),Ct(3,tBe,2,1,"ng-container",2),ya()),2&n){const t=We(2);Ae(2),va(t.category.Name),Ae(),ze("ngForOf",t.subCategories)}}function rBe(n,e){if(1&n&&(Ie(0,"div")(1,"p",24),rt(2),qo(3,"emptyInfo"),Te(),Ie(4,"p",24),rt(5),qo(6,"emptyInfo"),Te()()),2&n){const t=We().$implicit,r=We(5);Ae(2),En("\u5546\u54c1\u63cf\u8ff0: ",Hu(3,2,r.getFoodDetailFamilyMart(t).Description),""),Ae(3),En("\u5361\u8def\u91cc(kcal): ",Hu(6,4,r.getFoodDetailFamilyMart(t).Calories),"")}}function iBe(n,e){1&n&&(Ie(0,"div")(1,"div",19)(2,"p",24),rt(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),Te()()())}function sBe(n,e){if(1&n){const t=xs();Ie(0,"li")(1,"div",26)(2,"img",9),jt("click",function(){const i=xn(t).$implicit,s=We(5);return Dn(s.openImageDialog(s.getFoodDetailFamilyMart(i).picture_url))}),Te(),Ie(3,"div",10)(4,"div",11)(5,"h3",12),rt(6),Te(),Ie(7,"div",27),rt(8),Te()(),Ct(9,rBe,7,6,"div",0)(10,iBe,4,0,"div",0),Te()()()}if(2&n){const t=e.$implicit,r=We(5);Ae(2),ze("src",r.getFoodDetailFamilyMart(t).picture_url,Ss)("alt",r.getFoodDetailFamilyMart(t).title),Ae(4),En(" ",t.ItemName," "),Ae(2),En(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),Ae(),ze("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetailFamilyMart(t).picture_url),Ae(),ze("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetailFamilyMart(t).picture_url)}}function oBe(n,e){if(1&n&&(Ie(0,"div",4)(1,"div",5)(2,"h3",25),rt(3),Te()(),Ie(4,"ul",7),Ct(5,sBe,11,6,"li",2),Te()()),2&n){const t=We().$implicit,r=We(3);Ae(3),En(" ",t.name," "),Ae(2),ze("ngForOf",r.itemsBySubCategory[t.name])}}function aBe(n,e){if(1&n&&(_a(0),Ct(1,oBe,6,2,"div",3),ya()),2&n){const t=e.$implicit,r=We(3);Ae(),ze("ngIf",r.itemsBySubCategory[t.name]&&r.itemsBySubCategory[t.name].length>0)}}function lBe(n,e){if(1&n&&(_a(0),Ie(1,"h2",1),rt(2),Te(),Ct(3,aBe,2,1,"ng-container",2),ya()),2&n){const t=We(2);Ae(2),va(t.category.name),Ae(),ze("ngForOf",t.subCategories)}}function cBe(n,e){if(1&n&&(Ie(0,"div"),Ct(1,nBe,4,2,"ng-container",0)(2,lBe,4,2,"ng-container",0),Te()),2&n){const t=We();Ae(),ze("ngIf",t.category.Name),Ae(),ze("ngIf",t.category.name)}}let uBe=(()=>{class n{constructor(t,r){this.sevenElevenRequestService=t,this.dialog=r,this.subCategories=[],this.subCategoriesName="",this.itemsBySubCategory={}}ngOnInit(){}ngOnChanges(t){(t.category||t.store)&&this.loadSubCategories()}loadSubCategories(){if(this.store&&this.category)if(this.store.StoreName)this.subCategories=this.category.Children,this.subCategoriesName=this.category.Name,this.loadItemsBySubCategory();else if(this.store.name){this.subCategories=this.category.categories;var t=[];this.subCategories.forEach(r=>{t.push(...r.products.map(i=>({ItemName:i.name,RemainingQty:i.qty}))),this.itemsBySubCategory[r.name]=t||[],t=[]})}}loadItemsBySubCategory(){this.store&&this.sevenElevenRequestService.getItemsByStoreNo(this.store.StoreNo).subscribe(t=>{if(t.isSuccess&&t.element.StoreStockItem){let r=t.element.StoreStockItem.CategoryStockItems;if("\u751c\u9ede"==this.subCategoriesName){let i="";this.subCategories=this.subCategories.map(s=>"\u86cb\u7cd5"===s.Name?(i=s.ID,{...s,Name:"\u51b7\u85cf\u86cb\u7cd5"}):s),r=r.map(s=>"\u86cb\u7cd5"===s.Name&&s.NodeID.toString()==i?{...s,Name:"\u51b7\u85cf\u86cb\u7cd5"}:s)}if("\u9eb5\u5305\u86cb\u7cd5"==this.subCategoriesName){let i="";this.subCategories=this.subCategories.map(s=>"\u86cb\u7cd5"===s.Name?(i=s.ID,{...s,Name:"\u9eb5\u5305\u86cb\u7cd5"}):s),r=r.map(s=>"\u86cb\u7cd5"===s.Name&&s.NodeID.toString()==i?{...s,Name:"\u9eb5\u5305\u86cb\u7cd5"}:s)}this.subCategories.forEach(i=>{const s=[];r.forEach(o=>{o.Name===i.Name&&s.push(...o.ItemList)}),this.itemsBySubCategory[i.Name]=s||[]})}})}getDiscountedPrice(t){const r=parseFloat(t.replace("NT$","").trim()),s=(new Date).getHours();let o=r;return o*=s>=19&&s<20?.8:s>=10&&s<18||s>=20||s<3?.65:.8,o.toString()}getFoodDetail711(t){const s=new FU(this.foodDetails,{includeScore:!0,threshold:.3,keys:["name"]}).search(t.ItemName),o=s.length>0?s[0].item:{category:"",content:"",image:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png",kcal:"",name:"",new:"False",price:"",special_sale:"False"},a=this.getDiscountedPrice(o.price);return o.discountedPrice=a,o.originalPrice=o.price,o}getFoodDetailFamilyMart(t){const s=new FU(this.foodDetails,{includeScore:!0,threshold:.2,keys:["title"]}).search(t.ItemName);return s.length>0?s[0].item:{category:"",title:"",picture_url:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png","Protein (g)":"","Carb (g)":"","Calories (kcal)":"","Fat (g)":"",Description:""}}openImageDialog(t){this.dialog.open(d2e,{data:{image:t},panelClass:"custom-dialog"})}static{this.\u0275fac=function(r){return new(r||n)(De(sO),De(Tf))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-display"]],inputs:{store:"store",category:"category",foodDetails:"foodDetails"},features:[as],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-2xl","font-bold","mb-4","text-primary-default"],[4,"ngFor","ngForOf"],["class","sub-category-item bg-white border border-gray-100 p-6 mb-8 rounded-lg shadow-lg",4,"ngIf"],[1,"sub-category-item","bg-white","border","border-gray-100","p-6","mb-8","rounded-lg","shadow-lg"],[1,"mb-4"],[1,"text-2xl","font-bold","text-primary-default","text-primary-light"],[1,"space-y-6","sm:space-y-4"],[1,"border","border-gray-300","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"object-contain","rounded-lg","mb-4","sm:mb-0","sm:mr-6","shadow-md","w-24","h-24","sm:w-32","sm:h-32","cursor-pointer",3,"click","src","alt"],[1,"flex-1"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-2"],[1,"text-sm","sm:text-lg","font-semibold","text-gray-600"],[1,"text-center","inline-block","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"flex","space-x-2","mb-2"],["class","inline-block bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],["class","inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[1,"inline-block","bg-red-100","text-red-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"inline-block","bg-yellow-100","text-yellow-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"text-sm","sm:text-base","font-semibold","text-gray-800","mb-2"],[1,"text-gray-800"],[1,"line-through","text-gray-500"],[1,"text-red-600","mx-2"],[1,"text-red-600"],[1,"text-xs","sm:text-sm","text-gray-500","mb-1"],[1,"text-2xl","font-bold","text-primary-default"],[1,"border","border-gray-300","food-item","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"text-center","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"]],template:function(r,i){1&r&&Ct(0,cBe,3,2,"div",0),2&r&&ze("ngIf",i.subCategories.length>0)},dependencies:[fb,nf,vre,K2e]})}}return n})();const hBe=["mat-icon-button",""],fBe=["*"],pBe=new ye("MAT_BUTTON_CONFIG"),mBe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let gBe=(()=>{class n{_elementRef=k(jn);_platform=k(Rs);_ngZone=k(_t);_animationMode=k(Tl,{optional:!0});_focusMonitor=k(DA);_rippleLoader=k(bAe);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){k(td).load(q1);const t=k(pBe,{optional:!0}),r=this._elementRef.nativeElement,i=r.classList;this.disabledInteractive=t?.disabledInteractive??!1,this.color=t?.color??null,this._rippleLoader?.configureRipple(r,{className:"mat-mdc-button-ripple"});for(const{attribute:s,mdcClasses:o}of mBe)r.hasAttribute(s)&&i.add(...o)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",si],disabled:[2,"disabled","disabled",si],ariaDisabled:[2,"aria-disabled","ariaDisabled",si],disabledInteractive:[2,"disabledInteractive","disabledInteractive",si]},standalone:!0,features:[xl]})}return n})(),bre=(()=>{class n extends gBe{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,i){2&r&&(er("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Xh(i.color?"mat-"+i.color:""),ri("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[bn,ii],attrs:hBe,ngContentSelectors:fBe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Ya(),Xt(0,"span",0),Ki(1),Xt(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return n})(),Ere=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr,K1,lr]})}return n})();function yBe(n,e){1&n&&(Ie(0,"small",19),rt(1,"\u5e33\u865f\u70ba\u5fc5\u586b"),Te())}function vBe(n,e){1&n&&(Ie(0,"small",19),rt(1,"\u8acb\u8f38\u5165\u6709\u6548\u7684\u96fb\u5b50\u90f5\u4ef6"),Te())}function bBe(n,e){1&n&&(Ie(0,"small",19),rt(1,"\u5bc6\u78bc\u70ba\u5fc5\u586b"),Te())}function EBe(n,e){1&n&&(Ie(0,"small",19),rt(1,"\u5bc6\u78bc\u81f3\u5c11\u9700\u89816\u500b\u5b57\u5143"),Te())}function IBe(n,e){1&n&&(Ie(0,"small",19),rt(1," \u5bc6\u78bc\u8207\u518d\u6b21\u8f38\u5165\u7684\u5bc6\u78bc\u4e0d\u4e00\u81f4 "),Te())}function wBe(n,e){1&n&&(Ie(0,"small",19),rt(1," \u66b1\u7a31\u70ba\u5fc5\u586b "),Te())}function CBe(n,e){if(1&n&&(Ie(0,"div")(1,"div")(2,"label",20),rt(3,"\u91cd\u65b0\u8f38\u5165\u5bc6\u78bc"),Te(),Xt(4,"input",21),Ct(5,IBe,2,0,"small",8),Te(),Ie(6,"div")(7,"label",22),rt(8,"\u66b1\u7a31"),Te(),Xt(9,"input",23),Ct(10,wBe,2,0,"small",8),Te()()),2&n){const t=We();Ae(5),ze("ngIf",(null==t.authForm.errors?null:t.authForm.errors.passwordsMismatch)&&t.f.rePassword.touched),Ae(5),ze("ngIf",(null==t.authForm.errors?null:t.authForm.errors.displayNameRequired)&&t.f.displayName.touched)}}function TBe(n,e){if(1&n&&(Ie(0,"p",24),rt(1),Te()),2&n){const t=We();Ae(),va(t.errorMessage)}}function ABe(n,e){if(1&n){const t=xs();Ie(0,"div")(1,"button",25),jt("click",function(){return xn(t),Dn(We().resendVerificationEmail())}),rt(2," \u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1 "),Te()()}}function SBe(n,e){if(1&n){const t=xs();Ie(0,"div",26)(1,"button",27),jt("click",function(){return xn(t),Dn(We().forgotPassword())}),rt(2," \u5fd8\u8a18\u5bc6\u78bc\uff1f "),Te()()}}let xBe=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.authService=r,this.dialogRef=i,this.dialog=s,this.isRegister=!1,this.errorMessage="",this.authForm=this.fb.group({email:["",[RT.required,RT.email]],password:["",[RT.required,RT.minLength(6)]],rePassword:[""],displayName:[""]},{validators:[this.passwordMatchValidator,this.displayNameRequiredValidator.bind(this)]})}passwordMatchValidator(t){const r=t.get("password")?.value,i=t.get("rePassword")?.value;return r&&i&&r!==i?{passwordsMismatch:!0}:null}displayNameRequiredValidator(t){const r=this.isRegister,i=t.get("displayName")?.value;return!r||i&&""!==i.trim()?null:{displayNameRequired:!0}}submitForm(){this.authForm.invalid?this.markFormGroupTouched(this.authForm):this.isRegister?this.register():this.login()}markFormGroupTouched(t){Object.values(t.controls).forEach(r=>{r instanceof uf?this.markFormGroupTouched(r):r.markAsTouched()})}collectErrors(t){const r=[];return Object.keys(t.controls).forEach(i=>{const s=t.get(i);s&&s.errors&&(s.errors.required&&r.push(`${this.getFieldDisplayName(i)} \u70ba\u5fc5\u586b`),s.errors.email&&r.push(`${this.getFieldDisplayName(i)} \u683c\u5f0f\u4e0d\u6b63\u78ba`),s.errors.minlength&&r.push(`${this.getFieldDisplayName(i)} \u81f3\u5c11\u9700\u8981 ${s.errors.minlength.requiredLength} \u500b\u5b57\u5143`))}),t.errors?.passwordsMismatch&&r.push("\u5bc6\u78bc\u8207\u78ba\u8a8d\u5bc6\u78bc\u4e0d\u4e00\u81f4"),r.join("\n")}getFieldDisplayName(t){return{email:"Email",password:"\u5bc6\u78bc",rePassword:"\u78ba\u8a8d\u5bc6\u78bc",displayName:"\u66b1\u7a31"}[t]||t}login(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;console.log(s),!s||s.emailVerified?(console.log("\u4e00\u822c\u767b\u5165\u6210\u529f"),this.dialog.open(Fg,{width:"300px",data:{title:"\u767b\u5165\u6210\u529f",message:`${s.displayName}\uff5e\u6b61\u8fce\u56de\u4f86\u55b5`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(a=>{this.close(!0)})):this.errorMessage="\u60a8\u7684\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49\uff0c\u8acb\u5148\u81f3\u4fe1\u7bb1\u9ede\u64ca\u9a57\u8b49\u9023\u7d50\u5f8c\u518d\u91cd\u65b0\u767b\u5165\u3002"}).catch(i=>{this.errorMessage="auth/invalid-credential"===i.code?"\u5e33\u865f\u4e0d\u5b58\u5728\u6216\u5bc6\u78bc\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\u3002":"\u56e0\u4e0d\u660e\u539f\u56e0\u767b\u5165\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002",console.error(i.message)})}register(){const{email:t,password:r,displayName:i}=this.authForm.value;this.authService.register(t,r,i).then(()=>{this.errorMessage="\u8a3b\u518a\u6210\u529f\uff0c\u8acb\u81f3\u60a8\u7684\u4fe1\u7bb1\u78ba\u8a8d\u5f8c\u91cd\u65b0\u767b\u5165",this.authForm.reset(),this.isRegister=!1}).catch(s=>{this.errorMessage="auth/email-already-in-use"===s.code?"\u5e33\u865f\u5df2\u5b58\u5728\uff0c\u8acb\u4f7f\u7528Google\u6216\u76f4\u63a5\u767b\u5165":"\u56e0\u4e0d\u660e\u539f\u56e0\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}resendVerificationEmail(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;if(console.log("\u9a57\u8b49\u4fe1\u91cd\u767c\u7d66",s),s)return this.authService.sendVerificationEmail(s),void(this.errorMessage="\u9a57\u8b49\u4fe1\u5df2\u91cd\u65b0\u5bc4\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u96fb\u5b50\u90f5\u4ef6\u4e26\u91cd\u65b0\u767b\u5165")}).catch(i=>{console.error(i.message),this.errorMessage="\u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}loginWithGoogle(){this.authService.loginWithGoogle().then(t=>{const r=t.user;console.log("Google\u767b\u5165\u6210\u529f"),this.dialog.open(Fg,{width:"300px",data:{title:"\u767b\u5165\u6210\u529f",message:`${r.displayName}\uff5e\u6b61\u8fce\u56de\u4f86\u55b5`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(s=>{this.close(!0)})}).catch(t=>{console.error(t.message),this.errorMessage="Google\u767b\u5165\u5931\u6557\uff0c\u8acb\u91cd\u65b0\u518d\u8a66"})}close(t){this.dialogRef.close(t)}get f(){return this.authForm.controls}forgotPassword(){const{email:t}=this.authForm.value;t?this.authService.forgotPassword(t).then(()=>{this.errorMessage="\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u4fe1\u7bb1"}).catch(r=>{console.error("\u91cd\u8a2d\u5bc6\u78bc\u932f\u8aa4",r.message),this.errorMessage="\u767c\u9001\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u6642\u51fa\u932f\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"}):this.errorMessage="\u8acb\u8f38\u5165\u5e33\u865f\u4f7f\u7528\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740"}static{this.\u0275fac=function(r){return new(r||n)(De(jIe),De($S),De(Og),De(Tf))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-login-page"]],decls:32,vars:12,consts:[[1,"dialog-content"],[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"text-primary-default","text-xl","font-semibold","mb-6"],["mat-icon-button","",1,"text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],[1,"material-icons"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"text-primary-default"],["type","email","id","email","formControlName","email","placeholder","\u8acb\u8f38\u5165\u4fe1\u7bb1\u4f5c\u70ba\u5e33\u865f",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["class","text-red-500",4,"ngIf"],["for","password",1,"text-primary-default"],["type","password","id","password","formControlName","password","placeholder","\u8f38\u5165\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[4,"ngIf"],["type","submit",1,"btn-login","w-full","py-2","px-4","bg-primary-default","text-white","rounded-md","mt-4","hover:bg-gray-400","hover:shadow-lg","transition-all","focus:outline-none"],["class","error-message text-red-500 mb-4",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],[1,"flex","justify-between","items-center","mt-6"],[1,"btn-register","text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"],[1,"btn-google","border","border-gray-300","flex","items-center","py-2","px-4","bg-primary-light","text-gray-700","rounded-md","hover:bg-gray-200","hover:border-gray-400","transition-all","focus:outline-none",3,"click"],["src","assets/google.png","alt","Google Logo",1,"w-5","h-5","mr-2"],[1,"text-red-500"],["for","rePassword",1,"text-primary-default"],["type","password","id","rePassword","formControlName","rePassword","placeholder","\u518d\u6b21\u8f38\u5165\u60a8\u7684\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["for","displayName",1,"text-primary-default"],["type","text","id","displayName","formControlName","displayName","placeholder","\u600e\u9ebc\u7a31\u547c\u60a8",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[1,"error-message","text-red-500","mb-4"],[1,"btn-resend","w-full","py-2","px-4","bg-primary-light","border","border-gray-300","text-gray-700","rounded-md","hover:bg-gray-400","hover:text-white","transition-all","focus:outline-none",3,"click"],[1,"mt-4","text-center"],[1,"text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"]],template:function(r,i){1&r&&(Ie(0,"mat-dialog-content",0)(1,"div",1)(2,"h2",2),rt(3),Te(),Ie(4,"button",3),jt("click",function(){return i.close(!1)}),Ie(5,"span",4),rt(6,"close"),Te()()(),Ie(7,"form",5),jt("ngSubmit",function(){return i.submitForm()}),Ie(8,"div")(9,"label",6),rt(10,"\u5e33\u865f"),Te(),Xt(11,"input",7),Ct(12,yBe,2,0,"small",8)(13,vBe,2,0,"small",8),Te(),Ie(14,"div")(15,"label",9),rt(16,"\u5bc6\u78bc"),Te(),Xt(17,"input",10),Ct(18,bBe,2,0,"small",8)(19,EBe,2,0,"small",8),Te(),Ct(20,CBe,11,2,"div",11),Ie(21,"button",12),rt(22),Te(),Ct(23,TBe,2,1,"p",13)(24,ABe,3,0,"div",11),Te(),Ct(25,SBe,3,0,"div",14),Ie(26,"div",15)(27,"button",16),jt("click",function(){return i.isRegister=!i.isRegister}),rt(28),Te(),Ie(29,"button",17),jt("click",function(){return i.loginWithGoogle()}),Xt(30,"img",18),rt(31," Google \u767b\u5165 "),Te()()()),2&r&&(Ae(3),En(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),Ae(4),ze("formGroup",i.authForm),Ae(5),ze("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),Ae(),ze("ngIf",(null==i.f.email.errors?null:i.f.email.errors.email)&&i.f.email.touched),Ae(5),ze("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),Ae(),ze("ngIf",(null==i.f.password.errors?null:i.f.password.errors.minlength)&&i.f.password.touched),Ae(),ze("ngIf",i.isRegister),Ae(2),En(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),Ae(),ze("ngIf",i.errorMessage),Ae(),ze("ngIf",!i.isRegister&&i.errorMessage.includes("\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49")),Ae(),ze("ngIf",!i.isRegister),Ae(3),En(" ",i.isRegister?"\u5df2\u6709\u5e33\u865f\uff1f\u767b\u5165":"\u8a3b\u518a"," "))},dependencies:[nf,rO,fQ,bre,BN,dg,kT,xN,WT,HN]})}}return n})();const DBe=["*"];let Qx;function UI(n){return function RBe(){if(void 0===Qx&&(Qx=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Qx=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Qx}()?.createHTML(n)||n}function Ire(n){return Error(`Unable to find icon with the name "${n}"`)}function wre(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Cre(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class dp{url;svgText;options;svgElement;constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Yx=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new dp(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(ls.HTML,i);if(!o)throw Cre(i);const a=UI(o);return this._addSvgIconConfig(t,r,new dp("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new dp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(ls.HTML,r);if(!s)throw Cre(r);const o=UI(s);return this._addSvgIconSetConfig(t,new dp("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(ls.RESOURCE_URL,t);if(!r)throw wre(t);const i=this._cachedIconsByUrl.get(r);return i?Ke(Xx(i)):this._loadSvgIconFromConfig(new dp(t,null)).pipe(oi(s=>this._cachedIconsByUrl.set(r,s)),Le(s=>Xx(s)))}getNamedSvgIcon(t,r=""){const i=Tre(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):xb(Ire(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ke(Xx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Le(r=>Xx(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Ke(i):DT(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Ju(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(ls.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Ke(null)})))).pipe(Le(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw Ire(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(oi(r=>t.svgText=r),Le(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ke(null):this._fetchIcon(t).pipe(oi(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(UI("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(UI("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function MBe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const o=this._sanitizer.sanitize(ls.RESOURCE_URL,r);if(!o)throw wre(r);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Le(c=>UI(c)),cg(()=>this._inProgressUrlFetches.delete(o)),$V());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(Tre(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return kBe(s)?new dp(s.url,null,s.options):new dp(s,null)}}static \u0275fac=function(r){return new(r||n)(Re(vb,8),Re(mN),Re(pn,8),Re(zo))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xx(n){return n.cloneNode(!0)}function Tre(n,e){return n+":"+e}function kBe(n){return!(!n.url||!n.options)}const NBe=new ye("MAT_ICON_DEFAULT_OPTIONS"),OBe=new ye("mat-icon-location",{providedIn:"root",factory:function FBe(){const n=k(pn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Are=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],LBe=Are.map(n=>`[${n}]`).join(", "),VBe=/^url\(['"]?#(.*?)['"]?\)$/;let BBe=(()=>{class n{_elementRef=k(jn);_iconRegistry=k(Yx);_location=k(OBe);_errorHandler=k(zo);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=xt.EMPTY;constructor(){const t=k(new kle("aria-hidden"),{optional:!0}),r=k(NBe,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(LBe),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)Are.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(VBe):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Yi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){2&r&&(er("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Xh(i.color?"mat-"+i.color:""),ri("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:[2,"inline","inline",si],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[xl,ii],ngContentSelectors:DBe,decls:1,vars:0,template:function(r,i){1&r&&(Ya(),Ki(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),UBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr,lr]})}return n})();const jBe=["mat-menu-item",""],zBe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],HBe=["mat-icon, [matMenuItemIcon]","*"];function $Be(n,e){1&n&&(jo(),Ie(0,"svg",2),Xt(1,"polygon",3),Te())}const WBe=["*"];function GBe(n,e){if(1&n){const t=xs();Ie(0,"div",0),jt("click",function(){return xn(t),Dn(We().closed.emit("click"))})("animationstart",function(i){return xn(t),Dn(We()._onAnimationStart(i.animationName))})("animationend",function(i){return xn(t),Dn(We()._onAnimationDone(i.animationName))})("animationcancel",function(i){return xn(t),Dn(We()._onAnimationDone(i.animationName))}),Ie(1,"div",1),Ki(2),Te()()}if(2&n){const t=We();Xh(t._classList),ri("mat-menu-panel-animations-disabled",t._animationsDisabled)("mat-menu-panel-exit-animation","void"===t._panelAnimationState)("mat-menu-panel-animating",t._isAnimating),ze("id",t.panelId),er("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const LU=new ye("MAT_MENU_PANEL");let Zx=(()=>{class n{_elementRef=k(jn);_document=k(pn);_focusMonitor=k(DA);_parentMenu=k(LU,{optional:!0});_changeDetectorRef=k(Ea);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new E;_focused=new E;_highlighted=!1;_triggersSubmenu=!1;constructor(){k(td).load(q1),this._parentMenu?.addItem?.(this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),r=t.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++)r[i].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(r,i){1&r&&jt("click",function(o){return i._checkDisabled(o)})("mouseenter",function(){return i._handleMouseEnter()}),2&r&&(er("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),ri("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",si],disableRipple:[2,"disableRipple","disableRipple",si]},exportAs:["matMenuItem"],standalone:!0,features:[xl,ii],attrs:jBe,ngContentSelectors:HBe,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,i){1&r&&(Ya(zBe),Ki(0),Ie(1,"span",0),Ki(2,1),Te(),Xt(3,"div",1),Ct(4,$Be,2,0,":svg:svg",2)),2&r&&(Ae(3),ze("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),Ae(),qv(i._triggersSubmenu?4:-1))},dependencies:[QK],encapsulation:2,changeDetection:0})}return n})();const qBe=new ye("MatMenuContent"),KBe=new ye("mat-menu-default-options",{providedIn:"root",factory:function QBe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),VU="_mat-menu-enter",Jx="_mat-menu-exit";let jI=(()=>{class n{_elementRef=k(jn);_changeDetectorRef=k(Ea);_injector=k(Rn);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled;_allItems;_directDescendantItems=new Fh;_classList={};_panelAnimationState="void";_animationDone=new E;_isAnimating=!1;parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(t){const r=this._previousPanelClass,i={...this._classList};r&&r.length&&r.split(" ").forEach(s=>{i[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{i[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=i}_previousPanelClass;get classList(){return this.panelClass}set classList(t){this.panelClass=t}closed=new dn;close=this.closed;panelId=k(Ef).getId("mat-menu-panel-");constructor(){const t=k(KBe);this.overlayPanelClass=t.overlayPanelClass||"",this._xPosition=t.xPosition,this._yPosition=t.yPosition,this.backdropClass=t.backdropClass,this.overlapTrigger=t.overlapTrigger,this.hasBackdrop=t.hasBackdrop,this._animationsDisabled="NoopAnimations"===k(Tl,{optional:!0})}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new fTe(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(nl(this._directDescendantItems),Kt(t=>sl(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const i=t.toArray(),s=Math.max(0,Math.min(i.length-1,r.activeItemIndex||0));i[s]&&!i[s].disabled?r.setActiveItem(s):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(nl(this._directDescendantItems),Kt(r=>sl(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:nd(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Dc(()=>{const r=this._resolvePanel();if(!r||!r.contains(document.activeElement)){const i=this._keyManager;i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&r&&r.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){}setPositionClasses(t=this.xPosition,r=this.yPosition){this._classList={...this._classList,"mat-menu-before":"before"===t,"mat-menu-after":"after"===t,"mat-menu-above":"above"===r,"mat-menu-below":"below"===r},this._changeDetectorRef.markForCheck()}_onAnimationDone(t){const r=t===Jx;(r||t===VU)&&(r&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(r?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(t){(t===VU||t===Jx)&&(this._isAnimating=!0)}_setIsOpen(t){if(this._panelAnimationState=t?"enter":"void",t){if(0===this._keyManager.activeItemIndex){const r=this._resolvePanel();r&&(r.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(Jx),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(t?VU:Jx)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(nl(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let t=null;return this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),t}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-menu"]],contentQueries:function(r,i,s){if(1&r&&(ju(s,qBe,5),ju(s,Zx,5),ju(s,Zx,4)),2&r){let o;Qs(o=Ys())&&(i.lazyContent=o.first),Qs(o=Ys())&&(i._allItems=o),Qs(o=Ys())&&(i.items=o)}},viewQuery:function(r,i){if(1&r&&zu(ma,5),2&r){let s;Qs(s=Ys())&&(i.templateRef=s.first)}},hostVars:3,hostBindings:function(r,i){2&r&&er("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",si],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>null==t?null:si(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[sr([{provide:LU,useExisting:n}]),xl,ii],ngContentSelectors:WBe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(r,i){1&r&&(Ya(),Ct(0,GBe,3,12,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,changeDetection:0})}return n})();const Sre=new ye("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.reposition()}}),XBe={provide:Sre,deps:[cs],useFactory:function YBe(n){return()=>n.scrollStrategies.reposition()}},xre=Rg({passive:!0}),zI=new WeakMap;let ZBe=(()=>{class n{_overlay=k(cs);_element=k(jn);_viewContainerRef=k(Co);_menuItemInstance=k(Zx,{optional:!0,self:!0});_dir=k(Mg,{optional:!0});_focusMonitor=k(DA);_ngZone=k(_t);_scrollStrategy=k(Sre);_changeDetectorRef=k(Ea);_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=xt.EMPTY;_hoverSubscription=xt.EMPTY;_menuCloseSubscription=xt.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_handleTouchStart=t=>{B1(t)||(this._openedBy="touch")};_openedBy=void 0;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}_menu;menuData;restoreFocus=!0;menuOpened=new dn;onMenuOpen=this.menuOpened;menuClosed=new dn;onMenuClose=this.menuClosed;constructor(){const t=k(LU,{optional:!0});this._parentMaterialMenu=t instanceof jI?t:void 0,this._element.nativeElement.addEventListener("touchstart",this._handleTouchStart,xre)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this.menu&&this._ownsMenu(this.menu)&&zI.delete(this.menu),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,xre),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;this._pendingRemoval?.unsubscribe();const r=zI.get(t);zI.set(t,this),r&&r!==this&&r.closeMenu();const i=this._createOverlay(t),s=i.getConfig(),o=s.positionStrategy;this._setPosition(t,o),s.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,i.hasAttached()||(i.attach(this._getPortal(t)),t.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),t instanceof jI&&(t._setIsOpen(!0),t._directDescendantItems.changes.pipe(_g(t.close)).subscribe(()=>{o.withLockedPosition(!1).reapplyLastPosition(),o.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){const r=this._overlayRef,i=this._menu;!r||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),i instanceof jI&&this._ownsMenu(i)?(this._pendingRemoval=i._animationDone.pipe(Yi(1)).subscribe(()=>r.detach()),i._setIsOpen(!1)):r.detach(),i&&this._ownsMenu(i)&&zI.delete(i),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const r=this._getOverlayConfig(t);this._subscribeToPositions(t,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe(i=>{this.menu instanceof jI&&this.menu._handleKeydown(i)})}return this._overlayRef}_getOverlayConfig(t){return new RA({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr"})}_subscribeToPositions(t,r){t.setPositionClasses&&r.positionChanges.subscribe(i=>{this._ngZone.run(()=>{t.setPositionClasses("start"===i.connectionPair.overlayX?"after":"before","top"===i.connectionPair.overlayY?"below":"above")})})}_setPosition(t,r){let[i,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[u,h]=[i,s],m=0;if(this.triggersSubmenu()){if(h=i="before"===t.xPosition?"start":"end",s=u="end"===i?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const y=this._parentMaterialMenu.items.first;this._parentInnerPadding=y?y._getHostElement().offsetTop:0}m="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");r.withPositions([{originX:i,originY:l,overlayX:u,overlayY:o,offsetY:m},{originX:s,originY:l,overlayX:h,overlayY:o,offsetY:m},{originX:i,originY:c,overlayX:u,overlayY:a,offsetY:-m},{originX:s,originY:c,overlayX:h,overlayY:a,offsetY:-m}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return sl(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:Ke(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Qr(o=>this._menuOpen&&o!==this._menuItemInstance)):Ke(),r)}_handleMousedown(t){V1(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(t=>{t===this._menuItemInstance&&!t.disabled&&(this._openedBy="mouse",this.openMenu())}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new IA(t.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(t){return zI.get(t)===this}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,i){1&r&&jt("click",function(o){return i._handleClick(o)})("mousedown",function(o){return i._handleMousedown(o)})("keydown",function(o){return i._handleKeydown(o)}),2&r&&er("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}return n})(),Dre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[XBe],imports:[K1,lr,Qb,qb,lr]})}return n})();const JBe=["*",[["mat-toolbar-row"]]],eUe=["*","mat-toolbar-row"];let tUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return n})(),nUe=(()=>{class n{_elementRef=k(jn);_platform=k(Rs);_document=k(pn);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(1&r&&ju(s,tUe,5),2&r){let o;Qs(o=Ys())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,i){2&r&&(Xh(i.color?"mat-"+i.color:""),ri("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[ii],ngContentSelectors:eUe,decls:2,vars:0,template:function(r,i){1&r&&(Ya(JBe),Ki(0),Ki(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return n})(),rUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr,lr]})}return n})(),iUe=(()=>{class n{get vertical(){return this._vertical}set vertical(t){this._vertical=Y9(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=Y9(t)}_inset=!1;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,i){2&r&&(er("aria-orientation",i.vertical?"vertical":"horizontal"),ri("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[ii],decls:0,vars:0,template:function(r,i){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return n})(),Mre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr,lr]})}return n})();function sUe(n,e){1&n&&Xt(0,"img",13),2&n&&ze("src",We(3).sevenElevenIconUrl,Ss)}function oUe(n,e){1&n&&Xt(0,"img",14),2&n&&ze("src",We(3).familyMartIconUrl,Ss)}function aUe(n,e){if(1&n){const t=xs();Ie(0,"button",9),jt("click",function(){xn(t);const i=We().$implicit;return Dn(We().onSearchStore(i))}),Ct(1,sUe,1,1,"img",10)(2,oUe,1,1,"img",11),Ie(3,"span",12),rt(4),Te()()}if(2&n){const t=We().$implicit;Ae(),ze("ngIf",t.storeName.includes("7-11")),Ae(),ze("ngIf",t.storeName.includes("\u5168\u5bb6")),Ae(2),va(t.storeName)}}function lUe(n,e){if(1&n&&(_a(0),Ct(1,aUe,5,3,"button",8),ya()),2&n){const t=We();Ae(),ze("ngIf",t.user)}}let cUe=(()=>{class n{constructor(t,r){this.authService=t,this.dialog=r,this.favoriteStores=[],this.userUpdated=new dn,this.favoriteStoresUpdated=new dn,this.searchStore=new dn,this.sevenElevenIconUrl=Ms_sevenElevenUrl_icon,this.familyMartIconUrl=Ms_familyMartUrl_icon}loginOrlogout(){this.user?(this.authService.logout(),this.user=null,this.favoriteStores=[],this.userUpdated.emit(null),this.favoriteStoresUpdated.emit([]),this.dialog.open(Fg,{width:"300px",data:{title:"\u767b\u51fa\u6210\u529f",message:"\u5df2\u9806\u5229\u767b\u51fa",imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(r=>{this.favoriteStores=[]})):this.dialog.open(xBe,{width:"500px",data:{}}).afterClosed().subscribe(r=>{r&&this.authService.getUser().subscribe(i=>{i&&i.emailVerified&&(this.user=i,this.userUpdated.emit(i))})})}onSearchStore(t){this.searchStore.emit(t)}static{this.\u0275fac=function(r){return new(r||n)(De($S),De(Tf))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-sider"]],inputs:{user:"user",favoriteStores:"favoriteStores"},outputs:{userUpdated:"userUpdated",favoriteStoresUpdated:"favoriteStoresUpdated",searchStore:"searchStore"},decls:15,vars:4,consts:[["menu","matMenu"],[1,"toolbar"],["mat-icon-button","","aria-label","Menu",3,"matMenuTriggerFor"],[1,"text-with-shadow"],[1,"menu-header"],[4,"ngFor","ngForOf"],["mat-menu-item",""],[1,"px-3","py-1","text-white","text-center","bg-primary-default","rounded-full","shadow-sm",3,"click"],["mat-menu-item","","class","custom-menu-item",3,"click",4,"ngIf"],["mat-menu-item","",1,"custom-menu-item",3,"click"],["alt","7-11","class","store-icon",3,"src",4,"ngIf"],["alt","FamilyMart","class","store-icon",3,"src",4,"ngIf"],[1,"text-gray-600"],["alt","7-11",1,"store-icon",3,"src"],["alt","FamilyMart",1,"store-icon",3,"src"]],template:function(r,i){if(1&r){const s=xs();Ie(0,"mat-toolbar",1)(1,"button",2)(2,"mat-icon"),rt(3,"menu"),Te()(),Ie(4,"span",3),rt(5,"\u53cb\u5584\u9ed1\u8c93 Friendly Cat"),Te(),Ie(6,"mat-menu",null,0)(8,"div",4),rt(9),Te(),Xt(10,"mat-divider"),Ct(11,lUe,2,1,"ng-container",5),Ie(12,"button",6)(13,"div",7),jt("click",function(){return xn(s),Dn(i.loginOrlogout())}),rt(14),Te()()()()}if(2&r){const s=VC(7);Ae(),ze("matMenuTriggerFor",s),Ae(8),En(" ",i.user?"\u60a8\u6536\u85cf\u7684\u5e97\u5bb6":"\u767b\u5165\u5f8c\u53ef\u6536\u85cf\u5e97\u5bb6"," "),Ae(2),ze("ngForOf",i.favoriteStores),Ae(3),En(" ",i.user?i.user.displayName+" \u767b\u51fa":" \u767b\u5165"," ")}},dependencies:[fb,nf,bre,BBe,jI,Zx,ZBe,nUe,iUe],styles:['@charset "UTF-8";.toolbar[_ngcontent-%COMP%]{background-color:#f4efe6;color:#019863;box-shadow:4px 0 6px #0000001a}.mat-menu-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.menu-header[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;font-weight:700;color:#a18249}.store-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px;display:inline-block;vertical-align:middle}.text-with-shadow[_ngcontent-%COMP%]{font-weight:700;text-shadow:2px 2px 5px rgba(0,0,0,.2)}']})}}return n})();const Pre=n=>({opacity:n});function uUe(n,e){if(1&n&&(Ie(0,"div",27)(1,"span",28),rt(2),qo(3,"async"),Xt(4,"mat-progress-spinner",29),Te()()),2&n){const t=We();Ae(2),En(" ",Hu(3,1,t.loadingService.message$)," ")}}function dUe(n,e){1&n&&(Ie(0,"div",30),rt(1," \u770b\u770b\u9644\u8fd1\u6709\u5565\u597d\u5403\u7684\u5427\uff01 "),Te())}function hUe(n,e){if(1&n&&(Ie(0,"div",33),Xt(1,"img",34),Ie(2,"div",35)(3,"span"),rt(4),Te(),Ie(5,"span",36),rt(6),Te()()()),2&n){const t=We().$implicit,r=We();Ae(),ng("src",r.sevenElevenIconUrl,Ss),Ae(3),En("",t.name,"\u9580\u5e02"),Ae(2),va(t.addr)}}function fUe(n,e){if(1&n&&(Ie(0,"div",33),Xt(1,"img",37),Ie(2,"div",35)(3,"span"),rt(4),Te(),Ie(5,"span",36),rt(6),Te()()()),2&n){const t=We().$implicit,r=We();Ae(),ng("src",r.familyMartIconUrl,Ss),Ae(3),En("",t.name.replace("\u5e97",""),"\u9580\u5e02"),Ae(2),va(t.addr)}}function pUe(n,e){if(1&n&&(Ie(0,"mat-option",31),Ct(1,hUe,7,3,"div",32)(2,fUe,7,3,"div",32),Te()),2&n){const t=e.$implicit;ze("value",t),Ae(),ze("ngIf","7-11"===t.label),Ae(),ze("ngIf","\u5168\u5bb6"===t.label)}}function mUe(n,e){if(1&n&&(Ie(0,"p",60),rt(1),qo(2,"round"),Te()),2&n){const t=We(4).$implicit;Ae(),En(" \u8ddd\u96e2\u60a8: ",HC(2,1,t.distance,1)," ")}}function gUe(n,e){1&n&&(jo(),Ie(0,"svg",61),Xt(1,"path",62),Te())}function _Ue(n,e){1&n&&(jo(),Ie(0,"svg",63),Xt(1,"path",62),Te())}function yUe(n,e){if(1&n){const t=xs();Ie(0,"div",65),jt("click",function(){xn(t);const i=We().$implicit,s=We(4).$implicit;return Dn(We().toggleSubCategoryDetails(s,i))}),Xt(1,"img",66),Ie(2,"div")(3,"span",67),rt(4),Te(),Ie(5,"div",68),rt(6),Te()()()}if(2&n){const t=We().$implicit,r=We(4).$implicit,i=We();ok("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n                      ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),ri("pointer-events-none",0===i.getSubCategoryTotalQty(r,t)),Ae(),ng("alt",t.Name),ze("src",t.ImageUrl,Ss)("ngStyle",vk(10,Pre,0===i.getSubCategoryTotalQty(r,t)?.3:1)),Ae(3),va(t.Name),Ae(2),En(" ",i.getSubCategoryTotalQty(r,t)," ")}}function vUe(n,e){if(1&n&&(_a(0),Ct(1,yUe,7,12,"div",64),ya()),2&n){const t=e.$implicit,r=We(4).$implicit,i=We();Ae(),ze("ngIf",i.getSubCategoryTotalQty(r,t)>0)}}function bUe(n,e){if(1&n&&(Ie(0,"div",69),Xt(1,"app-display",70),Te()),2&n){const t=We(5);Ae(),ze("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetails711)}}function EUe(n,e){if(1&n){const t=xs();_a(0),Ie(1,"div",44)(2,"div",45)(3,"div",46),Xt(4,"img",47),Te(),Ie(5,"div",48)(6,"h2",49),rt(7),Ie(8,"a",50),Xt(9,"img",51),Te()(),Ct(10,mUe,3,4,"p",52),Te()(),Ie(11,"div",53)(12,"button",54),jt("click",function(){xn(t);const i=We(3).$implicit;return Dn(We().toggleFavorite(i))}),Ct(13,gUe,2,0,"svg",55)(14,_Ue,2,0,"svg",56),Te()()(),Ie(15,"div",57)(16,"div",58),Ct(17,vUe,2,1,"ng-container",26),qo(18,"slice"),Te(),Ct(19,bUe,2,3,"div",59),Te(),ya()}if(2&n){const t=We(3).$implicit,r=We();Ae(4),ze("src",r.sevenElevenIconUrl,Ss),Ae(3),En(" 7-11",t.StoreName,"\u9580\u5e02 "),Ae(),tb("href","https://www.google.com/maps/search/7-ELEVEN",t.StoreName,"\u9580\u5e02",Ss),Ae(2),ze("ngIf",t.distance>=1),Ae(3),ze("ngIf",r.isFavorite(t)&&r.user),Ae(),ze("ngIf",!r.isFavorite(t)&&r.user),Ae(3),ze("ngForOf",bk(18,9,r.foodCategories,0,10)),Ae(2),ze("ngIf",r.selectedCategory&&r.selectedStore===t)}}function IUe(n,e){if(1&n&&(Ie(0,"div",42),Ct(1,EUe,20,13,"ng-container",43),Te()),2&n){const t=We(2).$implicit;Ae(),ze("ngIf","7-11"===t.label&&t.RemainingQty>0)}}function wUe(n,e){if(1&n&&(Ie(0,"p",60),rt(1),qo(2,"round"),Te()),2&n){const t=We(3).$implicit;Ae(),En(" \u8ddd\u96e2\u60a8: ",HC(2,1,t.distance,1)," ")}}function CUe(n,e){1&n&&(jo(),Ie(0,"svg",61),Xt(1,"path",62),Te())}function TUe(n,e){1&n&&(jo(),Ie(0,"svg",63),Xt(1,"path",62),Te())}function AUe(n,e){if(1&n){const t=xs();Ie(0,"div",65),jt("click",function(){const i=xn(t).$implicit,s=We(3).$implicit;return Dn(We().toggleSubCategoryDetails(s,i))}),Xt(1,"img",66),Ie(2,"div")(3,"span",67),rt(4),Te(),Ie(5,"div",68),rt(6),Te()()()}if(2&n){const t=e.$implicit,r=We(3).$implicit,i=We();ok("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n            ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),ri("pointer-events-none",0===i.getFSubCategoryQty(r,t)),Ae(),ng("alt",i.getFCatName(t)),ze("src",i.getFUrl(t),Ss)("ngStyle",vk(10,Pre,0===i.getFSubCategoryQty(r,t)?.3:1)),Ae(3),va(i.getFCatName(t)),Ae(2),En(" ",i.getFSubCategoryQty(r,t)," ")}}function SUe(n,e){if(1&n&&(Ie(0,"div",73),Xt(1,"app-display",74),Te()),2&n){const t=We(4);Ae(),ze("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetailsFamilyMart)}}function xUe(n,e){if(1&n){const t=xs();Ie(0,"div",42)(1,"div",44)(2,"div",45)(3,"div",46),Xt(4,"img",47),Te(),Ie(5,"div",48)(6,"h2",49),rt(7),Ie(8,"a",50),Xt(9,"img",51),Te()(),Ct(10,wUe,3,4,"p",52),Te()(),Ie(11,"div",53)(12,"button",54),jt("click",function(){xn(t);const i=We(2).$implicit;return Dn(We().toggleFavorite(i))}),Ct(13,CUe,2,0,"svg",55)(14,TUe,2,0,"svg",56),Te()()(),Ie(15,"div",58),Ct(16,AUe,7,12,"div",71),qo(17,"slice"),Te(),Ct(18,SUe,2,3,"div",72),Te()}if(2&n){const t=We(2).$implicit,r=We();Ae(4),ze("src",r.familyMartIconUrl,Ss),Ae(3),En(" ",t.name," "),Ae(),tb("href","https://www.google.com/maps/search/\u5168\u5bb6\u4fbf\u5229\u5546\u5e97",r.fStoreName(t.name),"",Ss),Ae(2),ze("ngIf",t.distance>=1),Ae(3),ze("ngIf",r.isFavorite(t)&&r.user),Ae(),ze("ngIf",!r.isFavorite(t)&&r.user),Ae(2),ze("ngForOf",bk(17,9,t.info,0,10)),Ae(2),ze("ngIf",r.selectedCategory&&r.selectedStore===t)}}function DUe(n,e){if(1&n&&(Ie(0,"div",39)(1,"div",40),Ct(2,IUe,2,1,"div",41)(3,xUe,19,13,"div",41),Te()()),2&n){const t=We().$implicit;Ae(2),ze("ngIf",t.RemainingQty>0),Ae(),ze("ngIf","\u5168\u5bb6"===t.label)}}function RUe(n,e){if(1&n&&(_a(0),Ct(1,DUe,4,2,"div",38),ya()),2&n){const t=We();Ae(),ze("ngIf",t.totalStoresShowList.length>0)}}const MUe=[{path:"**",component:(()=>{class n{constructor(t,r,i,s,o,a,l,c,u){this.http=t,this.geolocationService=r,this.sevenElevenService=i,this.familyMartService=s,this.authService=o,this.loadingService=a,this.dialog=l,this.firestore=c,this.storeDataService=u,this.user=null,this.searchTerm="",this.searchSelectedStore=null,this.selectedStoreName="",this.foodDetails711=[],this.foodDetailsFamilyMart=[],this.storeFilter="all",this.dropDown711List=[],this.dropDownFamilyMartList=[],this.unifiedDropDownList=[],this.sevenElevenIconUrl=Ms_sevenElevenUrl_icon,this.familyMartIconUrl=Ms_familyMartUrl_icon,this.zipcodes=[],this.cities=[],this.filteredDistricts=[],this.zipcodeList=[],this.selectedCity=null,this.selectedDistrict=null,this.selectedZipcode=null,this.foodCategories=[],this.nearby711Stores=[],this.nearbyFamilyMartStores=[],this.totalStoresShowList=[],this.filteredStoresList=[],this.favoriteStores=[],this.searchInput$=new E,this.searchForm=new uf({selectedStoreName:new pg("")})}ngOnInit(){this.searchInput$.pipe(F1(300),AA()).subscribe(t=>{this.handleSearch(t)}),this.init()}getCityName(){return this.http.get("https://demeter.5fpro.com/tw/zipcodes.json").pipe(oi(r=>{this.zipcodes=r,this.cities=[...new Set(r.map(i=>i.city_name))],this.zipcodeList=[...new Set(r.map(i=>i.zipcode))]}))}onCityChange(t){this.filteredDistricts=this.zipcodes.filter(r=>r.city_name===t),this.selectedDistrict=null,this.selectedZipcode=null}onDistrictChange(t){this.selectedZipcode=t}handleError(t){switch(t.code){case 1:return"\u4f7f\u7528\u8005\u62d2\u7d55\u4f4d\u7f6e\u5b58\u53d6";case 2:return"\u7121\u6cd5\u53d6\u5f97\u4f4d\u7f6e\u8cc7\u8a0a";case 3:return"\u4f4d\u7f6e\u8acb\u6c42\u903e\u6642";default:return"\u672a\u77e5\u932f\u8aa4"}}init(){this.authService.getUser().subscribe(t=>{t&&t.emailVerified&&(this.user=t,this.loadFavoriteStores())}),this.loadingService.show("\u8f09\u5165\u5546\u5e97\u8cc7\u8a0a\u4e2d\uff0c\u8acb\u7a0d\u5f8c\u55b5"),this.sevenElevenService.getFoodDetails().subscribe(t=>{this.foodDetails711=t}),this.familyMartService.getFoodDetails().subscribe(t=>{this.foodDetailsFamilyMart=t}),this.getFamilyMartAllStore(),Ke(!0).pipe(Kt(()=>this.sevenElevenService.getAccessToken()),Kt(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Ke([])),Ju(t=>(console.error("Error:",t),Ke([])))).subscribe(t=>{t&&t.element?(this.foodCategories=t.element,this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}getFamilyMartAllStore(){this.familyMartService.getStores().subscribe(t=>{t.length>0&&(this.dropDownFamilyMartList=t)})}getFoodSubCategoryImage(t){for(let r of this.foodCategories)if(r.Children.find(s=>s.ID===t))return r.ImageUrl;return null}getSubCategoryTotalQty(t,r){let i=0;for(const s of t.CategoryStockItems)for(const o of r.Children)s.NodeID===o.ID&&(i+=s.RemainingQty);return i}toggleSubCategoryDetails(t,r){this.selectedCategory=r,this.selectedStore=t}onInput(t){this.searchInput$.next(t.target.value)}handleSearch(t){t.length>=2?(this.loadingService.show("\u6b63\u5728\u70ba\u60a8\u641c\u5c0b\u5e97\u5bb6"),this.unifiedDropDownList=[],this.latitude||this.longitude?Ke(!0).pipe(Kt(()=>this.sevenElevenService.getAccessToken()),Kt(r=>r&&r.element?(sessionStorage.setItem("711Token",r.element),this.sevenElevenService.getStoreByAddress(t)):Ke([]))).subscribe(r=>{if(r&&r.isSuccess){this.dropDown711List=r.element;const i=this.dropDownFamilyMartList.map(u=>({...u,Name:u.Name.replace("\u5168\u5bb6","")})).filter(u=>u.Name.includes(t)||u.addr.includes(t)),s=this.dropDown711List.map(u=>({...u,Name:u.StoreName.replace("711","")})).filter(u=>u.Name.includes(t)||u.Address.includes(t)),o=i.map(u=>({name:u.Name,addr:u.addr,label:"\u5168\u5bb6",longitude:u.px_wgs84,latitude:u.py_wgs84}));s.map(u=>({name:u.StoreName,addr:u.Address,label:"7-11",longitude:u.Longitude,latitude:u.Latitude})).forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)}),o.forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)});const l=this.unifiedDropDownList.filter(u=>u.name.includes(t)).sort((u,h)=>(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude})),c=this.unifiedDropDownList.filter(u=>u.addr.includes(t)&&!l.includes(u)).sort((u,h)=>(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude}));this.unifiedDropDownList=[...l,...c],this.loadingService.hide()}},r=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",r),this.loadingService.hide()}):Wn(this.geolocationService.getCurrentPosition()).pipe(Kt(r=>{const s=r.coords.longitude;return this.latitude=r.coords.latitude,this.longitude=s,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Ke([])}),Kt(()=>this.sevenElevenService.getAccessToken()),Kt(r=>r&&r.element?(sessionStorage.setItem("711Token",r.element),this.sevenElevenService.getStoreByAddress(t)):[])).subscribe(r=>{if(r&&r.isSuccess){this.dropDown711List=r.element;const i=this.dropDownFamilyMartList.map(u=>({...u,Name:u.Name.replace("\u5168\u5bb6","")})).filter(u=>u.Name.includes(t)||u.addr.includes(t)),s=this.dropDown711List.map(u=>({...u,Name:u.StoreName.replace("711","")})).filter(u=>u.Name.includes(t)||u.Address.includes(t)),o=i.map(u=>({name:u.Name,addr:u.addr,label:"\u5168\u5bb6",longitude:u.px_wgs84,latitude:u.py_wgs84}));s.map(u=>({name:u.StoreName,addr:u.Address,label:"7-11",longitude:u.Longitude,latitude:u.Latitude})).forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)}),o.forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)});const l=this.unifiedDropDownList.filter(u=>u.name.includes(t)).sort((u,h)=>(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude})),c=this.unifiedDropDownList.filter(u=>u.addr.includes(t)&&!l.includes(u)).sort((u,h)=>(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude}));this.unifiedDropDownList=[...l,...c],this.loadingService.hide()}},r=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",r),this.loadingService.hide()})):this.unifiedDropDownList=[]}onOptionSelect(t,r,i){this.searchSelectedStore=t?.option.value.name,this.searchTerm=t?.option.value.label+t?.option.value.name.replace("\u5e97","")+"\u9580\u5e02";const a=void 0!==i?i:Number(t?.option.value.longitude),l=void 0!==r?r:Number(t?.option.value.latitude);this.loadingService.show("\u6b63\u5728\u641c\u5c0b\u5e97\u5bb6\u55b5"),Wn(this.geolocationService.getCurrentPosition()).pipe(Kt(c=>{const h=c.coords.longitude;return this.latitude=c.coords.latitude,this.longitude=h,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Ke([])}),Kt(c=>c?this.sevenElevenService.getAccessToken():[]),Kt(c=>c&&c.element?(sessionStorage.setItem("711Token",c.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Ke([]))).subscribe(c=>{c?(this.searchCombineAndTransformStores(l,a),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}onSubmit(){console.log("\u8f38\u5165\u7684\u641c\u5c0b\u95dc\u9375\u5b57:",this.searchSelectedStore)}onUseCurrentLocation(){this.unifiedDropDownList=[],this.searchTerm="",this.loadingService.show("\u641c\u5c0b\u5e97\u5bb6\u4e2d\u55b5"),Wn(this.geolocationService.getCurrentPosition()).pipe(Kt(t=>{const i=t.coords.longitude;return this.latitude=t.coords.latitude,this.longitude=i,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Ke([])}),Kt(t=>t?this.sevenElevenService.getAccessToken():[]),Kt(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Ke([]))).subscribe(t=>{t?(this.searchCombineAndTransformStores(),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}combineStoreList(t,r){if(this.totalStoresShowList=[],this.nearby711Stores.forEach(i=>{const s={...i,storeName:`7-11${i.StoreName}\u9580\u5e02`,label:"7-11",distance:i.Distance,remainingQty:i.RemainingQty,showDistance:!0};this.totalStoresShowList.push(s)}),this.nearbyFamilyMartStores.forEach(i=>{const s={...i,storeName:i.name,label:"\u5168\u5bb6",distance:i.distance,showDistance:!0};this.totalStoresShowList.push(s)}),t&&r){if(this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),this.totalStoresShowList[0].distance>1||0===this.totalStoresShowList[0].remainingQty)return this.dialog.open(Fg,{data:{message:"\u8a72\u9580\u5e02\u7121\u5eab\u5b58\uff0c\u8acb\u91cd\u65b0\u641c\u5c0b\u3002",imgPath:"assets/NoResult.jpg"}}).afterClosed().subscribe(s=>{this.totalStoresShowList=[],this.searchTerm=""}),void(this.totalStoresShowList=[]);this.totalStoresShowList=[{...this.totalStoresShowList[0],showDistance:!1}]}else this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),console.log("\u6700\u8fd1\u7684\u5546\u5e97:",this.totalStoresShowList)}searchCombineAndTransformStores(t,r){const i=t||this.latitude,s=r||this.longitude,a={Latitude:i,Longitude:s};DT({sevenEleven:this.sevenElevenService.getNearByStoreList({CurrentLocation:{Latitude:i,Longitude:s},SearchLocation:{Latitude:i,Longitude:s}}),familyMart:this.familyMartService.getNearByStoreList(a)}).subscribe(({sevenEleven:l,familyMart:c})=>{l&&l.element&&l.element.StoreStockItemList&&(this.nearby711Stores=l.element.StoreStockItemList.sort((u,h)=>u.Distance-h.Distance)),c&&1===c.code&&(this.nearbyFamilyMartStores=c.data.sort((u,h)=>u.distance-h.distance)),t&&r?this.combineStoreList(t,r):this.combineStoreList(),this.storeDataService.setStores(this.totalStoresShowList)},l=>{console.error("Error fetching store data:",l)})}getFStoreQty(t){var r=0;return t.info.forEach(i=>{r+=i.qty}),r}getFUrl(t){return t.iconURL}getFCatName(t){return t.name}getFSubCategoryQty(t,r){return r.qty}fStoreName(t){return t?t.replace("\u5168\u5bb6",""):""}loadFavoriteStores(){this.user.emailVerified&&this.firestore.collection("users").doc(this.user.uid).collection("favorites").valueChanges().subscribe(r=>{this.favoriteStores=r,console.log("favoriteStores",this.favoriteStores)})}toggleFavorite(t){if(this.user.emailVerified){const i=this.firestore.collection("users").doc(this.user.uid).collection("favorites").doc(t.storeName);this.isFavorite(t)?this.dialog.open(Fg,{data:{title:"\u53d6\u6d88\u6536\u85cf",message:`\u5df2\u5c07\u300e${t.storeName}\u300f\u5f9e\u6536\u85cf\u4e2d\u79fb\u9664`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(o=>{i.delete()}):this.dialog.open(Fg,{data:{title:"\u65b0\u589e\u6536\u85cf",message:`\u300e${t.storeName}\u300f\u5df2\u52a0\u5165\u60a8\u7684\u6536\u85cf\u5e97\u5bb6`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(o=>{const a={storeName:t.storeName};t.StoreName&&(a.store711Name=t.StoreName,a.label="7-11"),t.longitude&&t.latitude&&(a.storeFLongitude=t.longitude,a.storeFLatitude=t.latitude,a.label="\u5168\u5bb6"),i.set(a)})}else console.log("\u7528\u6236\u5c1a\u672a\u767b\u5165\u6216\u4fe1\u7bb1\u672a\u9a57\u8b49")}isFavorite(t){return this.favoriteStores.some(r=>r.storeName===t.storeName)}onUserUpdated(t){this.user=t,t&&this.loadFavoriteStores()}onFavoriteStoresUpdated(t){this.favoriteStores=t}onFavoriteStoreSearch(t){console.log("\u641c\u5c0b\u6536\u85cf\u5e97\u5bb6",t),this.loadingService.show("\u5e6b\u4f60\u627e\u770b\u770b\u5537");var r=0,i=0;"\u5168\u5bb6"===t.label?(this.onOptionSelect(null,r=t.storeFLatitude,i=t.storeFLongitude),this.searchTerm=""):Wn(this.geolocationService.getCurrentPosition()).pipe(Kt(s=>{const a=s.coords.longitude;return this.latitude=s.coords.latitude,this.longitude=a,Ke([])}),Kt(s=>s?this.sevenElevenService.getAccessToken():[]),Kt(s=>s&&s.element?(sessionStorage.setItem("711Token",s.element),this.sevenElevenService.getStoreByAddress(t.store711Name)):Ke([]))).subscribe(s=>{s?(r=s.element[0].Latitude,i=s.element[0].Longitude,console.log(r,i),this.onOptionSelect(null,r,i),this.searchTerm=""):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}static{this.\u0275fac=function(r){return new(r||n)(De(vb),De(OAe),De(sO),De(FAe),De($S),De(l1e),De(Tf),De(VVe),De(Zne))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-new-search"]],decls:33,vars:12,consts:[["auto","matAutocomplete"],[3,"userUpdated","favoriteStoresUpdated","searchStore","user","favoriteStores"],[1,"container","mx-auto","my-3","p-6","bg-primary-white","max-w-4xl"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],["src","assets/S__222224406.jpg","alt","Friendly Superhero",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24"],[1,"text-primary-default","sm:text-xl","font-bold","ml-4","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],["class","loading-container",4,"ngIf"],["class","text-primary-default lg:text-md sm:text-xl",4,"ngIf"],[1,"text-xs","sm:text-sm","text-success","mb-4","text-center"],[1,"w-full",3,"ngSubmit"],[1,"flex","justify-center","w-full"],[1,"w-full","px-4","py-3"],[1,"flex","flex-col","h-12","w-full"],[1,"flex","w-full","items-stretch","rounded-lg","h-full"],["data-icon","MagnifyingGlass","data-size","24px","data-weight","regular",1,"text-primary-default","flex","border-none","bg-primary-light","items-center","justify-center","pl-4","rounded-l-lg","border-r-0"],["xmlns","http://www.w3.org/2000/svg","width","24px","height","24px","fill","currentColor","viewBox","0 0 256 256"],["d","M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"],["mat-input","","placeholder","\u8f38\u5165\u5169\u500b\u5b57\u4ee5\u4e0a\u7684\u5e97\u540d\u6216\u5730\u5740\u641c\u5c0b","name","first",1,"flex","w-full","flex-1","resize-none","overflow-hidden","rounded-lg","text-primary-default","focus:outline-none","focus:ring-0","border-none","bg-primary-light","focus:border-transparent","focus:bg-inherit","h-full","placeholder:text-primary-default","px-4","rounded-l-none","border-l-3","pl-2","text-base","font-normal","leading-normal",3,"ngModelChange","input","matAutocomplete","ngModel"],[3,"optionSelected"],["class","p-2 hover:bg-primary-light focus:bg-primary-default",3,"value",4,"ngFor","ngForOf"],[1,"flex","px-4","py-3","justify-center","items-center"],["type","button",1,"flex","min-w-[84px]","max-w-[480px]","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","h-10","px-4","bg-success","text-white","gap-2","pl-4","text-sm","font-bold","leading-normal","tracking-[0.015em]","text-xs","sm:text-sm","md:text-base",3,"click"],["data-icon","MapPin","data-size","20px","data-weight","regular",1,"text-white"],["xmlns","http://www.w3.org/2000/svg","width","20px","height","20px","fill","currentColor","viewBox","0 0 256 256"],["d","M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z"],[1,"truncate"],[4,"ngFor","ngForOf"],[1,"loading-container"],[1,"flex","items-center","text-primary-default","lg:text-md","sm:text-xl"],["mode","indeterminate","diameter","20",1,"text-primary-default"],[1,"text-primary-default","lg:text-md","sm:text-xl"],[1,"p-2","hover:bg-primary-light","focus:bg-primary-default",3,"value"],["class","flex items-center gap-2",4,"ngIf"],[1,"flex","items-center","gap-2"],["alt","7-Eleven Icon",1,"w-4","h-4",3,"src"],[1,"flex","flex-col"],[1,"text-xs","sm:text-sm","text-gray-500"],["alt","FamilyMart Icon",1,"w-4","h-4",3,"src"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],[1,"w-full","lg:w-4/5","max-w-screen-lg"],["class","store p-4 border border-gray-300 rounded-lg shadow-md mb-6",4,"ngIf"],[1,"store","p-4","border","border-gray-300","rounded-lg","shadow-md","mb-6"],[4,"ngIf"],[1,"flex","items-center","gap-4","bg-primary-white","px-4","min-h-[72px]","py-2","justify-between"],[1,"flex","items-center","gap-4"],["data-icon","Storefront","data-size","24px","data-weight","regular",1,"text-dark","border","border-gray-200","flex","items-center","justify-center","rounded-lg","bg-primary-light","shrink-0","size-12",2,"padding","16px"],["alt","Store Icon","width","24px","height","24px","fill","currentColor",3,"src"],[1,"flex","flex-col","justify-center","text-lg","sm:text-xl","font-semibold"],[1,"text-dark","text-base","font-medium","leading-normal","line-clamp-1"],["target","_blank",1,"ml-2",3,"href"],["src","assets/GoogleMap_icon.png","alt","Google Maps",1,"w-6","h-6","inline-block"],["class","text-success text-sm font-normal leading-normal line-clamp-2",4,"ngIf"],[1,"flex","items-start","justify-end"],[1,"text-red-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"food-categories","mt-4"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-4","gap-0"],["class","sub-category-details mt-4",4,"ngIf"],[1,"text-success","text-sm","font-normal","leading-normal","line-clamp-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[3,"class","pointer-events-none","click",4,"ngIf"],[3,"click"],[1,"w-12","h-12","sm:w-14","sm:h-14","md:w-16","md:h-16","lg:w-20","lg:h-20","mx-auto","mb-2","object-cover",3,"src","alt","ngStyle"],[1,"block","text-sm","sm:text-base","font-semibold"],[1,"inline-block","text-xs","bg-orange-200","text-orange-900","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"sub-category-details","mt-4"],[3,"store","category","foodDetails"],[3,"class","pointer-events-none","click",4,"ngFor","ngForOf"],["class","sub-category-details mt-4 border-gray-700",4,"ngIf"],[1,"sub-category-details","mt-4","border-gray-700"],[1,"border-gray-700",3,"store","category","foodDetails"]],template:function(r,i){if(1&r){const s=xs();Ie(0,"app-sider",1),jt("userUpdated",function(a){return xn(s),Dn(i.onUserUpdated(a))})("favoriteStoresUpdated",function(a){return xn(s),Dn(i.onFavoriteStoresUpdated(a))})("searchStore",function(a){return xn(s),Dn(i.onFavoriteStoreSearch(a))}),Te(),Ie(1,"div",2),_a(2),Ie(3,"div",3),Xt(4,"img",4),Ie(5,"h5",5),Ct(6,uUe,5,3,"div",6),qo(7,"async"),Ct(8,dUe,2,0,"div",7),qo(9,"async"),Te()(),Ie(10,"div",8)(11,"p"),rt(12,"* \u8cc7\u8a0a\u50c5\u4f9b\u53c3\u8003\uff0c\u8acb\u4ee5\u5e97\u5167\u5546\u54c1\u70ba\u6e96"),Te()(),Ie(13,"form",9),jt("ngSubmit",function(){return xn(s),Dn(i.onSubmit())}),Ie(14,"div",10)(15,"div",11)(16,"label",12)(17,"div",13)(18,"div",14),jo(),Ie(19,"svg",15),Xt(20,"path",16),Te()(),kh(),Ie(21,"input",17),UC("ngModelChange",function(a){return xn(s),pk(i.searchTerm,a)||(i.searchTerm=a),Dn(a)}),jt("input",function(a){return xn(s),Dn(i.onInput(a))}),Te()()()()(),Ie(22,"mat-autocomplete",18,0),jt("optionSelected",function(a){return xn(s),Dn(i.onOptionSelect(a))}),Ct(24,pUe,3,3,"mat-option",19),Te(),Ie(25,"div",20)(26,"button",21),jt("click",function(){return xn(s),Dn(i.onUseCurrentLocation())}),Ie(27,"div",22),jo(),Ie(28,"svg",23),Xt(29,"path",24),Te()(),kh(),Ie(30,"span",25),rt(31,"\u4f7f\u7528\u76ee\u524d\u4f4d\u7f6e"),Te()()()(),ya(),Te(),Ct(32,RUe,2,1,"ng-container",26)}if(2&r){const s=VC(23);ze("user",i.user)("favoriteStores",i.favoriteStores),Ae(6),ze("ngIf",Hu(7,8,i.loadingService.loading$)),Ae(2),ze("ngIf",!Hu(9,10,i.loadingService.loading$)),Ae(13),ze("matAutocomplete",s),BC("ngModel",i.searchTerm),Ae(3),ze("ngForOf",i.unifiedDropDownList),Ae(8),ze("ngForOf",i.totalStoresShowList)}},dependencies:[fb,nf,C7,BN,dg,kT,xN,$T,HT,JK,$Ve,o2e,ire,uBe,cUe,A7,x7,vre]})}}return n})()}];let PUe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({imports:[K9.forRoot(MUe),K9]})}}return n})();const LUe={provide:new ye("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(cs);return()=>n.scrollStrategies.reposition()}}),deps:[cs],useFactory:function FUe(n){return()=>n.scrollStrategies.reposition()}};let kre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[LUe],imports:[Qb,Ng,lr,qb,BI,Ng,lr]})}return n})(),VUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({})}return n})(),BUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr,BI,BI,VUe,lr]})}return n})(),Nre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({imports:[lr,lr]})}return n})(),Ore=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({imports:[rN,qN,BI,kre,Ng,BUe,ere,z8,u2e,Ere,UBe,Nre,Dre,rUe,Mre]})}}return n})(),GUe=(()=>{class n{constructor(t){this.requestService=t,this.url="https://openrouter.ai/api/v1/chat/completions",this.model="deepseek/deepseek-r1-distill-qwen-32b:free"}getLLMRes(t,r){const i=JSON.stringify({model:this.model,messages:[{role:"system",content:`\u4f60\u662f\u4e00\u500b\u52a9\u624b\uff0c\u5c08\u9580\u6839\u64da\u4f7f\u7528\u8005\u63d0\u4f9b\u7684\u5546\u5e97\u8cc7\u8a0a\uff0c\u7be9\u9078\u51fa\u7b26\u5408\u6307\u5b9a\u98df\u7269\u985e\u578b\u7684\u5546\u54c1\u3002\n      \u4f60\u7684\u56de\u61c9\u5fc5\u9808\u662f**\u7d14 JSON \u683c\u5f0f**\uff0c\u4e0d\u5305\u542b\u4efb\u4f55\u89e3\u91cb\u6216\u984d\u5916\u6587\u5b57\u3002\n\n      foodDesc\u4e2d\u82e5\u6709\u6307\u5b9a\u5546\u5e97\u985e\u578b\uff0c\u6aa2\u67e5storeName\u4e26\u53ea\u56de\u50b3\u7279\u5b9a\u5546\u5e97\u4e14\u98df\u7269\u985e\u578b\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c1\u5c31\u53ef\u4ee5\u4e86\uff1a\n      \u5168\u5bb6: \u4f7f\u7528\u8005\u53ef\u80fd\u6307\u5b9a\u7684\u63cf\u8ff0\u5982\u5168\u5bb6\u4fbf\u5229\u5546\u5e97\u3001\u5168\u5bb6\u3001FmailyMart\u3001\u6216\u662f\u5176\u4ed6\u4f60\u63a8\u65b7\u985e\u4f3c\u5168\u5bb6\u4fbf\u5229\u5546\u5e97\u7684\u6587\u5b57\n      711: \u4f7f\u7528\u8005\u53ef\u80fd\u8f38\u51657-11\u3001\u7d71\u4e00\u8d85\u5546\u3001\u6216\u662f\u5176\u4ed6\u4f60\u63a8\u65b7\u662f7-11\u4fbf\u5229\u5546\u5e97\u7684\u6587\u5b57\n\n      \u5982\u679c\u8a62\u554f\u7684\u8cc7\u8a0a\u4e0d\u5305\u542b\u67e5\u8a62\u5546\u5e97\u5167\u7684\u5546\u54c1\u76f8\u95dc\uff0c\u8acb\u544a\u8a34\u4f7f\u7528\u8005\u4f60\u53ea\u80fd\u5e6b\u5fd9\u641c\u5c0b\u98df\u54c1\u3002\n\n      \u5546\u5e97\u8cc7\u8a0a\u5982\u4e0b\uff1a\n      ${this.jsonListToString(r)}\n\n      \u5982\u679c\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c1\uff0c\u8acb\u56de\u50b3\uff1a\n      \`\`\`json\n      { "stores": [] }\n      \`\`\`\n      `},{role:"user",content:`\u8acb\u6839\u64da\u6211\u63d0\u4f9b\u7684\u5546\u5e97\u8cc7\u8a0a\uff0c\u627e\u51fa\u7b26\u5408\u300c${t}\u300d\u98df\u7269\u63cf\u8ff0\u7684\u5546\u54c1\u3002\n      \n      \u8acb\u53ea\u56de\u50b3 JSON \u683c\u5f0f\uff0c\u4e0d\u8981\u6709\u5176\u4ed6\u89e3\u91cb\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a\n      \`\`\`json\n      {\n        "stores": [\n        {\n          "storeName": "\u5546\u5e97\u540d\u7a31",\n          "distance": "\u8ddd\u96e2",\n          "items": [\n          "\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c11",\n          "\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c12"\n          ]\n        }\n        ]\n      }\n      \`\`\`\n      `}],max_tokens:4e3});return this.requestService.get("https://square-water-d5e4.jhcheng-alan.workers.dev/").pipe(Kt(s=>{console.log(s.token);const o=new Headers({Authorization:s.token,"Content-Type":"application/json"});return this.requestService.post(this.url,null,i,o)}))}jsonListToString(t){return t.map(r=>JSON.stringify(r)).join(", ")}static{this.\u0275fac=function(r){return new(r||n)(Re(iO))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const qUe=["chatBody"];function KUe(n,e){if(1&n&&(Ie(0,"span",13),rt(1),Te()),2&n){const t=We().$implicit;Ae(),va(t.text)}}function QUe(n,e){if(1&n&&(Ie(0,"span",14),rt(1),Te()),2&n){const t=We().$implicit;Ae(),En(" \u{1f408}\u200d\u2b1b\uff1a ",t.text," ")}}function YUe(n,e){if(1&n&&(Ie(0,"span",15),rt(1),Te()),2&n){const t=We().$implicit;Ae(),En(" \u{1f408}\u200d\u2b1b\uff1a ",t.text," ")}}function XUe(n,e){if(1&n&&(Ie(0,"div",9),Ct(1,KUe,2,1,"span",10)(2,QUe,2,1,"span",11)(3,YUe,2,1,"span",12),Te()),2&n){const t=e.$implicit;ze("ngClass",t.sender),Ae(),ze("ngIf","user"===t.sender),Ae(),ze("ngIf","bot"===t.sender&&!t.isLoading),Ae(),ze("ngIf","bot"===t.sender&&t.isLoading)}}function ZUe(n,e){if(1&n&&(Ie(0,"div",7,0),Ct(2,XUe,4,4,"div",8),Te()),2&n){const t=We(2);Ae(2),ze("ngForOf",t.messages)}}function JUe(n,e){if(1&n){const t=xs();Ie(0,"div",16)(1,"input",17),UC("ngModelChange",function(i){xn(t);const s=We(2);return pk(s.userInput,i)||(s.userInput=i),Dn(i)}),jt("keyup.enter",function(){return xn(t),Dn(We(2).sendMessage())}),Te(),Ie(2,"button",18),jt("click",function(){return xn(t),Dn(We(2).sendMessage())}),rt(3,"\u27a4"),Te()()}if(2&n){const t=We(2);Ae(),BC("ngModel",t.userInput)}}function eje(n,e){if(1&n){const t=xs();Ie(0,"div",2)(1,"div",3),jt("click",function(){return xn(t),Dn(We().toggleChat())}),rt(2," \u9ed1\u8c93\u5e6b\u4f60\u627e\u{1f4ac} "),Ie(3,"button",4),jt("click",function(i){return xn(t),Dn(We().toggleChat(i))}),rt(4),Te()(),Ct(5,ZUe,3,1,"div",5)(6,JUe,4,1,"div",6),Te()}if(2&n){const t=We();ri("open",t.isOpen),Ae(4),En(" ",t.isOpen?"\u2796":"\u2795"," "),Ae(),ze("ngIf",t.isOpen),Ae(),ze("ngIf",t.isOpen)}}let Fre=(()=>{class n{constructor(t,r,i,s){this.authService=t,this.storeDataService=r,this.sevenElevenRequestService=i,this.llmRequestService=s,this.isLogin=!1,this.storesInfo=[],this.isOpen=!1,this.userInput="",this.messages=[{text:"\u55e8\uff0c\u60f3\u8981\u627e\u4ec0\u9ebc\u985e\u578b\u7684\u98df\u7269\u5462\uff1f",sender:"bot"}]}ngOnInit(){this.authService.isLoggedIn().subscribe(t=>{this.isLogin=t})}toggleChat(t){t&&t.stopPropagation(),this.isOpen=!this.isOpen}sendMessage(){if(this.userInput.trim()){this.storesInfo=this.storeDataService.getStores().slice(0,10);const t=this.userInput;this.userInput="",this.putMessage(t,"user"),0===this.storesInfo.length?this.putMessage("\u8acb\u5148\u9ede\u64ca\u300c\u4f7f\u7528\u76ee\u524d\u4f4d\u7f6e\u300d\u641c\u5c0b\u6309\u9215\uff0c\u624d\u80fd\u5e6b\u4f60\u770b\u9644\u8fd1\u5546\u5e97\u5537\uff01","bot"):(this.putMessage("\u6b63\u5728\u641c\u5c0b\u9644\u8fd1\u7684\u4fbf\u5229\u5546\u5e97...","bot",!0),this.requestSevenInfoAndCombineFm().subscribe(r=>{console.log("updatedStores",r),this.storesInfo=r,this.llmRequestService.getLLMRes(t,this.storesInfo).subscribe(i=>{this.messages=this.messages.filter(a=>!a.isLoading);const s=JSON.parse(i.choices[0].message.content.trim().replace(/```json|```/g,""));if(0===s.stores.length)return void this.putMessage("\u627e\u4e0d\u5230\u4f60\u60f3\u8981\u7684\u6771\u897f\u5566QQ","bot");let o="\u9019\u4e9b\u5546\u5e97\u6709\u8ce3\u4f60\u60f3\u8981\u7684\uff01\n\n";s.stores.forEach(a=>{o+=`\u{1f4cd} ${a.storeName}\uff08\u8ddd\u96e2 ${a.distance.toFixed(1)}m\uff09\n`,o+=a.items.length>0?` ${a.items.join("\n")}\n\n`:"\u26a0\ufe0f \u9019\u9593\u5e97\u6c92\u6709\u627e\u5230\u76f8\u95dc\u5546\u54c1\n\n"}),this.putMessage(o,"bot")})}))}}putMessage(t,r,i){this.messages.push({text:t,sender:r,isLoading:i})}ngAfterViewChecked(){this.isOpen&&this.chatBody&&this.scrollToBottom()}scrollToBottom(){const t=this.chatBody.nativeElement;t.scrollTop=t.scrollHeight}requestSevenInfoAndCombineFm(){return DT(this.storesInfo.map(r=>r.StoreNo?this.sevenElevenRequestService.getItemsByStoreNo(r.StoreNo).pipe(Le(i=>({storeName:r.storeName,distance:r.distance,foodInfo:i.element.StoreStockItem.CategoryStockItems}))):Ke({storeName:r.storeName,distance:r.distance,foodInfo:r.info})))}convertLLMResToJson(t){t=t.split("```json")[1];try{return JSON.parse(t)}catch{return null}}static{this.\u0275fac=function(r){return new(r||n)(De($S),De(Zne),De(sO),De(GUe))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-chatbot"]],viewQuery:function(r,i){if(1&r&&zu(qUe,5),2&r){let s;Qs(s=Ys())&&(i.chatBody=s.first)}},standalone:!0,features:[ii],decls:1,vars:1,consts:[["chatBody",""],["class","chatbot-container",3,"open",4,"ngIf"],[1,"chatbot-container"],[1,"chatbot-header",3,"click"],[1,"toggle-btn",3,"click"],["class","chatbot-body",4,"ngIf"],["class","chatbot-footer",4,"ngIf"],[1,"chatbot-body"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","text-gray-700",4,"ngIf"],["class","text-primary-default",4,"ngIf"],["class","text-primary-default loading-text",4,"ngIf"],[1,"text-gray-700"],[1,"text-primary-default"],[1,"text-primary-default","loading-text"],[1,"chatbot-footer"],["type","text","placeholder","\u8f38\u5165\u8a0a\u606f...",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"]],template:function(r,i){1&r&&Ct(0,eje,7,5,"div",1),2&r&&ze("ngIf",!0)},dependencies:[qN,dg,kT,$T,rN,v7,fb,nf,Ore],styles:['@charset "UTF-8";.chatbot-container[_ngcontent-%COMP%]{position:fixed;bottom:1.5rem;right:1.5rem;width:20rem;max-width:50vw;background:#fff;border:1px solid #F4EFE6;border-radius:.625rem;box-shadow:0 .125rem .625rem #0000001a;display:flex;flex-direction:column;overflow:hidden}.chatbot-container.open[_ngcontent-%COMP%]{height:25rem;max-height:50vh}.chatbot-header[_ngcontent-%COMP%]{background:#a18249;color:#fff;padding:.625rem;cursor:pointer;text-align:center;display:flex;justify-content:space-between;align-items:center}.chatbot-body[_ngcontent-%COMP%]{flex:1;padding:.625rem;overflow-y:auto;scroll-behavior:smooth}.chatbot-body[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:.3125rem 0}.chatbot-body[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#f4efe6;padding:.5rem .75rem;border-radius:.5rem;display:inline-block}.chatbot-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:.3125rem 0}.chatbot-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fcdab3;padding:.5rem .75rem;border-radius:.5rem;display:inline-block}.chatbot-body[_ngcontent-%COMP%]   .text-primary-default[_ngcontent-%COMP%]{white-space:pre-line}.chatbot-footer[_ngcontent-%COMP%]{display:flex;border-top:1px solid #F4EFE6;padding:.3125rem}.chatbot-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.3125rem;border:none;outline:none}.chatbot-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#a18249;color:#fff;border:none;padding:.3125rem .625rem;cursor:pointer}.toggle-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;font-size:1rem}@media (max-width: 768px){.chatbot-container[_ngcontent-%COMP%]{width:18rem;bottom:1rem;right:1rem}.chatbot-container.open[_ngcontent-%COMP%]{height:20rem}}@media (max-width: 480px){.chatbot-container[_ngcontent-%COMP%]{width:90vw;bottom:.5rem;right:.5rem;border-radius:.5rem}.chatbot-container.open[_ngcontent-%COMP%]{height:70vh}.chatbot-header[_ngcontent-%COMP%], .chatbot-body[_ngcontent-%COMP%]{padding:.5rem}.chatbot-footer[_ngcontent-%COMP%]{padding:.25rem}.chatbot-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.25rem .5rem}.toggle-btn[_ngcontent-%COMP%]{font-size:.875rem}}@keyframes _ngcontent-%COMP%_blink{0%{opacity:1}50%{opacity:.5}to{opacity:1}}.loading-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite}']})}}return n})(),tje=(()=>{class n{constructor(){this.title="friendly-time"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&Xt(0,"router-outlet")(1,"app-chatbot")},dependencies:[u1,Fre]})}}return n})();function Lre(n){return new K(3e3,!1)}function zd(n){switch(n.length){case 0:return new Jb;case 1:return n[0];default:return new rQ(n)}}function Vre(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,h=u&&a||new Map;l.forEach((m,y)=>{let b=y,T=m;if("offset"!==y)switch(b=n.normalizePropertyName(b,i),T){case"!":T=t.get(y);break;case Lc:T=r.get(y);break;default:T=n.normalizeStyleValue(y,b,T,i)}h.set(b,T)}),u||s.push(h),a=h,o=c}),i.length)throw function Cje(){return new K(3502,!1)}();return s}function BU(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&UU(t,"start",n)));break;case"done":n.onDone(()=>r(t&&UU(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&UU(t,"destroy",n)))}}function UU(n,e,t){const s=jU(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function jU(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ra(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Bre(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Fje=typeof document>"u"?null:document.documentElement;function zU(n){const e=n.parentNode||n.host||null;return e===Fje?null:e}let hp=null,Ure=!1;function jre(n,e){for(;e;){if(e===n)return!0;e=zU(e)}return!1}function zre(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let HU=(()=>{class n{validateStyleProperty(t){return function Vje(n){hp||(hp=function Bje(){return typeof document<"u"?document.body:null}()||{},Ure=!!hp.style&&"WebkitAppearance"in hp.style);let e=!0;return hp.style&&!function Lje(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in hp.style,!e&&Ure&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in hp.style)),e}(t)}containsElement(t,r){return jre(t,r)}getParentElement(t){return zU(t)}query(t,r,i){return zre(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new Jb(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class $U{static{this.NOOP=new HU}}class WU{}const jje=1e3,GU="ng-enter",eD="ng-leave",tD="ng-trigger",nD=".ng-trigger",$re="ng-animating",qU=".ng-animating";function ou(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:KU(parseFloat(e[1]),e[2])}function KU(n,e){return"s"===e?n*jje:n}function rD(n,e,t){return n.hasOwnProperty("duration")?n:function Hje(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Lre()),{duration:0,delay:0,easing:""};i=KU(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=KU(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function nje(){return new K(3100,!1)}()),a=!0),s<0&&(e.push(function rje(){return new K(3101,!1)}()),a=!0),a&&e.splice(l,0,Lre())}return{duration:i,delay:s,easing:o}}(n,e,t)}function tc(n,e,t){e.forEach((r,i)=>{const s=YU(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function fp(n,e){e.forEach((t,r)=>{const i=YU(r);n.style[i]=""})}function HI(n){return Array.isArray(n)?1==n.length?n[0]:function EAe(n,e=null){return{type:Pt.Sequence,steps:n,options:e}}(n):n}const QU=new RegExp("{{\\s*(.+?)\\s*}}","g");function Gre(n){let e=[];if("string"==typeof n){let t;for(;t=QU.exec(n);)e.push(t[1]);QU.lastIndex=0}return e}function $I(n,e,t){const r=`${n}`,i=r.replace(QU,(s,o)=>{let a=e[o];return null==a&&(t.push(function sje(){return new K(3003,!1)}()),a=""),a.toString()});return i==r?n:i}const Gje=/-+([a-z0-9])/g;function YU(n){return n.replace(Gje,(...e)=>e[1].toUpperCase())}function ia(n,e,t){switch(e.type){case Pt.Trigger:return n.visitTrigger(e,t);case Pt.State:return n.visitState(e,t);case Pt.Transition:return n.visitTransition(e,t);case Pt.Sequence:return n.visitSequence(e,t);case Pt.Group:return n.visitGroup(e,t);case Pt.Animate:return n.visitAnimate(e,t);case Pt.Keyframes:return n.visitKeyframes(e,t);case Pt.Style:return n.visitStyle(e,t);case Pt.Reference:return n.visitReference(e,t);case Pt.AnimateChild:return n.visitAnimateChild(e,t);case Pt.AnimateRef:return n.visitAnimateRef(e,t);case Pt.Query:return n.visitQuery(e,t);case Pt.Stagger:return n.visitStagger(e,t);default:throw function oje(){return new K(3004,!1)}()}}function XU(n,e){return window.getComputedStyle(n)[e]}const Qje=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class qre extends WU{normalizePropertyName(e,t){return YU(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Qje.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function aje(){return new K(3005,!1)}())}return o+s}}const iD="*";const sD=new Set(["true","1"]),oD=new Set(["false","0"]);function Kre(n,e){const t=sD.has(n)||oD.has(n),r=sD.has(e)||oD.has(e);return(i,s)=>{let o=n==iD||n==i,a=e==iD||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?sD.has(n):oD.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?sD.has(e):oD.has(e)),o&&a}}const Jje=new RegExp("s*:selfs*,?","g");function ZU(n,e,t,r){return new eze(n).build(e,t,r)}class eze{constructor(e){this._driver=e}build(e,t,r){const i=new rze(t);return this._resetContextStyleTimingState(i),ia(this,HI(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function lje(){return new K(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Pt.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==Pt.Transition){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function cje(){return new K(3007,!1)}())}),{type:Pt.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Gre(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(function uje(){return new K(3008,!1)}(0,s.values()))}return{type:Pt.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ia(this,HI(e.animation),t),i=function Yje(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Xje(n,e,t){if(":"==n[0]){const l=function Zje(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function bje(){return new K(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function vje(){return new K(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(Kre(i,o)),"<"==s[0]&&(i!=iD||o!=iD)&&e.push(Kre(o,i))}(r,t,e)):t.push(n),t}(e.expr,t.errors);return{type:Pt.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:pp(e.options)}}visitSequence(e,t){return{type:Pt.Sequence,steps:e.steps.map(r=>ia(this,r,t)),options:pp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=ia(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Pt.Group,steps:s,options:pp(e.options)}}visitAnimate(e,t){const r=function sze(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return JU(rD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=JU(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=rD(t,e);return JU(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Si({});if(s.type==Pt.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Si(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:Pt.Animate,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Lc?r.push(a):t.errors.push(new K(3002,!1)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:Pt.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let h=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(function hje(){return new K(3010,!1)}()),h=!1),s=u.startTime),h&&c.set(l,{startTime:s,endTime:i}),t.options&&function Wje(n,e,t){const r=e.params||{},i=Gre(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function ije(){return new K(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:Pt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function fje(){return new K(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(B=>{const V=this._makeStyleAst(B,t);let Q=null!=V.offset?V.offset:function ize(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),be=0;return null!=Q&&(s++,be=V.offset=Q),l=l||be<0||be>1,a=a||be<c,c=be,o.push(be),V});l&&t.errors.push(function pje(){return new K(3012,!1)}()),a&&t.errors.push(function mje(){return new K(3200,!1)}());const h=e.steps.length;let m=0;s>0&&s<h?t.errors.push(function gje(){return new K(3202,!1)}()):0==s&&(m=1/(h-1));const y=h-1,b=t.currentTime,T=t.currentAnimateTimings,M=T.duration;return u.forEach((B,V)=>{const Q=m>0?V==y?1:m*V:o[V],be=Q*M;t.currentTime=b+T.delay+be,T.duration=be,this._validateStyleAst(B,t),B.offset=Q,r.styles.push(B)}),r}visitReference(e,t){return{type:Pt.Reference,animation:ia(this,HI(e.animation),t),options:pp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Pt.AnimateChild,options:pp(e.options)}}visitAnimateRef(e,t){return{type:Pt.AnimateRef,animation:this.visitReference(e.animation,t),options:pp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function tze(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Jje,"")),n=n.replace(/@\*/g,nD).replace(/@\w+/g,t=>nD+"-"+t.slice(1)).replace(/:animating/g,qU),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ra(t.collectedStyles,t.currentQuerySelector,new Map);const a=ia(this,HI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Pt.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:pp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function _je(){return new K(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:rD(e.timings,t.errors,!0);return{type:Pt.Stagger,animation:ia(this,HI(e.animation),t),timings:r,options:null}}}class rze{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function pp(n){return n?(n={...n}).params&&(n.params=function nze(n){return n?{...n}:null}(n.params)):n={},n}function JU(n,e,t){return{duration:n,delay:e,easing:t}}function ej(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class aD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const lze=new RegExp(":enter","g"),uze=new RegExp(":leave","g");function tj(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new dze).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class dze{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new aD;const h=new nj(e,t,c,i,s,u,[]);h.options=l;const m=l.delay?ou(l.delay):0;h.currentTimeline.delayNextStep(m),h.currentTimeline.setStyles([o],null,h.errors,l),ia(this,r,h);const y=h.timelines.filter(b=>b.containsAnimation());if(y.length&&a.size){let b;for(let T=y.length-1;T>=0;T--){const M=y[T];if(M.element===t){b=M;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,h.errors,l)}return y.length?y.map(b=>b.buildKeyframes()):[ej(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:ou($I(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?ou(r.duration):null,a=null!=r.delay?ou(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ia(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){i.previousNode.type==Pt.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=lD);const o=ou(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ia(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ou(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),ia(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return rD(t.params?$I(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;s.type==Pt.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ou(i.delay):0;s&&(t.previousNode.type===Pt.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=lD);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const h=t.createSubContext(e.options,c);s&&h.delayNextStep(s),c===t.element&&(l=h.currentTimeline),ia(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;ia(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}}const lD={};class nj{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new cD(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ou(r.duration)),null!=r.delay&&(i.delay=ou(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=$I(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new nj(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=lD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new hze(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(lze,"."+this._enterClassName)).replace(uze,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function yje(){return new K(3014,!1)}()),a}}class cD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new cD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Lc),this._currentKeyframe.set(t,Lc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function fze(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r??=e.keys();for(let s of r)t.set(s,Lc)}else for(let[s,o]of i)t.set(s,o)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=$I(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Lc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((u,h)=>{"!"===u?e.add(h):u===Lc&&t.add(h)}),r||c.set("offset",l/this.duration),i.push(c)});const s=[...e.values()],o=[...t.values()];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return ej(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class hze extends cD{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);const c=new Map(e[0]);c.set("offset",Xre(a)),s.push(c);const u=e.length-1;for(let h=1;h<=u;h++){let m=new Map(e[h]);const y=m.get("offset");m.set("offset",Xre((t+y*r)/o)),s.push(m)}r=o,t=0,i="",e=s}return ej(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Xre(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function Zre(n,e,t,r,i,s,o,a,l,c,u,h,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:m}}const rj={};class Jre{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function pze(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,u){const h=[],m=this.ast.options&&this.ast.options.params||rj,b=this.buildStyles(r,a&&a.params||rj,h),T=l&&l.params||rj,M=this.buildStyles(i,T,h),B=new Set,V=new Map,Q=new Map,be="void"===i,Be={params:eie(T,m),delay:this.ast.options?.delay},je=u?[]:tj(e,t,this.ast.animation,s,o,b,M,Be,c,h);let H=0;return je.forEach(L=>{H=Math.max(L.duration+L.delay,H)}),h.length?Zre(t,this._triggerName,r,i,be,b,M,[],[],V,Q,H,h):(je.forEach(L=>{const W=L.element,J=ra(V,W,new Set);L.preStyleProps.forEach(re=>J.add(re));const ne=ra(Q,W,new Set);L.postStyleProps.forEach(re=>ne.add(re)),W!==t&&B.add(W)}),Zre(t,this._triggerName,r,i,be,b,M,je,[...B.values()],V,Q,H))}}function eie(n,e){const t={...e};return Object.entries(n).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class mze{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=eie(e,this.defaultParams);return this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=$I(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class _ze{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new mze(i.style,i.options&&i.options.params||{},r))}),tie(this.states,"true","1"),tie(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Jre(e,i,this.states))}),this.fallbackTransition=function yze(n,e){return new Jre(n,{type:Pt.Transition,animation:{type:Pt.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function tie(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const vze=new aD;class bze{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=ZU(this._driver,t,r,[]);if(r.length)throw function Tje(){return new K(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Vre(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=tj(this._driver,t,s,GU,eD,new Map,new Map,r,vze,i),o.forEach(u=>{const h=ra(a,u.element,new Map);u.postStyleProps.forEach(m=>h.set(m,null))})):(i.push(function Aje(){return new K(3300,!1)}()),o=[]),i.length)throw function Sje(){return new K(3504,!1)}();a.forEach((u,h)=>{u.forEach((m,y)=>{u.set(y,this._driver.computeStyle(h,y,Lc))})});const c=zd(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,new Map,h)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function xje(){return new K(3301,!1)}();return t}listen(e,t,r,i){const s=jU(t,"","","");return BU(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const nie="ng-animate-queued",ij="ng-animate-disabled",Tze=[],rie={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Aze={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hl="__ng_removed";class sj{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Rze(n){return n??null}(r?e.value:e),r){const{value:s,...o}=e;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const WI="void",oj=new sj(WI);class Sze{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Pa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Dje(){return new K(3302,!1)}();if(null==r||0==r.length)throw function Rje(){return new K(3303,!1)}();if(!function Mze(n){return"start"==n||"done"==n}(r))throw function Mje(){return new K(3400,!1)}();const s=ra(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=ra(this._engine.statesByElement,e,new Map);return a.has(t)||(Pa(e,tD),Pa(e,tD+"-"+t),a.set(t,oj)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Pje(){return new K(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new aj(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Pa(e,tD),Pa(e,tD+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new sj(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=oj),c.value!==WI&&l.value===c.value){if(!function Nze(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const T=[],M=s.matchStyles(l.value,l.params,T),B=s.matchStyles(c.value,c.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{fp(e,M),tc(e,B)})}return}const m=ra(this._engine.playersByElement,e,[]);m.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let y=s.matchTransition(l.value,c.value,e,c.params),b=!1;if(!y){if(!i)return;y=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:b}),b||(Pa(e,nie),o.onStart(()=>{q_(e,nie)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const M=this._engine.playersByElement.get(e);if(M){let B=M.indexOf(o);B>=0&&M.splice(B,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,nD,!0);r.forEach(i=>{if(i[hl])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,WI,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&zd(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||oj,u=new sj(WI),h=new aj(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[hl];(!s||s===rie)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Pa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=jU(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,BU(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class xze{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Sze(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(uD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!uD(t))return;const s=t[hl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Pa(e,ij)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),q_(e,ij))}removeNode(e,t,r){if(uD(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[hl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return uD(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,nD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,qU,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return zd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[hl];if(t&&t.setForRemoval){if(e[hl]=rie,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ij)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Pa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?zd(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function kje(){return new K(3402,!1)}()}_flushAnimations(e,t){const r=new aD,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(ot=>{u.add(ot);const ft=this.driver.query(ot,".ng-animate-queued",!0);for(let bt=0;bt<ft.length;bt++)u.add(ft[bt])});const h=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=oie(m,this.collectedEnterElements),b=new Map;let T=0;y.forEach((ot,ft)=>{const bt=GU+T++;b.set(ft,bt),ot.forEach(hn=>Pa(hn,bt))});const M=[],B=new Set,V=new Set;for(let ot=0;ot<this.collectedLeaveElements.length;ot++){const ft=this.collectedLeaveElements[ot],bt=ft[hl];bt&&bt.setForRemoval&&(M.push(ft),B.add(ft),bt.hasAnimation?this.driver.query(ft,".ng-star-inserted",!0).forEach(hn=>B.add(hn)):V.add(ft))}const Q=new Map,be=oie(m,Array.from(B));be.forEach((ot,ft)=>{const bt=eD+T++;Q.set(ft,bt),ot.forEach(hn=>Pa(hn,bt))}),e.push(()=>{y.forEach((ot,ft)=>{const bt=b.get(ft);ot.forEach(hn=>q_(hn,bt))}),be.forEach((ot,ft)=>{const bt=Q.get(ft);ot.forEach(hn=>q_(hn,bt))}),M.forEach(ot=>{this.processLeaveNode(ot)})});const Be=[],je=[];for(let ot=this._namespaceList.length-1;ot>=0;ot--)this._namespaceList[ot].drainQueuedTransitions(t).forEach(bt=>{const hn=bt.player,Ii=bt.element;if(Be.push(hn),this.collectedEnterElements.length){const ci=Ii[hl];if(ci&&ci.setForMove){if(ci.previousTriggersValues&&ci.previousTriggersValues.has(bt.triggerName)){const uu=ci.previousTriggersValues.get(bt.triggerName),ko=this.statesByElement.get(bt.element);if(ko&&ko.has(bt.triggerName)){const du=ko.get(bt.triggerName);du.value=uu,ko.set(bt.triggerName,du)}}return void hn.destroy()}}const Fa=!h||!this.driver.containsElement(h,Ii),li=Q.get(Ii),Mr=b.get(Ii),Pr=this._buildInstruction(bt,r,Mr,li,Fa);if(Pr.errors&&Pr.errors.length)return void je.push(Pr);if(Fa)return hn.onStart(()=>fp(Ii,Pr.fromStyles)),hn.onDestroy(()=>tc(Ii,Pr.toStyles)),void i.push(hn);if(bt.isFallbackTransition)return hn.onStart(()=>fp(Ii,Pr.fromStyles)),hn.onDestroy(()=>tc(Ii,Pr.toStyles)),void i.push(hn);const eh=[];Pr.timelines.forEach(ci=>{ci.stretchStartingKeyframe=!0,this.disabledNodes.has(ci.element)||eh.push(ci)}),Pr.timelines=eh,r.append(Ii,Pr.timelines),o.push({instruction:Pr,player:hn,element:Ii}),Pr.queriedElements.forEach(ci=>ra(a,ci,[]).push(hn)),Pr.preStyleProps.forEach((ci,uu)=>{if(ci.size){let ko=l.get(uu);ko||l.set(uu,ko=new Set),ci.forEach((du,th)=>ko.add(th))}}),Pr.postStyleProps.forEach((ci,uu)=>{let ko=c.get(uu);ko||c.set(uu,ko=new Set),ci.forEach((du,th)=>ko.add(th))})});if(je.length){const ot=[];je.forEach(ft=>{ot.push(function Nje(){return new K(3505,!1)}())}),Be.forEach(ft=>ft.destroy()),this.reportError(ot)}const H=new Map,L=new Map;o.forEach(ot=>{const ft=ot.element;r.has(ft)&&(L.set(ft,ft),this._beforeAnimationBuild(ot.player.namespaceId,ot.instruction,H))}),i.forEach(ot=>{const ft=ot.element;this._getPreviousPlayers(ft,!1,ot.namespaceId,ot.triggerName,null).forEach(hn=>{ra(H,ft,[]).push(hn),hn.destroy()})});const W=M.filter(ot=>lie(ot,l,c)),J=new Map;sie(J,this.driver,V,c,Lc).forEach(ot=>{lie(ot,l,c)&&W.push(ot)});const re=new Map;y.forEach((ot,ft)=>{sie(re,this.driver,new Set(ot),l,"!")}),W.forEach(ot=>{const ft=J.get(ot),bt=re.get(ot);J.set(ot,new Map([...ft?.entries()??[],...bt?.entries()??[]]))});const q=[],Hr=[],aa={};o.forEach(ot=>{const{element:ft,player:bt,instruction:hn}=ot;if(r.has(ft)){if(u.has(ft))return bt.onDestroy(()=>tc(ft,hn.toStyles)),bt.disabled=!0,bt.overrideTotalTime(hn.totalTime),void i.push(bt);let Ii=aa;if(L.size>1){let li=ft;const Mr=[];for(;li=li.parentNode;){const Pr=L.get(li);if(Pr){Ii=Pr;break}Mr.push(li)}Mr.forEach(Pr=>L.set(Pr,Ii))}const Fa=this._buildAnimation(bt.namespaceId,hn,H,s,re,J);if(bt.setRealPlayer(Fa),Ii===aa)q.push(bt);else{const li=this.playersByElement.get(Ii);li&&li.length&&(bt.parentPlayer=zd(li)),i.push(bt)}}else fp(ft,hn.fromStyles),bt.onDestroy(()=>tc(ft,hn.toStyles)),Hr.push(bt),u.has(ft)&&i.push(bt)}),Hr.forEach(ot=>{const ft=s.get(ot.element);if(ft&&ft.length){const bt=zd(ft);ot.setRealPlayer(bt)}}),i.forEach(ot=>{ot.parentPlayer?ot.syncPlayerEvents(ot.parentPlayer):ot.destroy()});for(let ot=0;ot<M.length;ot++){const ft=M[ot],bt=ft[hl];if(q_(ft,eD),bt&&bt.hasAnimation)continue;let hn=[];if(a.size){let Fa=a.get(ft);Fa&&Fa.length&&hn.push(...Fa);let li=this.driver.query(ft,qU,!0);for(let Mr=0;Mr<li.length;Mr++){let Pr=a.get(li[Mr]);Pr&&Pr.length&&hn.push(...Pr)}}const Ii=hn.filter(Fa=>!Fa.destroyed);Ii.length?Pze(this,ft,Ii):this.processLeaveNode(ft)}return M.length=0,q.forEach(ot=>{this.players.push(ot),ot.onDone(()=>{ot.destroy();const ft=this.players.indexOf(ot);this.players.splice(ft,1)}),ot.play()}),q}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==WI;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,h=ra(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(y=>{const b=y.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),y.destroy(),h.push(y)})}fp(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,m=t.timelines.map(b=>{const T=b.element;u.add(T);const M=T[hl];if(M&&M.removedBeforeQueried)return new Jb(b.duration,b.delay);const B=T!==l,V=function kze(n){const e=[];return aie(n,e),e}((r.get(T)||Tze).map(H=>H.getRealPlayer())).filter(H=>!!H.element&&H.element===T),Q=s.get(T),be=o.get(T),Be=Vre(this._normalizer,b.keyframes,Q,be),je=this._buildPlayer(b,Be,V);if(b.subTimeline&&i&&h.add(T),B){const H=new aj(e,a,T);H.setRealPlayer(je),c.push(H)}return je});c.forEach(b=>{ra(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function Dze(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),u.forEach(b=>Pa(b,$re));const y=zd(m);return y.onDestroy(()=>{u.forEach(b=>q_(b,$re)),tc(l,t.toStyles)}),h.forEach(b=>{ra(i,b,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Jb(e.duration,e.delay)}}class aj{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Jb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>BU(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ra(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function uD(n){return n&&1===n.nodeType}function iie(n,e){const t=n.style.display;return n.style.display=e??"none",t}function sie(n,e,t,r,i){const s=[];t.forEach(l=>s.push(iie(l)));const o=[];r.forEach((l,c)=>{const u=new Map;l.forEach(h=>{const m=e.computeStyle(c,h,i);u.set(h,m),(!m||0==m.length)&&(c[hl]=Aze,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>iie(l,s[a++])),o}function oie(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Pa(n,e){n.classList?.add(e)}function q_(n,e){n.classList?.remove(e)}function Pze(n,e,t){zd(t).onDone(()=>n.processLeaveNode(e))}function aie(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof rQ?aie(r.players,e):e.push(r)}}function lie(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class GI{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new xze(e.body,t,r),this._timelineEngine=new bze(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=ZU(this._driver,s,l,[]);if(l.length)throw function wje(){return new K(3404,!1)}();a=function gze(n,e,t){return new _ze(n,e,t)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=Bre(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=Bre(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class qI{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=qI.initialStylesByElement.get(e);i||qI.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&tc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tc(this._element,this._initialStyles),this._endStyles&&(tc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(qI.initialStylesByElement.delete(this._element),this._startStyles&&(fp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fp(this._element,this._endStyles),this._endStyles=null),tc(this._element,this._initialStyles),this._state=3)}}function lj(n){let e=null;return n.forEach((t,r)=>{(function Fze(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class cie{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:XU(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class uie{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return jre(e,t)}getParentElement(e){return zU(e)}query(e,t,r){return zre(e,t,r)}computeStyle(e,t,r){return XU(e,t)}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(y=>y instanceof cie);(function qje(n,e){return 0===n||0===e})(r,i)&&u.forEach(y=>{y.currentSnapshot.forEach((b,T)=>c.set(T,b))});let h=function $je(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(y=>new Map(y));h=function Kje(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,XU(n,a)))}}return e}(e,h,c);const m=function Oze(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=lj(e[0]),e.length>1&&(r=lj(e[e.length-1]))):e instanceof Map&&(t=lj(e)),t||r?new qI(n,t,r):null}(e,h);return new cie(e,h,l,m)}}const die="@.disabled";class hie{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==die?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Lze extends hie{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==die?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Vze(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Bze(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}class Uze{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const c=this._rendererCache;let u=c.get(i);return u||(u=new hie("",i,this.engine,()=>c.delete(i)),c.set(i,u)),u}const s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new Lze(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const fie=[{provide:WU,useFactory:function zze(){return new qre}},{provide:GI,useClass:(()=>{class n extends GI{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(Re(pn),Re($U),Re(WU))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})()},{provide:Gh,useFactory:function Hze(n,e,t){return new Uze(n,e,t)},deps:[hN,GI,_t]}],cj=[{provide:$U,useFactory:()=>new uie},{provide:Tl,useValue:"BrowserAnimations"},...fie],pie=[{provide:$U,useClass:HU},{provide:Tl,useValue:"NoopAnimations"},...fie];let $ze=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?pie:cj}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Ht({providers:cj,imports:[eq]})}}return n})();const mie="@firebase/installations",uj="0.6.9",gie=1e4,_ie=`w:${uj}`,yie="FIS_v2",Wze="https://firebaseinstallations.googleapis.com/v1",Gze=36e5,au=new N.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vie(n){return n instanceof N.g&&n.code.includes("request-failed")}function dj({projectId:n}){return`${Wze}/projects/${n}/installations`}function bie(n){return{token:n.token,requestStatus:2,expiresIn:Yze(n.expiresIn),creationTime:Date.now()}}function hj(n,e){return fj.apply(this,arguments)}function fj(){return(fj=(0,O.A)(function*(n,e){const r=(yield e.json()).error;return au.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function Eie({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function pj(n){return mj.apply(this,arguments)}function mj(){return(mj=(0,O.A)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Yze(n){return Number(n.replace("s","000"))}function gj(){return(gj=(0,O.A)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=dj(n),i=Eie(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:yie,appId:n.appId,sdkVersion:_ie})},l=yield pj(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:bie(c.authToken)}}throw yield hj("Create Installation",l)})).apply(this,arguments)}function wie(n){return new Promise(e=>{setTimeout(e,n)})}const eHe=/^[cdef][\w-]{21}$/,_j="";function tHe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function nHe(n){return function Jze(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return eHe.test(t)?t:_j}catch{return _j}}function K_(n){return`${n.appName}!${n.appId}`}const Q_=new Map;function Cie(n,e){const t=K_(n);Tie(t,e),function sHe(n,e){const t=function Aie(){return!mp&&"BroadcastChannel"in self&&(mp=new BroadcastChannel("[Firebase] FID Change"),mp.onmessage=n=>{Tie(n.data.key,n.data.fid)}),mp}();t&&t.postMessage({key:n,fid:e}),function Sie(){0===Q_.size&&mp&&(mp.close(),mp=null)}()}(t,e)}function Tie(n,e){const t=Q_.get(n);if(t)for(const r of t)r(e)}let mp=null;const oHe="firebase-installations-database",aHe=1,gp="firebase-installations-store";let yj=null;function vj(){return yj||(yj=(0,xQ.P2)(oHe,aHe,{upgrade:(n,e)=>{0===e&&n.createObjectStore(gp)}})),yj}function hD(n,e){return bj.apply(this,arguments)}function bj(){return(bj=(0,O.A)(function*(n,e){const t=K_(n),i=(yield vj()).transaction(gp,"readwrite"),s=i.objectStore(gp),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&Cie(n,e.fid),e})).apply(this,arguments)}function Ej(n){return Ij.apply(this,arguments)}function Ij(){return(Ij=(0,O.A)(function*(n){const e=K_(n),r=(yield vj()).transaction(gp,"readwrite");yield r.objectStore(gp).delete(e),yield r.done})).apply(this,arguments)}function KI(n,e){return wj.apply(this,arguments)}function wj(){return(wj=(0,O.A)(function*(n,e){const t=K_(n),i=(yield vj()).transaction(gp,"readwrite"),s=i.objectStore(gp),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&Cie(n,a.fid),a})).apply(this,arguments)}function Cj(n){return Tj.apply(this,arguments)}function Tj(){return Tj=(0,O.A)(function*(n){let e;const t=yield KI(n.appConfig,r=>{const i=function lHe(n){return Die(n||{fid:tHe(),registrationStatus:0})}(r),s=function cHe(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(au.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function uHe(n,e){return Aj.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:dHe(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===_j?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Tj.apply(this,arguments)}function Aj(){return Aj=(0,O.A)(function*(n,e){try{const t=yield function Zze(n,e){return gj.apply(this,arguments)}(n,e);return hD(n.appConfig,t)}catch(t){throw vie(t)&&409===t.customData.serverCode?yield Ej(n.appConfig):yield hD(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),Aj.apply(this,arguments)}function dHe(n){return Sj.apply(this,arguments)}function Sj(){return(Sj=(0,O.A)(function*(n){let e=yield xie(n.appConfig);for(;1===e.registrationStatus;)yield wie(100),e=yield xie(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Cj(n);return r||t}return e})).apply(this,arguments)}function xie(n){return KI(n,e=>{if(!e)throw au.create("installation-not-found");return Die(e)})}function Die(n){return function hHe(n){return 1===n.registrationStatus&&n.registrationTime+gie<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function xj(){return(xj=(0,O.A)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function pHe(n,{fid:e}){return`${dj(n)}/${e}/authTokens:generate`}(n,t),i=function Iie(n,{refreshToken:e}){const t=Eie(n);return t.append("Authorization",function Xze(n){return`${yie} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:_ie,appId:n.appId}})},l=yield pj(()=>fetch(r,a));if(l.ok)return bie(yield l.json());throw yield hj("Generate Auth Token",l)})).apply(this,arguments)}function Dj(n){return Rj.apply(this,arguments)}function Rj(){return Rj=(0,O.A)(function*(n,e=!1){let t;const r=yield KI(n.appConfig,s=>{if(!Mie(s))throw au.create("not-registered");const o=s.authToken;if(!e&&function _He(n){return 2===n.requestStatus&&!function yHe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Gze}(n)}(o))return s;if(1===o.requestStatus)return t=function mHe(n,e){return Mj.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw au.create("app-offline");const a=function vHe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function gHe(n,e){return Pj.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),Rj.apply(this,arguments)}function Mj(){return(Mj=(0,O.A)(function*(n,e){let t=yield Rie(n.appConfig);for(;1===t.authToken.requestStatus;)yield wie(100),t=yield Rie(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Dj(n,e):r})).apply(this,arguments)}function Rie(n){return KI(n,e=>{if(!Mie(e))throw au.create("not-registered");return function bHe(n){return 1===n.requestStatus&&n.requestTime+gie<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Pj(){return Pj=(0,O.A)(function*(n,e){try{const t=yield function fHe(n,e){return xj.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield hD(n.appConfig,r),t}catch(t){if(!vie(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield hD(n.appConfig,r)}else yield Ej(n.appConfig);throw t}}),Pj.apply(this,arguments)}function Mie(n){return void 0!==n&&2===n.registrationStatus}function kj(){return(kj=(0,O.A)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Cj(e);return r?r.catch(console.error):Dj(e).catch(console.error),t.fid})).apply(this,arguments)}function Nj(){return Nj=(0,O.A)(function*(n,e=!1){const t=n;return yield function wHe(n){return Oj.apply(this,arguments)}(t),(yield Dj(t,e)).token}),Nj.apply(this,arguments)}function Oj(){return(Oj=(0,O.A)(function*(n){const{registrationPromise:e}=yield Cj(n);e&&(yield e)})).apply(this,arguments)}function Vj(n){return au.create("missing-app-config-values",{valueName:n})}const Pie="installations",xHe=n=>{const e=n.getProvider("app").getImmediate(),t=function AHe(n){if(!n||!n.options)throw Vj("App Configuration");if(!n.name)throw Vj("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Vj(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,$n._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},DHe=n=>{const e=n.getProvider("app").getImmediate(),t=(0,$n._getProvider)(e,Pie).getImmediate();return{getId:()=>function EHe(n){return kj.apply(this,arguments)}(t),getToken:i=>function IHe(n){return Nj.apply(this,arguments)}(t,i)}};(function RHe(){(0,$n._registerComponent)(new Yo.uA(Pie,xHe,"PUBLIC")),(0,$n._registerComponent)(new Yo.uA("installations-internal",DHe,"PRIVATE"))})(),(0,$n.registerVersion)(mie,uj),(0,$n.registerVersion)(mie,uj,"esm2017");const fD="analytics",MHe="firebase_id",PHe="origin",kHe=6e4,NHe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bj="https://www.googletagmanager.com/gtag/js",rs=new Ao.Vy("@firebase/analytics"),io=new N.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function FHe(n){if(!n.startsWith(Bj)){const e=io.create("invalid-gtag-resource",{gtagURL:n});return rs.warn(e.message),""}return n}function kie(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Uj(){return(Uj=(0,O.A)(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield kie(t)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){rs.error(a)}n("config",i,s)})).apply(this,arguments)}function jj(){return(jj=(0,O.A)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield kie(t);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){rs.error(s)}})).apply(this,arguments)}const WHe=30,Nie=new class qHe{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function KHe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function zj(){return(zj=(0,O.A)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:KHe(r)},s=NHe.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw io.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Hj(){return(Hj=(0,O.A)(function*(n,e=Nie,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw io.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw io.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new JHe;return setTimeout((0,O.A)(function*(){a.abort()}),void 0!==t?t:kHe),Oie({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function Oie(n,e,t){return $j.apply(this,arguments)}function $j(){return $j=(0,O.A)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Nie){var s;const{appId:o,measurementId:a}=n;try{yield function XHe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(io.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(l){if(a)return rs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield function QHe(n){return zj.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!function ZHe(n){if(!(n instanceof N.g&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return rs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?(0,N.p9)(t,i.intervalMillis,WHe):(0,N.p9)(t,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,h),rs.debug(`Calling attemptFetch again in ${u} millis`),Oie(n,h,r,i)}}),$j.apply(this,arguments)}class JHe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Wj,Zj;function Gj(){return(Gj=(0,O.A)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function Jj(){return(Jj=(0,O.A)(function*(){if(!(0,N.zW)())return rs.warn(io.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,N.eX)()}catch(n){return rs.warn(io.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function ez(){return ez=(0,O.A)(function*(n,e,t,r,i,s,o){var a;const l=function YHe(n){return Hj.apply(this,arguments)}(n);l.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&rs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>rs.error(y)),e.push(l);const c=function o4e(){return Jj.apply(this,arguments)}().then(y=>{if(y)return r.getId()}),[u,h]=yield Promise.all([l,c]);(function $He(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Bj)&&t.src.includes(n))return t;return null})(s)||function VHe(n,e){const t=function LHe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:FHe}),r=document.createElement("script"),i=`${Bj}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),Zj&&(i("consent","default",Zj),function Fie(n){Zj=n}(void 0)),i("js",new Date);const m=null!==(a=o?.config)&&void 0!==a?a:{};return m[PHe]="firebase",m.update=!0,null!=h&&(m[MHe]=h),i("config",u.measurementId,m),Wj&&(i("set",Wj),function Lie(n){Wj=n}(void 0)),u.measurementId}),ez.apply(this,arguments)}class l4e{constructor(e){this.app=e}_delete(){return delete nc[this.app.options.appId],Promise.resolve()}}let nc={},Vie=[];const Bie={};let jie,rc,pD="dataLayer",tz=!1;function u4e(n,e,t){!function c4e(){const n=[];if((0,N.sr)()&&n.push("This is a browser extension environment."),(0,N.dM)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=io.create("invalid-analytics-context",{errorInfo:e});rs.warn(t.message)}}();const r=n.options.appId;if(!r)throw io.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw io.create("no-api-key");rs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=nc[r])throw io.create("already-exists",{id:r});if(!tz){!function BHe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(pD);const{wrappedGtag:s,gtagCore:o}=function HHe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function zHe(n,e,t,r){function s(){return s=(0,O.A)(function*(o,...a){try{if("event"===o){const[l,c]=a;yield function jHe(n,e,t,r,i){return jj.apply(this,arguments)}(n,e,t,l,c)}else if("config"===o){const[l,c]=a;yield function UHe(n,e,t,r,i,s){return Uj.apply(this,arguments)}(n,e,t,r,l,c)}else if("consent"===o){const[l,c]=a;n("consent",l,c)}else if("get"===o){const[l,c,u]=a;n("get",l,c,u)}else if("set"===o){const[l]=a;n("set",l)}else n(o,...a)}catch(l){rs.error(l)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(nc,Vie,Bie,pD,"gtag");rc=s,jie=o,tz=!0}return nc[r]=function a4e(n,e,t,r,i,s,o){return ez.apply(this,arguments)}(n,Vie,Bie,e,jie,pD,t),new l4e(n)}function d4e(n=(0,$n.getApp)()){n=(0,N.Ku)(n);const e=(0,$n._getProvider)(n,fD);return e.isInitialized()?e.getImmediate():function h4e(n,e={}){const t=(0,$n._getProvider)(n,fD);if(t.isInitialized()){const i=t.getImmediate();if((0,N.bD)(e,t.getOptions()))return i;throw io.create("already-initialized")}return t.initialize({options:e})}(n)}function f4e(){return nz.apply(this,arguments)}function nz(){return(nz=(0,O.A)(function*(){if((0,N.sr)()||!(0,N.dM)()||!(0,N.zW)())return!1;try{return yield(0,N.eX)()}catch{return!1}})).apply(this,arguments)}const zie="@firebase/analytics";!function m4e(){(0,$n._registerComponent)(new Yo.uA(fD,(e,{options:t})=>u4e(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,$n._registerComponent)(new Yo.uA("analytics-internal",function n(e){try{const t=e.getProvider(fD).getImmediate();return{logEvent:(r,i,s)=>function p4e(n,e,t,r){n=(0,N.Ku)(n),function e4e(n,e,t,r,i){return Gj.apply(this,arguments)}(rc,nc[n.app.options.appId],e,t,r).catch(i=>rs.error(i))}(t,r,i,s)}}catch(t){throw io.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,$n.registerVersion)(zie,"0.10.8"),(0,$n.registerVersion)(zie,"0.10.8","esm2017")}();class iz{constructor(e){return e}}const sz="__angularfire_symbol__analyticsIsSupportedValue",Wie="__angularfire_symbol__analyticsIsSupported";globalThis[Wie]||=f4e().then(n=>globalThis[sz]=n).catch(()=>globalThis[sz]=!1);const mD={async:()=>globalThis[Wie],sync:()=>{const n=globalThis[sz];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Analytics"));return n}},_4e=Vc(d4e,!0),lz=new ye("angularfire2.analytics-instances");function M4e(n){return(e,t)=>{if(!mD.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new iz(r)}}const P4e={provide:class g4e{constructor(){return oO("analytics")}},deps:[[new Mi,lz]]},k4e={provide:iz,useFactory:function R4e(n,e){if(!mD.sync())return null;const t=gQ("analytics",n,e);return t&&new iz(t)},deps:[[new Mi,lz],eE]};function N4e(n,...e){return(0,$n.registerVersion)("angularfire",id.full,"analytics"),El([k4e,P4e,{provide:qC,useValue:mD.async,multi:!0},{provide:lz,useFactory:M4e(n),multi:!0,deps:[_t,Rn,Vg,aO,...e]}])}const Kie="@firebase/database";let cz="";function uz(n){cz=n}class L4e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class V4e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Yie=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new L4e(e)}}catch{}return new V4e},_p=Yie("localStorage"),dz=Yie("sessionStorage"),Y_=new Ao.Vy("@firebase/database"),Xie=function(){let n=1;return function(){return n++}}(),Zie=function(n){const e=(0,N.kj)(n),t=new N.gz;t.update(e);const r=t.digest();return N.K3.encodeByteArray(r)},YI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=YI.apply(null,r):e+="object"==typeof r?(0,N.As)(r):r,e+=" "}return e};let yp=null,Jie=!0;const ese=function(n,e){(0,N.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Y_.logLevel=Ao.$b.VERBOSE,yp=Y_.log.bind(Y_),e&&dz.set("logging_enabled",!0)):"function"==typeof n?yp=n:(yp=null,dz.remove("logging_enabled"))},is=function(...n){if(!0===Jie&&(Jie=!1,null===yp&&!0===dz.get("logging_enabled")&&ese(!0)),yp){const e=YI.apply(null,n);yp(e)}},XI=function(n){return function(...e){is(n,...e)}},hz=function(...n){const e="FIREBASE INTERNAL ERROR: "+YI(...n);Y_.error(e)},ic=function(...n){const e=`FIREBASE FATAL ERROR: ${YI(...n)}`;throw Y_.error(e),new Error(e)},Ls=function(...n){const e="FIREBASE WARNING: "+YI(...n);Y_.warn(e)},gD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Hd="[MIN_NAME]",lu="[MAX_NAME]",vp=function(n,e){if(n===e)return 0;if(n===Hd||e===lu)return-1;if(e===Hd||n===lu)return 1;{const t=rse(n),r=rse(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},j4e=function(n,e){return n===e?0:n<e?-1:1},ZI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.As)(e))},fz=function(n){if("object"!=typeof n||null===n)return(0,N.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.As)(e[r]),t+=":",t+=fz(n[e[r]]);return t+="}",t},tse=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ss(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const nse=function(n){(0,N.vA)(!gD(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),h+=m}return h.toLowerCase()},W4e=new RegExp("^-?(0*)\\d{1,10}$"),rse=function(n){if(W4e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},X_=function(n){try{n()}catch(e){setTimeout(()=>{throw Ls("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},JI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Q4e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Y4e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(is("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ls(e)}}let ew=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const lse=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hse="long_polling";class mz{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_p.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_p.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function fse(n,e,t){let r;if((0,N.vA)("string"==typeof e,"typeof type must == string"),(0,N.vA)("object"==typeof t,"typeof params must == object"),"websocket"===e)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==hse)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function X4e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ss(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Z4e{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.A4)(this.counters_)}}const gz={},_z={};function yz(n){const e=n.toString();return gz[e]||(gz[e]=new Z4e),gz[e]}class e$e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&X_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $d{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=XI(e),this.stats_=yz(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),fse(t,hse,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new e$e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vz((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&lse.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$d.forceAllow_=!0}static forceDisallow(){$d.forceDisallow_=!0}static isAvailable(){return!((0,N.$g)()||!$d.forceAllow_&&($d.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.KA)(t),i=tse(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class vz{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Xie(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=vz.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){is("frame writing exception"),a.stack&&is(a.stack),is(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||is("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{is("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let yD=null;typeof MozWebSocket<"u"?yD=MozWebSocket:typeof WebSocket<"u"&&(yD=WebSocket);let Z_=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=XI(this.connId),this.stats_=yz(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,N.$g)()&&typeof location<"u"&&location.hostname&&lse.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),fse(t,"websocket",a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_p.set("previous_websocket_failure",!0);try{let i;if((0,N.$g)()){i={headers:{"User-Agent":`Firebase/5/${cz}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new yD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==yD&&!n.forceDisallow_}static previouslyFailed(){return _p.isInMemoryStorage||!0===_p.get("previous_websocket_failure")}markConnectionHealthy(){_p.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=tse(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),bse=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[$d,Z_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Z_&&Z_.isAvailable();let i=r&&!Z_.previouslyFailed();if(t.webSocketOnly&&(r||Ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Z_];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Sse{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=XI("c:"+this.id+":"),this.transportManager_=new bse(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=JI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ZI("t",e),r=ZI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ZI("t",e),r=ZI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ZI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?hz("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hz("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),JI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):JI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class xse{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Dse{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,N.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class vD extends Dse{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vD}getInitialEvent(e){return(0,N.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class qn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new qn("")}function on(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Wd(n){return n.pieces_.length-n.pieceNum_}function dr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new qn(n.pieces_,e)}function Ez(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function tw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Pse(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new qn(e,0)}function zr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof qn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new qn(t,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function so(n,e){const t=on(n),r=on(e);if(null===t)return e;if(t===r)return so(dr(n),dr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function I$e(n,e){const t=tw(n,0),r=tw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=vp(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Iz(n,e){if(Wd(n)!==Wd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ka(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Wd(n)>Wd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class w$e{constructor(e,t){this.errorPrefix_=t,this.parts_=tw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.OE)(this.parts_[r]);kse(this)}}function kse(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bp(n))}function bp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class wz extends Dse{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new wz}getInitialEvent(e){return(0,N.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const nw=1e3;let ED,Ep=(()=>{class n extends xse{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=XI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,N.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wz.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&vD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,N.As)(o)),(0,N.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new N.cY,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,N.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.vA)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.gR)(t,"w")){const i=(0,N.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,N.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):hz("Unrecognized action received from server: "+(0,N.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){(0,N.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?is("getToken() completed but was canceled"):(is("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new Sse(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{Ls(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&Ls(y),u())}}})()}interrupt(t){is("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){is("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.Im)(this.interruptReasons_)&&(this.reconnectDelay_=nw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>fz(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new qn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){is("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){is("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+cz.replace(/\./g,"-")]=1,(0,N.jZ)()?t["framework.cordova"]=1:(0,N.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=vD.getInstance().currentlyOnline();return(0,N.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new un(e,t)}}class bD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new un(Hd,e),i=new un(Hd,t);return 0!==this.compare(r,i)}minPost(){return un.MIN}}class Fse extends bD{static get __EMPTY_NODE(){return ED}static set __EMPTY_NODE(e){ED=e}compare(e,t){return vp(e.name,t.name)}isDefinedOn(e){throw(0,N.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return un.MIN}maxPost(){return new un(lu,ED)}makePost(e,t){return(0,N.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new un(e,ED)}toString(){return".key"}}const sc=new Fse;class ID{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Tz,fl=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Mo.EMPTY_NODE,this.right=o??Mo.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Mo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Mo{constructor(e,t=Mo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Mo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fl.BLACK,null,null))}remove(e){return new Mo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ID(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ID(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ID(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ID(this.root_,null,this.comparator_,!0,e)}}function M$e(n,e){return vp(n.name,e.name)}function Cz(n,e){return vp(n,e)}Mo.EMPTY_NODE=new class R$e{copy(e,t,r,i,s){return this}insert(e,t,r){return new fl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Lse=function(n){return"number"==typeof n?"number:"+nse(n):"string:"+n},Vse=function(n){if(n.isLeafNode()){const e=n.val();(0,N.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.gR)(e,".sv"),"Priority must be a string or number.")}else(0,N.vA)(n===Tz||n.isEmpty(),"priority of unexpected type.");(0,N.vA)(n===Tz||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Bse,Use,jse,J_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Vse(this.priorityNode_)}static set __childrenNodeConstructor(t){Bse=t}static get __childrenNodeConstructor(){return Bse}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return an(t)?this:".priority"===on(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=on(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.vA)(".priority"!==i||1===Wd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(dr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Lse(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?nse(this.value_):this.value_,this.lazyHash_=Zie(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.vA)(s>=0,"Unknown leaf type: "+r),(0,N.vA)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const br=new class O$e extends bD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?vp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return un.MIN}maxPost(){return new un(lu,new J_("[PRIORITY-POST]",jse))}makePost(e,t){const r=Use(e);return new un(t,new J_("[PRIORITY-POST]",r))}toString(){return".priority"}},F$e=Math.log(2);class L$e{constructor(e){this.count=parseInt(Math.log(e+1)/F$e,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wD=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let h,m;if(0===u)return null;if(1===u)return h=n[l],m=t?t(h):h,new fl(m,h.node,fl.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return h=n[y],m=t?t(h):h,new fl(m,h.node,fl.BLACK,b,T)}},a=function(l){let c=null,u=null,h=n.length;const m=function(b,T){const M=h-b,B=h;h-=b;const V=i(M+1,B),Q=n[M],be=t?t(Q):Q;y(new fl(be,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),M=Math.pow(2,l.count-(b+1));T?m(M,fl.BLACK):(m(M,fl.BLACK),m(M,fl.RED))}return u}(new L$e(n.length));return new Mo(r||e,a)};let Az;const ey={};class cu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.vA)(ey&&br,"ChildrenNode.ts has not been loaded"),Az=Az||new cu({".priority":ey},{".priority":br}),Az}get(e){const t=(0,N.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Mo?t:null}hasIndex(e){return(0,N.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.vA)(e!==sc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(un.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?wD(r,e.getCompare()):ey;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new cu(u,c)}addToIndexes(e,t){const r=(0,N.kH)(this.indexes_,(i,s)=>{const o=(0,N.yw)(this.indexSet_,s);if((0,N.vA)(o,"Missing index implementation for "+s),i===ey){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(un.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),wD(a,o.getCompare())}return ey}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new un(e.name,a))),l.insert(e,e.node)}});return new cu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.kH)(this.indexes_,i=>{if(i===ey)return i;{const s=t.get(e.name);return s?i.remove(new un(e.name,s)):i}});return new cu(r,this.indexSet_)}}let rw,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Vse(this.priorityNode_),this.children_.isEmpty()&&(0,N.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rw||(rw=new n(new Mo(Cz),null,cu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?rw:r}}getChild(t){const r=on(t);return null===r?this:this.getImmediateChild(r).getChild(dr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new un(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?rw:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=on(t);if(null===i)return r;{(0,N.vA)(".priority"!==on(t)||1===Wd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(dr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(br,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Lse(this.getPriority().val())+":"),this.forEachChild(br,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Zie(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new un(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new un(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new un(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,un.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,un.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===iw?-1:0}withIndex(t){if(t===sc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===sc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(br),s=r.getIterator(br);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===sc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const iw=new class V$e extends Wt{constructor(){super(new Mo(Cz),Wt.EMPTY_NODE,cu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(un,{MIN:{value:new un(Hd,Wt.EMPTY_NODE)},MAX:{value:new un(lu,iw)}}),Fse.__EMPTY_NODE=Wt.EMPTY_NODE,J_.__childrenNodeConstructor=Wt,function P$e(n){Tz=n}(iw),function N$e(n){jse=n}(iw);const B$e=!0;function Xr(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new J_(n,Xr(e));if(n instanceof Array||!B$e){let t=Wt.EMPTY_NODE;return ss(n,(r,i)=>{if((0,N.gR)(n,r)&&"."!==r.substring(0,1)){const s=Xr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Xr(e))}{const t=[];let r=!1;if(ss(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Xr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new un(o,l)))}}),0===t.length)return Wt.EMPTY_NODE;const s=wD(t,M$e,o=>o.name,Cz);if(r){const o=wD(t,br.getCompare());return new Wt(s,Xr(e),new cu({".priority":o},{".priority":br}))}return new Wt(s,Xr(e),cu.Default)}}!function k$e(n){Use=n}(Xr);class Sz extends bD{constructor(e){super(),this.indexPath_=e,(0,N.vA)(!an(e)&&".priority"!==on(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?vp(e.name,t.name):s}makePost(e,t){const r=Xr(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new un(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,iw);return new un(lu,e)}toString(){return tw(this.indexPath_,0).join("/")}}const xz=new class U$e extends bD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?vp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(e,t){const r=Xr(e);return new un(t,r)}toString(){return".value"}};function zse(n){return{type:"value",snapshotNode:n}}function ty(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ow(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Dz{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,N.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(sw(t,a)):(0,N.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ty(t,r)):o.trackChildChange(ow(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(br,(i,s)=>{t.hasChild(i)||r.trackChildChange(sw(i,s))}),t.isLeafNode()||t.forEachChild(br,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ow(i,s,o))}else r.trackChildChange(ty(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class aw{constructor(e){this.indexedFilter_=new Dz(e.getIndex()),this.index_=e.getIndex(),this.startPost_=aw.getStartPost_(e),this.endPost_=aw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new un(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const s=this;return t.forEachChild(br,(o,a)=>{s.matches(new un(o,a))||(i=i.updateImmediateChild(o,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class z$e{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new aw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new un(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Wt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(m,y)=>h(y,m)}else o=this.index_.getCompare();const a=e;(0,N.vA)(a.numChildren()===this.limit_,"");const l=new un(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const h=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(ow(t,r,h)),a.updateImmediateChild(t,r);{s?.trackChildChange(sw(t,h));const T=a.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(ty(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(sw(c.name,c.node)),s.trackChildChange(ty(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,Wt.EMPTY_NODE)):e}}class CD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=br}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===br}copy(){const e=new CD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Rz(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Mz(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function TD(n,e){const t=n.copy();return t.index_=e,t}function Hse(n){const e={};if(n.isDefault())return e;let t;if(n.index_===br?t="$priority":n.index_===xz?t="$value":n.index_===sc?t="$key":((0,N.vA)(n.index_ instanceof Sz,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,N.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,N.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,N.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,N.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function $se(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==br&&(e.i=n.index_.toString()),e}class AD extends xse{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=XI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=AD.getListenId_(e,r),a={};this.listens_[o]=a;const l=Hse(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(404===c&&(h=null,c=null),null===c&&this.onDataUpdate_(s,h,!1,r),(0,N.yw)(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=AD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Hse(e._queryParams),r=e._path.toString(),i=new N.cY;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.Am)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,N.$L)(a.responseText)}catch{Ls("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Ls("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class K$e{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function SD(){return{value:null,children:new Map}}function ny(n,e,t){if(an(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=on(e);n.children.has(r)||n.children.set(r,SD()),ny(n.children.get(r),e=dr(e),t)}}function Pz(n,e){if(an(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(br,(r,i)=>{ny(n,new qn(r),i)}),Pz(n,e)}}if(n.children.size>0){const t=on(e);return e=dr(e),n.children.has(t)&&Pz(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function kz(n,e,t){null!==n.value?t(e,n.value):function Q$e(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{kz(i,new qn(e.toString()+"/"+r),t)})}class Y$e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ss(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class J$e{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Y$e(e);const r=1e4+2e4*Math.random();JI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ss(e,(i,s)=>{s>0&&(0,N.gR)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),JI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var oc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(oc||{});function Fz(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class xD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=oc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(an(this.path)){if(null!=this.affectedTree.value)return(0,N.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new qn(e));return new xD(Nn(),t,this.revert)}}return(0,N.vA)(on(this.path)===e,"operationForChild called for unrelated child."),new xD(dr(this.path),this.affectedTree,this.revert)}}class lw{constructor(e,t){this.source=e,this.path=t,this.type=oc.LISTEN_COMPLETE}operationForChild(e){return an(this.path)?new lw(this.source,Nn()):new lw(this.source,dr(this.path))}}class Ip{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=oc.OVERWRITE}operationForChild(e){return an(this.path)?new Ip(this.source,Nn(),this.snap.getImmediateChild(e)):new Ip(this.source,dr(this.path),this.snap)}}class ry{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=oc.MERGE}operationForChild(e){if(an(this.path)){const t=this.children.subtree(new qn(e));return t.isEmpty()?null:t.value?new Ip(this.source,Nn(),t.value):new ry(this.source,Nn(),t)}return(0,N.vA)(on(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ry(this.source,dr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(an(e))return this.isFullyInitialized()&&!this.filtered_;const t=on(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class eWe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function cw(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function rWe(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.Hk)("Should only compare child_ events.");const r=new un(e.childName,e.snapshotNode),i=new un(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function nWe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function DD(n,e){return{eventCache:n,serverCache:e}}function uw(n,e,t,r){return DD(new Gd(e,t,r),n.serverCache)}function Gse(n,e,t,r){return DD(n.eventCache,new Gd(e,t,r))}function RD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Lz;class Er{constructor(e,t=(()=>(Lz||(Lz=new Mo(j4e)),Lz))()){this.value=e,this.children=t}static fromObject(e){let t=new Er(null);return ss(e,(r,i)=>{t=t.set(new qn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(an(e))return null;{const r=on(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(dr(e),t);return null!=s?{path:zr(new qn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(an(e))return this;{const t=on(e),r=this.children.get(t);return null!==r?r.subtree(dr(e)):new Er(null)}}set(e,t){if(an(e))return new Er(t,this.children);{const r=on(e),s=(this.children.get(r)||new Er(null)).set(dr(e),t),o=this.children.insert(r,s);return new Er(this.value,o)}}remove(e){if(an(e))return this.children.isEmpty()?new Er(null):new Er(null,this.children);{const t=on(e),r=this.children.get(t);if(r){const i=r.remove(dr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Er(null):new Er(this.value,s)}return this}}get(e){if(an(e))return this.value;{const t=on(e),r=this.children.get(t);return r?r.get(dr(e)):null}}setTree(e,t){if(an(e))return t;{const r=on(e),s=(this.children.get(r)||new Er(null)).setTree(dr(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Er(this.value,o)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(zr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(an(e))return null;{const s=on(e),o=this.children.get(s);return o?o.findOnPath_(dr(e),zr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,r){if(an(e))return this;{this.value&&r(t,this.value);const i=on(e),s=this.children.get(i);return s?s.foreachOnPath_(dr(e),zr(t,i),r):new Er(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(zr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class pl{constructor(e){this.writeTree_=e}static empty(){return new pl(new Er(null))}}function dw(n,e,t){if(an(e))return new pl(new Er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=so(i,e);return s=s.updateChild(o,t),new pl(n.writeTree_.set(i,s))}{const i=new Er(t),s=n.writeTree_.setTree(e,i);return new pl(s)}}}function Vz(n,e,t){let r=n;return ss(t,(i,s)=>{r=dw(r,zr(e,i),s)}),r}function qse(n,e){if(an(e))return pl.empty();{const t=n.writeTree_.setTree(e,new Er(null));return new pl(t)}}function Bz(n,e){return null!=Cp(n,e)}function Cp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(so(t.path,e)):null}function Kse(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(br,(r,i)=>{e.push(new un(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new un(r,i.value))}),e}function qd(n,e){if(an(e))return n;{const t=Cp(n,e);return new pl(null!=t?new Er(t):n.writeTree_.subtree(e))}}function Uz(n){return n.writeTree_.isEmpty()}function iy(n,e){return Qse(Nn(),n.writeTree_,e)}function Qse(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,N.vA)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=Qse(zr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(zr(n,".priority"),r)),t}}function MD(n,e){return eoe(e,n)}function cWe(n,e){if(n.snap)return ka(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ka(zr(n.path,t),e))return!0;return!1}function dWe(n){return n.visible}function Yse(n,e,t){let r=pl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)ka(t,o)?(a=so(t,o),r=dw(r,a,s.snap)):ka(o,t)&&(a=so(o,t),r=dw(r,Nn(),s.snap.getChild(a)));else{if(!s.children)throw(0,N.Hk)("WriteRecord should have .snap or .children");if(ka(t,o))a=so(t,o),r=Vz(r,a,s.children);else if(ka(o,t))if(a=so(o,t),an(a))r=Vz(r,Nn(),s.children);else{const l=(0,N.yw)(s.children,on(a));if(l){const c=l.getChild(dr(a));r=dw(r,Nn(),c)}}}}}return r}function Xse(n,e,t,r,i){if(r||i){const s=qd(n.visibleWrites,e);return!i&&Uz(s)?t:i||null!=t||Bz(s,Nn())?iy(Yse(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(ka(c.path,e)||ka(e,c.path))},e),t||Wt.EMPTY_NODE):null}{const s=Cp(n.visibleWrites,e);if(null!=s)return s;{const o=qd(n.visibleWrites,e);return Uz(o)?t:null!=t||Bz(o,Nn())?iy(o,t||Wt.EMPTY_NODE):null}}}function PD(n,e,t,r){return Xse(n.writeTree,n.treePath,e,t,r)}function jz(n,e){return function hWe(n,e,t){let r=Wt.EMPTY_NODE;const i=Cp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(br,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=qd(n.visibleWrites,e);return t.forEachChild(br,(o,a)=>{const l=iy(qd(s,new qn(o)),a);r=r.updateImmediateChild(o,l)}),Kse(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return Kse(qd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function Zse(n,e,t,r){return function fWe(n,e,t,r,i){(0,N.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=zr(e,t);if(Bz(n.visibleWrites,s))return null;{const o=qd(n.visibleWrites,s);return Uz(o)?i.getChild(t):iy(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function kD(n,e){return function mWe(n,e){return Cp(n.visibleWrites,e)}(n.writeTree,zr(n.treePath,e))}function zz(n,e,t){return function pWe(n,e,t,r){const i=zr(e,t),s=Cp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?iy(qd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Jse(n,e){return eoe(zr(n.treePath,e),n.writeTree)}function eoe(n,e){return{treePath:n,writeTree:e}}class vWe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,ow(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,sw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,ty(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ow(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const toe=new class bWe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Hz{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Gd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zz(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wp(this.viewCache_),s=function yWe(n,e,t,r,i,s){return function gWe(n,e,t,r,i,s,o){let a;const l=qd(n.visibleWrites,e),c=Cp(l,Nn());if(null!=c)a=c;else{if(null==t)return[];a=iy(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==h(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function noe(n,e,t,r,i,s){const o=e.eventCache;if(null!=kD(r,t))return e;{let a,l;if(an(t))if((0,N.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=wp(e),h=jz(r,c instanceof Wt?c:Wt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=PD(r,wp(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=on(t);if(".priority"===c){(0,N.vA)(1===Wd(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=Zse(r,t,u,l);a=null!=h?n.filter.updatePriority(u,h):o.getNode()}else{const u=dr(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=Zse(r,t,o.getNode(),l);h=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else h=zz(r,c,e.serverCache);a=null!=h?n.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return uw(e,a,o.isFullyInitialized()||an(t),n.filter.filtersNodes())}}function ND(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(an(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=on(t);if(!l.isCompleteForPath(t)&&Wd(t)>1)return e;const b=dr(t),M=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),M):u.updateChild(l.getNode(),y,M,b,toe,null)}const h=Gse(e,c,l.isFullyInitialized()||an(t),u.filtersNodes());return noe(n,h,t,i,new Hz(i,h,s),a)}function $z(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new Hz(i,e,s);if(an(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=uw(e,c,!0,n.filter.filtersNodes());else{const h=on(t);if(".priority"===h)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=uw(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=dr(t),y=a.getNode().getImmediateChild(h);let b;if(an(m))b=r;else{const T=u.getCompleteChild(h);b=null!=T?".priority"===Ez(m)&&T.getChild(Pse(m)).isEmpty()?T:T.updateChild(m,r):Wt.EMPTY_NODE}l=y.equals(b)?e:uw(e,n.filter.updateChild(a.getNode(),h,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function roe(n,e){return n.eventCache.isCompleteForChild(e)}function ioe(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Wz(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=an(t)?r:new Er(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,m)=>{if(u.hasChild(h)){const b=ioe(0,e.serverCache.getNode().getImmediateChild(h),m);l=ND(n,l,new qn(h),b,i,s,o,a)}}),c.children.inorderTraversal((h,m)=>{const y=!e.serverCache.isCompleteForChild(h)&&null===m.value;if(!u.hasChild(h)&&!y){const T=ioe(0,e.serverCache.getNode().getImmediateChild(h),m);l=ND(n,l,new qn(h),T,i,s,o,a)}}),l}class DWe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Dz(r.getIndex()),s=function H$e(n){return n.loadsAllData()?new Dz(n.getIndex()):n.hasLimit()?new z$e(n):new aw(n)}(r);this.processor_=function EWe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Wt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Wt.EMPTY_NODE,a.getNode(),null),u=new Gd(l,o.isFullyInitialized(),i.filtersNodes()),h=new Gd(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=DD(h,u),this.eventGenerator_=new eWe(this.query_)}get query(){return this.query_}}function PWe(n,e){const t=wp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!an(e)&&!t.getImmediateChild(on(e)).isEmpty())?t.getChild(e):null}function soe(n){return 0===n.eventRegistrations_.length}function ooe(n,e,t){const r=[];if(t){(0,N.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function aoe(n,e,t,r){e.type===oc.MERGE&&null!==e.source.queryId&&((0,N.vA)(wp(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.vA)(RD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function wWe(n,e,t,r,i){const s=new vWe;let o,a;if(t.type===oc.OVERWRITE){const c=t;c.source.fromUser?o=$z(n,e,c.path,c.snap,r,i,s):((0,N.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!an(c.path),o=ND(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===oc.MERGE){const c=t;c.source.fromUser?o=function TWe(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=zr(t,l);roe(e,on(u))&&(a=$z(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=zr(t,l);roe(e,on(u))||(a=$z(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,N.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Wz(n,e,c.path,c.children,r,i,a,s))}else if(t.type===oc.ACK_USER_WRITE){const c=t;o=c.revert?function xWe(n,e,t,r,i,s){let o;if(null!=kD(r,t))return e;{const a=new Hz(r,e,i),l=e.eventCache.getNode();let c;if(an(t)||".priority"===on(t)){let u;if(e.serverCache.isFullyInitialized())u=PD(r,wp(e));else{const h=e.serverCache.getNode();(0,N.vA)(h instanceof Wt,"serverChildren would be complete if leaf node"),u=jz(r,h)}c=n.filter.updateFullNode(l,u,s)}else{const u=on(t);let h=zz(r,u,e.serverCache);null==h&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),c=null!=h?n.filter.updateChild(l,u,h,dr(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,Wt.EMPTY_NODE,dr(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=PD(r,wp(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=kD(r,Nn()),uw(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function AWe(n,e,t,r,i,s,o){if(null!=kD(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(an(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return ND(n,e,t,l.getNode().getChild(t),i,s,a,o);if(an(t)){let c=new Er(null);return l.getNode().forEachChild(sc,(u,h)=>{c=c.set(new qn(u),h)}),Wz(n,e,t,c,i,s,a,o)}return e}{let c=new Er(null);return r.foreach((u,h)=>{const m=zr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),Wz(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==oc.LISTEN_COMPLETE)throw(0,N.Hk)("Unknown operation type: "+t.type);o=function SWe(n,e,t,r,i){const s=e.serverCache;return noe(n,Gse(e,s.getNode(),s.isFullyInitialized()||an(t),s.isFiltered()),t,r,toe,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function CWe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=RD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(zse(RD(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function IWe(n,e){(0,N.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,loe(n,s.changes,s.viewCache.eventCache.getNode(),null)}function loe(n,e,t,r){return function tWe(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function j$e(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),cw(n,i,"child_removed",e,r,t),cw(n,i,"child_added",e,r,t),cw(n,i,"child_moved",s,r,t),cw(n,i,"child_changed",e,r,t),cw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let OD,LD;class coe{constructor(){this.views=new Map}}function Gz(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,N.vA)(null!=s,"SyncTree gave us an op for an invalid query."),aoe(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(aoe(o,e,t,r));return s}}function uoe(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=PD(t,i?r:null),l=!1;a?l=!0:r instanceof Wt?(a=jz(t,r),l=!1):(a=Wt.EMPTY_NODE,l=!1);const c=DD(new Gd(a,l,!1),new Gd(r,i,!1));return new DWe(e,c)}return o}function doe(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Kd(n,e){let t=null;for(const r of n.views.values())t=t||PWe(r,e);return t}function hoe(n,e){return e._queryParams.loadsAllData()?FD(n):n.views.get(e._queryIdentifier)}function foe(n,e){return null!=hoe(n,e)}function Qd(n){return null!=FD(n)}function FD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let zWe=1;class poe{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Er(null),this.pendingWriteTree_=function _We(){return{visibleWrites:pl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qz(n,e,t,r,i){return function sWe(n,e,t,r,i){(0,N.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=dw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?sy(n,new Ip({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Yd(n,e,t=!1){const r=function aWe(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function lWe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,N.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&cWe(a,r.path)?i=!1:ka(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function uWe(n){n.visibleWrites=Yse(n.allWrites,dWe,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=qse(n.visibleWrites,r.path):ss(r.children,l=>{n.visibleWrites=qse(n.visibleWrites,zr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new Er(null);return null!=r.snap?s=s.set(Nn(),!0):ss(r.children,o=>{s=s.set(new qn(o),!0)}),sy(n,new xD(r.path,s,t))}return[]}function hw(n,e,t){return sy(n,new Ip({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function VD(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||foe(o,e))){const l=function BWe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Qd(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(ooe(c,t,r)),soe(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(ooe(l,t,r)),soe(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Qd(n)&&s.push(new(function FWe(){return(0,N.vA)(OD,"Reference.ts has not been loaded"),OD}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function LWe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(s,(m,y)=>Qd(y));if(u&&!h){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function QWe(n){return n.fold((e,t,r)=>{if(t&&Qd(t))return[FD(t)];{let i=[];return t&&(i=doe(t)),ss(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],M=T.query,B=yoe(n,T);n.listenProvider_.startListening(pw(M),fw(n,M),B.hashFn,B.onComplete)}}}!h&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(pw(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(UD(m));n.listenProvider_.stopListening(pw(m),y)}))}!function YWe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=UD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function moe(n,e,t,r){const i=Qz(n,r);if(null!=i){const s=Yz(i),o=s.path,a=s.queryId,l=so(o,e);return Xz(n,o,new Ip(Fz(a),l,t))}return[]}function Kz(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=so(m,i);s=s||Kd(y,b),o=o||Qd(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||Qd(a),s=s||Kd(a,Nn())):(a=new coe,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=Kd(b,Nn());T&&(s=s.updateImmediateChild(y,T))}));const c=foe(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=UD(e);(0,N.vA)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function XWe(){return zWe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let h=function VWe(n,e,t,r,i,s){const o=uoe(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function kWe(n,e){n.eventRegistrations_.push(e)}(o,t),function NWe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(br,(s,o)=>{r.push(ty(s,o))}),t.isFullyInitialized()&&r.push(zse(t.getNode())),loe(n,r,t.getNode(),e)}(o,t)}(a,e,t,MD(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=hoe(a,e);h=h.concat(function ZWe(n,e,t){const r=e._path,i=fw(n,e),s=yoe(n,t),o=n.listenProvider_.startListening(pw(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,N.vA)(!Qd(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!an(c)&&u&&Qd(u))return[FD(u).query];{let m=[];return u&&(m=m.concat(doe(u).map(y=>y.query))),ss(h,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(pw(u),fw(n,u))}}return o}(n,e,m))}return h}function BD(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Kd(a,so(o,e));if(c)return c});return Xse(i,e,s,t,!0)}function sy(n,e){return goe(e,n.syncPointTree_,null,MD(n.pendingWriteTree_,Nn()))}function goe(n,e,t,r){if(an(n.path))return _oe(n,e,t,r);{const i=e.get(Nn());null==t&&null!=i&&(t=Kd(i,Nn()));let s=[];const o=on(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=Jse(r,o);s=s.concat(goe(a,l,c,u))}return i&&(s=s.concat(Gz(i,n,r,t))),s}}function _oe(n,e,t,r){const i=e.get(Nn());null==t&&null!=i&&(t=Kd(i,Nn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=Jse(r,o),u=n.operationForChild(o);u&&(s=s.concat(_oe(u,a,l,c)))}),i&&(s=s.concat(Gz(i,n,r,t))),s}function yoe(n,e){const t=e.query,r=fw(n,t);return{hashFn:()=>(function RWe(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function GWe(n,e,t){const r=Qz(n,t);if(r){const i=Yz(r),s=i.path,o=i.queryId,a=so(s,e);return Xz(n,s,new lw(Fz(o),a))}return[]}(n,t._path,r):function WWe(n,e){return sy(n,new lw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function $4e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return VD(n,t,null,s)}}}}function fw(n,e){const t=UD(e);return n.queryToTagMap.get(t)}function UD(n){return n._path.toString()+"$"+n._queryIdentifier}function Qz(n,e){return n.tagToQueryMap.get(e)}function Yz(n){const e=n.indexOf("$");return(0,N.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new qn(n.substr(0,e))}}function Xz(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.vA)(r,"Missing sync point for query tag that we're tracking"),Gz(r,t,MD(n.pendingWriteTree_,e),null)}function pw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function jWe(){return(0,N.vA)(LD,"Reference.ts has not been loaded"),LD}())(n._repo,n._path):n}class Zz{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Zz(t)}node(){return this.node_}}class Jz{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zr(this.path_,e);return new Jz(this.syncTree_,t)}node(){return BD(this.syncTree_,this.path_)}}const JWe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},voe=function(n,e,t){return n&&"object"==typeof n?((0,N.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?e3e(n[".sv"],e,t):"object"==typeof n[".sv"]?t3e(n[".sv"],e):void(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},e3e=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.vA)(!1,"Unexpected server value: "+n)},t3e=function(n,e,t){n.hasOwnProperty("increment")||(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},boe=function(n,e,t,r){return tH(e,new Jz(t,n),r)},eH=function(n,e,t){return tH(n,new Zz(e),t)};function tH(n,e,t){const r=n.getPriority().val(),i=voe(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=voe(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new J_(a,Xr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new J_(i))),o.forEachChild(br,(a,l)=>{const c=tH(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class nH{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function jD(n,e){let t=e instanceof qn?e:new qn(e),r=n,i=on(t);for(;null!==i;){const s=(0,N.yw)(r.node.children,i)||{children:{},childCount:0};r=new nH(i,r,s),t=dr(t),i=on(t)}return r}function Tp(n){return n.node.value}function rH(n,e){n.node.value=e,iH(n)}function Eoe(n){return n.node.childCount>0}function zD(n,e){ss(n.node.children,(t,r)=>{e(new nH(t,n,r))})}function Ioe(n,e,t,r){t&&!r&&e(n),zD(n,i=>{Ioe(i,e,!0,r)}),t&&r&&e(n)}function mw(n){return new qn(null===n.parent?n.name:mw(n.parent)+"/"+n.name)}function iH(n){null!==n.parent&&function i3e(n,e,t){const r=function n3e(n){return void 0===Tp(n)&&!Eoe(n)}(t),i=(0,N.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,iH(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,iH(n))}(n.parent,n.name,n)}const s3e=/[\[\].#$\/\u0000-\u001F\u007F]/,o3e=/[\[\].#$\u0000-\u001F\u007F]/,sH=10485760,HD=function(n){return"string"==typeof n&&0!==n.length&&!s3e.test(n)},woe=function(n){return"string"==typeof n&&0!==n.length&&!o3e.test(n)},gw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!gD(n)||n&&"object"==typeof n&&(0,N.gR)(n,".sv")},ac=function(n,e,t,r){r&&void 0===e||_w((0,N.dI)(n,"value"),e,t)},_w=function(n,e,t){const r=t instanceof qn?new w$e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+bp(r));if("function"==typeof e)throw new Error(n+"contains a function "+bp(r)+" with contents = "+e.toString());if(gD(e))throw new Error(n+"contains "+e.toString()+" "+bp(r));if("string"==typeof e&&e.length>sH/3&&(0,N.OE)(e)>sH)throw new Error(n+"contains a string greater than "+sH+" utf8 bytes "+bp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ss(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!HD(o)))throw new Error(n+" contains an invalid key ("+o+") "+bp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function C$e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.OE)(e),kse(n)})(r,o),_w(n,a,r),function T$e(n){const e=n.parts_.pop();n.byteLength_-=(0,N.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+bp(r)+" in addition to actual children.")}},Coe=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ss(e,(o,a)=>{const l=new qn(o);if(_w(i,a,zr(t,l)),".priority"===Ez(l)&&!gw(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=tw(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!HD(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(I$e);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ka(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},oH=function(n,e,t){if(!t||void 0!==e){if(gD(e))throw new Error((0,N.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!gw(e))throw new Error((0,N.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yw=function(n,e,t,r){if(!(r&&void 0===t||HD(t)))throw new Error((0,N.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vw=function(n,e,t,r){if(!(r&&void 0===t||woe(t)))throw new Error((0,N.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},c3e=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vw(n,e,t,r)},Na=function(n,e){if(".info"===on(e))throw new Error(n+" failed = Can't modify data under /.info/")},Toe=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!HD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),woe(n)}(t))throw new Error((0,N.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class u3e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $D(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!Iz(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Aoe(n,e,t){$D(n,t),Soe(n,r=>Iz(r,e))}function sa(n,e,t){$D(n,t),Soe(n,r=>ka(r,e)||ka(e,r))}function Soe(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(d3e(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function d3e(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();yp&&is("event: "+t.toString()),X_(r)}}}const xoe="repo_interrupt",h3e=25;class f3e{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new u3e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=SD(),this.transactionQueueTree_=new nH,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Doe(n){const t=n.infoData_.getNode(new qn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function bw(n){return JWe({timestamp:Doe(n)})}function Roe(n,e,t,r,i){n.dataUpdateCount++;const s=new qn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,N.kH)(t,c=>Xr(c));o=function qWe(n,e,t,r){const i=Qz(n,r);if(i){const s=Yz(i),o=s.path,a=s.queryId,l=so(o,e),c=Er.fromObject(t);return Xz(n,o,new ry(Fz(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Xr(t);o=moe(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,N.kH)(t,c=>Xr(c));o=function $We(n,e,t){const r=Er.fromObject(t);return sy(n,new ry({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Xr(t);o=hw(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ay(n,s)),sa(n.eventQueue_,a,o)}function Moe(n,e){aH(n,"connected",e),!1===e&&function y3e(n){oy(n,"onDisconnectEvents");const e=bw(n),t=SD();kz(n.onDisconnect_,Nn(),(i,s)=>{const o=boe(i,s,n.serverSyncTree_,e);ny(t,i,o)});let r=[];kz(t,Nn(),(i,s)=>{r=r.concat(hw(n.serverSyncTree_,i,s));const o=dH(n,i);ay(n,o)}),n.onDisconnect_=SD(),sa(n.eventQueue_,Nn(),r)}(n)}function aH(n,e,t){const r=new qn("/.info/"+e),i=Xr(t);n.infoData_.updateSnapshot(r,i);const s=hw(n.infoSyncTree_,r,i);sa(n.eventQueue_,r,s)}function WD(n){return n.nextWriteId_++}function lH(n,e,t,r,i){oy(n,"set",{path:e.toString(),value:t,priority:r});const s=bw(n),o=Xr(t,r),a=BD(n.serverSyncTree_,e),l=eH(o,a,s),c=WD(n),u=qz(n.serverSyncTree_,e,l,c,!0);$D(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(m,y)=>{const b="ok"===m;b||Ls("set at "+e+" failed: "+m);const T=Yd(n.serverSyncTree_,c,!b);sa(n.eventQueue_,e,T),Xd(0,i,m,y)});const h=dH(n,e);ay(n,h),sa(n.eventQueue_,h,[])}function v3e(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Pz(n.onDisconnect_,e),Xd(0,t,r,i)})}function Poe(n,e,t,r){const i=Xr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&ny(n.onDisconnect_,e,i),Xd(0,r,s,o)})}function cH(n,e,t){let r;r=".info"===on(e._path)?VD(n.infoSyncTree_,e,t):VD(n.serverSyncTree_,e,t),Aoe(n.eventQueue_,e._path,r)}function koe(n){n.persistentConnection_&&n.persistentConnection_.interrupt(xoe)}function oy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),is(t,...e)}function Xd(n,e,t,r){e&&X_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function uH(n,e,t){return BD(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function GD(n,e=n.transactionQueueTree_){if(e||qD(n,e),Tp(e)){const t=Ooe(n,e);(0,N.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function T3e(n,e,t){const r=t.map(c=>c.currentWriteId),i=uH(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];(0,N.vA)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=so(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{oy(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const h=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(Yd(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&h.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();qD(n,jD(n.transactionQueueTree_,e)),GD(n,n.transactionQueueTree_),sa(n.eventQueue_,e,u);for(let m=0;m<h.length;m++)X_(h[m])}else{if("datastale"===c)for(let h=0;h<t.length;h++)t[h].status=3===t[h].status?4:0;else{Ls("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}ay(n,e)}},o)}(n,mw(e),t)}else Eoe(e)&&zD(e,t=>{GD(n,t)})}function ay(n,e){const t=Noe(n,e),r=mw(t);return function A3e(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=so(t,l.path);let h,u=!1;if((0,N.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,h=l.abortReason,i=i.concat(Yd(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=h3e)u=!0,h="maxretry",i=i.concat(Yd(n.serverSyncTree_,l.currentWriteId,!0));else{const m=uH(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){_w("transaction failed: Data returned ",y,l.path);let b=Xr(y);"object"==typeof y&&null!=y&&(0,N.gR)(y,".priority")||(b=b.updatePriority(m.getPriority()));const M=l.currentWriteId,B=bw(n),V=eH(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=WD(n),o.splice(o.indexOf(M),1),i=i.concat(qz(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(Yd(n.serverSyncTree_,M,!0))}else u=!0,h="nodata",i=i.concat(Yd(n.serverSyncTree_,l.currentWriteId,!0))}sa(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===h?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(h),!1,null)))}qD(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)X_(r[a]);GD(n,n.transactionQueueTree_)}(n,Ooe(n,t),r),r}function Noe(n,e){let t,r=n.transactionQueueTree_;for(t=on(e);null!==t&&void 0===Tp(r);)r=jD(r,t),t=on(e=dr(e));return r}function Ooe(n,e){const t=[];return Foe(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Foe(n,e,t){const r=Tp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);zD(e,i=>{Foe(n,i,t)})}function qD(n,e){const t=Tp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,rH(e,t.length>0?t:void 0)}zD(e,r=>{qD(n,r)})}function dH(n,e){const t=mw(Noe(n,e)),r=jD(n.transactionQueueTree_,e);return function r3e(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{hH(n,i)}),hH(n,r),Ioe(r,i=>{hH(n,i)}),t}function hH(n,e){const t=Tp(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,N.vA)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,N.vA)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Yd(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?rH(e,void 0):t.length=s+1,sa(n.eventQueue_,mw(e),i);for(let o=0;o<r.length;o++)X_(r[o])}}const fH=function(n,e){const t=D3e(n),r=t.namespace;return"firebase.com"===t.domain&&ic(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ic("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new mz(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new qn(t.pathString)}},D3e=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=function S3e(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,h)));const m=function x3e(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ls(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},Loe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",R3e=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Loe.charAt(t%64),t=Math.floor(t/64);(0,N.vA)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=Loe.charAt(e[i]);return(0,N.vA)(20===o.length,"nextPushId: Length should be 20."),o}}();class Voe{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.As)(this.snapshot.exportVal())}}class Boe{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pH{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Uoe{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.cY;return v3e(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Na("OnDisconnect.remove",this._path);const e=new N.cY;return Poe(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Na("OnDisconnect.set",this._path),ac("OnDisconnect.set",e,this._path,!1);const t=new N.cY;return Poe(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Na("OnDisconnect.setWithPriority",this._path),ac("OnDisconnect.setWithPriority",e,this._path,!1),oH("OnDisconnect.setWithPriority",t,!1);const r=new N.cY;return function b3e(n,e,t,r,i){const s=Xr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&ny(n.onDisconnect_,e,s),Xd(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Na("OnDisconnect.update",this._path),Coe("OnDisconnect.update",e,this._path,!1);const t=new N.cY;return function E3e(n,e,t,r){if((0,N.Im)(t))return is("onDisconnect().update() called with empty data.  Don't do anything."),void Xd(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ss(t,(o,a)=>{const l=Xr(a);ny(n.onDisconnect_,zr(e,o),l)}),Xd(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Po{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return an(this._path)?null:Ez(this._path)}get ref(){return new Oa(this._repo,this._path)}get _queryIdentifier(){const e=$se(this._queryParams),t=fz(e);return"{}"===t?"default":t}get _queryObject(){return $se(this._queryParams)}isEqual(e){if(!((e=(0,N.Ku)(e))instanceof Po))return!1;const t=this._repo===e._repo,r=Iz(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function E$e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function KD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Zd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===sc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Hd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==lu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===br){if(null!=e&&!gw(e)||null!=t&&!gw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.vA)(n.getIndex()instanceof Sz||n.getIndex()===xz,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function QD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Oa extends Po{constructor(e,t){super(e,t,new CD,!1)}get parent(){const e=Pse(this._path);return null===e?null:new Oa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ap{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new qn(e),r=Sp(this.ref,e);return new Ap(this._node.getChild(t),r,br)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ap(i,Sp(this.ref,r),br)))}hasChild(e){const t=new qn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function joe(n,e){return(n=(0,N.Ku)(n))._checkNotDeleted("ref"),void 0!==e?Sp(n._root,e):n._root}function zoe(n,e){(n=(0,N.Ku)(n))._checkNotDeleted("refFromURL");const t=fH(e,n._repo.repoInfo_.nodeAdmin);Toe("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ic("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),joe(n,t.path.toString())}function Sp(n,e){return null===on((n=(0,N.Ku)(n))._path)?c3e("child","path",e,!1):vw("child","path",e,!1),new Oa(n._repo,zr(n._path,e))}function mH(n,e){n=(0,N.Ku)(n),Na("set",n._path),ac("set",e,n._path,!1);const t=new N.cY;return lH(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function O3e(n,e){Coe("update",e,n._path,!1);const t=new N.cY;return function _3e(n,e,t,r){oy(n,"update",{path:e.toString(),value:t});let i=!0;const s=bw(n),o={};if(ss(t,(a,l)=>{i=!1,o[a]=boe(zr(e,a),Xr(l),n.serverSyncTree_,s)}),i)is("update() called with empty data.  Don't do anything."),Xd(0,r,"ok",void 0);else{const a=WD(n),l=function HWe(n,e,t,r){!function oWe(n,e,t,r){(0,N.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Vz(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Er.fromObject(t);return sy(n,new ry({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);$D(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{const h="ok"===c;h||Ls("update at "+e+" failed: "+c);const m=Yd(n.serverSyncTree_,a,!h),y=m.length>0?ay(n,e):e;sa(n.eventQueue_,y,m),Xd(0,r,c,u)}),ss(t,c=>{const u=dH(n,zr(e,c));ay(n,u)}),sa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function F3e(n){n=(0,N.Ku)(n);const e=new pH(()=>{}),t=new Ew(e);return function g3e(n,e,t){const r=function KWe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const h=so(c,t);r=r||Kd(u,h)});let i=n.syncPointTree_.get(t);i?r=r||Kd(i,Nn()):(i=new coe,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Gd(r,!0,!1):null;return function MWe(n){return RD(n.viewCache_)}(uoe(i,e,MD(n.pendingWriteTree_,e._path),s?o.getNode():Wt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Xr(i).withIndex(e._queryParams.getIndex());let o;if(Kz(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=hw(n.serverSyncTree_,e._path,s);else{const a=fw(n.serverSyncTree_,e);o=moe(n.serverSyncTree_,e._path,s,a)}return sa(n.eventQueue_,e._path,o),VD(n.serverSyncTree_,e,t,null,!0),s},i=>(oy(n,"get for query "+(0,N.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Ap(r,new Oa(n._repo,n._path),n._queryParams.getIndex()))}class Ew{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Voe("value",this,new Ap(e.snapshotNode,new Oa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Boe(this,e,t):null}matches(e){return e instanceof Ew&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class YD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Boe(this,e,t):null}createEvent(e,t){(0,N.vA)(null!=e.childName,"Child events should have a childName.");const r=Sp(new Oa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Voe(e.type,this,new Ap(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof YD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Iw(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(u,h)=>{cH(n._repo,n,a),l(u,h)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new pH(t,s||void 0),a="value"===e?new Ew(o):new YD(e,o);return function I3e(n,e,t){let r;r=".info"===on(e._path)?Kz(n.infoSyncTree_,e,t):Kz(n.serverSyncTree_,e,t),Aoe(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>cH(n._repo,n,a)}function gH(n,e,t,r){return Iw(n,"value",e,t,r)}function Hoe(n,e,t,r){return Iw(n,"child_added",e,t,r)}function $oe(n,e,t,r){return Iw(n,"child_changed",e,t,r)}function Woe(n,e,t,r){return Iw(n,"child_moved",e,t,r)}function Goe(n,e,t,r){return Iw(n,"child_removed",e,t,r)}function qoe(n,e,t){let r=null;const i=t?new pH(t):null;"value"===e?r=new Ew(i):e&&(r=new YD(e,i)),cH(n._repo,n,r)}class ml{}class Koe extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){ac("endAt",this._value,e._path,!0);const t=Mz(e._queryParams,this._value,this._key);if(QD(t),Zd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Po(e._repo,e._path,t,e._orderByCalled)}}class V3e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){ac("endBefore",this._value,e._path,!1);const t=function q$e(n,e,t){let r;return r=Mz(n,e,n.index_===sc||t?t:Hd),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(QD(t),Zd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Po(e._repo,e._path,t,e._orderByCalled)}}class Qoe extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){ac("startAt",this._value,e._path,!0);const t=Rz(e._queryParams,this._value,this._key);if(QD(t),Zd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Po(e._repo,e._path,t,e._orderByCalled)}}class j3e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){ac("startAfter",this._value,e._path,!1);const t=function G$e(n,e,t){let r;return r=Rz(n,e,n.index_===sc||t?t:lu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(QD(t),Zd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Po(e._repo,e._path,t,e._orderByCalled)}}class H3e extends ml{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Po(e._repo,e._path,function $$e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class W3e extends ml{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Po(e._repo,e._path,function W$e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class q3e extends ml{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){KD(e,"orderByChild");const t=new qn(this._path);if(an(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Sz(t),i=TD(e._queryParams,r);return Zd(i),new Po(e._repo,e._path,i,!0)}}class Q3e extends ml{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){KD(e,"orderByKey");const t=TD(e._queryParams,sc);return Zd(t),new Po(e._repo,e._path,t,!0)}}class X3e extends ml{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){KD(e,"orderByPriority");const t=TD(e._queryParams,br);return Zd(t),new Po(e._repo,e._path,t,!0)}}class J3e extends ml{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){KD(e,"orderByValue");const t=TD(e._queryParams,xz);return Zd(t),new Po(e._repo,e._path,t,!0)}}class t5e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(ac("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Koe(this._value,this._key)._apply(new Qoe(this._value,this._key)._apply(e))}}function gl(n,...e){let t=(0,N.Ku)(n);for(const r of e)t=r._apply(t);return t}(function OWe(n){(0,N.vA)(!OD,"__referenceConstructor has already been defined"),OD=n})(Oa),function UWe(n){(0,N.vA)(!LD,"__referenceConstructor has already been defined"),LD=n}(Oa);const _H={};function yH(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ic("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),is("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=fH(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=fH(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new ew(ew.OWNER):new Y4e(n.name,n.options,e);Toe("Invalid Firebase Database URL",o),an(o.path)||ic("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function o5e(n,e,t,r){let i=_H[e.name];i||(i={},_H[e.name]=i);let s=i[n.toURLString()];return s&&ic("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new f3e(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new Q4e(n.name,t));return new l5e(h,n)}class l5e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function p3e(n,e,t){if(n.stats_=yz(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new AD(n.repoInfo_,(r,i,s,o)=>{Roe(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Moe(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ep(n.repoInfo_,e,(r,i,s,o)=>{Roe(n,r,i,s,o)},r=>{Moe(n,r)},r=>{!function m3e(n,e){ss(e,(t,r)=>{aH(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function J4e(n,e){const t=n.toString();return _z[t]||(_z[t]=e()),_z[t]}(n.repoInfo_,()=>new J$e(n.stats_,n.server_)),n.infoData_=new K$e,n.infoSyncTree_=new poe({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=hw(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),aH(n,"connected",!1),n.serverSyncTree_=new poe({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);sa(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oa(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function s5e(n,e){const t=_H[e];(!t||t[n.key]!==n)&&ic(`Database ${e}(${n.repoInfo_}) has already been deleted.`),koe(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ic("Cannot call "+e+" on a deleted database.")}}function Xoe(){bse.IS_TRANSPORT_INITIALIZED&&Ls("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function c5e(){Xoe(),$d.forceDisallow()}function u5e(){Xoe(),Z_.forceDisallow(),$d.forceAllow()}function f5e(n,e){ese(n,e)}const m5e={".sv":"timestamp"};class y5e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ep.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ep.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function p5e(n){uz($n.SDK_VERSION),(0,$n._registerComponent)(new Yo.uA("database",(e,{instanceIdentifier:t})=>yH(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(Kie,"1.0.8",n),(0,$n.registerVersion)(Kie,"1.0.8","esm2017")}();const I5e=new Ao.Vy("@firebase/database-compat"),Joe=function(n){I5e.warn("FIREBASE WARNING: "+n)};class T5e{constructor(e){this._delegate=e}cancel(e){(0,N.od)("OnDisconnect.cancel",0,1,arguments.length),(0,N.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.od)("OnDisconnect.remove",0,1,arguments.length),(0,N.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.od)("OnDisconnect.set",1,2,arguments.length),(0,N.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,N.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Joe("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class A5e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Jd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),vw("DataSnapshot.child","path",e,!1),new Jd(this._database,this._delegate.child(e))}hasChild(e){return(0,N.od)("DataSnapshot.hasChild",1,1,arguments.length),vw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.od)("DataSnapshot.forEach",1,1,arguments.length),(0,N.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Jd(this._database,t)))}hasChildren(){return(0,N.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.od)("DataSnapshot.ref",0,0,arguments.length),new oa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ps{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,N.od)("Query.on",2,4,arguments.length),(0,N.oD)("Query.on","callback",t,!1);const o=ps.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{t.call(o.context,new Jd(this.database,c),u)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return gH(this._delegate,a,l),t;case"child_added":return Hoe(this._delegate,a,l),t;case"child_removed":return Goe(this._delegate,a,l),t;case"child_changed":return $oe(this._delegate,a,l),t;case"child_moved":return Woe(this._delegate,a,l),t;default:throw new Error((0,N.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.od)("Query.off",0,3,arguments.length),function(n,e){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.oD)("Query.off","callback",t,!0),(0,N.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,qoe(this._delegate,e,i)}else qoe(this._delegate,e)}get(){return F3e(this._delegate).then(e=>new Jd(this.database,e))}once(e,t,r,i){(0,N.od)("Query.once",1,4,arguments.length),(0,N.oD)("Query.once","callback",t,!0);const s=ps.getCancelAndContextArgs_("Query.once",r,i),o=new N.cY,a=(c,u)=>{const h=new Jd(this.database,c);t&&t.call(s.context,h,u),o.resolve(h)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":gH(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Hoe(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Goe(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":$oe(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Woe(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,N.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,N.od)("Query.limitToFirst",1,1,arguments.length),new ps(this.database,gl(this._delegate,function $3e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new H3e(n)}(e)))}limitToLast(e){return(0,N.od)("Query.limitToLast",1,1,arguments.length),new ps(this.database,gl(this._delegate,function G3e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new W3e(n)}(e)))}orderByChild(e){return(0,N.od)("Query.orderByChild",1,1,arguments.length),new ps(this.database,gl(this._delegate,function K3e(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vw("orderByChild","path",n,!1),new q3e(n)}(e)))}orderByKey(){return(0,N.od)("Query.orderByKey",0,0,arguments.length),new ps(this.database,gl(this._delegate,function Y3e(){return new Q3e}()))}orderByPriority(){return(0,N.od)("Query.orderByPriority",0,0,arguments.length),new ps(this.database,gl(this._delegate,function Z3e(){return new X3e}()))}orderByValue(){return(0,N.od)("Query.orderByValue",0,0,arguments.length),new ps(this.database,gl(this._delegate,function e5e(){return new J3e}()))}startAt(e=null,t){return(0,N.od)("Query.startAt",0,2,arguments.length),new ps(this.database,gl(this._delegate,function U3e(n=null,e){return yw("startAt","key",e,!0),new Qoe(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.od)("Query.startAfter",0,2,arguments.length),new ps(this.database,gl(this._delegate,function z3e(n,e){return yw("startAfter","key",e,!0),new j3e(n,e)}(e,t)))}endAt(e=null,t){return(0,N.od)("Query.endAt",0,2,arguments.length),new ps(this.database,gl(this._delegate,function L3e(n,e){return yw("endAt","key",e,!0),new Koe(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.od)("Query.endBefore",0,2,arguments.length),new ps(this.database,gl(this._delegate,function B3e(n,e){return yw("endBefore","key",e,!0),new V3e(n,e)}(e,t)))}equalTo(e,t){return(0,N.od)("Query.equalTo",1,2,arguments.length),new ps(this.database,gl(this._delegate,function n5e(n,e){return yw("equalTo","key",e,!0),new t5e(n,e)}(e,t)))}toString(){return(0,N.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.od)("Query.isEqual",1,1,arguments.length),!(e instanceof ps))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,N.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new oa(this.database,new Oa(this._delegate._repo,this._delegate._path))}}class oa extends ps{constructor(e,t){super(e,new Po(t._repo,t._path,new CD,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new oa(this.database,Sp(this._delegate,e))}getParent(){(0,N.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new oa(this.database,e):null}getRoot(){return(0,N.od)("Reference.root",0,0,arguments.length),new oa(this.database,this._delegate.root)}set(e,t){(0,N.od)("Reference.set",1,2,arguments.length),(0,N.oD)("Reference.set","onComplete",t,!0);const r=mH(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Joe("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Na("Reference.update",this._delegate._path),(0,N.oD)("Reference.update","onComplete",t,!0);const r=O3e(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.od)("Reference.setWithPriority",2,3,arguments.length),(0,N.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function N3e(n,e,t){if(Na("setWithPriority",n._path),ac("setWithPriority",e,n._path,!1),oH("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.cY;return lH(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,N.od)("Reference.remove",0,1,arguments.length),(0,N.oD)("Reference.remove","onComplete",e,!0);const t=function P3e(n){return Na("remove",n._path),mH(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.od)("Reference.transaction",1,3,arguments.length),(0,N.oD)("Reference.transaction","transactionUpdate",e,!1),(0,N.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function v5e(n,e,t){var r;if(n=(0,N.Ku)(n),Na("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new N.cY,a=gH(n,()=>{});return function C3e(n,e,t,r,i,s){oy(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:Xie(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=uH(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{_w("transaction failed: Data returned ",l,o.path),o.status=0;const c=jD(n.transactionQueueTree_,e),u=Tp(c)||[];let h;u.push(o),rH(c,u),"object"==typeof l&&null!==l&&(0,N.gR)(l,".priority")?(h=(0,N.yw)(l,".priority"),(0,N.vA)(gw(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(BD(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const m=bw(n),y=Xr(l,h),b=eH(y,a,m);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=b,o.currentWriteId=WD(n);const T=qz(n.serverSyncTree_,e,b,o.currentWriteId,o.applyLocally);sa(n.eventQueue_,e,T),GD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,u)=>{let h=null;l?s.reject(l):(h=new Ap(u,new Oa(n._repo,n._path),br),s.resolve(new y5e(c,h)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new A5e(s.committed,new Jd(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,N.od)("Reference.setPriority",1,2,arguments.length),(0,N.oD)("Reference.setPriority","onComplete",t,!0);const r=function k3e(n,e){n=(0,N.Ku)(n),Na("setPriority",n._path),oH("setPriority",e,!1);const t=new N.cY;return lH(n._repo,zr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.od)("Reference.push",0,2,arguments.length),(0,N.oD)("Reference.push","onComplete",t,!0);const r=function M3e(n,e){n=(0,N.Ku)(n),Na("push",n._path),ac("push",e,n._path,!0);const t=Doe(n._repo),r=R3e(t),i=Sp(n,r),s=Sp(n,r);let o;return o=null!=e?mH(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new oa(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new oa(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Na("Reference.onDisconnect",this._delegate._path),new T5e(new Uoe(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ww{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:c5e,forceLongPolling:u5e}}useEmulator(e,t,r={}){!function Zoe(n,e,t,r={}){(n=(0,N.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ic("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ic('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ew(ew.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Fy)(r.mockUserToken,n.app.options.projectId);s=new ew(o)}!function i5e(n,e,t,r){n.repoInfo_=new mz(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,N.od)("database.ref",0,1,arguments.length),e instanceof oa){const t=zoe(this._delegate,e.toString());return new oa(this,t)}{const t=joe(this._delegate,e);return new oa(this,t)}}refFromURL(e){(0,N.od)("database.refFromURL",1,1,arguments.length);const r=zoe(this._delegate,e);return new oa(this,r)}goOffline(){return(0,N.od)("database.goOffline",0,0,arguments.length),function d5e(n){(n=(0,N.Ku)(n))._checkNotDeleted("goOffline"),koe(n._repo)}(this._delegate)}goOnline(){return(0,N.od)("database.goOnline",0,0,arguments.length),function h5e(n){(n=(0,N.Ku)(n))._checkNotDeleted("goOnline"),function w3e(n){n.persistentConnection_&&n.persistentConnection_.resume(xoe)}(n._repo)}(this._delegate)}}ww.ServerValue={TIMESTAMP:function g5e(){return m5e}(),increment:n=>function _5e(n){return{".sv":{increment:n}}}(n)};var x5e=Object.freeze({__proto__:null,initStandalone:function S5e({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){uz(t);const a=new Yo.h1("database-standalone"),l=new Yo.Kq("auth-internal",a);let c;return l.setComponent(new Yo.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new Yo.Kq("app-check-internal",a),c.setComponent(new Yo.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new ww(yH(n,l,c,e,o),n),namespace:s}}});const D5e=ww.ServerValue;function Cw(n,e,t="on",r=_f){return new Vt(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(Le(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),$V())}function eae(n){return null==n}function tae(n){return"function"==typeof n.set}function nae(n,e){return tae(e)?e:n.ref(e)}function rae(n,e){if(function M5e(n){return"string"==typeof n}(n))return e.stringCase();if(tae(n))return e.firebaseCase();if(function P5e(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function iae(n){return(eae(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function sae(n,e,t){return sl(...(e=iae(e)).map(i=>Cw(n,i,"on",t)))}function oae(n,e){return function(r,i){return rae(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function F5e(n){return function(t){return t?rae(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function aae(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function B5e(n,e){const{payload:t,prevKey:r,key:i}=e,s=aae(n,i),o=function V5e(n,e){if(eae(e))return 0;{const t=aae(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function lae(n,e,t){return function L5e(n,e,t){return Cw(n,"value","once",t).pipe(Kt(r=>{const i=[Ke(r)];return e.forEach(s=>i.push(Cw(n,s,"on",t))),sl(...i).pipe(gg(B5e,[]))}),AA())}(n,e=iae(e),t)}function cae(n,e){return function(){return Cw(n,"value","on",e)}}!function R5e(n){n.INTERNAL.registerComponent(new Yo.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new ww(i,r)},"PUBLIC").setServiceProps({Reference:oa,Query:ps,Database:ww,DataSnapshot:Jd,enableLogging:f5e,INTERNAL:x5e,ServerValue:D5e}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.8")}(Gl.A);const z5e=new ye("angularfire2.realtimeDatabaseURL"),H5e=new ye("angularfire2.database.use-emulator");let $5e=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,c,u,h,m,y,b,T,M){this.schedulers=a;const B=l,V=HS(t,o,r);c&&ZV(V,o,u,m,y,b,h,T),this.database=HV(`${V.name}.database.${i}`,"AngularFireDatabase",V.name,()=>{const Q=o.runOutsideAngular(()=>V.database(i||void 0));return B&&Q.useEmulator(...B),Q},[B])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>nae(this.database,t));let s=i;return r&&(s=r(i)),function U5e(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:oae(r,"update"),set:oae(r,"set"),push:i=>r.push(i),remove:F5e(r),snapshotChanges:i=>lae(n,i,t).pipe(Ui),stateChanges:i=>sae(n,i,t).pipe(Ui),auditTrail:i=>function k5e(n,e,t){return function O5e(n,e,t){return function N5e(n,e){return Cw(n,"value","on",e).pipe(Le(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function O4e(...n){const e=_N(n);return me((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)Js(n[l]).subscribe(Ne(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Ri))&&(o=null))},gs));t.subscribe(Ne(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}(e),Le(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function F4e(n){return me((e,t)=>{let r=!1,i=0;e.subscribe(Ne(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),Le(i=>i.actions))}(n,sae(n,e).pipe(gg((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Ui),valueChanges:(i,s)=>lae(n,i,t).pipe(Le(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),Ui)}}(s,this)}object(t){return function j5e(n,e){return{query:n,snapshotChanges:()=>cae(n,e.schedulers.outsideAngular)().pipe(Ui),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>cae(n,e.schedulers.outsideAngular)().pipe(Ui,Le(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>nae(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(Re(KE),Re(QE,8),Re(z5e,8),Re(Gs),Re(_t),Re(Vg),Re(H5e,8),Re(YE,8),Re(GV,8),Re(qV,8),Re(KV,8),Re(QV,8),Re(YV,8),Re(XV,8),Re(NA,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),W5e=(()=>{class n{constructor(){Gl.A.registerVersion("angularfire",id.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[$5e]})}return n})(),G5e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n,bootstrap:[tje]})}static{this.\u0275inj=Ht({providers:[DEe(lf(Ku.LegacyInterceptors,[{provide:Dq,useFactory:yEe},{provide:bb,useExisting:Dq,multi:!0}])),ZAe(()=>JAe(Ms_firebaseConfig)),sSe(()=>aSe()),N4e(()=>_4e())],imports:[eq,PUe,Ore,$ze,BI,kre,Ng,ere,kAe,Ere,qN,z8,n1e.initializeApp(Ms_firebaseConfig),a1e,W5e,Mre,Nre,Dre,Fre]})}}return n})();Nbe().bootstrapModule(G5e).catch(n=>console.error(n))},443:(yt,U,G)=>{G.d(U,{$:()=>Qw,A:()=>$,G:()=>Fe,K:()=>gR,L:()=>oh,N:()=>fo,P:()=>Vo,R:()=>ct,U:()=>mt,V:()=>Bp,W:()=>e4,X:()=>uh,Y:()=>Cy,Z:()=>Up,_:()=>zp,a:()=>jy,a0:()=>Re,a1:()=>Gp,a2:()=>mc,a3:()=>fh,a4:()=>e0,a5:()=>vn,a6:()=>n0,a7:()=>Qp,a8:()=>go,a9:()=>CR,aA:()=>pu,aB:()=>At,aC:()=>ie,aD:()=>Gi,aE:()=>me,aF:()=>Le,aG:()=>hm,aH:()=>KR,aI:()=>c4,aJ:()=>Cr,aN:()=>Is,aQ:()=>Eu,aa:()=>r0,ab:()=>_h,ac:()=>s0,ad:()=>TR,ae:()=>My,af:()=>SR,ag:()=>xR,ah:()=>DR,ak:()=>RR,al:()=>Vn,am:()=>MR,ap:()=>hh,aq:()=>Wi,as:()=>d0,at:()=>Oi,au:()=>vt,av:()=>ho,aw:()=>Bw,ax:()=>Tt,ay:()=>xn,az:()=>Cs,b:()=>_c,c:()=>r4,d:()=>s4,e:()=>i4,f:()=>C0,g:()=>T0,h:()=>YR,i:()=>yc,j:()=>JR,k:()=>bo,l:()=>Ru,m:()=>P0,o:()=>cM,p:()=>ee,r:()=>im,s:()=>pa,u:()=>Ec,y:()=>OR});var D=G(467),Z=G(1631),x=G(1401),he=G(5398),ce=G(1635),te=G(8779);const ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},tt=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Xe=new x.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new he.Vy("@firebase/auth");function Jt(g,...d){et.logLevel<=he.$b.ERROR&&et.error(`Auth (${Z.SDK_VERSION}): ${g}`,...d)}function Tt(g,...d){throw Ve(g,...d)}function At(g,...d){return Ve(g,...d)}function Ot(g,d,f){const _=Object.assign(Object.assign({},tt()),{[d]:f});return new x.FA("auth","Firebase",_).create(d,{appName:g.name})}function gt(g){return Ot(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Et(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Tt(g,"argument-error"),Ot(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return Xe.create(g,...d)}function ie(g,d,...f){if(!g)throw Ve(d,...f)}function it(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Jt(d),new Error(d)}function vt(g,d){g||it(d)}function zt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Tn(){return"http:"===An()||"https:"===An()}function An(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class ir{constructor(d,f){this.shortDelay=d,this.longDelay=f,vt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,x.jZ)()||(0,x.lV)()}get(){return function Ir(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tn()||(0,x.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fr(g,d){vt(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class $r{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const de={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_e=new ir(3e4,6e4);function se(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function ae(g,d,f,_){return ge.apply(this,arguments)}function ge(){return(ge=(0,D.A)(function*(g,d,f,_,w={}){return pe(g,w,(0,D.A)(function*(){let R={},Y={};_&&("GET"===d?Y=_:R={body:JSON.stringify(_)});const fe=(0,x.Am)(Object.assign({key:g.config.apiKey},Y)).slice(1),Me=yield g._getAdditionalHeaders();Me["Content-Type"]="application/json",g.languageCode&&(Me["X-Firebase-Locale"]=g.languageCode);const nt=Object.assign({method:d,headers:Me},R);return(0,x.c1)()||(nt.referrerPolicy="no-referrer"),$r.fetch()(It(g,g.config.apiHost,f,fe),nt)}))})).apply(this,arguments)}function pe(g,d,f){return at.apply(this,arguments)}function at(){return(at=(0,D.A)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},de),d);try{const w=new pt(g),R=yield Promise.race([f(),w.promise]);w.clearNetworkTimeout();const Y=yield R.json();if("needConfirmation"in Y)throw Zr(g,"account-exists-with-different-credential",Y);if(R.ok&&!("errorMessage"in Y))return Y;{const fe=R.ok?Y.errorMessage:Y.error.message,[Me,nt]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw Zr(g,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Me)throw Zr(g,"email-already-in-use",Y);if("USER_DISABLED"===Me)throw Zr(g,"user-disabled",Y);const ut=_[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw Ot(g,ut,nt);Tt(g,ut)}}catch(w){if(w instanceof x.g)throw w;Tt(g,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function Mt(g,d,f,_){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,D.A)(function*(g,d,f,_,w={}){const R=yield ae(g,d,f,_,w);return"mfaPendingCredential"in R&&Tt(g,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function It(g,d,f,_){const w=`${d}${f}?${_}`;return g.config.emulator?fr(g.config,w):`${g.config.apiScheme}://${w}`}function wn(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pt{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(At(this.auth,"network-request-failed")),_e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zr(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const w=At(g,d,_);return w.customData._tokenResponse=f,w}function en(g){return void 0!==g&&void 0!==g.getResponse}function tn(g){return void 0!==g&&void 0!==g.enterprise}class xt{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return wn(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function wi(){return(wi=(0,D.A)(function*(g){return(yield ae(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nr(g,d){return ei.apply(this,arguments)}function ei(){return(ei=(0,D.A)(function*(g,d){return ae(g,"GET","/v2/recaptchaConfig",se(g,d))})).apply(this,arguments)}function La(){return(La=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function js(){return(js=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function co(g,d){return ca.apply(this,arguments)}function ca(){return(ca=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function zs(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Hs(){return(Hs=(0,D.A)(function*(g,d=!1){const f=(0,x.Ku)(g),_=yield f.getIdToken(d),w=No(_);ie(w&&w.exp&&w.auth_time&&w.iat,f.auth,"internal-error");const R="object"==typeof w.firebase?w.firebase:void 0,Y=R?.sign_in_provider;return{claims:w,token:_,authTime:zs(os(w.auth_time)),issuedAtTime:zs(os(w.iat)),expirationTime:zs(os(w.exp)),signInProvider:Y||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function os(g){return 1e3*Number(g)}function No(g){const[d,f,_]=g.split(".");if(void 0===d||void 0===f||void 0===_)return Jt("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,x.u)(f);return w?JSON.parse(w):(Jt("Failed to decode base64 JWT payload"),null)}catch(w){return Jt("Caught error parsing JWT payload as JSON",w?.toString()),null}}function _s(g){const d=No(g);return ie(d,"internal-error"),ie(typeof d.exp<"u","internal-error"),ie(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function Fn(g,d){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,D.A)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof x.g&&function ys({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class yl{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const w=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,D.A)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,D.A)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class hi{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=zs(this.lastLoginAt),this.creationTime=zs(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vs(g){return uo.apply(this,arguments)}function uo(){return(uo=(0,D.A)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),w=yield Fn(g,co(f,{idToken:_}));ie(w?.users.length,f,"internal-error");const R=w.users[0];g._notifyReloadListener(R);const Y=null!==(d=R.providerUserInfo)&&void 0!==d&&d.length?Vt(R.providerUserInfo):[],fe=function da(g,d){return[...g.filter(_=>!d.some(w=>w.providerId===_.providerId)),...d]}(g.providerData,Y),ut=!!g.isAnonymous&&!(g.email&&R.passwordHash||fe?.length),nn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:fe,metadata:new hi(R.createdAt,R.lastLoginAt),isAnonymous:ut};Object.assign(g,nn)})).apply(this,arguments)}function Va(){return(Va=(0,D.A)(function*(g){const d=(0,x.Ku)(g);yield vs(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Vt(g){return g.map(d=>{var{providerId:f}=d,_=(0,ce.Tt)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function qe(){return(qe=(0,D.A)(function*(g,d){const f=yield pe(g,{},(0,D.A)(function*(){const _=(0,x.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:w,apiKey:R}=g.config,Y=It(g,w,"/v1/token",`key=${R}`),fe=yield g._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",$r.fetch()(Y,{method:"POST",headers:fe,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,D.A)(function*(g,d){return ae(g,"POST","/v2/accounts:revokeToken",se(g,d))})).apply(this,arguments)}class E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ie(d.idToken,"internal-error"),ie(typeof d.idToken<"u","internal-error"),ie(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):_s(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}updateFromIdToken(d){ie(0!==d.length,"internal-error");const f=_s(d);this.updateTokensAndExpiration(d,null,f)}getToken(d,f=!1){var _=this;return(0,D.A)(function*(){return f||!_.accessToken||_.isExpired?(ie(_.refreshToken,d,"user-token-expired"),_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null):_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,D.A)(function*(){const{accessToken:w,refreshToken:R,expiresIn:Y}=yield function lc(g,d){return qe.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(w,R,Number(Y))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:w,expirationTime:R}=f,Y=new E;return _&&(ie("string"==typeof _,"internal-error",{appName:d}),Y.refreshToken=_),w&&(ie("string"==typeof w,"internal-error",{appName:d}),Y.accessToken=w),R&&(ie("number"==typeof R,"internal-error",{appName:d}),Y.expirationTime=R),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new E,this.toJSON())}_performRefresh(){return it("not implemented")}}function S(g,d){ie("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class F{constructor(d){var{uid:f,auth:_,stsTokenManager:w}=d,R=(0,ce.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new hi(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,D.A)(function*(){const _=yield Fn(f,f.stsTokenManager.getToken(f.auth,d));return ie(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function ua(g){return Hs.apply(this,arguments)}(this,d)}reload(){return function Ri(g){return Va.apply(this,arguments)}(this)}_assign(d){this!==d&&(ie(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new F(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,D.A)(function*(){let w=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),w=!0),f&&(yield vs(_)),yield _.auth._persistUserIfCurrent(_),w&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,D.A)(function*(){if((0,Z._isFirebaseServerApp)(d.auth.app))return Promise.reject(gt(d.auth));const f=yield d.getIdToken();return yield Fn(d,function lo(g,d){return La.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,w,R,Y,fe,Me,nt,ut;const nn=null!==(_=f.displayName)&&void 0!==_?_:void 0,Pn=null!==(w=f.email)&&void 0!==w?w:void 0,Ts=null!==(R=f.phoneNumber)&&void 0!==R?R:void 0,Un=null!==(Y=f.photoURL)&&void 0!==Y?Y:void 0,jo=null!==(fe=f.tenantId)&&void 0!==fe?fe:void 0,rv=null!==(Me=f._redirectEventId)&&void 0!==Me?Me:void 0,kh=null!==(nt=f.createdAt)&&void 0!==nt?nt:void 0,O0=null!==(ut=f.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:vm,emailVerified:iv,isAnonymous:ku,providerData:Eo,stsTokenManager:F0}=f;ie(vm&&F0,d,"internal-error");const bm=E.fromJSON(this.name,F0);ie("string"==typeof vm,d,"internal-error"),S(nn,d.name),S(Pn,d.name),ie("boolean"==typeof iv,d,"internal-error"),ie("boolean"==typeof ku,d,"internal-error"),S(Ts,d.name),S(Un,d.name),S(jo,d.name),S(rv,d.name),S(kh,d.name),S(O0,d.name);const Nu=new F({uid:vm,auth:d,email:Pn,emailVerified:iv,displayName:nn,isAnonymous:ku,photoURL:Un,phoneNumber:Ts,tenantId:jo,stsTokenManager:bm,createdAt:kh,lastLoginAt:O0});return Eo&&Array.isArray(Eo)&&(Nu.providerData=Eo.map(Em=>Object.assign({},Em))),rv&&(Nu._redirectEventId=rv),Nu}static _fromIdTokenResponse(d,f,_=!1){return(0,D.A)(function*(){const w=new E;w.updateFromServerResponse(f);const R=new F({uid:f.localId,auth:d,stsTokenManager:w,isAnonymous:_});return yield vs(R),R})()}static _fromGetAccountInfoResponse(d,f,_){return(0,D.A)(function*(){const w=f.users[0];ie(void 0!==w.localId,"internal-error");const R=void 0!==w.providerUserInfo?Vt(w.providerUserInfo):[],Y=!(w.email&&w.passwordHash||R?.length),fe=new E;fe.updateFromIdToken(_);const Me=new F({uid:w.localId,auth:d,stsTokenManager:fe,isAnonymous:Y}),nt={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:R,metadata:new hi(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||R?.length)};return Object.assign(Me,nt),Me})()}}const j=new Map;function me(g){vt(g instanceof Function,"Expected a class definition");let d=j.get(g);return d?(vt(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,j.set(g,d),d)}const mt=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(f,_){var w=this;return(0,D.A)(function*(){w.storage[f]=_})()}_get(f){var _=this;return(0,D.A)(function*(){const w=_.storage[f];return void 0===w?null:w})()}_remove(f){var _=this;return(0,D.A)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function Le(g,d,f){return`firebase:${g}:${d}:${f}`}class _n{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:w,name:R}=this.auth;this.fullUserKey=Le(this.userKey,w.apiKey,R),this.fullPersistenceKey=Le("persistence",w.apiKey,R),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,D.A)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?F._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,D.A)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,D.A)(function*(){if(!f.length)return new _n(me(mt),d,_);const w=(yield Promise.all(f.map(function(){var nt=(0,D.A)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let R=w[0]||me(mt);const Y=Le(_,d.config.apiKey,d.name);let fe=null;for(const nt of f)try{const ut=yield nt._get(Y);if(ut){const nn=F._fromJSON(d,ut);nt!==R&&(fe=nn),R=nt;break}}catch{}const Me=w.filter(nt=>nt._shouldAllowMigration);return R._shouldAllowMigration&&Me.length?(R=Me[0],fe&&(yield R._set(Y,fe.toJSON())),yield Promise.all(f.map(function(){var nt=(0,D.A)(function*(ut){if(ut!==R)try{yield ut._remove(Y)}catch{}});return function(ut){return nt.apply(this,arguments)}}())),new _n(R,d,_)):new _n(R,d,_)})()}}function wr(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(sh(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(K(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(hR(d))return"Blackberry";if(hy(d))return"Webos";if(Xn(d))return"Safari";if((d.includes("chrome/")||$s(d))&&!d.includes("edge/"))return"Chrome";if(Bw(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function K(g=(0,x.ZQ)()){return/firefox\//i.test(g)}function Xn(g=(0,x.ZQ)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function $s(g=(0,x.ZQ)()){return/crios\//i.test(g)}function sh(g=(0,x.ZQ)()){return/iemobile/i.test(g)}function Bw(g=(0,x.ZQ)()){return/android/i.test(g)}function hR(g=(0,x.ZQ)()){return/blackberry/i.test(g)}function hy(g=(0,x.ZQ)()){return/webos/i.test(g)}function ho(g=(0,x.ZQ)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function pu(g=(0,x.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}function fy(g=(0,x.ZQ)()){return ho(g)||Bw(g)||hy(g)||hR(g)||/windows phone/i.test(g)||sh(g)}function Pp(g,d=[]){let f;switch(g){case"Browser":f=wr((0,x.ZQ)());break;case"Worker":f=`${wr((0,x.ZQ)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${Z.SDK_VERSION}/${_}`}class _u{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=R=>new Promise((Y,fe)=>{try{Y(d(R))}catch(Me){fe(Me)}});_.onAbort=f,this.queue.push(_);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,D.A)(function*(){if(f.auth.currentUser===d)return;const _=[];try{for(const w of f.queue)yield w(d),w.onAbort&&_.push(w.onAbort)}catch(w){_.reverse();for(const R of _)try{R()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function Kn(){return(Kn=(0,D.A)(function*(g,d={}){return ae(g,"GET","/v2/passwordPolicy",se(g,d))})).apply(this,arguments)}class GH{constructor(d){var f,_,w,R;const Y=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Y.minPasswordLength)&&void 0!==f?f:6,Y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Y.maxPasswordLength),void 0!==Y.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Y.containsLowercaseCharacter),void 0!==Y.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Y.containsUppercaseCharacter),void 0!==Y.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Y.containsNumericCharacter),void 0!==Y.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Y.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(_=d.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(R=d.forceUpgradeOnSignin)&&void 0!==R&&R,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,_,w,R,Y,fe;const Me={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,Me),this.validatePasswordCharacterOptions(d,Me),Me.isValid&&(Me.isValid=null===(f=Me.meetsMinPasswordLength)||void 0===f||f),Me.isValid&&(Me.isValid=null===(_=Me.meetsMaxPasswordLength)||void 0===_||_),Me.isValid&&(Me.isValid=null===(w=Me.containsLowercaseLetter)||void 0===w||w),Me.isValid&&(Me.isValid=null===(R=Me.containsUppercaseLetter)||void 0===R||R),Me.isValid&&(Me.isValid=null===(Y=Me.containsNumericCharacter)||void 0===Y||Y),Me.isValid&&(Me.isValid=null===(fe=Me.containsNonAlphanumericCharacter)||void 0===fe||fe),Me}validatePasswordLengthOptions(d,f){const _=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;_&&(f.meetsMinPasswordLength=d.length>=_),w&&(f.meetsMaxPasswordLength=d.length<=w)}validatePasswordCharacterOptions(d,f){let _;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let w=0;w<d.length;w++)_=d.charAt(w),this.updatePasswordCharacterOptionsStatuses(f,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(d,f,_,w,R){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=R))}}class Ln{constructor(d,f,_,w){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ti(this),this.idTokenSubscription=new ti(this),this.beforeStateQueue=new _u(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=me(f)),this._initializationPromise=this.queue((0,D.A)(function*(){var w,R;if(!_._deleted&&(_.persistenceManager=yield _n.create(_,d),!_._deleted)){if(null!==(w=_._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,D.A)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(d){var f=this;return(0,D.A)(function*(){try{const _=yield co(f,{idToken:d}),w=yield F._fromGetAccountInfoResponse(f,_,d);yield f.directlySetCurrentUser(w)}catch(_){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",_),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var f=this;return(0,D.A)(function*(){var _;if((0,Z._isFirebaseServerApp)(f.app)){const fe=f.app.settings.authIdToken;return fe?new Promise(Me=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(fe).then(Me,Me))}):f.directlySetCurrentUser(null)}const w=yield f.assertedPersistence.getCurrentUser();let R=w,Y=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const fe=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Me=R?._redirectEventId,nt=yield f.tryRedirectSignIn(d);(!fe||fe===Me)&&nt?.user&&(R=nt.user,Y=!0)}if(!R)return f.directlySetCurrentUser(null);if(!R._redirectEventId){if(Y)try{yield f.beforeStateQueue.runMiddleware(R)}catch(fe){R=w,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(fe))}return R?f.reloadAndSetCurrentUserOrClear(R):f.directlySetCurrentUser(null)}return ie(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===R._redirectEventId?f.directlySetCurrentUser(R):f.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(d){var f=this;return(0,D.A)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,D.A)(function*(){try{yield vs(d)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Sn(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,D.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,D.A)(function*(){if((0,Z._isFirebaseServerApp)(f.app))return Promise.reject(gt(f));const _=d?(0,x.Ku)(d):null;return _&&ie(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,D.A)(function*(){if(!_._deleted)return d&&ie(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,D.A)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,D.A)(function*(){return(0,Z._isFirebaseServerApp)(d.app)?Promise.reject(gt(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var f=this;return(0,Z._isFirebaseServerApp)(this.app)?Promise.reject(gt(this)):this.queue((0,D.A)(function*(){yield f.assertedPersistence.setPersistence(me(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,D.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const _=f._getPasswordPolicyInternal();return _.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,D.A)(function*(){const f=yield function $H(g){return Kn.apply(this,arguments)}(d),_=new GH(f);null===d.tenantId?d._projectPasswordPolicy=_:d._tenantPasswordPolicies[d.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new x.FA("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const _=this.onAuthStateChanged(()=>{_(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,D.A)(function*(){if(f.currentUser){const _=yield f.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:_};null!=f.tenantId&&(w.tenantId=f.tenantId),yield function Se(g,d){return C.apply(this,arguments)}(f,w)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,D.A)(function*(){const w=yield _.getOrInitRedirectPersistenceManager(f);return null===d?w.removeCurrentUser():w.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,D.A)(function*(){if(!f.redirectPersistenceManager){const _=d&&me(d)||f._popupRedirectResolver;ie(_,f,"argument-error"),f.redirectPersistenceManager=yield _n.create(f,[me(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,D.A)(function*(){var _,w;return f._isInitialized&&(yield f.queue((0,D.A)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,D.A)(function*(){if(d===f.currentUser)return f.queue((0,D.A)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,w){if(this._deleted)return()=>{};const R="function"==typeof f?f:f.next.bind(f);let Y=!1;const fe=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(fe,this,"internal-error"),fe.then(()=>{Y||R(this.currentUser)}),"function"==typeof f){const Me=d.addObserver(f,_,w);return()=>{Y=!0,Me()}}{const Me=d.addObserver(f);return()=>{Y=!0,Me()}}}directlySetCurrentUser(d){var f=this;return(0,D.A)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Pp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,D.A)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const w=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();w&&(_["X-Firebase-Client"]=w);const R=yield d._getAppCheckToken();return R&&(_["X-Firebase-AppCheck"]=R),_})()}_getAppCheckToken(){var d=this;return(0,D.A)(function*(){var f;const _=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function Gt(g,...d){et.logLevel<=he.$b.WARN&&et.warn(`Auth (${Z.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function Cr(g){return(0,x.Ku)(g)}class ti{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,x.tD)(f=>this.observer=f)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let cc={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function py(g){return cc.loadJS(g)}function bs(g){return`__${g}${Math.floor(1e6*Math.random())}`}class pR{constructor(d){this.type="recaptcha-enterprise",this.auth=Cr(d)}verify(d="verify",f=!1){var _=this;return(0,D.A)(function*(){function R(){return R=(0,D.A)(function*(fe){if(!f){if(null==fe.tenantId&&null!=fe._agentRecaptchaConfig)return fe._agentRecaptchaConfig.siteKey;if(null!=fe.tenantId&&void 0!==fe._tenantRecaptchaConfigs[fe.tenantId])return fe._tenantRecaptchaConfigs[fe.tenantId].siteKey}return new Promise(function(){var Me=(0,D.A)(function*(nt,ut){Nr(fe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nn=>{if(void 0!==nn.recaptchaKey){const Pn=new xt(nn);return null==fe.tenantId?fe._agentRecaptchaConfig=Pn:fe._tenantRecaptchaConfigs[fe.tenantId]=Pn,nt(Pn.siteKey)}ut(new Error("recaptcha Enterprise site key undefined"))}).catch(nn=>{ut(nn)})});return function(nt,ut){return Me.apply(this,arguments)}}())}),R.apply(this,arguments)}function Y(fe,Me,nt){const ut=window.grecaptcha;tn(ut)?ut.enterprise.ready(()=>{ut.enterprise.execute(fe,{action:d}).then(nn=>{Me(nn)}).catch(()=>{Me("NO_RECAPTCHA")})}):nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((fe,Me)=>{(function w(fe){return R.apply(this,arguments)})(_.auth).then(nt=>{if(!f&&tn(window.grecaptcha))Y(nt,fe,Me);else{if(typeof window>"u")return void Me(new Error("RecaptchaVerifier is only supported in browser"));let ut=function St(){return cc.recaptchaEnterpriseScript}();0!==ut.length&&(ut+=nt),py(ut).then(()=>{Y(nt,fe,Me)}).catch(nn=>{Me(nn)})}}).catch(nt=>{Me(nt)})})})()}}function Ba(g,d,f){return Uw.apply(this,arguments)}function Uw(){return(Uw=(0,D.A)(function*(g,d,f,_=!1){const w=new pR(g);let R;try{R=yield w.verify(f)}catch{R=yield w.verify(f,!0)}const Y=Object.assign({},d);return Object.assign(Y,_?{captchaResp:R}:{captchaResponse:R}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}function Np(g,d,f,_){return jw.apply(this,arguments)}function jw(){return jw=(0,D.A)(function*(g,d,f,_){var w;if(null!==(w=g._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const R=yield Ba(g,d,f,"getOobCode"===f);return _(g,R)}return _(g,d).catch(function(){var R=(0,D.A)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const fe=yield Ba(g,d,f,"getOobCode"===f);return _(g,fe)}return Promise.reject(Y)});return function(Y){return R.apply(this,arguments)}}())}),jw.apply(this,arguments)}function gR(g,d,f){const _=Cr(g);ie(_._canInitEmulator,_,"emulator-config-failed"),ie(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const w=!!f?.disableWarnings,R=Es(d),{host:Y,port:fe}=function wt(g){const d=Es(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(_);if(w){const R=w[1];return{host:R,port:_R(_.substr(R.length+1))}}{const[R,Y]=_.split(":");return{host:R,port:_R(Y)}}}(d);_.config.emulator={url:`${R}//${Y}${null===fe?"":`:${fe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:Y,port:fe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function XH(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}function Es(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function _R(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class oh{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return it("not implemented")}_getIdTokenResponse(d){return it("not implemented")}_linkToIdToken(d,f){return it("not implemented")}_getReauthenticationResolver(d){return it("not implemented")}}function yR(g,d){return zw.apply(this,arguments)}function zw(){return(zw=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:resetPassword",se(g,d))})).apply(this,arguments)}function Hw(){return(Hw=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ht(g,d){return yu.apply(this,arguments)}function yu(){return(yu=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Op(){return(Op=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:update",se(g,d))})).apply(this,arguments)}function bR(g,d){return vu.apply(this,arguments)}function vu(){return(vu=(0,D.A)(function*(g,d){return Mt(g,"POST","/v1/accounts:signInWithPassword",se(g,d))})).apply(this,arguments)}function uc(g,d){return ah.apply(this,arguments)}function ah(){return(ah=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:sendOobCode",se(g,d))})).apply(this,arguments)}function gy(){return(gy=(0,D.A)(function*(g,d){return uc(g,d)})).apply(this,arguments)}function ye(g,d){return lh.apply(this,arguments)}function lh(){return(lh=(0,D.A)(function*(g,d){return uc(g,d)})).apply(this,arguments)}function _y(g,d){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,D.A)(function*(g,d){return uc(g,d)})).apply(this,arguments)}function vy(){return(vy=(0,D.A)(function*(g,d){return uc(g,d)})).apply(this,arguments)}function Ww(){return(Ww=(0,D.A)(function*(g,d){return Mt(g,"POST","/v1/accounts:signInWithEmailLink",se(g,d))})).apply(this,arguments)}function Gw(){return(Gw=(0,D.A)(function*(g,d){return Mt(g,"POST","/v1/accounts:signInWithEmailLink",se(g,d))})).apply(this,arguments)}class Lp extends oh{constructor(d,f,_,w=null){super("password",_),this._email=d,this._password=f,this._tenantId=w}static _fromEmailAndPassword(d,f){return new Lp(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new Lp(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,D.A)(function*(){switch(f.signInMethod){case"password":return Np(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",bR);case"emailLink":return function by(g,d){return Ww.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Tt(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,D.A)(function*(){switch(_.signInMethod){case"password":return Np(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ht);case"emailLink":return function ZH(g,d){return Gw.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:Tt(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Oo(g,d){return dc.apply(this,arguments)}function dc(){return(dc=(0,D.A)(function*(g,d){return Mt(g,"POST","/v1/accounts:signInWithIdp",se(g,d))})).apply(this,arguments)}class fo extends oh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new fo(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Tt("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:w}=f,R=(0,ce.Tt)(f,["providerId","signInMethod"]);if(!_||!w)return null;const Y=new fo(_,w);return Y.idToken=R.idToken||void 0,Y.accessToken=R.accessToken||void 0,Y.secret=R.secret,Y.nonce=R.nonce,Y.pendingToken=R.pendingToken||null,Y}_getIdTokenResponse(d){return Oo(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Oo(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Oo(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,x.Am)(f)}return d}}function Fo(){return(Fo=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:sendVerificationCode",se(g,d))})).apply(this,arguments)}function Vp(){return(Vp=(0,D.A)(function*(g,d){return Mt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,d))})).apply(this,arguments)}function yn(){return(yn=(0,D.A)(function*(g,d){const f=yield Mt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,d));if(f.temporaryProof)throw Zr(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const JH={USER_NOT_FOUND:"user-not-found"};function Iy(){return(Iy=(0,D.A)(function*(g,d){return Mt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),JH)})).apply(this,arguments)}class bu extends oh{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new bu({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new bu({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function ch(g,d){return Vp.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function kt(g,d){return yn.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function ER(g,d){return Iy.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:w}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:w}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}=d;return _||f||w||R?new bu({verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}):null}}class Bt{constructor(d){var f,_,w,R,Y,fe;const Me=(0,x.I9)((0,x.hp)(d)),nt=null!==(f=Me.apiKey)&&void 0!==f?f:null,ut=null!==(_=Me.oobCode)&&void 0!==_?_:null,nn=function IR(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=Me.mode)&&void 0!==w?w:null);ie(nt&&ut&&nn,"argument-error"),this.apiKey=nt,this.operation=nn,this.code=ut,this.continueUrl=null!==(R=Me.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(Y=Me.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(fe=Me.tenantId)&&void 0!==fe?fe:null}static parseLink(d){const f=function wy(g){const d=(0,x.I9)((0,x.hp)(g)).link,f=d?(0,x.I9)((0,x.hp)(d)).deep_link_id:null,_=(0,x.I9)((0,x.hp)(g)).deep_link_id;return(_?(0,x.I9)((0,x.hp)(_)).link:null)||_||f||d||g}(d);try{return new Bt(f)}catch{return null}}}let Bp=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return Lp._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const w=Bt.parseLink(_);return ie(w,"argument-error"),Lp._fromEmailAndCode(f,w.code,w.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Or{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class hc extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Up extends hc{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return ie("providerId"in f&&"signInMethod"in f,"argument-error"),fo._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ie(d.idToken||d.accessToken,"argument-error"),fo._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Up.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Up.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:w,pendingToken:R,nonce:Y,providerId:fe}=d;if(!_&&!w&&!f&&!R||!fe)return null;try{return new Up(fe)._credential({idToken:f,accessToken:_,nonce:Y,pendingToken:R})}catch{return null}}}let e4=(()=>{class g extends hc{constructor(){super("facebook.com")}static credential(f){return fo._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),uh=(()=>{class g extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return fo._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:w}=f;if(!_&&!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Cy=(()=>{class g extends hc{constructor(){super("github.com")}static credential(f){return fo._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Eu extends oh{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Oo(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Oo(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Oo(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:w,pendingToken:R}=f;return _&&w&&R&&_===w?new Eu(_,R):null}static _create(d,f){return new Eu(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zp extends Or{constructor(d){ie(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return zp.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return zp.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Eu.fromJSON(d);return ie(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return Eu._create(_,f)}catch{return null}}}let Qw=(()=>{class g extends hc{constructor(){super("twitter.com")}static credential(f,_){return fo._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:w}=f;if(!_||!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function fc(g,d){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,D.A)(function*(g,d){return Mt(g,"POST","/v1/accounts:signUp",se(g,d))})).apply(this,arguments)}class fi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,w=!1){return(0,D.A)(function*(){const R=yield F._fromIdTokenResponse(d,_,w),Y=Yw(_);return new fi({user:R,providerId:Y,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,D.A)(function*(){yield d._updateTokensIfNecessary(_,!0);const w=Yw(_);return new fi({user:d,providerId:w,_tokenResponse:_,operationType:f})})()}}function Yw(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Re(g){return Hp.apply(this,arguments)}function Hp(){return(Hp=(0,D.A)(function*(g){var d;if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const f=Cr(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new fi({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield fc(f,{returnSecureToken:!0}),w=yield fi._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(w.user),w})).apply(this,arguments)}class k extends x.g{constructor(d,f,_,w){var R;super(f.code,f.message),this.operationType=_,this.user=w,Object.setPrototypeOf(this,k.prototype),this.customData={appName:d.name,tenantId:null!==(R=d.tenantId)&&void 0!==R?R:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,w){return new k(d,f,_,w)}}function dh(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?k._fromErrorAndOperation(g,R,d,_):R})}function $p(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function hh(g,d){return Ay.apply(this,arguments)}function Ay(){return Ay=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);yield Wp(!0,f,d);const{providerUserInfo:_}=yield function gs(g,d){return js.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),w=$p(_||[]);return f.providerData=f.providerData.filter(R=>w.has(R.providerId)),w.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Ay.apply(this,arguments)}function Sy(g,d){return xy.apply(this,arguments)}function xy(){return(xy=(0,D.A)(function*(g,d,f=!1){const _=yield Fn(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return fi._forOperation(g,"link",_)})).apply(this,arguments)}function Wp(g,d,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,D.A)(function*(g,d,f){yield vs(d);const w=!1===g?"provider-already-linked":"no-such-provider";ie($p(d.providerData).has(f)===g,d.auth,w)})).apply(this,arguments)}function Xw(g,d){return pc.apply(this,arguments)}function pc(){return(pc=(0,D.A)(function*(g,d,f=!1){const{auth:_}=g;if((0,Z._isFirebaseServerApp)(_.app))return Promise.reject(gt(_));const w="reauthenticate";try{const R=yield Fn(g,dh(_,w,d,g),f);ie(R.idToken,_,"internal-error");const Y=No(R.idToken);ie(Y,_,"internal-error");const{sub:fe}=Y;return ie(g.uid===fe,_,"user-mismatch"),fi._forOperation(g,w,R)}catch(R){throw"auth/user-not-found"===R?.code&&Tt(_,"user-mismatch"),R}})).apply(this,arguments)}function Zw(g,d){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,D.A)(function*(g,d,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _="signIn",w=yield dh(g,_,d),R=yield fi._fromIdTokenResponse(g,_,w);return f||(yield g._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Gp(g,d){return $i.apply(this,arguments)}function $i(){return($i=(0,D.A)(function*(g,d){return Zw(Cr(g),d)})).apply(this,arguments)}function mc(g,d){return qp.apply(this,arguments)}function qp(){return(qp=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);return yield Wp(!1,f,d.providerId),Sy(f,d)})).apply(this,arguments)}function fh(g,d){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,D.A)(function*(g,d){return Xw((0,x.Ku)(g),d)})).apply(this,arguments)}function Jw(){return(Jw=(0,D.A)(function*(g,d){return Mt(g,"POST","/v1/accounts:signInWithCustomToken",se(g,d))})).apply(this,arguments)}function e0(g,d){return t0.apply(this,arguments)}function t0(){return t0=(0,D.A)(function*(g,d){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const f=Cr(g),_=yield function Dy(g,d){return Jw.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),w=yield fi._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(w.user),w}),t0.apply(this,arguments)}class Pi{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?ph._fromServerResponse(d,f):"totpInfo"in f?vl._fromServerResponse(d,f):Tt(d,"internal-error")}}class ph extends Pi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new ph(f)}}class vl extends Pi{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new vl(f)}}function Ry(g,d,f){var _;ie((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),ie(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ie(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(ie(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Kp(g){return po.apply(this,arguments)}function po(){return(po=(0,D.A)(function*(g){const d=Cr(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function vn(g,d,f){return mo.apply(this,arguments)}function mo(){return(mo=(0,D.A)(function*(g,d,f){const _=Cr(g),w={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&Ry(_,w,f),yield Np(_,w,"getOobCode",ye)})).apply(this,arguments)}function n0(g,d,f){return mh.apply(this,arguments)}function mh(){return mh=(0,D.A)(function*(g,d,f){yield yR((0,x.Ku)(g),{oobCode:d,newPassword:f}).catch(function(){var _=(0,D.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Kp(g),w});return function(w){return _.apply(this,arguments)}}())}),mh.apply(this,arguments)}function Qp(g,d){return wu.apply(this,arguments)}function wu(){return wu=(0,D.A)(function*(g,d){yield function vR(g,d){return Op.apply(this,arguments)}((0,x.Ku)(g),{oobCode:d})}),wu.apply(this,arguments)}function go(g,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g),_=yield yR(f,{oobCode:d}),w=_.requestType;switch(ie(w,f,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(_.mfaInfo,f,"internal-error");default:ie(_.email,f,"internal-error")}let R=null;return _.mfaInfo&&(R=Pi._fromServerResponse(Cr(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:w}})).apply(this,arguments)}function CR(g,d){return gh.apply(this,arguments)}function gh(){return(gh=(0,D.A)(function*(g,d){const{data:f}=yield go((0,x.Ku)(g),d);return f.email})).apply(this,arguments)}function r0(g,d,f){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=Cr(g),Y=yield Np(_,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fc).catch(Me=>{throw"auth/password-does-not-meet-requirements"===Me.code&&Kp(g),Me}),fe=yield fi._fromIdTokenResponse(_,"signIn",Y);return yield _._updateCurrentUser(fe.user),fe})).apply(this,arguments)}function _h(g,d,f){return(0,Z._isFirebaseServerApp)(g.app)?Promise.reject(gt(g)):Gp((0,x.Ku)(g),Bp.credential(d,f)).catch(function(){var _=(0,D.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Kp(g),w});return function(w){return _.apply(this,arguments)}}())}function s0(g,d,f){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,D.A)(function*(g,d,f){const _=Cr(g),w={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function R(Y,fe){ie(fe.handleCodeInApp,_,"argument-error"),fe&&Ry(_,Y,fe)})(w,f),yield Np(_,w,"getOobCode",_y)})).apply(this,arguments)}function TR(g,d){const f=Bt.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}function My(g,d,f){return Py.apply(this,arguments)}function Py(){return(Py=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=(0,x.Ku)(g),w=Bp.credentialWithLink(d,f||zt());return ie(w._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Gp(_,w)})).apply(this,arguments)}function Ws(){return(Ws=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:createAuthUri",se(g,d))})).apply(this,arguments)}function SR(g,d){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,D.A)(function*(g,d){const _={identifier:d,continueUri:Tn()?zt():"http://localhost"},{signinMethods:w}=yield function AR(g,d){return Ws.apply(this,arguments)}((0,x.Ku)(g),_);return w||[]}),Zp.apply(this,arguments)}function xR(g,d){return ky.apply(this,arguments)}function ky(){return ky=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g),w={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Ry(f.auth,w,d);const{email:R}=yield function $w(g,d){return gy.apply(this,arguments)}(f.auth,w);R!==g.email&&(yield g.reload())}),ky.apply(this,arguments)}function DR(g,d,f){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&Ry(_.auth,R,f);const{email:Y}=yield function yy(g,d){return vy.apply(this,arguments)}(_.auth,R);Y!==g.email&&(yield g.reload())}),Ny.apply(this,arguments)}function Oy(){return(Oy=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function RR(g,d){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,D.A)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,x.Ku)(g),R={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},Y=yield Fn(_,function o0(g,d){return Oy.apply(this,arguments)}(_.auth,R));_.displayName=Y.displayName||null,_.photoURL=Y.photoUrl||null;const fe=_.providerData.find(({providerId:Me})=>"password"===Me);fe&&(fe.displayName=_.displayName,fe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(Y)}),Fy.apply(this,arguments)}function Vn(g,d){const f=(0,x.Ku)(g);return(0,Z._isFirebaseServerApp)(f.auth.app)?Promise.reject(gt(f.auth)):a0(f,d,null)}function MR(g,d){return a0((0,x.Ku)(g),null,d)}function a0(g,d,f){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,D.A)(function*(g,d,f){const{auth:_}=g,R={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(R.email=d),f&&(R.password=f);const Y=yield Fn(g,function ke(g,d){return Hw.apply(this,arguments)}(_,R));yield g._updateTokensIfNecessary(Y,!0)}),Ut.apply(this,arguments)}class Ze{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class ki extends Ze{constructor(d,f,_,w){super(d,f,_),this.username=w}}class Yt extends Ze{constructor(d,f){super(d,"facebook.com",f)}}class pi extends ki{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Ni extends Ze{constructor(d,f){super(d,"google.com",f)}}class bl extends ki{constructor(d,f,_){super(d,"twitter.com",f,_)}}function Wi(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function l0(g){var d,f;if(!g)return null;const{providerId:_}=g,w=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},R=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const Y=null===(f=null===(d=No(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(Y)return new Ze(R,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!_)return null;switch(_){case"facebook.com":return new Yt(R,w);case"github.com":return new pi(R,w);case"google.com":return new Ni(R,w);case"twitter.com":return new bl(R,w,g.screenName||null);case"custom":case"anonymous":return new Ze(R,null);default:return new Ze(R,_,w)}}(f)}function OR(g,d,f,_){return(0,x.Ku)(g).onAuthStateChanged(d,f,_)}class ja{constructor(d,f,_){this.type=d,this.credential=f,this.user=_}static _fromIdtoken(d,f){return new ja("enroll",d,f)}static _fromMfaPendingCredential(d){return new ja("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return ja._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return ja._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Jp{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=Cr(d),w=f.customData._serverResponse,R=(w.mfaInfo||[]).map(fe=>Pi._fromServerResponse(_,fe));ie(w.mfaPendingCredential,_,"internal-error");const Y=ja._fromMfaPendingCredential(w.mfaPendingCredential);return new Jp(Y,R,function(){var fe=(0,D.A)(function*(Me){const nt=yield Me._process(_,Y);delete w.mfaInfo,delete w.mfaPendingCredential;const ut=Object.assign(Object.assign({},w),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(f.operationType){case"signIn":const nn=yield fi._fromIdTokenResponse(_,f.operationType,ut);return yield _._updateCurrentUser(nn.user),nn;case"reauthenticate":return ie(f.user,_,"internal-error"),fi._forOperation(f.user,f.operationType,ut);default:Tt(_,"internal-error")}});return function(Me){return fe.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,D.A)(function*(){return f.signInResolver(d)})()}}function d0(g,d){var f;const _=(0,x.Ku)(g),w=d;return ie(d.customData.operationType,_,"argument-error"),ie(null===(f=w.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),Jp._fromError(_,w)}class yh{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>Pi._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new yh(d)}getSession(){var d=this;return(0,D.A)(function*(){return ja._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var _=this;return(0,D.A)(function*(){const w=d,R=yield _.getSession(),Y=yield Fn(_.user,w._process(_.user.auth,R,f));return yield _.user._updateTokensIfNecessary(Y),_.user.reload()})()}unenroll(d){var f=this;return(0,D.A)(function*(){const _="string"==typeof d?d:d.uid,w=yield f.user.getIdToken();try{const R=yield Fn(f.user,function VR(g,d){return ae(g,"POST","/v2/accounts/mfaEnrollment:withdraw",se(g,d))}(f.user.auth,{idToken:w,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Y})=>Y!==_),yield f.user._updateTokensIfNecessary(R),yield f.user.reload()}catch(R){throw R}})()}}const Cu=new WeakMap;function Oi(g){const d=(0,x.Ku)(g);return Cu.has(d)||Cu.set(d,yh._fromUser(d)),Cu.get(d)}const za="__sak";class tm{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const _c=(()=>{class g extends tm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fy(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const w=this.storage.getItem(_),R=this.localCache[_];w!==R&&f(_,R,w)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((fe,Me,nt)=>{this.notifyListeners(fe,nt)});const w=f.key;_?this.detachListener():this.stopPolling();const R=()=>{const fe=this.storage.getItem(w);!_&&this.localCache[w]===fe||this.notifyListeners(w,fe)},Y=this.storage.getItem(w);!function gu(){return(0,x.lT)()&&10===document.documentMode}()||Y===f.newValue||f.newValue===f.oldValue?R():setTimeout(R,10)}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var w=()=>super._set,R=this;return(0,D.A)(function*(){yield w().call(R,f,_),R.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,w=this;return(0,D.A)(function*(){const R=yield _().call(w,f);return w.localCache[f]=JSON.stringify(R),R})()}_remove(f){var _=()=>super._remove,w=this;return(0,D.A)(function*(){yield _().call(w,f),delete w.localCache[f]})()}}return g.type="LOCAL",g})(),jy=(()=>{class g extends tm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let zy=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(R=>R.isListeningto(f));if(_)return _;const w=new g(f);return this.receivers.push(w),w}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,D.A)(function*(){const w=f,{eventId:R,eventType:Y,data:fe}=w.data,Me=_.handlersMap[Y];if(!Me?.size)return;w.ports[0].postMessage({status:"ack",eventId:R,eventType:Y});const nt=Array.from(Me).map(function(){var nn=(0,D.A)(function*(Pn){return Pn(w.origin,fe)});return function(Pn){return nn.apply(this,arguments)}}()),ut=yield function zR(g){return Promise.all(g.map(function(){var d=(0,D.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(nt);w.ports[0].postMessage({status:"done",eventId:R,eventType:Y,response:ut})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Is(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class f0{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var w=this;return(0,D.A)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let Y,fe;return new Promise((Me,nt)=>{const ut=Is("",20);R.port1.start();const nn=setTimeout(()=>{nt(new Error("unsupported_event"))},_);fe={messageChannel:R,onMessage(Pn){const Ts=Pn;if(Ts.data.eventId===ut)switch(Ts.data.status){case"ack":clearTimeout(nn),Y=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Me(Ts.data.response);break;default:clearTimeout(nn),clearTimeout(Y),nt(new Error("invalid_response"))}}},w.handlers.add(fe),R.port1.addEventListener("message",fe.onMessage),w.target.postMessage({eventType:d,eventId:ut,data:f},[R.port2])}).finally(()=>{fe&&w.removeMessageHandler(fe)})})()}}function Fr(){return window}function Hy(){return typeof Fr().WorkerGlobalScope<"u"&&"function"==typeof Fr().importScripts}function Wr(){return(Wr=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Au="firebaseLocalStorageDb",nm="firebaseLocalStorage",m0="fbase_key";class vh{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function rm(g,d){return g.transaction([nm],d?"readwrite":"readonly").objectStore(nm)}function bh(){const g=indexedDB.open(Au,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(nm,{keyPath:m0})}catch(w){f(w)}}),g.addEventListener("success",(0,D.A)(function*(){const _=g.result;_.objectStoreNames.contains(nm)?d(_):(_.close(),yield function GR(){const g=indexedDB.deleteDatabase(Au);return new vh(g).toPromise()}(),d(yield bh()))}))})}function Eh(g,d,f){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,D.A)(function*(g,d,f){const _=rm(g,!0).put({[m0]:d,value:f});return new vh(_).toPromise()})).apply(this,arguments)}function dt(){return(dt=(0,D.A)(function*(g,d){const f=rm(g,!1).get(d),_=yield new vh(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Gr(g,d){const f=rm(g,!0).delete(d);return new vh(f).toPromise()}const yc=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,D.A)(function*(){return f.db||(f.db=yield bh()),f.db})()}_withRetries(f){var _=this;return(0,D.A)(function*(){let w=0;for(;;)try{const R=yield _._openDb();return yield f(R)}catch(R){if(w++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,D.A)(function*(){return Hy()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,D.A)(function*(){f.receiver=zy._getInstance(function $R(){return Hy()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,D.A)(function*(w,R){return{keyProcessed:(yield f._poll()).includes(R.key)}});return function(w,R){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,D.A)(function*(w,R){return["keyChanged"]});return function(w,R){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,D.A)(function*(){var _,w;if(f.activeServiceWorker=yield function HR(){return Wr.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new f0(f.activeServiceWorker);const R=yield f.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(w=R[0])&&void 0!==w&&w.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,D.A)(function*(){if(_.sender&&_.activeServiceWorker&&function p0(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const f=yield bh();return yield Eh(f,za,"1"),yield Gr(f,za),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,D.A)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var w=this;return(0,D.A)(function*(){return w._withPendingWrite((0,D.A)(function*(){return yield w._withRetries(R=>Eh(R,f,_)),w.localCache[f]=_,w.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,D.A)(function*(){const w=yield _._withRetries(R=>function Ue(g,d){return dt.apply(this,arguments)}(R,f));return _.localCache[f]=w,w})()}_remove(f){var _=this;return(0,D.A)(function*(){return _._withPendingWrite((0,D.A)(function*(){return yield _._withRetries(w=>Gr(w,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,D.A)(function*(){const _=yield f._withRetries(Y=>{const fe=rm(Y,!1).getAll();return new vh(fe).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const w=[],R=new Set;if(0!==_.length)for(const{fbase_key:Y,value:fe}of _)R.add(Y),JSON.stringify(f.localCache[Y])!==JSON.stringify(fe)&&(f.notifyListeners(Y,fe),w.push(Y));for(const Y of Object.keys(f.localCache))f.localCache[Y]&&!R.has(Y)&&(f.notifyListeners(Y,null),w.push(Y));return w})()}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),wh=1e12;class Su{constructor(d){this.auth=d,this.counter=wh,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new pr(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||wh;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||wh))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,D.A)(function*(){var _;return null===(_=f._widgets.get(d||wh))||void 0===_||_.execute(),""})()}}class pr{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof d?document.getElementById(d):d;ie(w,"argument-error",{appName:f}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vc(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Il=bs("rcb"),Ha=new ir(3e4,6e4);class xu{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Fr().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return ie(function g0(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&en(Fr().grecaptcha)?Promise.resolve(Fr().grecaptcha):new Promise((_,w)=>{const R=Fr().setTimeout(()=>{w(At(d,"network-request-failed"))},Ha.get());Fr()[Il]=()=>{Fr().clearTimeout(R),delete Fr()[Il];const fe=Fr().grecaptcha;if(!fe||!en(fe))return void w(At(d,"internal-error"));const Me=fe.render;fe.render=(nt,ut)=>{const nn=Me(nt,ut);return this.counter++,nn},this.hostLanguage=f,_(fe)},py(`${function Qn(){return cc.recaptchaV2Script}()}?${(0,x.Am)({onload:Il,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(R),w(At(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Fr().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wl{load(d){return(0,D.A)(function*(){return new Su(d)})()}clearedOneInstance(){}}const Ch="recaptcha",_o={theme:"light",type:"image"};class ct{constructor(d,f,_=Object.assign({},_o)){this.parameters=_,this.type=Ch,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cr(d),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof f?document.getElementById(f):f;ie(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wl:new xu,this.validateStartingState()}verify(){var d=this;return(0,D.A)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(R=>{const Y=fe=>{fe&&(d.tokenChangeListeners.delete(Y),R(fe))};d.tokenChangeListeners.add(Y),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=Fr()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,D.A)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,D.A)(function*(){ie(Tn()&&!Hy(),d.auth,"internal-error"),yield function $y(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Jr(g){return wi.apply(this,arguments)}(d.auth);ie(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bc{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=bu._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function pa(g,d,f){return Du.apply(this,arguments)}function Du(){return(Du=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=Cr(g),w=yield mi(_,d,(0,x.Ku)(f));return new bc(w,R=>Gp(_,R))})).apply(this,arguments)}function Ru(g,d,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);yield Wp(!1,_,"phone");const w=yield mi(_.auth,d,(0,x.Ku)(f));return new bc(w,R=>mc(_,R))})).apply(this,arguments)}function im(g,d,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(gt(_.auth));const w=yield mi(_.auth,d,(0,x.Ku)(f));return new bc(w,R=>fh(_,R))})).apply(this,arguments)}function mi(g,d,f){return Th.apply(this,arguments)}function Th(){return Th=(0,D.A)(function*(g,d,f){var _;const w=yield f.verify();try{let R;if(ie("string"==typeof w,g,"argument-error"),ie(f.type===Ch,g,"argument-error"),R="string"==typeof d?{phoneNumber:d}:d,"session"in R){const Y=R.session;if("phoneNumber"in R)return ie("enroll"===Y.type,g,"internal-error"),(yield function gc(g,d){return ae(g,"POST","/v2/accounts/mfaEnrollment:start",se(g,d))}(g,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{ie("signin"===Y.type,g,"internal-error");const fe=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return ie(fe,g,"missing-multi-factor-info"),(yield function Jn(g,d){return ae(g,"POST","/v2/accounts/mfaSignIn:start",se(g,d))}(g,{mfaPendingCredential:Y.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function qw(g,d){return Fo.apply(this,arguments)}(g,{phoneNumber:R.phoneNumber,recaptchaToken:w});return Y}}finally{f._reset()}}),Th.apply(this,arguments)}function Ec(g,d){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(f.auth.app))return Promise.reject(gt(f.auth));yield Sy(f,d)})).apply(this,arguments)}let Vo=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=Cr(f)}verifyPhoneNumber(f,_){return mi(this.auth,f,(0,x.Ku)(_))}static credential(f,_){return bu._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:w}=f;return _&&w?bu._fromTokenResponse(_,w):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Bo(g,d){return d?me(d):(ie(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class sm extends oh{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Oo(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Oo(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Oo(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function qR(g){return Zw(g.auth,new sm(g),g.bypassAuthState)}function Wy(g){const{auth:d,user:f}=g;return ie(f,d,"internal-error"),Xw(f,new sm(g),g.bypassAuthState)}function _0(g){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,D.A)(function*(g){const{auth:d,user:f}=g;return ie(f,d,"internal-error"),Sy(f,new sm(g),g.bypassAuthState)})).apply(this,arguments)}class om{constructor(d,f,_,w,R=!1){this.auth=d,this.resolver=_,this.user=w,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,D.A)(function*(_,w){d.pendingPromise={resolve:_,reject:w};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(R){d.reject(R)}});return function(_,w){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,D.A)(function*(){const{urlResponse:_,sessionId:w,postBody:R,tenantId:Y,error:fe,type:Me}=d;if(fe)return void f.reject(fe);const nt={auth:f.auth,requestUri:_,sessionId:w,tenantId:Y||void 0,postBody:R||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Me)(nt))}catch(ut){f.reject(ut)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return qR;case"linkViaPopup":case"linkViaRedirect":return _0;case"reauthViaPopup":case"reauthViaRedirect":return Wy;default:Tt(this.auth,"internal-error")}}resolve(d){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const n4=new ir(2e3,1e4);function r4(g,d,f){return y0.apply(this,arguments)}function y0(){return(y0=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(At(g,"operation-not-supported-in-this-environment"));const _=Cr(g);Et(g,d,Or);const w=Bo(_,f);return new E0(_,"signInViaPopup",d,w).executeNotNull()})).apply(this,arguments)}function i4(g,d,f){return v0.apply(this,arguments)}function v0(){return(v0=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(At(_.auth,"operation-not-supported-in-this-environment"));Et(_.auth,d,Or);const w=Bo(_.auth,f);return new E0(_.auth,"reauthViaPopup",d,w,_).executeNotNull()})).apply(this,arguments)}function s4(g,d,f){return b0.apply(this,arguments)}function b0(){return(b0=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);Et(_.auth,d,Or);const w=Bo(_.auth,f);return new E0(_.auth,"linkViaPopup",d,w,_).executeNotNull()})).apply(this,arguments)}let E0=(()=>{class g extends om{constructor(f,_,w,R,Y){super(f,_,R,Y),this.provider=w,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,D.A)(function*(){const _=yield f.execute();return ie(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,D.A)(function*(){vt(1===f.filter.length,"Popup operations only handle one event");const _=Is();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(w=>{f.reject(w)}),f.resolver._isIframeWebStorageSupported(f.auth,w=>{w||f.reject(At(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,w;this.pollId=null!==(w=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,n4.get())};f()}}return g.currentPopupAction=null,g})();const o4="pendingRedirect",am=new Map;class a4 extends om{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,D.A)(function*(){let _=am.get(f.auth._key());if(!_){try{const R=(yield function l4(g,d){return lm.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(R)}catch(w){_=()=>Promise.reject(w)}am.set(f.auth._key(),_)}return f.bypassAuthState||am.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,D.A)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const w=yield _.auth._redirectUserForId(d.eventId);if(w)return _.user=w,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function lm(){return(lm=(0,D.A)(function*(g,d){const f=w0(d),_=QR(g);if(!(yield _._isAvailable()))return!1;const w="true"===(yield _._get(f));return yield _._remove(f),w})).apply(this,arguments)}function cm(g,d){return I0.apply(this,arguments)}function I0(){return(I0=(0,D.A)(function*(g,d){return QR(g)._set(w0(d),"true")})).apply(this,arguments)}function c4(){am.clear()}function KR(g,d){am.set(g._key(),d)}function QR(g){return me(g._redirectPersistence)}function w0(g){return Le(o4,g.config.apiKey,g.name)}function C0(g,d,f){return function as(g,d,f){return um.apply(this,arguments)}(g,d,f)}function um(){return(um=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=Cr(g);Et(g,d,Or),yield _._initializationPromise;const w=Bo(_,f);return yield cm(w,_),w._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function YR(g,d,f){return function XR(g,d,f){return dm.apply(this,arguments)}(g,d,f)}function dm(){return(dm=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if(Et(_.auth,d,Or),(0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(gt(_.auth));yield _.auth._initializationPromise;const w=Bo(_.auth,f);yield cm(w,_.auth);const R=yield fn(_);return w._openRedirect(_.auth,d,"reauthViaRedirect",R)})).apply(this,arguments)}function T0(g,d,f){return function ZR(g,d,f){return Ah.apply(this,arguments)}(g,d,f)}function Ah(){return(Ah=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);Et(_.auth,d,Or),yield _.auth._initializationPromise;const w=Bo(_.auth,f);yield Wp(!1,_,d.providerId),yield cm(w,_.auth);const R=yield fn(_);return w._openRedirect(_.auth,d,"linkViaRedirect",R)})).apply(this,arguments)}function JR(g,d){return yo.apply(this,arguments)}function yo(){return(yo=(0,D.A)(function*(g,d){return yield Cr(g)._initializationPromise,hm(g,d,!1)})).apply(this,arguments)}function hm(g,d){return fm.apply(this,arguments)}function fm(){return(fm=(0,D.A)(function*(g,d,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(gt(g));const _=Cr(g),w=Bo(_,d),Y=yield new a4(_,w,f).execute();return Y&&!f&&(delete Y.user._redirectEventId,yield _._persistUserIfCurrent(Y.user),yield _._setRedirectUser(null,d)),Y})).apply(this,arguments)}function fn(g){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,D.A)(function*(g){const d=Is(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Gi{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Ic(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pu(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!Pu(d)){const w=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(At(this.auth,w))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(A0(d))}saveEventToCache(d){this.cachedEventUids.add(A0(d)),this.lastProcessedEventTime=Date.now()}}function A0(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function Pu({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Cs(g){return qy.apply(this,arguments)}function qy(){return(qy=(0,D.A)(function*(g,d={}){return ae(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Ky=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eM=/^https?/;function pm(){return(pm=(0,D.A)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Cs(g);for(const f of d)try{if(S0(f))return}catch{}Tt(g,"unauthorized-domain")})).apply(this,arguments)}function S0(g){const d=zt(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const Y=new URL(g);return""===Y.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&Y.hostname===_}if(!eM.test(f))return!1;if(Ky.test(g))return _===g;const w=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(_)}const x0=new ir(3e4,6e4);function Dh(){const g=Fr().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let wc=null;const Yy=new ir(5e3,15e3),$a="__/auth/iframe",Rt="emulator/auth/iframe",gm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D0(g){const d=g.config;ie(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?fr(d,Rt):`https://${g.config.authDomain}/${$a}`,_={apiKey:d.apiKey,appName:g.name,v:Z.SDK_VERSION},w=Xy.get(g.config.apiHost);w&&(_.eid=w);const R=g._getFrameworks();return R.length&&(_.fw=R.join(",")),`${f}?${(0,x.Am)(_).slice(1)}`}function Zy(){return Zy=(0,D.A)(function*(g){const d=yield function mm(g){return wc=wc||function Qy(g){return new Promise((d,f)=>{var _,w,R;function Y(){Dh(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Dh(),f(At(g,"network-request-failed"))},timeout:x0.get()})}if(null!==(w=null===(_=Fr().gapi)||void 0===_?void 0:_.iframes)&&void 0!==w&&w.Iframe)d(gapi.iframes.getContext());else{if(null===(R=Fr().gapi)||void 0===R||!R.load){const fe=bs("iframefcb");return Fr()[fe]=()=>{gapi.load?Y():f(At(g,"network-request-failed"))},py(`${function kp(){return cc.gapiScript}()}?onload=${fe}`).catch(Me=>f(Me))}Y()}}).catch(d=>{throw wc=null,d})}(g),wc}(g),f=Fr().gapi;return ie(f,g,"internal-error"),d.open({where:document.body,url:D0(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gm,dontclear:!0},_=>new Promise(function(){var w=(0,D.A)(function*(R,Y){yield _.restyle({setHideOnLeave:!1});const fe=At(g,"network-request-failed"),Me=Fr().setTimeout(()=>{Y(fe)},Yy.get());function nt(){Fr().clearTimeout(Me),R(_)}_.ping(nt).then(nt,()=>{Y(fe)})});return function(R,Y){return w.apply(this,arguments)}}()))}),Zy.apply(this,arguments)}const tM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class M0{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const oM="__/auth/handler",we="emulator/auth/handler",qt=encodeURIComponent("fac");function xn(g,d,f,_,w,R){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,D.A)(function*(g,d,f,_,w,R){ie(g.config.authDomain,g,"auth-domain-config-required"),ie(g.config.apiKey,g,"invalid-api-key");const Y={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:Z.SDK_VERSION,eventId:w};if(d instanceof Or){d.setDefaultLanguage(g.languageCode),Y.providerId=d.providerId||"",(0,x.Im)(d.getCustomParameters())||(Y.customParameters=JSON.stringify(d.getCustomParameters()));for(const[ut,nn]of Object.entries(R||{}))Y[ut]=nn}if(d instanceof hc){const ut=d.getScopes().filter(nn=>""!==nn);ut.length>0&&(Y.scopes=ut.join(","))}g.tenantId&&(Y.tid=g.tenantId);const fe=Y;for(const ut of Object.keys(fe))void 0===fe[ut]&&delete fe[ut];const Me=yield g._getAppCheckToken(),nt=Me?`#${qt}=${encodeURIComponent(Me)}`:"";return`${function Bn({config:g}){return g.emulator?fr(g,we):`https://${g.authDomain}/${oM}`}(g)}?${(0,x.Am)(fe).slice(1)}${nt}`})).apply(this,arguments)}const _m="webStorageSupport",bo=class Rh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jy,this._completeRedirectFn=hm,this._overrideRedirectResult=KR}_openPopup(d,f,_,w){var R=this;return(0,D.A)(function*(){var Y;vt(null===(Y=R.eventManagers[d._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const fe=yield xn(d,f,_,zt(),w);return function iM(g,d,f,_=500,w=600){const R=Math.max((window.screen.availHeight-w)/2,0).toString(),Y=Math.max((window.screen.availWidth-_)/2,0).toString();let fe="";const Me=Object.assign(Object.assign({},tM),{width:_.toString(),height:w.toString(),top:R,left:Y}),nt=(0,x.ZQ)().toLowerCase();f&&(fe=$s(nt)?"_blank":f),K(nt)&&(d=d||"http://localhost",Me.scrollbars="yes");const ut=Object.entries(Me).reduce((Pn,[Ts,Un])=>`${Pn}${Ts}=${Un},`,"");if(function mu(g=(0,x.ZQ)()){var d;return ho(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(nt)&&"_self"!==fe)return function sM(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",fe),new M0(null);const nn=window.open(d||"",fe,ut);ie(nn,g,"popup-blocked");try{nn.focus()}catch{}return new M0(nn)}(d,fe,Is())})()}_openRedirect(d,f,_,w){var R=this;return(0,D.A)(function*(){return yield R._originValidation(d),function Tu(g){Fr().location.href=g}(yield xn(d,f,_,zt(),w)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:w,promise:R}=this.eventManagers[f];return w?Promise.resolve(w):(vt(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,D.A)(function*(){const _=yield function u4(g){return Zy.apply(this,arguments)}(d),w=new Gi(d);return _.register("authEvent",R=>(ie(R?.authEvent,d,"invalid-auth-event"),{status:w.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:w},f.iframes[d._key()]=_,w})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(_m,{type:_m},w=>{var R;const Y=null===(R=w?.[0])||void 0===R?void 0:R[_m];void 0!==Y&&f(!!Y),Tt(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function vo(g){return pm.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return fy()||Xn()||ho()}};class ym{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return it("unexpected MultiFactorSessionType")}}}class Mh extends ym{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Mh(d)}_finalizeEnroll(d,f,_){return function LR(g,d){return ae(g,"POST","/v2/accounts/mfaEnrollment:finalize",se(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function ni(g,d){return ae(g,"POST","/v2/accounts/mfaSignIn:finalize",se(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let P0=(()=>{class g{constructor(){}static assertion(f){return Mh._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var ev="@firebase/auth";class Wa{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,D.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const aM=(0,x.XA)("authIdTokenMaxAge")||300;let tv=null;const lM=g=>function(){var d=(0,D.A)(function*(f){const _=f&&(yield f.getIdTokenResult()),w=_&&((new Date).getTime()-Date.parse(_.issuedAtTime))/1e3;if(w&&w>aM)return;const R=_?.token;tv!==R&&(tv=R,yield fetch(g,{method:R?"POST":"DELETE",headers:R?{Authorization:`Bearer ${R}`}:{}}))});return function(f){return d.apply(this,arguments)}}();function cM(g=(0,Z.getApp)()){const d=(0,Z._getProvider)(g,"auth");if(d.isInitialized())return d.getImmediate();const f=function YH(g,d){const f=(0,Z._getProvider)(g,"auth");if(f.isInitialized()){const w=f.getImmediate(),R=f.getOptions();if((0,x.bD)(R,d??{}))return w;Tt(w,"already-initialized")}return f.initialize({options:d})}(g,{popupRedirectResolver:bo,persistence:[yc,_c,jy]}),_=(0,x.XA)("authTokenSyncURL");if(_&&"boolean"==typeof isSecureContext&&isSecureContext){const R=new URL(_,location.origin);if(location.origin===R.origin){const Y=lM(R.toString());(function El(g,d,f){(0,x.Ku)(g).beforeAuthStateChanged(d,f)})(f,Y,()=>Y(f.currentUser)),function NR(g,d,f,_){(0,x.Ku)(g).onIdTokenChanged(d,f,_)}(f,fe=>Y(fe))}}const w=(0,x.Tj)("auth");return w&&gR(f,`http://${w}`),f}(function qH(g){cc=g})({loadJS:g=>new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=w=>{const R=At("internal-error");R.customData=w,f(R)},_.type="text/javascript",_.charset="UTF-8",function nv(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Uo(g){(0,Z._registerComponent)(new te.uA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),w=d.getProvider("heartbeat"),R=d.getProvider("app-check-internal"),{apiKey:Y,authDomain:fe}=_.options;ie(Y&&!Y.includes(":"),"invalid-api-key",{appName:_.name});const Me={apiKey:Y,authDomain:fe,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pp(g)},nt=new Ln(_,w,R,Me);return function mR(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(me);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(nt,f),nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new te.uA("auth-internal",d=>{const f=Cr(d.getProvider("auth").getImmediate());return new Wa(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(ev,"1.7.9",function N0(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Z.registerVersion)(ev,"1.7.9","esm2017")}("Browser")},1401:(yt,U,G)=>{G.d(U,{$L:()=>Mn,$g:()=>fr,A4:()=>$,Am:()=>gs,As:()=>It,Bd:()=>it,Cv:()=>en,FA:()=>pe,Fy:()=>gt,HN:()=>ys,Hk:()=>x,I9:()=>js,Im:()=>wi,K3:()=>te,KA:()=>ee,Ku:()=>Se,Ll:()=>ie,OE:()=>hi,T9:()=>Tt,Tj:()=>Gt,Uj:()=>X,XA:()=>At,ZQ:()=>Et,bD:()=>ei,c1:()=>zt,cY:()=>Ot,dI:()=>_s,dM:()=>se,eX:()=>_e,g:()=>ge,gR:()=>xt,gz:()=>ca,hp:()=>co,jZ:()=>Ve,kH:()=>Nr,kj:()=>yl,lT:()=>Sn,lV:()=>An,mS:()=>Fe,nr:()=>$r,oD:()=>Hi,od:()=>No,p7:()=>vt,p9:()=>Vt,qc:()=>tn,sr:()=>Tn,tD:()=>zs,u:()=>z,vA:()=>Z,yw:()=>Jr,zW:()=>de,zw:()=>ue});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(C,E){if(!C)throw x(E)},x=function(C){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+C)},he=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):55296==(64512&j)&&F+1<C.length&&56320==(64512&C.charCodeAt(F+1))?(j=65536+((1023&j)<<10)+(1023&C.charCodeAt(++F)),E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,E){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=E?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let j=0;j<C.length;j+=3){const me=C[j],Ne=j+1<C.length,mt=Ne?C[j+1]:0,Le=j+2<C.length,_n=Le?C[j+2]:0;let Xn=(15&mt)<<2|_n>>6,$s=63&_n;Le||($s=64,Ne||(Xn=64)),F.push(S[me>>2],S[(3&me)<<4|mt>>4],S[Xn],S[$s])}return F.join("")},encodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?btoa(C):this.encodeByteArray(he(C),E)},decodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?atob(C):function(C){const E=[];let S=0,F=0;for(;S<C.length;){const j=C[S++];if(j<128)E[F++]=String.fromCharCode(j);else if(j>191&&j<224){const me=C[S++];E[F++]=String.fromCharCode((31&j)<<6|63&me)}else if(j>239&&j<365){const Le=((7&j)<<18|(63&C[S++])<<12|(63&C[S++])<<6|63&C[S++])-65536;E[F++]=String.fromCharCode(55296+(Le>>10)),E[F++]=String.fromCharCode(56320+(1023&Le))}else{const me=C[S++],Ne=C[S++];E[F++]=String.fromCharCode((15&j)<<12|(63&me)<<6|63&Ne)}}return E.join("")}(this.decodeStringToByteArray(C,E))},decodeStringToByteArray(C,E){this.init_();const S=E?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let j=0;j<C.length;){const me=S[C.charAt(j++)],mt=j<C.length?S[C.charAt(j)]:0;++j;const _n=j<C.length?S[C.charAt(j)]:64;++j;const K=j<C.length?S[C.charAt(j)]:64;if(++j,null==me||null==mt||null==_n||null==K)throw new Ce;F.push(me<<2|mt>>4),64!==_n&&(F.push(mt<<4&240|_n>>2),64!==K&&F.push(_n<<6&192|K))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ee=function(C){const E=he(C);return te.encodeByteArray(E,!0)},X=function(C){return ee(C).replace(/\./g,"")},z=function(C){try{return te.decodeString(C,!0)}catch(E){console.error("base64Decode failed: ",E)}return null};function $(C){return ue(void 0,C)}function ue(C,E){if(!(E instanceof Object))return E;switch(E.constructor){case Date:return new Date(E.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return E}for(const S in E)!E.hasOwnProperty(S)||!xe(S)||(C[S]=ue(C[S],E[S]));return C}function xe(C){return"__proto__"!==C}function Fe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const et=()=>{try{return Fe().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const E=C&&z(C[1]);return E&&JSON.parse(E)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},Gt=C=>{var E,S;return null===(S=null===(E=et())||void 0===E?void 0:E.emulatorHosts)||void 0===S?void 0:S[C]},Tt=()=>{var C;return null===(C=et())||void 0===C?void 0:C.config},At=C=>{var E;return null===(E=et())||void 0===E?void 0:E[`_${C}`]};class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((E,S)=>{this.resolve=E,this.reject=S})}wrapCallback(E){return(S,F)=>{S?this.reject(S):this.resolve(F),"function"==typeof E&&(this.promise.catch(()=>{}),1===E.length?E(S):E(S,F))}}}function gt(C,E){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=E||"demo-project",j=C.iat||0,me=C.sub||C.user_id;if(!me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:j,exp:j+3600,auth_time:j,sub:me,user_id:me,firebase:{sign_in_provider:"custom",identities:{}}},C);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(Ne)),""].join(".")}function Et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function ie(){var C;const E=null===(C=et())||void 0===C?void 0:C.forceEnvironment;if("node"===E)return!0;if("browser"===E)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return typeof window<"u"||vt()}function vt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function zt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Tn(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function An(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Sn(){const C=Et();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function fr(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function $r(){return!ie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){try{return"object"==typeof indexedDB}catch{return!1}}function _e(){return new Promise((C,E)=>{try{let S=!0;const F="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(F);j.onsuccess=()=>{j.result.close(),S||self.indexedDB.deleteDatabase(F),C(!0)},j.onupgradeneeded=()=>{S=!1},j.onerror=()=>{var me;E((null===(me=j.error)||void 0===me?void 0:me.message)||"")}}catch(S){E(S)}})}function se(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ge extends Error{constructor(E,S,F){super(S),this.code=E,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}}class pe{constructor(E,S,F){this.service=E,this.serviceName=S,this.errors=F}create(E,...S){const F=S[0]||{},j=`${this.service}/${E}`,me=this.errors[E],Ne=me?function at(C,E){return C.replace(Mt,(S,F)=>{const j=E[F];return null!=j?String(j):`<${F}?>`})}(me,F):"Error";return new ge(j,`${this.serviceName}: ${Ne} (${j}).`,F)}}const Mt=/\{\$([^}]+)}/g;function Mn(C){return JSON.parse(C)}function It(C){return JSON.stringify(C)}const wn=function(C){let E={},S={},F={},j="";try{const me=C.split(".");E=Mn(z(me[0])||""),S=Mn(z(me[1])||""),j=me[2],F=S.d||{},delete S.d}catch{}return{header:E,claims:S,data:F,signature:j}},en=function(C){const S=wn(C).claims;return!!S&&"object"==typeof S&&S.hasOwnProperty("iat")},tn=function(C){const E=wn(C).claims;return"object"==typeof E&&!0===E.admin};function xt(C,E){return Object.prototype.hasOwnProperty.call(C,E)}function Jr(C,E){if(Object.prototype.hasOwnProperty.call(C,E))return C[E]}function wi(C){for(const E in C)if(Object.prototype.hasOwnProperty.call(C,E))return!1;return!0}function Nr(C,E,S){const F={};for(const j in C)Object.prototype.hasOwnProperty.call(C,j)&&(F[j]=E.call(S,C[j],j,C));return F}function ei(C,E){if(C===E)return!0;const S=Object.keys(C),F=Object.keys(E);for(const j of S){if(!F.includes(j))return!1;const me=C[j],Ne=E[j];if(lo(me)&&lo(Ne)){if(!ei(me,Ne))return!1}else if(me!==Ne)return!1}for(const j of F)if(!S.includes(j))return!1;return!0}function lo(C){return null!==C&&"object"==typeof C}function gs(C){const E=[];for(const[S,F]of Object.entries(C))Array.isArray(F)?F.forEach(j=>{E.push(encodeURIComponent(S)+"="+encodeURIComponent(j))}):E.push(encodeURIComponent(S)+"="+encodeURIComponent(F));return E.length?"&"+E.join("&"):""}function js(C){const E={};return C.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[j,me]=F.split("=");E[decodeURIComponent(j)]=decodeURIComponent(me)}}),E}function co(C){const E=C.indexOf("?");if(!E)return"";const S=C.indexOf("#",E);return C.substring(E,S>0?S:void 0)}class ca{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let E=1;E<this.blockSize;++E)this.pad_[E]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(E,S){S||(S=0);const F=this.W_;if("string"==typeof E)for(let K=0;K<16;K++)F[K]=E.charCodeAt(S)<<24|E.charCodeAt(S+1)<<16|E.charCodeAt(S+2)<<8|E.charCodeAt(S+3),S+=4;else for(let K=0;K<16;K++)F[K]=E[S]<<24|E[S+1]<<16|E[S+2]<<8|E[S+3],S+=4;for(let K=16;K<80;K++){const Xn=F[K-3]^F[K-8]^F[K-14]^F[K-16];F[K]=4294967295&(Xn<<1|Xn>>>31)}let _n,wr,j=this.chain_[0],me=this.chain_[1],Ne=this.chain_[2],mt=this.chain_[3],Le=this.chain_[4];for(let K=0;K<80;K++){K<40?K<20?(_n=mt^me&(Ne^mt),wr=1518500249):(_n=me^Ne^mt,wr=1859775393):K<60?(_n=me&Ne|mt&(me|Ne),wr=2400959708):(_n=me^Ne^mt,wr=3395469782);const Xn=(j<<5|j>>>27)+_n+Le+wr+F[K]&4294967295;Le=mt,mt=Ne,Ne=4294967295&(me<<30|me>>>2),me=j,j=Xn}this.chain_[0]=this.chain_[0]+j&4294967295,this.chain_[1]=this.chain_[1]+me&4294967295,this.chain_[2]=this.chain_[2]+Ne&4294967295,this.chain_[3]=this.chain_[3]+mt&4294967295,this.chain_[4]=this.chain_[4]+Le&4294967295}update(E,S){if(null==E)return;void 0===S&&(S=E.length);const F=S-this.blockSize;let j=0;const me=this.buf_;let Ne=this.inbuf_;for(;j<S;){if(0===Ne)for(;j<=F;)this.compress_(E,j),j+=this.blockSize;if("string"==typeof E){for(;j<S;)if(me[Ne]=E.charCodeAt(j),++Ne,++j,Ne===this.blockSize){this.compress_(me),Ne=0;break}}else for(;j<S;)if(me[Ne]=E[j],++Ne,++j,Ne===this.blockSize){this.compress_(me),Ne=0;break}}this.inbuf_=Ne,this.total_+=S}digest(){const E=[];let S=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let j=this.blockSize-1;j>=56;j--)this.buf_[j]=255&S,S/=256;this.compress_(this.buf_);let F=0;for(let j=0;j<5;j++)for(let me=24;me>=0;me-=8)E[F]=this.chain_[j]>>me&255,++F;return E}}function zs(C,E){const S=new di(C,E);return S.subscribe.bind(S)}class di{constructor(E,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{E(this)}).catch(F=>{this.error(F)})}next(E){this.forEachObserver(S=>{S.next(E)})}error(E){this.forEachObserver(S=>{S.error(E)}),this.close(E)}complete(){this.forEachObserver(E=>{E.complete()}),this.close()}subscribe(E,S,F){let j;if(void 0===E&&void 0===S&&void 0===F)throw new Error("Missing Observer.");j=function Hs(C,E){if("object"!=typeof C||null===C)return!1;for(const S of E)if(S in C&&"function"==typeof C[S])return!0;return!1}(E,["next","error","complete"])?E:{next:E,error:S,complete:F},void 0===j.next&&(j.next=os),void 0===j.error&&(j.error=os),void 0===j.complete&&(j.complete=os);const me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?j.error(this.finalError):j.complete()}catch{}}),this.observers.push(j),me}unsubscribeOne(E){void 0===this.observers||void 0===this.observers[E]||(delete this.observers[E],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(E){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,E)}sendOne(E,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[E])try{S(this.observers[E])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(E){this.finalized||(this.finalized=!0,void 0!==E&&(this.finalError=E),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function os(){}const No=function(C,E,S,F){let j;if(F<E?j="at least "+E:F>S&&(j=0===S?"none":"no more than "+S),j)throw new Error(C+" failed: Was called with "+F+(1===F?" argument.":" arguments.")+" Expects "+j+".")};function _s(C,E){return`${C} failed: ${E} argument `}function Hi(C,E,S,F){if((!F||S)&&"function"!=typeof S)throw new Error(_s(C,E)+"must be a valid function.")}function ys(C,E,S,F){if((!F||S)&&("object"!=typeof S||null===S))throw new Error(_s(C,E)+"must be a valid context object.")}const yl=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);if(j>=55296&&j<=56319){const me=j-55296;F++,Z(F<C.length,"Surrogate pair missing trail surrogate."),j=65536+(me<<10)+(C.charCodeAt(F)-56320)}j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):j<65536?(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},hi=function(C){let E=0;for(let S=0;S<C.length;S++){const F=C.charCodeAt(S);F<128?E++:F<2048?E+=2:F>=55296&&F<=56319?(E+=4,S++):E+=3}return E},uo=1e3,Ri=2,Va=144e5,da=.5;function Vt(C,E=uo,S=Ri){const F=E*Math.pow(S,C),j=Math.round(da*F*(Math.random()-.5)*2);return Math.min(Va,F+j)}function Se(C){return C&&C._delegate?C._delegate:C}},2222:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=te(G(7029)),Z=te(G(3100)),x=te(G(5705)),he=te(G(942)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$,ue){var xe=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,Fe=(0,D.default)(z),tt=(0,Z.default)(z),Xe=$/xe,Je=(0,x.default)(ue),et=(0,x.default)(Fe),Gt=(0,x.default)(tt),Jt=Math.asin(Math.sin(et)*Math.cos(Xe)+Math.cos(et)*Math.sin(Xe)*Math.cos(Je)),Tt=Gt+Math.atan2(Math.sin(Je)*Math.sin(Xe)*Math.cos(et),Math.cos(Xe)-Math.sin(et)*Math.sin(Jt)),At=(0,he.default)(Tt);return(At<ce.MINLON||At>ce.MAXLON)&&(Tt=(Tt+3*Math.PI)%(2*Math.PI)-Math.PI,At=(0,he.default)(Tt)),{latitude:(0,he.default)(Jt),longitude:At}}},7636:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.areaConversion=U.timeConversion=U.distanceConversion=U.altitudeKeys=U.latitudeKeys=U.longitudeKeys=U.MAXLON=U.MINLON=U.MAXLAT=U.MINLAT=U.earthRadius=U.sexagesimalPattern=void 0,U.sexagesimalPattern=/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['\u2032]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["\u2033]\s*)?([NEOSW]?)$/,U.earthRadius=6378137,U.MINLAT=-90,U.MAXLAT=90,U.MINLON=-180,U.MAXLON=180,U.longitudeKeys=["lng","lon","longitude",0],U.latitudeKeys=["lat","latitude",1],U.altitudeKeys=["alt","altitude","elevation","elev",2],U.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},U.timeConversion={m:60,h:3600,d:86400};var $={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};U.areaConversion=$,$.sqm=$.m2,$.sqkm=$.km2,$.sqft=$.ft2,$.sqyd=$.yd2,$.sqin=$.in2},179:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){var Ce=D.areaConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(Ce)return ce*Ce;throw new Error("Invalid unit used for area conversion.")}},917:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){var Ce=D.distanceConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(Ce)return ce*Ce;throw new Error("Invalid unit used for distance conversion.")}},1167:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh"){case"kmh":return ce*D.timeConversion.h*D.distanceConversion.km;case"mph":return ce*D.timeConversion.h*D.distanceConversion.mi;default:return ce}}},8948:(yt,U)=>{function G(X,z){return function ce(X){if(Array.isArray(X))return X}(X)||function he(X,z){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(X)){var $=[],ue=!0,xe=!1,Fe=void 0;try{for(var Xe,tt=X[Symbol.iterator]();!(ue=(Xe=tt.next()).done)&&($.push(Xe.value),!z||$.length!==z);ue=!0);}catch(Je){xe=!0,Fe=Je}finally{try{!ue&&null!=tt.return&&tt.return()}finally{if(xe)throw Fe}}return $}}(X,z)||function Z(X,z){if(X){if("string"==typeof X)return x(X,z);var $=Object.prototype.toString.call(X).slice(8,-1);if("Object"===$&&X.constructor&&($=X.constructor.name),"Map"===$||"Set"===$)return Array.from(X);if("Arguments"===$||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return x(X,z)}}(X,z)||function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(X,z){(null==z||z>X.length)&&(z=X.length);for(var $=0,ue=new Array(z);$<z;$++)ue[$]=X[$];return ue}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(z){var ue=G(z.toString().split("."),2),Fe=ue[1],tt=Math.abs(Number(ue[0])),Xe=60*+("0."+(Fe||0)),Je=Xe.toString().split("."),et=Math.floor(Xe),Gt=function(z){var ue=Math.pow(10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:4);return Math.round(z*ue)/ue}(60*+("0."+(Je[1]||0))).toString(),Tt=G(Gt.split("."),2),At=Tt[0],Ot=Tt[1],gt=void 0===Ot?"0":Ot;return tt+"\xb0 "+et.toString().padStart(2,"0")+"' "+At.padStart(2,"0")+"."+gt.padEnd(1,"0")+'"'}},1118:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(2447));U.default=function(te,Ce){return(0,D.default)(te,Ce)[0]}},1691:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(5705)),Z=ce(G(7029)),x=ce(G(3100)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){var z=0;if(X.length>2){for(var $,ue,xe,Fe=0;Fe<X.length;Fe++){Fe===X.length-2?($=X.length-2,ue=X.length-1,xe=0):Fe===X.length-1?($=X.length-1,ue=0,xe=1):($=Fe,ue=Fe+1,xe=Fe+2);var tt=(0,x.default)(X[$]),Xe=(0,Z.default)(X[ue]),Je=(0,x.default)(X[xe]);z+=((0,D.default)(Je)-(0,D.default)(tt))*Math.sin((0,D.default)(Xe))}z=z*he.earthRadius*he.earthRadius/2}return Math.abs(z)}},9144:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(7029)),Z=x(G(3100));function x(te){return te&&te.__esModule?te:{default:te}}U.default=function(Ce){if(!1===Array.isArray(Ce)||0===Ce.length)throw new Error("No points were given.");return Ce.reduce(function(ee,X){var z=(0,D.default)(X),$=(0,Z.default)(X);return{maxLat:Math.max(z,ee.maxLat),minLat:Math.min(z,ee.minLat),maxLng:Math.max($,ee.maxLng),minLng:Math.min($,ee.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}},190:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=te(G(7029)),Z=te(G(3100)),x=te(G(5705)),he=te(G(942)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var Ot,gt,ue=(0,D.default)(z),xe=(0,Z.default)(z),Fe=(0,x.default)(ue),tt=(0,x.default)(xe),Xe=$/ce.earthRadius,Je=Fe-Xe,et=Fe+Xe,Gt=(0,x.default)(ce.MAXLAT),Jt=(0,x.default)(ce.MINLAT),Tt=(0,x.default)(ce.MAXLON),At=(0,x.default)(ce.MINLON);if(Je>Jt&&et<Gt){var Et=Math.asin(Math.sin(Xe)/Math.cos(Fe));(Ot=tt-Et)<At&&(Ot+=2*Math.PI),(gt=tt+Et)>Tt&&(gt-=2*Math.PI)}else Je=Math.max(Je,Jt),et=Math.min(et,Gt),Ot=At,gt=Tt;return[{latitude:(0,he.default)(Je),longitude:(0,he.default)(Ot)},{latitude:(0,he.default)(et),longitude:(0,he.default)(gt)}]}},5524:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(7029)),Z=ce(G(3100)),x=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){if(!1===Array.isArray(X)||0===X.length)return!1;var z=X.length,$=X.reduce(function(tt,Xe){var Je=(0,x.default)((0,D.default)(Xe)),et=(0,x.default)((0,Z.default)(Xe));return{X:tt.X+Math.cos(Je)*Math.cos(et),Y:tt.Y+Math.cos(Je)*Math.sin(et),Z:tt.Z+Math.sin(Je)}},{X:0,Y:0,Z:0}),ue=$.X/z,xe=$.Y/z,Fe=$.Z/z;return{longitude:(0,he.default)(Math.atan2(xe,ue)),latitude:(0,he.default)(Math.atan2(Fe,Math.sqrt(ue*ue+xe*xe)))}}},7088:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(9144));U.default=function(te){var Ce=(0,D.default)(te),X=Ce.minLng+(Ce.maxLng-Ce.minLng)/2;return{latitude:parseFloat((Ce.minLat+(Ce.maxLat-Ce.minLat)/2).toFixed(6)),longitude:parseFloat(X.toFixed(6))}}},9952:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(939));U.default=function(te,Ce){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default,X="function"==typeof ee?ee(te,Ce):(0,D.default)(te,Ce);if(isNaN(X))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(X/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}},8744:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x,he){return he.reduce(function(ce,te){if(typeof x>"u"||null===x)throw new Error("'".concat(x,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(x,te)&&typeof te<"u"&&typeof ce>"u"?(ce=te,te):ce},void 0)}},4695:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=function x(X){return X&&X.__esModule?X:{default:X}}(G(8744));function he(X,z){var $=Object.keys(X);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(X);z&&(ue=ue.filter(function(xe){return Object.getOwnPropertyDescriptor(X,xe).enumerable})),$.push.apply($,ue)}return $}function te(X,z,$){return z in X?Object.defineProperty(X,z,{value:$,enumerable:!0,configurable:!0,writable:!0}):X[z]=$,X}U.default=function(z){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:D.longitudeKeys,latitude:D.latitudeKeys,altitude:D.altitudeKeys},ue=(0,Z.default)(z,$.longitude),xe=(0,Z.default)(z,$.latitude),Fe=(0,Z.default)(z,$.altitude);return function ce(X){for(var z=1;z<arguments.length;z++){var $=null!=arguments[z]?arguments[z]:{};z%2?he(Object($),!0).forEach(function(ue){te(X,ue,$[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors($)):he(Object($)).forEach(function(ue){Object.defineProperty(X,ue,Object.getOwnPropertyDescriptor($,ue))})}return X}({latitude:xe,longitude:ue},Fe?{altitude:Fe}:{})}},8674:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=te(G(7029)),Z=te(G(3100)),x=te(G(5705)),he=te(G(6522)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var ue=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ue=typeof ue<"u"&&!isNaN(ue)?ue:1;var xe=(0,D.default)(z),Fe=(0,Z.default)(z),tt=(0,D.default)($),Xe=(0,Z.default)($),Je=Math.acos((0,he.default)(Math.sin((0,x.default)(tt))*Math.sin((0,x.default)(xe))+Math.cos((0,x.default)(tt))*Math.cos((0,x.default)(xe))*Math.cos((0,x.default)(Fe)-(0,x.default)(Xe))))*ce.earthRadius;return Math.round(Je/ue)*ue}},7504:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(8674)),Z=x(G(6522));function x(te){return te&&te.__esModule?te:{default:te}}U.default=function(Ce,ee,X){var z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,$=(0,D.default)(ee,Ce,z),ue=(0,D.default)(Ce,X,z),xe=(0,D.default)(ee,X,z),Fe=Math.acos((0,Z.default)(($*$+xe*xe-ue*ue)/(2*$*xe))),tt=Math.acos((0,Z.default)((ue*ue+xe*xe-$*$)/(2*ue*xe)));return Fe>Math.PI/2?$:tt>Math.PI/2?ue:Math.sin(Fe)*$}},884:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(7029)),Z=ce(G(3100)),x=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,D.default)(z),ue=(0,Z.default)(z),xe=(0,D.default)(X),Fe=(0,Z.default)(X);return((0,he.default)(Math.atan2(Math.sin((0,x.default)(ue)-(0,x.default)(Fe))*Math.cos((0,x.default)($)),Math.cos((0,x.default)(xe))*Math.sin((0,x.default)($))-Math.sin((0,x.default)(xe))*Math.cos((0,x.default)($))*Math.cos((0,x.default)(ue)-(0,x.default)(Fe))))+360)%360}},7029:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=he(G(8744)),x=he(G(5101));function he(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}U.default=function(ee,X){var z=(0,Z.default)(ee,D.latitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,x.default)($)}}},3100:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=he(G(8744)),x=he(G(5101));function he(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}U.default=function(ee,X){var z=(0,Z.default)(ee,D.longitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,x.default)($)}}},5378:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(te){return te&&te.__esModule?te:{default:te}}(G(8674));function x(te){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(te)}U.default=function(Ce){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.default;return Ce.reduce(function(X,z){return"object"===x(X)&&null!==X.last&&(X.distance+=ee(z,X.last)),X.last=z,X},{last:null,distance:0}).distance}},2671:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(7029)),Z=ce(G(3100)),x=ce(G(5705)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;$=typeof $<"u"&&!isNaN($)?$:1;var Gt,Jt,Tt,At,Ot,gt,An,ue=(0,D.default)(X),xe=(0,Z.default)(X),Fe=(0,D.default)(z),tt=(0,Z.default)(z),Xe=6356752.314245,Je=1/298.257223563,et=(0,x.default)(tt-xe),Et=Math.atan((1-Je)*Math.tan((0,x.default)(parseFloat(ue)))),Ve=Math.atan((1-Je)*Math.tan((0,x.default)(parseFloat(Fe)))),ie=Math.sin(Et),it=Math.cos(Et),vt=Math.sin(Ve),zt=Math.cos(Ve),Tn=et,Ir=100;do{var Sn=Math.sin(Tn),ir=Math.cos(Tn);if(0===(gt=Math.sqrt(zt*Sn*(zt*Sn)+(it*vt-ie*zt*ir)*(it*vt-ie*zt*ir))))return 0;Gt=ie*vt+it*zt*ir,Jt=Math.atan2(gt,Gt),Ot=Gt-2*ie*vt/(At=1-(Tt=it*zt*Sn/gt)*Tt),isNaN(Ot)&&(Ot=0);var fr=Je/16*At*(4+Je*(4-3*At));An=Tn,Tn=et+(1-fr)*Je*Tt*(Jt+fr*gt*(Ot+fr*Gt*(2*Ot*Ot-1)))}while(Math.abs(Tn-An)>1e-12&&--Ir>0);if(0===Ir)return NaN;var $r=At*(he.earthRadius*he.earthRadius-Xe*Xe)/(Xe*Xe),_e=$r/1024*(256+$r*($r*(74-47*$r)-128));return Math.round(Xe*(1+$r/16384*(4096+$r*($r*(320-175*$r)-768)))*(Jt-_e*gt*(Ot+_e/4*(Gt*(2*Ot*Ot-1)-_e/6*Ot*(4*gt*gt-3)*(4*Ot*Ot-3))))/$)*$}},939:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(7029)),Z=ce(G(3100)),x=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,x.default)((0,Z.default)(z))-(0,x.default)((0,Z.default)(X)),ue=Math.log(Math.tan((0,x.default)((0,D.default)(z))/2+Math.PI/4)/Math.tan((0,x.default)((0,D.default)(X))/2+Math.PI/4));return Math.abs($)>Math.PI&&($=$>0?-1*(2*Math.PI-$):2*Math.PI+$),((0,he.default)(Math.atan2($,ue))+360)%360}},2845:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return/^(NNE|NE|NNW|N)$/.test(x)?"N":/^(ENE|E|ESE|SE)$/.test(x)?"E":/^(SSE|S|SSW|SW)$/.test(x)?"S":/^(WSW|W|WNW|NW)$/.test(x)?"W":void 0}},8950:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,Ce){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default)(te,Ce)/(Number(Ce.time)-Number(te.time))*1e3}},2541:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0});var D={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(U,"computeDestinationPoint",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(U,"convertArea",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(U,"convertDistance",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(U,"convertSpeed",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(U,"decimalToSexagesimal",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(U,"findNearest",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(U,"getAreaOfPolygon",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(U,"getBounds",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(U,"getBoundsOfDistance",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(U,"getCenter",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(U,"getCenterOfBounds",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(U,"getCompassDirection",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(U,"getCoordinateKey",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(U,"getCoordinateKeys",{enumerable:!0,get:function(){return tt.default}}),Object.defineProperty(U,"getDistance",{enumerable:!0,get:function(){return Xe.default}}),Object.defineProperty(U,"getDistanceFromLine",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(U,"getGreatCircleBearing",{enumerable:!0,get:function(){return et.default}}),Object.defineProperty(U,"getLatitude",{enumerable:!0,get:function(){return Gt.default}}),Object.defineProperty(U,"getLongitude",{enumerable:!0,get:function(){return Jt.default}}),Object.defineProperty(U,"getPathLength",{enumerable:!0,get:function(){return Tt.default}}),Object.defineProperty(U,"getPreciseDistance",{enumerable:!0,get:function(){return At.default}}),Object.defineProperty(U,"getRhumbLineBearing",{enumerable:!0,get:function(){return Ot.default}}),Object.defineProperty(U,"getRoughCompassDirection",{enumerable:!0,get:function(){return gt.default}}),Object.defineProperty(U,"getSpeed",{enumerable:!0,get:function(){return Et.default}}),Object.defineProperty(U,"isDecimal",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(U,"isPointInLine",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(U,"isPointInPolygon",{enumerable:!0,get:function(){return it.default}}),Object.defineProperty(U,"isPointNearLine",{enumerable:!0,get:function(){return vt.default}}),Object.defineProperty(U,"isPointWithinRadius",{enumerable:!0,get:function(){return zt.default}}),Object.defineProperty(U,"isSexagesimal",{enumerable:!0,get:function(){return Tn.default}}),Object.defineProperty(U,"isValidCoordinate",{enumerable:!0,get:function(){return An.default}}),Object.defineProperty(U,"isValidLatitude",{enumerable:!0,get:function(){return Ir.default}}),Object.defineProperty(U,"isValidLongitude",{enumerable:!0,get:function(){return Sn.default}}),Object.defineProperty(U,"orderByDistance",{enumerable:!0,get:function(){return ir.default}}),Object.defineProperty(U,"sexagesimalToDecimal",{enumerable:!0,get:function(){return fr.default}}),Object.defineProperty(U,"toDecimal",{enumerable:!0,get:function(){return $r.default}}),Object.defineProperty(U,"toRad",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(U,"toDeg",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(U,"wktToPolygon",{enumerable:!0,get:function(){return se.default}});var Z=ge(G(2222)),x=ge(G(179)),he=ge(G(917)),ce=ge(G(1167)),te=ge(G(8948)),Ce=ge(G(1118)),ee=ge(G(1691)),X=ge(G(9144)),z=ge(G(190)),$=ge(G(5524)),ue=ge(G(7088)),xe=ge(G(9952)),Fe=ge(G(8744)),tt=ge(G(4695)),Xe=ge(G(8674)),Je=ge(G(7504)),et=ge(G(884)),Gt=ge(G(7029)),Jt=ge(G(3100)),Tt=ge(G(5378)),At=ge(G(2671)),Ot=ge(G(939)),gt=ge(G(2845)),Et=ge(G(8950)),Ve=ge(G(3026)),ie=ge(G(4194)),it=ge(G(3536)),vt=ge(G(2787)),zt=ge(G(202)),Tn=ge(G(4902)),An=ge(G(7637)),Ir=ge(G(6563)),Sn=ge(G(266)),ir=ge(G(2447)),fr=ge(G(1532)),$r=ge(G(5101)),de=ge(G(5705)),_e=ge(G(942)),se=ge(G(354)),ae=G(7636);function ge(pe){return pe&&pe.__esModule?pe:{default:pe}}Object.keys(ae).forEach(function(pe){"default"===pe||"__esModule"===pe||Object.prototype.hasOwnProperty.call(D,pe)||Object.defineProperty(U,pe,{enumerable:!0,get:function(){return ae[pe]}})})},3026:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){var he=x.toString().trim();return!isNaN(parseFloat(he))&&parseFloat(he)===Number(he)}},4194:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,Ce,ee){return(0,D.default)(Ce,te)+(0,D.default)(te,ee)===(0,D.default)(Ce,ee)}},3536:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(7029)),Z=x(G(3100));function x(te){return te&&te.__esModule?te:{default:te}}U.default=function(Ce,ee){for(var X=!1,z=ee.length,$=-1,ue=z-1;++$<z;ue=$)((0,Z.default)(ee[$])<=(0,Z.default)(Ce)&&(0,Z.default)(Ce)<(0,Z.default)(ee[ue])||(0,Z.default)(ee[ue])<=(0,Z.default)(Ce)&&(0,Z.default)(Ce)<(0,Z.default)(ee[$]))&&(0,D.default)(Ce)<((0,D.default)(ee[ue])-(0,D.default)(ee[$]))*((0,Z.default)(Ce)-(0,Z.default)(ee[$]))/((0,Z.default)(ee[ue])-(0,Z.default)(ee[$]))+(0,D.default)(ee[$])&&(X=!X);return X}},2787:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(7504));U.default=function(te,Ce,ee,X){return(0,D.default)(te,Ce,ee)<X}},202:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,Ce,ee){return(0,D.default)(te,Ce,.01)<ee}},4902:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){return D.sexagesimalPattern.test(ce.toString().trim())}},7637:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=he(G(4695)),Z=he(G(6563)),x=he(G(266));function he(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}U.default=function(ee){var X=(0,D.default)(ee),z=X.latitude,$=X.longitude;if(Array.isArray(ee)&&ee.length>=2)return(0,x.default)(ee[0])&&(0,Z.default)(ee[1]);if(typeof z>"u"||typeof $>"u")return!1;var ue=ee[$],xe=ee[z];return!(typeof xe>"u"||typeof ue>"u"||!1===(0,Z.default)(xe)||!1===(0,x.default)(ue))}},6563:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(3026)),Z=ce(G(4902)),x=ce(G(1532)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,D.default)(X)?!(parseFloat(X)>he.MAXLAT||X<he.MINLAT):!!(0,Z.default)(X)&&ee((0,x.default)(X))}},266:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(3026)),Z=ce(G(4902)),x=ce(G(1532)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,D.default)(X)?!(parseFloat(X)>he.MAXLON||X<he.MINLON):!!(0,Z.default)(X)&&ee((0,x.default)(X))}},2447:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,Ce){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default;return ee="function"==typeof ee?ee:D.default,Ce.slice().sort(function(X,z){return ee(te,X)-ee(te,z)})}},6522:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return x>1?1:x<-1?-1:x}},1532:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){var te=new RegExp(D.sexagesimalPattern).exec(ce.toString().trim());if(typeof te>"u"||null===te)throw new Error("Given value is not in sexagesimal format");var Ce=Number(te[2])/60||0,ee=Number(te[4])/3600||0,X=parseFloat(te[1])+Ce+ee;return["S","W"].includes(te[7])?-X:X}},5101:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=te(G(3026)),Z=te(G(4902)),x=te(G(1532)),he=te(G(7637)),ce=te(G(4695));function te(ue){return ue&&ue.__esModule?ue:{default:ue}}function Ce(ue,xe){var Fe=Object.keys(ue);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(ue);xe&&(tt=tt.filter(function(Xe){return Object.getOwnPropertyDescriptor(ue,Xe).enumerable})),Fe.push.apply(Fe,tt)}return Fe}function ee(ue){for(var xe=1;xe<arguments.length;xe++){var Fe=null!=arguments[xe]?arguments[xe]:{};xe%2?Ce(Object(Fe),!0).forEach(function(tt){X(ue,tt,Fe[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(Fe)):Ce(Object(Fe)).forEach(function(tt){Object.defineProperty(ue,tt,Object.getOwnPropertyDescriptor(Fe,tt))})}return ue}function X(ue,xe,Fe){return xe in ue?Object.defineProperty(ue,xe,{value:Fe,enumerable:!0,configurable:!0,writable:!0}):ue[xe]=Fe,ue}U.default=function ue(xe){if((0,D.default)(xe))return Number(xe);if((0,Z.default)(xe))return(0,x.default)(xe);if((0,he.default)(xe)){var Fe=(0,ce.default)(xe);return Array.isArray(xe)?xe.map(function(tt,Xe){return[0,1].includes(Xe)?ue(tt):tt}):ee(ee(ee({},xe),Fe.latitude&&X({},Fe.latitude,ue(xe[Fe.latitude]))),Fe.longitude&&X({},Fe.longitude,ue(xe[Fe.longitude])))}return Array.isArray(xe)?xe.map(function(tt){return(0,he.default)(tt)?ue(tt):tt}):xe}},942:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return 180*x/Math.PI}},5705:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return x*Math.PI/180}},354:(yt,U)=>{function x(ee,X){(null==X||X>ee.length)&&(X=ee.length);for(var z=0,$=new Array(X);z<X;z++)$[z]=ee[z];return $}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(X){if(!X.startsWith("POLYGON"))throw new Error("Invalid wkt.");return X.slice(X.indexOf("(")+2,X.indexOf(")")).split(", ").map(function(ue){var Fe=function G(ee,X){return function ce(ee){if(Array.isArray(ee))return ee}(ee)||function he(ee,X){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(ee)){var z=[],$=!0,ue=!1,xe=void 0;try{for(var tt,Fe=ee[Symbol.iterator]();!($=(tt=Fe.next()).done)&&(z.push(tt.value),!X||z.length!==X);$=!0);}catch(Xe){ue=!0,xe=Xe}finally{try{!$&&null!=Fe.return&&Fe.return()}finally{if(ue)throw xe}}return z}}(ee,X)||function Z(ee,X){if(ee){if("string"==typeof ee)return x(ee,X);var z=Object.prototype.toString.call(ee).slice(8,-1);if("Object"===z&&ee.constructor&&(z=ee.constructor.name),"Map"===z||"Set"===z)return Array.from(ee);if("Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return x(ee,X)}}(ee,X)||function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ue.split(" "),2),Xe=Fe[1];return{longitude:parseFloat(Fe[0]),latitude:parseFloat(Xe)}})}},9574:(yt,U,G)=>{G.d(U,{A:()=>tt});var D=G(1401),Z=G(8779),x=G(1631),he=G(5398);class ce{constructor(Je,et){this._delegate=Je,this.firebase=et,(0,x._addComponent)(Je,new Z.uA("app-compat",()=>this,"PUBLIC")),this.container=Je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this._delegate.automaticDataCollectionEnabled=Je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Je=>{this._delegate.checkDestroyed(),Je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(Je,et=x._DEFAULT_ENTRY_NAME){var Gt;this._delegate.checkDestroyed();const Jt=this._delegate.container.getProvider(Je);return!Jt.isInitialized()&&"EXPLICIT"===(null===(Gt=Jt.getComponent())||void 0===Gt?void 0:Gt.instantiationMode)&&Jt.initialize(),Jt.getImmediate({identifier:et})}_removeServiceInstance(Je,et=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Je).clearInstance(et)}_addComponent(Je){(0,x._addComponent)(this._delegate,Je)}_addOrOverwriteComponent(Je){(0,x._addOrOverwriteComponent)(this._delegate,Je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new D.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function X(){const Xe=function ee(Xe){const Je={},et={__esModule:!0,initializeApp:function Tt(Et,Ve={}){const ie=x.initializeApp(Et,Ve);if((0,D.gR)(Je,ie.name))return Je[ie.name];const it=new Xe(ie,et);return Je[ie.name]=it,it},app:Jt,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function Ot(Et){const Ve=Et.name,ie=Ve.replace("-compat","");if(x._registerComponent(Et)&&"PUBLIC"===Et.type){const it=(vt=Jt())=>{if("function"!=typeof vt[ie])throw Ce.create("invalid-app-argument",{appName:Ve});return vt[ie]()};void 0!==Et.serviceProps&&(0,D.zw)(it,Et.serviceProps),et[ie]=it,Xe.prototype[ie]=function(...vt){return this._getService.bind(this,Ve).apply(this,Et.multipleInstances?vt:[])}}return"PUBLIC"===Et.type?et[ie]:null},removeApp:function Gt(Et){delete Je[Et]},useAsService:function gt(Et,Ve){return"serverAuth"===Ve?null:Ve},modularAPIs:x}};function Jt(Et){if(!(0,D.gR)(Je,Et=Et||x._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Et});return Je[Et]}return et.default=et,Object.defineProperty(et,"apps",{get:function At(){return Object.keys(Je).map(Et=>Je[Et])}}),Jt.App=Xe,et}(ce);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function Je(et){(0,D.zw)(Xe,et)},createSubscribe:D.tD,ErrorFactory:D.FA,deepExtend:D.zw}),Xe}(),$=new he.Vy("@firebase/app-compat");try{const Xe=(0,D.mS)();if(void 0!==Xe.firebase){$.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Je=Xe.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&$.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const tt=z;!function Fe(Xe){(0,x.registerVersion)("@firebase/app-compat","0.2.43",Xe)}()},1631:(yt,U,G)=>{G.r(U),G.d(U,{FirebaseError:()=>he.g,SDK_VERSION:()=>wi,_DEFAULT_ENTRY_NAME:()=>de,_addComponent:()=>pe,_addOrOverwriteComponent:()=>at,_apps:()=>se,_clearComponents:()=>Zr,_components:()=>ge,_getProvider:()=>Mn,_isFirebaseApp:()=>wn,_isFirebaseServerApp:()=>pt,_registerComponent:()=>Mt,_removeServiceInstance:()=>It,_serverApps:()=>ae,deleteApp:()=>gs,getApp:()=>lo,getApps:()=>La,initializeApp:()=>Nr,initializeServerApp:()=>ei,onLog:()=>ca,registerVersion:()=>co,setLogLevel:()=>zs});var D=G(467),Z=G(8779),x=G(5398),he=G(1401),ce=G(6749);class te{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(C=>{if(function Ce(qe){const Se=qe.getComponent();return"VERSION"===Se?.type}(C)){const E=C.getImmediate();return`${E.library}/${E.version}`}return null}).filter(C=>C).join(" ")}}const ee="@firebase/app",X="0.10.13",z=new x.Vy("@firebase/app"),$="@firebase/app-compat",ue="@firebase/analytics-compat",xe="@firebase/analytics",Fe="@firebase/app-check-compat",tt="@firebase/app-check",Xe="@firebase/auth",Je="@firebase/auth-compat",et="@firebase/database",Gt="@firebase/data-connect",Jt="@firebase/database-compat",Tt="@firebase/functions",At="@firebase/functions-compat",Ot="@firebase/installations",gt="@firebase/installations-compat",Et="@firebase/messaging",Ve="@firebase/messaging-compat",ie="@firebase/performance",it="@firebase/performance-compat",vt="@firebase/remote-config",zt="@firebase/remote-config-compat",Tn="@firebase/storage",An="@firebase/storage-compat",Ir="@firebase/firestore",Sn="@firebase/vertexai-preview",ir="@firebase/firestore-compat",fr="firebase",de="[DEFAULT]",_e={[ee]:"fire-core",[$]:"fire-core-compat",[xe]:"fire-analytics",[ue]:"fire-analytics-compat",[tt]:"fire-app-check",[Fe]:"fire-app-check-compat",[Xe]:"fire-auth",[Je]:"fire-auth-compat",[et]:"fire-rtdb",[Gt]:"fire-data-connect",[Jt]:"fire-rtdb-compat",[Tt]:"fire-fn",[At]:"fire-fn-compat",[Ot]:"fire-iid",[gt]:"fire-iid-compat",[Et]:"fire-fcm",[Ve]:"fire-fcm-compat",[ie]:"fire-perf",[it]:"fire-perf-compat",[vt]:"fire-rc",[zt]:"fire-rc-compat",[Tn]:"fire-gcs",[An]:"fire-gcs-compat",[Ir]:"fire-fst",[ir]:"fire-fst-compat",[Sn]:"fire-vertex","fire-js":"fire-js",[fr]:"fire-js-all"},se=new Map,ae=new Map,ge=new Map;function pe(qe,Se){try{qe.container.addComponent(Se)}catch(C){z.debug(`Component ${Se.name} failed to register with FirebaseApp ${qe.name}`,C)}}function at(qe,Se){qe.container.addOrOverwriteComponent(Se)}function Mt(qe){const Se=qe.name;if(ge.has(Se))return z.debug(`There were multiple attempts to register component ${Se}.`),!1;ge.set(Se,qe);for(const C of se.values())pe(C,qe);for(const C of ae.values())pe(C,qe);return!0}function Mn(qe,Se){const C=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return C&&C.triggerHeartbeat(),qe.container.getProvider(Se)}function It(qe,Se,C=de){Mn(qe,Se).clearInstance(C)}function wn(qe){return void 0!==qe.options}function pt(qe){return void 0!==qe.settings}function Zr(){ge.clear()}const tn=new he.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xt{constructor(Se,C,E){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},C),this._name=C.name,this._automaticDataCollectionEnabled=C.automaticDataCollectionEnabled,this._container=E,this.container.addComponent(new Z.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw tn.create("app-deleted",{appName:this._name})}}class Jr extends xt{constructor(Se,C,E,S){const F=void 0!==C.automaticDataCollectionEnabled&&C.automaticDataCollectionEnabled,j={name:E,automaticDataCollectionEnabled:F};super(void 0!==Se.apiKey?Se:Se.options,j,S),this._serverConfig=Object.assign({automaticDataCollectionEnabled:F},C),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,C.releaseOnDeref=void 0,co(ee,X,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Se){this.isDeleted||(this._refCount++,void 0!==Se&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Se,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){gs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw tn.create("server-app-deleted")}}const wi="10.14.1";function Nr(qe,Se={}){let C=qe;"object"!=typeof Se&&(Se={name:Se});const E=Object.assign({name:de,automaticDataCollectionEnabled:!1},Se),S=E.name;if("string"!=typeof S||!S)throw tn.create("bad-app-name",{appName:String(S)});if(C||(C=(0,he.T9)()),!C)throw tn.create("no-options");const F=se.get(S);if(F){if((0,he.bD)(C,F.options)&&(0,he.bD)(E,F.config))return F;throw tn.create("duplicate-app",{appName:S})}const j=new Z.h1(S);for(const Ne of ge.values())j.addComponent(Ne);const me=new xt(C,E,j);return se.set(S,me),me}function ei(qe,Se){if((0,he.Bd)()&&!(0,he.p7)())throw tn.create("invalid-server-app-environment");let C;void 0===Se.automaticDataCollectionEnabled&&(Se.automaticDataCollectionEnabled=!1),C=wn(qe)?qe.options:qe;const E=Object.assign(Object.assign({},Se),C);if(void 0!==E.releaseOnDeref&&delete E.releaseOnDeref,void 0!==Se.releaseOnDeref&&typeof FinalizationRegistry>"u")throw tn.create("finalization-registry-not-supported",{});const F=""+(mt=JSON.stringify(E),[...mt].reduce((Le,_n)=>Math.imul(31,Le)+_n.charCodeAt(0)|0,0)),j=ae.get(F);var mt;if(j)return j.incRefCount(Se.releaseOnDeref),j;const me=new Z.h1(F);for(const mt of ge.values())me.addComponent(mt);const Ne=new Jr(C,Se,F,me);return ae.set(F,Ne),Ne}function lo(qe=de){const Se=se.get(qe);if(!Se&&qe===de&&(0,he.T9)())return Nr();if(!Se)throw tn.create("no-app",{appName:qe});return Se}function La(){return Array.from(se.values())}function gs(qe){return js.apply(this,arguments)}function js(){return(js=(0,D.A)(function*(qe){let Se=!1;const C=qe.name;se.has(C)?(Se=!0,se.delete(C)):ae.has(C)&&qe.decRefCount()<=0&&(ae.delete(C),Se=!0),Se&&(yield Promise.all(qe.container.getProviders().map(E=>E.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function co(qe,Se,C){var E;let S=null!==(E=_e[qe])&&void 0!==E?E:qe;C&&(S+=`-${C}`);const F=S.match(/\s|\//),j=Se.match(/\s|\//);if(F||j){const me=[`Unable to register library "${S}" with version "${Se}":`];return F&&me.push(`library name "${S}" contains illegal characters (whitespace or "/")`),F&&j&&me.push("and"),j&&me.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void z.warn(me.join(" "))}Mt(new Z.uA(`${S}-version`,()=>({library:S,version:Se}),"VERSION"))}function ca(qe,Se){if(null!==qe&&"function"!=typeof qe)throw tn.create("invalid-log-argument");(0,x.Ey)(qe,Se)}function zs(qe){(0,x.He)(qe)}const di="firebase-heartbeat-database",ua=1,Hs="firebase-heartbeat-store";let os=null;function No(){return os||(os=(0,ce.P2)(di,ua,{upgrade:(qe,Se)=>{if(0===Se)try{qe.createObjectStore(Hs)}catch(C){console.warn(C)}}}).catch(qe=>{throw tn.create("idb-open",{originalErrorMessage:qe.message})})),os}function Fn(){return(Fn=(0,D.A)(function*(qe){try{const C=(yield No()).transaction(Hs),E=yield C.objectStore(Hs).get(yl(qe));return yield C.done,E}catch(Se){if(Se instanceof he.g)z.warn(Se.message);else{const C=tn.create("idb-get",{originalErrorMessage:Se?.message});z.warn(C.message)}}})).apply(this,arguments)}function Hi(qe,Se){return ys.apply(this,arguments)}function ys(){return(ys=(0,D.A)(function*(qe,Se){try{const E=(yield No()).transaction(Hs,"readwrite");yield E.objectStore(Hs).put(Se,yl(qe)),yield E.done}catch(C){if(C instanceof he.g)z.warn(C.message);else{const E=tn.create("idb-set",{originalErrorMessage:C?.message});z.warn(E.message)}}})).apply(this,arguments)}function yl(qe){return`${qe.name}!${qe.options.appId}`}class uo{constructor(Se){this.container=Se,this._heartbeatsCache=null;const C=this.container.getProvider("app").getImmediate();this._storage=new da(C),this._heartbeatsCachePromise=this._storage.read().then(E=>(this._heartbeatsCache=E,E))}triggerHeartbeat(){var Se=this;return(0,D.A)(function*(){var C,E;try{const F=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),j=Ri();return null==(null===(C=Se._heartbeatsCache)||void 0===C?void 0:C.heartbeats)&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise,null==(null===(E=Se._heartbeatsCache)||void 0===E?void 0:E.heartbeats))||Se._heartbeatsCache.lastSentHeartbeatDate===j||Se._heartbeatsCache.heartbeats.some(me=>me.date===j)?void 0:(Se._heartbeatsCache.heartbeats.push({date:j,agent:F}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(me=>{const Ne=new Date(me.date).valueOf();return Date.now()-Ne<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache))}catch(S){z.warn(S)}})()}getHeartbeatsHeader(){var Se=this;return(0,D.A)(function*(){var C;try{if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null==(null===(C=Se._heartbeatsCache)||void 0===C?void 0:C.heartbeats)||0===Se._heartbeatsCache.heartbeats.length)return"";const E=Ri(),{heartbeatsToSend:S,unsentEntries:F}=function Va(qe,Se=1024){const C=[];let E=qe.slice();for(const S of qe){const F=C.find(j=>j.agent===S.agent);if(F){if(F.dates.push(S.date),Vt(C)>Se){F.dates.pop();break}}else if(C.push({agent:S.agent,dates:[S.date]}),Vt(C)>Se){C.pop();break}E=E.slice(1)}return{heartbeatsToSend:C,unsentEntries:E}}(Se._heartbeatsCache.heartbeats),j=(0,he.Uj)(JSON.stringify({version:2,heartbeats:S}));return Se._heartbeatsCache.lastSentHeartbeatDate=E,F.length>0?(Se._heartbeatsCache.heartbeats=F,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),j}catch(E){return z.warn(E),""}})()}}function Ri(){return(new Date).toISOString().substring(0,10)}class da{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,he.zW)()&&(0,he.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,D.A)(function*(){if(yield Se._canUseIndexedDBPromise){const E=yield function _s(qe){return Fn.apply(this,arguments)}(Se.app);return E?.heartbeats?E:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Se){var C=this;return(0,D.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return Hi(C.app,{lastSentHeartbeatDate:null!==(E=Se.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var C=this;return(0,D.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return Hi(C.app,{lastSentHeartbeatDate:null!==(E=Se.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:[...F.heartbeats,...Se.heartbeats]})}})()}}function Vt(qe){return(0,he.Uj)(JSON.stringify({version:2,heartbeats:qe})).length}!function lc(qe){Mt(new Z.uA("platform-logger",Se=>new te(Se),"PRIVATE")),Mt(new Z.uA("heartbeat",Se=>new uo(Se),"PRIVATE")),co(ee,X,qe),co(ee,X,"esm2017"),co("fire-js","")}("")},8779:(yt,U,G)=>{G.d(U,{Kq:()=>ce,h1:()=>ee,uA:()=>x});var D=G(467),Z=G(1401);class x{constructor(z,$,ue){this.name=z,this.instanceFactory=$,this.type=ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const he="[DEFAULT]";class ce{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const ue=new Z.cY;if(this.instancesDeferred.set($,ue),this.isInitialized($)||this.shouldAutoInitialize())try{const xe=this.getOrInitializeService({instanceIdentifier:$});xe&&ue.resolve(xe)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const ue=this.normalizeInstanceIdentifier(z?.identifier),xe=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(ue)&&!this.shouldAutoInitialize()){if(xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ue})}catch(Fe){if(xe)return null;throw Fe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function Ce(X){return"EAGER"===X.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[$,ue]of this.instancesDeferred.entries()){const xe=this.normalizeInstanceIdentifier($);try{const Fe=this.getOrInitializeService({instanceIdentifier:xe});ue.resolve(Fe)}catch{}}}}clearInstance(z=he){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,D.A)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(ue=>"INTERNAL"in ue).map(ue=>ue.INTERNAL.delete()),...$.filter(ue=>"_delete"in ue).map(ue=>ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=he){return this.instances.has(z)}getOptions(z=he){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,ue=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ue))throw Error(`${this.name}(${ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const xe=this.getOrInitializeService({instanceIdentifier:ue,options:$});for(const[Fe,tt]of this.instancesDeferred.entries())ue===this.normalizeInstanceIdentifier(Fe)&&tt.resolve(xe);return xe}onInit(z,$){var ue;const xe=this.normalizeInstanceIdentifier($),Fe=null!==(ue=this.onInitCallbacks.get(xe))&&void 0!==ue?ue:new Set;Fe.add(z),this.onInitCallbacks.set(xe,Fe);const tt=this.instances.get(xe);return tt&&z(tt,xe),()=>{Fe.delete(z)}}invokeOnInitCallbacks(z,$){const ue=this.onInitCallbacks.get($);if(ue)for(const xe of ue)try{xe(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let ue=this.instances.get(z);if(!ue&&this.component&&(ue=this.component.instanceFactory(this.container,{instanceIdentifier:(X=z,X===he?void 0:X),options:$}),this.instances.set(z,ue),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(ue,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ue)}catch{}var X;return ue||null}normalizeInstanceIdentifier(z=he){return this.component?this.component.multipleInstances?z:he:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new ce(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},5398:(yt,U,G)=>{G.d(U,{$b:()=>Z,Ey:()=>X,He:()=>ee,Vy:()=>Ce});const D=[];var Z=function(z){return z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",z}(Z||{});const x={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},he=Z.INFO,ce={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},te=(z,$,...ue)=>{if($<z.logLevel)return;const xe=(new Date).toISOString(),Fe=ce[$];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Fe](`[${xe}]  ${z.name}:`,...ue)};class Ce{constructor($){this.name=$,this._logLevel=he,this._logHandler=te,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Z))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?x[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...$),this._logHandler(this,Z.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...$),this._logHandler(this,Z.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...$),this._logHandler(this,Z.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...$),this._logHandler(this,Z.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...$),this._logHandler(this,Z.ERROR,...$)}}function ee(z){D.forEach($=>{$.setLogLevel(z)})}function X(z,$){for(const ue of D){let xe=null;$&&$.level&&(xe=x[$.level]),ue.userLogHandler=null===z?null:(Fe,tt,...Xe)=>{const Je=Xe.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");tt>=(xe??Fe.logLevel)&&z({level:Z[tt].toLowerCase(),message:Je,args:Xe,type:Fe.name})}}}},5046:(yt,U,G)=>{var D=G(467),Z=G(9574),x=G(443),he=G(1401),Ce=(G(1631),G(5398),G(8779));function ee(){return window}function $(){return $=(0,D.A)(function*(C,E,S){var F;const{BuildInfo:j}=ee();(0,x.au)(E.sessionId,"AuthEvent did not contain a session ID");const me=yield function et(C){return Gt.apply(this,arguments)}(E.sessionId),Ne={};return(0,x.av)()?Ne.ibi=j.packageName:(0,x.aw)()?Ne.apn=j.packageName:(0,x.ax)(C,"operation-not-supported-in-this-environment"),j.displayName&&(Ne.appDisplayName=j.displayName),Ne.sessionId=me,(0,x.ay)(C,S,E.type,void 0,null!==(F=E.eventId)&&void 0!==F?F:void 0,Ne)}),$.apply(this,arguments)}function xe(){return(xe=(0,D.A)(function*(C){const{BuildInfo:E}=ee(),S={};(0,x.av)()?S.iosBundleId=E.packageName:(0,x.aw)()?S.androidPackageName=E.packageName:(0,x.ax)(C,"operation-not-supported-in-this-environment"),yield(0,x.az)(C,S)})).apply(this,arguments)}function Xe(){return(Xe=(0,D.A)(function*(C,E,S){const{cordova:F}=ee();let j=()=>{};try{yield new Promise((me,Ne)=>{let mt=null;function Le(){var K;me();const Xn=null===(K=F.plugins.browsertab)||void 0===K?void 0:K.close;"function"==typeof Xn&&Xn(),"function"==typeof S?.close&&S.close()}function _n(){mt||(mt=window.setTimeout(()=>{Ne((0,x.aB)(C,"redirect-cancelled-by-user"))},2e3))}function wr(){"visible"===document?.visibilityState&&_n()}E.addPassiveListener(Le),document.addEventListener("resume",_n,!1),(0,x.aw)()&&document.addEventListener("visibilitychange",wr,!1),j=()=>{E.removePassiveListener(Le),document.removeEventListener("resume",_n,!1),document.removeEventListener("visibilitychange",wr,!1),mt&&window.clearTimeout(mt)}})}finally{j()}})).apply(this,arguments)}function Gt(){return(Gt=(0,D.A)(function*(C){const E=function Jt(C){if((0,x.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const E=new ArrayBuffer(C.length),S=new Uint8Array(E);for(let F=0;F<C.length;F++)S[F]=C.charCodeAt(F);return S}(C),S=yield crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(S)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class At extends x.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(E=>{this.resolveInitialized=E})}addPassiveListener(E){this.passiveListeners.add(E)}removePassiveListener(E){this.passiveListeners.delete(E)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(E){return this.resolveInitialized(),this.passiveListeners.forEach(S=>S(E)),super.onEvent(E)}initialized(){var E=this;return(0,D.A)(function*(){yield E.initPromise})()}}function Et(C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,D.A)(function*(C){const E=yield vt()._get(zt(C));return E&&(yield vt()._remove(zt(C))),E})).apply(this,arguments)}function it(){const C=[];for(let S=0;S<20;S++){const F=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(F))}return C.join("")}function vt(){return(0,x.aE)(x.b)}function zt(C){return(0,x.aF)("authEvent",C.config.apiKey,C.name)}function Ir(C){if(!C?.includes("?"))return{};const[E,...S]=C.split("?");return(0,he.I9)(S.join("?"))}const fr=class ir{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(E){var S=this;return(0,D.A)(function*(){const F=E._key();let j=S.eventManagers.get(F);return j||(j=new At(E),S.eventManagers.set(F,j),S.attachCallbackListeners(E,j)),j})()}_openPopup(E){(0,x.ax)(E,"operation-not-supported-in-this-environment")}_openRedirect(E,S,F,j){var me=this;return(0,D.A)(function*(){!function Je(C){var E,S,F,j,me,Ne,mt,Le,_n,wr;const K=ee();(0,x.aC)("function"==typeof(null===(E=K?.universalLinks)||void 0===E?void 0:E.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.aC)(typeof(null===(S=K?.BuildInfo)||void 0===S?void 0:S.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.aC)("function"==typeof(null===(me=null===(j=null===(F=K?.cordova)||void 0===F?void 0:F.plugins)||void 0===j?void 0:j.browsertab)||void 0===me?void 0:me.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(Le=null===(mt=null===(Ne=K?.cordova)||void 0===Ne?void 0:Ne.plugins)||void 0===mt?void 0:mt.browsertab)||void 0===Le?void 0:Le.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(wr=null===(_n=K?.cordova)||void 0===_n?void 0:_n.InAppBrowser)||void 0===wr?void 0:wr.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(E);const Ne=yield me._initialize(E);yield Ne.initialized(),Ne.resetRedirect(),(0,x.aI)(),yield me._originValidation(E);const mt=function Ot(C,E,S=null){return{type:E,eventId:S,urlResponse:null,sessionId:it(),postBody:null,tenantId:C.tenantId,error:(0,x.aB)(C,"no-auth-event")}}(E,F,j);yield function gt(C,E){return vt()._set(zt(C),E)}(E,mt);const Le=yield function z(C,E,S){return $.apply(this,arguments)}(E,mt,S),_n=yield function Fe(C){const{cordova:E}=ee();return new Promise(S=>{E.plugins.browsertab.isAvailable(F=>{let j=null;F?E.plugins.browsertab.openUrl(C):j=E.InAppBrowser.open(C,(0,x.aA)()?"_blank":"_system","location=yes"),S(j)})})}(Le);return function tt(C,E,S){return Xe.apply(this,arguments)}(E,Ne,_n)})()}_isIframeWebStorageSupported(E,S){throw new Error("Method not implemented.")}_originValidation(E){const S=E._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function ue(C){return xe.apply(this,arguments)}(E)),this.originValidationPromises[S]}attachCallbackListeners(E,S){const{universalLinks:F,handleOpenURL:j,BuildInfo:me}=ee(),Ne=setTimeout((0,D.A)(function*(){yield Et(E),S.onEvent($r())}),500),mt=function(){var wr=(0,D.A)(function*(K){clearTimeout(Ne);const Xn=yield Et(E);let $s=null;Xn&&K?.url&&($s=function ie(C,E){var S,F;const j=function An(C){const E=Ir(C),S=E.link?decodeURIComponent(E.link):void 0,F=Ir(S).link,j=E.deep_link_id?decodeURIComponent(E.deep_link_id):void 0;return Ir(j).link||j||F||S||C}(E);if(j.includes("/__/auth/callback")){const me=Ir(j),Ne=me.firebaseError?function Tn(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(me.firebaseError)):null,mt=null===(F=null===(S=Ne?.code)||void 0===S?void 0:S.split("auth/"))||void 0===F?void 0:F[1],Le=mt?(0,x.aB)(mt):null;return Le?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:j,postBody:null}}return null}(Xn,K.url)),S.onEvent($s||$r())});return function(Xn){return wr.apply(this,arguments)}}();typeof F<"u"&&"function"==typeof F.subscribe&&F.subscribe(null,mt);const Le=j,_n=`${me.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var wr=(0,D.A)(function*(K){if(K.toLowerCase().startsWith(_n)&&mt({url:K}),"function"==typeof Le)try{Le(K)}catch(Xn){console.error(Xn)}});return function(K){return wr.apply(this,arguments)}}()}};function $r(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aB)("no-auth-event")}}function ge(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function at(C=(0,he.ZQ)()){return!("file:"!==ge()&&"ionic:"!==ge()&&"capacitor:"!==ge()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function pt(){try{const C=self.localStorage,E=x.aN();if(C)return C.setItem(E,"1"),C.removeItem(E),!function wn(C=(0,he.ZQ)()){return function Mn(){return(0,he.lT)()&&11===document?.documentMode}()||function It(C=(0,he.ZQ)()){return/Edge\/\d+/.test(C)}(C)}()||(0,he.zW)()}catch{return Zr()&&(0,he.zW)()}return!1}function Zr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function en(){return(function pe(){return"http:"===ge()||"https:"===ge()}()||(0,he.sr)()||at())&&!function Mt(){return(0,he.lV)()||(0,he.Ll)()}()&&pt()&&!Zr()}function tn(){return at()&&typeof document<"u"}function Jr(){return(Jr=(0,D.A)(function*(){return!!tn()&&new Promise(C=>{const E=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(E),C(!0)})})})).apply(this,arguments)}const Nr={LOCAL:"local",NONE:"none",SESSION:"session"},ei=x.aC,lo="persistence";function gs(C){return js.apply(this,arguments)}function js(){return(js=(0,D.A)(function*(C){yield C._initializationPromise;const E=ca(),S=x.aF(lo,C.config.apiKey,C.name);E&&E.setItem(S,C._getPersistence())})).apply(this,arguments)}function ca(){var C;try{return(null===(C=function wi(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const zs=x.aC;class di{constructor(){this.browserResolver=x.aE(x.k),this.cordovaResolver=x.aE(fr),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(E){var S=this;return(0,D.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._initialize(E)})()}_openPopup(E,S,F,j){var me=this;return(0,D.A)(function*(){return yield me.selectUnderlyingResolver(),me.assertedUnderlyingResolver._openPopup(E,S,F,j)})()}_openRedirect(E,S,F,j){var me=this;return(0,D.A)(function*(){return yield me.selectUnderlyingResolver(),me.assertedUnderlyingResolver._openRedirect(E,S,F,j)})()}_isIframeWebStorageSupported(E,S){this.assertedUnderlyingResolver._isIframeWebStorageSupported(E,S)}_originValidation(E){return this.assertedUnderlyingResolver._originValidation(E)}get _shouldInitProactively(){return tn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var E=this;return(0,D.A)(function*(){if(E.underlyingResolver)return;const S=yield function xt(){return Jr.apply(this,arguments)}();E.underlyingResolver=S?E.cordovaResolver:E.browserResolver})()}}function ua(C){return C.unwrap()}function os(C){return _s(C)}function _s(C){const{_tokenResponse:E}=C instanceof he.g?C.customData:C;if(!E)return null;if(!(C instanceof he.g)&&"temporaryProof"in E&&"phoneNumber"in E)return x.P.credentialFromResult(C);const S=E.providerId;if(!S||S===x.p.PASSWORD)return null;let F;switch(S){case x.p.GOOGLE:F=x.X;break;case x.p.FACEBOOK:F=x.W;break;case x.p.GITHUB:F=x.Y;break;case x.p.TWITTER:F=x.$;break;default:const{oauthIdToken:j,oauthAccessToken:me,oauthTokenSecret:Ne,pendingToken:mt,nonce:Le}=E;return me||Ne||j||mt?mt?S.startsWith("saml.")?x.aQ._create(S,mt):x.N._fromParams({providerId:S,signInMethod:S,pendingToken:mt,idToken:j,accessToken:me}):new x.Z(S).credential({idToken:j,accessToken:me,rawNonce:Le}):null}return C instanceof he.g?F.credentialFromError(C):F.credentialFromResult(C)}function Fn(C,E){return E.catch(S=>{throw S instanceof he.g&&function No(C,E){var S;const F=null===(S=E.customData)||void 0===S?void 0:S._tokenResponse;if("auth/multi-factor-auth-required"===E?.code)E.resolver=new yl(C,x.as(C,E));else if(F){const j=_s(E),me=E;j&&(me.credential=j,me.tenantId=F.tenantId||void 0,me.email=F.email||void 0,me.phoneNumber=F.phoneNumber||void 0)}}(C,S),S}).then(S=>{const j=S.user;return{operationType:S.operationType,credential:os(S),additionalUserInfo:x.aq(S),user:hi.getOrCreate(j)}})}function Hi(C,E){return ys.apply(this,arguments)}function ys(){return(ys=(0,D.A)(function*(C,E){const S=yield E;return{verificationId:S.verificationId,confirm:F=>Fn(C,S.confirm(F))}})).apply(this,arguments)}class yl{constructor(E,S){this.resolver=S,this.auth=function Hs(C){return C.wrapped()}(E)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(E){return Fn(ua(this.auth),this.resolver.resolveSignIn(E))}}class hi{constructor(E){this._delegate=E,this.multiFactor=x.at(E)}static getOrCreate(E){return hi.USER_MAP.has(E)||hi.USER_MAP.set(E,new hi(E)),hi.USER_MAP.get(E)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(E){return this._delegate.getIdTokenResult(E)}getIdToken(E){return this._delegate.getIdToken(E)}linkAndRetrieveDataWithCredential(E){return this.linkWithCredential(E)}linkWithCredential(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.a2(S._delegate,E))})()}linkWithPhoneNumber(E,S){var F=this;return(0,D.A)(function*(){return Hi(F.auth,x.l(F._delegate,E,S))})()}linkWithPopup(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.d(S._delegate,E,di))})()}linkWithRedirect(E){var S=this;return(0,D.A)(function*(){return yield gs(x.aJ(S.auth)),x.g(S._delegate,E,di)})()}reauthenticateAndRetrieveDataWithCredential(E){return this.reauthenticateWithCredential(E)}reauthenticateWithCredential(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.a3(S._delegate,E))})()}reauthenticateWithPhoneNumber(E,S){return Hi(this.auth,x.r(this._delegate,E,S))}reauthenticateWithPopup(E){return Fn(this.auth,x.e(this._delegate,E,di))}reauthenticateWithRedirect(E){var S=this;return(0,D.A)(function*(){return yield gs(x.aJ(S.auth)),x.h(S._delegate,E,di)})()}sendEmailVerification(E){return x.ag(this._delegate,E)}unlink(E){var S=this;return(0,D.A)(function*(){return yield x.ap(S._delegate,E),S})()}updateEmail(E){return x.al(this._delegate,E)}updatePassword(E){return x.am(this._delegate,E)}updatePhoneNumber(E){return x.u(this._delegate,E)}updateProfile(E){return x.ak(this._delegate,E)}verifyBeforeUpdateEmail(E,S){return x.ah(this._delegate,E,S)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}hi.USER_MAP=new WeakMap;const vs=x.aC;let uo=(()=>{class C{constructor(S,F){if(this.app=S,F.isInitialized())return this._delegate=F.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=S.options;vs(j,"invalid-api-key",{appName:S.name}),vs(j,"invalid-api-key",{appName:S.name});const me=typeof window<"u"?di:void 0;this._delegate=F.initialize({options:{persistence:Va(j,S.name),popupRedirectResolver:me}}),this._delegate._updateErrorMap(x.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(S){this._delegate.languageCode=S}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(S){this._delegate.tenantId=S}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(S,F){x.K(this._delegate,S,F)}applyActionCode(S){return x.a7(this._delegate,S)}checkActionCode(S){return x.a8(this._delegate,S)}confirmPasswordReset(S,F){return x.a6(this._delegate,S,F)}createUserWithEmailAndPassword(S,F){var j=this;return(0,D.A)(function*(){return Fn(j._delegate,x.aa(j._delegate,S,F))})()}fetchProvidersForEmail(S){return this.fetchSignInMethodsForEmail(S)}fetchSignInMethodsForEmail(S){return x.af(this._delegate,S)}isSignInWithEmailLink(S){return x.ad(this._delegate,S)}getRedirectResult(){var S=this;return(0,D.A)(function*(){vs(en(),S._delegate,"operation-not-supported-in-this-environment");const F=yield x.j(S._delegate,di);return F?Fn(S._delegate,Promise.resolve(F)):{credential:null,user:null}})()}addFrameworkForLogging(S){!function de(C,E){(0,x.aJ)(C)._logFramework(E)}(this._delegate,S)}onAuthStateChanged(S,F,j){const{next:me,error:Ne,complete:mt}=Ri(S,F,j);return this._delegate.onAuthStateChanged(me,Ne,mt)}onIdTokenChanged(S,F,j){const{next:me,error:Ne,complete:mt}=Ri(S,F,j);return this._delegate.onIdTokenChanged(me,Ne,mt)}sendSignInLinkToEmail(S,F){return x.ac(this._delegate,S,F)}sendPasswordResetEmail(S,F){return x.a5(this._delegate,S,F||void 0)}setPersistence(S){var F=this;return(0,D.A)(function*(){let j;switch(function La(C,E){ei(Object.values(Nr).includes(E),C,"invalid-persistence-type"),(0,he.lV)()?ei(E!==Nr.SESSION,C,"unsupported-persistence-type"):(0,he.Ll)()?ei(E===Nr.NONE,C,"unsupported-persistence-type"):Zr()?ei(E===Nr.NONE||E===Nr.LOCAL&&(0,he.zW)(),C,"unsupported-persistence-type"):ei(E===Nr.NONE||pt(),C,"unsupported-persistence-type")}(F._delegate,S),S){case Nr.SESSION:j=x.a;break;case Nr.LOCAL:j=(yield x.aE(x.i)._isAvailable())?x.i:x.b;break;case Nr.NONE:j=x.U;break;default:return x.ax("argument-error",{appName:F._delegate.name})}return F._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(S){return this.signInWithCredential(S)}signInAnonymously(){return Fn(this._delegate,x.a0(this._delegate))}signInWithCredential(S){return Fn(this._delegate,x.a1(this._delegate,S))}signInWithCustomToken(S){return Fn(this._delegate,x.a4(this._delegate,S))}signInWithEmailAndPassword(S,F){return Fn(this._delegate,x.ab(this._delegate,S,F))}signInWithEmailLink(S,F){return Fn(this._delegate,x.ae(this._delegate,S,F))}signInWithPhoneNumber(S,F){return Hi(this._delegate,x.s(this._delegate,S,F))}signInWithPopup(S){var F=this;return(0,D.A)(function*(){return vs(en(),F._delegate,"operation-not-supported-in-this-environment"),Fn(F._delegate,x.c(F._delegate,S,di))})()}signInWithRedirect(S){var F=this;return(0,D.A)(function*(){return vs(en(),F._delegate,"operation-not-supported-in-this-environment"),yield gs(F._delegate),x.f(F._delegate,S,di)})()}updateCurrentUser(S){return this._delegate.updateCurrentUser(S)}verifyPasswordResetCode(S){return x.a9(this._delegate,S)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Nr,C})();function Ri(C,E,S){let F=C;"function"!=typeof C&&({next:F,error:E,complete:S}=C);const j=F;return{next:Ne=>j(Ne&&hi.getOrCreate(Ne)),error:E,complete:S}}function Va(C,E){const S=function co(C,E){const S=ca();if(!S)return[];const F=x.aF(lo,C,E);switch(S.getItem(F)){case Nr.NONE:return[x.U];case Nr.LOCAL:return[x.i,x.a];case Nr.SESSION:return[x.a];default:return[]}}(C,E);if(typeof self<"u"&&!S.includes(x.i)&&S.push(x.i),typeof window<"u")for(const F of[x.b,x.a])S.includes(F)||S.push(F);return S.includes(x.U)||S.push(x.U),S}class da{constructor(){this.providerId="phone",this._delegate=new x.P(ua(Z.A.auth()))}static credential(E,S){return x.P.credential(E,S)}verifyPhoneNumber(E,S){return this._delegate.verifyPhoneNumber(E,S)}unwrap(){return this._delegate}}da.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,da.PROVIDER_ID=x.P.PROVIDER_ID;const Vt=x.aC;class lc{constructor(E,S,F=Z.A.app()){var j;Vt(null===(j=F.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:F.name}),this._delegate=new x.R(F.auth(),E,S),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Se(C){C.INTERNAL.registerComponent(new Ce.uA("auth-compat",E=>{const S=E.getProvider("app-compat").getImmediate(),F=E.getProvider("auth");return new uo(S,F)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.V,FacebookAuthProvider:x.W,GithubAuthProvider:x.Y,GoogleAuthProvider:x.X,OAuthProvider:x.Z,SAMLAuthProvider:x._,PhoneAuthProvider:da,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:lc,TwitterAuthProvider:x.$,Auth:uo,AuthCredential:x.L,Error:he.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.14")}(Z.A)},6749:(yt,U,G)=>{G.d(U,{P2:()=>Jt});var D=G(467);const Z=(Ve,ie)=>ie.some(it=>Ve instanceof it);let x,he;const Ce=new WeakMap,ee=new WeakMap,X=new WeakMap,z=new WeakMap,$=new WeakMap;let Fe={get(Ve,ie,it){if(Ve instanceof IDBTransaction){if("done"===ie)return ee.get(Ve);if("objectStoreNames"===ie)return Ve.objectStoreNames||X.get(Ve);if("store"===ie)return it.objectStoreNames[1]?void 0:it.objectStore(it.objectStoreNames[0])}return et(Ve[ie])},set:(Ve,ie,it)=>(Ve[ie]=it,!0),has:(Ve,ie)=>Ve instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in Ve};function Je(Ve){return"function"==typeof Ve?function Xe(Ve){return Ve!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ve)?function(...ie){return Ve.apply(Gt(this),ie),et(Ce.get(this))}:function(...ie){return et(Ve.apply(Gt(this),ie))}:function(ie,...it){const vt=Ve.call(Gt(this),ie,...it);return X.set(vt,ie.sort?ie.sort():[ie]),et(vt)}}(Ve):(Ve instanceof IDBTransaction&&function xe(Ve){if(ee.has(Ve))return;const ie=new Promise((it,vt)=>{const zt=()=>{Ve.removeEventListener("complete",Tn),Ve.removeEventListener("error",An),Ve.removeEventListener("abort",An)},Tn=()=>{it(),zt()},An=()=>{vt(Ve.error||new DOMException("AbortError","AbortError")),zt()};Ve.addEventListener("complete",Tn),Ve.addEventListener("error",An),Ve.addEventListener("abort",An)});ee.set(Ve,ie)}(Ve),Z(Ve,function ce(){return x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ve,Fe):Ve)}function et(Ve){if(Ve instanceof IDBRequest)return function ue(Ve){const ie=new Promise((it,vt)=>{const zt=()=>{Ve.removeEventListener("success",Tn),Ve.removeEventListener("error",An)},Tn=()=>{it(et(Ve.result)),zt()},An=()=>{vt(Ve.error),zt()};Ve.addEventListener("success",Tn),Ve.addEventListener("error",An)});return ie.then(it=>{it instanceof IDBCursor&&Ce.set(it,Ve)}).catch(()=>{}),$.set(ie,Ve),ie}(Ve);if(z.has(Ve))return z.get(Ve);const ie=Je(Ve);return ie!==Ve&&(z.set(Ve,ie),$.set(ie,Ve)),ie}const Gt=Ve=>$.get(Ve);function Jt(Ve,ie,{blocked:it,upgrade:vt,blocking:zt,terminated:Tn}={}){const An=indexedDB.open(Ve,ie),Ir=et(An);return vt&&An.addEventListener("upgradeneeded",Sn=>{vt(et(An.result),Sn.oldVersion,Sn.newVersion,et(An.transaction),Sn)}),it&&An.addEventListener("blocked",Sn=>it(Sn.oldVersion,Sn.newVersion,Sn)),Ir.then(Sn=>{Tn&&Sn.addEventListener("close",()=>Tn()),zt&&Sn.addEventListener("versionchange",ir=>zt(ir.oldVersion,ir.newVersion,ir))}).catch(()=>{}),Ir}const At=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],gt=new Map;function Et(Ve,ie){if(!(Ve instanceof IDBDatabase)||ie in Ve||"string"!=typeof ie)return;if(gt.get(ie))return gt.get(ie);const it=ie.replace(/FromIndex$/,""),vt=ie!==it,zt=Ot.includes(it);if(!(it in(vt?IDBIndex:IDBObjectStore).prototype)||!zt&&!At.includes(it))return;const Tn=function(){var An=(0,D.A)(function*(Ir,...Sn){const ir=this.transaction(Ir,zt?"readwrite":"readonly");let fr=ir.store;return vt&&(fr=fr.index(Sn.shift())),(yield Promise.all([fr[it](...Sn),zt&&ir.done]))[0]});return function(Sn){return An.apply(this,arguments)}}();return gt.set(ie,Tn),Tn}!function tt(Ve){Fe=Ve(Fe)}(Ve=>({...Ve,get:(ie,it,vt)=>Et(ie,it)||Ve.get(ie,it,vt),has:(ie,it)=>!!Et(ie,it)||Ve.has(ie,it)}))},467:(yt,U,G)=>{function D(x,he,ce,te,Ce,ee,X){try{var z=x[ee](X),$=z.value}catch(ue){return void ce(ue)}z.done?he($):Promise.resolve($).then(te,Ce)}function Z(x){return function(){var he=this,ce=arguments;return new Promise(function(te,Ce){var ee=x.apply(he,ce);function X($){D(ee,te,Ce,X,z,"next",$)}function z($){D(ee,te,Ce,X,z,"throw",$)}X(void 0)})}}G.d(U,{A:()=>Z})},1635:(yt,U,G)=>{function he(de,_e){var se={};for(var ae in de)Object.prototype.hasOwnProperty.call(de,ae)&&_e.indexOf(ae)<0&&(se[ae]=de[ae]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(ae=Object.getOwnPropertySymbols(de);ge<ae.length;ge++)_e.indexOf(ae[ge])<0&&Object.prototype.propertyIsEnumerable.call(de,ae[ge])&&(se[ae[ge]]=de[ae[ge]])}return se}function ue(de,_e,se,ae){return new(se||(se=Promise))(function(pe,at){function Mt(wn){try{It(ae.next(wn))}catch(pt){at(pt)}}function Mn(wn){try{It(ae.throw(wn))}catch(pt){at(pt)}}function It(wn){wn.done?pe(wn.value):function ge(pe){return pe instanceof se?pe:new se(function(at){at(pe)})}(wn.value).then(Mt,Mn)}It((ae=ae.apply(de,_e||[])).next())})}function Tt(de){return this instanceof Tt?(this.v=de,this):new Tt(de)}function At(de,_e,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ae=se.apply(de,_e||[]),pe=[];return ge=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Mt("next"),Mt("throw"),Mt("return",function at(en){return function(tn){return Promise.resolve(tn).then(en,pt)}}),ge[Symbol.asyncIterator]=function(){return this},ge;function Mt(en,tn){ae[en]&&(ge[en]=function(xt){return new Promise(function(Jr,wi){pe.push([en,xt,Jr,wi])>1||Mn(en,xt)})},tn&&(ge[en]=tn(ge[en])))}function Mn(en,tn){try{!function It(en){en.value instanceof Tt?Promise.resolve(en.value.v).then(wn,pt):Zr(pe[0][2],en)}(ae[en](tn))}catch(xt){Zr(pe[0][3],xt)}}function wn(en){Mn("next",en)}function pt(en){Mn("throw",en)}function Zr(en,tn){en(tn),pe.shift(),pe.length&&Mn(pe[0][0],pe[0][1])}}function gt(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,_e=de[Symbol.asyncIterator];return _e?_e.call(de):(de=function Xe(de){var _e="function"==typeof Symbol&&Symbol.iterator,se=_e&&de[_e],ae=0;if(se)return se.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&ae>=de.length&&(de=void 0),{value:de&&de[ae++],done:!de}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),se={},ae("next"),ae("throw"),ae("return"),se[Symbol.asyncIterator]=function(){return this},se);function ae(pe){se[pe]=de[pe]&&function(at){return new Promise(function(Mt,Mn){!function ge(pe,at,Mt,Mn){Promise.resolve(Mn).then(function(It){pe({value:It,done:Mt})},at)}(Mt,Mn,(at=de[pe](at)).done,at.value)})}}}G.d(U,{AQ:()=>At,N3:()=>Tt,Tt:()=>he,sH:()=>ue,xN:()=>gt}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=9269)}]);