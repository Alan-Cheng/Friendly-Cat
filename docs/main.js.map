{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/pipes/empty-info.pipe.ts","./src/app/pipes/round.pipe.ts","./src/app/search-food/model/family-mart.model.ts","./src/app/search-food/model/seven-eleven.model.ts","./src/app/search-food/new-search/display/display.component.ts","./src/app/search-food/new-search/display/display.component.html","./src/app/search-food/new-search/new-search.component.ts","./src/app/search-food/new-search/new-search.component.html","./src/app/search-food/new-search/services/family-mart-request.service.ts","./src/app/search-food/new-search/services/seven-eleven-request.service.ts","./src/app/search-food/search-food.module.ts","./src/app/services/geolocation.service.ts","./src/app/services/request.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { NewSearchComponent } from './search-food/new-search/new-search.component';\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/search', pathMatch: 'full' },  // 設置默認路由\n  { path: 'search', component: NewSearchComponent },  // 配置導航到 StockListComponent\n  // 如果有其他路由，可以繼續加上\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'friendly-time';\n}\n","<router-outlet></router-outlet>\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatOptionModule } from '@angular/material/core';\n\nimport { SearchFoodModule } from './search-food/search-food.module';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { EmptyInfoPipe } from './pipes/empty-info.pipe';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    SearchFoodModule,\n    HttpClientModule,\n    BrowserAnimationsModule,\n    MatFormFieldModule,\n    MatSelectModule,\n    MatOptionModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n})\nexport class AppModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'emptyInfo'\n})\nexport class EmptyInfoPipe implements PipeTransform {\n\n  transform(value: string): string {\n    // 如果字串為空，回傳 \"暫無資訊\"\n    return value === '' ? '暫無資訊' : value;\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'round'\n})\nexport class RoundPipe implements PipeTransform {\n\n  transform(value: any, precision: number = 0): any {\n    // 嘗試將輸入轉換為數字\n    const numericValue = parseFloat(value);\n\n    // 檢查是否是有效的數字\n    if (isNaN(numericValue)) {\n      return value;  // 如果不是有效的數字，返回原始輸入\n    }\n\n    // 使用 Math.round() 進行四捨五入\n    const factor = Math.pow(10, precision); // 計算小數位數\n    return Math.round(numericValue * factor) / factor; // 四捨五入到指定的精度\n  }\n\n}\n","export interface RequestModel {\n    latitude: number;          // 緯度\n    longitude: number;         // 經度\n    oldPKeys: string[];        // 店鋪的舊主鍵列表\n    postInfo: string;          // 郵遞區號或相關信息\n    projectCode: \"202106302\";  // 專案代碼\n}\n\nexport interface StoreModel {\n    oldPKey: string;\n    name: string;\n    tel: string | null;\n    post: string | null;\n    city: string | null;\n    areaCode: string | null;\n    periodType: number;\n    longitude: number;\n    latitude: number;\n    distance: number;\n    address: string;\n    updateDate: string;\n    info: ProductCategoryModel[];\n}\n\nexport interface ProductCategoryModel {\n    code: string;\n    name: string;\n    iconURL: string;\n    qty: number;\n    categories: SubCategoryModel[];\n}\n\nexport interface SubCategoryModel {\n    code: string;\n    name: string;\n    qty: number;\n    products: ProductModel[];\n}\n\nexport interface ProductModel {\n    code: string;\n    name: string;\n    qty: number;\n}\n\nexport interface fStore {\n  Name: string;           // 店名\n  Tel: string;            // 電話\n  addr: string;           // 地址\n  pkeynew: string;        // 新的 PKey\n  px_wgs84: string;       // 經度\n  py_wgs84: string;       // 緯度\n  serid: string;\n}\n","export interface Location {\n  Latitude: number;  // 經度\n  Longitude: number; // 緯度\n}\n\nexport interface LocationData {\n  CurrentLocation: Location;  // 當前位置\n  SearchLocation: Location;   // 搜索位置\n}\n\nexport interface Item {\n  ItemName: string;        // 商品名稱\n  RemainingQty: number;    // 剩餘數量\n}\n\nexport interface CategoryStockItem {\n  NodeID: number;               // 與FoodSubCategory的ID是對照\n  Name: string;                 // 食物子分類名稱\n  RemainingQty: number;         // 剩餘數量\n  ItemList: Item[];             // 該分類下的商品列表\n}\n\nexport interface StoreStockItem {\n  StoreNo: string;              // 商店編號\n  StoreName: string;            // 商店名稱\n  Distance: number;             // 與輸入位址的距離\n  IsOperateTime: boolean;       // 是否營業\n  RemainingQty: number;         // 該店總剩餘數量\n  CategoryStockItems: CategoryStockItem[]; // 商店所有的分類庫存資料\n}\n\nexport interface StoreStockResponse {\n  element: {\n      StoreStockItemList: StoreStockItem[];  // 包含所有商店的庫存資料\n  };\n  message: string;                      // 成功信息\n  isSuccess: boolean;                   // 是否成功\n  extend: any;                          // 其他擴展數據（可根據實際需求進行擴展）\n}\n\nexport interface FoodCategory {\n  ID: number;                    // 分類 ID\n  Name: string;                  // 食物分類名稱\n  ImageUrl: string;              // 圖片 URL\n  IsEnabled: boolean;            // 是否啟用\n  Children: FoodSubCategory[];   // 子分類列表\n  PCSCCategeroyNo: string[];     // 相關商品分類編號\n}\n\nexport interface FoodSubCategory {\n  ID: number;                     // 子分類 ID\n  Name: string;                   // 子分類名稱\n  IsEnabled: boolean;             // 是否啟用\n  PCSCCategeroyNo: string[];      // 子分類編號\n}\n\nexport interface FoodDetail {\n  name: string;\n  category: string;\n  content: string;\n  image: string;\n  kcal: string;\n  new: string;\n  price: string;\n  special_sale: string;\n  originalPrice?: string; // 新增原價屬性\n  discountedPrice?: string; // 新增折扣後價格屬性\n}\n\nexport interface Store {\n  StoreNo: string; // 商店編號\n  StoreName: string; // 商店名稱\n  StoreShortName: string; // 商店簡稱\n  IsEnabled: boolean; // 商店是否啟用\n  Latitude: number; // 緯度\n  Longitude: number; // 經度\n  Address: string; // 地址\n  IsXStore: boolean; // 是否是 X Store\n  IsOperateTime: boolean; // 是否有營業時間\n  HasStock: boolean; // 是否有庫存\n  Distance: number | null; // 距離，可能為 null\n}\n","import { Component, Input, OnChanges, SimpleChanges, OnInit } from '@angular/core';\n\nimport { FoodSubCategory, Item, CategoryStockItem, FoodDetail  } from '../../model/seven-eleven.model';  // 根據你的實際路徑導入模型\nimport { ProductModel } from '../../model/family-mart.model'\n\nimport { SevenElevenRequestService } from '../services/seven-eleven-request.service';  // 確保這個服務有方法可以查詢商店商品數量\n\nimport Fuse from 'fuse.js';\n\n@Component({\n  selector: 'app-display',\n  templateUrl: './display.component.html',\n  styleUrls: ['./display.component.scss']\n})\nexport class DisplayComponent implements OnChanges, OnInit {\n  @Input() store!: any;  // 接收父組件傳遞的 store\n  @Input() category!: any;  // 接收父組件傳遞的 category\n\n  subCategories: any[] = [];\n  itemsBySubCategory: { [key: string]: Item[] } = {};  // 儲存每個子分類的商品列表\n\n  foodDetails: FoodDetail[] = [];\n\n  constructor(\n    private sevenElevenRequestService: SevenElevenRequestService,\n  ) {}\n\n  ngOnInit() {\n    // 初始化的時候讀取存在.json的7-11商品細節\n    this.sevenElevenRequestService.getFoodDetails().subscribe((data) => {\n      this.foodDetails = data;\n      console.log(this.foodDetails);\n    })\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    // 若組件輸入有變化時，重新載入子商品列表\n    if (changes['category'] || changes['store']) {\n      this.loadSubCategories();  // 重新加載子分類資料\n    }\n  }\n\n  loadSubCategories() {\n    if (this.store && this.category) {\n      if (this.store.StoreName) {\n        this.subCategories = this.category.Children;  // 更新子分類列表\n        console.log('subCategories', this.subCategories);\n        this.loadItemsBySubCategory();  // 載入子分類下的所有商品資料\n      }\n      else if (this.store.name) {\n        this.subCategories = this.category.categories\n        console.log('subCategories', this.subCategories);\n        // 全家直接把商品丟進itemsBySubCategory\n        const items: Item[] = [];\n        this.subCategories.forEach((cat) => {\n          console.log('cat', cat)\n          items.push(\n            ...cat.products.map((product: ProductModel) => ({\n              ItemName: product.name,       // 映射到 ItemName\n              RemainingQty: product.qty,    // 映射到 RemainingQty\n            }))\n          );\n          this.itemsBySubCategory[cat.name] = items || [];\n        });\n        console.log('itemsBySubCategory', this.itemsBySubCategory)\n      }\n    }\n  }\n\n  loadItemsBySubCategory() {\n    if (this.store) {\n      this.sevenElevenRequestService.getItemsByStoreNo(this.store.StoreNo).subscribe(response => {\n        if (response.isSuccess && response.element.StoreStockItem) {\n          const categoryStockItems: CategoryStockItem[] = response.element.StoreStockItem.CategoryStockItems;\n\n          this.subCategories.forEach(subCategory => {\n            const items: Item[] = [];\n\n            // 遍歷 CategoryStockItems，根據子分類名稱過濾並提取 ItemList\n            categoryStockItems.forEach(category => {\n              if (category.Name === subCategory.Name) {\n                items.push(...category.ItemList);\n              }\n            });\n\n            // 把結果保存到 itemsBySubCategory\n            this.itemsBySubCategory[subCategory.Name] = items || [];\n          });\n        }\n        console.log('itemsBySubCategory', this.itemsBySubCategory)\n      });\n    }\n  }\n\n  // getSubCategoryQty(subCategoryName: string): number {\n  //   let qty = 0;\n  //   const items = this.itemsBySubCategory[subCategoryName];\n  //   if (items) {\n  //     items.forEach(item => {\n  //       qty += item.RemainingQty;\n  //     });\n  //   }\n  //   return qty;\n  // }\n\n  getDiscountedPrice(originalPrice: string): string {\n    // 解析原價\n    const price = parseFloat(originalPrice.replace('NT$', '').trim());\n    const currentTime = new Date();\n    const currentHour = currentTime.getHours();\n\n    let discountedPrice = price;\n\n    // 設定折扣邏輯\n    if (currentHour >= 19 && currentHour < 20) {\n      discountedPrice *= 0.8; // 19:00~19:59 八折\n    } else if ((currentHour >= 10 && currentHour < 18) || (currentHour >= 20 || currentHour < 3)) {\n      discountedPrice *= 0.65; // 10:00~17:59 以及 20:00~03:00 六五折\n    }\n    else {\n      // 待查清其餘時段是幾折==，目前假設八折\n      discountedPrice *= 0.8;\n    }\n    return discountedPrice.toString();\n  }\n\n  getFoodDetail(item: Item): FoodDetail {\n    // 設置 Fuse.js 配置選項\n    const options = {\n      includeScore: true, // 需要包含匹配度分數\n      threshold: 0.3, // 設置模糊搜尋的閾值，0.3 表示較為寬鬆的匹配\n      keys: ['name'] // 搜尋的欄位是 'name'\n    };\n\n    // 初始化 Fuse 進行模糊搜尋\n    const fuse = new Fuse(this.foodDetails, options);\n\n    // 查找最匹配的項目\n    const result = fuse.search(item.ItemName);\n\n    // 如果找到匹配項，則返回最相似的那個\n    const foodDetail = result.length > 0 ? result[0].item : {\n      category: '',\n      content: '',\n      image: 'assets/此商品暫無圖片.png', // 默認圖片\n      kcal: '',\n      name: '',\n      new: 'False',\n      price: '',\n      special_sale: 'False'\n    };\n\n    // 計算折扣後的價格\n    const discountedPrice = this.getDiscountedPrice(foodDetail.price);\n\n    // 將計算結果新增到 foodDetail 物件中\n    foodDetail['discountedPrice'] = discountedPrice;\n    foodDetail['originalPrice'] = foodDetail.price; // 原價\n\n    return foodDetail;\n  }\n}\n","<!-- 子類別分類有東西才顯示 -->\n<div *ngIf=\"subCategories.length > 0\">\n\n  <!-- 7-11顯示區塊 -->\n  <ng-container *ngIf=\"category.Name\">\n    <h2 class=\"text-2xl font-bold mb-4\">{{ category.Name }}</h2>\n    <ng-container *ngFor=\"let subCategory of subCategories\">\n      <div *ngIf=\"itemsBySubCategory[subCategory.Name] && itemsBySubCategory[subCategory.Name].length > 0\"\n          class=\"sub-category-item bg-white border border-gray-300 p-6 mb-8 rounded-lg shadow-lg\">\n        <div class=\"mb-4\">\n          <h3 class=\"text-2xl font-bold text-gray-800\">\n            {{ subCategory.Name }}\n          </h3>\n          <!-- <h4 class=\"text-lg text-gray-600 mt-2\">數量: <span class=\"font-semibold\">{{ getSubCategoryQty(subCategory.Name) }}</span></h4> -->\n        </div>\n\n        <!-- 7-11顯示的子分類商品內容區塊 -->\n        <ul class=\"space-y-6\">\n          <li *ngFor=\"let item of itemsBySubCategory[subCategory.Name]\">\n            <div class=\"food-item flex items-start p-4 border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow\">\n              <img [src]=\"getFoodDetail(item).image\" [alt]=\"getFoodDetail(item).name\"\n                class=\"object-contain rounded-lg mr-6 shadow-md w-40 h-40\">\n              <div class=\"flex-1\">\n                <!-- 商品名稱 -->\n                <h3 class=\"text-xl font-semibold text-gray-800\">\n                  {{ item.ItemName }}\n                  <!-- 剩餘數量顯示 -->\n                  <div class=\"inline-block bg-green-100 text-green-800 text-xs font-semibold px-3 py-1 rounded-full\">\n                    剩餘數量: {{ item.RemainingQty }}\n                  </div>\n                </h3>\n                <div class=\"flex space-x-2 mb-2\">\n                  <div *ngIf=\"getFoodDetail(item).new === 'True'\"\n                      class=\"inline-block bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full\">\n                    新品\n                  </div>\n                  <div *ngIf=\"getFoodDetail(item).special_sale === 'True'\"\n                      class=\"inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full\">\n                    特價中\n                  </div>\n                </div>\n                <ng-container *ngIf=\"getFoodDetail(item).name else noNameTemplate\">\n                  <div class=\"text-base font-semibold text-gray-800 mb-3\">\n                    <span class=\"text-gray-800\">價格(NT$): </span>\n                    <span class=\"line-through text-gray-500\">{{ getFoodDetail(item).originalPrice }}</span>\n                    <span class=\"text-red-600 mx-2\">→</span>\n                    <span class=\"text-red-600\">\n                      {{ getFoodDetail(item).discountedPrice | round:0 }}\n                    </span>\n                  </div>\n                  <p class=\"text-sm text-gray-500 mb-2\">商品描述: {{ getFoodDetail(item).content | emptyInfo}}</p>\n                  <p class=\"text-sm text-gray-500 mb-2\">卡路里(kcal): {{ getFoodDetail(item).kcal | emptyInfo}}</p>\n                </ng-container>\n\n                <ng-template #noNameTemplate>\n                  <p class=\"text-sm text-gray-500 mb-2\">此商品無相關資訊</p>\n                </ng-template>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </ng-container>\n  </ng-container>\n\n  <!-- 全家顯示區塊 -->\n  <ng-container *ngIf=\"category.name\">\n    <h2 class=\"text-2xl font-bold mb-4\">{{ category.name }}</h2>\n    <ng-container *ngFor=\"let subCategory of subCategories\">\n      <div *ngIf=\"itemsBySubCategory[subCategory.name] && itemsBySubCategory[subCategory.name].length > 0\"\n          class=\"sub-category-item bg-white border border-gray-300 p-6 mb-8 rounded-lg shadow-lg\">\n        <div class=\"mb-4\">\n          <h3 class=\"text-2xl font-bold text-gray-800\">\n            {{ subCategory.name }}\n          </h3>\n          <!-- <h4 class=\"text-lg text-gray-600 mt-2\">數量: <span class=\"font-semibold\">{{ getSubCategoryQty(subCategory.Name) }}</span></h4> -->\n        </div>\n\n        <!-- 全家顯示的子分類商品內容區塊 -->\n        <ul class=\"space-y-6\">\n          <li *ngFor=\"let item of itemsBySubCategory[subCategory.name]\">\n            <div class=\"food-item flex items-start p-4 border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow\">\n              <!-- 全家目前沒圖片 -->\n              <!-- <img [src]=\"getFoodDetail(item).image\" [alt]=\"getFoodDetail(item).name\"\n                class=\"object-contain rounded-lg mr-6 shadow-md w-40 h-40\"> -->\n              <div class=\"flex-1\">\n                <!-- 商品名稱 -->\n                <h3 class=\"text-xl font-semibold text-gray-800\">\n                  {{ item.ItemName }}\n                  <!-- 剩餘數量顯示 -->\n                  <div class=\"inline-block bg-green-100 text-green-800 text-xs font-semibold px-3 py-1 rounded-full\">\n                    剩餘數量: {{ item.RemainingQty }}\n                  </div>\n                </h3>\n                <!-- 全家目前無任何商品資訊 -->\n                <!-- <div class=\"flex space-x-2 mb-2\">\n                  <div *ngIf=\"getFoodDetail(item).new === 'True'\"\n                      class=\"inline-block bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full\">\n                    新品\n                  </div>\n                  <div *ngIf=\"getFoodDetail(item).special_sale === 'True'\"\n                      class=\"inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full\">\n                    特價中\n                  </div>\n                </div>\n                <ng-container *ngIf=\"getFoodDetail(item).name else noNameTemplate\">\n                  <div class=\"text-base font-semibold text-gray-800 mb-3\">\n                    <span class=\"text-gray-800\">價格(NT$): </span>\n                    <span class=\"line-through text-gray-500\">{{ getFoodDetail(item).originalPrice }}</span>\n                    <span class=\"text-red-600 mx-2\">→</span>\n                    <span class=\"text-red-600\">\n                      {{ getFoodDetail(item).discountedPrice | round:0 }}\n                    </span>\n                  </div>\n                  <p class=\"text-sm text-gray-500 mb-2\">商品描述: {{ getFoodDetail(item).content | emptyInfo}}</p>\n                  <p class=\"text-sm text-gray-500 mb-2\">卡路里(kcal): {{ getFoodDetail(item).kcal | emptyInfo}}</p>\n                </ng-container>\n\n                <ng-template #noNameTemplate>\n                  <p class=\"text-sm text-gray-500 mb-2\">此商品無相關資訊</p>\n                </ng-template> -->\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </ng-container>\n  </ng-container>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { FormGroup, FormControl } from '@angular/forms';\n\nimport { GeolocationService } from 'src/app/services/geolocation.service';\nimport { SevenElevenRequestService } from './services/seven-eleven-request.service';\nimport { FamilyMartRequestService } from './services/family-mart-request.service';\n\nimport { FoodCategory, LocationData, StoreStockItem, Store, Location, CategoryStockItem } from '../model/seven-eleven.model'\nimport { fStore, StoreModel, ProductCategoryModel } from '../model/family-mart.model';\n\nimport { environment } from 'src/environments/environment';\n\nimport { switchMap, from, of, catchError, Observable, tap, forkJoin } from 'rxjs';\n\n@Component({\n  selector: 'app-new-search',\n  templateUrl: './new-search.component.html',\n  styleUrls: ['./new-search.component.scss'],\n})\nexport class NewSearchComponent implements OnInit {\n  searchForm: FormGroup; // 表單\n  searchTerm: string = '';\n  selectedStoreName='';\n\n  storeFilter: string = 'all';\n\n  dropDown711List: Store[] = [];\n  dropDownFamilyMartList: fStore[] = [];\n  unifiedDropDownList: any[] = [];\n\n\n  sevenElevenIconUrl = environment.sevenElevenUrl.icon;\n  familyMartIconUrl = environment.familyMartUrl.icon;\n\n  zipcodes: any[] = []; // 原始 API 資料\n  cities: string[] = []; // 縣市清單\n  filteredDistricts: any[] = []; // 篩選後的行政區列表\n  zipcodeList: string[] = [];\n\n  selectedCity: string | null = null; // 選擇的縣市\n  selectedDistrict: string | null = null; // 選擇的行政區\n  selectedZipcode: string | null = null; // 對應的郵遞區號\n\n  latitude!: number;\n  longitude!: number;\n\n  foodCategories: FoodCategory[] = [];\n\n  nearby711Stores: StoreStockItem[] = []; // 儲存用現在位置找到的711\n  nearbyFamilyMartStores: StoreModel[] = []; // 儲存用現在位置找到的全家\n  totalStoresShowList: any[] = []; //為了方便顯示所以統一\n  filteredStoresList: any[] = [];  // 用來儲存篩選後的商店列表\n\n  selectedStore?: any;\n  selectedCategory?: any;\n\n  constructor(\n    private http: HttpClient,\n    private geolocationService: GeolocationService,\n    private sevenElevenService: SevenElevenRequestService,\n    private familyMartService: FamilyMartRequestService,\n  ) {\n    this.searchForm = new FormGroup({\n      selectedStoreName: new FormControl(''), // 控制選中的商店\n    });\n  }\n\n  ngOnInit(): void {\n    this.init();\n  }\n\n  getCityName(): Observable<any[]> {\n    const apiUrl = 'https://demeter.5fpro.com/tw/zipcodes.json'; // API URL\n    return this.http.get<any[]>(apiUrl).pipe(\n      tap((data) => {\n        this.zipcodes = data;\n        this.cities = [...new Set(data.map((item) => item.city_name))];\n        this.zipcodeList = [...new Set(data.map((item) => item.zipcode))];\n      })\n    );\n  }\n\n  // 當縣市選擇改變時\n  onCityChange(city: string): void {\n    // 根據選擇的縣市篩選行政區\n    this.filteredDistricts = this.zipcodes.filter((item) => item.city_name === city);\n    this.selectedDistrict = null; // 清空選中的行政區\n    this.selectedZipcode = null; // 清空郵遞區號\n  }\n\n  // 當行政區選擇改變時\n  onDistrictChange(zipcode: string): void {\n    // 更新選擇的郵遞區號\n    this.selectedZipcode = zipcode;\n  }\n\n  handleError(error: GeolocationPositionError): string {\n    switch (error.code) {\n      case 1:\n        return '使用者拒絕位置存取';\n      case 2:\n        return '無法取得位置資訊';\n      case 3:\n        return '位置請求逾時';\n      default:\n        return '未知錯誤';\n    }\n  }\n\n  init() {\n    // // 使用 from 將 Promise 轉換為 Observable\n    // this.getCityName();\n\n    //取得所有全家商店名稱資訊\n    this.getFamilyMartAllStore();\n\n    of(true).pipe(\n      switchMap(() => {\n        return this.sevenElevenService.getAccessToken();\n      }),\n      switchMap((token: any) => {\n        if (token && token.element) {\n          sessionStorage.setItem('711Token', token.element);\n          console.log('Stored 711Token:', sessionStorage.getItem('711Token'));\n          // 如果 token 儲存成功，發送 getFoodCategory 請求\n          return this.sevenElevenService.getFoodCategory();\n        } else {\n          // 如果 token 沒有成功返回，返回空陣列\n          return of([]);\n        }\n      }),\n      catchError((error) => {\n        // 錯誤處理邏輯\n        console.error('Error:', error);\n        return of([]); // 在出錯時返回空陣列，防止應用崩潰\n      })\n    ).subscribe(\n      (res) => {\n        if (res && res.element) {\n          this.foodCategories = res.element;\n          console.log('Food Categories:', this.foodCategories);\n        } else {\n          console.error('Failed to fetch food categories');\n        }\n      }\n    );\n  }\n\n  getFamilyMartAllStore() {\n    this.familyMartService.getStores().subscribe((data) => {\n      if(data.length > 0) {\n        this.dropDownFamilyMartList = data;\n      }\n    })\n  }\n\n  getFoodSubCategoryImage(nodeID: number): string | null {\n    // 查找匹配的子分類\n    for (let category of this.foodCategories) {\n      const subCategory = category.Children.find(child => child.ID === nodeID);\n      if (subCategory) {\n        // 找到對應的子分類並返回其對應的分類圖片 URL\n        return category.ImageUrl;\n      }\n    }\n    // 如果沒有找到對應的子分類，返回 null\n    return null;\n  }\n\n  getSubCategoryTotalQty(store: any, category: any): number {\n    let totalQty = 0;\n\n    // 遍歷商店中的所有商品，檢查是否屬於當前分類及子分類\n    for (const stockItem of store.CategoryStockItems) {\n      // 遍歷每個分類的子項目，檢查是否屬於這個 category\n      for (const child of category.Children) {\n        if (stockItem.NodeID === child.ID) {\n          totalQty += stockItem.RemainingQty;\n        }\n      }\n    }\n\n    return totalQty;\n  }\n\n  // 當用戶點擊某個分類時，切換選中的分類與店鋪\n  toggleSubCategoryDetails(store: any, category: any): void {\n    this.selectedCategory = category;\n    this.selectedStore = store;\n  }\n\n  onSearchStore(event: Event): void {\n    const input = (event.target as HTMLInputElement).value;  // 確保這裡的值是有效的\n    console.log('輸入的值:', input);  // 確認輸入的值是否正確\n\n    if (input.length >= 2) {\n      // 假設這是你的API調用邏輯\n      this.sevenElevenService.getStoreByAddress(input).subscribe(\n        (data) => {\n          if (data && data.isSuccess) {\n            this.dropDown711List = data.element;\n\n            // 刪掉全家兩個字以免使用者誤搜，篩選 unifiedDropDownList，篩選條件是 Name 和 addr 都包含 input\n            const filteredDropDownFamilyMartList = this.dropDownFamilyMartList\n              .map(item => ({\n                ...item,\n                Name: item.Name.replace('全家', '')  // 去除 \"全家\" 字串\n              }))\n              .filter(item =>\n                item.Name.includes(input) || item.addr.includes(input)\n              );\n\n            // 統一兩個列表的名稱欄位\n            const normalizedFamilyMartList = filteredDropDownFamilyMartList.map(item => ({\n              name: item.Name,  // 統一名稱欄位\n              addr: item.addr,\n              label: '全家',\n            }));\n\n            const normalized711List = this.dropDown711List.map(item => ({\n              name: item.StoreName,  // 統一名稱欄位\n              addr: item.Address,\n              label: '7-11',\n            }));\n\n            normalized711List.forEach(item => {\n              if (!this.unifiedDropDownList.some(existingItem => existingItem.name === item.name && existingItem.addr === item.addr)) {\n                this.unifiedDropDownList.push(item);  // 同樣的檢查，防止重複\n              }\n            });\n\n            normalizedFamilyMartList.forEach(item => {\n              if (!this.unifiedDropDownList.some(existingItem => existingItem.name === item.name && existingItem.addr === item.addr)) {\n                this.unifiedDropDownList.push(item);  // 只有當 unifedDropDownList 中沒有該元素時才添加\n              }\n            });\n          }\n        },\n        (error) => {\n          console.error('API 請求錯誤:', error);\n        }\n      );\n    } else {\n      this.unifiedDropDownList = [];\n    }\n  }\n\n  onSubmit(): void {\n    console.log('提交的搜索內容:', this.searchTerm);\n  }\n\n  onUseCurrentLocation(): void {\n    from(this.geolocationService.getCurrentPosition())\n      .pipe(\n        switchMap((position) => {\n          const lat = position.coords.latitude;\n          const lng = position.coords.longitude;\n          console.log('Latitude:', lat, 'Longitude:', lng);\n  \n          this.latitude = lat;\n          this.longitude = lng;\n  \n          console.log('已取得位置');\n\n          return of([]);\n        }),\n        switchMap((res) => {\n          if(res) {\n            return this.sevenElevenService.getAccessToken();\n          }\n          else{\n            return [];\n          }\n        }),\n        switchMap((token: any) => {\n          if (token && token.element) {\n            sessionStorage.setItem('711Token', token.element);\n            console.log('Stored 711Token:', sessionStorage.getItem('711Token'));\n            // 如果 token 儲存成功，發送 getFoodCategory 請求\n            return this.sevenElevenService.getFoodCategory();\n          } else {\n            // 如果 token 沒有成功返回，返回空陣列\n            return of([]);\n          }\n        })\n      ).subscribe(\n        (res) => {\n          if (res) {\n            this.combineAndTransformStores();\n          } else {\n            console.error('Failed to fetch food categories');\n          }\n        }\n      );\n  }\n\n  transformFStyleTo711(): void {\n    // 清空統一列表，避免重複累加\n    this.totalStoresShowList = [];\n    \n    // 處理 7-11 商店\n    this.nearby711Stores.forEach((store) => {\n      const transformedStore = {\n        ...store,\n        label: '7-11',\n        distance: store.Distance // 統一使用 `distance` 字段\n      };\n      this.totalStoresShowList.push(transformedStore); // 推入統一列表\n    });\n    \n    // 處理全家商店\n    this.nearbyFamilyMartStores.forEach((store) => {\n      const transformedStore = {\n        ...store,\n        label: '全家', // 加上來源標籤\n        distance: store.distance // 統一使用 `distance` 字段\n      };\n      this.totalStoresShowList.push(transformedStore); // 推入統一列表\n    });\n  \n    // 根據距離排序\n    this.totalStoresShowList.sort((a, b) => a.distance - b.distance);\n  \n    console.log('totalStoresShowList', this.totalStoresShowList);\n  }\n\n  combineAndTransformStores(): void {\n    const locationData711: LocationData = {\n      CurrentLocation: {\n        Latitude: this.latitude,\n        Longitude: this.longitude\n      },\n      SearchLocation: {\n        Latitude: this.latitude,\n        Longitude: this.longitude\n      }\n    };\n  \n    const locationFamilyMart: Location = {\n      Latitude: this.latitude,\n      Longitude: this.longitude\n    };\n  \n    // 結合兩個 API 請求\n    forkJoin({\n      sevenEleven: this.sevenElevenService.getNearByStoreList(locationData711),\n      familyMart: this.familyMartService.getNearByStoreList(locationFamilyMart)\n    }).subscribe(\n      ({ sevenEleven, familyMart }) => {\n        // 處理 7-11 資料\n        if (sevenEleven && sevenEleven.element && sevenEleven.element.StoreStockItemList) {\n          this.nearby711Stores = sevenEleven.element.StoreStockItemList.sort(\n            (a: StoreStockItem, b: StoreStockItem) => a.Distance - b.Distance\n          );\n        }\n  \n        // 處理全家資料\n        if (familyMart && familyMart.code === 1) {\n          this.nearbyFamilyMartStores = familyMart.data.sort(\n            (a: StoreModel, b: StoreModel) => a.distance - b.distance\n          );\n        }\n  \n        // 等兩者完成後合併資料\n        this.transformFStyleTo711();\n      },\n      (error) => {\n        console.error('Error fetching store data:', error);\n      }\n    );\n  }\n\n  getFStoreQty(store: StoreModel): number {\n    var totalQty: number = 0;\n    store.info.forEach((cat) => {\n      totalQty += cat.qty;\n    })\n    return totalQty;\n  }\n\n  getFUrl(cat: any): string {\n    return cat.iconURL;\n  }\n\n  getFCatName(cat: any): string {\n    return cat.name;\n  }\n\n  getFSubCategoryQty(store: StoreModel, cat: any): number {\n    return cat.qty;\n  }\n}\n","<div class=\"container mx-auto my-8 p-6 bg-white shadow-lg rounded-lg max-w-4xl\">\n  <ng-container class=\"flex flex-col items-center\">\n    <h1 class=\"text-2xl font-bold text-center mb-6\">店名地址查詢</h1>\n\n    <!-- 提示訊息區域 -->\n    <div class=\"text-sm text-red-600 mb-4\">\n      <p>* 預設顯示目前所在位置附近商店</p>\n      <p>* 全家便利商店未提供詳細商品資訊，因此僅顯示商品與數量</p>\n    </div>\n\n    <form (ngSubmit)=\"onSubmit()\" class=\"w-full\">\n      <div class=\"flex justify-center gap-4 w-full items-center\">\n        <!-- 輸入框 -->\n        <mat-form-field class=\"w-3/4 sm:w-1/2\">\n          <mat-icon matSuffix class=\"text-gray-500\">search</mat-icon>\n          <input\n            matInput\n            [matAutocomplete]=\"auto\"\n            [(ngModel)]=\"searchTerm\"\n            (input)=\"onSearchStore($event)\"\n            placeholder=\"請輸入兩個字以上之店名或地址\"\n            name=\"searchTerm\"\n            class=\"p-3 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n          <mat-autocomplete #auto=\"matAutocomplete\">\n            <mat-option\n              *ngFor=\"let store of unifiedDropDownList\"\n              [value]=\"store.label + store.name + '門市'\"\n              class=\"p-2 hover:bg-blue-100 focus:bg-blue-200\"\n            >\n              <div *ngIf=\"store.label === '7-11'\" class=\"flex items-center gap-2\">\n                <img\n                  src=\"{{ sevenElevenIconUrl }}\"\n                  alt=\"7-Eleven Icon\"\n                  class=\"w-4 h-4\"\n                />\n                <span>{{ store.name }}門市</span>\n                <span class=\"text-sm text-gray-500\">{{ store.addr }}</span>\n              </div>\n              <div *ngIf=\"store.label === '全家'\" class=\"flex items-center gap-2\">\n                <img\n                  src=\"{{ familyMartIconUrl }}\"\n                  alt=\"FamilyMart Icon\"\n                  class=\"w-4 h-4\"\n                />\n                <span>{{ store.name }}</span>\n                <span class=\"text-sm text-gray-500\">{{ store.addr }}</span>\n              </div>\n            </mat-option>\n          </mat-autocomplete>\n        </mat-form-field>\n\n        <!-- 第一個按鈕：查詢 -->\n        <button\n          type=\"submit\"\n          disabled=\"true\"\n          mat-raised-button\n          color=\"primary\"\n          class=\"ml-4 px-6 py-3 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2 text-base md:text-sm\"\n        >\n          <mat-icon class=\"text-sm\">search</mat-icon>\n          關鍵字查詢施工\n        </button>\n        <!-- 第二個按鈕：使用目前位置 -->\n        <button\n          type=\"button\"\n          mat-raised-button\n          color=\"warn\"\n          (click)=\"onUseCurrentLocation()\"\n          class=\"ml-4 px-6 py-3 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2 text-base md:text-sm\"\n        >\n          <mat-icon class=\"text-sm\">location_on</mat-icon>\n          使用目前位置\n        </button>\n      </div>\n    </form>\n  </ng-container>\n</div>\n\n\n<!-- 711與全家的商品詳細頁面 -->\n\n<!-- 切分成711與全家的區塊，透過ngIf判斷顯示哪個 -->\n<div *ngIf=\"totalStoresShowList.length > 0\">\n  <div *ngFor=\"let store of totalStoresShowList\" class=\"store p-4 border border-gray-300 rounded-lg shadow-md mb-6\">\n    \n    <!-- 711區塊 -->\n    <ng-container *ngIf=\"store.label === '7-11'\">\n      <!-- 商店圖標 -->\n      <div class=\"store-icon mr-4\">\n        <h2 class=\"text-lg font-semibold flex items-center\">\n          <!-- 圖片設置寬高，並與文字在同一行顯示 -->\n          <img [src]=\"sevenElevenIconUrl\" alt=\"Store Icon\" class=\"object-cover mr-2\" />\n            7-11{{ store.StoreName }}門市\n        </h2>\n      </div>\n      <h3>距離: {{ store.distance | round:1 }} 公尺</h3>\n      <h3>是否營業: {{ store.IsOperateTime ? '是' : '否' }}</h3>\n      <h3>總剩餘數量: {{ store.RemainingQty }}</h3>\n\n      <div class=\"food-categories mt-4\">\n        <div class=\"grid grid-cols-5 gap-4\">\n          <!-- 顯示每個 FoodCategory 的名稱、圖片及其累計的子分類數量 -->\n          <div\n            *ngFor=\"let category of foodCategories | slice:0:10; let i = index\"\n            class=\"category border p-4 rounded-lg text-center cursor-pointer\"\n            (click)=\"toggleSubCategoryDetails(store, category)\"\n            [class.pointer-events-none]=\"getSubCategoryTotalQty(store, category) === 0\"\n          >\n            <!-- 圖片透明度調整 -->\n          <img [src]=\"category.ImageUrl\"\n                  alt=\"{{ category.Name }}\"\n                  class=\"w-16 h-16 mx-auto mb-2 object-cover\"\n                  [ngStyle]=\"{'opacity': getSubCategoryTotalQty(store, category) === 0 ? 0.3 : 1}\"/>\n\n            <h3 class=\"text-sm font-medium\">{{ category.Name }}</h3>\n            <h4 class=\"text-xs\">數量: {{ getSubCategoryTotalQty(store, category) }}</h4>\n          </div>\n        </div>\n        <!-- 顯示子分類詳細內容 -->\n        <div *ngIf=\"selectedCategory && selectedStore === store\" class=\"sub-category-details mt-4\">\n          <app-display\n            [store]=\"selectedStore\"\n            [category]=\"selectedCategory\">\n          </app-display>\n        </div>\n      </div>\n    </ng-container>\n\n    <!-- 全家區塊 -->\n    <ng-container *ngIf=\"store.label === '全家'\">\n      <!-- 商店圖標 -->\n      <div class=\"store-icon mr-4\">\n        <h2 class=\"text-lg font-semibold flex items-center\">\n          <!-- 圖片設置寬高，並與文字在同一行顯示 -->\n          <img [src]=\"familyMartIconUrl\" alt=\"Store Icon\" class=\"object-cover mr-2\" />\n          {{ store.name }}\n        </h2>\n      </div>\n      <h3>距離: {{ store.distance | round:1 }} 公尺</h3>\n      <!-- 全家無提供此資訊 -->\n      <!-- <h3>是否營業: {{ store.IsOperateTime ? '是' : '否' }}</h3> -->\n      <h3>總剩餘數量: {{ getFStoreQty(store) }}</h3>\n\n      <div class=\"food-categories mt-4\">\n        <div class=\"grid grid-cols-5 gap-4\">\n          <!-- 顯示每個 FoodCategory 的名稱、圖片及其累計的子分類數量 -->\n          <div\n            *ngFor=\"let category of store.info | slice:0:10; let i = index\"\n            class=\"category border p-4 rounded-lg text-center cursor-pointer\"\n            (click)=\"toggleSubCategoryDetails(store, category)\"\n            [class.pointer-events-none]=\"getFSubCategoryQty(store, category) === 0\"\n          >\n            <!-- 圖片透明度調整 -->\n          <img [src]=\"getFUrl(category)\"\n                  alt=\"{{ getFCatName(category) }}\"\n                  class=\"w-16 h-16 mx-auto mb-2 object-cover\"\n                  [ngStyle]=\"{'opacity': getFSubCategoryQty(store, category) === 0 ? 0.3 : 1}\"/>\n\n            <h3 class=\"text-sm font-medium\">{{ getFCatName(category) }}</h3>\n            <h4 class=\"text-xs\">數量: {{ getFSubCategoryQty(store, category) }}</h4>\n          </div>\n        </div>\n        <!-- 顯示子分類詳細內容 -->\n        <div *ngIf=\"selectedCategory && selectedStore === store\" class=\"sub-category-details mt-4\">\n          <app-display\n            [store]=\"selectedStore\"\n            [category]=\"selectedCategory\">\n          </app-display>\n        </div>\n      </div>\n    </ng-container>\n\n  </div>\n</div>\n\n\n\n\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { environment } from 'src/environments/environment';\nimport { RequestService } from 'src/app/services/request.service'\n\nimport { Location } from '../../model/seven-eleven.model'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FamilyMartRequestService {\n\n  constructor(\n      private requestService: RequestService\n    ) { }\n\n    baseUrl = environment.familyMartUrl.base;\n\n    getStores(): Observable<any> {\n      const url = 'assets/family_mart_stores.json'\n      return this.requestService.get(url)\n    }\n\n    getNearByStoreList(location: Location): Observable<any> {\n      const url = this.baseUrl + environment.familyMartUrl.endpoint.mapProductInfo\n      const body = {\n        \"ProjectCode\": \"202106302\",\n        \"OldPKeys\": [],\n        \"PostInfo\": \"\",\n        \"Latitude\": location.Latitude,\n        \"Longitude\": location.Longitude\n      }\n      return this.requestService.post(url, null, body)\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { environment } from 'src/environments/environment';\nimport { RequestService } from 'src/app/services/request.service'\nimport { LocationData } from '../../model/seven-eleven.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SevenElevenRequestService {\n\n  constructor(\n    private requestService: RequestService\n  ) { }\n\n  baseUrl = environment.sevenElevenUrl.base;\n\n  getAccessToken(): Observable<any> {\n    const url = this.baseUrl + environment.sevenElevenUrl.endpoint.accessToken;\n    const params = environment.sevenElevenUrl.params;\n\n    return this.requestService.post(url, params);\n  }\n\n  getStoreByAddress(keyword: string): Observable<any> {\n    const url = this.baseUrl + environment.sevenElevenUrl.endpoint.getStoreByAddress;\n    const params = {\n      'token': sessionStorage.getItem('711Token'),\n      'keyword': keyword\n    };\n    return this.requestService.post(url, params);\n  }\n\n  getNearByStoreList(location: LocationData): Observable<any> {\n    const url = this.baseUrl + environment.sevenElevenUrl.endpoint.getNearbyStoreList;\n    const params = {\n      'token': sessionStorage.getItem('711Token')\n    };\n    return this.requestService.post(url, params, location)\n  }\n\n  getFoodCategory(): Observable<any> {\n    const url = this.baseUrl + environment.sevenElevenUrl.endpoint.getList;\n    const params = {\n      'token': sessionStorage.getItem('711Token')\n    };\n    return this.requestService.post(url, params)\n  }\n\n  getItemsByStoreNo(storeNo: string): Observable<any> {\n    const url = this.baseUrl + environment.sevenElevenUrl.endpoint.getStoreDetail;\n    const params = {\n      'token': sessionStorage.getItem('711Token'),\n    };\n    const body = {\n      storeNo: storeNo,\n      CurrentLocation: {\n        Latitude: 25.0375197,\n        Longitude: 121.5636704\n      }\n    };\n    return this.requestService.post(url, params, body)\n  }\n\n  getFoodDetails(): Observable<any> {\n    const url = 'assets/seven_eleven_products.json'\n    return this.requestService.get(url)\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms'; // 用於雙向綁定 [(ngModel)]\nimport { ReactiveFormsModule } from '@angular/forms';\n\n// 导入 Angular Material 模块\nimport { MatFormFieldModule } from '@angular/material/form-field';  // 用于 form-field\nimport { MatSelectModule } from '@angular/material/select';  // 用于下拉選單\nimport { MatOptionModule } from '@angular/material/core';  // 用于 mat-option\nimport { MatInputModule } from '@angular/material/input';  // 用于 mat-label 和其他输入框功能\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete'; // 用於 mat-autocomplete\nimport { MatButtonModule } from '@angular/material/button'; // 用於 mat-button\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { RoundPipe } from '../pipes/round.pipe';\nimport { EmptyInfoPipe } from '../pipes/empty-info.pipe';\n\nimport { DisplayComponent } from './new-search/display/display.component';\nimport { NewSearchComponent } from './new-search/new-search.component';\n\n@NgModule({\n  declarations: [\n    DisplayComponent,\n    NewSearchComponent,\n    RoundPipe,\n    EmptyInfoPipe\n  ],\n  imports: [\n    CommonModule,\n    FormsModule, // 支援 [(ngModel)]\n    MatFormFieldModule,  // 新增\n    MatSelectModule,     // 新增\n    MatOptionModule,     // 新增\n    MatInputModule,       // 新增\n    MatProgressSpinnerModule,\n    ReactiveFormsModule,\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatIconModule\n  ]\n})\nexport class SearchFoodModule { }\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class GeolocationService {\n  constructor() {}\n\n  getCurrentPosition(): Promise<GeolocationPosition> {\n    return new Promise((resolve, reject) => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          (position) => resolve(position),\n          (error) => reject(error)\n        );\n      } else {\n        reject(new Error('瀏覽器不支援地理位置功能'));\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RequestService {\n\n  constructor(private http: HttpClient) {}\n\n  get(url: string, params: any = {}): Observable<any> {\n    let httpParams = new HttpParams();\n\n    // 處理 query parameters\n    for (const key in params) {\n      if (params.hasOwnProperty(key)) {\n        httpParams = httpParams.set(key, params[key]);\n      }\n    }\n\n    // 發送 GET 請求\n    return this.http.get(url, { params: httpParams });\n  }\n\n  post(url: string, params?: any, body?: any): Observable<any> {\n    let httpParams = new HttpParams();\n\n    // 直接將 params 加入 httpParams，不做物件檢查\n    if (params) {\n      for (const key in params) {\n        if (params.hasOwnProperty(key)) {\n          httpParams = httpParams.set(key, params[key]);\n        }\n      }\n    }\n\n    // 發送 POST 請求\n    return this.http.post(url, body || {}, { params: httpParams });\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  familyMartUrl: {\n    icon: 'https://www.family.com.tw/NewEnterprise/CSR/images/favicon.ico',\n    base: 'https://stamp.family.com.tw/api/maps',\n    storeQuery: 'https://family.map.com.tw/famiport/api/dropdownlist/Select_StoreName',\n    endpoint: {\n      mapClassificationInfo: '/MapClassificationInfo',\n      mapProductInfo: '/MapProductInfo'\n    }\n  },\n  sevenElevenUrl: {\n    icon: 'https://www.7-11.com.tw/favicon.ico',\n    base: 'https://lovefood.openpoint.com.tw/LoveFood/api/',\n    endpoint: {\n      accessToken: 'Auth/FrontendAuth/AccessToken',\n      getList: 'Master/FrontendItemCategory/GetList',\n      getStoreByAddress: 'Master/FrontendStore/GetStoreByAddress',\n      getNearbyStoreList: 'Search/FrontendStoreItemStock/GetNearbyStoreList',\n      getStoreDetail: 'Search/FrontendStoreItemStock/GetStoreDetail'\n    },\n    params: {\n      mid_v: 'W0_DiF4DlgU5OeQoRswrRcaaNHMWOL7K3ra3389ocJQv-rdOWS6Zu4AtGa7-7pjiccl0C5gm0u5UNONXuVUXcJCidRjIv9dsUd8PocNr5moiuJJ8hZla5iV0H3-8dZfASc7GgEm74679LYK2hBB-Sam6D0LAnYK9Lb0DZjaSctnHS5yYugtrYNdWoWk'\n    }\n  }\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}