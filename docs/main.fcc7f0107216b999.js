"use strict";(self.webpackChunkfriendly_time=self.webpackChunkfriendly_time||[]).push([[792],{9269:(vt,U,G)=>{function D(n,e){return Object.is(n,e)}let Z=null,x=!1,me=1;const ce=Symbol("SIGNAL");function te(n){const e=Z;return Z=n,e}const z={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $(n){if(x)throw new Error("");if(null===Z)return;Z.consumerOnSignalRead(n);const e=Z.nextProducerIndex++;_t(Z),e<Z.producerNode.length&&Z.producerNode[e]!==n&&Lt(Z)&&St(Z.producerNode[e],Z.producerIndexOfThis[e]),Z.producerNode[e]!==n&&(Z.producerNode[e]=n,Z.producerIndexOfThis[e]=Lt(Z)?At(n,Z,e):0),Z.producerLastReadVersion[e]=n.version}function xe(n){if((!Lt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==me)){if(!n.producerMustRecompute(n)&&!qt(n))return n.dirty=!1,void(n.lastCleanEpoch=me);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=me}}function Ve(n){if(void 0===n.liveConsumerNode)return;const e=x;x=!0;try{for(const t of n.liveConsumerNode)t.dirty||Ze(t)}finally{x=e}}function nt(){return!1!==Z?.consumerAllowSignalWrites}function Ze(n){n.dirty=!0,Ve(n),n.consumerMarkedDirty?.(n)}function et(n){return n&&(n.nextProducerIndex=0),te(n)}function tt(n,e){if(te(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Lt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)St(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qt(n){_t(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(xe(t),r!==t.version))return!0}return!1}function Jt(n){if(_t(n),Lt(n))for(let e=0;e<n.producerNode.length;e++)St(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function At(n,e,t){if(wt(n),0===n.liveConsumerNode.length&&Ue(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=At(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function St(n,e){if(wt(n),1===n.liveConsumerNode.length&&Ue(n))for(let r=0;r<n.producerNode.length;r++)St(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];_t(i),i.producerIndexOfThis[r]=e}}function Lt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _t(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function wt(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Ue(n){return void 0!==n.producerNode}const it=Symbol("UNSET"),bt=Symbol("COMPUTING"),Ht=Symbol("ERRORED"),Sn={...z,value:it,dirty:!0,error:null,equal:D,producerMustRecompute:n=>n.value===it||n.value===bt,producerRecomputeValue(n){if(n.value===bt)throw new Error("Detected cycle in computations.");const e=n.value;n.value=bt;const t=et(n);let r;try{r=n.computation()}catch(i){r=Ht,n.error=i}finally{tt(n,t)}e!==it&&e!==Ht&&r!==Ht&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let Ir=function xn(){throw new Error};function Dn(){Ir()}let fr=null;function se(n,e){nt()||Dn(),n.equal(n.value,e)||(n.value=e,function lt(n){n.version++,function he(){me++}(),Ve(n),fr?.()}(n))}const _e={...z,equal:D,value:void 0};const Mn=()=>{},Ct={...z,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Mn};function mt(n){return"function"==typeof n}function Jr(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const tn=Jr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function nn(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Dt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(mt(r))try{r()}catch(s){e=s instanceof tn?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Nr(s)}catch(o){e=e??[],o instanceof tn?e=[...e,...o.errors]:e.push(o)}}if(e)throw new tn(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Nr(e);else{if(e instanceof Dt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&nn(t,e)}remove(e){const{_finalizers:t}=this;t&&nn(t,e),e instanceof Dt&&e._removeParent(this)}}Dt.EMPTY=(()=>{const n=new Dt;return n.closed=!0,n})();const ei=Dt.EMPTY;function Ci(n){return n instanceof Dt||n&&"closed"in n&&mt(n.remove)&&mt(n.add)&&mt(n.unsubscribe)}function Nr(n){mt(n)?n():n.unsubscribe()}const ti={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fo={setTimeout(n,e,...t){const{delegate:r}=fo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=fo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function La(n){fo.setTimeout(()=>{const{onUnhandledError:e}=ti;if(!e)throw n;e(n)})}function vs(){}const Ws=Gs("C",void 0,void 0);function Gs(n,e,t){return{kind:n,value:e,error:t}}let hi=null;function fa(n){if(ti.useDeprecatedSynchronousErrorHandling){const e=!hi;if(e&&(hi={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=hi;if(hi=null,t)throw r}}else n()}class ls extends Dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ci(e)&&e.add(this)):this.destination=Is}static create(e,t,r){return new Wi(e,t,r)}next(e){this.isStopped?fi(function ha(n){return Gs("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?fi(function po(n){return Gs("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fi(Ws,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Bo=Function.prototype.bind;function bs(n,e){return Bo.call(n,e)}class Fn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Es(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Es(r)}else Es(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Es(t)}}}class Wi extends ls{constructor(e,t,r){let i;if(super(),mt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ti.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bs(e.next,s),error:e.error&&bs(e.error,s),complete:e.complete&&bs(e.complete,s)}):i=e}this.destination=new Fn(i)}}function Es(n){ti.useDeprecatedSynchronousErrorHandling?function qs(n){ti.useDeprecatedSynchronousErrorHandling&&hi&&(hi.errorThrown=!0,hi.error=n)}(n):La(n)}function fi(n,e){const{onStoppedNotification:t}=ti;t&&fo.setTimeout(()=>t(n,e))}const Is={closed:!0,next:vs,error:function yl(n){throw n},complete:vs},mo="function"==typeof Symbol&&Symbol.observable||"@@observable";function Pi(n){return n}function pa(n){return 0===n.length?Pi:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Ut=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Se(n){return n&&n instanceof ls||function qe(n){return n&&mt(n.next)&&mt(n.error)&&mt(n.complete)}(n)&&Ci(n)}(t)?t:new Wi(t,r,i);return fa(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=lc(r))((i,s)=>{const o=new Wi({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[mo](){return this}pipe(...t){return pa(t)(this)}toPromise(t){return new(t=lc(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function lc(n){var e;return null!==(e=n??ti.Promise)&&void 0!==e?e:Promise}const C=Jr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class n extends Ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new S(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new C}next(t){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ei:(this.currentObservers=null,s.push(t),new Dt(()=>{this.currentObservers=null,nn(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Ut;return t.source=this,t}}return n.create=(e,t)=>new S(e,t),n})();class S extends E{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ei}}class F extends E{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function j(n){return mt(n?.lift)}function ye(n){return e=>{if(j(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new gt(n,e,t,r,i)}class gt extends ls{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Be(n,e){return ye((t,r)=>{let i=0;t.subscribe(Fe(r,s=>{r.next(n.call(e,s,i++))}))})}const wr="https://g.co/ng/security#xss";class K extends Error{constructor(e,t){super(function Xn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function go(n){return{toString:n}.toString()}const mu="__parameters__";function _u(n,e,t){return go(()=>{const r=function Np(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(mu)?l[mu]:Object.defineProperty(l,mu,{value:[]})[mu];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const Kn=globalThis;function Ln(n){for(let e in n)if(n[e]===Ln)return e;throw Error("Could not find renamed property on target object.")}function Cr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ni(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ni).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function cc(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const _y=Ln({__forward_ref__:Ln});function Qn(n){return n.__forward_ref__=Qn,n.toString=function(){return ni(this())},n}function xt(n){return Op(n)?n():n}function Op(n){return"function"==typeof n&&n.hasOwnProperty(_y)&&n.__forward_ref__===Qn}function Oe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $t(n){return{providers:n.providers||[],imports:n.imports||[]}}function yu(n){return Lp(n,uc)||Lp(n,Qw)}function Lp(n,e){return n.hasOwnProperty(e)?n[e]:null}function vu(n){return n&&(n.hasOwnProperty(ah)||n.hasOwnProperty(vy))?n[ah]:null}const uc=Ln({\u0275prov:Ln}),ah=Ln({\u0275inj:Ln}),Qw=Ln({ngInjectableDef:Ln}),vy=Ln({ngInjectorDef:Ln});class Ee{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Oe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Uo(n){return n&&!!n.\u0275providers}const dc=Ln({\u0275cmp:Ln}),Cy=Ln({\u0275dir:Ln}),_o=Ln({\u0275pipe:Ln}),Zw=Ln({\u0275mod:Ln}),jo=Ln({\u0275fac:Ln}),ch=Ln({__NG_ELEMENT_ID__:Ln}),Up=Ln({__NG_ENV_ID__:Ln});function Ot(n){return"string"==typeof n?n:null==n?"":String(n)}function Ay(n,e){throw new K(-201,!1)}var jt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(jt||{});let Jw;function jp(){return Jw}function Or(n){const e=Jw;return Jw=n,e}function hc(n,e,t){const r=yu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&jt.Optional?null:void 0!==e?e:void Ay()}const uh={},Sy="__NG_DI_FLAG__",Hp="ngTempTokenPath",xR=/\n/gm,e0="__source";let fc;function pi(n){const e=fc;return fc=n,e}function t0(n,e=jt.Default){if(void 0===fc)throw new K(-203,!1);return null===fc?hc(n,void 0,e):fc.get(n,e&jt.Optional?null:void 0,e)}function Re(n,e=jt.Default){return(jp()||t0)(xt(n),e)}function k(n,e=jt.Default){return Re(n,dh(e))}function dh(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Gp(n){const e=[];for(let t=0;t<n.length;t++){const r=xt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new K(900,!1);let i,s=jt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Dy(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Re(i,s))}else e.push(Re(r))}return e}function hh(n,e){return n[Sy]=e,n.prototype[Sy]=e,n}function Dy(n){return n[Sy]}const ki=hh(_u("Optional"),8),pc=hh(_u("SkipSelf"),4);function Ua(n,e){return n.hasOwnProperty(jo)?n[jo]:null}function mc(n,e){n.forEach(t=>Array.isArray(t)?mc(t,e):e(t))}function Qp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ni(n,e,t){let r=vl(n,e);return r>=0?n[1|r]=t:(r=~r,function o0(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function ph(n,e){const t=vl(n,e);if(t>=0)return n[1|t]}function vl(n,e){return function Yp(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const yo={},In=[],vo=new Ee(""),l0=new Ee("",-1),mh=new Ee("");class Xp{get(e,t=uh){if(t===uh){const r=new Error(`NullInjectorError: No provider for ${ni(e)}!`);throw r.name="NullInjectorError",r}return t}}var wu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(wu||{}),bo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(bo||{}),ma=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ma||{});function DR(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function gh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Zp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function c0(n){return 3===n||4===n||6===n}function Zp(n){return 64===n.charCodeAt(0)}function _h(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||u0(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function u0(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Jp="ng-template";function RR(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==DR(e[i+1].toLowerCase(),t,0))return!0}else if(Ny(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function Ny(n){return 4===n.type&&n.value!==Jp}function Oy(n,e,t){return e===(4!==n.type||t?n.value:Jp)}function MR(n,e,t){let r=4;const i=n.attrs,s=null!==i?function Fy(n){for(let e=0;e<n.length;e++)if(c0(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Oy(n,l,t)||""===l&&1===e.length){if(Qs(r))return!1;o=!0}}else if(8&r){if(null===i||!RR(n,i,l,t)){if(Qs(r))return!1;o=!0}}else{const c=e[++a],u=PR(l,i,Ny(n),t);if(-1===u){if(Qs(r))return!1;o=!0;continue}if(""!==c){let h;if(h=u>s?"":i[u+1].toLowerCase(),2&r&&c!==h){if(Qs(r))return!1;o=!0}}}}else{if(!o&&!Qs(r)&&!Qs(l))return!1;if(o&&Qs(l))continue;o=!1,r=l|1&r}}return Qs(r)||o}function Qs(n){return!(1&n)}function PR(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function NR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function em(n,e,t=!1){for(let r=0;r<e.length;r++)if(MR(n,e[r],t))return!0;return!1}function Ly(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function d0(n,e){return n?":not("+e.trim()+")":e}function Vy(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Qs(o)&&(e+=d0(s,i),i=""),r=o,s=s||!Qs(r);t++}return""!==i&&(e+=d0(s,i)),e}function Vn(n){return go(()=>{const e=LR(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||bo.Emulated,styles:n.styles||In,_:null,schemas:n.schemas||null,tView:null,id:""};VR(t);const r=n.dependencies;return t.directiveDefs=Uy(r,!1),t.pipeDefs=Uy(r,!0),t.id=function BR(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function FR(n){return Xt(n)||mi(n)}function h0(n){return null!==n}function zt(n){return go(()=>({type:n.type,bootstrap:n.bootstrap||In,declarations:n.declarations||In,imports:n.imports||In,exports:n.exports||In,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function f0(n,e){if(null==n)return yo;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=ma.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==ma.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Je(n){return go(()=>{const e=LR(n);return VR(e),e})}function Oi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xt(n){return n[dc]||null}function mi(n){return n[Cy]||null}function Fi(n){return n[_o]||null}function qi(n,e){const t=n[Zw]||null;if(!t&&!0===e)throw new Error(`Type ${ni(n)} does not have '\u0275mod' property.`);return t}function LR(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||yo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:f0(n.inputs,e),outputs:f0(n.outputs),debugInfo:null}}function VR(n){n.features?.forEach(e=>e(n))}function Uy(n,e){if(!n)return null;const t=e?Fi:FR;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(h0)}function El(n){return{\u0275providers:n}}function UR(...n){return{\u0275providers:p0(0,n),\u0275fromNgModule:!0}}function p0(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return mc(e,o=>{const a=o;zy(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&jR(i,s),t}function jR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];m0(i,s=>{e(s,r)})}}function zy(n,e,t,r){if(!(n=xt(n)))return!1;let i=null,s=vu(n);const o=!s&&Xt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=vu(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)zy(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{mc(s.imports,u=>{zy(u,e,t,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&jR(c,e)}if(!a){const c=Ua(i)||(()=>new i);e({provide:i,useFactory:c,deps:In},i),e({provide:mh,useValue:i,multi:!0},i),e({provide:vo,useValue:()=>Re(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;m0(l,u=>{e(u,c)})}}}return i!==n&&void 0!==n.providers}function m0(n,e){for(let t of n)Uo(t)&&(t=t.\u0275providers),Array.isArray(t)?m0(t,e):e(t)}const Hy=Ln({provide:String,useValue:Ln});function ja(n){return null!==n&&"object"==typeof n&&Hy in n}function gc(n){return"function"==typeof n}const _0=new Ee(""),nm={},HR={};let yh;function Cu(){return void 0===yh&&(yh=new Xp),yh}class Li{}class za extends Li{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wy(e,o=>this.processProvider(o)),this.records.set(l0,_c(void 0,this)),i.has("environment")&&this.records.set(Li,_c(void 0,this));const s=this.records.get(_0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(mh,In,jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=te(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=pi(this),r=Or(void 0);try{return e()}finally{pi(t),Or(r)}}get(e,t=uh,r=jt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Up))return e[Up](this);r=dh(r);const s=pi(this),o=Or(void 0);try{if(!(r&jt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function qR(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ee}(e)&&yu(e);l=c&&this.injectableDefInScope(c)?_c(rm(e),nm):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&jt.Self?Cu():this.parent).get(e,t=r&jt.Optional&&t===uh?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Hp]=a[Hp]||[]).unshift(ni(e)),s)throw a;return function Ry(n,e,t,r){const i=n[Hp];throw e[e0]&&i.unshift(e[e0]),n.message=function My(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ni(e);if(Array.isArray(e))i=e.map(ni).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ni(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(xR,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Hp]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Or(o),pi(s)}}resolveInjectorInitializers(){const e=te(null),t=pi(this),r=Or(void 0);try{const s=this.get(vo,In,jt.Self);for(const o of s)o()}finally{pi(t),Or(r),te(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ni(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){let t=gc(e=xt(e))?e:xt(e&&e.provide);const r=function WR(n){return ja(n)?_c(void 0,n.useValue):_c(GR(n),nm)}(e);if(!gc(e)&&!0===e.multi){let i=this.records.get(t);i||(i=_c(void 0,nm,!0),i.factory=()=>Gp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=te(null);try{return t.value===nm&&(t.value=HR,t.value=t.factory()),"object"==typeof t.value&&t.value&&function $y(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=xt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function rm(n){const e=yu(n),t=null!==e?e.factory:Ua(n);if(null!==t)return t;if(n instanceof Ee)throw new K(204,!1);if(n instanceof Function)return function $R(n){if(n.length>0)throw new K(204,!1);const t=function TR(n){return n&&(n[uc]||n[Qw])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new K(204,!1)}function GR(n,e,t){let r;if(gc(n)){const i=xt(n);return Ua(i)||rm(i)}if(ja(n))r=()=>xt(n.useValue);else if(function g0(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Gp(n.deps||[]));else if(function tm(n){return!(!n||!n.useExisting)}(n))r=()=>Re(xt(n.useExisting));else{const i=xt(n&&(n.useClass||n.provide));if(!function rH(n){return!!n.deps}(n))return Ua(i)||rm(i);r=()=>new i(...Gp(n.deps))}return r}function _c(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Wy(n,e){for(const t of n)Array.isArray(t)?Wy(t,e):t&&Uo(t)?Wy(t.\u0275providers,e):e(t)}function Ts(n,e){n instanceof za&&n.assertNotDestroyed();const r=pi(n),i=Or(void 0);try{return e()}finally{pi(r),Or(i)}}function y0(){return void 0!==jp()||null!=function xy(){return fc}()}function Fr(n){if(!y0())throw new K(-203,!1)}const Zn=0,ze=1,ht=2,qr=3,zo=4,Vi=5,As=6,yc=7,Jn=8,ri=9,ga=10,Rt=11,Ih=12,wh=13,Su=14,pr=15,vc=16,Il=17,Ha=18,xu=19,E0=20,wl=21,Ch=22,Eo=23,ut=25,qy=1,_a=7,Ru=9,Tr=10;var om=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(om||{});function Kr(n){return Array.isArray(n)&&"object"==typeof n[qy]}function gi(n){return Array.isArray(n)&&!0===n[qy]}function Th(n){return!!(4&n.flags)}function Ec(n){return n.componentOffset>-1}function Mu(n){return!(1&~n.flags)}function Ho(n){return!!n.template}function $o(n){return!!(512&n[ht])}class x0{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function D0(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function cs(){return hm}function hm(n){return n.type.prototype.ngOnChanges&&(n.setInput=nM),tM}function tM(){const n=R0(this),e=n?.current;if(e){const t=n.previous;if(t===yo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function nM(n,e,t,r,i){const s=this.declaredInputs[r],o=R0(n)||function rM(n,e){return n[fm]=e}(n,{previous:yo,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new x0(c&&c.currentValue,t,l===yo),D0(n,e,i,t)}cs.ngInherit=!0;const fm="__ngSimpleChanges__";function R0(n){return n[fm]||null}const Io=function(n,e,t){},pm="svg";function gn(n){for(;Array.isArray(n);)n=n[Zn];return n}function xh(n,e){return gn(e[n])}function Ki(n,e){return gn(e[n.index])}function Pu(n,e){return n.data[e]}function Ic(n,e){return n[e]}function Ss(n,e){const t=e[n];return Kr(t)?t:t[Zn]}function Xy(n){return!(128&~n[ht])}function wo(n,e){return null==e?null:n[e]}function gm(n){n[Il]=0}function P0(n){1024&n[ht]||(n[ht]|=1024,Xy(n)&&wc(n))}function Dh(n){return!!(9216&n[ht]||n[Eo]?.dirty)}function Zy(n){n[ga].changeDetectionScheduler?.notify(8),64&n[ht]&&(n[ht]|=1024),Dh(n)&&wc(n)}function wc(n){n[ga].changeDetectionScheduler?.notify(0);let e=$a(n);for(;null!==e&&!(8192&e[ht])&&(e[ht]|=8192,Xy(e));)e=$a(e)}function _m(n,e){if(!(256&~n[ht]))throw new K(911,!1);null===n[wl]&&(n[wl]=[]),n[wl].push(e)}function $a(n){const e=n[qr];return gi(e)?e[qr]:e}const Mt={lFrame:ge(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let N0=!1;function O0(){return Mt.bindingsEnabled}function Cc(){return null!==Mt.skipHydrationRootTNode}function Te(){return Mt.lFrame.lView}function Kt(){return Mt.lFrame.tView}function hn(n){return Mt.lFrame.contextLView=n,n[Jn]}function fn(n){return Mt.lFrame.contextLView=null,n}function Bn(){let n=vm();for(;null!==n&&64===n.type;)n=n.parent;return n}function vm(){return Mt.lFrame.currentTNode}function Co(n,e){const t=Mt.lFrame;t.currentTNode=n,t.isParent=e}function bm(){return Mt.lFrame.isParent}function Mh(){Mt.lFrame.isParent=!1}function Ph(){return N0}function rv(n){N0=n}function Qi(){const n=Mt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Wo(){return Mt.lFrame.bindingIndex++}function Ga(n){const e=Mt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fM(n,e){const t=Mt.lFrame;t.bindingIndex=t.bindingRootIndex=n,sv(e)}function sv(n){Mt.lFrame.currentDirectiveIndex=n}function d(){return Mt.lFrame.currentQueryIndex}function f(n){Mt.lFrame.currentQueryIndex=n}function _(n){const e=n[ze];return 2===e.type?e.declTNode:1===e.type?n[Vi]:null}function w(n,e,t){if(t&jt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&jt.Host||(i=_(s),null===i||(s=s[Su],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Mt.lFrame=Y();return r.currentTNode=e,r.lView=n,!0}function R(n){const e=Y(),t=n[ze];Mt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Y(){const n=Mt.lFrame,e=null===n?null:n.child;return null===e?ge(n):e}function ge(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ke(){const n=Mt.lFrame;return Mt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const rt=ke;function dt(){const n=ke();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pn(){return Mt.lFrame.selectedIndex}function xs(n){Mt.lFrame.selectedIndex=n}function Un(){const n=Mt.lFrame;return Pu(n.tView,n.selectedIndex)}function us(){Mt.lFrame.currentNamespace=pm}function kh(){!function U0(){Mt.lFrame.currentNamespace=null}()}let av=!0;function ku(){return av}function To(n){av=n}function Im(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Nu(n,e,t){fH(n,e,3,t)}function wm(n,e,t,r){(3&n[ht])===t&&fH(n,e,t,r)}function mM(n,e){let t=n[ht];(3&t)===e&&(t&=16383,t+=1,n[ht]=t)}function fH(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Il]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Il]+=65536),(a<s||-1==s)&&(fle(n,t,e,l),n[Il]=(4294901760&n[Il])+l+2),l++}function pH(n,e){Io(4,n,e);const t=te(null);try{e.call(n)}finally{te(t),Io(5,n,e)}}function fle(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ht]>>14<n[Il]>>16&&(3&n[ht])===e&&(n[ht]+=16384,pH(a,s)):pH(a,s)}const Cm=-1;class lv{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const _M={};class Nh{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=dh(r);const i=this.injector.get(e,_M,r);return i!==_M||t===_M?i:this.parentInjector.get(e,t,r)}}function yM(n){return n!==Cm}function cv(n){return 32767&n}function uv(n,e){let t=function yle(n){return n>>16}(n),r=e;for(;t>0;)r=r[Su],t--;return r}let vM=!0;function z0(n){const e=vM;return vM=n,e}const gH=255,_H=5;let ble=0;const Cl={};function H0(n,e){const t=yH(n,e);if(-1!==t)return t;const r=e[ze];r.firstCreatePass&&(n.injectorIndex=e.length,bM(r.data,n),bM(e,null),bM(r.blueprint,null));const i=$0(n,e),s=n.injectorIndex;if(yM(i)){const o=cv(i),a=uv(i,e),l=a[ze].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function bM(n,e){n.push(0,0,0,0,0,0,0,0,e)}function yH(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function $0(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=TH(i),null===r)return Cm;if(t++,i=i[Su],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Cm}function EM(n,e,t){!function Ele(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ch)&&(r=t[ch]),null==r&&(r=t[ch]=ble++);const i=r&gH;e.data[n+(i>>_H)]|=1<<i}(n,e,t)}function vH(n,e,t){if(t&jt.Optional||void 0!==n)return n;Ay()}function bH(n,e,t,r){if(t&jt.Optional&&void 0===r&&(r=null),!(t&(jt.Self|jt.Host))){const i=n[ri],s=Or(void 0);try{return i?i.get(e,r,t&jt.Optional):hc(e,r,t&jt.Optional)}finally{Or(s)}}return vH(r,0,t)}function EH(n,e,t,r=jt.Default,i){if(null!==n){if(2048&e[ht]&&!(r&jt.Self)){const o=function Ale(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ht]&&!(512&o[ht]);){const a=IH(s,o,t,r|jt.Self,Cl);if(a!==Cl)return a;let l=s.parent;if(!l){const c=o[E0];if(c){const u=c.get(t,Cl,r);if(u!==Cl)return u}l=TH(o),o=o[Su]}s=l}return i}(n,e,t,r,Cl);if(o!==Cl)return o}const s=IH(n,e,t,r,Cl);if(s!==Cl)return s}return bH(e,t,r,i)}function IH(n,e,t,r,i){const s=function Cle(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ch)?n[ch]:void 0;return"number"==typeof e?e>=0?e&gH:Tle:e}(t);if("function"==typeof s){if(!w(e,n,r))return r&jt.Host?vH(i,0,r):bH(e,t,r,i);try{let o;if(o=s(r),null!=o||r&jt.Optional)return o;Ay()}finally{rt()}}else if("number"==typeof s){let o=null,a=yH(n,e),l=Cm,c=r&jt.Host?e[pr][Vi]:null;for((-1===a||r&jt.SkipSelf)&&(l=-1===a?$0(n,e):e[a+8],l!==Cm&&CH(r,!1)?(o=e[ze],a=cv(l),e=uv(l,e)):a=-1);-1!==a;){const u=e[ze];if(wH(s,a,u.data)){const h=wle(a,e,t,o,r,c);if(h!==Cl)return h}l=e[a+8],l!==Cm&&CH(r,e[ze].data[a+8]===c)&&wH(s,a,e)?(o=u,a=cv(l),e=uv(l,e)):a=-1}}return i}function wle(n,e,t,r,i,s){const o=e[ze],a=o.data[n+8],u=W0(a,o,t,null==r?Ec(a)&&vM:r!=o&&!!(3&a.type),i&jt.Host&&s===a);return null!==u?Oh(e,o,u,a):Cl}function W0(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,m=i?a+u:n.directiveEnd;for(let y=r?a:a+u;y<m;y++){const b=o[y];if(y<l&&t===b||y>=l&&b.type===t)return y}if(i){const y=o[l];if(y&&Ho(y)&&y.type===t)return l}return null}function Oh(n,e,t,r){let i=n[t];const s=e.data;if(function ple(n){return n instanceof lv}(i)){const o=i;o.resolving&&function Ty(n,e){throw e&&e.join(" > "),new K(-200,n)}(function En(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ot(n)}(s[t]));const a=z0(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Or(o.injectImpl):null;w(n,r,jt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function j0(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=hm(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Or(c),z0(a),o.resolving=!1,rt()}}return i}function wH(n,e,t){return!!(t[e+(n>>_H)]&1<<n)}function CH(n,e){return!(n&jt.Self||n&jt.Host&&e)}class Bi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return EH(this._tNode,this._lView,e,dh(r),t)}}function Tle(){return new Bi(Bn(),Te())}function Qr(n){return go(()=>{const e=n.prototype.constructor,t=e[jo]||IM(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[jo]||IM(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function IM(n){return Op(n)?()=>{const e=IM(xt(n));return e&&e()}:Ua(n)}function TH(n){const e=n[ze],t=e.type;return 2===t?e.declTNode:1===t?n[Vi]:null}function RH(n,e=null,t=null,r){const i=MH(n,e,t,r);return i.resolveInjectorInitializers(),i}function MH(n,e=null,t=null,r,i=new Set){const s=[t||In,UR(n)];return r=r||("object"==typeof n?void 0:ni(n)),new za(s,e||Cu(),r||null,i)}class Rn{static{this.THROW_IF_NOT_FOUND=uh}static{this.NULL=new Xp}static create(e,t){if(Array.isArray(e))return RH({name:""},t,e,"");{const r=e.name??"";return RH({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Oe({token:Rn,providedIn:"any",factory:()=>Re(l0)})}static{this.__NG_ELEMENT_ID__=-1}}class Nle{constructor(e){this.attributeName=e,this.__NG_ELEMENT_ID__=()=>function dv(n){return function Ile(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(c0(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Bn(),n)}(this.attributeName)}toString(){return`HostAttributeToken ${this.attributeName}`}}new Ee("").__NG_ELEMENT_ID__=n=>{const e=Bn();if(null===e)throw new K(204,!1);if(2&e.type)return e.value;if(n&jt.Optional)return null;throw new K(204,!1)};function CM(n){return n.ngOriginalError}const kH=!0;let hv=(()=>{class n{static{this.__NG_ELEMENT_ID__=Lle}static{this.__NG_ENV_ID__=t=>t}}return n})();class Fle extends hv{constructor(e){super(),this._lView=e}onDestroy(e){return _m(this._lView,e),()=>function Jy(n,e){if(null===n[wl])return;const t=n[wl].indexOf(e);-1!==t&&n[wl].splice(t,1)}(this._lView,e)}}function Lle(){return new Fle(Te())}let Tc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>new n})}}return n})();const pn=class Vle extends E{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,y0()&&(this.destroyRef=k(hv,{optional:!0})??void 0,this.pendingTasks=k(Tc,{optional:!0})??void 0)}emit(e){const t=te(null);try{super.next(e)}finally{te(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Dt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function q0(...n){}function NH(n){let e,t;function r(){n=q0;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function OH(n){return queueMicrotask(()=>n()),()=>{n=q0}}const TM="isAngularZone",K0=TM+"_ID";let Ble=0;class yt{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pn(!1),this.onMicrotaskEmpty=new pn(!1),this.onStable=new pn(!1),this.onError=new pn(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=kH}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function zle(n){const e=()=>{!function jle(n){function e(){NH(()=>{n.callbackScheduled=!1,SM(n),n.isCheckStableRunning=!0,AM(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),SM(n))}(n)},t=Ble++;n._inner=n._inner.fork({name:"angular",properties:{[TM]:!0,[K0]:t,[K0+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(function Hle(n){return VH(n,"__ignore_ng_zone__")}(l))return r.invokeTask(s,o,a,l);try{return FH(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),LH(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return FH(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function $le(n){return VH(n,"__scheduler_tick__")}(l)&&e(),LH(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,SM(n),AM(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(TM)}static assertInAngularZone(){if(!yt.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(yt.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ule,q0,q0);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Ule={};function AM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function SM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function FH(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function LH(n){n._nesting--,AM(n)}class xM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pn,this.onMicrotaskEmpty=new pn,this.onStable=new pn,this.onError=new pn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function VH(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class Go{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&CM(e);for(;t&&CM(t);)t=CM(t);return t||null}}const Gle=new Ee("",{providedIn:"root",factory:()=>{const n=k(yt),e=k(Go);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function qle(){return Sm(Bn(),Te())}function Sm(n,e){return new jn(Ki(n,e))}let jn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=qle}}return n})();function UH(n){return n instanceof jn?n.nativeElement:n}function Kle(){return this._results[Symbol.iterator]()}class Fh{get changes(){return this._changes??=new pn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Fh.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Kle)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function Gi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Kp(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function pv(n){return!(128&~n.flags)}const RM=new Map;let Yle=0;function MM(n){RM.delete(n[xu])}const Q0="__ngContext__";function Ds(n,e){Kr(e)?(n[Q0]=e[xu],function Zle(n){RM.set(n[xu],n)}(e)):n[Q0]=e}function YH(n){return ZH(n[Ih])}function XH(n){return ZH(n[zo])}function ZH(n){for(;null!==n&&!gi(n);)n=n[zo];return n}let kM;function Ou(){if(void 0!==kM)return kM;if(typeof document<"u")return document;throw new K(210,!1)}const Lh=new Ee("",{providedIn:"root",factory:()=>mce}),mce="ng",o$=new Ee(""),Ys=new Ee("",{providedIn:"platform",factory:()=>"unknown"}),Tl=new Ee(""),NM=new Ee("",{providedIn:"root",factory:()=>Ou().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let a$=()=>null;function jM(n,e,t=!1){return a$(n,e,t)}const m$=new Ee("",{providedIn:"root",factory:()=>!1});let rC,iC;function Mm(n){return function GM(){if(void 0===rC&&(rC=null,Kn.trustedTypes))try{rC=Kn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rC}()?.createHTML(n)||n}function y$(n){return function qM(){if(void 0===iC&&(iC=null,Kn.trustedTypes))try{iC=Kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return iC}()?.createHTML(n)||n}class Bh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wr})`}}class Dce extends Bh{getTypeName(){return"HTML"}}class Rce extends Bh{getTypeName(){return"Style"}}class Mce extends Bh{getTypeName(){return"Script"}}class Pce extends Bh{getTypeName(){return"URL"}}class kce extends Bh{getTypeName(){return"ResourceURL"}}function qo(n){return n instanceof Bh?n.changingThisBreaksApplicationSecurity:n}function Al(n,e){const t=function Nce(n){return n instanceof Bh&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wr})`)}return t===e}class Uce{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Mm(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}}class jce{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Mm(e),t}}const Hce=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sC(n){return(n=String(n)).match(Hce)?n:"unsafe:"+n}function Ac(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ev(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const I$=Ac("area,br,col,hr,img,wbr"),w$=Ac("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C$=Ac("rp,rt"),KM=Ev(I$,Ev(w$,Ac("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ev(C$,Ac("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ev(C$,w$)),QM=Ac("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),T$=Ev(QM,Ac("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ac("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$ce=Ac("script,style,template");class Wce{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=Kce(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=qce(t);if(s){t=s;break}t=i.pop()}return this.buf.join("")}startElement(e){const t=A$(e).toLowerCase();if(!KM.hasOwnProperty(t))return this.sanitizedSomething=!0,!$ce.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!T$.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;QM[a]&&(l=sC(l)),this.buf.push(" ",o,'="',x$(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=A$(e).toLowerCase();KM.hasOwnProperty(t)&&!I$.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(x$(e))}}function qce(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw S$(e);return e}function Kce(n){const e=n.firstChild;if(e&&function Gce(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw S$(e);return e}function A$(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function S$(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const Qce=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yce=/([^\#-~ |!])/g;function x$(n){return n.replace(/&/g,"&amp;").replace(Qce,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Yce,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let oC;function D$(n,e){let t=null;try{oC=oC||function E$(n){const e=new jce(n);return function zce(){try{return!!(new window.DOMParser).parseFromString(Mm(""),"text/html")}catch{return!1}}()?new Uce(e):e}(n);let r=e?String(e):"";t=oC.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=oC.getInertBodyElement(r)}while(r!==s);return Mm((new Wce).sanitizeChildren(YM(t)||t))}finally{if(t){const r=YM(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function YM(n){return"content"in n&&function Xce(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ds=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ds||{});function R$(n){const e=Iv();return e?y$(e.sanitize(ds.HTML,n)||""):Al(n,"HTML")?y$(qo(n)):D$(Ou(),Ot(n))}function ii(n){const e=Iv();return e?e.sanitize(ds.URL,n)||"":Al(n,"URL")?qo(n):sC(Ot(n))}function Iv(){const n=Te();return n&&n[ga].sanitizer}const rue=/^>|^->|<!--|-->|--!>|<!-$/g,iue=/(<|>)/g,sue="\u200b$1\u200b";function Ko(n){return n instanceof Function?n():n}function Qo(n){return"browser"===(n??k(Rn)).get(Ys)}var Fu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Fu||{});let JM;function eP(n,e){return JM(n,e)}function km(n,e,t,r,i){if(null!=r){let s,o=!1;gi(r)?s=r:Kr(r)&&(o=!0,r=r[Zn]);const a=gn(r);0===n&&null!==t?null==i?W$(e,t,a):Uh(e,t,a,i||null,!0):1===n&&null!==t?Uh(e,t,a,i||null,!0):2===n?function Cv(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Tue(n,e,t,r,i){const s=t[_a];s!==gn(t)&&km(e,n,r,s,i);for(let a=Tr;a<t.length;a++){const l=t[a];hC(l[ze],l,n,e,r,s)}}(e,n,s,t,i)}}function nP(n,e){return n.createComment(function k$(n){return n.replace(rue,e=>e.replace(iue,sue))}(e))}function cC(n,e,t){return n.createElement(e,t)}function z$(n,e){e[ga].changeDetectionScheduler?.notify(9),hC(n,e,e[Rt],2,null,null)}function H$(n,e){const t=n[Ru],r=e[qr];(Kr(r)||e[pr]!==r[qr][pr])&&(n[ht]|=om.HasTransplantedViews),null===t?n[Ru]=[e]:t.push(e)}function rP(n,e){const t=n[Ru],r=t.indexOf(e);t.splice(r,1)}function wv(n,e){if(n.length<=Tr)return;const t=Tr+e,r=n[t];if(r){const i=r[vc];null!==i&&i!==n&&rP(i,r),e>0&&(n[t-1][zo]=r[zo]);const s=fh(n,Tr+e);!function _ue(n,e){z$(n,e),e[Zn]=null,e[Vi]=null}(r[ze],r);const o=s[Ha];null!==o&&o.detachView(s[ze]),r[qr]=null,r[zo]=null,r[ht]&=-129}return r}function uC(n,e){if(!(256&e[ht])){const t=e[Rt];t.destroyNode&&hC(n,e,t,3,null,null),function vue(n){let e=n[Ih];if(!e)return iP(n[ze],n);for(;e;){let t=null;if(Kr(e))t=e[Ih];else{const r=e[Tr];r&&(t=r)}if(!t){for(;e&&!e[zo]&&e!==n;)Kr(e)&&iP(e[ze],e),e=e[qr];null===e&&(e=n),Kr(e)&&iP(e[ze],e),t=e&&e[zo]}e=t}}(e)}}function iP(n,e){if(256&e[ht])return;const t=te(null);try{e[ht]&=-129,e[ht]|=256,e[Eo]&&Jt(e[Eo]),function Iue(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof lv)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Io(4,a,l);try{l.call(a)}finally{Io(5,a,l)}}else{Io(4,i,s);try{s.call(i)}finally{Io(5,i,s)}}}}}(n,e),function Eue(n,e){const t=n.cleanup,r=e[yc];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[yc]=null);const i=e[wl];if(null!==i){e[wl]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[ze].type&&e[Rt].destroy();const r=e[vc];if(null!==r&&gi(e[qr])){r!==e[qr]&&rP(r,e);const i=e[Ha];null!==i&&i.detachView(n)}MM(e)}finally{te(t)}}function sP(n,e,t){return function $$(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[Zn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===bo.None||s===bo.Emulated)return null}return Ki(r,t)}}(n,e.parent,t)}function Uh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function W$(n,e,t){n.appendChild(e,t)}function G$(n,e,t,r,i){null!==r?Uh(n,e,t,r,i):W$(n,e,t)}function oP(n,e){return n.parentNode(e)}function q$(n,e,t){return Q$(n,e,t)}let aP,Q$=function K$(n,e,t){return 40&n.type?Ki(n,t):null};function dC(n,e,t,r){const i=sP(n,r,e),s=e[Rt],a=q$(r.parent||e[Vi],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)G$(s,i,t[l],a,!1);else G$(s,i,t,a,!1);void 0!==aP&&aP(s,r,e,t,i)}function jh(n,e){if(null!==e){const t=e.type;if(3&t)return Ki(e,n);if(4&t)return lP(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return jh(n,r);{const i=n[e.index];return gi(i)?lP(-1,i):gn(i)}}if(128&t)return jh(n,e.next);if(32&t)return eP(e,n)()||gn(n[e.index]);{const r=X$(n,e);return null!==r?Array.isArray(r)?r[0]:jh($a(n[pr]),r):jh(n,e.next)}}return null}function X$(n,e){return null!==e?n[pr][Vi].projection[e.projection]:null}function lP(n,e){const t=Tr+n+1;if(t<e.length){const r=e[t],i=r[ze].firstChild;if(null!==i)return jh(r,i)}return e[_a]}function cP(n,e,t,r,i,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Ds(gn(a),r),t.flags|=2),32&~t.flags)if(8&l)cP(n,e,t.child,r,i,s,!1),km(e,n,i,a,s);else if(32&l){const c=eP(t,r);let u;for(;u=c();)km(e,n,i,u,s);km(e,n,i,a,s)}else 16&l?J$(n,e,r,t,i,s):km(e,n,i,a,s);t=o?t.projectionNext:t.next}}function hC(n,e,t,r,i,s){cP(t,r,n.firstChild,e,i,s,!1)}function J$(n,e,t,r,i,s){const o=t[pr],l=o[Vi].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)km(e,n,i,l[c],s);else{let c=l;const u=o[qr];pv(r)&&(c.flags|=128),cP(n,e,c,u,i,s,!0)}}function e3(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function t3(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&gh(n,e,r),null!==i&&e3(n,e,i),null!==s&&function Sue(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Vt={};function de(n=1){n3(Kt(),Te(),Pn()+n,!1)}function n3(n,e,t,r){if(!r)if(3&~e[ht]){const s=n.preOrderHooks;null!==s&&wm(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Nu(e,s,t)}xs(t)}function De(n,e=jt.Default){const t=Te();return null===t?Re(n,e):EH(Bn(),t,xt(n),e)}function i3(n,e,t,r,i,s){const o=te(null);try{let a=null;i&ma.SignalBased&&(a=e[r][ce]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&ma.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):D0(e,a,r,s)}finally{te(o)}}function fC(n,e,t,r,i,s,o,a,l,c,u){const h=e.blueprint.slice();return h[Zn]=i,h[ht]=204|r,(null!==c||n&&2048&n[ht])&&(h[ht]|=2048),gm(h),h[qr]=h[Su]=n,h[Jn]=t,h[ga]=o||n&&n[ga],h[Rt]=a||n&&n[Rt],h[ri]=l||n&&n[ri]||null,h[Vi]=s,h[xu]=function Xle(){return Yle++}(),h[As]=u,h[E0]=c,h[pr]=2==e.type?n[pr]:h,h}function zh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function uP(n,e,t,r,i){const s=vm(),o=bm(),l=n.data[e]=function Oue(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Cc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function hM(){return Mt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Rh(){const n=Mt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Co(s,!0),s}function Tv(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function s3(n,e,t,r,i){const s=Pn(),o=2&r;try{xs(-1),o&&e.length>ut&&n3(n,e,ut,!1),Io(o?2:0,i),t(r,i)}finally{xs(s),Io(o?3:1,i)}}function dP(n,e,t){if(Th(e)){const r=te(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{te(r)}}}function hP(n,e,t){O0()&&(function zue(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ec(t)&&function Que(n,e,t){const r=Ki(e,n),i=o3(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=pC(n,fC(n,i,null,o,r,e,null,n[ga].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||H0(t,e),Ds(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Oh(e,n,a,t);Ds(c,e),null!==o&&Yue(0,a-i,c,l,0,o),Ho(l)&&(Ss(t.index,e)[Jn]=Oh(e,n,a,t))}}(n,e,t,Ki(t,e)),!(64&~t.flags)&&d3(n,e,t))}function fP(n,e,t=Ki){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function o3(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=pP(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function pP(n,e,t,r,i,s,o,a,l,c,u){const h=ut+r,m=h+i,y=function Due(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Vt);return t}(h,m),b="function"==typeof c?c():c;return y[ze]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:u}}let a3=()=>null;function l3(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,l=ma.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==i){if(!i.hasOwnProperty(s))continue;c=i[s]}0===n?c3(r,t,c,a,l):c3(r,t,c,a)}return r}function c3(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function So(n,e,t,r,i,s,o,a){const l=Ki(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(vP(n,t,u,r,i),Ec(e)&&function Vue(n,e){const t=Ss(e,n);16&t[ht]||(t[ht]|=64)}(t,e.index)):3&e.type&&(r=function Lue(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function mP(n,e,t,r){if(O0()){const i=null===r?null:{"":-1},s=function $ue(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(em(e,o.selectors,!1))if(r||(r=[]),Ho(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),gP(n,e,a.length)}else r.unshift(o),gP(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&u3(n,e,t,o,i,a),i&&function Wue(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new K(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=_h(t.mergedAttrs,t.attrs)}function u3(n,e,t,r,i,s){for(let c=0;c<r.length;c++)EM(H0(t,e),n,r[c].type);!function que(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Tv(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=_h(t.mergedAttrs,u.hostAttrs),Kue(n,t,e,l,u),Gue(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function Fue(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const h=s[u],m=t?t.get(h):null,b=m?m.outputs:null;l=l3(0,h.inputs,u,l,m?m.inputs:null),c=l3(1,h.outputs,u,c,b);const T=null===l||null===o||Ny(e)?null:Xue(l,u,o);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function d3(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function pM(){return Mt.lFrame.currentDirectiveIndex}();try{xs(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];sv(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Hue(l,c)}}finally{xs(-1),sv(o)}}function Hue(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function gP(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Gue(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ho(e)&&(t[""]=n)}}function Kue(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ua(i.type)),o=new lv(s,Ho(i),De);n.blueprint[r]=o,t[r]=o,function Uue(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function jue(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Tv(n,t,i.hostVars,Vt),i)}function Sl(n,e,t,r,i,s){const o=Ki(n,e);!function _P(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Ot(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Rt],o,s,n.value,t,r,i)}function Yue(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)i3(r,t,o[a++],o[a++],o[a++],o[a++])}function Xue(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function h3(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function f3(n,e){const t=n.contentQueries;if(null!==t){const r=te(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];f(t[i]),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function pC(n,e){return n[Ih]?n[wh][zo]=e:n[Ih]=e,n[wh]=e,e}function yP(n,e,t){f(0);const r=te(null);try{e(n,t)}finally{te(r)}}function p3(n){return n[yc]??=[]}function m3(n){return n.cleanup??=[]}function mC(n,e){const t=n[ri],r=t?t.get(Go,null):null;r&&r.handleError(e)}function vP(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=t[s++];i3(n.data[o],e[o],r,a,l,i)}}function Zue(n,e){const t=Ss(e,n),r=t[ze];!function Jue(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Zn];null!==i&&null===t[As]&&(t[As]=jM(i,t[ri])),bP(r,t,t[Jn])}function bP(n,e,t){R(e);try{const r=n.viewQuery;null!==r&&yP(1,r,t);const i=n.template;null!==i&&s3(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ha]?.finishViewCreation(n),n.staticContentQueries&&f3(n,e),n.staticViewQueries&&yP(2,n.viewQuery,t);const s=n.components;null!==s&&function ede(n,e){for(let t=0;t<e.length;t++)Zue(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ht]&=-5,dt()}}function Nm(n,e,t,r){const i=te(null);try{const s=e.tView,l=fC(n,s,t,4096&n[ht]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[vc]=n[e.index];const u=n[Ha];return null!==u&&(l[Ha]=u.createEmbeddedView(s)),bP(s,l,t),l}finally{te(i)}}function Hh(n,e){return!e||null===e.firstChild||pv(n)}function Om(n,e,t,r=!0){const i=e[ze];if(function bue(n,e,t,r){const i=Tr+r,s=t.length;r>0&&(t[i-1][zo]=e),r<s-Tr?(e[zo]=t[i],Qp(t,Tr+r,e)):(t.push(e),e[zo]=null),e[qr]=t;const o=e[vc];null!==o&&t!==o&&H$(o,e);const a=e[Ha];null!==a&&a.insertView(n),Zy(e),e[ht]|=128}(i,e,n,t),r){const o=lP(t,n),a=e[Rt],l=oP(a,n[_a]);null!==l&&function yue(n,e,t,r,i,s){r[Zn]=i,r[Vi]=e,hC(n,r,t,1,i,s)}(i,n[Vi],a,e,l,o)}const s=e[As];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function Av(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&r.push(gn(s)),gi(s)&&y3(s,r);const o=t.type;if(8&o)Av(n,e,t.child,r);else if(32&o){const a=eP(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=X$(e,t);if(Array.isArray(a))r.push(...a);else{const l=$a(e[pr]);Av(l[ze],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function y3(n,e){for(let t=Tr;t<n.length;t++){const r=n[t],i=r[ze].firstChild;null!==i&&Av(r[ze],r,i,e)}n[_a]!==n[Zn]&&e.push(n[_a])}let v3=[];const ide={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wc(n.lView)},consumerOnSignalRead(){this.lView[Eo]=this}},ode={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=$a(n.lView);for(;e&&!b3(e[ze]);)e=$a(e);e&&P0(e)},consumerOnSignalRead(){this.lView[Eo]=this}};function b3(n){return 2!==n.type}const ade=100;function gC(n,e=!0,t=0){const r=n[ga],i=r.rendererFactory;i.begin?.();try{!function lde(n,e){const t=Ph();try{rv(!0),IP(n,e);let r=0;for(;Dh(n);){if(r===ade)throw new K(103,!1);r++,IP(n,1)}}finally{rv(t)}}(n,t)}catch(o){throw e&&mC(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function cde(n,e,t,r){const i=e[ht];if(!(256&~i))return;e[ga].inlineEffectRunner?.flush(),R(e);let a=!0,l=null,c=null;b3(n)?(c=function tde(n){return n[Eo]??function nde(n){const e=v3.pop()??Object.create(ide);return e.lView=n,e}(n)}(e),l=et(c)):null===function Ae(){return Z}()?(a=!1,c=function sde(n){const e=n[Eo]??Object.create(ode);return e.lView=n,e}(e),l=et(c)):e[Eo]&&(Jt(e[Eo]),e[Eo]=null);try{gm(e),function B0(n){return Mt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&s3(n,e,t,2,r);const u=!(3&~i);if(u){const y=n.preOrderCheckHooks;null!==y&&Nu(e,y,null)}else{const y=n.preOrderHooks;null!==y&&wm(e,y,0,null),mM(e,0)}if(function ude(n){for(let e=YH(n);null!==e;e=XH(e)){if(!(e[ht]&om.HasTransplantedViews))continue;const t=e[Ru];for(let r=0;r<t.length;r++)P0(t[r])}}(e),I3(e,0),null!==n.contentQueries&&f3(n,e),u){const y=n.contentCheckHooks;null!==y&&Nu(e,y)}else{const y=n.contentHooks;null!==y&&wm(e,y,1),mM(e,1)}!function xue(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)xs(~i);else{const s=i,o=t[++r],a=t[++r];fM(o,s),a(2,e[s])}}}finally{xs(-1)}}(n,e);const h=n.components;null!==h&&C3(e,h,0);const m=n.viewQuery;if(null!==m&&yP(2,m,r),u){const y=n.viewCheckHooks;null!==y&&Nu(e,y)}else{const y=n.viewHooks;null!==y&&wm(e,y,2),mM(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ch]){for(const y of e[Ch])y();e[Ch]=null}e[ht]&=-73}catch(u){throw wc(e),u}finally{null!==c&&(tt(c,l),a&&function rde(n){n.lView[Eo]!==n&&(n.lView=null,v3.push(n))}(c)),dt()}}function I3(n,e){for(let t=YH(n);null!==t;t=XH(t))for(let r=Tr;r<t.length;r++)w3(t[r],e)}function dde(n,e,t){w3(Ss(e,n),t)}function w3(n,e){Xy(n)&&IP(n,e)}function IP(n,e){const r=n[ze],i=n[ht],s=n[Eo];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!qt(s)),o||=!1,s&&(s.dirty=!1),n[ht]&=-9217,o)cde(r,n,r.template,n[Jn]);else if(8192&i){I3(n,1);const a=r.components;null!==a&&C3(n,a,1)}}function C3(n,e,t){for(let r=0;r<e.length;r++)dde(n,e[r],t)}function Sv(n,e){const t=Ph()?64:1088;for(n[ga].changeDetectionScheduler?.notify(e);n;){n[ht]|=t;const r=$a(n);if($o(n)&&!r)return n;n=r}return null}class xv{get rootNodes(){const e=this._lView,t=e[ze];return Av(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jn]}set context(e){this._lView[Jn]=e}get destroyed(){return!(256&~this._lView[ht])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[qr];if(gi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(wv(e,r),fh(t,r))}this._attachedToViewContainer=!1}uC(this._lView[ze],this._lView)}onDestroy(e){_m(this._lView,e)}markForCheck(){Sv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ht]&=-129}reattach(){Zy(this._lView),this._lView[ht]|=128}detectChanges(){this._lView[ht]|=1024,gC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=$o(this._lView),t=this._lView[vc];null!==t&&!e&&rP(t,this._lView),z$(this._lView[ze],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;const t=$o(this._lView),r=this._lView[vc];null!==r&&!t&&H$(r,this._lView),Zy(this._lView)}}let ya=(()=>{class n{static{this.__NG_ELEMENT_ID__=pde}}return n})();const hde=ya,fde=class extends hde{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Nm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new xv(i)}};function pde(){return _C(Bn(),Te())}function _C(n,e){return 4&n.type?new fde(e,n,Sm(n,e)):null}let W3=()=>null;function Wh(n,e){return W3(n,e)}class Lm{}const Fv=new Ee("",{providedIn:"root",factory:()=>!1}),G3=new Ee(""),kP=new Ee("");class ohe{}class q3{}class lhe{resolveComponentFactory(e){throw function ahe(n){const e=Error(`No component factory found for ${ni(n)}.`);return e.ngComponent=n,e}(e)}}class wC{static{this.NULL=new lhe}}class Gh{}let qa=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function che(){const n=Te(),t=Ss(Bn().index,n);return(Kr(t)?t:n)[Rt]}()}}return n})(),uhe=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>null})}}return n})();function TC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=cc(i,a):2==s&&(r=cc(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class X3 extends wC{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Xt(e);return new Bv(t,this.ngModule)}}function Z3(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;t.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:ma.None)&ma.SignalBased)}:{propName:o,templateName:r})}return t}class Bv extends q3{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=Z3(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Z3(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function OR(n){return n.map(Vy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=te(null);try{let o=(i=i||this.ngModule)instanceof Li?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Nh(e,o):e,l=a.get(Gh,null);if(null===l)throw new K(407,!1);const h={rendererFactory:l,sanitizer:a.get(uhe,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(Lm,null)},m=l.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?function Rue(n,e,t,r){const s=r.get(m$,!1)||t===bo.ShadowDom,o=n.selectRootElement(e,s);return function Mue(n){a3(n)}(o),o}(m,r,this.componentDef.encapsulation,a):cC(m,y,function fhe(n){const e=n.toLowerCase();return"svg"===e?pm:"math"===e?"math":null}(y));let T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let M=null;null!==b&&(M=jM(b,a,!0));const B=pP(0,null,null,1,0,null,null,null,null,null,null),V=fC(null,B,null,T,null,null,h,m,a,null,M);R(V);let Q,we,je=null;try{const He=this.componentDef;let H,L=null;He.findHostDirectiveDefs?(H=[],L=new Map,He.findHostDirectiveDefs(He,H,L),H.push(He)):H=[He];const W=function mhe(n,e){const t=n[ze],r=ut;return n[r]=e,zh(t,r,2,"#host",null)}(V,b);je=function ghe(n,e,t,r,i,s,o){const a=i[ze];!function _he(n,e,t,r){for(const i of n)e.mergedAttrs=_h(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(TC(e,e.mergedAttrs,!0),null!==t&&t3(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=jM(e,i[ri]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const h=fC(i,o3(t),null,u,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&gP(a,n,r.length-1),pC(i,h),i[n.index]=h}(W,b,He,H,V,h,m),we=Pu(B,ut),b&&function vhe(n,e,t,r){if(r)gh(n,t,["ng-version","18.2.13"]);else{const{attrs:i,classes:s}=function By(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Qs(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&gh(n,t,i),s&&s.length>0&&e3(n,t,s.join(" "))}}(m,He,b,r),void 0!==t&&function bhe(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(we,this.ngContentSelectors,t),Q=function yhe(n,e,t,r,i,s){const o=Bn(),a=i[ze],l=Ki(o,i);u3(a,i,o,t,null,r);for(let u=0;u<t.length;u++)Ds(Oh(i,a,o.directiveStart+u,o),i);d3(a,i,o),l&&Ds(l,i);const c=Oh(i,a,o.directiveStart+o.componentOffset,o);if(n[Jn]=i[Jn]=c,null!==s)for(const u of s)u(c,e);return dP(a,o,i),c}(je,He,H,L,V,[Ehe]),bP(B,V,null)}catch(He){throw null!==je&&MM(je),MM(V),He}finally{dt()}return new phe(this.componentType,Q,Sm(we,V),V,we)}finally{te(s)}}}class phe extends ohe{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new xv(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;vP(s[ze],s,i,e,t),this.previousInputValues.set(e,t),Sv(Ss(this._tNode.index,s),1)}}get injector(){return new Bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Ehe(){const n=Bn();Im(Te()[ze],n)}let xo=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ihe}}return n})();function Ihe(){return tW(Bn(),Te())}const whe=xo,J3=class extends whe{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Sm(this._hostTNode,this._hostLView)}get injector(){return new Bi(this._hostTNode,this._hostLView)}get parentInjector(){const e=$0(this._hostTNode,this._hostLView);if(yM(e)){const t=uv(e,this._hostLView),r=cv(e);return new Bi(t[ze].data[r+8],t)}return new Bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=eW(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Tr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=Wh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Hh(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function Au(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const l=o?e:new Bv(Xt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const T=(o?c:this.parentInjector).get(Li,null);T&&(s=T)}const u=Xt(l.componentType??{}),h=Wh(this._lContainer,u?.id??null),y=l.create(c,i,h?.firstChild??null,s);return this.insertImpl(y.hostView,a,Hh(this._hostTNode,h)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function sM(n){return gi(n[qr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[qr],c=new J3(l,l[Vi],l[qr]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return Om(o,i,s,r),e.attachToViewContainerRef(),Qp(FP(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=eW(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=wv(this._lContainer,t);r&&(fh(FP(this._lContainer),t),uC(r[ze],r))}detach(e){const t=this._adjustIndex(e,-1),r=wv(this._lContainer,t);return r&&null!=fh(FP(this._lContainer),t)?new xv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function eW(n){return n[8]}function FP(n){return n[8]||(n[8]=[])}function tW(n,e){let t;const r=e[n.index];return gi(r)?t=r:(t=h3(r,e,null,n),e[n.index]=t,pC(e,t)),nW(t,e,n,r),new J3(t,n,e)}let nW=function iW(n,e,t,r){if(n[_a])return;let i;i=8&t.type?gn(r):function Che(n,e){const t=n[Rt],r=t.createComment(""),i=Ki(e,n);return Uh(t,oP(t,i),r,function wue(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[_a]=i},LP=()=>!1;class VP{constructor(e){this.queryList=e,this.matches=null}clone(){return new VP(this.queryList)}setDirty(){this.queryList.setDirty()}}class BP{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new BP(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==$P(e,t).matches&&this.queries[t].setDirty()}}class sW{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function Phe(n){return n.split(",").map(e=>e.trim())}(e):e}}class UP{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new UP(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class jP{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new jP(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,xhe(t,s)),this.matchTNodeWithReadOption(e,t,W0(t,e,s,!1,!1))}else r===ya?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,W0(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===jn||i===xo||i===ya&&4&t.type)this.addMatch(t.index,-2);else{const s=W0(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function xhe(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Rhe(n,e,t,r){return-1===t?function Dhe(n,e){return 11&n.type?Sm(n,e):4&n.type?_C(n,e):null}(e,n):-2===t?function Mhe(n,e,t){return t===jn?Sm(e,n):t===ya?_C(e,n):t===xo?tW(e,n):void 0}(n,e,r):Oh(n,n[ze],t,e)}function oW(n,e,t,r){const i=e[Ha].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:Rhe(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function zP(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=oW(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let h=Tr;h<u.length;h++){const m=u[h];m[vc]===m[qr]&&zP(m[ze],m,c,r)}if(null!==u[Ru]){const h=u[Ru];for(let m=0;m<h.length;m++){const y=h[m];zP(y[ze],y,c,r)}}}}}return r}function aW(n,e,t){const r=new Fh(!(4&~t));return function Nue(n,e,t,r){const i=p3(e);i.push(t),n.firstCreatePass&&m3(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[Ha]??=new BP).queries.push(new VP(r))-1}function uW(n,e,t){null===n.queries&&(n.queries=new UP),n.queries.track(new jP(e,t))}function $P(n,e){return n.queries.getByIndex(e)}function dW(n,e){const t=n[ze],r=$P(t,e);return r.crossesNgTemplate?zP(t,n,e,[]):oW(t,n,r,e)}const hW=new Set;function Xs(n){hW.has(n)||(hW.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Uv(n){return"function"==typeof n&&void 0!==n[ce]}function qh(n,e){Xs("NgSignals");const t=function Wr(n){const e=Object.create(_e);e.value=n;const t=()=>($(e),e.value);return t[ce]=e,t}(n),r=t[ce];return e?.equal&&(r.equal=e.equal),t.set=i=>se(r,i),t.update=i=>function ae(n,e){nt()||Dn(),se(n,e(n.value))}(r,i),t.asReadonly=fW.bind(t),t}function fW(){const n=this[ce];if(void 0===n.readonlyFn){const e=()=>this();e[ce]=n,n.readonlyFn=e}return n.readonlyFn}function pW(n){return Uv(n)&&"function"==typeof n.set}function wn(n){let e=function TW(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Ho(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=SC(n.inputs),o.inputTransforms=SC(n.inputTransforms),o.declaredInputs=SC(n.declaredInputs),o.outputs=SC(n.outputs);const a=i.hostBindings;a&&qhe(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&Whe(n,l),c&&Ghe(n,c),Hhe(n,i),Cr(n.outputs,i.outputs),Ho(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===wn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function $he(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_h(i.hostAttrs,t=_h(t,i.hostAttrs))}}(r)}function Hhe(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function SC(n){return n===yo?{}:n===In?[]:n}function Whe(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Ghe(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function qhe(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function AW(n){const e=t=>{const r=Array.isArray(n);null===t.hostDirectives?(t.findHostDirectiveDefs=SW,t.hostDirectives=r?n.map(GP):[n]):r?t.hostDirectives.unshift(...n.map(GP)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function SW(n,e,t){if(null!==n.hostDirectives)for(const r of n.hostDirectives)if("function"==typeof r){const i=r();for(const s of i)xW(GP(s),e,t)}else xW(r,e,t)}function xW(n,e,t){const r=mi(n.directive);(function Xhe(n,e){for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=n[t])})(r.declaredInputs,n.inputs),SW(r,e,t),t.set(r,n),e.push(r)}function GP(n){return"function"==typeof n?{directive:xt(n),inputs:yo,outputs:yo}:{directive:xt(n.directive),inputs:DW(n.inputs),outputs:DW(n.outputs)}}function DW(n){if(void 0===n||0===n.length)return yo;const e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function xl(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class xc{}class MW{}class qP extends xc{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new X3(this);const s=qi(e);this._bootstrapComponents=Ko(s.bootstrap),this._r3Injector=MH(e,t,[{provide:xc,useValue:this},{provide:wC,useValue:this.componentFactoryResolver},...r],ni(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class KP extends MW{constructor(e){super(),this.moduleType=e}create(e){return new qP(this.moduleType,e,[])}}class PW extends xc{constructor(e){super(),this.componentFactoryResolver=new X3(this),this.instance=null;const t=new za([...e.providers,{provide:xc,useValue:this},{provide:wC,useValue:this.componentFactoryResolver}],e.parent||Cu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function xC(n,e,t=null){return new PW({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function DC(n){return!!QP(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function QP(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Dl(n,e,t){return n[e]=t}function _i(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Kh(n,e,t,r){const i=_i(n,e,t);return _i(n,e+1,r)||i}function Hv(n,e,t,r,i,s,o,a,l,c){const u=t+ut,h=e.firstCreatePass?function ife(n,e,t,r,i,s,o,a,l){const c=e.consts,u=zh(e,n,4,o||null,a||null);mP(e,t,u,wo(c,l)),Im(e,u);const h=u.tView=pP(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,e,n,r,i,s,o,a,l):e.data[u];Co(h,!1);const m=kW(e,n,h,t);ku()&&dC(e,n,m,h),Ds(m,n);const y=h3(m,n,m,h);return n[u]=y,pC(n,y),function rW(n,e,t){return LP(n,e,t)}(y,h,n),Mu(h)&&hP(e,n,h),null!=l&&fP(n,h,c),h}function ot(n,e,t,r,i,s,o,a){const l=Te(),c=Kt();return Hv(l,c,n,e,t,r,i,wo(c.consts,s),o,a),ot}let kW=function NW(n,e,t,r){return To(!0),e[Rt].createComment("")};var jm=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(jm||{});let UW=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>new n})}}return n})();class Gv{constructor(){this.ngZone=k(yt),this.scheduler=k(Lm),this.errorHandler=k(Go,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[jm.EarlyRead,jm.Write,jm.MixedReadWrite,jm.Read]}execute(){this.executing=!0;for(const e of Gv.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Oe({token:Gv,providedIn:"root",factory:()=>new Gv})}}class lfe{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function Dc(n,e){!e?.injector&&Fr();const t=e?.injector??k(Rn);return Qo(t)?(Xs("NgAfterNextRender"),zW(n,t,e,!0)):HW}function zW(n,e,t,r){const i=e.get(UW);i.impl??=e.get(Gv);const s=t?.phase??jm.MixedReadWrite,o=!0!==t?.manualCleanup?e.get(hv):null,a=new lfe(i.impl,function cfe(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),r,o);return i.impl.register(a),a}const HW={destroy(){}};function er(n,e,t,r){const i=Te();return _i(i,Wo(),e)&&(Kt(),Sl(Un(),i,n,e,t,r)),er}function Km(n,e,t,r){return _i(n,Wo(),t)?e+Ot(t)+r:Vt}function FC(n,e){return n<<17|e<<2}function Uu(n){return n>>17&32767}function a1(n){return 2|n}function Yh(n){return(131068&n)>>2}function l1(n,e){return-131069&n|e<<2}function c1(n){return 1|n}function m5(n,e,t,r){const i=n[t+1],s=null===e;let o=r?Uu(i):Yh(i),a=!1;for(;0!==o&&(!1===a||s);){const c=n[o+1];Wfe(n[o],e)&&(a=!0,n[o+1]=r?c1(c):a1(c)),o=r?Uu(c):Yh(c)}a&&(n[t+1]=r?a1(i):c1(i))}function Wfe(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&vl(n,e)>=0}const Ui={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function g5(n){return n.substring(Ui.key,Ui.keyEnd)}function _5(n,e){const t=Ui.textEnd;return t===e?-1:(e=Ui.keyEnd=function Qfe(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Ui.key=e,t),ng(n,e,t))}function ng(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Me(n,e,t){const r=Te();return _i(r,Wo(),e)&&So(Kt(),Un(),r,n,e,r[Rt],t,!1),Me}function u1(n,e,t,r,i){const o=i?"class":"style";vP(n,t,e.inputs[o],o,r)}function Kv(n,e,t){return Ka(n,e,t,!1),Kv}function Lr(n,e){return Ka(n,e,null,!0),Lr}function Xh(n){Qa(ipe,Ml,n,!0)}function Ml(n,e){for(let t=function qfe(n){return function v5(n){Ui.key=0,Ui.keyEnd=0,Ui.value=0,Ui.valueEnd=0,Ui.textEnd=n.length}(n),_5(n,ng(n,0,Ui.textEnd))}(e);t>=0;t=_5(e,t))Ni(n,g5(e),!0)}function Ka(n,e,t,r){const i=Te(),s=Kt(),o=Ga(2);s.firstUpdatePass&&w5(s,n,o,r),e!==Vt&&_i(i,o,e)&&T5(s,s.data[Pn()],i,i[Rt],n,i[o+1]=function ope(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ni(qo(n)))),n}(e,t),r,o)}function Qa(n,e,t,r){const i=Kt(),s=Ga(2);i.firstUpdatePass&&w5(i,null,s,r);const o=Te();if(t!==Vt&&_i(o,s,t)){const a=i.data[Pn()];if(S5(a,r)&&!I5(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=cc(l,t||"")),u1(i,a,o,t,r)}else!function spe(n,e,t,r,i,s,o,a){i===Vt&&(i=In);let l=0,c=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const m=l<i.length?i[l+1]:void 0,y=c<s.length?s[c+1]:void 0;let T,b=null;u===h?(l+=2,c+=2,m!==y&&(b=h,T=y)):null===h||null!==u&&u<h?(l+=2,b=u):(c+=2,b=h,T=y),null!==b&&T5(n,e,t,r,b,T,o,a),u=l<i.length?i[l]:null,h=c<s.length?s[c]:null}}(i,a,o,o[Rt],o[s+1],o[s+1]=function rpe(n,e,t){if(null==t||""===t)return In;const r=[],i=qo(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}function I5(n,e){return e>=n.expandoStartIndex}function w5(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Pn()],o=I5(n,t);S5(s,r)&&null===e&&!o&&(e=!1),e=function Jfe(n,e,t,r){const i=function g(n){const e=Mt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Qv(t=d1(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=d1(i,n,e,t,r),null===s){let l=function epe(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Yh(r))return n[Uu(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=d1(null,n,e,l[1],r),l=Qv(l,e.attrs,r),function tpe(n,e,t,r){n[Uu(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function npe(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Qv(r,n[s].hostAttrs,t);return Qv(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Hfe(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Uu(o),l=Yh(o);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||vl(t,u)>0)&&(c=!0)):u=t,i)if(0!==l){const m=Uu(n[a+1]);n[r+1]=FC(m,a),0!==m&&(n[m+1]=l1(n[m+1],r)),n[a+1]=function jfe(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=FC(a,0),0!==a&&(n[a+1]=l1(n[a+1],r)),a=r;else n[r+1]=FC(l,0),0===a?a=r:n[l+1]=l1(n[l+1],r),l=r;c&&(n[r+1]=a1(n[r+1])),m5(n,u,r,!0),m5(n,u,r,!1),function $fe(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&vl(s,e)>=0&&(t[r+1]=c1(t[r+1]))}(e,u,n,r,s),o=FC(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function d1(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Qv(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Qv(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ni(n,o,!!t||e[++s]))}return void 0===n?null:n}function ipe(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Ni(n,r,t)}function T5(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function zfe(n){return!(1&~n)}(c)?A5(l,e,t,i,Yh(c),o):void 0;LC(u)||(LC(s)||function Ufe(n){return!(2&~n)}(c)&&(s=A5(l,null,t,i,a,o)),function Aue(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Fu.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Fu.Important),n.setStyle(t,r,i,s))}}(r,o,xh(Pn(),t),i,s))}function A5(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let m=t[i+1];m===Vt&&(m=h?In:void 0);let y=h?ph(m,r):u===r?m:void 0;if(c&&!LC(y)&&(y=ph(l,r)),LC(y)&&(a=y,o))return a;const b=n[i+1];i=o?Uu(b):Yh(b)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=ph(l,r))}return a}function LC(n){return void 0!==n}function S5(n,e){return!!(n.flags&(e?8:16))}function Yv(n,e,t){Qa(Ni,Ml,Km(Te(),n,e,t),!0)}function Xv(n,e){Xs("NgControlFlow");const t=Te(),r=Wo(),i=t[r]!==Vt?t[r]:-1,s=-1!==i?VC(t,ut+i):void 0;if(_i(t,r,n)){const a=te(null);try{if(void 0!==s&&function EP(n,e){const t=wv(n,e);return void 0!==t&&uC(t[ze],t),t}(s,0),-1!==n){const l=ut+n,c=VC(t,l),u=function p1(n,e){return Pu(n,e)}(t[ze],l),h=Wh(c,u.tView.ssrId);Om(c,Nm(t,u,e,{dehydratedView:h}),0,Hh(u,h))}}finally{te(a)}}else if(void 0!==s){const a=function _3(n,e){const t=Tr+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Jn]=e)}}function VC(n,e){return n[e]}function ue(n,e,t,r){const i=Te(),s=Kt(),o=ut+n,a=i[Rt],l=s.firstCreatePass?function Spe(n,e,t,r,i,s){const o=e.consts,l=zh(e,n,2,r,wo(o,i));return mP(e,t,l,wo(o,s)),null!==l.attrs&&TC(l,l.attrs,!1),null!==l.mergedAttrs&&TC(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=M5(s,i,l,a,e,n);i[o]=c;const u=Mu(l);return Co(l,!0),t3(a,c,l),!function Bm(n){return!(32&~n.flags)}(l)&&ku()&&dC(s,i,c,l),0===function tv(){return Mt.lFrame.elementDepthCount}()&&Ds(c,i),function oM(){Mt.lFrame.elementDepthCount++}(),u&&(hP(s,i,l),dP(s,l,i)),null!==r&&fP(i,l),ue}function pe(){let n=Bn();bm()?Mh():(n=n.parent,Co(n,!1));const e=n;(function lM(n){return Mt.skipHydrationRootTNode===n})(e)&&function dM(){Mt.skipHydrationRootTNode=null}(),function aM(){Mt.lFrame.elementDepthCount--}();const t=Kt();return t.firstCreatePass&&(Im(t,n),Th(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function gle(n){return!!(8&n.flags)}(e)&&u1(t,e,Te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function _le(n){return!!(16&n.flags)}(e)&&u1(t,e,Te(),e.stylesWithoutHost,!1),pe}function Et(n,e,t,r){return ue(n,e,t,r),pe(),Et}let M5=(n,e,t,r,i,s)=>(To(!0),cC(r,i,function Em(){return Mt.lFrame.currentNamespace}()));function Rs(n,e,t){const r=Te(),i=Kt(),s=n+ut,o=i.firstCreatePass?function Rpe(n,e,t,r,i){const s=e.consts,o=wo(s,r),a=zh(e,n,8,"ng-container",o);return null!==o&&TC(a,o,!0),mP(e,t,a,wo(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];Co(o,!0);const a=P5(i,r,o,n);return r[s]=a,ku()&&dC(i,r,a,o),Ds(a,r),Mu(o)&&(hP(i,r,o),dP(i,o,r)),null!=t&&fP(r,o),Rs}function Ms(){let n=Bn();const e=Kt();return bm()?Mh():(n=n.parent,Co(n,!1)),e.firstCreatePass&&(Im(e,n),Th(n)&&e.queries.elementEnd(n)),Ms}function rg(n,e,t){return Rs(n,e,t),Ms(),rg}let P5=(n,e,t,r)=>(To(!0),nP(e[Rt],""));function Ti(){return Te()}function Zv(n,e,t){const r=Te();return _i(r,Wo(),e)&&So(Kt(),Un(),r,n,e,r[Rt],t,!0),Zv}const BC="en-US";let F5=BC,eG=(n,e,t)=>{};function kt(n,e,t,r){const i=Te(),s=Kt(),o=Bn();return _1(s,i,i[Rt],o,n,e,r),kt}function _1(n,e,t,r,i,s,o){const a=Mu(r),c=n.firstCreatePass&&m3(n),u=e[Jn],h=p3(e);let m=!0;if(3&r.type||o){const T=Ki(r,e),M=o?o(T):T,B=h.length,V=o?we=>o(gn(we[r.index])):r.index;let Q=null;if(!o&&a&&(Q=function wme(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[yc],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,m=!1;else{s=iG(r,e,u,s),eG(T,i,s);const we=t.listen(M,i,s);h.push(s,we),c&&c.push(i,V,B,B+1)}}else s=iG(r,e,u,s);const y=r.outputs;let b;if(m&&null!==y&&(b=y[i])){const T=b.length;if(T)for(let M=0;M<T;M+=2){const je=e[b[M]][b[M+1]].subscribe(s),He=h.length;h.push(s,je),c&&c.push(i,r.index,He,-(He+1))}}}function rG(n,e,t,r){const i=te(null);try{return Io(6,e,t),!1!==t(r)}catch(s){return mC(n,s),!1}finally{Io(7,e,t),te(i)}}function iG(n,e,t,r){return function i(s){if(s===Function)return r;Sv(n.componentOffset>-1?Ss(n.index,e):e,5);let a=rG(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)a=rG(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function Pe(n=1){return function rn(n){return(Mt.lFrame.contextLView=function k0(n,e){for(;n>0;)e=e[Su],n--;return e}(n,Mt.lFrame.contextLView))[Jn]}(n)}function Cme(n,e){let t=null;const r=function kR(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?em(n,s,!0):Ly(r,s))return i}else t=i}return t}function Ya(n){const e=Te()[pr][Vi];if(!e.projection){const r=e.projection=function Iu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){if(128!==s.type){const o=n?Cme(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Yi(n,e=0,t,r,i,s){const o=Te(),a=Kt(),l=r?n+1:null;null!==l&&Hv(o,a,l,r,i,s,null,t);const c=zh(a,ut+n,16,null,t||null);null===c.projection&&(c.projection=e),Mh();const h=!o[As]||Cc();null===o[pr][Vi].projection[c.projection]&&null!==l?function Tme(n,e,t){const r=ut+t,i=e.data[r],s=n[r],o=Wh(s,i.tView.ssrId);Om(s,Nm(n,i,void 0,{dehydratedView:o}),0,Hh(i,o))}(o,a,l):h&&32&~c.flags&&function Cue(n,e,t){J$(e[Rt],0,e,t,sP(n,t,e),q$(t.parent||e[Vi],t,e))}(a,o,c)}function ju(n,e,t){return Jh(n,"",e,"",t),ju}function Jh(n,e,t,r,i){const s=Te(),o=Km(s,e,t,r);return o!==Vt&&So(Kt(),Un(),s,n,o,s[Rt],i,!1),Jh}function zu(n,e,t,r){!function cW(n,e,t,r){const i=Kt();if(i.firstCreatePass){const s=Bn();uW(i,new sW(e,t,r),s.index),function khe(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return aW(i,Te(),t)}(n,e,t,r)}function Hu(n,e,t){!function lW(n,e,t){const r=Kt();return r.firstCreatePass&&(uW(r,new sW(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),aW(r,Te(),e)}(n,e,t)}function Js(n){const e=Te(),t=Kt(),r=d();f(r+1);const i=$P(t,r);if(n.dirty&&function Yy(n){return!(4&~n[ht])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=dW(e,r);n.reset(s,UH),n.notifyOnChanges()}return!0}return!1}function eo(){return function HP(n,e){return n[Ha].queries[e].queryList}(Te(),d())}function sg(n){return Ic(function L0(){return Mt.lFrame.contextLView}(),ut+n)}function Ke(n,e=""){const t=Te(),r=Kt(),i=n+ut,s=r.firstCreatePass?zh(r,i,1,e,null):r.data[i],o=IG(r,t,s,e,n);t[i]=o,ku()&&dC(r,t,o,s),Co(s,!1)}let IG=(n,e,t,r,i)=>(To(!0),function tP(n,e){return n.createText(e)}(e[Rt],r));function Ro(n){return en("",n,""),Ro}function en(n,e,t){const r=Te(),i=Km(r,n,e,t);return i!==Vt&&function Sc(n,e,t){const r=xh(e,n);!function j$(n,e,t){n.setValue(e,t)}(n[Rt],r,t)}(r,Pn(),i),en}function HC(n,e,t){pW(e)&&(e=e());const r=Te();return _i(r,Wo(),e)&&So(Kt(),Un(),r,n,e,r[Rt],t,!1),HC}function v1(n,e){const t=pW(n);return t&&n.set(e),t}function $C(n,e){const t=Te(),r=Kt(),i=Bn();return _1(r,t,t[Rt],i,n,e),$C}function b1(n,e,t,r,i){if(n=xt(n),Array.isArray(n))for(let s=0;s<n.length;s++)b1(n[s],e,t,r,i);else{const s=Kt(),o=Te(),a=Bn();let l=gc(n)?n:xt(n.provide);const c=GR(n),u=1048575&a.providerIndexes,h=a.directiveStart,m=a.providerIndexes>>20;if(gc(n)||!n.multi){const y=new lv(c,i,De),b=I1(l,e,i?u:u+m,h);-1===b?(EM(H0(a,o),s,l),E1(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[b]=y,o[b]=y)}else{const y=I1(l,e,u+m,h),b=I1(l,e,u,u+m),M=b>=0&&t[b];if(i&&!M||!i&&!(y>=0&&t[y])){EM(H0(a,o),s,l);const B=function Wme(n,e,t,r,i){const s=new lv(n,t,De);return s.multi=[],s.index=e,s.componentProviders=0,kG(s,i,r&&!t),s}(i?$me:Hme,t.length,i,r,c);!i&&M&&(t[b].providerFactory=B),E1(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),o.push(B)}else E1(s,n,y>-1?y:b,kG(t[i?b:y],c,!i&&r));!i&&r&&M&&t[b].componentProviders++}}}function E1(n,e,t,r){const i=gc(e),s=function zR(n){return!!n.useClass}(e);if(i||s){const l=(s?xt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function kG(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function I1(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Hme(n,e,t,r){return w1(this.multi,[])}function $me(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Oh(t,t[ze],this.providerFactory.index,r);s=a.slice(0,o),w1(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],w1(i,s);return s}function w1(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function sr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function zme(n,e,t){const r=Kt();if(r.firstCreatePass){const i=Ho(n);b1(t,r.data,r.blueprint,i,!0),b1(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let Gme=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=p0(0,t.type),i=r.length>0?xC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Oe({token:n,providedIn:"environment",factory:()=>new n(Re(Li))})}}return n})();function si(n){Xs("NgStandalone"),n.getStandaloneInjector=e=>e.get(Gme).getOrCreateStandaloneInjector(n)}function ib(n,e,t,r){return FG(Te(),Qi(),n,e,t,r)}function sb(n,e){const t=n[e];return t===Vt?void 0:t}function FG(n,e,t,r,i,s){const o=e+t;return _i(n,o,i)?Dl(n,o+1,s?r.call(s,i):r(i)):sb(n,o+1)}function VG(n,e,t,r,i,s,o,a){const l=e+t;return function RC(n,e,t,r,i){const s=Kh(n,e,t,r);return _i(n,e+2,i)||s}(n,l,i,s,o)?Dl(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):sb(n,l+3)}function Ps(n,e){const t=Kt();let r;const i=n+ut;t.firstCreatePass?(r=function sge(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ua(r.type)),a=Or(De);try{const l=z0(!1),c=s();return z0(l),function y1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Te(),i,c),c}finally{Or(a)}}function ef(n,e,t){const r=n+ut,i=Te(),s=Ic(i,r);return ab(i,r)?FG(i,Qi(),e,s.transform,t,s):s.transform(t)}function og(n,e,t,r){const i=n+ut,s=Te(),o=Ic(s,i);return ab(s,i)?function LG(n,e,t,r,i,s,o){const a=e+t;return Kh(n,a,i,s)?Dl(n,a+2,o?r.call(o,i,s):r(i,s)):sb(n,a+2)}(s,Qi(),e,o.transform,t,r,o):o.transform(t,r)}function ob(n,e,t,r,i){const s=n+ut,o=Te(),a=Ic(o,s);return ab(o,s)?VG(o,Qi(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function ab(n,e){return n[ze].data[e].pure}function qC(n,e){return _C(n,e)}class tf{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const n6=new tf("18.2.13");let r6=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const l6=new Ee(""),YC=new Ee("");let M1,D1=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,M1||(function e_e(n){M1=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(Re(yt),Re(R1),Re(YC))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})(),R1=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return M1?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function ub(n){return!!n&&"function"==typeof n.then}function c6(n){return!!n&&"function"==typeof n.subscribe}const XC=new Ee("");let u6=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k(XC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(ub(s))t.push(s);else if(c6(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const ZC=new Ee("");function h6(n,e){return Array.isArray(e)?e.reduce(h6,n):{...n,...e}}let ba=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(Gle),this.afterRenderManager=k(UW),this.zonelessEnabled=k(Fv),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new E,this.afterTick=new E,this.componentTypes=[],this.components=[],this.isStable=k(Tc).hasPendingTasks.pipe(Be(t=>!t)),this._injector=k(Li)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof q3;if(!this._injector.get(u6).done)throw!i&&function bl(n){const e=Xt(n)||mi(n)||Fi(n);return null!==e&&e.standalone}(t),new K(405,!1);let o;o=i?t:this._injector.get(wC).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function t_e(n){return n.isBoundToModule}(o)?void 0:this._injector.get(xc),c=o.create(Rn.NULL,[],r||o.selector,a),u=c.location.nativeElement,h=c.injector.get(l6,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),JC(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);const t=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Gh,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)i_e(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Dh(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;JC(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(ZC,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>JC(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function i_e(n,e,t,r){(t||Dh(n))&&gC(n,e,t&&!r?0:1)}class s_e{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let p6=(()=>{class n{compileModuleSync(t){return new KP(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ko(qi(t).declarations).reduce((o,a)=>{const l=Xt(a);return l&&o.push(new Bv(l)),o},[]);return new s_e(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),l_e=(()=>{class n{constructor(){this.zone=k(yt),this.changeDetectionScheduler=k(Lm),this.applicationRef=k(ba)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new yt({...k1(),scheduleInRootZone:t}),[{provide:yt,useFactory:n},{provide:vo,multi:!0,useFactory:()=>{const r=k(l_e,{optional:!0});return()=>r.initialize()}},{provide:vo,multi:!0,useFactory:()=>{const r=k(u_e);return()=>{r.initialize()}}},!0===e?{provide:G3,useValue:!0}:[],{provide:kP,useValue:t??kH}]}function k1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let u_e=(()=>{class n{constructor(){this.subscription=new Dt,this.initialized=!1,this.zone=k(yt),this.pendingTasks=k(Tc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{yt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),db=(()=>{class n{constructor(){this.appRef=k(ba),this.taskService=k(Tc),this.ngZone=k(yt),this.zonelessEnabled=k(Fv),this.disableScheduling=k(G3,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Dt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(K0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(kP,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xM||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?OH:NH;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(K0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,OH(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Rc=new Ee("",{providedIn:"root",factory:()=>k(Rc,jt.Optional|jt.SkipSelf)||function d_e(){return typeof $localize<"u"&&$localize.locale||BC}()}),tT=new Ee("");function nT(n){return!n.moduleRef}let b6=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[P1({ngZoneFactory:()=>function Wle(n="zone.js",e){return"noop"===n?new xM:"zone.js"===n?new yt(e):n}(r?.ngZone,{...k1({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:o}),{provide:Lm,useExisting:db}],l=function Jhe(n,e,t){return new qP(n,e,t,!1)}(t.moduleType,this.injector,a);return function v6(n){const e=nT(n)?n.r3Injector:n.moduleRef.injector,t=e.get(yt);return t.run(()=>{nT(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(Go,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),nT(n)){const s=()=>e.destroy(),o=n.platformInjector.get(tT);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(tT);o.add(s),n.moduleRef.onDestroy(()=>{JC(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return function r_e(n,e,t){try{const r=t();return ub(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const s=e.get(u6);return s.runInitializers(),s.donePromise.then(()=>{if(function Bpe(n){"string"==typeof n&&(F5=n.toLowerCase().replace(/_/g,"-"))}(e.get(Rc,BC)||BC),nT(n)){const a=e.get(ba);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function __e(n,e){const t=n.injector.get(ba);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new K(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){const i=h6({},r);return function a_e(n,e,t){const r=new KP(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(tT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(Re(Rn))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),$u=null;const E6=new Ee("");function I6(n,e,t=[]){const r=`Platform: ${e}`,i=new Ee(r);return(s=[])=>{let o=O1();if(!o||o.injector.get(E6,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function y_e(n){if($u&&!$u.get(E6,!1))throw new K(400,!1);(function d6(){!function ir(n){Ir=n}(()=>{throw new K(600,!1)})})(),$u=n;const e=n.get(b6);(function C6(n){n.get(o$,null)?.forEach(t=>t())})(n)}(function w6(n=[],e){return Rn.create({name:e,providers:[{provide:_0,useValue:"platform"},{provide:tT,useValue:new Set([()=>$u=null])},...n]})}(a,r))}return function v_e(){const e=O1();if(!e)throw new K(401,!1);return e}()}}function O1(){return $u?.get(b6)??null}let Ea=(()=>{class n{static{this.__NG_ELEMENT_ID__=E_e}}return n})();function E_e(n){return function I_e(n,e,t){if(Ec(n)&&!t){const r=Ss(n.index,e);return new xv(r,r)}return 175&n.type?new xv(e[pr],e):null}(Bn(),Te(),!(16&~n))}class R6{constructor(){}supports(e){return DC(e)}create(e){return new S_e(e)}}const A_e=(n,e)=>e;class S_e{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||A_e}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<P6(r,i,s)?t:r,a=P6(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,b=y+m;u<=b&&b<c&&(s[m]=y+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!DC(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function nfe(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new x_e(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new M6),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new M6),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class x_e{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class D_e{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class M6{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new D_e,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function P6(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class k6{constructor(){}supports(e){return e instanceof Map||QP(e)}create(){return new R_e}}class R_e{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||QP(e)))throw new K(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new M_e(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class M_e{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function N6(){return new U1([new R6])}let U1=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:N6})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||N6()),deps:[[n,new pc,new ki]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new K(901,!1)}}return n})();function O6(){return new sT([new k6])}let sT=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:O6})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||O6()),deps:[[n,new pc,new ki]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();const N_e=I6(null,"core",[]);let O_e=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(Re(ba))}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({})}}return n})();function oi(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function H1(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}function mb(n,e){Xs("NgSignals");const t=function ie(n){const e=Object.create(Sn);e.computation=n;const t=()=>{if(xe(e),$(e),e.value===Ht)throw e.error;return e.value};return t[ce]=e,t}(n);return e?.equal&&(t[ce].equal=e.equal),t}function Xa(n){const e=te(null);try{return n()}finally{te(e)}}const fye=new Ee("",{providedIn:"root",factory:()=>k(pye)});let pye=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>new mye})}}return n})();class mye{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=k(Tc),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){const t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}class gye{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=function Pt(n,e,t){const r=Object.create(Ct);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=l=>{r.cleanupFn=l};return r.ref={notify:()=>Ze(r),run:()=>{if(null===r.fn)return;if(function ee(){return x}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!qt(r))return;r.hasRun=!0;const l=et(r);try{r.cleanupFn(),r.cleanupFn=Mn,r.fn(i)}finally{tt(r,l)}},cleanup:()=>r.cleanupFn(),destroy:()=>function o(l){(function s(l){return null===l.fn&&null===l.schedule})(l)||(Jt(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Mn)}(r),[ce]:r},r.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Go,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function s7(n,e){const t=Xt(n),r=e.elementInjector||Cu();return new Bv(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}let o7=null;function Wu(){return o7}class vye{}const _n=new Ee("");let $1=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>k(Eye),providedIn:"platform"})}}return n})();const bye=new Ee("");let Eye=(()=>{class n extends $1{constructor(){super(),this._doc=k(_n),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wu().getBaseHref(this._doc)}onPopState(t){const r=Wu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Wu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function W1(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function a7(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Mc(n){return n&&"?"!==n[0]?"?"+n:n}let rf=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>k(c7),providedIn:"root"})}}return n})();const l7=new Ee("");let c7=(()=>{class n extends rf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(_n).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return W1(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Mc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Mc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Mc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Re($1),Re(l7,8))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Iye=(()=>{class n extends rf{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=W1(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Mc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Mc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Re($1),Re(l7,8))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})(),cg=(()=>{class n{constructor(t){this._subject=new pn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Tye(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(a7(u7(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mc(r))}normalize(t){return n.stripTrailingSlash(function Cye(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,u7(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Mc}static{this.joinWithSlash=W1}static{this.stripTrailingSlash=a7}static{this.\u0275fac=function(r){return new(r||n)(Re(rf))}}static{this.\u0275prov=Oe({token:n,factory:()=>function wye(){return new cg(Re(rf))}(),providedIn:"root"})}}return n})();function u7(n){return n.replace(/\/index.html$/,"")}function v7(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const tk=/\s+/,b7=[];let E7=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=b7,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(tk):b7}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(tk):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(tk).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(De(jn),De(qa))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class uve{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _b=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new uve(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),w7(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{w7(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(xo),De(ya),De(U1))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function w7(n,e){n.context.$implicit=e.item}let sf=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dve,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){C7("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){C7("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(xo),De(ya))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class dve{constructor(){this.$implicit=null,this.ngIf=null}}function C7(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ni(e)}'.`)}let A7=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Fu.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(De(jn),De(sT),De(qa))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),S7=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static{this.\u0275fac=function(r){return new(r||n)(De(xo))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[cs]})}}return n})();function Ja(n,e){return new K(2100,!1)}class mve{createSubscription(e,t){return Xa(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Xa(()=>e.unsubscribe())}}class gve{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const _ve=new gve,yve=new mve;let x7=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ub(t))return _ve;if(c6(t))return yve;throw Ja()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(De(Ea,16))}}static{this.\u0275pipe=Oi({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),R7=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Ja();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Oi({name:"slice",type:n,pure:!1,standalone:!0})}}return n})(),ok=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({})}}return n})();const M7="browser";function P7(n){return n===M7}function wT(n){return"server"===n}let Lve=(()=>{class n{static{this.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>P7(k(Ys))?new Vve(k(_n),window):new Uve})}}return n})();class Vve{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Bve(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class Uve{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class k7{}class pbe extends vye{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class uk extends pbe{static makeCurrent(){!function yye(n){o7??=n}(new uk)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function mbe(){return bb=bb||document.querySelector("base"),bb?bb.getAttribute("href"):null}();return null==t?null:function gbe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){bb=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return v7(document.cookie,e)}}let bb=null,ybe=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const dk=new Ee("");let $7=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Re(dk),Re(yt))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();class W7{constructor(e){this._doc=e}}const hk="ng-app-id";let G7=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wT(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${hk}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(hk),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(hk,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Re(_n),Re(Lh),Re(NM,8),Re(Ys))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const fk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pk=/%COMP%/g,Ibe=new Ee("",{providedIn:"root",factory:()=>!0});function K7(n,e){return e.map(t=>t.replace(pk,n))}let mk=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=wT(a),this.defaultRenderer=new gk(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===bo.ShadowDom&&(r={...r,encapsulation:bo.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Y7?i.applyToHost(t):i instanceof _k&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case bo.Emulated:s=new Y7(l,c,r,this.appId,u,o,a,h);break;case bo.ShadowDom:return new Abe(l,c,t,r,o,a,this.nonce,h);default:s=new _k(l,c,r,u,o,a,h)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Re($7),Re(G7),Re(Lh),Re(Ibe),Re(_n),Re(Ys),Re(yt),Re(NM))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();class gk{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(fk[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Q7(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Q7(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=fk[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=fk[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Fu.DashCase|Fu.Important)?e.style.setProperty(t,r,i&Fu.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Fu.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Wu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Q7(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Abe extends gk{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=K7(i.id,i.styles);for(const u of c){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _k extends gk{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?K7(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Y7 extends _k{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function wbe(n){return"_ngcontent-%COMP%".replace(pk,n)}(c),this.hostAttr=function Cbe(n){return"_nghost-%COMP%".replace(pk,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Sbe=(()=>{class n extends W7{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Re(_n))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const X7=["alt","control","meta","shift"],xbe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dbe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rbe=(()=>{class n extends W7{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wu().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),X7.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=xbe[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),X7.forEach(o=>{o!==i&&(0,Dbe[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Re(_n))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const Nbe=I6(N_e,"browser",[{provide:Ys,useValue:M7},{provide:o$,useValue:function Mbe(){uk.makeCurrent()},multi:!0},{provide:_n,useFactory:function kbe(){return function pce(n){kM=n}(document),document},deps:[]}]),Obe=new Ee(""),eq=[{provide:YC,useClass:class _be{addToWindow(e){Kn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new K(5103,!1);return s},Kn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kn.getAllAngularRootElements=()=>e.getAllRootElements(),Kn.frameworkStabilizers||(Kn.frameworkStabilizers=[]),Kn.frameworkStabilizers.push(r=>{const i=Kn.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Wu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l6,useClass:D1,deps:[yt,R1,YC]},{provide:D1,useClass:D1,deps:[yt,R1,YC]}],tq=[{provide:_0,useValue:"root"},{provide:Go,useFactory:function Pbe(){return new Go},deps:[]},{provide:dk,useClass:Sbe,multi:!0,deps:[_n,yt,Ys]},{provide:dk,useClass:Rbe,multi:!0,deps:[_n]},mk,G7,$7,{provide:Gh,useExisting:mk},{provide:k7,useClass:ybe,deps:[]},[]];let nq=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Lh,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(Re(Obe,12))}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({providers:[...tq,...eq],imports:[ok,O_e]})}}return n})(),Fbe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Re(_n))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:function(r){let i=null;return i=r?new(r||n):Re(Ube),i},providedIn:"root"})}}return n})(),Ube=(()=>{class n extends yk{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case ds.NONE:return r;case ds.HTML:return Al(r,"HTML")?qo(r):D$(this._doc,String(r)).toString();case ds.STYLE:return Al(r,"Style")?qo(r):r;case ds.SCRIPT:if(Al(r,"Script"))return qo(r);throw new K(5200,!1);case ds.URL:return Al(r,"URL")?qo(r):sC(String(r));case ds.RESOURCE_URL:if(Al(r,"ResourceURL"))return qo(r);throw new K(5201,!1);default:throw new K(5202,!1)}}bypassSecurityTrustHtml(t){return function Oce(n){return new Dce(n)}(t)}bypassSecurityTrustStyle(t){return function Fce(n){return new Rce(n)}(t)}bypassSecurityTrustScript(t){return function Lce(n){return new Mce(n)}(t)}bypassSecurityTrustUrl(t){return function Vce(n){return new Pce(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Bce(n){return new kce(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(_n))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O=G(467);function sq(n){return n&&mt(n.schedule)}function vk(n){return n[n.length-1]}function bk(n){return mt(vk(n))?n.pop():void 0}function Eb(n){return sq(vk(n))?n.pop():void 0}var Nc=G(1635);const Ek=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function oq(n){return mt(n?.then)}function aq(n){return mt(n[mo])}function lq(n){return Symbol.asyncIterator&&mt(n?.[Symbol.asyncIterator])}function cq(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const uq=function zbe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function dq(n){return mt(n?.[uq])}function hq(n){return(0,Nc.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Nc.N3)(t.read());if(i)return yield(0,Nc.N3)(void 0);yield yield(0,Nc.N3)(r)}}finally{t.releaseLock()}})}function fq(n){return mt(n?.getReader)}function ro(n){if(n instanceof Ut)return n;if(null!=n){if(aq(n))return function Hbe(n){return new Ut(e=>{const t=n[mo]();if(mt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ek(n))return function $be(n){return new Ut(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(oq(n))return function Wbe(n){return new Ut(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,La)})}(n);if(lq(n))return pq(n);if(dq(n))return function Gbe(n){return new Ut(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(fq(n))return function qbe(n){return pq(hq(n))}(n)}throw cq(n)}function pq(n){return new Ut(e=>{(function Kbe(n,e){var t,r,i,s;return(0,Nc.sH)(this,void 0,void 0,function*(){try{for(t=(0,Nc.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Oc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Gu(n,e=0){return ye((t,r)=>{t.subscribe(Fe(r,i=>Oc(r,n,()=>r.next(i),e),()=>Oc(r,n,()=>r.complete(),e),i=>Oc(r,n,()=>r.error(i),e)))})}function lf(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function mq(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ut(t=>{Oc(t,e,()=>{const r=n[Symbol.asyncIterator]();Oc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Wn(n,e){return e?function eEe(n,e){if(null!=n){if(aq(n))return function Qbe(n,e){return ro(n).pipe(lf(e),Gu(e))}(n,e);if(Ek(n))return function Xbe(n,e){return new Ut(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(oq(n))return function Ybe(n,e){return ro(n).pipe(lf(e),Gu(e))}(n,e);if(lq(n))return mq(n,e);if(dq(n))return function Zbe(n,e){return new Ut(t=>{let r;return Oc(t,e,()=>{r=n[uq](),Oc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>mt(r?.return)&&r.return()})}(n,e);if(fq(n))return function Jbe(n,e){return mq(hq(n),e)}(n,e)}throw cq(n)}(n,e):ro(n)}function Qe(...n){return Wn(n,Eb(n))}function Xi(n,e,t=1/0){return mt(e)?Xi((r,i)=>Be((s,o)=>e(r,s,i,o))(ro(n(r,i))),t):("number"==typeof e&&(t=e),ye((r,i)=>function tEe(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,h=!1;const m=()=>{h&&!l.length&&!c&&e.complete()},y=T=>c<r?b(T):l.push(T),b=T=>{s&&e.next(T),c++;let M=!1;ro(t(T,u++)).subscribe(Fe(e,B=>{i?.(B),s?y(B):e.next(B)},()=>{M=!0},void 0,()=>{if(M)try{for(c--;l.length&&c<r;){const B=l.shift();o?Oc(e,o,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(Fe(e,y,()=>{h=!0,m()})),()=>{a?.()}}(r,i,n,t)))}function hg(n,e){return mt(e)?Xi(n,e,1):Xi(n,1)}function Yr(n,e){return ye((t,r)=>{let i=0;t.subscribe(Fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function fg(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qt(n,e){return ye((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Fe(r,l=>{i?.unsubscribe();let c=0;const u=s++;ro(n(l,u)).subscribe(i=Fe(r,h=>r.next(e?e(l,h,u,c++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}class xT{}class DT{}class Ca{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ca?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ca;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ca?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class nEe{encodeKey(e){return gq(e)}encodeValue(e){return gq(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const iEe=/%(\d[a-f0-9])/gi,sEe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function gq(n){return encodeURIComponent(n).replace(iEe,(e,t)=>sEe[t]??e)}function RT(n){return`${n}`}class Pl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new nEe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rEe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(RT):[RT(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Pl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(RT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(RT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class oEe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function _q(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yq(n){return typeof Blob<"u"&&n instanceof Blob}function vq(n){return typeof FormData<"u"&&n instanceof FormData}class Ib{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function aEe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ca,this.context??=new oEe,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Pl,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||_q(this.body)||yq(this.body)||vq(this.body)||function lEe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Pl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||vq(this.body)?null:yq(this.body)?this.body.type||null:_q(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Pl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),u)),new Ib(t,r,o,{params:u,headers:c,context:h,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}}var qu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(qu||{});class Ik{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ca,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class MT extends Ik{constructor(e={}){super(e),this.type=qu.ResponseHeader}clone(e={}){return new MT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cf extends Ik{constructor(e={}){super(e),this.type=qu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new cf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class pg extends Ik{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function wk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let wb=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ib)s=t;else{let l,c;l=i.headers instanceof Ca?i.headers:new Ca(i.headers),i.params&&(c=i.params instanceof Pl?i.params:new Pl({fromObject:i.params})),s=new Ib(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=Qe(s).pipe(hg(l=>this.handler.handle(l)));if(t instanceof Ib||"events"===i.observe)return o;const a=o.pipe(Yr(l=>l instanceof cf));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Be(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Be(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Be(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Be(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Pl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,wk(i,r))}post(t,r,i={}){return this.request("POST",t,wk(i,r))}put(t,r,i={}){return this.request("PUT",t,wk(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Re(xT))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const dEe=/^\)\]\}',?\n/;function Eq(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let Ck=(()=>{class n{constructor(){this.fetchImpl=k(fEe,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=k(yt)}handle(t){return new Ut(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(Tk,s=>r.error(new pg({error:s}))),()=>i.abort()})}doRequest(t,r,i){var s=this;return(0,O.A)(function*(){const o=s.createRequestInit(t);let a;try{const b=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:r,...o}));(function pEe(n){n.then(Tk,Tk)})(b),i.next({type:qu.Sent}),a=yield b}catch(b){return void i.error(new pg({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}))}const l=new Ca(a.headers),c=a.statusText,u=Eq(a)??t.urlWithParams;let h=a.status,m=null;if(t.reportProgress&&i.next(new MT({headers:l,status:h,statusText:c,url:u})),a.body){const b=a.headers.get("content-length"),T=[],M=a.body.getReader();let V,Q,B=0;const we=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,O.A)(function*(){for(;;){const{done:He,value:H}=yield M.read();if(He)break;if(T.push(H),B+=H.length,t.reportProgress){Q="text"===t.responseType?(Q??"")+(V??=new TextDecoder).decode(H,{stream:!0}):void 0;const L=()=>i.next({type:qu.DownloadProgress,total:b?+b:void 0,loaded:B,partialText:Q});we?we.run(L):L()}}}));const je=s.concatChunks(T,B);try{const He=a.headers.get("Content-Type")??"";m=s.parseBody(t,je,He)}catch(He){return void i.error(new pg({error:He,headers:new Ca(a.headers),status:a.status,statusText:a.statusText,url:Eq(a)??t.urlWithParams}))}}0===h&&(h=m?200:0),h>=200&&h<300?(i.next(new cf({body:m,headers:l,status:h,statusText:c,url:u})),i.complete()):i.error(new pg({error:m,headers:l,status:h,statusText:c,url:u}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const s=(new TextDecoder).decode(r).replace(dEe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let s=0;for(const o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();class fEe{}function Tk(){}function Iq(n,e){return e(n)}function mEe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const _Ee=new Ee(""),Cb=new Ee(""),wq=new Ee(""),Cq=new Ee("",{providedIn:"root",factory:()=>!0});function yEe(){let n=null;return(e,t)=>{null===n&&(n=(k(_Ee,{optional:!0})??[]).reduceRight(mEe,Iq));const r=k(Tc);if(k(Cq)){const s=r.add();return n(e,t).pipe(fg(()=>r.remove(s)))}return n(e,t)}}let Tq=(()=>{class n extends xT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=k(Tc),this.contributeToStability=k(Cq)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Cb),...this.injector.get(wq,[])]));this.chain=r.reduceRight((i,s)=>function gEe(n,e,t){return(r,i)=>Ts(t,()=>e(r,s=>n(s,i)))}(i,s,this.injector),Iq)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(fg(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Re(DT),Re(Li))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const wEe=/^\)\]\}',?\n/;let Sq=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new K(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Wn(r.\u0275loadImpl()):Qe(null)).pipe(Qt(()=>new Ut(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((T,M)=>o.setRequestHeader(T,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const T=t.detectContentTypeHeader();null!==T&&o.setRequestHeader("Content-Type",T)}if(t.responseType){const T=t.responseType.toLowerCase();o.responseType="json"!==T?T:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const T=o.statusText||"OK",M=new Ca(o.getAllResponseHeaders()),B=function CEe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new MT({headers:M,status:o.status,statusText:T,url:B}),l},u=()=>{let{headers:T,status:M,statusText:B,url:V}=c(),Q=null;204!==M&&(Q=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=Q?200:0);let we=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof Q){const je=Q;Q=Q.replace(wEe,"");try{Q=""!==Q?JSON.parse(Q):null}catch(He){Q=je,we&&(we=!1,Q={error:He,text:Q})}}we?(s.next(new cf({body:Q,headers:T,status:M,statusText:B,url:V||void 0})),s.complete()):s.error(new pg({error:Q,headers:T,status:M,statusText:B,url:V||void 0}))},h=T=>{const{url:M}=c(),B=new pg({error:T,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(B)};let m=!1;const y=T=>{m||(s.next(c()),m=!0);let M={type:qu.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(M.total=T.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},b=T=>{let M={type:qu.UploadProgress,loaded:T.loaded};T.lengthComputable&&(M.total=T.total),s.next(M)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),t.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:qu.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Re(k7))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();const Ak=new Ee(""),xq=new Ee("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Dq=new Ee("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Rq{}let SEe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=v7(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Re(_n),Re(Ys),Re(xq))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();function xEe(n,e){const t=n.url.toLowerCase();if(!k(Ak)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=k(Rq).getToken(),i=k(Dq);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ku=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ku||{});function uf(n,e){return{\u0275kind:n,\u0275providers:e}}function DEe(...n){const e=[wb,Sq,Tq,{provide:xT,useExisting:Tq},{provide:DT,useFactory:()=>k(Ck,{optional:!0})??k(Sq)},{provide:Cb,useValue:xEe,multi:!0},{provide:Ak,useValue:!0},{provide:Rq,useClass:SEe}];for(const t of n)e.push(...t.\u0275providers);return El(e)}const Mq=new Ee(""),{isArray:BEe}=Array,{getPrototypeOf:UEe,prototype:jEe,keys:zEe}=Object;function Bq(n){if(1===n.length){const e=n[0];if(BEe(e))return{args:e,keys:null};if(function HEe(n){return n&&"object"==typeof n&&UEe(n)===jEe}(e)){const t=zEe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:$Ee}=Array;function Sk(n){return Be(e=>function WEe(n,e){return $Ee(e)?n(...e):n(e)}(n,e))}function Uq(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function kT(...n){const e=bk(n),{args:t,keys:r}=Bq(n),i=new Ut(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;ro(t[u]).subscribe(Fe(s,m=>{h||(h=!0,c--),a[u]=m},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(r?Uq(r,a):a),s.complete())}))}});return e?i.pipe(Sk(e)):i}let jq=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(De(qa),De(jn))}}static{this.\u0275dir=Je({type:n})}}return n})(),df=(()=>{class n extends jq{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})()}static{this.\u0275dir=Je({type:n,features:[wn]})}}return n})();const el=new Ee(""),qEe={provide:el,useExisting:Qn(()=>mg),multi:!0},QEe=new Ee("");let mg=(()=>{class n extends jq{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function KEe(){const n=Wu()?Wu().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(De(qa),De(jn),De(QEe,8))}}static{this.\u0275dir=Je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&kt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[sr([qEe]),wn]})}}return n})();function Qu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Hq(n){return null!=n&&"number"==typeof n.length}const ks=new Ee(""),Yu=new Ee(""),YEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class NT{static min(e){return function $q(n){return e=>{if(Qu(e.value)||Qu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Wq(n){return e=>{if(Qu(e.value)||Qu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Gq(n){return Qu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function qq(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Kq(n){return Qu(n.value)||YEe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Qq(n){return e=>Qu(e.value)||!Hq(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Yq(n){return e=>Hq(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Xq(n){if(!n)return OT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Qu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return r8(e)}static composeAsync(e){return i8(e)}}function OT(n){return null}function Zq(n){return null!=n}function Jq(n){return ub(n)?Wn(n):n}function e8(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function t8(n,e){return e.map(t=>t(n))}function n8(n){return n.map(e=>function XEe(n){return!n.validate}(e)?e:t=>e.validate(t))}function r8(n){if(!n)return null;const e=n.filter(Zq);return 0==e.length?null:function(t){return e8(t8(t,e))}}function xk(n){return null!=n?r8(n8(n)):null}function i8(n){if(!n)return null;const e=n.filter(Zq);return 0==e.length?null:function(t){return kT(t8(t,e).map(Jq)).pipe(Be(e8))}}function Dk(n){return null!=n?i8(n8(n)):null}function s8(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function o8(n){return n._rawValidators}function a8(n){return n._rawAsyncValidators}function Rk(n){return n?Array.isArray(n)?n:[n]:[]}function FT(n,e){return Array.isArray(n)?n.includes(e):n===e}function l8(n,e){const t=Rk(e);return Rk(n).forEach(i=>{FT(t,i)||t.push(i)}),t}function c8(n,e){return Rk(e).filter(t=>!FT(n,t))}class u8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Dk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class io extends u8{get formDirective(){return null}get path(){return null}}class Xu extends u8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class d8{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let LT=(()=>{class n extends d8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Xu,2))}}static{this.\u0275dir=Je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Lr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[wn]})}}return n})(),Mk=(()=>{class n extends d8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(io,10))}}static{this.\u0275dir=Je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Lr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[wn]})}}return n})();const Tb="VALID",BT="INVALID",gg="PENDING",Ab="DISABLED";class _g{}class f8 extends _g{constructor(e,t){super(),this.value=e,this.source=t}}class Nk extends _g{constructor(e,t){super(),this.pristine=e,this.source=t}}class Ok extends _g{constructor(e,t){super(),this.touched=e,this.source=t}}class UT extends _g{constructor(e,t){super(),this.status=e,this.source=t}}class nIe extends _g{constructor(e){super(),this.source=e}}class rIe extends _g{constructor(e){super(),this.source=e}}function Fk(n){return(jT(n)?n.validators:n)||null}function Lk(n,e){return(jT(e)?e.asyncValidators:n)||null}function jT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function p8(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[t])throw new K(1001,"")}function m8(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new K(1002,"")})}class zT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=mb(()=>this.statusReactive()),this.statusReactive=qh(void 0),this._pristine=mb(()=>this.pristineReactive()),this.pristineReactive=qh(!0),this._touched=mb(()=>this.touchedReactive()),this.touchedReactive=qh(!1),this._events=new E,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xa(this.statusReactive)}set status(e){Xa(()=>this.statusReactive.set(e))}get valid(){return this.status===Tb}get invalid(){return this.status===BT}get pending(){return this.status==gg}get disabled(){return this.status===Ab}get enabled(){return this.status!==Ab}get pristine(){return Xa(this.pristineReactive)}set pristine(e){Xa(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Xa(this.touchedReactive)}set touched(e){Xa(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(l8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(l8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(c8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(c8(e,this._rawAsyncValidators))}hasValidator(e){return FT(this._rawValidators,e)}hasAsyncValidator(e){return FT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new Ok(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new Ok(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new Nk(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new Nk(!0,r))}markAsPending(e={}){this.status=gg;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new UT(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ab,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new f8(this.value,r)),this._events.next(new UT(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tb,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tb||this.status===gg)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new f8(this.value,t)),this._events.next(new UT(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ab:Tb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=gg,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=Jq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new UT(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new pn,this.statusChanges=new pn}_calculateStatus(){return this._allControlsDisabled()?Ab:this.errors?BT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gg)?gg:this._anyControlsHaveStatus(BT)?BT:Tb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Nk(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ok(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function iIe(n){return Array.isArray(n)?xk(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function sIe(n){return Array.isArray(n)?Dk(n):n||null}(this._rawAsyncValidators)}}class hf extends zT{constructor(e,t,r){super(Fk(t),Lk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){m8(this,0,e),Object.keys(e).forEach(r=>{p8(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class g8 extends hf{}const ff=new Ee("CallSetDisabledState",{providedIn:"root",factory:()=>Sb}),Sb="always";function HT(n,e){return[...e.path,n]}function xb(n,e,t=Sb){Vk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function aIe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&_8(n,e)})}(n,e),function cIe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function lIe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&_8(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function oIe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $T(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),GT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function WT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Vk(n,e){const t=o8(n);null!==e.validator?n.setValidators(s8(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=a8(n);null!==e.asyncValidator?n.setAsyncValidators(s8(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();WT(e._rawValidators,i),WT(e._rawAsyncValidators,i)}function GT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=o8(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=a8(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return WT(e._rawValidators,r),WT(e._rawAsyncValidators,r),t}function _8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function y8(n,e){Vk(n,e)}function Uk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function v8(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function jk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===mg?t=s:function hIe(n){return Object.getPrototypeOf(n.constructor)===df}(s)?r=s:i=s}),i||r||t||null}const pIe={provide:io,useExisting:Qn(()=>qT)},Db=Promise.resolve();let qT=(()=>{class n extends io{get submitted(){return Xa(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=mb(()=>this.submittedReactive()),this.submittedReactive=qh(!1),this._directives=new Set,this.ngSubmit=new pn,this.form=new hf({},xk(t),Dk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Db.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),xb(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Db.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Db.then(()=>{const r=this._findContainer(t.path),i=new hf({});y8(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Db.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Db.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),v8(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(De(ks,10),De(Yu,10),De(ff,8))}}static{this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&kt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sr([pIe]),wn]})}}return n})();function b8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function E8(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const yg=class extends zT{constructor(e=null,t,r){super(Fk(t),Lk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=E8(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){b8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){b8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){E8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},_Ie={provide:Xu,useExisting:Qn(()=>KT)},C8=Promise.resolve();let KT=(()=>{class n extends Xu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new yg,this._registered=!1,this.name="",this.update=new pn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=jk(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Uk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){C8.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&oi(r);C8.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?HT(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(De(io,9),De(ks,10),De(Yu,10),De(el,10),De(Ea,8),De(ff,8))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sr([_Ie]),wn,cs]})}}return n})(),zk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const Hk=new Ee(""),wIe={provide:io,useExisting:Qn(()=>QT)};let QT=(()=>{class n extends io{get submitted(){return Xa(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=mb(()=>this._submittedReactive()),this._submittedReactive=qh(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new pn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(GT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return xb(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){$T(t.control||null,t,!1),function fIe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),v8(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new nIe(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new rIe(this.form))}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&($T(r||null,t),(n=>n instanceof yg)(i)&&(xb(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);y8(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function uIe(n,e){return GT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Vk(this.form,this),this._oldForm&&GT(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||n)(De(ks,10),De(Yu,10),De(ff,8))}}static{this.\u0275dir=Je({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&kt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sr([wIe]),wn,cs]})}}return n})();const AIe={provide:Xu,useExisting:Qn(()=>Gk)};let Gk=(()=>{class n extends Xu{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new pn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=jk(0,s)}ngOnChanges(t){this._added||this._setUpControl(),Uk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return HT(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(De(io,13),De(ks,10),De(Yu,10),De(el,10),De(Hk,8))}}static{this.\u0275dir=Je({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[sr([AIe]),wn,cs]})}}return n})(),j8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({})}}return n})();class z8 extends zT{constructor(e,t,r){super(Fk(t),Lk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){m8(this,0,e),e.forEach((r,i)=>{p8(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function H8(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let jIe=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return H8(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new hf(i,s)}record(t,r=null){const i=this._reduceControls(t);return new g8(i,r)}control(t,r,i){let s={};return this.useNonNullable?(H8(r)?s=r:(s.validators=r,s.asyncValidators=i),new yg(t,{...s,nonNullable:!0})):new yg(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new z8(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof yg||t instanceof zT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ff,useValue:t.callSetDisabledState??Sb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({imports:[j8]})}}return n})(),$8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Hk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ff,useValue:t.callSetDisabledState??Sb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({imports:[j8]})}}return n})();function YT(...n){const e=Eb(n),t=bk(n),{args:r,keys:i}=Bq(n);if(0===r.length)return Wn([],e);const s=new Ut(function zIe(n,e,t=Pi){return r=>{W8(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)W8(e,()=>{const c=Wn(n[l],e);let u=!1;c.subscribe(Fe(r,h=>{s[l]=h,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Uq(i,o):Pi));return t?s.pipe(Sk(t)):s}function W8(n,e,t){n?Oc(t,n,e):e()}const XT=Jr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function vg(n=1/0){return Xi(Pi,n)}function Rb(...n){return function HIe(){return vg(1)}()(Wn(n,Eb(n)))}function Mb(n){return new Ut(e=>{ro(n()).subscribe(e)})}function Pb(n,e){const t=mt(n)?n:()=>n,r=i=>i.error(t());return new Ut(e?i=>e.schedule(r,0,i):r)}const tl=new Ut(n=>n.complete());function Zk(){return ye((n,e)=>{let t=null;n._refCount++;const r=Fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class G8 extends Ut{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,j(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dt;const t=this.getSubject();e.add(this.source.subscribe(Fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dt.EMPTY)}return e}refCount(){return Zk()(this)}}function Zi(n){return n<=0?()=>tl:ye((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function nl(...n){const e=Eb(n);return ye((t,r)=>{(e?Rb(n,t,e):Rb(n,t)).subscribe(r)})}function ZT(n){return ye((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function q8(n=WIe){return ye((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function WIe(){return new XT}function Zu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Yr((i,s)=>n(i,s,r)):Pi,Zi(1),t?ZT(e):q8(()=>new XT))}function ai(n,e,t){const r=mt(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Fe(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Pi}function Ju(n){return ye((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Fe(t,void 0,void 0,o=>{s=ro(n(o,Ju(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function bg(n,e){return ye(function GIe(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Fe(o,u=>{const h=c++;l=a?n(l,u,h):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Jk(n){return n<=0?()=>tl:ye((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function K8(n){return Be(()=>n)}function Eg(n){return ye((e,t)=>{ro(n).subscribe(Fe(t,()=>t.complete(),vs)),!t.closed&&e.subscribe(t)})}const Zt="primary",kb=Symbol("RouteTitle");class KIe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ig(n){return new KIe(n)}function QIe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function kl(n,e){const t=n?eN(n):void 0,r=e?eN(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Q8(n[i],e[i]))return!1;return!0}function eN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Q8(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Y8(n){return n.length>0?n[n.length-1]:null}function ed(n){return function Xk(n){return!!n&&(n instanceof Ut||mt(n.lift)&&mt(n.subscribe))}(n)?n:ub(n)?Wn(Promise.resolve(n)):Qe(n)}const XIe={exact:function J8(n,e,t){if(!gf(n.segments,e.segments)||!JT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!J8(n.children[r],e.children[r],t))return!1;return!0},subset:e9},X8={exact:function ZIe(n,e){return kl(n,e)},subset:function JIe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Q8(n[t],e[t]))},ignored:()=>!0};function Z8(n,e,t){return XIe[t.paths](n.root,e.root,t.matrixParams)&&X8[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function e9(n,e,t){return t9(n,e,e.segments,t)}function t9(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!gf(i,t)||e.hasChildren()||!JT(i,t,r))}if(n.segments.length===t.length){if(!gf(n.segments,t)||!JT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!e9(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(gf(n.segments,i)&&JT(n.segments,i,r)&&n.children[Zt])&&t9(n.children[Zt],e,s,r)}}function JT(n,e,t){return e.every((r,i)=>X8[t](n[i].parameters,r.parameters))}class mf{constructor(e=new tr([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ig(this.queryParams),this._queryParamMap}toString(){return nwe.serialize(this)}}class tr{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tA(this)}}class Nb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ig(this.parameters),this._parameterMap}toString(){return i9(this)}}function gf(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let wg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>new eA,providedIn:"root"})}}return n})();class eA{parse(e){const t=new fwe(e);return new mf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ob(e.root,!0)}`,r=function swe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${nA(t)}=${nA(i)}`).join("&"):`${nA(t)}=${nA(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function rwe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const nwe=new eA;function tA(n){return n.segments.map(e=>i9(e)).join("/")}function Ob(n,e){if(!n.hasChildren())return tA(n);if(e){const t=n.children[Zt]?Ob(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Zt&&r.push(`${i}:${Ob(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function twe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Zt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Zt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Zt?[Ob(n.children[Zt],!1)]:[`${i}:${Ob(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${tA(n)}/${t[0]}`:`${tA(n)}/(${t.join("//")})`}}function n9(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nA(n){return n9(n).replace(/%3B/gi,";")}function tN(n){return n9(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rA(n){return decodeURIComponent(n)}function r9(n){return rA(n.replace(/\+/g,"%20"))}function i9(n){return`${tN(n.path)}${function iwe(n){return Object.entries(n).map(([e,t])=>`;${tN(e)}=${tN(t)}`).join("")}(n.parameters)}`}const owe=/^[^\/()?;#]+/;function nN(n){const e=n.match(owe);return e?e[0]:""}const awe=/^[^\/()?;=#]+/,cwe=/^[^=?&#]+/,dwe=/^[^&#]+/;class fwe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tr([],{}):new tr([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new tr(e,t)),r}parseSegment(){const e=nN(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Nb(rA(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function lwe(n){const e=n.match(awe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=nN(this.remaining);i&&(r=i,this.capture(r))}e[rA(t)]=rA(r)}parseQueryParam(e){const t=function uwe(n){const e=n.match(cwe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function hwe(n){const e=n.match(dwe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=r9(t),s=r9(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nN(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Zt]:new tr([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}}function s9(n){return n.segments.length>0?new tr([],{[Zt]:n}):n}function o9(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=o9(i);if(r===Zt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function pwe(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new tr(n.segments.concat(e.segments),e.children)}return n}(new tr(n.segments,e))}function _f(n){return n instanceof mf}function a9(n){let e;const i=s9(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new tr(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function l9(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return rN(i,i,i,t,r);const s=function gwe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new u9(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new u9(t,e,r)}(e);if(s.toRoot())return rN(i,i,new tr([],{}),t,r);const o=function _we(n,e,t){if(n.isAbsolute)return new sA(e,!0,0);if(!t)return new sA(e,!1,NaN);if(null===t.parent)return new sA(t,!0,0);const r=iA(n.commands[0])?0:1;return function ywe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new sA(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Lb(o.segmentGroup,o.index,s.commands):d9(o.segmentGroup,o.index,s.commands);return rN(i,o.segmentGroup,a,t,r)}function iA(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Fb(n){return"object"==typeof n&&null!=n&&n.outlets}function rN(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:c9(n,e,t);const a=s9(o9(o));return new mf(a,s,i)}function c9(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:c9(s,e,t)}),new tr(n.segments,r)}class u9{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&iA(r[0]))throw new K(4003,!1);const i=r.find(Fb);if(i&&i!==Y8(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function d9(n,e,t){if(n??=new tr([],{}),0===n.segments.length&&n.hasChildren())return Lb(n,e,t);const r=function bwe(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Fb(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!f9(l,c,o))return s;r+=2}else{if(!f9(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new tr(n.segments.slice(0,r.pathIndex),{});return s.children[Zt]=new tr(n.segments.slice(r.pathIndex),n.children),Lb(s,0,i)}return r.match&&0===i.length?new tr(n.segments,{}):r.match&&!n.hasChildren()?iN(n,e,t):r.match?Lb(n,0,i):iN(n,e,t)}function Lb(n,e,t){if(0===t.length)return new tr(n.segments,{});{const r=function vwe(n){return Fb(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Zt)&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const s=Lb(n.children[Zt],e,t);return new tr(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=d9(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new tr(n.segments,i)}}function iN(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Fb(s)){const l=Ewe(s.outlets);return new tr(r,l)}if(0===i&&iA(t[0])){r.push(new Nb(n.segments[e].path,h9(t[0]))),i++;continue}const o=Fb(s)?s.outlets[Zt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&iA(a)?(r.push(new Nb(o,h9(a))),i+=2):(r.push(new Nb(o,{})),i++)}return new tr(r,{})}function Ewe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=iN(new tr([],{}),0,r))}),e}function h9(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function f9(n,e,t){return n==t.path&&kl(e,t.parameters)}const Vb="imperative";var Cn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Cn||{});class Nl{constructor(e,t){this.id=e,this.url=t}}class oA extends Nl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Cn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fc extends Nl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Cn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Zo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Zo||{}),aA=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(aA||{});class yf extends Nl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Cn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cg extends Nl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Cn.NavigationSkipped}}class sN extends Nl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Cn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class p9 extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Cn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Iwe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Cn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wwe extends Nl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Cn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cwe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Cn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Twe extends Nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Cn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Awe{constructor(e){this.route=e,this.type=Cn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Swe{constructor(e){this.route=e,this.type=Cn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xwe{constructor(e){this.snapshot=e,this.type=Cn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dwe{constructor(e){this.snapshot=e,this.type=Cn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rwe{constructor(e){this.snapshot=e,this.type=Cn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mwe{constructor(e){this.snapshot=e,this.type=Cn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m9{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Cn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oN{}class lA{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function rl(n){return n.outlet||Zt}function Bb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Lwe{get injector(){return Bb(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ub(this.rootInjector),this.attachRef=null}}let Ub=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Lwe(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Re(Li))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class g9{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=aN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=aN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lN(e,this._root).map(t=>t.value)}}function aN(n,e){if(n===e.value)return e;for(const t of e.children){const r=aN(n,t);if(r)return r}return null}function lN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=lN(n,t);if(r.length)return r.unshift(e),r}return[]}class il{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Tg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _9 extends g9{constructor(e,t){super(e),this.snapshot=t,cN(this,e)}toString(){return this.snapshot.toString()}}function y9(n){const e=function Vwe(n){const s=new uA([],{},{},"",{},Zt,n,null,{});return new v9("",new il(s,[]))}(n),t=new F([new Nb("",{})]),r=new F({}),i=new F({}),s=new F({}),o=new F(""),a=new Ag(t,r,s,o,i,Zt,n,e.root);return a.snapshot=e.root,new _9(new il(a,[]),e)}class Ag{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Be(c=>c[kb]))??Qe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(e=>Ig(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(e=>Ig(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cA(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&E9(i)&&(r.resolve[kb]=i.title),r}class uA{get title(){return this.data?.[kb]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ig(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ig(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class v9 extends g9{constructor(e,t){super(t),this.url=e,cN(this,t)}toString(){return b9(this._root)}}function cN(n,e){e.value._routerState=n,e.children.forEach(t=>cN(n,t))}function b9(n){const e=n.children.length>0?` { ${n.children.map(b9).join(", ")} } `:"";return`${n.value}${e}`}function uN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kl(e.params,t.params)||n.paramsSubject.next(t.params),function YIe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),kl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function dN(n,e){const t=kl(n.params,e.params)&&function ewe(n,e){return gf(n,e)&&n.every((t,r)=>kl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||dN(n.parent,e.parent))}function E9(n){return"string"==typeof n.title||null===n.title}let hN=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new pn,this.deactivateEvents=new pn,this.attachEvents=new pn,this.detachEvents=new pn,this.parentContexts=k(Ub),this.location=k(xo),this.changeDetector=k(Ea),this.inputBinder=k(dA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new fN(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Je({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[cs]})}}return n})();class fN{__ngOutletInjector(e){return new fN(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ag?this.route:e===Ub?this.childContexts:this.parent.get(e,t)}}const dA=new Ee("");let I9=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=YT([r.queryParams,r.params,r.data]).pipe(Qt(([s,o,a],l)=>(a={...s,...o,...a},0===l?Qe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function _ye(n){const e=Xt(n);if(!e)return null;const t=new Bv(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();function jb(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Uwe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return jb(n,r,i);return jb(n,r)})}(n,e,t);return new il(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>jb(n,a)),o}}const r=function jwe(n){return new Ag(new F(n.url),new F(n.params),new F(n.queryParams),new F(n.fragment),new F(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>jb(n,s));return new il(r,i)}}class pN{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const w9="ngNavigationCancelingError";function hA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=_f(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=C9(!1,Zo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function C9(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[w9]=!0,t.cancellationCode=e,t}function T9(n){return!!n&&n[w9]}class $we{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),uN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Tg(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Tg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Tg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Tg(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Mwe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Dwe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(uN(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),uN(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class A9{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fA{constructor(e,t){this.component=e,this.route=t}}function Wwe(n,e,t){const r=n._root;return zb(r,e?e._root:null,t,[r.value])}function Sg(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function CR(n){return null!==yu(n)}(n)?e.get(n):n:r}function zb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Tg(e);return n.children.forEach(o=>{(function qwe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Kwe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gf(n.url,e.url)||!kl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dN(n,e)||!kl(n.queryParams,e.queryParams);default:return!dN(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new A9(r)):(s.data=o.data,s._resolvedData=o._resolvedData),zb(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fA(a.outlet.component,o))}else o&&Hb(e,a,i),i.canActivateChecks.push(new A9(r)),zb(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Hb(a,t.getContext(o),i)),i}function Hb(n,e,t){const r=Tg(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Hb(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new fA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $b(n){return"function"==typeof n}function S9(n){return n instanceof XT||"EmptyError"===n?.name}const pA=Symbol("INITIAL_VALUE");function xg(){return Qt(n=>YT(n.map(e=>e.pipe(Zi(1),nl(pA)))).pipe(Be(e=>{for(const t of e)if(!0!==t){if(t===pA)return pA;if(!1===t||t0e(t))return t}return!0}),Yr(e=>e!==pA),Zi(1)))}function t0e(n){return _f(n)||n instanceof pN}function x9(n){return function Va(...n){return pa(n)}(ai(e=>{if("boolean"!=typeof e)throw hA(0,e)}),Be(e=>!0===e))}class mN{constructor(e){this.segmentGroup=e||null}}class mA extends Error{constructor(e){super(),this.urlTree=e}}function Dg(n){return Pb(new mN(n))}class p0e{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Qe(r);if(i.numberOfChildren>1||!i.children[Zt])return Pb(new K(4e3,!1));i=i.children[Zt]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:l,fragment:c,routeConfig:u,url:h,outlet:m,params:y,data:b,title:T}=i,M=Ts(s,()=>a({params:y,data:b,queryParams:l,fragment:c,routeConfig:u,url:h,outlet:m,title:T}));if(M instanceof mf)throw new mA(M);t=M}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new mA(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new mf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new tr(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const gN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function m0e(n,e,t,r,i){const s=D9(n,e,t);return s.matched?(r=function Pwe(n,e){return n.providers&&!n._injector&&(n._injector=xC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function d0e(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Qe(i.map(o=>{const a=Sg(o,n);return ed(function e0e(n){return n&&$b(n.canMatch)}(a)?a.canMatch(e,t):Ts(n,()=>a(e,t)))})).pipe(xg(),x9()):Qe(!0)}(r,e,t).pipe(Be(o=>!0===o?s:{...gN}))):Qe(s)}function D9(n,e,t){if("**"===e.path)return function g0e(n){return{matched:!0,parameters:n.length>0?Y8(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...gN}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||QIe)(t,n,e);if(!i)return{...gN};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function R9(n,e,t,r){return t.length>0&&function v0e(n,e,t){return t.some(r=>gA(n,e,r)&&rl(r)!==Zt)}(n,t,r)?{segmentGroup:new tr(e,y0e(r,new tr(t,n.children))),slicedSegments:[]}:0===t.length&&function b0e(n,e,t){return t.some(r=>gA(n,e,r))}(n,t,r)?{segmentGroup:new tr(n.segments,_0e(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new tr(n.segments,n.children),slicedSegments:t}}function _0e(n,e,t,r){const i={};for(const s of t)if(gA(n,e,s)&&!r[rl(s)]){const o=new tr([],{});i[rl(s)]=o}return{...r,...i}}function y0e(n,e){const t={};t[Zt]=e;for(const r of n)if(""===r.path&&rl(r)!==Zt){const i=new tr([],{});t[rl(r)]=i}return t}function gA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class I0e{}class T0e{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new p0e(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){const e=R9(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Be(({children:t,rootSnapshot:r})=>{const i=new il(r,t),s=new v9("",i),o=function mwe(n,e,t=null,r=null){return l9(a9(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new uA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Zt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Zt,t).pipe(Be(r=>({children:r,rootSnapshot:t})),Ju(r=>{if(r instanceof mA)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mN?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Be(o=>o instanceof il?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return Wn(s).pipe(hg(o=>{const a=r.children[o],l=function Fwe(n,e){const t=n.filter(r=>rl(r)===e);return t.push(...n.filter(r=>rl(r)!==e)),t}(t,o);return this.processSegmentGroup(e,l,a,o,i)}),bg((o,a)=>(o.push(...a),o)),ZT(null),function qIe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Yr((i,s)=>n(i,s,r)):Pi,Jk(1),t?ZT(e):q8(()=>new XT))}(),Xi(o=>{if(null===o)return Dg(r);const a=M9(o);return function A0e(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Qe(a)}))}processSegment(e,t,r,i,s,o,a){return Wn(t).pipe(hg(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(Ju(c=>{if(c instanceof mN)return Qe(null);throw c}))),Zu(l=>!!l),Ju(l=>{if(S9(l))return function E0e(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?Qe(new I0e):Dg(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return rl(r)===o||o!==Zt&&gA(i,s,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):Dg(i):Dg(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:h,remainingSegments:m}=D9(t,i,s);if(!l)return Dg(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const y=new uA(s,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,P9(i),rl(i),i.component??i._loadedComponent??null,i,k9(i)),b=cA(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);const T=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,y,e);return this.applyRedirects.lineralizeSegments(i,T).pipe(Xi(M=>this.processSegment(e,r,t,M.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=m0e(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(Qt(l=>l.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Qt(({routes:c})=>{const u=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:y}=l,b=new uA(m,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,P9(r),rl(r),r.component??r._loadedComponent??null,r,k9(r)),T=cA(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(T.params),b.data=Object.freeze(T.data);const{segmentGroup:M,slicedSegments:B}=R9(t,m,y,c);if(0===B.length&&M.hasChildren())return this.processChildren(u,c,M,b).pipe(Be(Q=>new il(b,Q)));if(0===c.length&&0===B.length)return Qe(new il(b,[]));const V=rl(r)===s;return this.processSegment(u,c,M,B,V?Zt:s,!0,b).pipe(Be(Q=>new il(b,Q instanceof il?[Q]:[])))})):Dg(t)))}getChildConfig(e,t,r){return t.children?Qe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function u0e(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Qe(!0):Qe(i.map(o=>{const a=Sg(o,n);return ed(function Ywe(n){return n&&$b(n.canLoad)}(a)?a.canLoad(e,t):Ts(n,()=>a(e,t)))})).pipe(xg(),x9())}(e,t,r).pipe(Xi(i=>i?this.configLoader.loadChildren(e,t).pipe(ai(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function f0e(){return Pb(C9(!1,Zo.GuardRejected))}())):Qe({routes:[],injector:e})}}function S0e(n){const e=n.value.routeConfig;return e&&""===e.path}function M9(n){const e=[],t=new Set;for(const r of n){if(!S0e(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=M9(r.children);e.push(new il(r.value,i))}return e.filter(r=>!t.has(r))}function P9(n){return n.data||{}}function k9(n){return n.resolve||{}}function N9(n){const e=n.children.map(t=>N9(t)).flat();return[n,...e]}function _N(n){return Qt(e=>{const t=n(e);return t?Wn(t).pipe(Be(()=>e)):Qe(e)})}let O9=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[kb]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>k(k0e),providedIn:"root"})}}return n})(),k0e=(()=>{class n extends O9{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Re(Fbe))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Rg=new Ee("",{providedIn:"root",factory:()=>({})});let F9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vn({type:n,selectors:[["ng-component"]],standalone:!0,features:[si],decls:1,vars:0,template:function(r,i){1&r&&Et(0,"router-outlet")},dependencies:[hN],encapsulation:2})}}return n})();function yN(n){const e=n.children&&n.children.map(yN),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=F9),t}const Mg=new Ee("");let vN=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(p6)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ed(t.loadComponent()).pipe(Be(L9),ai(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),fg(()=>{this.componentLoaders.delete(t)})),i=new G8(r,()=>new E).pipe(Zk());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Qe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function N0e(n,e,t,r){return ed(n.loadChildren()).pipe(Be(L9),Xi(i=>i instanceof MW||Array.isArray(i)?Qe(i):Wn(e.compileModuleAsync(i))),Be(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Mg,[],{optional:!0,self:!0}).flat()),{routes:o.map(yN),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(fg(()=>{this.childrenLoaders.delete(r)})),o=new G8(s,()=>new E).pipe(Zk());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function L9(n){return function O0e(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let bN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>k(F0e),providedIn:"root"})}}return n})(),F0e=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const V9=new Ee(""),B9=new Ee("");function L0e(n,e,t){const r=n.get(B9),i=n.get(_n);return n.get(yt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s;const o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),function V0e(n){return new Promise(e=>{Dc({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:l}=r;return l&&Ts(n,()=>l({transition:a,from:e,to:t})),o})}const U9=new Ee("");let _A=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new E,this.transitionAbortSubject=new E,this.configLoader=k(vN),this.environmentInjector=k(Li),this.urlSerializer=k(wg),this.rootContexts=k(Ub),this.location=k(cg),this.inputBindingEnabled=null!==k(dA,{optional:!0}),this.titleStrategy=k(O9),this.options=k(Rg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(bN),this.createViewTransition=k(V9,{optional:!0}),this.navigationErrorHandler=k(U9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Qe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Swe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Awe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new F({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Vb,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Yr(s=>0!==s.id),Be(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Qt(s=>{let o=!1,a=!1;return Qe(s).pipe(Qt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Zo.SupersededByNewNavigation),tl;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:"string"==typeof l.extras.browserUrl?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new Cg(l.id,this.urlSerializer.serialize(l.rawUrl),h,aA.IgnoredSameUrlNavigation)),l.resolve(!1),tl}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Qe(l).pipe(Qt(h=>{const m=this.transitions?.getValue();return this.events.next(new oA(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?tl:Promise.resolve(h)}),function x0e(n,e,t,r,i,s){return Xi(o=>function w0e(n,e,t,r,i,s,o="emptyOnly"){return new T0e(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Be(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ai(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const m=new p9(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:h,extractedUrl:m,source:y,restoredState:b,extras:T}=l,M=new oA(h,this.urlSerializer.serialize(m),y,b);this.events.next(M);const B=y9(this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:B,urlAfterRedirects:m,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=m,Qe(s)}{const h="";return this.events.next(new Cg(l.id,this.urlSerializer.serialize(l.extractedUrl),h,aA.IgnoredByUrlHandlingStrategy)),l.resolve(!1),tl}}),ai(l=>{const c=new Iwe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Be(l=>(this.currentTransition=s={...l,guards:Wwe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function n0e(n,e){return Xi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Qe({...t,guardsResult:!0}):function r0e(n,e,t,r){return Wn(n).pipe(Xi(i=>function c0e(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Qe(s.map(a=>{const l=Bb(e)??i,c=Sg(a,l);return ed(function Jwe(n){return n&&$b(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):Ts(l,()=>c(n,e,t,r))).pipe(Zu())})).pipe(xg()):Qe(!0)}(i.component,i.route,t,e,r)),Zu(i=>!0!==i,!0))}(o,r,i,n).pipe(Xi(a=>a&&function Qwe(n){return"boolean"==typeof n}(a)?function i0e(n,e,t,r){return Wn(e).pipe(hg(i=>Rb(function o0e(n,e){return null!==n&&e&&e(new xwe(n)),Qe(!0)}(i.route.parent,r),function s0e(n,e){return null!==n&&e&&e(new Rwe(n)),Qe(!0)}(i.route,r),function l0e(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Gwe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Mb(()=>Qe(o.guards.map(l=>{const c=Bb(o.node)??t,u=Sg(l,c);return ed(function Zwe(n){return n&&$b(n.canActivateChild)}(u)?u.canActivateChild(r,n):Ts(c,()=>u(r,n))).pipe(Zu())})).pipe(xg())));return Qe(s).pipe(xg())}(n,i.path,t),function a0e(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const i=r.map(s=>Mb(()=>{const o=Bb(e)??t,a=Sg(s,o);return ed(function Xwe(n){return n&&$b(n.canActivate)}(a)?a.canActivate(e,n):Ts(o,()=>a(e,n))).pipe(Zu())}));return Qe(i).pipe(xg())}(n,i.route,t))),Zu(i=>!0!==i,!0))}(r,s,n,e):Qe(a)),Be(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),ai(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw hA(0,l.guardsResult);const c=new wwe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Yr(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",Zo.GuardRejected),!1)),_N(l=>{if(l.guards.canActivateChecks.length)return Qe(l).pipe(ai(c=>{const u=new Cwe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Qt(c=>{let u=!1;return Qe(c).pipe(function D0e(n,e){return Xi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Qe(t);const s=new Set(i.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const c of N9(l))o.add(c);let a=0;return Wn(o).pipe(hg(l=>s.has(l)?function R0e(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!E9(i)&&(s[kb]=i.title),function M0e(n,e,t,r){const i=eN(n);if(0===i.length)return Qe({});const s={};return Wn(i).pipe(Xi(o=>function P0e(n,e,t,r){const i=Bb(e)??r,s=Sg(n,i);return ed(s.resolve?s.resolve(e,t):Ts(i,()=>s(e,t)))}(n[o],e,t,r).pipe(Zu(),ai(a=>{if(a instanceof pN)throw hA(new eA,a);s[o]=a}))),Jk(1),K8(s),Ju(o=>S9(o)?tl:Pb(o)))}(s,n,e,r).pipe(Be(o=>(n._resolvedData=o,n.data=cA(n,n.parent,t).resolve,null)))}(l,r,n,e):(l.data=cA(l,l.parent,n).resolve,Qe(void 0))),ai(()=>a++),Jk(1),Xi(l=>a===o.size?Qe(t):tl))})}(this.paramsInheritanceStrategy,this.environmentInjector),ai({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Zo.NoDataFromResolver)}}))}),ai(c=>{const u=new Twe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),_N(l=>{const c=u=>{const h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(ai(m=>{u.component=m}),Be(()=>{})));for(const m of u.children)h.push(...c(m));return h};return YT(c(l.targetSnapshot.root)).pipe(ZT(null),Zi(1))}),_N(()=>this.afterPreactivation()),Qt(()=>{const{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?Wn(u).pipe(Be(()=>s)):Qe(s)}),Be(l=>{const c=function Bwe(n,e,t){const r=jb(n,e._root,t?t._root:void 0);return new _9(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,s}),ai(()=>{this.events.next(new oN)}),((n,e,t,r)=>Be(i=>(new $we(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Zi(1),ai({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Eg(this.transitionAbortSubject.pipe(ai(l=>{throw l}))),fg(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Zo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ju(l=>{if(a=!0,T9(l))this.events.next(new yf(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function zwe(n){return T9(n)&&_f(n.url)}(l)?this.events.next(new lA(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{const c=new sN(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{const u=Ts(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof pN){const{message:h,cancellationCode:m}=hA(0,u);this.events.next(new yf(s.id,this.urlSerializer.serialize(s.extractedUrl),h,m)),this.events.next(new lA(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);const h=t.errorHandler(l);s.resolve(!!h)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return tl}))}))}cancelNavigationTransition(t,r,i){const s=new yf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B0e(n){return n!==Vb}let U0e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>k(z0e),providedIn:"root"})}}return n})();class j0e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let z0e=(()=>{class n extends j0e{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})()}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),j9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:()=>k(H0e),providedIn:"root"})}}return n})(),H0e=(()=>{class n extends j9{constructor(){super(...arguments),this.location=k(cg),this.urlSerializer=k(wg),this.options=k(Rg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(bN),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=y9(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof oA)this.stateMemento=this.createStateMemento();else if(t instanceof Cg)this.rawUrlTree=r.initialUrl;else if(t instanceof p9){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof oN?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof yf&&(t.code===Zo.GuardRejected||t.code===Zo.NoDataFromResolver)?this.restoreHistory(r):t instanceof sN?this.restoreHistory(r,!0):t instanceof Fc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof mf?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})()}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Wb=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Wb||{});function z9(n,e){n.events.pipe(Yr(t=>t instanceof Fc||t instanceof yf||t instanceof sN||t instanceof Cg),Be(t=>t instanceof Fc||t instanceof Cg?Wb.COMPLETE:t instanceof yf&&(t.code===Zo.Redirect||t.code===Zo.SupersededByNewNavigation)?Wb.REDIRECTING:Wb.FAILED),Yr(t=>t!==Wb.REDIRECTING),Zi(1)).subscribe(()=>{e()})}function $0e(n){throw n}const W0e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G0e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ol=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(r6),this.stateManager=k(j9),this.options=k(Rg,{optional:!0})||{},this.pendingTasks=k(Tc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(_A),this.urlSerializer=k(wg),this.location=k(cg),this.urlHandlingStrategy=k(bN),this._events=new E,this.errorHandler=this.options.errorHandler||$0e,this.navigated=!1,this.routeReuseStrategy=k(U0e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Mg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(dA,{optional:!0}),this.eventsSubscription=new Dt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof yf&&r.code!==Zo.Redirect&&r.code!==Zo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fc)this.navigated=!0;else if(r instanceof lA){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||B0e(i.source),...o};this.scheduleNavigation(a,Vb,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function K0e(n){return!(n instanceof oN||n instanceof lA)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vb,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yN),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let h,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{h=a9(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),h=this.currentUrlTree.root}return l9(h,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=_f(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Vb,null,r)}navigate(t,r={skipLocationChange:!1}){return function q0e(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new K(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...W0e}:!1===r?{...G0e}:r,_f(t))return Z8(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Z8(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,m)=>{a=h,l=m});const u=this.pendingTasks.add();return z9(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class H9{}let X0e=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Yr(t=>t instanceof Fc),hg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=xC(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Wn(i).pipe(vg())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Qe(null);const s=i.pipe(Xi(o=>null===o?Qe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?Wn([s,this.loader.loadComponent(r)]).pipe(vg()):s})}static{this.\u0275fac=function(r){return new(r||n)(Re(Ol),Re(p6),Re(Li),Re(H9),Re(vN))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const IN=new Ee("");let $9=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Cg&&t.code===aA.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof m9&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new m9(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function r3(){throw new Error("invalid")}()}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();function Fl(n,e){return{\u0275kind:n,\u0275providers:e}}function G9(){const n=k(Rn);return e=>{const t=n.get(ba);if(e!==t.components[0])return;const r=n.get(Ol),i=n.get(q9);1===n.get(wN)&&r.initialNavigation(),n.get(K9,null,jt.Optional)?.setUpPreloading(),n.get(IN,null,jt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const q9=new Ee("",{factory:()=>new E}),wN=new Ee("",{providedIn:"root",factory:()=>1}),K9=new Ee("");function tCe(n){return Fl(0,[{provide:K9,useExisting:X0e},{provide:H9,useExisting:n}])}function rCe(n){return Fl(9,[{provide:V9,useValue:L0e},{provide:B9,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const Q9=new Ee("ROUTER_FORROOT_GUARD"),iCe=[cg,{provide:wg,useClass:eA},Ol,Ub,{provide:Ag,useFactory:function W9(n){return n.routerState.root},deps:[Ol]},vN,[]];let Y9=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[iCe,[],{provide:Mg,multi:!0,useValue:t},{provide:Q9,useFactory:lCe,deps:[[Ol,new ki,new pc]]},{provide:Rg,useValue:r||{}},r?.useHash?{provide:rf,useClass:Iye}:{provide:rf,useClass:c7},{provide:IN,useFactory:()=>{const n=k(Lve),e=k(yt),t=k(Rg),r=k(_A),i=k(wg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new $9(i,r,n,e,t)}},r?.preloadingStrategy?tCe(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?cCe(r):[],r?.bindToComponentInputs?Fl(8,[I9,{provide:dA,useExisting:I9}]).\u0275providers:[],r?.enableViewTransitions?rCe().\u0275providers:[],[{provide:X9,useFactory:G9},{provide:ZC,multi:!0,useExisting:X9}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Mg,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Re(Q9,8))}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({})}}return n})();function lCe(n){return"guarded"}function cCe(n){return["disabled"===n.initialNavigation?Fl(3,[{provide:XC,multi:!0,useFactory:()=>{const e=k(Ol);return()=>{e.setUpLocationChangeListener()}}},{provide:wN,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fl(2,[{provide:wN,useValue:0},{provide:XC,multi:!0,deps:[Rn],useFactory:e=>{const t=e.get(bye,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ol),s=e.get(q9);z9(i,()=>{r(!0)}),e.get(_A).afterPreactivation=()=>(r(!0),s.closed?Qe(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const X9=new Ee("");function Z9(n){return null!=n&&"false"!=`${n}`}function J9(n,e=0){return function dCe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):2===arguments.length?e:0}function yA(n){return Array.isArray(n)?n:[n]}function xi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Pg(n){return n instanceof jn?n.nativeElement:n}const hCe=["addListener","removeListener"],fCe=["addEventListener","removeEventListener"],pCe=["on","off"];function vA(n,e,t,r){if(mt(t)&&(r=t,t=void 0),r)return vA(n,e,t).pipe(Sk(r));const[i,s]=function _Ce(n){return mt(n.addEventListener)&&mt(n.removeEventListener)}(n)?fCe.map(o=>a=>n[o](e,a,t)):function mCe(n){return mt(n.addListener)&&mt(n.removeListener)}(n)?hCe.map(eK(n,e)):function gCe(n){return mt(n.on)&&mt(n.off)}(n)?pCe.map(eK(n,e)):[];if(!i&&Ek(n))return Xi(o=>vA(o,e,t))(ro(n));if(!i)throw new TypeError("Invalid event target");return new Ut(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function eK(n,e){return t=>r=>n[t](e,r)}class yCe extends Dt{constructor(e,t){super()}schedule(e,t=0){return this}}const bA={setInterval(n,e,...t){const{delegate:r}=bA;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=bA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class EA extends yCe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return bA.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&bA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,nn(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Gb={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Gb;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new Dt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Gb;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Gb;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},CN={now:()=>(CN.delegate||Date).now(),delegate:void 0};class qb{constructor(e,t=qb.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}qb.now=CN.now;class IA extends qb{constructor(e,t=qb.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class bCe extends IA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class vCe extends EA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Gb.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(Gb.cancelAnimationFrame(t),e._scheduled=void 0)}});let TN,ICe=1;const wA={};function tK(n){return n in wA&&(delete wA[n],!0)}const wCe={setImmediate(n){const e=ICe++;return wA[e]=!0,TN||(TN=Promise.resolve()),TN.then(()=>tK(e)&&n()),e},clearImmediate(n){tK(n)}},{setImmediate:CCe,clearImmediate:TCe}=wCe,CA={setImmediate(...n){const{delegate:e}=CA;return(e?.setImmediate||CCe)(...n)},clearImmediate(n){const{delegate:e}=CA;return(e?.clearImmediate||TCe)(n)},delegate:void 0},vf=(new class SCe extends IA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class ACe extends EA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=CA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(CA.clearImmediate(t),e._scheduled=void 0)}}),new IA(EA)),DCe=vf;function nK(n=0,e,t=DCe){let r=-1;return null!=e&&(sq(e)?t=e:r=e),new Ut(i=>{let s=function MCe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function rK(n,e=vf){return function RCe(n){return ye((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(Fe(t,c=>{r=!0,i=c,s||ro(n(c)).subscribe(s=Fe(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>nK(n,e))}let AN;try{AN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{AN=!1}let Kb,Ns=(()=>{class n{_platformId=k(Ys);isBrowser=this._platformId?P7(this._platformId):"object"==typeof document&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!(!window.chrome&&!AN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ng(n){return function PCe(){if(null==Kb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Kb=!0}))}finally{Kb=Kb||!1}return Kb}()?n:!!n.capture}var Ll=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Ll||{});let TA,bf,SN;function sK(){if(null==bf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return bf=!1,bf;if("scrollBehavior"in document.documentElement.style)bf=!0;else{const n=Element.prototype.scrollTo;bf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return bf}function Qb(){if("object"!=typeof document||!document)return Ll.NORMAL;if(null==TA){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),TA=Ll.NORMAL,0===n.scrollLeft&&(n.scrollLeft=1,TA=0===n.scrollLeft?Ll.NEGATED:Ll.INVERTED),n.remove()}return TA}function xN(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Vl(n){return n.composedPath?n.composedPath()[0]:n.target}function oK(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const OCe=new Ee("cdk-dir-doc",{providedIn:"root",factory:function FCe(){return k(_n)}}),LCe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Og=(()=>{class n{value="ltr";change=new pn;constructor(){const t=k(OCe,{optional:!0});t&&(this.value=function VCe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?LCe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({})}return n})(),aK=(()=>{class n{_ngZone=k(yt);_platform=k(Ns);_document=k(_n,{optional:!0});constructor(){}_scrolled=new E;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ut(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(rK(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Qe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Yr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Pg(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>vA(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UCe=(()=>{class n{elementRef=k(jn);scrollDispatcher=k(aK);ngZone=k(yt);dir=k(Og,{optional:!0});_destroyed=new E;_elementScrolled=new Ut(t=>this.ngZone.runOutsideAngular(()=>vA(this.elementRef.nativeElement,"scroll").pipe(Eg(this._destroyed)).subscribe(t)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&Qb()!=Ll.NORMAL?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),Qb()==Ll.INVERTED?t.left=t.right:Qb()==Ll.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;sK()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?i:r:"end"==t&&(t=o?r:i),o&&Qb()==Ll.INVERTED?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Qb()==Ll.NEGATED?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),DN=(()=>{class n{_platform=k(Ns);_listeners;_viewportSize;_change=new E;_document=k(_n,{optional:!0});constructor(){const t=k(yt),r=k(Gh).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){const i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(rK(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({})}return n})(),lK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[Yb,Xb,Yb,Xb]})}return n})();class RN{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class MN extends RN{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=s}}class AA extends RN{templateRef;viewContainerRef;context;injector;constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class zCe extends RN{element;constructor(e){super(),this.element=e instanceof jn?e.nativeElement:e}}class PN{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof MN?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof AA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof zCe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class HCe extends PN{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,r,i,s){super(),this.outletElement=e,this._appRef=r,this._defaultInjector=i,this._document=s}attachComponentPortal(e){let t;if(e.viewContainerRef){const r=e.injector||e.viewContainerRef.injector,i=r.get(xc,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else t=s7(e.component,{elementInjector:e.injector||this._defaultInjector||Rn.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(t.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(t.hostView),t.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}attachDomPortal=e=>{const t=e.element,r=this._document.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let kN=(()=>{class n extends PN{_moduleRef=k(xc,{optional:!0});_document=k(_n);_viewContainerRef=k(xo);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new pn;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,i=r.createComponent(t.component,{index:r.length,injector:t.injector||r.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=t=>{const r=t.element,i=this._document.createComment("dom-portal");t.setAttachedHost(this),r.parentNode.insertBefore(i,r),this._getRootNode().appendChild(r),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(r,i)})};_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[wn]})}return n})(),SA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({})}return n})();const xA=new WeakMap;let td=(()=>{class n{_appRef;_injector=k(Rn);_environmentInjector=k(Li);load(t){const r=this._appRef=this._appRef||this._injector.get(ba);let i=xA.get(r);i||(i={loaders:new Set,refs:[]},xA.set(r,i),r.onDestroy(()=>{xA.get(r)?.refs.forEach(s=>s.destroy()),xA.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(s7(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],standalone:!0,features:[si],decls:0,vars:0,template:function(r,i){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function nd(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function VN(n,e=vf){return ye((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(Fe(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function hK(n){return Yr((e,t)=>n<=t)}function RA(n,e=Pi){return n=n??rTe,ye((t,r)=>{let i,s=!0;t.subscribe(Fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function rTe(n,e){return n===e}let iTe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[iTe]})}return n})();const mK=new Set;let Ef,sTe=(()=>{class n{_platform=k(Ns);_nonce=k(NM,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):aTe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function oTe(n,e){if(!mK.has(n))try{Ef||(Ef=document.createElement("style"),e&&Ef.setAttribute("nonce",e),Ef.setAttribute("type","text/css"),document.head.appendChild(Ef)),Ef.sheet&&(Ef.sheet.insertRule(`@media ${n} {body{ }}`,0),mK.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aTe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let gK=(()=>{class n{_mediaMatcher=k(sTe);_zone=k(yt);_queries=new Map;_destroySubject=new E;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return _K(yA(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=YT(_K(yA(t)).map(o=>this._registerQuery(o).observable));return s=Rb(s.pipe(Zi(1)),s.pipe(hK(1),VN(0))),s.pipe(Be(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Ut(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(nl(r),Be(({matches:o})=>({query:t,matches:o})),Eg(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _K(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function vK(n,e,t){const r=bK(n,e);t=t.trim(),!r.some(i=>i.trim()===t)&&(r.push(t),n.setAttribute(e,r.join(" ")))}function BN(n,e,t){const r=bK(n,e);t=t.trim();const i=r.filter(s=>s!==t);i.length?n.setAttribute(e,i.join(" ")):n.removeAttribute(e)}function bK(n,e){return n.getAttribute(e)?.match(/\S+/g)??[]}class EK{_letterKeyStream=new E;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new E;selectedItem=this._selectedItem;constructor(e,t){const r="number"==typeof t?.debounceInterval?t.debounceInterval:200;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){const t=e.keyCode;e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(ai(t=>this._pressedLetters.push(t)),VN(e),Yr(()=>this._pressedLetters.length>0),Be(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let r=1;r<this._items.length+1;r++){const s=this._items[(this._selectedItemIndex+r)%this._items.length];if(!this._skipPredicateFn?.(s)&&0===s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)){this._selectedItem.next(s);break}}this._pressedLetters=[]})}}class IK{_items;_activeItemIndex=-1;_activeItem=qh(null);_wrap=!1;_typeaheadSubscription=Dt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof Fh?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):Uv(e)&&(this._effectRef=function i7(n,e){Xs("NgSignals"),!e?.injector&&Fr();const t=e?.injector??k(Rn),r=!0!==e?.manualCleanup?t.get(hv):null,i=new gye(t.get(fye),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(Ea,null,{optional:!0});return s&&8&s._lView[ht]?(s._lView[Ch]??=[]).push(i.watcher.notify):i.watcher.notify(),i}(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new E;change=new E;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();const t=this._getItemsArray();return this._typeahead=new EK(t,{debounceInterval:"number"==typeof e?e:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((i||nd(e,"shiftKey"))&&this._typeahead?.handleKey(e))}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem.set(t[r]??null),this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return Uv(this._items)?this._items():this._items instanceof Fh?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);const t=this._activeItem();if(t){const r=e.indexOf(t);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r))}}}class hTe extends IK{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class fTe extends IK{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let TK=(()=>{class n{_platform=k(Ns);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function yTe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function _Te(n){try{return n.frameElement}catch{return null}}(function ATe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===SK(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=SK(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function CTe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function TTe(n){return!function bTe(n){return function ITe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function vTe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function ETe(n){return function wTe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||AK(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AK(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function SK(n){if(!AK(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class xK{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,r,i,s=!1,o){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._injector=o,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Dc(e,{injector:this._injector}):setTimeout(e)}}let STe=(()=>{class n{_checker=k(TK);_ngZone=k(yt);_document=k(_n);_injector=k(Rn);constructor(){k(td).load(cK)}create(t,r=!1){return new xK(t,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UN(n){return 0===n.buttons||0===n.detail}function jN(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const xTe=new Ee("cdk-input-modality-detector-options"),DTe={ignoreKeys:[18,17,224,91,16]},Fg=Ng({passive:!0,capture:!0});let RTe=(()=>{class n{_platform=k(Ns);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new F(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Vl(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(UN(t)?"keyboard":"mouse"),this._mostRecentTarget=Vl(t))};_onTouchstart=t=>{jN(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vl(t))};constructor(){const t=k(yt),r=k(_n),i=k(xTe,{optional:!0});this._options={...DTe,...i},this.modalityDetected=this._modality.pipe(hK(1)),this.modalityChanged=this.modalityDetected.pipe(RA()),this._platform.isBrowser&&t.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Fg),r.addEventListener("mousedown",this._onMousedown,Fg),r.addEventListener("touchstart",this._onTouchstart,Fg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fg),document.removeEventListener("mousedown",this._onMousedown,Fg),document.removeEventListener("touchstart",this._onTouchstart,Fg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var MA=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(MA||{});const PTe=new Ee("cdk-focus-monitor-default-options"),PA=Ng({passive:!0,capture:!0});let kA=(()=>{class n{_ngZone=k(yt);_platform=k(Ns);_inputModalityDetector=k(RTe);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=k(_n,{optional:!0});_stopInputModalityDetector=new E;constructor(){const t=k(PTe,{optional:!0});this._detectionMode=t?.detectionMode||MA.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{for(let i=Vl(t);i;i=i.parentElement)"focus"===t.type?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){const i=Pg(t);if(!this._platform.isBrowser||1!==i.nodeType)return Qe();const s=function NCe(n){if(function kCe(){if(null==SN){const n=typeof document<"u"?document.head:null;SN=!(!n||!n.createShadowRoot&&!n.attachShadow)}return SN}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new E,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Pg(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Pg(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===MA.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===MA.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Vl(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,PA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,PA)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Eg(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,PA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,PA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var If=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(If||{});const RK="cdk-high-contrast-black-on-white",MK="cdk-high-contrast-white-on-black",zN="cdk-high-contrast-active";let PK=(()=>{class n{_platform=k(Ns);_hasCheckedHighContrastMode;_document=k(_n);_breakpointSubscription;constructor(){this._breakpointSubscription=k(gK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return If.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return If.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return If.BLACK_ON_WHITE}return If.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(zN,RK,MK),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===If.BLACK_ON_WHITE?t.add(zN,RK):r===If.WHITE_ON_BLACK&&t.add(zN,MK)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kTe=(()=>{class n{constructor(){k(PK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[pK]})}return n})();const HN={};let wf=(()=>{class n{_appId=k(Lh);getId(t){return"ng"!==this._appId&&(t+=this._appId),HN.hasOwnProperty(t)||(HN[t]=0),`${t}${HN[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sl(...n){const e=Eb(n),t=function jbe(n,e){return"number"==typeof vk(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?ro(r[0]):vg(t)(Wn(r,e)):tl}const kK=sK();class NTe{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=xi(-this._previousScrollPosition.left),e.style.top=xi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),kK&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),kK&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class OTe{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Yr(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}class NK{enable(){}disable(){}attach(){}}function $N(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function OK(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class FTe{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();$N(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let LTe=(()=>{class n{_scrollDispatcher=k(aK);_viewportRuler=k(DN);_ngZone=k(yt);_document=k(_n);constructor(){}noop=()=>new NK;close=t=>new OTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,t);block=()=>new NTe(this._viewportRuler,this._document);reposition=t=>new FTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,t);static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class NA{positionStrategy;scrollStrategy=new NK;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class VTe{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let FK=(()=>{class n{_attachedOverlays=[];_document=k(_n);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BTe=(()=>{class n extends FK{_ngZone=k(yt);_renderer=k(Gh).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{const r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})();static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UTe=(()=>{class n extends FK{_platform=k(Ns);_ngZone=k(yt,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=t=>{this._pointerDownEventTarget=Vl(t)};_clickListener=t=>{const r=Vl(t),i="click"===t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;const s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){const a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(LK(a.overlayElement,r)||LK(a.overlayElement,i))break;const l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})();static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LK(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let VK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],standalone:!0,features:[si],decls:0,vars:0,template:function(r,i){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),WN=(()=>{class n{_platform=k(Ns);_containerElement;_document=k(_n);_styleLoader=k(td);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||oK()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),oK()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(VK)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class GN{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropElement=null;_backdropTimeout;_backdropClick=new E;_attachments=new E;_detachments=new E;_positionStrategy;_scrollStrategy;_locationChanges=Dt.EMPTY;_cleanupBackdropClick;_cleanupBackdropTransitionEnd;_previousHostParent;_keydownEvents=new E;_outsidePointerEvents=new E;_renders=new E;_afterRenderRef;_afterNextRenderRef;constructor(e,t,r,i,s,o,a,l,c,u=!1,h,m){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=h,this._renderer=m,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=Xa(()=>function jW(n,e){!e?.injector&&Fr();const t=e?.injector??k(Rn);return Qo(t)?(Xs("NgAfterRender"),zW(n,t,e,!1)):HW}(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Dc(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=xi(this._config.width),e.height=xi(this._config.height),e.minWidth=xi(this._config.minWidth),e.minHeight=xi(this._config.minHeight),e.maxWidth=xi(this._config.maxWidth),e.maxHeight=xi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._cleanupBackdropClick?.(),this._cleanupBackdropClick=this._renderer.listen(this._backdropElement,"click",t=>this._backdropClick.next(t)),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{this._cleanupBackdropTransitionEnd?.(),this._cleanupBackdropTransitionEnd=this._renderer.listen(e,"transitionend",t=>{this._disposeBackdrop(t.target)})}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=yA(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(Eg(sl(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){this._cleanupBackdropClick?.(),this._cleanupBackdropTransitionEnd?.(),e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const BK="cdk-overlay-connected-position-bounding-box",jTe=/([A-Za-z%]+)$/;class zTe{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new E;_resizeSubscription=Dt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(BK),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Cf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(BK),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=jK(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let m=0-a,y=a+s.height-r.height,b=this._subtractOverflows(s.width,0-o,o+s.width-r.width),T=this._subtractOverflows(s.height,m,y),M=b*T;return{visibleArea:M,isCompletelyWithinViewport:s.width*s.height===M,fitsInViewportVertically:T===s.height,fitsInViewportHorizontally:b==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=UK(this._overlayRef.getConfig().minHeight),a=UK(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=jK(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,h=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,h=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function HTe(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,r)){const i=new VTe(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,h,m;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const y=Math.min(r.bottom-e.y+r.top,e.y),b=this._lastBoundingBoxSize.height;s=2*y,o=e.y-y,s>b&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-b/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)m=r.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)h=e.x,u=r.right-e.x;else{const y=Math.min(r.right-e.x+r.left,e.x),b=this._lastBoundingBoxSize.width;u=2*y,h=e.x-y,u>b&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-b/2)}return{top:o,left:h,bottom:a,right:m,width:u,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=xi(r.height),i.top=xi(r.top),i.bottom=xi(r.bottom),i.width=xi(r.width),i.left=xi(r.left),i.right=xi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=xi(s)),o&&(i.maxWidth=xi(o))}this._lastBoundingBoxSize=r,Cf(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Cf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Cf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();Cf(r,this._getExactOverlayY(t,e,u)),Cf(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=xi(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=xi(o.maxWidth):s&&(r.maxWidth="")),Cf(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=xi(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=xi(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:OK(e,r),isOriginOutsideView:$N(e,r),isOverlayClipped:OK(t,r),isOverlayOutsideView:$N(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&yA(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof jn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Cf(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function UK(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(jTe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function jK(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const zK="cdk-global-overlay-wrapper";class $Te{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(zK),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let y="",b="",T="";l?T="flex-start":"center"===u?(T="center",m?b=h:y=h):m?"left"===u||"end"===u?(T="flex-end",y=h):("right"===u||"start"===u)&&(T="flex-start",b=h):"left"===u||"start"===u?(T="flex-start",y=h):("right"===u||"end"===u)&&(T="flex-end",b=h),e.position=this._cssPosition,e.marginLeft=l?"0":y,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":b,t.justifyContent=T,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(zK),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let WTe=(()=>{class n{_viewportRuler=k(DN);_document=k(_n);_platform=k(Ns);_overlayContainer=k(WN);constructor(){}global(){return new $Te}flexibleConnectedTo(t){return new zTe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hs=(()=>{class n{scrollStrategies=k(LTe);_overlayContainer=k(WN);_positionBuilder=k(WTe);_keyboardDispatcher=k(BTe);_injector=k(Rn);_ngZone=k(yt);_document=k(_n);_directionality=k(Og);_location=k(cg);_outsideClickDispatcher=k(UTe);_animationsModuleType=k(Tl,{optional:!0});_idGenerator=k(wf);_renderer=k(Gh).createRenderer(null,null);_appRef;_styleLoader=k(td);constructor(){}create(t){this._styleLoader.load(VK);const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new NA(t);return o.direction=o.direction||this._directionality.value,new GN(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(Li),this._renderer)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id=this._idGenerator.getId("cdk-overlay-"),r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ba)),new HCe(t,null,this._appRef,this._injector,this._document)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const KTe={provide:new Ee("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(hs);return()=>n.scrollStrategies.reposition()}}),deps:[hs],useFactory:function qTe(n){return()=>n.scrollStrategies.reposition()}};let Jb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[hs,KTe],imports:[Yb,SA,lK,lK]})}return n})();function QTe(n,e){}class eE{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext}let HK=(()=>{class n extends PN{_elementRef=k(jn);_focusTrapFactory=k(STe);_config;_interactivityChecker=k(TK);_ngZone=k(yt);_overlayRef=k(GN);_focusMonitor=k(kA);_renderer=k(qa);_platform=k(Ns);_document=k(_n,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=k(Ea);_injector=k(Rn);_isDestroyed=!1;constructor(){super(),this._config=k(eE,{optional:!0})||new eE,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}attachDomPortal=t=>{this._portalOutlet.hasAttached();const r=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{s(),o(),t.removeAttribute("tabindex")},s=this._renderer.listen(t,"blur",i),o=this._renderer.listen(t,"mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){this._isDestroyed||Dc(()=>{const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=xN(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=xN();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=xN()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&Hu(kN,7),2&r){let s;Js(s=eo())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&er("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},standalone:!0,features:[wn,si],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&ot(0,QTe,0,0,"ng-template",0)},dependencies:[kN],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class qN{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new E;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!nd(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const $K=new Ee("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=k(hs);return()=>n.scrollStrategies.block()}}),YTe=new Ee("DialogData"),XTe=new Ee("DefaultDialogConfig");let WK=(()=>{class n{_overlay=k(hs);_injector=k(Rn);_defaultOptions=k(XTe,{optional:!0});_parentDialog=k(n,{optional:!0,skipSelf:!0});_overlayContainer=k(WN);_idGenerator=k(wf);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;_ariaHiddenElements=new Map;_scrollStrategy=k($K);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Mb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(nl(void 0)));constructor(){}open(t,r){(r={...this._defaultOptions||new eE,...r}).id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),o=this._overlay.create(s),a=new qN(o,r),l=this._attachContainer(o,a,r);return a.containerInstance=l,this._attachDialogContent(t,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){KN(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){KN(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),KN(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new NA({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,o=[{provide:eE,useValue:i},{provide:qN,useValue:r},{provide:GN,useValue:t}];let a;i.container?"function"==typeof i.container?a=i.container:(a=i.container.type,o.push(...i.container.providers(i))):a=HK;const l=new MN(a,i.viewContainerRef,Rn.create({parent:s||this._injector,providers:o}));return t.attach(l).instance}_attachDialogContent(t,r,i,s){if(t instanceof ya){const o=this._createInjector(s,r,i,void 0);let a={$implicit:s.data,dialogRef:r};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new AA(t,null,a,o))}else{const o=this._createInjector(s,r,i,this._injector),a=i.attachComponentPortal(new MN(t,s.viewContainerRef,o));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,i,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:YTe,useValue:t.data},{provide:qN,useValue:r}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(r,t,i)):a.push(...t.providers)),t.direction&&(!o||!o.get(Og,null,{optional:!0}))&&a.push({provide:Og,useValue:{value:t.direction,change:Qe()}}),Rn.create({parent:o||s,providers:a})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KN(n,e){let t=n.length;for(;t--;)e(n[t])}let JTe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[WK],imports:[Jb,SA,kTe,SA]})}return n})();const eAe=["text"],tAe=[[["mat-icon"]],"*"],nAe=["mat-icon","*"];function rAe(n,e){if(1&n&&Et(0,"mat-pseudo-checkbox",1),2&n){const t=Pe();Me("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function iAe(n,e){1&n&&Et(0,"mat-pseudo-checkbox",3),2&n&&Me("disabled",Pe().disabled)}function sAe(n,e){if(1&n&&(ue(0,"span",4),Ke(1),pe()),2&n){const t=Pe();de(),en("(",t.group.label,")")}}let lr=(()=>{class n{constructor(){k(PK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[Yb,Yb]})}return n})(),QN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["structural-styles"]],standalone:!0,features:[si],decls:0,vars:0,template:function(r,i){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var Ta=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Ta||{});class dAe{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ta.HIDDEN;constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}}const GK=Ng({passive:!0,capture:!0});class hAe{_events=new Map;addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,GK)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,GK)))}_delegateEventHandler=e=>{const t=Vl(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}const OA={enterDuration:225,exitDuration:150},qK=Ng({passive:!0,capture:!0}),KK=["mousedown","touchstart"],QK=["mouseup","mouseleave","touchend","touchcancel"];let pAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],standalone:!0,features:[si],decls:0,vars:0,template:function(r,i){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})();class nE{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new hAe;constructor(e,t,r,i,s){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=Pg(r)),s&&s.get(td).load(pAe)}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...OA,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function mAe(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),y=h.transitionDuration,b="none"===h.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,T=new dAe(this,u,r,b);u.style.transform="scale3d(1, 1, 1)",T.state=Ta.FADING_IN,r.persistent||(this._mostRecentTransientRipple=T);let M=null;return!b&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const B=()=>{M&&(M.fallbackTimer=null),clearTimeout(Q),this._finishRippleTransition(T)},V=()=>this._destroyRipple(T),Q=setTimeout(V,c+100);u.addEventListener("transitionend",B),u.addEventListener("transitioncancel",V),M={onTransitionEnd:B,onTransitionCancel:V,fallbackTimer:Q}}),this._activeRipples.set(T,M),(b||!c)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(e.state===Ta.FADING_OUT||e.state===Ta.HIDDEN)return;const t=e.element,r={...OA,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Ta.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Pg(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,KK.forEach(r=>{nE._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{QK.forEach(t=>{this._triggerElement.addEventListener(t,this,qK)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ta.FADING_IN?this._startFadeOutTransition(e):e.state===Ta.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Ta.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ta.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=UN(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!jN(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Ta.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ta.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(KK.forEach(t=>nE._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(QK.forEach(t=>e.removeEventListener(t,this,qK)),this._pointerUpEventsRegistered=!1))}}const YK=new Ee("mat-ripple-global-options");let XK=(()=>{class n{_elementRef=k(jn);_animationMode=k(Tl,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){const t=k(yt),r=k(Ns),i=k(YK,{optional:!0}),s=k(Rn);this._globalOptions=i||{},this._rippleRenderer=new nE(this,t,this._elementRef,r,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&Lr("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),YN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr,lr]})}return n})(),gAe=(()=>{class n{_animationMode=k(Tl,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,i){2&r&&Lr("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[si],decls:0,vars:0,template:function(r,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})(),_Ae=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr]})}return n})();const ZK=new Ee("MAT_OPTION_PARENT_COMPONENT"),JK=new Ee("MatOptgroup");class eQ{source;isUserInput;constructor(e,t=!1){this.source=e,this.isUserInput=t}}let tQ=(()=>{class n{_element=k(jn);_changeDetectorRef=k(Ea);_parent=k(ZK,{optional:!0});group=k(JK,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=k(wf).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=t}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}onSelectionChange=new pn;_text;_stateChanges=new E;constructor(){k(td).load(QN),k(td).load(cK),this._signalDisableRipple=!!this._parent&&Uv(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!nd(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new eQ(this,t))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-option"]],viewQuery:function(r,i){if(1&r&&Hu(eAe,7),2&r){let s;Js(s=eo())&&(i._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,i){1&r&&kt("click",function(){return i._selectViaInteraction()})("keydown",function(o){return i._handleKeydown(o)}),2&r&&(Zv("id",i.id),er("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),Lr("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",oi]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[xl,si],ngContentSelectors:nAe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,i){1&r&&(Ya(tAe),ot(0,rAe,1,2,"mat-pseudo-checkbox",1),Yi(1),ue(2,"span",2,0),Yi(4,1),pe(),ot(5,iAe,1,1,"mat-pseudo-checkbox",3)(6,sAe,2,1,"span",4),Et(7,"div",5)),2&r&&(Xv(i.multiple?0:-1),de(5),Xv(i.multiple||!i.selected||i.hideSingleSelectionIndicator?-1:5),de(),Xv(i.group&&i.group._inert?6:-1),de(),Me("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[gAe,XK],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),Vg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[YN,lr,_Ae]})}return n})();const nQ={capture:!0},rQ=["focus","mousedown","mouseenter","touchstart"],XN="mat-ripple-loader-uninitialized",ZN="mat-ripple-loader-class-name",iQ="mat-ripple-loader-centered",FA="mat-ripple-loader-disabled";let bAe=(()=>{class n{_document=k(_n,{optional:!0});_animationMode=k(Tl,{optional:!0});_globalRippleOptions=k(YK,{optional:!0});_platform=k(Ns);_ngZone=k(yt);_injector=k(Rn);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(const t of rQ)this._document?.addEventListener(t,this._onInteraction,nQ)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of rQ)this._document?.removeEventListener(r,this._onInteraction,nQ)}configureRipple(t,r){t.setAttribute(XN,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(ZN))&&t.setAttribute(ZN,r.className||""),r.centered&&t.setAttribute(iQ,""),r.disabled&&t.setAttribute(FA,"")}setDisabled(t,r){const i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(FA,""):t.removeAttribute(FA)}_onInteraction=t=>{const r=Vl(t);if(r instanceof HTMLElement){const i=r.closest(`[${XN}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(ZN)),t.append(r);const i="NoopAnimations"===this._animationMode,s=this._globalRippleOptions,o=i?0:s?.animation?.enterDuration??OA.enterDuration,a=i?0:s?.animation?.exitDuration??OA.exitDuration,l={rippleDisabled:i||s?.disabled||t.hasAttribute(FA),rippleConfig:{centered:t.hasAttribute(iQ),terminateOnPointerUp:s?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:a}}},c=new nE(l,this._ngZone,r,this._platform,this._injector),u=!l.rippleDisabled;u&&c.setupTriggerEvents(t),this._hosts.set(t,{target:l,renderer:c,hasSetUpEvents:u}),t.removeAttribute(XN)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Nt||{});const Lc="*";function Tf(n,e){return{type:Nt.Trigger,name:n,definitions:e,options:{}}}function ol(n,e=null){return{type:Nt.Animate,styles:e,timings:n}}function JN(n,e=null){return{type:Nt.Group,steps:n,options:e}}function Di(n){return{type:Nt.Style,styles:n,offset:null}}function Af(n,e,t){return{type:Nt.State,name:n,styles:e,options:t}}function al(n,e,t=null){return{type:Nt.Transition,expr:n,animation:e,options:t}}class rE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class sQ{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function AAe(n,e){}class oQ{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration}const rO="mdc-dialog--open",aQ="mdc-dialog--opening",lQ="mdc-dialog--closing";let cQ=(()=>{class n extends HK{_animationMode=k(Tl,{optional:!0});_animationStateChanged=new pn;_animationsEnabled="NoopAnimations"!==this._animationMode;_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?dQ(this._config.enterAnimationDuration)??150:0;_exitAnimationDuration=this._animationsEnabled?dQ(this._config.exitAnimationDuration)??75:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(uQ,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(aQ,rO)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(rO),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(rO),this._animationsEnabled?(this._hostElement.style.setProperty(uQ,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(lQ)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(aQ,lQ)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})();static \u0275cmp=Vn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){2&r&&(Zv("id",i._config.id),er("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Lr("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},standalone:!0,features:[wn,si],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(ue(0,"div",0)(1,"div",1),ot(2,AAe,0,0,"ng-template",2),pe()())},dependencies:[kN],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})();const uQ="--mat-dialog-transition-duration";function dQ(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?J9(n.substring(0,n.length-2)):n.endsWith("s")?1e3*J9(n.substring(0,n.length-1)):"0"===n?0:null}var LA=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(LA||{});class Bg{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new E;_beforeClosed=new E;_result;_closeFallbackTimeout;_state=LA.OPEN;_closeInteractionType;constructor(e,t,r){this._ref=e,this._containerInstance=r,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(Yr(i=>"opened"===i.state),Zi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Yr(i=>"closed"===i.state),Zi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),sl(this.backdropClick(),this.keydownEvents().pipe(Yr(i=>27===i.keyCode&&!this.disableClose&&!nd(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function hQ(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Yr(t=>"closing"===t.state),Zi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=LA.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=LA.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const iO=new Ee("MatMdcDialogData"),DAe=new Ee("mat-mdc-dialog-default-options"),fQ=new Ee("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(hs);return()=>n.scrollStrategies.block()}});let Sf=(()=>{class n{_overlay=k(hs);_defaultOptions=k(DAe,{optional:!0});_scrollStrategy=k(fQ);_parentDialog=k(n,{optional:!0,skipSelf:!0});_idGenerator=k(wf);_dialog=k(WK);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;dialogConfigClass=oQ;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Mb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(nl(void 0)));constructor(){this._dialogRefConstructor=Bg,this._dialogContainerType=cQ,this._dialogDataToken=iO}open(t,r){let i;(r={...this._defaultOptions||new oQ,...r}).id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:eE,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(o,a,l)=>(i=new this._dialogRefConstructor(o,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=s.componentRef,i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pQ=(()=>{class n{_dialogRef=k(Bg,{optional:!0});_elementRef=k(jn);_dialog=k(Sf);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=function gQ(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,standalone:!0})}return n})(),sO=(()=>{class n extends pQ{id=k(wf).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qr(n)))(i||n)}})();static \u0275dir=Je({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,i){2&r&&Zv("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[wn]})}return n})(),mQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[AW([UCe])]})}return n})();let kAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[Sf],imports:[JTe,Jb,SA,lr,lr]})}return n})();function NAe(n,e){1&n&&Et(0,"img",8),2&n&&Me("src",Pe().imgPath,ii)}let iE=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r,this.title=r.title||"\u63d0\u793a",this.message=r.message||"\u8acb\u7a0d\u5f8c\u518d\u8a66",this.imgPath=r.imgPath||"",this.closeMessage=r.closeMessage||"\u95dc\u9589"}close(){this.dialogRef.close()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(De(Bg),De(iO))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-message-dialog"]],decls:11,vars:4,consts:[["mat-dialog-title","",1,"text-xl","font-semibold","text-primary-default","mb-4"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],[1,"flex","w-4/5","items-center","justify-start"],["alt","\u7121\u641c\u5c0b\u7d50\u679c","class","w-24 h-24 sm:w-16 sm:h-16 md:w-24 md:h-24",3,"src",4,"ngIf"],[1,"text-primary-default","sm:text-xl","font-bold","ml-2","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],[1,"text-primary-default","lg:text-md","sm:text-xl"],[1,"flex","items-center","bg-primary-white","justify-center","py-3"],[1,"px-2","py-2","text-white","bg-success","rounded-full","hover:bg-primary-default","focus:outline-none","focus:ring-2","focus:ring-primary-light",3,"click"],["alt","\u7121\u641c\u5c0b\u7d50\u679c",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24",3,"src"]],template:function(r,i){1&r&&(ue(0,"h1",0),Ke(1),pe(),ue(2,"div",1)(3,"div",2),ot(4,NAe,1,1,"img",3),ue(5,"h5",4)(6,"div",5),Ke(7),pe()()()(),ue(8,"div",6)(9,"button",7),kt("click",function(){return i.close()}),Ke(10),pe()()),2&r&&(de(),en(" ",i.title,"\n"),de(3),Me("ngIf",i.imgPath),de(3),en(" ",i.message," "),de(3),en(" ",i.closeMessage," "))},dependencies:[sf,sO]})}}return n})();const Os_familyMartUrl_icon="https://www.family.com.tw/NewEnterprise/CSR/images/favicon.ico",Os_familyMartUrl_base="https://stamp.family.com.tw/api/maps",Os_familyMartUrl_endpoint={mapClassificationInfo:"/MapClassificationInfo",mapProductInfo:"/MapProductInfo"},Os_sevenElevenUrl_icon="https://www.7-11.com.tw/favicon.ico",Os_sevenElevenUrl_base="https://lovefood.openpoint.com.tw/LoveFood/api/",Os_sevenElevenUrl_endpoint={accessToken:"Auth/FrontendAuth/AccessToken",getList:"Master/FrontendItemCategory/GetList",getStoreByAddress:"Master/FrontendStore/GetStoreByAddress",getNearbyStoreList:"Search/FrontendStoreItemStock/GetNearbyStoreList",getStoreDetail:"Search/FrontendStoreItemStock/GetStoreDetail"},Os_sevenElevenUrl_params={mid_v:"W0_DiF4DlgU5OeQoRswrRcaaNHMWOL7K3ra3385ocZcv-bBOWySZvoUtH6j-7pjiccl0C5h30uRUNbJXsABCKMqiekSb7tdiBNdVq8Ro5jgk6sgvhZla5iV0H3-8dZfASc7AhEm85679LIK3hxN7Sam6D0LAnYK9Lb0DZhn7xeTeksB4IsBx4Msr_VI"},Os_firebaseConfig={apiKey:"AIzaSyA3i_YLXpXuHNrmrHULrqnsIj5Z919aCfw",authDomain:"friendly-cat-for-you.firebaseapp.com",databaseURL:"https://friendly-cat-for-you-default-rtdb.firebaseio.com",projectId:"friendly-cat-for-you",storageBucket:"friendly-cat-for-you.firebasestorage.app",messagingSenderId:"614210455616",appId:"1:614210455616:web:cedabfd68dca95ae4337a5",measurementId:"G-3V3740GPG7"};var rd=G(2541);let OAe=(()=>{class n{constructor(){}getCurrentPosition(){return new Promise((t,r)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>t(i),i=>r(i)):r(new Error("\u700f\u89bd\u5668\u4e0d\u652f\u63f4\u5730\u7406\u4f4d\u7f6e\u529f\u80fd"))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oO=(()=>{class n{constructor(t){this.http=t}get(t,r={}){let i=new Pl;for(const s in r)r.hasOwnProperty(s)&&(i=i.set(s,r[s]));return this.http.get(t,{params:i})}post(t,r,i,s){let o=new Pl;if(r)for(const a in r)r.hasOwnProperty(a)&&(o=o.set(a,r[a]));return this.http.post(t,i||{},{params:o,headers:s})}static{this.\u0275fac=function(r){return new(r||n)(Re(wb))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aO=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=Os_sevenElevenUrl_base}getAccessToken(){return this.requestService.post(this.baseUrl+Os_sevenElevenUrl_endpoint.accessToken,Os_sevenElevenUrl_params)}getStoreByAddress(t){const r=this.baseUrl+Os_sevenElevenUrl_endpoint.getStoreByAddress,i={token:sessionStorage.getItem("711Token"),keyword:t};return this.requestService.post(r,i)}getNearByStoreList(t){const r=this.baseUrl+Os_sevenElevenUrl_endpoint.getNearbyStoreList,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,t)}getFoodCategory(){const t=this.baseUrl+Os_sevenElevenUrl_endpoint.getList,r={token:sessionStorage.getItem("711Token")};return this.requestService.post(t,r)}getItemsByStoreNo(t){const r=this.baseUrl+Os_sevenElevenUrl_endpoint.getStoreDetail,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,{storeNo:t,CurrentLocation:{Latitude:25.0375197,Longitude:121.5636704}})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/seven_eleven_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Re(oO))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),FAe=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=Os_familyMartUrl_base}getStores(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/family_mart_stores.json")}getNearByStoreList(t){return this.requestService.post(this.baseUrl+Os_familyMartUrl_endpoint.mapProductInfo,null,{ProjectCode:"202106302",OldPKeys:[],PostInfo:"",Latitude:t.Latitude,Longitude:t.Longitude})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/Friendly-Cat/assets/family_mart_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Re(oO))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $n=G(1631);(0,$n.registerVersion)("firebase","10.14.1","app");const jAe=new class UAe extends IA{}(class BAe extends EA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),id=new tf("ANGULARFIRE2_VERSION");function yQ(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const lO=(n,e)=>{const t=e?[e]:(0,$n.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class VA{constructor(){return lO(HAe)}}const HAe="app-check";function Ug(){}class vQ{zone;delegate;constructor(e,t=jAe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class $Ae{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ug,{},Ug,Ug)),t.pipe(ai({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let jg=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new vQ(Zone.current)),this.insideAngular=t.run(()=>new vQ(Zone.current,vf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Re(yt))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zg(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function xf(n){return zg().ngZone.run(()=>n())}function zi(n){return function GAe(n){return function(t){return(t=t.lift(new $Ae(n.ngZone))).pipe(lf(n.outsideAngular),Gu(n.insideAngular))}}(zg())(n)}const qAe=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),xf(()=>n.apply(void 0,r))},Vc=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=xf(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ug,{},Ug,Ug))),r[s]=qAe(r[s],t));const i=function WAe(n){return zg().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Ut){const s=zg();return i.pipe(lf(s.outsideAngular),Gu(s.insideAngular))}return xf(()=>i)}return i instanceof Ut?i.pipe(zi):i instanceof Promise?xf(()=>new Promise((s,o)=>i.then(a=>xf(()=>s(a)),a=>xf(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:xf(()=>i)};class sE{constructor(e){return e}}class cO{constructor(){return(0,$n.getApps)()}}const uO=new Ee("angularfire2._apps"),QAe={provide:sE,useFactory:function KAe(n){return n&&1===n.length?n[0]:new sE((0,$n.getApp)())},deps:[[new ki,uO]]},YAe={provide:cO,deps:[[new ki,uO]]};function XAe(n){return(e,t)=>{const r=t.get(Ys);(0,$n.registerVersion)("angularfire",id.full,"core"),(0,$n.registerVersion)("angularfire",id.full,"app"),(0,$n.registerVersion)("angular",n6.full,r.toString());const i=e.runOutsideAngular(()=>n(t));return new sE(i)}}function ZAe(n,...e){return El([QAe,YAe,{provide:uO,useFactory:XAe(n),multi:!0,deps:[yt,Rn,jg,...e]}])}const JAe=Vc($n.initializeApp,!0);var sd=G(443),N=G(1401),Mo=G(5398),Jo=G(8779);class BA{constructor(e){return e}}const dO=new Ee("angularfire2.auth-instances");function nSe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new BA(r)}}const rSe={provide:class eSe{constructor(){return lO("auth")}},deps:[[new ki,dO]]},iSe={provide:BA,useFactory:function tSe(n,e){const t=yQ("auth",n,e);return t&&new BA(t)},deps:[[new ki,dO],sE]};function sSe(n,...e){return(0,$n.registerVersion)("angularfire",id.full,"auth"),El([iSe,rSe,{provide:dO,useFactory:nSe(n),multi:!0,deps:[yt,Rn,jg,cO,[new ki,VA],...e]}])}const oSe=Vc(sd.aa,!0),aSe=Vc(sd.o,!0),lSe=Vc(sd.y,!0),hO=Vc(sd.ag,!0),cSe=Vc(sd.ab,!0),uSe=Vc(sd.c,!0),dSe=Vc(sd.ak,!0),$e=function(n,e){if(!n)throw Hg(e)},Hg=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},EQ=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},pO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let m=(15&a)<<2|c>>6,y=63&c;l||(y=64,o||(m=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(EQ(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==h)throw new fSe;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==h&&r.push(c<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fSe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IQ=function(n){const e=EQ(n);return pO.encodeByteArray(e,!0)},UA=function(n){return IQ(n).replace(/\./g,"")},jA=function(n){try{return pO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pSe(n){return wQ(void 0,n)}function wQ(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!mSe(t)||(n[t]=wQ(n[t],e[t]));return n}function mSe(n){return"__proto__"!==n}const zA=()=>{try{return function gSe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&jA(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},CQ=n=>{var e,t;return null===(t=null===(e=zA())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},TQ=()=>{var n;return null===(n=zA())||void 0===n?void 0:n.config},AQ=n=>{var e;return null===(e=zA())||void 0===e?void 0:e[`_${n}`]};class HA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function fs(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fs())}function SQ(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class od extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,od.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oE.prototype.create)}}class oE{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function RSe(n,e){return n.replace(MSe,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new od(i,`${this.serviceName}: ${o} (${i}).`,r)}}const MSe=/\{\$([^}]+)}/g;function aE(n){return JSON.parse(n)}function Hi(n){return JSON.stringify(n)}const $A=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=aE(jA(s[0])||""),t=aE(jA(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Bl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function $g(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function gO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function WA(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function GA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(xQ(s)&&xQ(o)){if(!GA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function xQ(n){return null!==n&&"object"==typeof n}function Wg(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class NSe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let h=0;h<16;h++)r[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)r[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const m=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=4294967295&(m<<1|m>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const m=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class FSe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function LSe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=_O),void 0===i.error&&(i.error=_O),void 0===i.complete&&(i.complete=_O);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _O(){}function Gg(n,e){return`${n} failed: ${e} argument `}const qA=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function Aa(n){return n&&n._delegate?n._delegate:n}class Df{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rf="[DEFAULT]";class $Se{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new HA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function GSe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,O.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Rf){return this.instances.has(e)}getOptions(e=Rf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Rf?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Rf){return this.component?this.component.multipleInstances?e:Rf:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qSe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $Se(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const yO=[];var nr=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(nr||{});const DQ={debug:nr.DEBUG,verbose:nr.VERBOSE,info:nr.INFO,warn:nr.WARN,error:nr.ERROR,silent:nr.SILENT},KSe=nr.INFO,QSe={[nr.DEBUG]:"log",[nr.VERBOSE]:"log",[nr.INFO]:"info",[nr.WARN]:"warn",[nr.ERROR]:"error"},YSe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=QSe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class vO{constructor(e){this.name=e,this._logLevel=KSe,this._logHandler=YSe,this._userLogHandler=null,yO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?DQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nr.DEBUG,...e),this._logHandler(this,nr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nr.VERBOSE,...e),this._logHandler(this,nr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nr.INFO,...e),this._logHandler(this,nr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nr.WARN,...e),this._logHandler(this,nr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nr.ERROR,...e),this._logHandler(this,nr.ERROR,...e)}}var RQ=G(6749);class XSe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function ZSe(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const KA="@firebase/app",bO="0.10.17",Uc=new vO("@firebase/app"),JSe="@firebase/app-compat",exe="@firebase/analytics-compat",txe="@firebase/analytics",nxe="@firebase/app-check-compat",rxe="@firebase/app-check",ixe="@firebase/auth",sxe="@firebase/auth-compat",oxe="@firebase/database",axe="@firebase/data-connect",lxe="@firebase/database-compat",cxe="@firebase/functions",uxe="@firebase/functions-compat",dxe="@firebase/installations",hxe="@firebase/installations-compat",fxe="@firebase/messaging",pxe="@firebase/messaging-compat",mxe="@firebase/performance",gxe="@firebase/performance-compat",_xe="@firebase/remote-config",yxe="@firebase/remote-config-compat",vxe="@firebase/storage",bxe="@firebase/storage-compat",Exe="@firebase/firestore",Ixe="@firebase/vertexai",wxe="@firebase/firestore-compat",Cxe="firebase",QA="[DEFAULT]",Axe={[KA]:"fire-core",[JSe]:"fire-core-compat",[txe]:"fire-analytics",[exe]:"fire-analytics-compat",[rxe]:"fire-app-check",[nxe]:"fire-app-check-compat",[ixe]:"fire-auth",[sxe]:"fire-auth-compat",[oxe]:"fire-rtdb",[axe]:"fire-data-connect",[lxe]:"fire-rtdb-compat",[cxe]:"fire-fn",[uxe]:"fire-fn-compat",[dxe]:"fire-iid",[hxe]:"fire-iid-compat",[fxe]:"fire-fcm",[pxe]:"fire-fcm-compat",[mxe]:"fire-perf",[gxe]:"fire-perf-compat",[_xe]:"fire-rc",[yxe]:"fire-rc-compat",[vxe]:"fire-gcs",[bxe]:"fire-gcs-compat",[Exe]:"fire-fst",[wxe]:"fire-fst-compat",[Ixe]:"fire-vertex","fire-js":"fire-js",[Cxe]:"fire-js-all"},Mf=new Map,lE=new Map,cE=new Map;function MQ(n,e){try{n.container.addComponent(e)}catch(t){Uc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qg(n){const e=n.name;if(cE.has(e))return Uc.debug(`There were multiple attempts to register component ${e}.`),!1;cE.set(e,n);for(const t of Mf.values())MQ(t,n);for(const t of lE.values())MQ(t,n);return!0}function YA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ad(n){return void 0!==n.settings}const Sa=new oE("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class PQ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Df("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sa.create("app-deleted",{appName:this._name})}}const Kg="11.1.0";function kQ(n=QA){const e=Mf.get(n);if(!e&&n===QA&&TQ())return function Rxe(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:QA,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Sa.create("bad-app-name",{appName:String(i)});if(t||(t=TQ()),!t)throw Sa.create("no-options");const s=Mf.get(i);if(s){if(GA(t,s.options)&&GA(r,s.config))return s;throw Sa.create("duplicate-app",{appName:i})}const o=new qSe(i);for(const l of cE.values())o.addComponent(l);const a=new PQ(t,r,o);return Mf.set(i,a),a}();if(!e)throw Sa.create("no-app",{appName:n});return e}function ld(n,e,t){var r;let i=null!==(r=Axe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Uc.warn(a.join(" "))}qg(new Df(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Pxe="firebase-heartbeat-database",kxe=1,uE="firebase-heartbeat-store";let IO=null;function NQ(){return IO||(IO=(0,RQ.P2)(Pxe,kxe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(uE)}catch(t){console.warn(t)}}}).catch(n=>{throw Sa.create("idb-open",{originalErrorMessage:n.message})})),IO}function wO(){return(wO=(0,O.A)(function*(n){try{const t=(yield NQ()).transaction(uE),r=yield t.objectStore(uE).get(FQ(n));return yield t.done,r}catch(e){if(e instanceof od)Uc.warn(e.message);else{const t=Sa.create("idb-get",{originalErrorMessage:e?.message});Uc.warn(t.message)}}})).apply(this,arguments)}function OQ(n,e){return CO.apply(this,arguments)}function CO(){return(CO=(0,O.A)(function*(n,e){try{const r=(yield NQ()).transaction(uE,"readwrite");yield r.objectStore(uE).put(e,FQ(n)),yield r.done}catch(t){if(t instanceof od)Uc.warn(t.message);else{const r=Sa.create("idb-set",{originalErrorMessage:t?.message});Uc.warn(r.message)}}})).apply(this,arguments)}function FQ(n){return`${n.name}!${n.options.appId}`}class Lxe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bxe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,O.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=LQ();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Uc.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,O.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=LQ(),{heartbeatsToSend:i,unsentEntries:s}=function Vxe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),VQ(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),VQ(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=UA(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Uc.warn(r),""}})()}}function LQ(){return(new Date).toISOString().substring(0,10)}class Bxe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,O.A)(function*(){return!!function SSe(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function xSe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,O.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Nxe(n){return wO.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,O.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return OQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,O.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return OQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function VQ(n){return UA(JSON.stringify({version:2,heartbeats:n})).length}!function Uxe(n){qg(new Df("platform-logger",e=>new XSe(e),"PRIVATE")),qg(new Df("heartbeat",e=>new Lxe(e),"PRIVATE")),ld(KA,bO,n),ld(KA,bO,"esm2017"),ld("fire-js","")}("");const BQ="@firebase/database";let TO="";class jxe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Hi(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:aE(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class zxe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Bl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const zQ=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jxe(e)}}catch{}return new zxe},Pf=zQ("localStorage"),AO=zQ("sessionStorage"),Qg=new vO("@firebase/database"),HQ=function(){let n=1;return function(){return n++}}(),$Q=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,$e(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new NSe;t.update(e);const r=t.digest();return pO.encodeByteArray(r)},dE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=dE.apply(null,r):e+="object"==typeof r?Hi(r):r,e+=" "}return e};let kf=null,WQ=!0;const Ji=function(...n){if(!0===WQ&&(WQ=!1,null===kf&&!0===AO.get("logging_enabled")&&function(n,e){$e(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Qg.logLevel=nr.VERBOSE,kf=Qg.log.bind(Qg),e&&AO.set("logging_enabled",!0)):"function"==typeof n?kf=n:(kf=null,AO.remove("logging_enabled"))}(!0)),kf){const e=dE.apply(null,n);kf(e)}},hE=function(n){return function(...e){Ji(n,...e)}},SO=function(...n){const e="FIREBASE INTERNAL ERROR: "+dE(...n);Qg.error(e)},Ul=function(...n){const e=`FIREBASE FATAL ERROR: ${dE(...n)}`;throw Qg.error(e),new Error(e)},Fs=function(...n){const e="FIREBASE WARNING: "+dE(...n);Qg.warn(e)},XA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},cd="[MIN_NAME]",jc="[MAX_NAME]",Nf=function(n,e){if(n===e)return 0;if(n===cd||e===jc)return-1;if(e===cd||n===jc)return 1;{const t=QQ(n),r=QQ(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Wxe=function(n,e){return n===e?0:n<e?-1:1},fE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Hi(e))},xO=function(n){if("object"!=typeof n||null===n)return Hi(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Hi(e[r]),t+=":",t+=xO(n[e[r]]);return t+="}",t},qQ=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function es(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const KQ=function(n){$e(!XA(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),h+=m}return h.toLowerCase()},Qxe=new RegExp("^-?(0*)\\d{1,10}$"),QQ=function(n){if(Qxe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Yg=function(n){try{n()}catch(e){setTimeout(()=>{throw Fs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},pE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Jxe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Fs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class eDe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ji("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fs(e)}}let mE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const eY=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rY="websocket",iY="long_polling";class RO{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pf.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function sY(n,e,t){let r;if($e("string"==typeof e,"typeof type must == string"),$e("object"==typeof t,"typeof params must == object"),e===rY)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==iY)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function tDe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return es(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class nDe{constructor(){this.counters_={}}incrementCounter(e,t=1){Bl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return pSe(this.counters_)}}const MO={},PO={};function kO(n){const e=n.toString();return MO[e]||(MO[e]=new nDe),MO[e]}class iDe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ud{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hE(e),this.stats_=kO(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),sY(t,iY,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new iDe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new NO((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&eY.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ud.forceAllow_=!0}static forceDisallow(){ud.forceDisallow_=!0}static isAvailable(){return!(!ud.forceAllow_&&(ud.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Hi(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=IQ(t),i=qQ(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Hi(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class NO{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=HQ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=NO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ji("frame writing exception"),a.stack&&Ji(a.stack),Ji(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ji("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ji("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let JA=null;typeof MozWebSocket<"u"?JA=MozWebSocket:typeof WebSocket<"u"&&(JA=WebSocket);let Xg=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hE(this.connId),this.stats_=kO(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&eY.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),sY(t,rY,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pf.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new JA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==JA&&!n.forceDisallow_}static previouslyFailed(){return Pf.isInMemoryStorage||!0===Pf.get("previous_websocket_failure")}markConnectionHealthy(){Pf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=aE(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if($e(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Hi(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=qQ(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),hY=(()=>{class n{static get ALL_TRANSPORTS(){return[ud,Xg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=Xg&&Xg.isAvailable();let i=r&&!Xg.previouslyFailed();if(t.webSocketOnly&&(r||Fs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Xg];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class vY{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hE("c:"+this.id+":"),this.transportManager_=new hY(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=pE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=fE("t",e),r=fE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=fE("t",e),r=fE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=fE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?SO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):SO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Fs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),pE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bY{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class EY{constructor(e){this.allowedEvents_=e,this.listeners_={},$e(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){$e(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class eS extends EY{static getInstance(){return new eS}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mO()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return $e("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function kn(){return new Gn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dd(n){return n.pieces_.length-n.pieceNum_}function cr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Gn(n.pieces_,e)}function FO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function gE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function CY(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Gn(e,0)}function Vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Gn(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function so(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return so(cr(n),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function LO(n,e){if(dd(n)!==dd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function xa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dd(n)>dd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class SDe{constructor(e,t){this.errorPrefix_=t,this.parts_=gE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=qA(this.parts_[r]);TY(this)}}function TY(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Of(n))}function Of(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class VO extends EY{static getInstance(){return new VO}constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return $e("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _E=1e3;let nS,Ff=(()=>{class n extends bY{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=hE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_E,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&eS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Hi(o)),$e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new HA,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),$e(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$e(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Bl(t,"w")){const i=$g(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Fs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=$A(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=$A(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),$e(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Hi(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):SO("Unrecognized action received from server: "+Hi(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){$e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_E,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=_E,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_E),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){$e(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?Ji("getToken() completed but was canceled"):(Ji("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new vY(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{Fs(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&Fs(y),u())}}})()}interrupt(t){Ji("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ji("Resuming connection for reason: "+t),delete this.interruptReasons_[t],gO(this.interruptReasons_)&&(this.reconnectDelay_=_E,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>xO(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Gn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ji("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ji("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+TO.replace(/\./g,"-")]=1,mO()?t["framework.cordova"]=1:SQ()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=eS.getInstance().currentlyOnline();return gO(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class tS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(cd,e),i=new cn(cd,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class xY extends tS{static get __EMPTY_NODE(){return nS}static set __EMPTY_NODE(e){nS=e}compare(e,t){return Nf(e.name,t.name)}isDefinedOn(e){throw Hg("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn(jc,nS)}makePost(e,t){return $e("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,nS)}toString(){return".key"}}const jl=new xY;class rS{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let UO,ll=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Po.EMPTY_NODE,this.right=o??Po.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Po.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Po.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Po{constructor(e,t=Po.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Po(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ll.BLACK,null,null))}remove(e){return new Po(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ll.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rS(this.root_,null,this.comparator_,!0,e)}}function ODe(n,e){return Nf(n.name,e.name)}function BO(n,e){return Nf(n,e)}Po.EMPTY_NODE=new class NDe{copy(e,t,r,i,s){return this}insert(e,t,r){return new ll(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const DY=function(n){return"number"==typeof n?"number:"+KQ(n):"string:"+n},RY=function(n){if(n.isLeafNode()){const e=n.val();$e("string"==typeof e||"number"==typeof e||"object"==typeof e&&Bl(e,".sv"),"Priority must be a string or number.")}else $e(n===UO||n.isEmpty(),"priority of unexpected type.");$e(n===UO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let MY,PY,kY,Zg=(()=>{class n{static set __childrenNodeConstructor(t){MY=t}static get __childrenNodeConstructor(){return MY}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,$e(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),RY(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:($e(".priority"!==i||1===dd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+DY(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?KQ(this.value_):this.value_,this.lazyHash_=$Q(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:($e(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return $e(s>=0,"Unknown leaf type: "+r),$e(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _r=new class BDe extends tS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Nf(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(jc,new Zg("[PRIORITY-POST]",kY))}makePost(e,t){const r=PY(e);return new cn(t,new Zg("[PRIORITY-POST]",r))}toString(){return".priority"}},UDe=Math.log(2);class jDe{constructor(e){this.count=parseInt(Math.log(e+1)/UDe,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const iS=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let h,m;if(0===u)return null;if(1===u)return h=n[l],m=t?t(h):h,new ll(m,h.node,ll.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return h=n[y],m=t?t(h):h,new ll(m,h.node,ll.BLACK,b,T)}},a=function(l){let c=null,u=null,h=n.length;const m=function(b,T){const M=h-b,B=h;h-=b;const V=i(M+1,B),Q=n[M],we=t?t(Q):Q;y(new ll(we,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),M=Math.pow(2,l.count-(b+1));T?m(M,ll.BLACK):(m(M,ll.BLACK),m(M,ll.RED))}return u}(new jDe(n.length));return new Po(r||e,a)};let jO;const Jg={};class zc{static get Default(){return $e(Jg&&_r,"ChildrenNode.ts has not been loaded"),jO=jO||new zc({".priority":Jg},{".priority":_r}),jO}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=$g(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Po?t:null}hasIndex(e){return Bl(this.indexSet_,e.toString())}addIndex(e,t){$e(e!==jl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(cn.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?iS(r,e.getCompare()):Jg;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new zc(u,c)}addToIndexes(e,t){const r=WA(this.indexes_,(i,s)=>{const o=$g(this.indexSet_,s);if($e(o,"Missing index implementation for "+s),i===Jg){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(cn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),iS(a,o.getCompare())}return Jg}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new cn(e.name,a))),l.insert(e,e.node)}});return new zc(r,this.indexSet_)}removeFromIndexes(e,t){const r=WA(this.indexes_,i=>{if(i===Jg)return i;{const s=t.get(e.name);return s?i.remove(new cn(e.name,s)):i}});return new zc(r,this.indexSet_)}}let yE,Wt=(()=>{class n{static get EMPTY_NODE(){return yE||(yE=new n(new Po(BO),null,zc.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&RY(this.priorityNode_),this.children_.isEmpty()&&$e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?yE:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(cr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if($e(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?yE:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{$e(".priority"!==sn(t)||1===dd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(cr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(_r,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+DY(this.getPriority().val())+":"),this.forEachChild(_r,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":$Q(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new cn(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,cn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===vE?-1:0}withIndex(t){if(t===jl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===jl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(_r),s=r.getIterator(_r);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===jl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const vE=new class zDe extends Wt{constructor(){super(new Po(BO),Wt.EMPTY_NODE,zc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(cn,{MIN:{value:new cn(cd,Wt.EMPTY_NODE)},MAX:{value:new cn(jc,vE)}}),xY.__EMPTY_NODE=Wt.EMPTY_NODE,Zg.__childrenNodeConstructor=Wt,function FDe(n){UO=n}(vE),function VDe(n){kY=n}(vE);const HDe=!0;function Xr(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),$e(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Zg(n,Xr(e));if(n instanceof Array||!HDe){let t=Wt.EMPTY_NODE;return es(n,(r,i)=>{if(Bl(n,r)&&"."!==r.substring(0,1)){const s=Xr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Xr(e))}{const t=[];let r=!1;if(es(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Xr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new cn(o,l)))}}),0===t.length)return Wt.EMPTY_NODE;const s=iS(t,ODe,o=>o.name,BO);if(r){const o=iS(t,_r.getCompare());return new Wt(s,Xr(e),new zc({".priority":o},{".priority":_r}))}return new Wt(s,Xr(e),zc.Default)}}!function LDe(n){PY=n}(Xr);class zO extends tS{constructor(e){super(),this.indexPath_=e,$e(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Nf(e.name,t.name):s}makePost(e,t){const r=Xr(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,vE);return new cn(jc,e)}toString(){return gE(this.indexPath_,0).join("/")}}const HO=new class $De extends tS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Nf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=Xr(e);return new cn(t,r)}toString(){return".value"}};function NY(n){return{type:"value",snapshotNode:n}}function e_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function EE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class $O{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){$e(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(bE(t,a)):$e(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(e_(t,r)):o.trackChildChange(EE(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(_r,(i,s)=>{t.hasChild(i)||r.trackChildChange(bE(i,s))}),t.isLeafNode()||t.forEachChild(_r,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(EE(i,s,o))}else r.trackChildChange(e_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class IE{constructor(e){this.indexedFilter_=new $O(e.getIndex()),this.index_=e.getIndex(),this.startPost_=IE.getStartPost_(e),this.endPost_=IE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new cn(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const s=this;return t.forEachChild(_r,(o,a)=>{s.matches(new cn(o,a))||(i=i.updateImmediateChild(o,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class GDe{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new IE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new cn(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Wt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(m,y)=>h(y,m)}else o=this.index_.getCompare();const a=e;$e(a.numChildren()===this.limit_,"");const l=new cn(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const h=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(EE(t,r,h)),a.updateImmediateChild(t,r);{s?.trackChildChange(bE(t,h));const T=a.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(e_(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(bE(c.name,c.node)),s.trackChildChange(e_(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,Wt.EMPTY_NODE)):e}}class WO{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_r}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return $e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cd}hasEnd(){return this.endSet_}getIndexEndValue(){return $e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return $e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_r}copy(){const e=new WO;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function OY(n){const e={};if(n.isDefault())return e;let t;if(n.index_===_r?t="$priority":n.index_===HO?t="$value":n.index_===jl?t="$key":($e(n.index_ instanceof zO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Hi(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Hi(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Hi(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Hi(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Hi(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function FY(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_r&&(e.i=n.index_.toString()),e}class oS extends bY{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:($e(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hE("p:rest:"),this.listens_={}}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=oS.getListenId_(e,r),a={};this.listens_[o]=a;const l=OY(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(404===c&&(h=null,c=null),null===c&&this.onDataUpdate_(s,h,!1,r),$g(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=oS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=OY(e._queryParams),r=e._path.toString(),i=new HA;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Wg(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=aE(a.responseText)}catch{Fs("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Fs("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class ZDe{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function aS(){return{value:null,children:new Map}}function t_(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,aS()),t_(n.children.get(r),e=cr(e),t)}}function QO(n,e,t){null!==n.value?t(e,n.value):function JDe(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{QO(i,new Gn(e.toString()+"/"+r),t)})}class eRe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&es(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class rRe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new eRe(e);const r=1e4+2e4*Math.random();pE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;es(e,(i,s)=>{s>0&&Bl(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),pE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zl=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(zl||{});function ZO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class lS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return $e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Gn(e));return new lS(kn(),t,this.revert)}}return $e(sn(this.path)===e,"operationForChild called for unrelated child."),new lS(cr(this.path),this.affectedTree,this.revert)}}class wE{constructor(e,t){this.source=e,this.path=t,this.type=zl.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new wE(this.source,kn()):new wE(this.source,cr(this.path))}}class Lf{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zl.OVERWRITE}operationForChild(e){return on(this.path)?new Lf(this.source,kn(),this.snap.getImmediateChild(e)):new Lf(this.source,cr(this.path),this.snap)}}class n_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zl.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new Gn(e));return t.isEmpty()?null:t.value?new Lf(this.source,kn(),t.value):new n_(this.source,kn(),t)}return $e(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n_(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class iRe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function CE(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function aRe(n,e,t){if(null==e.childName||null==t.childName)throw Hg("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function oRe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function cS(n,e){return{eventCache:n,serverCache:e}}function TE(n,e,t,r){return cS(new hd(e,t,r),n.serverCache)}function VY(n,e,t,r){return cS(n.eventCache,new hd(e,t,r))}function uS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let JO;class yr{static fromObject(e){let t=new yr(null);return es(e,(r,i)=>{t=t.set(new Gn(r),i)}),t}constructor(e,t=(()=>(JO||(JO=new Po(Wxe)),JO))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:kn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(cr(e),t);return null!=s?{path:Vr(new Gn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(cr(e)):new yr(null)}}set(e,t){if(on(e))return new yr(t,this.children);{const r=sn(e),s=(this.children.get(r)||new yr(null)).set(cr(e),t),o=this.children.insert(r,s);return new yr(this.value,o)}}remove(e){if(on(e))return this.children.isEmpty()?new yr(null):new yr(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(cr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new yr(null):new yr(this.value,s)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(cr(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),s=(this.children.get(r)||new yr(null)).setTree(cr(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new yr(this.value,o)}}fold(e){return this.fold_(kn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,kn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const s=sn(e),o=this.children.get(s);return o?o.findOnPath_(cr(e),Vr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,kn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),s=this.children.get(i);return s?s.foreachOnPath_(cr(e),Vr(t,i),r):new yr(null)}}foreach(e){this.foreach_(kn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class cl{constructor(e){this.writeTree_=e}static empty(){return new cl(new yr(null))}}function AE(n,e,t){if(on(e))return new cl(new yr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=so(i,e);return s=s.updateChild(o,t),new cl(n.writeTree_.set(i,s))}{const i=new yr(t),s=n.writeTree_.setTree(e,i);return new cl(s)}}}function eF(n,e,t){let r=n;return es(t,(i,s)=>{r=AE(r,Vr(e,i),s)}),r}function BY(n,e){if(on(e))return cl.empty();{const t=n.writeTree_.setTree(e,new yr(null));return new cl(t)}}function tF(n,e){return null!=Bf(n,e)}function Bf(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(so(t.path,e)):null}function UY(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_r,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function fd(n,e){if(on(e))return n;{const t=Bf(n,e);return new cl(null!=t?new yr(t):n.writeTree_.subtree(e))}}function nF(n){return n.writeTree_.isEmpty()}function r_(n,e){return jY(kn(),n.writeTree_,e)}function jY(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?($e(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=jY(Vr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Vr(n,".priority"),r)),t}}function dS(n,e){return GY(e,n)}function fRe(n,e){if(n.snap)return xa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&xa(Vr(n.path,t),e))return!0;return!1}function mRe(n){return n.visible}function zY(n,e,t){let r=cl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)xa(t,o)?(a=so(t,o),r=AE(r,a,s.snap)):xa(o,t)&&(a=so(o,t),r=AE(r,kn(),s.snap.getChild(a)));else{if(!s.children)throw Hg("WriteRecord should have .snap or .children");if(xa(t,o))a=so(t,o),r=eF(r,a,s.children);else if(xa(o,t))if(a=so(o,t),on(a))r=eF(r,kn(),s.children);else{const l=$g(s.children,sn(a));if(l){const c=l.getChild(cr(a));r=AE(r,kn(),c)}}}}}return r}function HY(n,e,t,r,i){if(r||i){const s=fd(n.visibleWrites,e);return!i&&nF(s)?t:i||null!=t||tF(s,kn())?r_(zY(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(xa(c.path,e)||xa(e,c.path))},e),t||Wt.EMPTY_NODE):null}{const s=Bf(n.visibleWrites,e);if(null!=s)return s;{const o=fd(n.visibleWrites,e);return nF(o)?t:null!=t||tF(o,kn())?r_(o,t||Wt.EMPTY_NODE):null}}}function hS(n,e,t,r){return HY(n.writeTree,n.treePath,e,t,r)}function rF(n,e){return function gRe(n,e,t){let r=Wt.EMPTY_NODE;const i=Bf(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_r,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=fd(n.visibleWrites,e);return t.forEachChild(_r,(o,a)=>{const l=r_(fd(s,new Gn(o)),a);r=r.updateImmediateChild(o,l)}),UY(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return UY(fd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function $Y(n,e,t,r){return function _Re(n,e,t,r,i){$e(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Vr(e,t);if(tF(n.visibleWrites,s))return null;{const o=fd(n.visibleWrites,s);return nF(o)?i.getChild(t):r_(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function fS(n,e){return function vRe(n,e){return Bf(n.visibleWrites,e)}(n.writeTree,Vr(n.treePath,e))}function iF(n,e,t){return function yRe(n,e,t,r){const i=Vr(e,t),s=Bf(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?r_(fd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function WY(n,e){return GY(Vr(n.treePath,e),n.writeTree)}function GY(n,e){return{treePath:n,writeTree:e}}class wRe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;$e("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),$e(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,EE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,bE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,e_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Hg("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,EE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const qY=new class CRe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class sF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vf(this.viewCache_),s=function IRe(n,e,t,r,i,s){return function bRe(n,e,t,r,i,s,o){let a;const l=fd(n.visibleWrites,e),c=Bf(l,kn());if(null!=c)a=c;else{if(null==t)return[];a=r_(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==h(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function KY(n,e,t,r,i,s){const o=e.eventCache;if(null!=fS(r,t))return e;{let a,l;if(on(t))if($e(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Vf(e),h=rF(r,c instanceof Wt?c:Wt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=hS(r,Vf(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=sn(t);if(".priority"===c){$e(1===dd(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=$Y(r,t,u,l);a=null!=h?n.filter.updatePriority(u,h):o.getNode()}else{const u=cr(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=$Y(r,t,o.getNode(),l);h=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else h=iF(r,c,e.serverCache);a=null!=h?n.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return TE(e,a,o.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function pS(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(on(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=sn(t);if(!l.isCompleteForPath(t)&&dd(t)>1)return e;const b=cr(t),M=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),M):u.updateChild(l.getNode(),y,M,b,qY,null)}const h=VY(e,c,l.isFullyInitialized()||on(t),u.filtersNodes());return KY(n,h,t,i,new sF(i,h,s),a)}function oF(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new sF(i,e,s);if(on(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=TE(e,c,!0,n.filter.filtersNodes());else{const h=sn(t);if(".priority"===h)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=TE(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=cr(t),y=a.getNode().getImmediateChild(h);let b;if(on(m))b=r;else{const T=u.getCompleteChild(h);b=null!=T?".priority"===FO(m)&&T.getChild(CY(m)).isEmpty()?T:T.updateChild(m,r):Wt.EMPTY_NODE}l=y.equals(b)?e:TE(e,n.filter.updateChild(a.getNode(),h,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function QY(n,e){return n.eventCache.isCompleteForChild(e)}function YY(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function aF(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=on(t)?r:new yr(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,m)=>{if(u.hasChild(h)){const b=YY(0,e.serverCache.getNode().getImmediateChild(h),m);l=pS(n,l,new Gn(h),b,i,s,o,a)}}),c.children.inorderTraversal((h,m)=>{const y=!e.serverCache.isCompleteForChild(h)&&null===m.value;if(!u.hasChild(h)&&!y){const T=YY(0,e.serverCache.getNode().getImmediateChild(h),m);l=pS(n,l,new Gn(h),T,i,s,o,a)}}),l}class kRe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new $O(r.getIndex()),s=function qDe(n){return n.loadsAllData()?new $O(n.getIndex()):n.hasLimit()?new GDe(n):new IE(n)}(r);this.processor_=function TRe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Wt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Wt.EMPTY_NODE,a.getNode(),null),u=new hd(l,o.isFullyInitialized(),i.filtersNodes()),h=new hd(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=cS(h,u),this.eventGenerator_=new iRe(this.query_)}get query(){return this.query_}}function FRe(n,e){const t=Vf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function XY(n){return 0===n.eventRegistrations_.length}function ZY(n,e,t){const r=[];if(t){$e(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JY(n,e,t,r){e.type===zl.MERGE&&null!==e.source.queryId&&($e(Vf(n.viewCache_),"We should always have a full cache before handling merges"),$e(uS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function SRe(n,e,t,r,i){const s=new wRe;let o,a;if(t.type===zl.OVERWRITE){const c=t;c.source.fromUser?o=oF(n,e,c.path,c.snap,r,i,s):($e(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!on(c.path),o=pS(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===zl.MERGE){const c=t;c.source.fromUser?o=function DRe(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Vr(t,l);QY(e,sn(u))&&(a=oF(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Vr(t,l);QY(e,sn(u))||(a=oF(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):($e(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=aF(n,e,c.path,c.children,r,i,a,s))}else if(t.type===zl.ACK_USER_WRITE){const c=t;o=c.revert?function PRe(n,e,t,r,i,s){let o;if(null!=fS(r,t))return e;{const a=new sF(r,e,i),l=e.eventCache.getNode();let c;if(on(t)||".priority"===sn(t)){let u;if(e.serverCache.isFullyInitialized())u=hS(r,Vf(e));else{const h=e.serverCache.getNode();$e(h instanceof Wt,"serverChildren would be complete if leaf node"),u=rF(r,h)}c=n.filter.updateFullNode(l,u,s)}else{const u=sn(t);let h=iF(r,u,e.serverCache);null==h&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),c=null!=h?n.filter.updateChild(l,u,h,cr(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,Wt.EMPTY_NODE,cr(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=hS(r,Vf(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=fS(r,kn()),TE(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function RRe(n,e,t,r,i,s,o){if(null!=fS(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(on(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return pS(n,e,t,l.getNode().getChild(t),i,s,a,o);if(on(t)){let c=new yr(null);return l.getNode().forEachChild(jl,(u,h)=>{c=c.set(new Gn(u),h)}),aF(n,e,t,c,i,s,a,o)}return e}{let c=new yr(null);return r.foreach((u,h)=>{const m=Vr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),aF(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==zl.LISTEN_COMPLETE)throw Hg("Unknown operation type: "+t.type);o=function MRe(n,e,t,r,i){const s=e.serverCache;return KY(n,VY(e,s.getNode(),s.isFullyInitialized()||on(t),s.isFiltered()),t,r,qY,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function xRe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=uS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(NY(uS(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function ARe(n,e){$e(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),$e(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),$e(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,eX(n,s.changes,s.viewCache.eventCache.getNode(),null)}function eX(n,e,t,r){return function sRe(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function WDe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),CE(n,i,"child_removed",e,r,t),CE(n,i,"child_added",e,r,t),CE(n,i,"child_moved",s,r,t),CE(n,i,"child_changed",e,r,t),CE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let mS,_S;class tX{constructor(){this.views=new Map}}function lF(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return $e(null!=s,"SyncTree gave us an op for an invalid query."),JY(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(JY(o,e,t,r));return s}}function nX(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=hS(t,i?r:null),l=!1;a?l=!0:r instanceof Wt?(a=rF(t,r),l=!1):(a=Wt.EMPTY_NODE,l=!1);const c=cS(new hd(a,l,!1),new hd(r,i,!1));return new kRe(e,c)}return o}function rX(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function pd(n,e){let t=null;for(const r of n.views.values())t=t||FRe(r,e);return t}function iX(n,e){return e._queryParams.loadsAllData()?gS(n):n.views.get(e._queryIdentifier)}function sX(n,e){return null!=iX(n,e)}function md(n){return null!=gS(n)}function gS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let GRe=1;class oX{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yr(null),this.pendingWriteTree_=function ERe(){return{visibleWrites:cl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function cF(n,e,t,r,i){return function cRe(n,e,t,r,i){$e(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=AE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?i_(n,new Lf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function gd(n,e,t=!1){const r=function dRe(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function hRe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);$e(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&fRe(a,r.path)?i=!1:xa(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function pRe(n){n.visibleWrites=zY(n.allWrites,mRe,kn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=BY(n.visibleWrites,r.path):es(r.children,l=>{n.visibleWrites=BY(n.visibleWrites,Vr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new yr(null);return null!=r.snap?s=s.set(kn(),!0):es(r.children,o=>{s=s.set(new Gn(o),!0)}),i_(n,new lS(r.path,s,t))}return[]}function SE(n,e,t){return i_(n,new Lf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function yS(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||sX(o,e))){const l=function HRe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=md(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(ZY(c,t,r)),XY(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(ZY(l,t,r)),XY(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!md(n)&&s.push(new(function URe(){return $e(mS,"Reference.ts has not been loaded"),mS}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function jRe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(s,(m,y)=>md(y));if(u&&!h){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function JRe(n){return n.fold((e,t,r)=>{if(t&&md(t))return[gS(t)];{let i=[];return t&&(i=rX(t)),es(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],M=T.query,B=uX(n,T);n.listenProvider_.startListening(DE(M),xE(n,M),B.hashFn,B.onComplete)}}}!h&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(DE(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(bS(m));n.listenProvider_.stopListening(DE(m),y)}))}!function eMe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=bS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function aX(n,e,t,r){const i=dF(n,r);if(null!=i){const s=hF(i),o=s.path,a=s.queryId,l=so(o,e);return fF(n,o,new Lf(ZO(a),l,t))}return[]}function uF(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=so(m,i);s=s||pd(y,b),o=o||md(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||md(a),s=s||pd(a,kn())):(a=new tX,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=pd(b,kn());T&&(s=s.updateImmediateChild(y,T))}));const c=sX(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=bS(e);$e(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function tMe(){return GRe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let h=function zRe(n,e,t,r,i,s){const o=nX(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function LRe(n,e){n.eventRegistrations_.push(e)}(o,t),function VRe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_r,(s,o)=>{r.push(e_(s,o))}),t.isFullyInitialized()&&r.push(NY(t.getNode())),eX(n,r,t.getNode(),e)}(o,t)}(a,e,t,dS(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=iX(a,e);h=h.concat(function nMe(n,e,t){const r=e._path,i=xE(n,e),s=uX(n,t),o=n.listenProvider_.startListening(DE(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)$e(!md(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!on(c)&&u&&md(u))return[gS(u).query];{let m=[];return u&&(m=m.concat(rX(u).map(y=>y.query))),es(h,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(DE(u),xE(n,u))}}return o}(n,e,m))}return h}function vS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=pd(a,so(o,e));if(c)return c});return HY(i,e,s,t,!0)}function i_(n,e){return lX(e,n.syncPointTree_,null,dS(n.pendingWriteTree_,kn()))}function lX(n,e,t,r){if(on(n.path))return cX(n,e,t,r);{const i=e.get(kn());null==t&&null!=i&&(t=pd(i,kn()));let s=[];const o=sn(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=WY(r,o);s=s.concat(lX(a,l,c,u))}return i&&(s=s.concat(lF(i,n,r,t))),s}}function cX(n,e,t,r){const i=e.get(kn());null==t&&null!=i&&(t=pd(i,kn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=WY(r,o),u=n.operationForChild(o);u&&(s=s.concat(cX(u,a,l,c)))}),i&&(s=s.concat(lF(i,n,r,t))),s}function uX(n,e){const t=e.query,r=xE(n,t);return{hashFn:()=>(function NRe(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function YRe(n,e,t){const r=dF(n,t);if(r){const i=hF(r),s=i.path,o=i.queryId,a=so(s,e);return fF(n,s,new wE(ZO(o),a))}return[]}(n,t._path,r):function QRe(n,e){return i_(n,new wE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Kxe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return yS(n,t,null,s)}}}}function xE(n,e){const t=bS(e);return n.queryToTagMap.get(t)}function bS(n){return n._path.toString()+"$"+n._queryIdentifier}function dF(n,e){return n.tagToQueryMap.get(e)}function hF(n){const e=n.indexOf("$");return $e(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Gn(n.substr(0,e))}}function fF(n,e,t){const r=n.syncPointTree_.get(e);return $e(r,"Missing sync point for query tag that we're tracking"),lF(r,t,dS(n.pendingWriteTree_,e),null)}function DE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function WRe(){return $e(_S,"Reference.ts has not been loaded"),_S}())(n._repo,n._path):n}class pF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new pF(t)}node(){return this.node_}}class mF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vr(this.path_,e);return new mF(this.syncTree_,t)}node(){return vS(this.syncTree_,this.path_)}}const rMe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},dX=function(n,e,t){return n&&"object"==typeof n?($e(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?iMe(n[".sv"],e,t):"object"==typeof n[".sv"]?sMe(n[".sv"],e):void $e(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},iMe=function(n,e,t){if("timestamp"===n)return t.timestamp;$e(!1,"Unexpected server value: "+n)},sMe=function(n,e,t){n.hasOwnProperty("increment")||$e(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&$e(!1,"Unexpected increment value: "+r);const i=e.node();if($e(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},hX=function(n,e,t,r){return _F(e,new mF(t,n),r)},gF=function(n,e,t){return _F(n,new pF(e),t)};function _F(n,e,t){const r=n.getPriority().val(),i=dX(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=dX(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Zg(a,Xr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Zg(i))),o.forEachChild(_r,(a,l)=>{const c=_F(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class yF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ES(n,e){let t=e instanceof Gn?e:new Gn(e),r=n,i=sn(t);for(;null!==i;){const s=$g(r.node.children,i)||{children:{},childCount:0};r=new yF(i,r,s),t=cr(t),i=sn(t)}return r}function Uf(n){return n.node.value}function vF(n,e){n.node.value=e,bF(n)}function fX(n){return n.node.childCount>0}function IS(n,e){es(n.node.children,(t,r)=>{e(new yF(t,n,r))})}function pX(n,e,t,r){t&&!r&&e(n),IS(n,i=>{pX(i,e,!0,r)}),t&&r&&e(n)}function RE(n){return new Gn(null===n.parent?n.name:RE(n.parent)+"/"+n.name)}function bF(n){null!==n.parent&&function lMe(n,e,t){const r=function oMe(n){return void 0===Uf(n)&&!fX(n)}(t),i=Bl(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,bF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,bF(n))}(n.parent,n.name,n)}const cMe=/[\[\].#$\/\u0000-\u001F\u007F]/,uMe=/[\[\].#$\u0000-\u001F\u007F]/,EF=10485760,wS=function(n){return"string"==typeof n&&0!==n.length&&!cMe.test(n)},mX=function(n){return"string"==typeof n&&0!==n.length&&!uMe.test(n)},PE=function(n,e,t){const r=t instanceof Gn?new SDe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Of(r));if("function"==typeof e)throw new Error(n+"contains a function "+Of(r)+" with contents = "+e.toString());if(XA(e))throw new Error(n+"contains "+e.toString()+" "+Of(r));if("string"==typeof e&&e.length>EF/3&&qA(e)>EF)throw new Error(n+"contains a string greater than "+EF+" utf8 bytes "+Of(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(es(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!wS(o)))throw new Error(n+" contains an invalid key ("+o+") "+Of(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function xDe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=qA(e),TY(n)})(r,o),PE(n,a,r),function DDe(n){const e=n.parts_.pop();n.byteLength_-=qA(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Of(r)+" in addition to actual children.")}},wF=function(n,e,t,r){if(!(r&&void 0===t||mX(t)))throw new Error(Gg(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fMe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wF(n,e,t,r)};class pMe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ea(n,e,t){(function CS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!LO(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function vX(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(mMe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>xa(r,e)||xa(e,r))}function mMe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();kf&&Ji("event: "+t.toString()),Yg(r)}}}const gMe=25;class _Me{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pMe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=aS(),this.transactionQueueTree_=new yF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function EX(n){const t=n.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function NE(n){return rMe({timestamp:EX(n)})}function IX(n,e,t,r,i){n.dataUpdateCount++;const s=new Gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=WA(t,c=>Xr(c));o=function XRe(n,e,t,r){const i=dF(n,r);if(i){const s=hF(i),o=s.path,a=s.queryId,l=so(o,e),c=yr.fromObject(t);return fF(n,o,new n_(ZO(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Xr(t);o=aX(n.serverSyncTree_,s,l,i)}else if(r){const l=WA(t,c=>Xr(c));o=function KRe(n,e,t){const r=yr.fromObject(t);return i_(n,new n_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Xr(t);o=SE(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=o_(n,s)),ea(n.eventQueue_,a,o)}function wX(n,e){CF(n,"connected",e),!1===e&&function IMe(n){s_(n,"onDisconnectEvents");const e=NE(n),t=aS();QO(n.onDisconnect_,kn(),(i,s)=>{const o=hX(i,s,n.serverSyncTree_,e);t_(t,i,o)});let r=[];QO(t,kn(),(i,s)=>{r=r.concat(SE(n.serverSyncTree_,i,s));const o=function xF(n,e){const t=RE(AX(n,e)),r=ES(n.transactionQueueTree_,e);return function aMe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{DF(n,i)}),DF(n,r),pX(r,i=>{DF(n,i)}),t}(n,i);o_(n,o)}),n.onDisconnect_=aS(),ea(n.eventQueue_,kn(),r)}(n)}function CF(n,e,t){const r=new Gn("/.info/"+e),i=Xr(t);n.infoData_.updateSnapshot(r,i);const s=SE(n.infoSyncTree_,r,i);ea(n.eventQueue_,r,s)}function TS(n){return n.nextWriteId_++}function s_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ji(t,...e)}function SF(n,e,t){return vS(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function AS(n,e=n.transactionQueueTree_){if(e||SS(n,e),Uf(e)){const t=SX(n,e);$e(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function DMe(n,e,t){const r=t.map(c=>c.currentWriteId),i=SF(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];$e(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=so(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{s_(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const h=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(gd(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&h.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();SS(n,ES(n.transactionQueueTree_,e)),AS(n,n.transactionQueueTree_),ea(n.eventQueue_,e,u);for(let m=0;m<h.length;m++)Yg(h[m])}else{if("datastale"===c)for(let h=0;h<t.length;h++)t[h].status=3===t[h].status?4:0;else{Fs("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}o_(n,e)}},o)}(n,RE(e),t)}else fX(e)&&IS(e,t=>{AS(n,t)})}function o_(n,e){const t=AX(n,e),r=RE(t);return function RMe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=so(t,l.path);let h,u=!1;if($e(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,h=l.abortReason,i=i.concat(gd(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=gMe)u=!0,h="maxretry",i=i.concat(gd(n.serverSyncTree_,l.currentWriteId,!0));else{const m=SF(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){PE("transaction failed: Data returned ",y,l.path);let b=Xr(y);"object"==typeof y&&null!=y&&Bl(y,".priority")||(b=b.updatePriority(m.getPriority()));const M=l.currentWriteId,B=NE(n),V=gF(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=TS(n),o.splice(o.indexOf(M),1),i=i.concat(cF(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(gd(n.serverSyncTree_,M,!0))}else u=!0,h="nodata",i=i.concat(gd(n.serverSyncTree_,l.currentWriteId,!0))}ea(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===h?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(h),!1,null)))}SS(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Yg(r[a]);AS(n,n.transactionQueueTree_)}(n,SX(n,t),r),r}function AX(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===Uf(r);)r=ES(r,t),t=sn(e=cr(e));return r}function SX(n,e){const t=[];return xX(n,e,t),t.sort((r,i)=>r.order-i.order),t}function xX(n,e,t){const r=Uf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);IS(e,i=>{xX(n,i,t)})}function SS(n,e){const t=Uf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,vF(e,t.length>0?t:void 0)}IS(e,r=>{SS(n,r)})}function DF(n,e){const t=Uf(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?($e(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):($e(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(gd(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?vF(e,void 0):t.length=s+1,ea(n.eventQueue_,RE(e),i);for(let o=0;o<r.length;o++)Yg(r[o])}}const RF=function(n,e){const t=kMe(n),r=t.namespace;return"firebase.com"===t.domain&&Ul(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ul("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new RO(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Gn(t.pathString)}},kMe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=function MMe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,h)));const m=function PMe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Fs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class RX{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Hi(this.snapshot.exportVal())}}class MX{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class MF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return $e(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ta{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:FO(this._path)}get ref(){return new ul(this._repo,this._path)}get _queryIdentifier(){const e=FY(this._queryParams),t=xO(e);return"{}"===t?"default":t}get _queryObject(){return FY(this._queryParams)}isEqual(e){if(!((e=Aa(e))instanceof ta))return!1;const t=this._repo===e._repo,r=LO(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function TDe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ul extends ta{constructor(e,t){super(e,t,new WO,!1)}get parent(){const e=CY(this._path);return null===e?null:new ul(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class jf{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Gn(e),r=a_(this.ref,e);return new jf(this._node.getChild(t),r,_r)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new jf(i,a_(this.ref,r),_r)))}hasChild(e){const t=new Gn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function a_(n,e){return null===sn((n=Aa(n))._path)?fMe("child","path",e,!1):wF("child","path",e,!1),new ul(n._repo,Vr(n._path,e))}function FMe(n){n=Aa(n);const e=new MF(()=>{}),t=new OE(e);return function bMe(n,e,t){const r=function ZRe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const h=so(c,t);r=r||pd(u,h)});let i=n.syncPointTree_.get(t);i?r=r||pd(i,kn()):(i=new tX,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new hd(r,!0,!1):null;return function ORe(n){return uS(n.viewCache_)}(nX(i,e,dS(n.pendingWriteTree_,e._path),s?o.getNode():Wt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Xr(i).withIndex(e._queryParams.getIndex());let o;if(uF(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=SE(n.serverSyncTree_,e._path,s);else{const a=xE(n.serverSyncTree_,e);o=aX(n.serverSyncTree_,e._path,s,a)}return ea(n.eventQueue_,e._path,o),yS(n.serverSyncTree_,e,t,null,!0),s},i=>(s_(n,"get for query "+Hi(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new jf(r,new ul(n._repo,n._path),n._queryParams.getIndex()))}class OE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new RX("value",this,new jf(e.snapshotNode,new ul(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MX(this,e,t):null}matches(e){return e instanceof OE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function BRe(n){$e(!mS,"__referenceConstructor has already been defined"),mS=n})(ul),function $Re(n){$e(!_S,"__referenceConstructor has already been defined"),_S=n}(ul);const PF={};function LX(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ul("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ji("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=RF(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=RF(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new mE(mE.OWNER):new eDe(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!wS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mX(n)}(t))throw new Error(Gg(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),on(o.path)||Ul("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function YMe(n,e,t,r){let i=PF[e.name];i||(i={},PF[e.name]=i);let s=i[n.toURLString()];return s&&Ul("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new _Me(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new Jxe(n.name,t));return new ZMe(h,n)}class ZMe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function yMe(n,e,t){if(n.stats_=kO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new oS(n.repoInfo_,(r,i,s,o)=>{IX(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wX(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Hi(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ff(n.repoInfo_,e,(r,i,s,o)=>{IX(n,r,i,s,o)},r=>{wX(n,r)},r=>{!function vMe(n,e){es(e,(t,r)=>{CF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function rDe(n,e){const t=n.toString();return PO[t]||(PO[t]=e()),PO[t]}(n.repoInfo_,()=>new rRe(n.stats_,n.server_)),n.infoData_=new ZDe,n.infoSyncTree_=new oX({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=SE(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),CF(n,"connected",!1),n.serverSyncTree_=new oX({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);ea(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ul(this._repo,kn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function QMe(n,e){const t=PF[e];(!t||t[n.key]!==n)&&Ul(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function TX(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ul("Cannot call "+e+" on a deleted database.")}}Ff.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ff.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function tPe(n){(function jQ(n){TO=n})(Kg),qg(new Df("database",(e,{instanceIdentifier:t})=>LX(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),ld(BQ,"1.0.10",n),ld(BQ,"1.0.10","esm2017")}();const iPe=function BX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},UX=new oE("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),MS=new vO("@firebase/auth");function PS(n,...e){MS.logLevel<=nr.ERROR&&MS.error(`Auth (${Kg}): ${n}`,...e)}function ko(n,...e){throw NF(n,...e)}function Da(n,...e){return NF(n,...e)}function kF(n,e,t){const r=Object.assign(Object.assign({},iPe()),{[e]:t});return new oE("auth","Firebase",r).create(e,{appName:n.name})}function ts(n){return kF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function NF(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return UX.create(n,...e)}function We(n,e,...t){if(!n)throw NF(e,...t)}function Wl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw PS(e),new Error(e)}function vd(n,e){n||Wl(e)}function LE(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function OF(){return"http:"===jX()||"https:"===jX()}function jX(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class VE{constructor(e,t){this.shortDelay=e,this.longDelay=t,vd(t>e,"Short delay should be less than long delay!"),this.isMobile=mO()||SQ()}get(){return function oPe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(OF()||function TSe(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function FF(n,e){vd(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class zX{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lPe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},cPe=new VE(3e4,6e4);function Ar(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Sr(n,e,t,r){return LF.apply(this,arguments)}function LF(){return(LF=(0,O.A)(function*(n,e,t,r,i={}){return HX(n,i,(0,O.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Wg(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return function CSe(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(c.referrerPolicy="no-referrer"),zX.fetch()($X(n,n.config.apiHost,t,a),c)}))})).apply(this,arguments)}function HX(n,e,t){return VF.apply(this,arguments)}function VF(){return(VF=(0,O.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},lPe),e);try{const i=new dPe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw BE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw BE(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw BE(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw BE(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kF(n,u,c);ko(n,u)}}catch(i){if(i instanceof od)throw i;ko(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function BF(){return(BF=(0,O.A)(function*(n,e,t,r,i={}){const s=yield Sr(n,e,t,r,i);return"mfaPendingCredential"in s&&ko(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function $X(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?FF(n.config,i):`${n.config.apiScheme}://${i}`}class dPe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Da(this.auth,"network-request-failed")),cPe.get())})}}function BE(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Da(n,e,r);return i.customData._tokenResponse=t,i}function zF(){return(zF=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function QX(n,e){return $F.apply(this,arguments)}function $F(){return($F=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function UE(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function WF(){return(WF=(0,O.A)(function*(n,e=!1){const t=Aa(n),r=yield t.getIdToken(e),i=kS(r);We(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:UE(GF(i.auth_time)),issuedAtTime:UE(GF(i.iat)),expirationTime:UE(GF(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function GF(n){return 1e3*Number(n)}function kS(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return PS("JWT malformed, contained fewer than 3 sections"),null;try{const i=jA(t);return i?JSON.parse(i):(PS("Failed to decode base64 JWT payload"),null)}catch(i){return PS("Caught error parsing JWT payload as JSON",i?.toString()),null}}function YX(n){const e=kS(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $c(n,e){return qF.apply(this,arguments)}function qF(){return(qF=(0,O.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof od&&function gPe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class _Pe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,O.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,O.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class KF{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=UE(this.lastLoginAt),this.creationTime=UE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jE(n){return QF.apply(this,arguments)}function QF(){return(QF=(0,O.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield $c(n,QX(t,{idToken:r}));We(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?XX(s.providerUserInfo):[],a=function vPe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new KF(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)})).apply(this,arguments)}function YF(){return(YF=(0,O.A)(function*(n){const e=Aa(n);yield jE(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function XX(n){return n.map(e=>{var{providerId:t}=e,r=(0,Nc.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function XF(){return(XF=(0,O.A)(function*(n,e){const t=yield HX(n,{},(0,O.A)(function*(){const r=Wg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=$X(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zX.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function ZF(){return(ZF=(0,O.A)(function*(n,e){return Sr(n,"POST","/v2/accounts:revokeToken",Ar(n,e))})).apply(this,arguments)}class c_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YX(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(0!==e.length,"internal-error");const t=YX(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,O.A)(function*(){return t||!r.accessToken||r.isExpired?(We(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,O.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function bPe(n,e){return XF.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new c_;return r&&(We("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(We("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(We("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new c_,this.toJSON())}_performRefresh(){return Wl("not implemented")}}function bd(n,e){We("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Wc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Nc.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _Pe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new KF(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,O.A)(function*(){const r=yield $c(t,t.stsTokenManager.getToken(t.auth,e));return We(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function mPe(n){return WF.apply(this,arguments)}(this,e)}reload(){return function yPe(n){return YF.apply(this,arguments)}(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,O.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield jE(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,O.A)(function*(){if(ad(e.auth.app))return Promise.reject(ts(e.auth));const t=yield e.getIdToken();return yield $c(e,function fPe(n,e){return zF.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const h=null!==(r=t.displayName)&&void 0!==r?r:void 0,m=null!==(i=t.email)&&void 0!==i?i:void 0,y=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,b=null!==(o=t.photoURL)&&void 0!==o?o:void 0,T=null!==(a=t.tenantId)&&void 0!==a?a:void 0,M=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,B=null!==(c=t.createdAt)&&void 0!==c?c:void 0,V=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:Q,emailVerified:we,isAnonymous:je,providerData:He,stsTokenManager:H}=t;We(Q&&H,e,"internal-error");const L=c_.fromJSON(this.name,H);We("string"==typeof Q,e,"internal-error"),bd(h,e.name),bd(m,e.name),We("boolean"==typeof we,e,"internal-error"),We("boolean"==typeof je,e,"internal-error"),bd(y,e.name),bd(b,e.name),bd(T,e.name),bd(M,e.name),bd(B,e.name),bd(V,e.name);const W=new Wc({uid:Q,auth:e,email:m,emailVerified:we,displayName:h,isAnonymous:je,photoURL:b,phoneNumber:y,tenantId:T,stsTokenManager:L,createdAt:B,lastLoginAt:V});return He&&Array.isArray(He)&&(W.providerData=He.map(J=>Object.assign({},J))),M&&(W._redirectEventId=M),W}static _fromIdTokenResponse(e,t,r=!1){return(0,O.A)(function*(){const i=new c_;i.updateFromServerResponse(t);const s=new Wc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jE(s),s})()}static _fromGetAccountInfoResponse(e,t,r){return(0,O.A)(function*(){const i=t.users[0];We(void 0!==i.localId,"internal-error");const s=void 0!==i.providerUserInfo?XX(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||s?.length),a=new c_;a.updateFromIdToken(r);const l=new Wc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new KF(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||s?.length)};return Object.assign(l,c),l})()}}const ZX=new Map;function Gc(n){vd(n instanceof Function,"Expected a class definition");let e=ZX.get(n);return e?(vd(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ZX.set(n,e),e)}const JX=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,O.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,O.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,O.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function NS(n,e,t){return`firebase:${n}:${e}:${t}`}class u_{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=NS(this.userKey,i.apiKey,s),this.fullPersistenceKey=NS("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,O.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Wc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,O.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,O.A)(function*(){if(!t.length)return new u_(Gc(JX),e,r);const i=(yield Promise.all(t.map(function(){var c=(0,O.A)(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Gc(JX);const o=NS(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const h=Wc._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=(0,O.A)(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return c.apply(this,arguments)}}())),new u_(s,e,r)):new u_(s,e,r)})()}}function eZ(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iZ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tZ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oZ(e))return"Blackberry";if(aZ(e))return"Webos";if(nZ(e))return"Safari";if((e.includes("chrome/")||rZ(e))&&!e.includes("edge/"))return"Chrome";if(sZ(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function tZ(n=fs()){return/firefox\//i.test(n)}function nZ(n=fs()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rZ(n=fs()){return/crios\//i.test(n)}function iZ(n=fs()){return/iemobile/i.test(n)}function sZ(n=fs()){return/android/i.test(n)}function oZ(n=fs()){return/blackberry/i.test(n)}function aZ(n=fs()){return/webos/i.test(n)}function JF(n=fs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lZ(n=fs()){return JF(n)||sZ(n)||aZ(n)||oZ(n)||/windows phone/i.test(n)||iZ(n)}function cZ(n,e=[]){let t;switch(n){case"Browser":t=eZ(fs());break;case"Worker":t=`${eZ(fs())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kg}/${r}`}class CPe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,O.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function eL(){return(eL=(0,O.A)(function*(n,e={}){return Sr(n,"GET","/v2/passwordPolicy",Ar(n,e))})).apply(this,arguments)}class SPe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=null===(t=l.meetsMinPasswordLength)||void 0===t||t),l.isValid&&(l.isValid=null===(r=l.meetsMaxPasswordLength)||void 0===r||r),l.isValid&&(l.isValid=null===(i=l.containsLowercaseLetter)||void 0===i||i),l.isValid&&(l.isValid=null===(s=l.containsUppercaseLetter)||void 0===s||s),l.isValid&&(l.isValid=null===(o=l.containsNumericCharacter)||void 0===o||o),l.isValid&&(l.isValid=null===(a=l.containsNonAlphanumericCharacter)||void 0===a||a),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class xPe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uZ(this),this.idTokenSubscription=new uZ(this),this.beforeStateQueue=new CPe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Gc(t)),this._initializationPromise=this.queue((0,O.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield u_.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,O.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,O.A)(function*(){try{const r=yield QX(t,{idToken:e}),i=yield Wc._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,O.A)(function*(){var r;if(ad(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(l,l))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=s?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return We(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,O.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,O.A)(function*(){try{yield jE(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function aPe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,O.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,O.A)(function*(){if(ad(t.app))return Promise.reject(ts(t));const r=e?Aa(e):null;return r&&We(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,O.A)(function*(){if(!r._deleted)return e&&We(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,O.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,O.A)(function*(){return ad(e.app)?Promise.reject(ts(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return ad(this.app)?Promise.reject(ts(this)):this.queue((0,O.A)(function*(){yield t.assertedPersistence.setPersistence(Gc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,O.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,O.A)(function*(){const t=yield function TPe(n){return eL.apply(this,arguments)}(e),r=new SPe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oE("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,O.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function EPe(n,e){return ZF.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,O.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,O.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Gc(e)||t._popupRedirectResolver;We(r,t,"argument-error"),t.redirectPersistenceManager=yield u_.create(t,[Gc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,O.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,O.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,O.A)(function*(){if(e===t.currentUser)return t.queue((0,O.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}{const l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){var t=this;return(0,O.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cZ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,O.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,O.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function sPe(n,...e){MS.logLevel<=nr.WARN&&MS.warn(`Auth (${Kg}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function bi(n){return Aa(n)}class uZ{constructor(e){this.auth=e,this.observer=null,this.addObserver=function OSe(n,e){const t=new FSe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zE={loadJS:()=>(0,O.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dZ(n){return`__${n}${Math.floor(1e6*Math.random())}`}function pZ(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mZ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class WE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wl("not implemented")}_getIdTokenResponse(e){return Wl("not implemented")}_linkToIdToken(e,t){return Wl("not implemented")}_getReauthenticationResolver(e){return Wl("not implemented")}}function qc(n,e){return yL.apply(this,arguments)}function yL(){return(yL=(0,O.A)(function*(n,e){return function Hc(n,e,t,r){return BF.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Ar(n,e))})).apply(this,arguments)}class Kc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class c1e extends Kc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,O.A)(function*(){const s=yield Wc._fromIdTokenResponse(e,r,i),o=bZ(r);return new Ra({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,O.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=bZ(r);return new Ra({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function bZ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class BS extends od{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,BS.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new BS(e,t,r,i)}}function EZ(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?BS._fromErrorAndOperation(n,s,e,r):s})}function xL(){return(xL=(0,O.A)(function*(n,e,t=!1){const r=yield $c(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ra._forOperation(n,"link",r)})).apply(this,arguments)}function RL(){return(RL=(0,O.A)(function*(n,e,t=!1){const{auth:r}=n;if(ad(r.app))return Promise.reject(ts(r));const i="reauthenticate";try{const s=yield $c(n,EZ(r,i,e,n),t);We(s.idToken,r,"internal-error");const o=kS(s.idToken);We(o,r,"internal-error");const{sub:a}=o;return We(n.uid===a,r,"user-mismatch"),Ra._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&ko(r,"user-mismatch"),s}})).apply(this,arguments)}function ML(){return(ML=(0,O.A)(function*(n,e,t=!1){if(ad(n.app))return Promise.reject(ts(n));const r="signIn",i=yield EZ(n,r,e),s=yield Ra._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function YL(){return(YL=(0,O.A)(function*(n,e){return Sr(n,"POST","/v1/accounts:createAuthUri",Ar(n,e))})).apply(this,arguments)}function XL(){return XL=(0,O.A)(function*(n,e){const r={identifier:e,continueUri:OF()?LE():"http://localhost"},{signinMethods:i}=yield function g1e(n,e){return YL.apply(this,arguments)}(Aa(n),r);return i||[]}),XL.apply(this,arguments)}const zS="__sak";class xZ{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zS,"1"),this.storage.removeItem(zS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const M1e=(()=>{class n extends xZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lZ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function wPe(){return function ASe(){const n=fs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,O.A)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,O.A)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,O.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),DZ=(()=>{class n extends xZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let k1e=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,O.A)(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var h=(0,O.A)(function*(m){return m(i.origin,a)});return function(m){return h.apply(this,arguments)}}()),u=yield function P1e(n){return Promise.all(n.map(function(){var e=(0,O.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function c2(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class N1e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,O.A)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=c2("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(y.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Ri(){return window}function u2(){return typeof Ri().WorkerGlobalScope<"u"&&"function"==typeof Ri().importScripts}function d2(){return(d2=(0,O.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const RZ="firebaseLocalStorageDb",HS="firebaseLocalStorage",MZ="fbase_key";class YE{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $S(n,e){return n.transaction([HS],e?"readwrite":"readonly").objectStore(HS)}function h2(){const n=indexedDB.open(RZ,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(HS,{keyPath:MZ})}catch(i){t(i)}}),n.addEventListener("success",(0,O.A)(function*(){const r=n.result;r.objectStoreNames.contains(HS)?e(r):(r.close(),yield function U1e(){const n=indexedDB.deleteDatabase(RZ);return new YE(n).toPromise()}(),e(yield h2()))}))})}function PZ(n,e,t){return f2.apply(this,arguments)}function f2(){return(f2=(0,O.A)(function*(n,e,t){const r=$S(n,!0).put({[MZ]:e,value:t});return new YE(r).toPromise()})).apply(this,arguments)}function p2(){return(p2=(0,O.A)(function*(n,e){const t=$S(n,!1).get(e),r=yield new YE(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function kZ(n,e){const t=$S(n,!0).delete(e);return new YE(t).toPromise()}const $1e=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,O.A)(function*(){return t.db||(t.db=yield h2()),t.db})()}_withRetries(t){var r=this;return(0,O.A)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,O.A)(function*(){return u2()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,O.A)(function*(){t.receiver=k1e._getInstance(function V1e(){return u2()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,O.A)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,O.A)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,O.A)(function*(){var r,i;if(t.activeServiceWorker=yield function F1e(){return d2.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new N1e(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,O.A)(function*(){if(r.sender&&r.activeServiceWorker&&function L1e(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,O.A)(function*(){try{if(!indexedDB)return!1;const t=yield h2();return yield PZ(t,zS,"1"),yield kZ(t,zS),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,O.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,O.A)(function*(){return i._withPendingWrite((0,O.A)(function*(){return yield i._withRetries(s=>PZ(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,O.A)(function*(){const i=yield r._withRetries(s=>function j1e(n,e){return p2.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,O.A)(function*(){return r._withPendingWrite((0,O.A)(function*(){return yield r._withRetries(i=>kZ(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,O.A)(function*(){const r=yield t._withRetries(o=>{const a=$S(o,!1).getAll();return new YE(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;if(0!==r.length)for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,O.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();dZ("rcb"),new VE(3e4,6e4);class T2 extends WE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function J1e(n){return function CZ(n,e){return ML.apply(this,arguments)}(n.auth,new T2(n),n.bypassAuthState)}function eke(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),function wZ(n,e){return RL.apply(this,arguments)}(t,new T2(n),n.bypassAuthState)}function tke(n){return A2.apply(this,arguments)}function A2(){return(A2=(0,O.A)(function*(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),function SL(n,e){return xL.apply(this,arguments)}(t,new T2(n),n.bypassAuthState)})).apply(this,arguments)}class nke{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,O.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,O.A)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J1e;case"linkViaPopup":case"linkViaRedirect":return tke;case"reauthViaPopup":case"reauthViaRedirect":return eke;default:ko(this.auth,"internal-error")}}resolve(e){vd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new VE(2e3,1e4);const rke="pendingRedirect",ZE=new Map;class ike extends nke{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,O.A)(function*(){let r=ZE.get(t.auth._key());if(!r){try{const s=(yield function ske(n,e){return M2.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}ZE.set(t.auth._key(),r)}return t.bypassAuthState||ZE.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,O.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,O.A)(function*(){})()}cleanUp(){}}function M2(){return(M2=(0,O.A)(function*(n,e){const t=function FZ(n){return NS(rke,n.config.apiKey,n.name)}(e),r=function OZ(n){return Gc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function oke(n,e){ZE.set(n._key(),e)}function LZ(n,e){return V2.apply(this,arguments)}function V2(){return(V2=(0,O.A)(function*(n,e,t=!1){if(ad(n.app))return Promise.reject(ts(n));const r=bi(n),i=function Hf(n,e){return e?Gc(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),o=yield new ike(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class dke{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function hke(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UZ(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!UZ(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Da(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(BZ(e))}saveEventToCache(e){this.cachedEventUids.add(BZ(e)),this.lastProcessedEventTime=Date.now()}}function BZ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function UZ({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function U2(){return(U2=(0,O.A)(function*(n,e={}){return Sr(n,"GET","/v1/projects",e)})).apply(this,arguments)}const pke=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mke=/^https?/;function j2(){return j2=(0,O.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function fke(n){return U2.apply(this,arguments)}(n);for(const t of e)try{if(_ke(t))return}catch{}ko(n,"unauthorized-domain")}),j2.apply(this,arguments)}function _ke(n){const e=LE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!mke.test(t))return!1;if(pke.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const yke=new VE(3e4,6e4);function jZ(){const n=Ri().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function vke(n){return new Promise((e,t)=>{var r,i,s;function o(){jZ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jZ(),t(Da(n,"network-request-failed"))},timeout:yke.get()})}if(null!==(i=null===(r=Ri().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Ri().gapi)||void 0===s||!s.load){const a=dZ("iframefcb");return Ri()[a]=()=>{gapi.load?o():t(Da(n,"network-request-failed"))},function tL(n){return zE.loadJS(n)}(`${function PPe(){return zE.gapiScript}()}?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw WS=null,e})}let WS=null;const Eke=new VE(5e3,15e3),Ike="__/auth/iframe",wke="emulator/auth/iframe",Cke={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tke=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ake(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?FF(e,wke):`https://${n.config.authDomain}/${Ike}`,r={apiKey:e.apiKey,appName:n.name,v:Kg},i=Tke.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Wg(r).slice(1)}`}function z2(){return z2=(0,O.A)(function*(n){const e=yield function bke(n){return WS=WS||vke(n),WS}(n),t=Ri().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:Ake(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cke,dontclear:!0},r=>new Promise(function(){var i=(0,O.A)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Da(n,"network-request-failed"),l=Ri().setTimeout(()=>{o(a)},Eke.get());function c(){Ri().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),z2.apply(this,arguments)}const xke={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zZ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Oke="__/auth/handler",Fke="emulator/auth/handler",Lke=encodeURIComponent("fac");function HZ(n,e,t,r,i,s){return H2.apply(this,arguments)}function H2(){return(H2=(0,O.A)(function*(n,e,t,r,i,s){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Kg,eventId:i};if(e instanceof Kc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",gO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof c1e){const u=e.getScopes().filter(h=>""!==h);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield n._getAppCheckToken(),c=l?`#${Lke}=${encodeURIComponent(l)}`:"";return`${function Vke({config:n}){return n.emulator?FF(n,Fke):`https://${n.authDomain}/${Oke}`}(n)}?${Wg(a).slice(1)}${c}`})).apply(this,arguments)}const $2="webStorageSupport",Uke=class Bke{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DZ,this._completeRedirectFn=LZ,this._overrideRedirectResult=oke}_openPopup(e,t,r,i){var s=this;return(0,O.A)(function*(){var o;vd(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield HZ(e,t,r,LE(),i);return function kke(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xke),{width:r.toString(),height:i.toString(),top:s,left:o}),c=fs().toLowerCase();t&&(a=rZ(c)?"_blank":t),tZ(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(function IPe(n=fs()){var e;return JF(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function Nke(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new zZ(null);const h=window.open(e||"",a,u);We(h,n,"popup-blocked");try{h.focus()}catch{}return new zZ(h)}(e,a,c2())})()}_openRedirect(e,t,r,i){var s=this;return(0,O.A)(function*(){return yield s._originValidation(e),function O1e(n){Ri().location.href=n}(yield HZ(e,t,r,LE(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(vd(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,O.A)(function*(){const r=yield function Ske(n){return z2.apply(this,arguments)}(e),i=new dke(e);return r.register("authEvent",s=>(We(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($2,{type:$2},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[$2];void 0!==o&&t(!!o),ko(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function gke(n){return j2.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lZ()||nZ()||JF()}};var qZ="@firebase/auth";class jke{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,O.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wke=AQ("authIdTokenMaxAge")||300;let QZ=null;const Gke=n=>function(){var e=(0,O.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Wke)return;const s=r?.token;QZ!==s&&(QZ=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function qke(n=kQ()){const e=YA(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function jPe(n,e){const t=YA(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(GA(t.getOptions(),e??{}))return i;ko(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:Uke,persistence:[$1e,M1e,DZ]}),r=AQ("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Gke(s.toString());(function T1e(n,e,t){Aa(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function C1e(n,e,t,r){Aa(n).onIdTokenChanged(e,t,r)}(t,a=>o(a))}}const i=CQ("auth");return i&&function HPe(n,e,t){const r=bi(n);We(r._canInitEmulator,r,"emulator-config-failed"),We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=pZ(e),{host:o,port:a}=function $Pe(n){const e=pZ(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:mZ(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:mZ(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function WPe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function DPe(n){zE=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Da("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function Kke(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Hke(n){qg(new Df("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;We(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cZ(n)},c=new xPe(r,i,s,l);return function zPe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Gc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qg(new Df("auth-internal",e=>{const t=bi(e.getProvider("auth").getImmediate());return new jke(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ld(qZ,"1.8.1",function zke(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),ld(qZ,"1.8.1","esm2017")}("Browser"),G(5046);var Gl=G(9574);Gl.A.registerVersion("firebase","10.14.1","app-compat");const Xke=["ngOnDestroy"];class YZ{constructor(e){return e}}const JE=new Ee("angularfire2.app.options"),eI=new Ee("angularfire2.app.name");function qS(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Gl.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Gl.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;eNe("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new YZ(o)}const eNe=(n,...e)=>{},tNe={provide:YZ,useFactory:qS,deps:[JE,yt,[new ki,eI]]};let nNe=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:JE,useValue:t},{provide:eI,useValue:r}]}}constructor(t){Gl.A.registerVersion("angularfire",id.full,"core"),Gl.A.registerVersion("angularfire",id.full,"app-compat"),Gl.A.registerVersion("angular",n6.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Re(Ys))};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[tNe]})}return n})();function G2(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function rNe(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(XZ("error",`${e} was already initialized on the ${t} Firebase App with different settings.${iNe?" You may need to reload as Firebase is not HMR aware.":""}`),XZ("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const iNe=typeof module<"u"&&!!module.hot,XZ=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class sNe extends E{constructor(e=1/0,t=1/0,r=CN){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function q2(n={}){const{connector:e=()=>new E,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,h=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=l=void 0,u=h=!1},b=()=>{const T=o;y(),T?.unsubscribe()};return ye((T,M)=>{c++,!h&&!u&&m();const B=l=l??e();M.add(()=>{c--,0===c&&!h&&!u&&(a=K2(b,i))}),B.subscribe(M),!o&&c>0&&(o=new Wi({next:V=>B.next(V),error:V=>{h=!0,m(),a=K2(y,t,V),B.error(V)},complete:()=>{u=!0,m(),a=K2(y,r),B.complete()}}),ro(T).subscribe(o))})(s)}}function K2(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Wi({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function ZZ(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,q2({connector:()=>new sNe(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function JZ(n,e){return mt(e)?Qt(()=>n,e):Qt(()=>n)}const Q2=new Ee("angularfire2.auth.use-emulator"),Y2=new Ee("angularfire2.auth.settings"),X2=new Ee("angularfire2.auth.tenant-id"),Z2=new Ee("angularfire2.auth.langugage-code"),J2=new Ee("angularfire2.auth.use-device-language"),eV=new Ee("angularfire.auth.persistence"),tV=(n,e,t,r,i,s,o,a)=>G2(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let tI=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,u,h,m,y){const b=new E,T=Qe(void 0).pipe(Gu(o.outsideAngular),Qt(()=>s.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,5046)))),Be(()=>qS(t,s,r)),Be(M=>tV(M,s,a,c,u,h,l,m)),ZZ({bufferSize:1,refCount:!1}));if(wT(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{T.pipe(Zu()).subscribe();const M=T.pipe(Qt(Q=>Q.getRedirectResult().then(we=>we,()=>null)),zi,ZZ({bufferSize:1,refCount:!1})),B=T.pipe(Qt(Q=>new Ut(we=>({unsubscribe:s.runOutsideAngular(()=>Q.onAuthStateChanged(je=>we.next(je),je=>we.error(je),()=>we.complete()))})))),V=T.pipe(Qt(Q=>new Ut(we=>({unsubscribe:s.runOutsideAngular(()=>Q.onIdTokenChanged(je=>we.next(je),je=>we.error(je),()=>we.complete()))}))));this.authState=M.pipe(JZ(B),lf(o.outsideAngular),Gu(o.insideAngular)),this.user=M.pipe(JZ(V),lf(o.outsideAngular),Gu(o.insideAngular)),this.idToken=this.user.pipe(Qt(Q=>Q?Wn(Q.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(Qt(Q=>Q?Wn(Q.getIdTokenResult()):Qe(null))),this.credential=sl(M,b,this.authState.pipe(Yr(Q=>!Q))).pipe(Be(Q=>Q?.user?Q:null),lf(o.outsideAngular),Gu(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Xke.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const h=u?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,h),h})})})}))(this,T,s,{spy:{apply:(M,B,V)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&V.then(Q=>b.next(Q))}}})}static \u0275fac=function(r){return new(r||n)(Re(JE),Re(eI,8),Re(Ys),Re(yt),Re(jg),Re(Q2,8),Re(Y2,8),Re(X2,8),Re(Z2,8),Re(J2,8),Re(eV,8),Re(VA,8))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),aNe=(()=>{class n{constructor(){Gl.A.registerVersion("angularfire",id.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[tI]})}return n})(),KS=(()=>{class n{constructor(t,r){this.auth=t,this.afAuth=r}get user(){return this.afAuth.authState}login(t,r){return cSe(this.auth,t,r)}register(t,r,i){return oSe(this.auth,t,r).then(s=>{const o=s.user;return o?(dSe(o,{displayName:i}).then(()=>{console.log("\u4f7f\u7528\u8005\u540d\u7a31\u5df2\u66f4\u65b0:",i)}),hO(o).then(()=>{console.log("\u9a57\u8b49\u4fe1\u5df2\u767c\u9001\u81f3:",t)}),o):Promise.reject("\u4f7f\u7528\u8005\u8a3b\u518a\u5931\u6557")})}loginWithGoogle(){const t=new sd.X;return uSe(this.auth,t)}isLoggedIn(){return this.afAuth.authState.pipe(Be(t=>null!==t))}getUser(){return new Ut(t=>{lSe(this.auth,r=>{t.next(r)})})}logout(){this.afAuth.signOut()}getAuthState(){return this.afAuth.authState}getUserData(t){return FMe(function PX(n,e){return(n=Aa(n))._checkNotDeleted("ref"),void 0!==e?a_(n._root,e):n._root}(function JMe(n=kQ(),e){const t=YA(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(()=>{const e=CQ("database");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();r&&function ePe(n,e,t,r={}){(n=Aa(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ul("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ul('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new mE(mE.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:function ESe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[UA(JSON.stringify({alg:"none",type:"JWT"})),UA(JSON.stringify(o)),""].join(".")}(r.mockUserToken,n.app.options.projectId);s=new mE(o)}!function KMe(n,e,t,r){n.repoInfo_=new RO(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}(),`users/${t}`)).then(s=>s.val())}sendVerificationEmail(t){return hO(t)}resendVerificationEmail(t){const r=qke();return function _1e(n,e){return XL.apply(this,arguments)}(r,t).then(i=>{if(i.includes("password")){const s=r.currentUser;return s?hO(s):Promise.reject(new Error("\u8acb\u5148\u767b\u5165\u4ee5\u5bc4\u9001\u9a57\u8b49\u4fe1\u3002"))}return Promise.reject(new Error("\u6b64\u96fb\u5b50\u90f5\u4ef6\u672a\u8a3b\u518a\u3002"))})}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{console.log("\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001")}).catch(r=>{throw console.error("\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u767c\u9001\u5931\u6557",r),r})}static{this.\u0275fac=function(r){return new(r||n)(Re(BA),Re(tI))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lNe=(()=>{class n{constructor(){this.loadingSubject=new F(!1),this.messageSubject=new F(""),this.loading$=this.loadingSubject.asObservable(),this.message$=this.messageSubject.asObservable()}show(t){this.loadingSubject.next(!0),this.messageSubject.next(t)}hide(){this.loadingSubject.next(!1),this.messageSubject.next("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nV(){return ye((n,e)=>{let t,r=!1;n.subscribe(Fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var $f,nJ,eJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tJ={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(H,L,W){W||(W=0);var J=Array(16);if("string"==typeof L)for(var ne=0;16>ne;++ne)J[ne]=L.charCodeAt(W++)|L.charCodeAt(W++)<<8|L.charCodeAt(W++)<<16|L.charCodeAt(W++)<<24;else for(ne=0;16>ne;++ne)J[ne]=L[W++]|L[W++]<<8|L[W++]<<16|L[W++]<<24;var re=H.g[3],q=(L=H.g[0])+(re^(W=H.g[1])&((ne=H.g[2])^re))+J[0]+3614090360&4294967295;q=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=W+(q<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[1]+3905402710&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[2]+606105819&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[3]+3250441966&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[4]+4118548399&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[5]+1200080426&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[6]+2821735955&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[7]+4249261313&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[8]+1770035416&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[9]+2336552879&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[10]+4294925233&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[11]+2304563134&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[12]+1804603682&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[13]+4254626195&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[14]+2792965006&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[15]+1236535329&4294967295)<<22&4294967295|q>>>10))+((q=L+(ne^re&(W^ne))+J[1]+4129170786&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[6]+3225465664&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[11]+643717713&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[0]+3921069994&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[5]+3593408605&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[10]+38016083&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[15]+3634488961&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[4]+3889429448&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[9]+568446438&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[14]+3275163606&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[3]+4107603335&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[8]+1163531501&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[13]+2850285829&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[2]+4243563512&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[7]+1735328473&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[12]+2368359562&4294967295)<<20&4294967295|q>>>12))+((q=L+(W^ne^re)+J[5]+4294588738&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[8]+2272392833&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[11]+1839030562&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[14]+4259657740&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[1]+2763975236&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[4]+1272893353&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[7]+4139469664&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[10]+3200236656&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[13]+681279174&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[0]+3936430074&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[3]+3572445317&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[6]+76029189&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[9]+3654602809&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[12]+3873151461&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[15]+530742520&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[2]+3299628645&4294967295)<<23&4294967295|q>>>9))+((q=L+(ne^(W|~re))+J[0]+4096336452&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[7]+1126891415&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[14]+2878612391&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[5]+4237533241&4294967295)<<21&4294967295|q>>>11))+((q=L+(ne^(W|~re))+J[12]+1700485571&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[3]+2399980690&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[10]+4293915773&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[1]+2240044497&4294967295)<<21&4294967295|q>>>11))+((q=L+(ne^(W|~re))+J[8]+1873313359&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[15]+4264355552&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[6]+2734768916&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[13]+1309151649&4294967295)<<21&4294967295|q>>>11))+((re=(L=W+((q=L+(ne^(W|~re))+J[4]+4149444226&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[11]+3174756917&4294967295)<<10&4294967295|q>>>22))^((ne=re+((q=ne+(L^(re|~W))+J[2]+718787259&4294967295)<<15&4294967295|q>>>17))|~L))+J[9]+3951481745&4294967295,H.g[0]=H.g[0]+L&4294967295,H.g[1]=H.g[1]+(ne+(q<<21&4294967295|q>>>11))&4294967295,H.g[2]=H.g[2]+ne&4294967295,H.g[3]=H.g[3]+re&4294967295}function o(H,L){this.h=L;for(var W=[],J=!0,ne=H.length-1;0<=ne;ne--){var re=0|H[ne];J&&re==L||(W[ne]=re,J=!1)}this.g=W}(function e(H,L){function W(){}W.prototype=L.prototype,H.D=L.prototype,H.prototype=new W,H.prototype.constructor=H,H.C=function(J,ne,re){for(var q=Array(arguments.length-2),$r=2;$r<arguments.length;$r++)q[$r-2]=arguments[$r];return L.prototype[ne].apply(J,q)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(H,L){void 0===L&&(L=H.length);for(var W=L-this.blockSize,J=this.B,ne=this.h,re=0;re<L;){if(0==ne)for(;re<=W;)i(this,H,re),re+=this.blockSize;if("string"==typeof H){for(;re<L;)if(J[ne++]=H.charCodeAt(re++),ne==this.blockSize){i(this,J),ne=0;break}}else for(;re<L;)if(J[ne++]=H[re++],ne==this.blockSize){i(this,J),ne=0;break}}this.h=ne,this.o+=L},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var L=1;L<H.length-8;++L)H[L]=0;var W=8*this.o;for(L=H.length-8;L<H.length;++L)H[L]=255&W,W/=256;for(this.u(H),H=Array(16),L=W=0;4>L;++L)for(var J=0;32>J;J+=8)H[W++]=this.g[L]>>>J&255;return H};var a={};function l(H){return-128<=H&&128>H?function s(H,L){var W=a;return Object.prototype.hasOwnProperty.call(W,H)?W[H]:W[H]=L(H)}(H,function(L){return new o([0|L],0>L?-1:0)}):new o([0|H],0>H?-1:0)}function c(H){if(isNaN(H)||!isFinite(H))return h;if(0>H)return M(c(-H));for(var L=[],W=1,J=0;H>=W;J++)L[J]=H/W|0,W*=4294967296;return new o(L,0)}var h=l(0),m=l(1),y=l(16777216);function b(H){if(0!=H.h)return!1;for(var L=0;L<H.g.length;L++)if(0!=H.g[L])return!1;return!0}function T(H){return-1==H.h}function M(H){for(var L=H.g.length,W=[],J=0;J<L;J++)W[J]=~H.g[J];return new o(W,~H.h).add(m)}function B(H,L){return H.add(M(L))}function V(H,L){for(;(65535&H[L])!=H[L];)H[L+1]+=H[L]>>>16,H[L]&=65535,L++}function Q(H,L){this.g=H,this.h=L}function we(H,L){if(b(L))throw Error("division by zero");if(b(H))return new Q(h,h);if(T(H))return L=we(M(H),L),new Q(M(L.g),M(L.h));if(T(L))return L=we(H,M(L)),new Q(M(L.g),L.h);if(30<H.g.length){if(T(H)||T(L))throw Error("slowDivide_ only works with positive integers.");for(var W=m,J=L;0>=J.l(H);)W=je(W),J=je(J);var ne=He(W,1),re=He(J,1);for(J=He(J,2),W=He(W,2);!b(J);){var q=re.add(J);0>=q.l(H)&&(ne=ne.add(W),re=q),J=He(J,1),W=He(W,1)}return L=B(H,ne.j(L)),new Q(ne,L)}for(ne=h;0<=H.l(L);){for(W=Math.max(1,Math.floor(H.m()/L.m())),J=48>=(J=Math.ceil(Math.log(W)/Math.LN2))?1:Math.pow(2,J-48),q=(re=c(W)).j(L);T(q)||0<q.l(H);)q=(re=c(W-=J)).j(L);b(re)&&(re=m),ne=ne.add(re),H=B(H,q)}return new Q(ne,H)}function je(H){for(var L=H.g.length+1,W=[],J=0;J<L;J++)W[J]=H.i(J)<<1|H.i(J-1)>>>31;return new o(W,H.h)}function He(H,L){var W=L>>5;L%=32;for(var J=H.g.length-W,ne=[],re=0;re<J;re++)ne[re]=0<L?H.i(re+W)>>>L|H.i(re+W+1)<<32-L:H.i(re+W);return new o(ne,H.h)}(n=o.prototype).m=function(){if(T(this))return-M(this).m();for(var H=0,L=1,W=0;W<this.g.length;W++){var J=this.i(W);H+=(0<=J?J:4294967296+J)*L,L*=4294967296}return H},n.toString=function(H){if(2>(H=H||10)||36<H)throw Error("radix out of range: "+H);if(b(this))return"0";if(T(this))return"-"+M(this).toString(H);for(var L=c(Math.pow(H,6)),W=this,J="";;){var ne=we(W,L).g,re=((0<(W=B(W,ne.j(L))).g.length?W.g[0]:W.h)>>>0).toString(H);if(b(W=ne))return re+J;for(;6>re.length;)re="0"+re;J=re+J}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h},n.l=function(H){return T(H=B(this,H))?-1:b(H)?0:1},n.abs=function(){return T(this)?M(this):this},n.add=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0,ne=0;ne<=L;ne++){var re=J+(65535&this.i(ne))+(65535&H.i(ne)),q=(re>>>16)+(this.i(ne)>>>16)+(H.i(ne)>>>16);J=q>>>16,W[ne]=(q&=65535)<<16|(re&=65535)}return new o(W,-2147483648&W[W.length-1]?-1:0)},n.j=function(H){if(b(this)||b(H))return h;if(T(this))return T(H)?M(this).j(M(H)):M(M(this).j(H));if(T(H))return M(this.j(M(H)));if(0>this.l(y)&&0>H.l(y))return c(this.m()*H.m());for(var L=this.g.length+H.g.length,W=[],J=0;J<2*L;J++)W[J]=0;for(J=0;J<this.g.length;J++)for(var ne=0;ne<H.g.length;ne++){var re=this.i(J)>>>16,q=65535&this.i(J),$r=H.i(ne)>>>16,ua=65535&H.i(ne);W[2*J+2*ne]+=q*ua,V(W,2*J+2*ne),W[2*J+2*ne+1]+=re*ua,V(W,2*J+2*ne+1),W[2*J+2*ne+1]+=q*$r,V(W,2*J+2*ne+1),W[2*J+2*ne+2]+=re*$r,V(W,2*J+2*ne+2)}for(J=0;J<L;J++)W[J]=W[2*J+1]<<16|W[2*J];for(J=L;J<2*L;J++)W[J]=0;return new o(W,0)},n.A=function(H){return we(this,H).h},n.and=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)&H.i(J);return new o(W,this.h&H.h)},n.or=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)|H.i(J);return new o(W,this.h|H.h)},n.xor=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)^H.i(J);return new o(W,this.h^H.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nJ=tJ.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(H,L){if(0==H.length)throw Error("number format error: empty string");if(2>(L=L||10)||36<L)throw Error("radix out of range: "+L);if("-"==H.charAt(0))return M(u(H.substring(1),L));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var W=c(Math.pow(L,8)),J=h,ne=0;ne<H.length;ne+=8){var re=Math.min(8,H.length-ne),q=parseInt(H.substring(ne,ne+re),L);8>re?(re=c(Math.pow(L,re)),J=J.j(re).add(c(q))):J=(J=J.j(W)).add(c(q))}return J},$f=tJ.Integer=o}).apply(typeof eJ<"u"?eJ:typeof self<"u"?self:typeof window<"u"?window:{});var rJ,nI,iJ,YS,rV,sJ,oJ,aJ,QS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,v,I){return p==Array.prototype||p==Object.prototype||(p[v]=I.value),p},r=function t(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof QS&&QS];for(var v=0;v<p.length;++v){var I=p[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(p,v){if(v)e:{var I=r;p=p.split(".");for(var P=0;P<p.length-1;P++){var oe=p[P];if(!(oe in I))break e;I=I[oe]}(v=v(P=I[p=p[p.length-1]]))!=P&&null!=v&&e(I,p,{configurable:!0,writable:!0,value:v})}}("Array.prototype.values",function(p){return p||function(){return function s(p,v){p instanceof String&&(p+="");var I=0,P=!1,oe={next:function(){if(!P&&I<p.length){var Ce=I++;return{value:v(Ce,p[Ce]),done:!1}}return P=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}(this,function(v,I){return I})}});var o=o||{},a=this||self;function l(p){var v=typeof p;return"array"==(v="object"!=v?v:p?Array.isArray(p)?"array":v:"null")||"object"==v&&"number"==typeof p.length}function c(p){var v=typeof p;return"object"==v&&null!=p||"function"==v}function u(p,v,I){return p.call.apply(p.bind,arguments)}function h(p,v,I){if(!p)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,P),p.apply(v,oe)}}return function(){return p.apply(v,arguments)}}function m(p,v,I){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:h).apply(null,arguments)}function y(p,v){var I=Array.prototype.slice.call(arguments,1);return function(){var P=I.slice();return P.push.apply(P,arguments),p.apply(this,P)}}function b(p,v){function I(){}I.prototype=v.prototype,p.aa=v.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function(P,oe,Ce){for(var Ye=Array(arguments.length-2),hr=2;hr<arguments.length;hr++)Ye[hr-2]=arguments[hr];return v.prototype[oe].apply(P,Ye)}}function T(p){const v=p.length;if(0<v){const I=Array(v);for(let P=0;P<v;P++)I[P]=p[P];return I}return[]}function M(p,v){for(let I=1;I<arguments.length;I++){const P=arguments[I];if(l(P)){const oe=p.length||0,Ce=P.length||0;p.length=oe+Ce;for(let Ye=0;Ye<Ce;Ye++)p[oe+Ye]=P[Ye]}else p.push(P)}}function V(p){return/^[\s\xa0]*$/.test(p)}function Q(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function we(p){return we[" "](p),p}we[" "]=function(){};var je=!(-1==Q().indexOf("Gecko")||-1!=Q().toLowerCase().indexOf("webkit")&&-1==Q().indexOf("Edge")||-1!=Q().indexOf("Trident")||-1!=Q().indexOf("MSIE")||-1!=Q().indexOf("Edge"));function He(p,v,I){for(const P in p)v.call(I,p[P],P,p)}function L(p){const v={};for(const I in p)v[I]=p[I];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(p,v){let I,P;for(let oe=1;oe<arguments.length;oe++){for(I in P=arguments[oe],P)p[I]=P[I];for(let Ce=0;Ce<W.length;Ce++)I=W[Ce],Object.prototype.hasOwnProperty.call(P,I)&&(p[I]=P[I])}}function ne(p){var v=1;p=p.split(":");const I=[];for(;0<v&&p.length;)I.push(p.shift()),v--;return p.length&&I.push(p.join(":")),I}function re(p){a.setTimeout(()=>{throw p},0)}function q(){var p=mn;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}var ua=new class B{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}(()=>new at,p=>p.reset());class at{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,It=!1,mn=new class $r{constructor(){this.h=this.g=null}add(v,I){const P=ua.get();P.set(v,I),this.h?this.h.next=P:this.g=P,this.h=P}},wi=()=>{const p=a.Promise.resolve(void 0);pt=()=>{p.then(Fa)}};var Fa=()=>{for(var p;p=q();){try{p.h.call(p.g)}catch(I){re(I)}var v=ua;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}It=!1};function ci(){this.s=this.s,this.C=this.C}function Mr(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}ci.prototype.s=!1,ci.prototype.ma=function(){this.s||(this.s=!0,this.N())},ci.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Mr.prototype.h=function(){this.defaultPrevented=!0};var Pr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};a.addEventListener("test",I,v),a.removeEventListener("test",I,v)}catch{}return p}();function eh(p,v){if(Mr.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,P=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(je){e:{try{we(v.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(v=null)}}else"mouseover"==I?v=p.fromElement:"mouseout"==I&&(v=p.toElement);this.relatedTarget=v,P?(this.clientX=void 0!==P.clientX?P.clientX:P.pageX,this.clientY=void 0!==P.clientY?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:Ez[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&eh.aa.h.call(this)}}b(eh,Mr);var Ez={2:"touch",3:"pen",4:"mouse"};eh.prototype.h=function(){eh.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ui="closure_listenable_"+(1e6*Math.random()|0),uu=0;function Vo(p,v,I,P,oe){this.listener=p,this.proxy=null,this.src=v,this.type=I,this.capture=!!P,this.ha=oe,this.key=++uu,this.da=this.fa=!1}function du(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function th(p){this.src=p,this.g={},this.h=0}function Iz(p,v){var I=v.type;if(I in p.g){var Ce,P=p.g[I],oe=Array.prototype.indexOf.call(P,v,void 0);(Ce=0<=oe)&&Array.prototype.splice.call(P,oe,1),Ce&&(du(v),0==p.g[I].length&&(delete p.g[I],p.h--))}}function wz(p,v,I,P){for(var oe=0;oe<p.length;++oe){var Ce=p[oe];if(!Ce.da&&Ce.listener==v&&Ce.capture==!!I&&Ce.ha==P)return oe}return-1}th.prototype.add=function(p,v,I,P,oe){var Ce=p.toString();(p=this.g[Ce])||(p=this.g[Ce]=[],this.h++);var Ye=wz(p,v,P,oe);return-1<Ye?(v=p[Ye],I||(v.fa=!1)):((v=new Vo(v,this.src,Ce,!!P,oe)).fa=I,p.push(v)),v};var Cz="closure_lm_"+(1e6*Math.random()|0),Tz={};function dae(p,v,I,P,oe){if(P&&P.once)return fae(p,v,I,P,oe);if(Array.isArray(v)){for(var Ce=0;Ce<v.length;Ce++)dae(p,v[Ce],I,P,oe);return null}return I=Dz(I),p&&p[ui]?p.K(v,I,c(P)?!!P.capture:!!P,oe):hae(p,v,I,!1,P,oe)}function hae(p,v,I,P,oe,Ce){if(!v)throw Error("Invalid event type");var Ye=c(oe)?!!oe.capture:!!oe,hr=Sz(p);if(hr||(p[Cz]=hr=new th(p)),(I=hr.add(v,I,P,Ye,Ce)).proxy)return I;if(P=function _Ge(){const v=yGe;return function p(I){return v.call(p.src,p.listener,I)}}(),I.proxy=P,P.src=p,P.listener=I,p.addEventListener)Pr||(oe=Ye),void 0===oe&&(oe=!1),p.addEventListener(v.toString(),P,oe);else if(p.attachEvent)p.attachEvent(mae(v.toString()),P);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(P)}return I}function fae(p,v,I,P,oe){if(Array.isArray(v)){for(var Ce=0;Ce<v.length;Ce++)fae(p,v[Ce],I,P,oe);return null}return I=Dz(I),p&&p[ui]?p.L(v,I,c(P)?!!P.capture:!!P,oe):hae(p,v,I,!0,P,oe)}function pae(p,v,I,P,oe){if(Array.isArray(v))for(var Ce=0;Ce<v.length;Ce++)pae(p,v[Ce],I,P,oe);else P=c(P)?!!P.capture:!!P,I=Dz(I),p&&p[ui]?(p=p.i,(v=String(v).toString())in p.g&&-1<(I=wz(Ce=p.g[v],I,P,oe))&&(du(Ce[I]),Array.prototype.splice.call(Ce,I,1),0==Ce.length&&(delete p.g[v],p.h--))):p&&(p=Sz(p))&&(v=p.g[v.toString()],p=-1,v&&(p=wz(v,I,P,oe)),(I=-1<p?v[p]:null)&&Az(I))}function Az(p){if("number"!=typeof p&&p&&!p.da){var v=p.src;if(v&&v[ui])Iz(v.i,p);else{var I=p.type,P=p.proxy;v.removeEventListener?v.removeEventListener(I,P,p.capture):v.detachEvent?v.detachEvent(mae(I),P):v.addListener&&v.removeListener&&v.removeListener(P),(I=Sz(v))?(Iz(I,p),0==I.h&&(I.src=null,v[Cz]=null)):du(p)}}}function mae(p){return p in Tz?Tz[p]:Tz[p]="on"+p}function yGe(p,v){if(p.da)p=!0;else{v=new eh(v,this);var I=p.listener,P=p.ha||p.src;p.fa&&Az(p),p=I.call(P,v)}return p}function Sz(p){return(p=p[Cz])instanceof th?p:null}var xz="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dz(p){return"function"==typeof p?p:(p[xz]||(p[xz]=function(v){return p.handleEvent(v)}),p[xz])}function zs(){ci.call(this),this.i=new th(this),this.M=this,this.F=null}function uo(p,v){var I,P=p.F;if(P)for(I=[];P;P=P.F)I.push(P);if(p=p.M,P=v.type||v,"string"==typeof v)v=new Mr(v,p);else if(v instanceof Mr)v.target=v.target||p;else{var oe=v;J(v=new Mr(P,p),oe)}if(oe=!0,I)for(var Ce=I.length-1;0<=Ce;Ce--){var Ye=v.g=I[Ce];oe=nR(Ye,P,!0,v)&&oe}if(oe=nR(Ye=v.g=p,P,!0,v)&&oe,oe=nR(Ye,P,!1,v)&&oe,I)for(Ce=0;Ce<I.length;Ce++)oe=nR(Ye=v.g=I[Ce],P,!1,v)&&oe}function nR(p,v,I,P){if(!(v=p.i.g[String(v)]))return!0;v=v.concat();for(var oe=!0,Ce=0;Ce<v.length;++Ce){var Ye=v[Ce];if(Ye&&!Ye.da&&Ye.capture==I){var hr=Ye.listener,ys=Ye.ha||Ye.src;Ye.fa&&Iz(p.i,Ye),oe=!1!==hr.call(ys,P)&&oe}}return oe&&!P.defaultPrevented}function gae(p,v,I){if("function"==typeof p)I&&(p=m(p,I));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=m(p.handleEvent,p)}return 2147483647<Number(v)?-1:a.setTimeout(p,v||0)}function _ae(p){p.g=gae(()=>{p.g=null,p.i&&(p.i=!1,_ae(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}b(zs,ci),zs.prototype[ui]=!0,zs.prototype.removeEventListener=function(p,v,I,P){pae(this,p,v,I,P)},zs.prototype.N=function(){if(zs.aa.N.call(this),this.i){var v,p=this.i;for(v in p.g){for(var I=p.g[v],P=0;P<I.length;P++)du(I[P]);delete p.g[v],p.h--}}this.F=null},zs.prototype.K=function(p,v,I,P){return this.i.add(String(p),v,!1,I,P)},zs.prototype.L=function(p,v,I,P){return this.i.add(String(p),v,!0,I,P)};class vGe extends ci{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:_ae(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rw(p){ci.call(this),this.h=p,this.g={}}b(Rw,ci);var yae=[];function vae(p){He(p.g,function(v,I){this.g.hasOwnProperty(I)&&Az(v)},p),p.g={}}Rw.prototype.N=function(){Rw.aa.N.call(this),vae(this)},Rw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rz=a.JSON.stringify,bGe=a.JSON.parse,EGe=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function Mz(){}function Eae(){}Mz.prototype.h=null;var Mw={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pz(){Mr.call(this,"d")}function kz(){Mr.call(this,"c")}b(Pz,Mr),b(kz,Mr);var Rp={},Iae=null;function rR(){return Iae=Iae||new zs}function wae(p){Mr.call(this,Rp.La,p)}function Pw(p){const v=rR();uo(v,new wae(v))}function Cae(p,v){Mr.call(this,Rp.STAT_EVENT,p),this.stat=v}function ho(p){const v=rR();uo(v,new Cae(v,p))}function Tae(p,v){Mr.call(this,Rp.Ma,p),this.size=v}function kw(p,v){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},v)}function Nw(){this.g=!0}function dy(p,v,I,P){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+function TGe(p,v){if(!p.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I)for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var P=I[p];if(!(2>P.length)){var oe=P[1];if(Array.isArray(oe)&&!(1>oe.length)){var Ce=oe[0];if("noop"!=Ce&&"stop"!=Ce&&"close"!=Ce)for(var Ye=1;Ye<oe.length;Ye++)oe[Ye]=""}}}return Rz(I)}catch{return v}}(p,I)+(P?" "+P:"")})}Rp.La="serverreachability",b(wae,Mr),Rp.STAT_EVENT="statevent",b(Cae,Mr),Rp.Ma="timingevent",b(Tae,Mr),Nw.prototype.xa=function(){this.g=!1},Nw.prototype.info=function(){};var Nz,iR={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Aae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function sR(){}function nh(p,v,I,P){this.j=p,this.i=v,this.l=I,this.R=P||1,this.U=new Rw(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sae}function Sae(){this.i=null,this.g="",this.h=!1}b(sR,Mz),sR.prototype.g=function(){return new XMLHttpRequest},sR.prototype.i=function(){return{}},Nz=new sR;var xae={},Oz={};function Fz(p,v,I){p.L=1,p.v=cR(hu(v)),p.m=I,p.P=!0,Dae(p,null)}function Dae(p,v){p.F=Date.now(),oR(p),p.A=hu(p.v);var I=p.A,P=p.R;Array.isArray(P)||(P=[String(P)]),Hae(I.i,"t",P),p.C=0,I=p.j.J,p.h=new Sae,p.g=ale(p.j,I?v:null,!p.m),0<p.O&&(p.M=new vGe(m(p.Y,p,p.g),p.O)),v=p.U,I=p.g,P=p.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(yae[0]=oe.toString()),oe=yae);for(var Ce=0;Ce<oe.length;Ce++){var Ye=dae(I,oe[Ce],P||v.handleEvent,!1,v.h||v);if(!Ye)break;v.g[Ye.key]=Ye}v=p.H?L(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),Pw(),function IGe(p,v,I,P,oe,Ce){p.info(function(){if(p.g)if(Ce)for(var Ye="",hr=Ce.split("&"),ys=0;ys<hr.length;ys++){var On=hr[ys].split("=");if(1<On.length){var Hs=On[0];On=On[1];var $s=Hs.split("_");Ye=2<=$s.length&&"type"==$s[1]?Ye+(Hs+"=")+On+"&":Ye+(Hs+"=redacted&")}}else Ye=null;else Ye=Ce;return"XMLHTTP REQ ("+P+") [attempt "+oe+"]: "+v+"\n"+I+"\n"+Ye})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Rae(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function AGe(p,v){var I=p.C,P=v.indexOf("\n",I);return-1==P?Oz:(I=Number(v.substring(I,P)),isNaN(I)?xae:(P+=1)+I>v.length?Oz:(v=v.slice(P,P+I),p.C=P+I,v))}function oR(p){p.S=Date.now()+p.I,Mae(p,p.I)}function Mae(p,v){if(null!=p.B)throw Error("WatchDog timer not null");p.B=kw(m(p.ba,p),v)}function Lz(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function Ow(p){0==p.j.G||p.J||rle(p.j,p)}function Mp(p){Lz(p);var v=p.M;v&&"function"==typeof v.ma&&v.ma(),p.M=null,vae(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function Vz(p,v){try{var I=p.j;if(0!=I.G&&(I.g==p||Bz(I.h,p)))if(!p.K&&Bz(I.h,p)&&3==I.G){try{var P=I.Da.g.parse(v)}catch{P=null}if(Array.isArray(P)&&3==P.length){var oe=P;if(0==oe[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<p.F))break e;pR(I),hR(I)}Hz(I),ho(18)}}else I.za=oe[1],0<I.za-I.T&&37500>oe[2]&&I.F&&0==I.v&&!I.C&&(I.C=kw(m(I.Za,I),6e3));if(1>=Nae(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else kp(I,11)}else if((p.K||I.g==p)&&pR(I),!V(v))for(oe=I.Da.g.parse(v),v=0;v<oe.length;v++){let On=oe[v];if(I.T=On[0],On=On[1],2==I.G)if("c"==On[0]){I.K=On[1],I.ia=On[2];const Hs=On[3];null!=Hs&&(I.la=Hs,I.j.info("VER="+I.la));const $s=On[4];null!=$s&&(I.Aa=$s,I.j.info("SVER="+I.Aa));const py=On[5];null!=py&&"number"==typeof py&&0<py&&(I.L=P=1.5*py,I.j.info("backChannelRequestTimeoutMs_="+P)),P=I;const _l=p.g;if(_l){const gR=_l.g?_l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gR){var Ce=P.h;Ce.g||-1==gR.indexOf("spdy")&&-1==gR.indexOf("quic")&&-1==gR.indexOf("h2")||(Ce.j=Ce.l,Ce.g=new Set,Ce.h&&(Uz(Ce,Ce.h),Ce.h=null))}if(P.D){const Wz=_l.g?_l.g.getResponseHeader("X-HTTP-Session-Id"):null;Wz&&(P.ya=Wz,kr(P.I,P.D,Wz))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Ye=p;if((P=I).qa=ole(P,P.J?P.ia:null,P.W),Ye.K){Oae(P.h,Ye);var hr=Ye,ys=P.L;ys&&(hr.I=ys),hr.B&&(Lz(hr),oR(hr)),P.g=Ye}else tle(P);0<I.i.length&&fR(I)}else"stop"!=On[0]&&"close"!=On[0]||kp(I,7);else 3==I.G&&("stop"==On[0]||"close"==On[0]?"stop"==On[0]?kp(I,7):zz(I):"noop"!=On[0]&&I.l&&I.l.ta(On),I.v=0)}Pw()}catch{}}nh.prototype.ca=function(p){p=p.target;const v=this.M;v&&3==fu(p)?v.j():this.Y(p)},nh.prototype.Y=function(p){try{if(p==this.g)e:{const $s=fu(this.g);var v=this.g.Ba();if(this.g.Z(),!(3>$s)&&(3!=$s||this.g&&(this.h.h||this.g.oa()||Yae(this.g)))){this.J||4!=$s||7==v||Pw(),Lz(this);var I=this.g.Z();this.X=I;t:if(Rae(this)){var P=Yae(this.g);p="";var oe=P.length,Ce=4==fu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Mp(this),Ow(this);var Ye="";break t}this.h.i=new a.TextDecoder}for(v=0;v<oe;v++)this.h.h=!0,p+=this.h.i.decode(P[v],{stream:!(Ce&&v==oe-1)});P.length=0,this.h.g+=p,this.C=0,Ye=this.h.g}else Ye=this.g.oa();if(this.o=200==I,function wGe(p,v,I,P,oe,Ce,Ye){p.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+oe+"]: "+v+"\n"+I+"\n"+Ce+" "+Ye})}(this.i,this.u,this.A,this.l,this.R,$s,I),this.o){if(this.T&&!this.K){t:{if(this.g){var hr,ys=this.g;if((hr=ys.g?ys.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(hr)){var On=hr;break t}}On=null}if(!(I=On)){this.o=!1,this.s=3,ho(12),Mp(this),Ow(this);break e}dy(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vz(this,I)}if(this.P){let _l;for(I=!0;!this.J&&this.C<Ye.length;){if(_l=AGe(this,Ye),_l==Oz){4==$s&&(this.s=4,ho(14),I=!1),dy(this.i,this.l,null,"[Incomplete Response]");break}if(_l==xae){this.s=4,ho(15),dy(this.i,this.l,Ye,"[Invalid Chunk]"),I=!1;break}dy(this.i,this.l,_l,null),Vz(this,_l)}if(Rae(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=$s||0!=Ye.length||this.h.h||(this.s=1,ho(16),I=!1),this.o=this.o&&I,I){if(0<Ye.length&&!this.W){this.W=!0;var Hs=this.j;Hs.g==this&&Hs.ba&&!Hs.M&&(Hs.j.info("Great, no buffering proxy detected. Bytes received: "+Ye.length),$z(Hs),Hs.M=!0,ho(11))}}else dy(this.i,this.l,Ye,"[Invalid Chunked Response]"),Mp(this),Ow(this)}else dy(this.i,this.l,Ye,null),Vz(this,Ye);4==$s&&Mp(this),this.o&&!this.J&&(4==$s?rle(this.j,this):(this.o=!1,oR(this)))}else(function HGe(p){const v={};p=(p.g&&2<=fu(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let P=0;P<p.length;P++){if(V(p[P]))continue;var I=ne(p[P]);const oe=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const Ce=v[oe]||[];v[oe]=Ce,Ce.push(I)}!function H(p,v){for(const I in p)v.call(void 0,p[I],I,p)}(v,function(P){return P.join(", ")})})(this.g),400==I&&0<Ye.indexOf("Unknown SID")?(this.s=3,ho(12)):(this.s=0,ho(13)),Mp(this),Ow(this)}}}catch{}},nh.prototype.cancel=function(){this.J=!0,Mp(this)},nh.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function CGe(p,v){p.info(function(){return"TIMEOUT: "+v})}(this.i,this.A),2!=this.L&&(Pw(),ho(17)),Mp(this),this.s=2,Ow(this)):Mae(this,this.S-p)};var SGe=class{constructor(p,v){this.g=p,this.map=v}};function Pae(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kae(p){return!!p.h||!!p.g&&p.g.size>=p.j}function Nae(p){return p.h?1:p.g?p.g.size:0}function Bz(p,v){return p.h?p.h==v:!!p.g&&p.g.has(v)}function Uz(p,v){p.g?p.g.add(v):p.h=v}function Oae(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}function Fae(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let v=p.i;for(const I of p.g.values())v=v.concat(I.D);return v}return T(p.i)}function Lae(p,v){if(p.forEach&&"function"==typeof p.forEach)p.forEach(v,void 0);else if(l(p)||"string"==typeof p)Array.prototype.forEach.call(p,v,void 0);else for(var I=function DGe(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||"string"==typeof p){var v=[];p=p.length;for(var I=0;I<p;I++)v.push(I);return v}v=[],I=0;for(const P in p)v[I++]=P;return v}}}(p),P=function xGe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(l(p)){for(var v=[],I=p.length,P=0;P<I;P++)v.push(p[P]);return v}for(P in v=[],I=0,p)v[I++]=p[P];return v}(p),oe=P.length,Ce=0;Ce<oe;Ce++)v.call(void 0,P[Ce],I&&I[Ce],p)}Pae.prototype.cancel=function(){if(this.i=Fae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Vae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pp(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Pp){this.h=p.h,aR(this,p.j),this.o=p.o,this.g=p.g,lR(this,p.s),this.l=p.l;var v=p.i,I=new Vw;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),Bae(this,I),this.m=p.m}else p&&(v=String(p).match(Vae))?(this.h=!1,aR(this,v[1]||"",!0),this.o=Fw(v[2]||""),this.g=Fw(v[3]||"",!0),lR(this,v[4]),this.l=Fw(v[5]||"",!0),Bae(this,v[6]||"",!0),this.m=Fw(v[7]||"")):(this.h=!1,this.i=new Vw(null,this.h))}function hu(p){return new Pp(p)}function aR(p,v,I){p.j=I?Fw(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function lR(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function Bae(p,v,I){v instanceof Vw?(p.i=v,function FGe(p,v){v&&!p.j&&(rh(p),p.i=null,p.g.forEach(function(I,P){var oe=P.toLowerCase();P!=oe&&(jae(this,P),Hae(this,oe,I))},p)),p.j=v}(p.i,p.h)):(I||(v=Lw(v,NGe)),p.i=new Vw(v,p.h))}function kr(p,v,I){p.i.set(v,I)}function cR(p){return kr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Fw(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Lw(p,v,I){return"string"==typeof p?(p=encodeURI(p).replace(v,MGe),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function MGe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Pp.prototype.toString=function(){var p=[],v=this.j;v&&p.push(Lw(v,Uae,!0),":");var I=this.g;return(I||"file"==v)&&(p.push("//"),(v=this.o)&&p.push(Lw(v,Uae,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&p.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&p.push("/"),p.push(Lw(I,"/"==I.charAt(0)?kGe:PGe,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",Lw(I,OGe)),p.join("")};var Uae=/[#\/\?@]/g,PGe=/[#\?:]/g,kGe=/[#\?]/g,NGe=/[#\?@]/g,OGe=/#/g;function Vw(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function rh(p){p.g||(p.g=new Map,p.h=0,p.i&&function RGe(p,v){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var P=p[I].indexOf("="),oe=null;if(0<=P){var Ce=p[I].substring(0,P);oe=p[I].substring(P+1)}else Ce=p[I];v(Ce,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}(p.i,function(v,I){p.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}function jae(p,v){rh(p),v=hy(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function zae(p,v){return rh(p),v=hy(p,v),p.g.has(v)}function Hae(p,v,I){jae(p,v),0<I.length&&(p.i=null,p.g.set(hy(p,v),T(I)),p.h+=I.length)}function hy(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function ih(p,v,I,P,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),P(I)}catch{}}function BGe(){this.g=new EGe}function UGe(p,v,I){const P=I||"";try{Lae(p,function(oe,Ce){let Ye=oe;c(oe)&&(Ye=Rz(oe)),v.push(P+Ce+"="+encodeURIComponent(Ye))})}catch(oe){throw v.push(P+"type="+encodeURIComponent("_badmap")),oe}}function Bw(p){this.l=p.Ub||null,this.j=p.eb||!1}function uR(p,v){zs.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function $ae(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Uw(p){p.readyState=4,p.l=null,p.j=null,p.v=null,jw(p)}function jw(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function Wae(p){let v="";return He(p,function(I,P){v+=P,v+=":",v+=I,v+="\r\n"}),v}function jz(p,v,I){e:{for(P in I){var P=!1;break e}P=!0}P||(I=Wae(I),"string"==typeof p?null!=I&&encodeURIComponent(String(I)):kr(p,v,I))}function di(p){zs.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Vw.prototype).add=function(p,v){rh(this),this.i=null,p=hy(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(v),this.h+=1,this},n.forEach=function(p,v){rh(this),this.g.forEach(function(I,P){I.forEach(function(oe){p.call(v,oe,P,this)},this)},this)},n.na=function(){rh(this);const p=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let P=0;P<v.length;P++){const oe=p[P];for(let Ce=0;Ce<oe.length;Ce++)I.push(v[P])}return I},n.V=function(p){rh(this);let v=[];if("string"==typeof p)zae(this,p)&&(v=v.concat(this.g.get(hy(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)v=v.concat(p[I])}return v},n.set=function(p,v){return rh(this),this.i=null,zae(this,p=hy(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},n.get=function(p,v){return p&&0<(p=this.V(p)).length?String(p[0]):v},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var P=v[I];const Ce=encodeURIComponent(String(P)),Ye=this.V(P);for(P=0;P<Ye.length;P++){var oe=Ce;""!==Ye[P]&&(oe+="="+encodeURIComponent(String(Ye[P]))),p.push(oe)}}return this.i=p.join("&")},b(Bw,Mz),Bw.prototype.g=function(){return new uR(this.l,this.j)},Bw.prototype.i=function(p){return function(){return p}}({}),b(uR,zs),(n=uR.prototype).open=function(p,v){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,jw(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uw(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,jw(this)),this.g&&(this.readyState=3,jw(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$ae(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?Uw(this):jw(this),3==this.readyState&&$ae(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Uw(this))},n.Qa=function(p){this.g&&(this.response=p,Uw(this))},n.ga=function(){this.g&&Uw(this)},n.setRequestHeader=function(p,v){this.u.append(p,v)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var I=v.next();!I.done;)p.push((I=I.value)[0]+": "+I[1]),I=v.next();return p.join("\r\n")},Object.defineProperty(uR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),b(di,zs);var jGe=/^https?$/i,zGe=["POST","PUT"];function Gae(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,qae(p),dR(p)}function qae(p){p.A||(p.A=!0,uo(p,"complete"),uo(p,"error"))}function Kae(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=fu(p)||2!=p.Z()))if(p.u&&4==fu(p))gae(p.Ea,0,p);else if(uo(p,"readystatechange"),4==fu(p)){p.h=!1;try{const Ye=p.Z();e:switch(Ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var I;if(!(I=v)){var P;if(P=0===Ye){var oe=String(p.D).match(Vae)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),P=!jGe.test(oe?oe.toLowerCase():"")}I=P}if(I)uo(p,"complete"),uo(p,"success");else{p.m=6;try{var Ce=2<fu(p)?p.g.statusText:""}catch{Ce=""}p.l=Ce+" ["+p.Z()+"]",qae(p)}}finally{dR(p)}}}function dR(p,v){if(p.g){Qae(p);const I=p.g,P=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||uo(p,"ready");try{I.onreadystatechange=P}catch{}}}function Qae(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function fu(p){return p.g?p.g.readyState:0}function Yae(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function zw(p,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||v}function Xae(p){this.Aa=0,this.i=[],this.j=new Nw,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zw("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zw("baseRetryDelayMs",5e3,p),this.cb=zw("retryDelaySeedMs",1e4,p),this.Wa=zw("forwardChannelMaxRetries",2,p),this.wa=zw("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Pae(p&&p.concurrentRequestLimit),this.Da=new BGe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function zz(p){if(Zae(p),3==p.G){var v=p.U++,I=hu(p.I);if(kr(I,"SID",p.K),kr(I,"RID",v),kr(I,"TYPE","terminate"),Hw(p,I),(v=new nh(p,p.j,v)).L=2,v.v=cR(hu(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=v.v,I=!0),I||(v.g=ale(v.j,null),v.g.ea(v.v)),v.F=Date.now(),oR(v)}sle(p)}function hR(p){p.g&&($z(p),p.g.cancel(),p.g=null)}function Zae(p){hR(p),p.u&&(a.clearTimeout(p.u),p.u=null),pR(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function fR(p){if(!kae(p.h)&&!p.s){p.s=!0;var v=p.Ga;pt||wi(),It||(pt(),It=!0),mn.add(v,p),p.B=0}}function Jae(p,v){var I;I=v?v.l:p.U++;const P=hu(p.I);kr(P,"SID",p.K),kr(P,"RID",I),kr(P,"AID",p.T),Hw(p,P),p.m&&p.o&&jz(P,p.m,p.o),I=new nh(p,p.j,I,p.B+1),null===p.m&&(I.H=p.o),v&&(p.i=v.D.concat(p.i)),v=ele(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Uz(p.h,I),Fz(I,P,v)}function Hw(p,v){p.H&&He(p.H,function(I,P){kr(v,P,I)}),p.l&&Lae({},function(I,P){kr(v,P,I)})}function ele(p,v,I){I=Math.min(p.i.length,I);var P=p.l?m(p.l.Na,p.l,p):null;e:{var oe=p.i;let Ce=-1;for(;;){const Ye=["count="+I];-1==Ce?0<I?(Ce=oe[0].g,Ye.push("ofs="+Ce)):Ce=0:Ye.push("ofs="+Ce);let hr=!0;for(let ys=0;ys<I;ys++){let On=oe[ys].g;const Hs=oe[ys].map;if(On-=Ce,0>On)Ce=Math.max(0,oe[ys].g-100),hr=!1;else try{UGe(Hs,Ye,"req"+On+"_")}catch{P&&P(Hs)}}if(hr){P=Ye.join("&");break e}}}return p=p.i.splice(0,I),v.D=p,P}function tle(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;pt||wi(),It||(pt(),It=!0),mn.add(v,p),p.v=0}}function Hz(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=kw(m(p.Fa,p),ile(p,p.v)),p.v++,0))}function $z(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function nle(p){p.g=new nh(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var v=hu(p.qa);kr(v,"RID","rpc"),kr(v,"SID",p.K),kr(v,"AID",p.T),kr(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&kr(v,"TO",p.ja),kr(v,"TYPE","xmlhttp"),Hw(p,v),p.m&&p.o&&jz(v,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=cR(hu(v)),I.m=null,I.P=!0,Dae(I,p)}function pR(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function rle(p,v){var I=null;if(p.g==v){pR(p),$z(p),p.g=null;var P=2}else{if(!Bz(p.h,v))return;I=v.D,Oae(p.h,v),P=1}if(0!=p.G)if(v.o)if(1==P){I=v.m?v.m.length:0,v=Date.now()-v.F;var oe=p.B;uo(P=rR(),new Tae(P,I)),fR(p)}else tle(p);else if(3==(oe=v.s)||0==oe&&0<v.X||!(1==P&&function $Ge(p,v){return!(Nae(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=v.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=kw(m(p.Ga,p,v),ile(p,p.B)),p.B++,0)))}(p,v)||2==P&&Hz(p)))switch(I&&0<I.length&&(v=p.h,v.i=v.i.concat(I)),oe){case 1:kp(p,5);break;case 4:kp(p,10);break;case 3:kp(p,6);break;default:kp(p,2)}}function ile(p,v){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*v}function kp(p,v){if(p.j.info("Error code "+v),2==v){var I=m(p.fb,p),P=p.Xa;const oe=!P;P=new Pp(P||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||aR(P,"https"),cR(P),oe?function LGe(p,v){const I=new Nw;if(a.Image){const P=new Image;P.onload=y(ih,I,"TestLoadImage: loaded",!0,v,P),P.onerror=y(ih,I,"TestLoadImage: error",!1,v,P),P.onabort=y(ih,I,"TestLoadImage: abort",!1,v,P),P.ontimeout=y(ih,I,"TestLoadImage: timeout",!1,v,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=p}else v(!1)}(P.toString(),I):function VGe(p,v){new Nw;const P=new AbortController,oe=setTimeout(()=>{P.abort(),ih(0,0,!1,v)},1e4);fetch(p,{signal:P.signal}).then(Ce=>{clearTimeout(oe),ih(0,0,!!Ce.ok,v)}).catch(()=>{clearTimeout(oe),ih(0,0,!1,v)})}(P.toString(),I)}else ho(2);p.G=0,p.l&&p.l.sa(v),sle(p),Zae(p)}function sle(p){if(p.G=0,p.ka=[],p.l){const v=Fae(p.h);(0!=v.length||0!=p.i.length)&&(M(p.ka,v),M(p.ka,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.ra()}}function ole(p,v,I){var P=I instanceof Pp?hu(I):new Pp(I);if(""!=P.g)v&&(P.g=v+"."+P.g),lR(P,P.s);else{var oe=a.location;P=oe.protocol,v=v?v+"."+oe.hostname:oe.hostname,oe=+oe.port;var Ce=new Pp(null);P&&aR(Ce,P),v&&(Ce.g=v),oe&&lR(Ce,oe),I&&(Ce.l=I),P=Ce}return v=p.ya,(I=p.D)&&v&&kr(P,I,v),kr(P,"VER",p.la),Hw(p,P),P}function ale(p,v,I){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(v=new di(p.Ca&&!p.pa?new Bw({eb:I}):p.pa)).Ha(p.J),v}function lle(){}function mR(){}function da(p,v){zs.call(this),this.g=new Xae(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!V(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,null!==(p=this.h)&&v in p&&v in(p=this.h)&&delete p[v]),this.j=new fy(this)}function cle(p){Pz.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const I in v){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,v=null!==v&&p in v?v[p]:void 0),this.data=v}else this.data=p}function ule(){kz.call(this),this.status=1}function fy(p){this.g=p}(n=di.prototype).Ha=function(p){this.J=p},n.ea=function(p,v,I,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nz.g(),this.v=function bae(p){return p.h||(p.h=p.i())}(this.o?this.o:Nz),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(Ce){return void Gae(this,Ce)}if(p=I||"",I=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var oe in P)I.set(oe,P[oe]);else{if("function"!=typeof P.keys||"function"!=typeof P.get)throw Error("Unknown input type for opt_headers: "+String(P));for(const Ce of P.keys())I.set(Ce,P.get(Ce))}P=Array.from(I.keys()).find(Ce=>"content-type"==Ce.toLowerCase()),oe=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zGe,v,void 0))||P||oe||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ce,Ye]of I)this.g.setRequestHeader(Ce,Ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qae(this),this.u=!0,this.g.send(p),this.u=!1}catch(Ce){Gae(this,Ce)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,uo(this,"complete"),uo(this,"abort"),dR(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dR(this,!0)),di.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Kae(this):this.bb())},n.bb=function(){Kae(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<fu(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&0==v.indexOf(p)&&(v=v.substring(p.length)),bGe(v)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Xae.prototype).la=8,n.G=1,n.connect=function(p,v,I,P){ho(0),this.W=p,this.H=v||{},I&&void 0!==P&&(this.H.OSID=I,this.H.OAID=P),this.F=this.X,this.I=ole(this,null,this.W),fR(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const oe=new nh(this,this.j,p);let Ce=this.o;if(this.S&&(Ce?(Ce=L(Ce),J(Ce,this.S)):Ce=this.S),null!==this.m||this.O||(oe.H=Ce,Ce=null),this.P)e:{for(var v=0,I=0;I<this.i.length;I++){var P=this.i[I];if(void 0===(P="__data__"in P.map&&"string"==typeof(P=P.map.__data__)?P.length:void 0))break;if(4096<(v+=P)){v=I;break e}if(4096===v||I===this.i.length-1){v=I+1;break e}}v=1e3}else v=1e3;v=ele(this,oe,v),kr(I=hu(this.I),"RID",p),kr(I,"CVER",22),this.D&&kr(I,"X-HTTP-Session-Id",this.D),Hw(this,I),Ce&&(this.O?v="headers="+encodeURIComponent(String(Wae(Ce)))+"&"+v:this.m&&jz(I,this.m,Ce)),Uz(this.h,oe),this.Ua&&kr(I,"TYPE","init"),this.P?(kr(I,"$req",v),kr(I,"SID","null"),oe.T=!0,Fz(oe,I,null)):Fz(oe,I,v),this.G=2}}else 3==this.G&&(p?Jae(this,p):0==this.i.length||kae(this.h)||Jae(this))},n.Fa=function(){if(this.u=null,nle(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=kw(m(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ho(10),hR(this),nle(this))},n.Za=function(){null!=this.C&&(this.C=null,hR(this),Hz(this),ho(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),ho(2)):(this.j.info("Failed to ping google.com"),ho(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=lle.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},mR.prototype.g=function(p,v){return new da(p,v)},b(da,zs),da.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},da.prototype.close=function(){zz(this.g)},da.prototype.o=function(p){var v=this.g;if("string"==typeof p){var I={};I.__data__=p,p=I}else this.u&&((I={}).__data__=Rz(p),p=I);v.i.push(new SGe(v.Ya++,p)),3==v.G&&fR(v)},da.prototype.N=function(){this.g.l=null,delete this.j,zz(this.g),delete this.g,da.aa.N.call(this)},b(cle,Pz),b(ule,kz),b(fy,lle),fy.prototype.ua=function(){uo(this.g,"a")},fy.prototype.ta=function(p){uo(this.g,new cle(p))},fy.prototype.sa=function(p){uo(this.g,new ule)},fy.prototype.ra=function(){uo(this.g,"b")},mR.prototype.createWebChannel=mR.prototype.g,da.prototype.send=da.prototype.o,da.prototype.open=da.prototype.m,da.prototype.close=da.prototype.close,aJ=Qc.createWebChannelTransport=function(){return new mR},oJ=Qc.getStatEventTarget=function(){return rR()},sJ=Qc.Event=Rp,rV=Qc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},iR.NO_ERROR=0,iR.TIMEOUT=8,iR.HTTP_ERROR=6,YS=Qc.ErrorCode=iR,Aae.COMPLETE="complete",iJ=Qc.EventType=Aae,Eae.EventType=Mw,Mw.OPEN="a",Mw.CLOSE="b",Mw.ERROR="c",Mw.MESSAGE="d",zs.prototype.listen=zs.prototype.K,nI=Qc.WebChannel=Eae,Qc.FetchXmlHttpFactory=Bw,di.prototype.listenOnce=di.prototype.L,di.prototype.getLastError=di.prototype.Ka,di.prototype.getLastErrorCode=di.prototype.Ba,di.prototype.getStatus=di.prototype.Z,di.prototype.getResponseJson=di.prototype.Oa,di.prototype.getResponseText=di.prototype.oa,di.prototype.send=di.prototype.ea,di.prototype.setWithCredentials=di.prototype.Ha,rJ=Qc.XhrIo=di}).apply(typeof QS<"u"?QS:typeof self<"u"?self:typeof window<"u"?window:{});const lJ="@firebase/firestore";class ns{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");let h_="10.14.0";const Id=new Mo.Vy("@firebase/firestore");function f_(){return Id.logLevel}function Le(n,...e){if(Id.logLevel<=Mo.$b.DEBUG){const t=e.map(iV);Id.debug(`Firestore (${h_}): ${n}`,...t)}}function Ei(n,...e){if(Id.logLevel<=Mo.$b.ERROR){const t=e.map(iV);Id.error(`Firestore (${h_}): ${n}`,...t)}}function na(n,...e){if(Id.logLevel<=Mo.$b.WARN){const t=e.map(iV);Id.warn(`Firestore (${h_}): ${n}`,...t)}}function iV(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${h_}) INTERNAL ASSERTION FAILED: `+n;throw Ei(e),new Error(e)}function ct(n,e){n||st()}function Ge(n,e){return n}const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends N.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cJ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hNe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ns.UNAUTHENTICATED))}shutdown(){}}class fNe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pNe{constructor(e){this.t=e,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;ct(void 0===this.o);let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,O.A)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rs)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new cJ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new ns(e)}}class mNe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gNe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new mNe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _Ne{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ct(void 0===this.o);const r=s=>{null!=s.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.R=t.token,new uJ(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function yNe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class dJ{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=yNe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function p_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hJ(n){return n+"\0"}class Br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Br.fromMillis(Date.now())}static fromDate(e){return Br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Br(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ft(e)}static min(){return new ft(new Br(0,0))}static max(){return new ft(new Br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rI{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===rI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends rI{construct(e,t,r){return new yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const vNe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends rI{construct(e,t,r){return new xr(e,t,r)}static isValidIdentifier(e){return vNe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Ne(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ne(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ne(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(t)}static emptyPath(){return new xr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(yn.fromString(e))}static fromName(e){return new Xe(yn.fromString(e).popFirst(5))}static empty(){return new Xe(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new yn(e.slice()))}}class m_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function sV(n){return n.fields.find(e=>2===e.kind)}function Wf(n){return n.fields.filter(e=>2!==e.kind)}m_.UNKNOWN_ID=-1;class Gf{constructor(e,t){this.fieldPath=e,this.kind=t}}class g_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new g_(0,ra.min())}}function fJ(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(1e9===r?new Br(t+1,0):new Br(t,r));return new ra(i,Xe.empty(),e)}function pJ(n){return new ra(n.readTime,n.key,-1)}class ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ra(ft.min(),Xe.empty(),-1)}static max(){return new ra(ft.max(),Xe.empty(),-1)}}function oV(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const mJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wd(n){return aV.apply(this,arguments)}function aV(){return(aV=(0,O.A)(function*(n){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==mJ)throw n;Le("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new le((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class XS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new iI(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=lV(r.target.error);this.V.reject(new iI(e,i))}}static open(e,t,r,i){try{return new XS(t,e.transaction(i,r))}catch(s){throw new iI(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wNe(t)}}class ql{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ql.S((0,N.ZQ)())&&Ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),qf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,N.zW)())return!1;if(ql.v())return!0;const e=(0,N.ZQ)(),t=ql.S(e),r=0<t&&t<10,i=_J(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,O.A)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new iI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Ne(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ne(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new iI(e,a))},s.onupgradeneeded=o=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,O.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=XS.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),le.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(Le("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function _J(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class INe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return qf(this.B.delete())}}class iI extends Ne{constructor(e,t){super(Ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cd(n){return"IndexedDbTransactionError"===n.name}class wNe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qf(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),qf(this.store.add(e))}get(e){return qf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),qf(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),qf(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new le((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=s=>{const o=lV(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new INe(a),c=t(a.primaryKey,a.value,l);if(c instanceof le){const u=c.catch(h=>(l.done(),le.reject(h)));r.push(u)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qf(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=lV(r.target.error);t(i)}})}let yJ=!1;function lV(n){const e=ql.S((0,N.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yJ||(yJ=!0,setTimeout(()=>{throw r},0)),r}}return n}class CNe{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Le("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,O.A)(function*(){t.task=null;try{Le("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Cd(r)?Le("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield wd(r)}yield t.X(6e4)}))}}class TNe{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,O.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return le.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Le("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Le("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=pJ(s);oV(o,r)>0&&(r=o)}),new ra(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ia=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function sI(n){return null==n}function oI(n){return 0===n&&1/n==-1/0}function vJ(n){return"number"==typeof n&&Number.isInteger(n)&&!oI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ls(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bJ(e)),e=ANe(n.get(t),e);return bJ(e)}function ANe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function bJ(n){return n+"\x01\x01"}function Kl(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&st(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:st()}s=o+2}return new yn(r)}const EJ=["userId","batchId"];function ZS(n,e){return[n,Ls(e)]}function IJ(n,e,t){return[n,Ls(e),t]}const SNe={},xNe=["prefixPath","collectionGroup","readTime","documentId"],DNe=["prefixPath","collectionGroup","documentId"],RNe=["collectionGroup","readTime","prefixPath","documentId"],MNe=["canonicalId","targetId"],PNe=["targetId","path"],kNe=["path","targetId"],NNe=["collectionId","parent"],ONe=["indexId","uid"],FNe=["uid","sequenceNumber"],LNe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VNe=["indexId","uid","orderedDocumentKey"],BNe=["userId","collectionPath","documentId"],UNe=["userId","collectionPath","largestBatchId"],jNe=["userId","collectionGroup","largestBatchId"],wJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zNe=[...wJ,"documentOverlays"],CJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],TJ=CJ,cV=[...TJ,"indexConfiguration","indexState","indexEntries"],HNe=cV,$Ne=[...cV,"globals"];class uV extends gJ{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function $i(n,e){const t=Ge(n);return ql.F(t._e,e)}function AJ(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Td(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xJ(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vr{constructor(e,t){this.comparator=e,this.root=t||ps.EMPTY}insert(e,t){return new vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new JS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new JS(this.root,e,this.comparator,!1)}getReverseIterator(){return new JS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new JS(this.root,e,this.comparator,!0)}}class JS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ps.RED,this.left=i??ps.EMPTY,this.right=s??ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ps(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ps.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1,ps.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ps(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rr{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DJ(this.data.getIterator())}getIteratorFrom(e){return new DJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rr(this.comparator);return t.data=e,t}}class DJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function __(n){return n.hasNext()?n.getNext():void 0}class No{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new No([])}unionWith(e){let t=new rr(xr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new No(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return p_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class RJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RJ("Invalid base64 string: "+s):s}}(e);return new li(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const GNe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yc(n){if(ct(!!n),"string"==typeof n){let e=0;const t=GNe.exec(n);if(ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ur(n.seconds),nanos:Ur(n.nanos)}}function Ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xc(n){return"string"==typeof n?li.fromBase64String(n):li.fromUint8Array(n)}function ex(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tx(n){const e=n.mapValue.fields.__previous_value__;return ex(e)?tx(e):e}function aI(n){const e=Yc(n.mapValue.fields.__local_write_time__.timestampValue);return new Br(e.seconds,e.nanos)}class qNe{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ad{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ad("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ad&&e.projectId===this.projectId&&e.database===this.database}}const Sd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nx={nullValue:"NULL_VALUE"};function xd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ex(n)?4:OJ(n)?9007199254740991:sx(n)?10:11:st()}function Ql(n,e){if(n===e)return!0;const t=xd(n);if(t!==xd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return aI(n).isEqual(aI(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yc(i.timestampValue),a=Yc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Xc(n.bytesValue).isEqual(Xc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ur(i.geoPointValue.latitude)===Ur(s.geoPointValue.latitude)&&Ur(i.geoPointValue.longitude)===Ur(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ur(i.integerValue)===Ur(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ur(i.doubleValue),a=Ur(s.doubleValue);return o===a?oI(o)===oI(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return p_(n.arrayValue.values||[],e.arrayValue.values||[],Ql);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(AJ(o)!==AJ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Ql(o[l],a[l])))return!1;return!0}(n,e);default:return st()}var s}function lI(n,e){return void 0!==(n.values||[]).find(t=>Ql(t,e))}function Dd(n,e){if(n===e)return 0;const t=xd(n),r=xd(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ur(s.integerValue||s.doubleValue),l=Ur(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return MJ(n.timestampValue,e.timestampValue);case 4:return MJ(aI(n),aI(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Xc(s),l=Xc(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ft(a[c],l[c]);if(0!==u)return u}return Ft(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ft(Ur(s.latitude),Ur(o.latitude));return 0!==a?a:Ft(Ur(s.longitude),Ur(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return PJ(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const y=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(l=(o.fields||{}).value)||void 0===l?void 0:l.arrayValue,T=Ft((null===(c=y?.values)||void 0===c?void 0:c.length)||0,(null===(u=b?.values)||void 0===u?void 0:u.length)||0);return 0!==T?T:PJ(y,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Sd.mapValue&&o===Sd.mapValue)return 0;if(s===Sd.mapValue)return 1;if(o===Sd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const m=Ft(l[h],u[h]);if(0!==m)return m;const y=Dd(a[l[h]],c[u[h]]);if(0!==y)return y}return Ft(l.length,u.length)}(n.mapValue,e.mapValue);default:throw st()}}function MJ(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=Yc(n),r=Yc(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function PJ(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Dd(t[i],r[i]);if(s)return s}return Ft(t.length,r.length)}function y_(n){return dV(n)}function dV(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xc(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=dV(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${dV(t.fields[o])}`;return i+"}"}(n.mapValue):st()}function Kf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hV(n){return!!n&&"integerValue"in n}function cI(n){return!!n&&"arrayValue"in n}function kJ(n){return!!n&&"nullValue"in n}function NJ(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ix(n){return!!n&&"mapValue"in n}function sx(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function uI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Td(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OJ(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const FJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function KNe(n){return"nullValue"in n?nx:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Kf(Ad.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?sx(n)?FJ:{mapValue:{}}:st()}function QNe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Kf(Ad.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?FJ:"mapValue"in n?sx(n)?{mapValue:{}}:Sd:st()}function LJ(n,e){const t=Dd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VJ(n,e){const t=Dd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ix(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uI(t)}setAll(e){let t=xr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=uI(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());ix(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ql(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ix(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Td(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ms(uI(this.value))}}function BJ(n){const e=[];return Td(n.fields,(t,r)=>{const i=new xr([t]);if(ix(r)){const s=BJ(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new No(e)}class Dr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dr(e,0,ft.min(),ft.min(),ft.min(),ms.empty(),0)}static newFoundDocument(e,t,r,i){return new Dr(e,1,t,ft.min(),r,i,0)}static newNoDocument(e,t){return new Dr(e,2,t,ft.min(),ft.min(),ms.empty(),0)}static newUnknownDocument(e,t){return new Dr(e,3,t,ft.min(),ft.min(),ms.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rd{constructor(e,t){this.position=e,this.inclusive=t}}function UJ(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Xe.comparator(Xe.fromName(o.referenceValue),t.key):Dd(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function jJ(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ql(n.position[t],e.position[t]))return!1;return!0}class dI{constructor(e,t="asc"){this.field=e,this.dir=t}}function YNe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class zJ{}class vn extends zJ{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new XNe(e,t,r):"array-contains"===t?new eOe(e,r):"in"===t?new KJ(e,r):"not-in"===t?new tOe(e,r):"array-contains-any"===t?new nOe(e,r):new vn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ZNe(e,r):new JNe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dd(t,this.value)):null!==t&&xd(this.value)===xd(t)&&this.matchesComparison(Dd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends zJ{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Yn(e,t)}matches(e){return v_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function v_(n){return"and"===n.op}function fV(n){return"or"===n.op}function pV(n){return HJ(n)&&v_(n)}function HJ(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function mV(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+y_(n.value);if(pV(n))return n.filters.map(e=>mV(e)).join(",");{const e=n.filters.map(t=>mV(t)).join(",");return`${n.op}(${e})`}}function $J(n,e){return n instanceof vn?(r=n,(i=e)instanceof vn&&r.op===i.op&&r.field.isEqual(i.field)&&Ql(r.value,i.value)):n instanceof Yn?function(r,i){return i instanceof Yn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&$J(o,i.filters[a]),!0)}(n,e):void st();var r,i}function WJ(n,e){const t=n.filters.concat(e);return Yn.create(t,n.op)}function GJ(n){return n instanceof vn?`${(t=n).field.canonicalString()} ${t.op} ${y_(t.value)}`:n instanceof Yn?function(t){return t.op.toString()+" {"+t.getFilters().map(GJ).join(" ,")+"}"}(n):"Filter";var t}class XNe extends vn{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class ZNe extends vn{constructor(e,t){super(e,"in",t),this.keys=qJ(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JNe extends vn{constructor(e,t){super(e,"not-in",t),this.keys=qJ(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qJ(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class eOe extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cI(t)&&lI(t.arrayValue,this.value)}}class KJ extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lI(this.value.arrayValue,t)}}class tOe extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(lI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lI(this.value.arrayValue,t)}}class nOe extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lI(this.value.arrayValue,r))}}class rOe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function gV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new rOe(n,e,t,r,i,s,o)}function Qf(n){const e=Ge(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mV(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),sI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>y_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>y_(r)).join(",")),e.ue=t}return e.ue}function hI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YNe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$J(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jJ(n.startAt,e.startAt)&&jJ(n.endAt,e.endAt)}function ox(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ax(n,e){return n.filters.filter(t=>t instanceof vn&&t.field.isEqual(e))}function QJ(n,e,t){let r=nx,i=!0;for(const s of ax(n,e)){let o=nx,a=!0;switch(s.op){case"<":case"<=":o=KNe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=nx}LJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];LJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function YJ(n,e,t){let r=Sd,i=!0;for(const s of ax(n,e)){let o=Sd,a=!0;switch(s.op){case">=":case">":o=QNe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Sd}VJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];VJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Zc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function XJ(n,e,t,r,i,s,o,a){return new Zc(n,e,t,r,i,s,o,a)}function b_(n){return new Zc(n)}function ZJ(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function _V(n){return null!==n.collectionGroup}function E_(n){const e=Ge(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rr(xr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new dI(s,r))}),t.has(xr.keyField().canonicalString())||e.ce.push(new dI(xr.keyField(),r))}return e.ce}function Vs(n){const e=Ge(n);return e.le||(e.le=function eee(n,e){if("F"===n.limitType)return gV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new dI(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Rd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rd(n.startAt.position,n.startAt.inclusive):null;return gV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,E_(n))),e.le}function yV(n,e){const t=n.filters.concat([e]);return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lx(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fI(n,e){return hI(Vs(n),Vs(e))&&n.limitType===e.limitType}function tee(n){return`${Qf(Vs(n))}|lt:${n.limitType}`}function I_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>GJ(i)).join(", ")}]`),sI(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>y_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>y_(i)).join(",")),`Target(${r})`}(Vs(n))}; limitType=${n.limitType})`}function pI(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Xe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of E_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=UJ(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,E_(r),i)||r.endAt&&!function(o,a,l){const c=UJ(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,E_(r),i)));var r,i}function nee(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ree(n){return(e,t)=>{let r=!1;for(const i of E_(n)){const s=iOe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function iOe(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Dd(l,c):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class Jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Td(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xJ(this.inner)}size(){return this.innerSize}}const sOe=new vr(Xe.comparator);function Oo(){return sOe}const iee=new vr(Xe.comparator);function mI(...n){let e=iee;for(const t of n)e=e.insert(t.key,t);return e}function see(n){let e=iee;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yl(){return gI()}function oee(){return gI()}function gI(){return new Jc(n=>n.toString(),(n,e)=>n.isEqual(e))}const oOe=new vr(Xe.comparator),aOe=new rr(Xe.comparator);function Yt(...n){let e=aOe;for(const t of n)e=e.add(t);return e}const lOe=new rr(Ft);function vV(){return lOe}function bV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oI(e)?"-0":e}}function aee(n){return{integerValue:""+n}}function lee(n,e){return vJ(e)?aee(e):bV(n,e)}class cx{constructor(){this._=void 0}}function cOe(n,e,t){return n instanceof w_?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ex(s)&&(s=tx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Yf?uee(n,e):n instanceof Xf?dee(n,e):function(i,s){const o=cee(i,s),a=hee(o)+hee(i.Pe);return hV(o)&&hV(i.Pe)?aee(a):bV(i.serializer,a)}(n,e)}function uOe(n,e,t){return n instanceof Yf?uee(n,e):n instanceof Xf?dee(n,e):t}function cee(n,e){return n instanceof C_?hV(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class w_ extends cx{}class Yf extends cx{constructor(e){super(),this.elements=e}}function uee(n,e){const t=fee(e);for(const r of n.elements)t.some(i=>Ql(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xf extends cx{constructor(e){super(),this.elements=e}}function dee(n,e){let t=fee(e);for(const r of n.elements)t=t.filter(i=>!Ql(i,r));return{arrayValue:{values:t}}}class C_ extends cx{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function hee(n){return Ur(n.integerValue||n.doubleValue)}function fee(n){return cI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _I{constructor(e,t){this.field=e,this.transform=t}}class hOe{constructor(e,t){this.version=e,this.transformResults=t}}class jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ux(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class dx{}function pee(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new A_(n.key,jr.none()):new T_(n.key,n.data,jr.none());{const t=n.data,r=ms.empty();let i=new rr(xr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new eu(n.key,r,new No(i.toArray()),jr.none())}}function fOe(n,e,t){n instanceof T_?function(i,s,o){const a=i.value.clone(),l=_ee(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof eu?function(i,s,o){if(!ux(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_ee(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(gee(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yI(n,e,t,r){return n instanceof T_?function(s,o,a,l){if(!ux(s.precondition,o))return a;const c=s.value.clone(),u=yee(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof eu?function(s,o,a,l){if(!ux(s.precondition,o))return a;const c=yee(s.fieldTransforms,l,o),u=o.data;return u.setAll(gee(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):(a=t,ux(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function pOe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=cee(r.transform,i||null);null!=s&&(null===t&&(t=ms.empty()),t.set(r.field,s))}return t||null}function mee(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&p_(r,i,(s,o)=>function dOe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Yf&&i instanceof Yf||r instanceof Xf&&i instanceof Xf?p_(r.elements,i.elements,Ql):r instanceof C_&&i instanceof C_?Ql(r.Pe,i.Pe):r instanceof w_&&i instanceof w_);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class T_ extends dx{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eu extends dx{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gee(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _ee(n,e,t){const r=new Map;ct(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uOe(o,a,t[i]))}return r}function yee(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,cOe(s,o,e))}return r}class A_ extends dx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EV extends dx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class IV{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fOe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oee();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=pee(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&p_(this.mutations,e.mutations,(t,r)=>mee(t,r))&&p_(this.baseMutations,e.baseMutations,(t,r)=>mee(t,r))}}class wV{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length);let i=function(){return oOe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new wV(e,t,r,i)}}class CV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mOe{constructor(e,t){this.count=e,this.unchangedNames=t}}var Mi,An;function bee(n){switch(n){default:return st();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function Eee(n){if(void 0===n)return Ei("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case Mi.OK:return Ie.OK;case Mi.CANCELLED:return Ie.CANCELLED;case Mi.UNKNOWN:return Ie.UNKNOWN;case Mi.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Mi.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Mi.INTERNAL:return Ie.INTERNAL;case Mi.UNAVAILABLE:return Ie.UNAVAILABLE;case Mi.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Mi.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Mi.NOT_FOUND:return Ie.NOT_FOUND;case Mi.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Mi.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Mi.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Mi.ABORTED:return Ie.ABORTED;case Mi.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Mi.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Mi.DATA_LOSS:return Ie.DATA_LOSS;default:return st()}}(An=Mi||(Mi={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";function Iee(){return new TextEncoder}const gOe=new $f([4294967295,4294967295],0);function wee(n){const e=Iee().encode(n),t=new nJ;return t.update(e),new Uint8Array(t.digest())}function Cee(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $f([t,r],0),new $f([i,s],0)]}class TV{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vI(`Invalid padding: ${t}`);if(r<0)throw new vI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new vI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new vI(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=$f.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply($f.fromNumber(r)));return 1===i.compare(gOe)&&(i=new $f([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=wee(e),[r,i]=Cee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new TV(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=wee(e),[r,i]=Cee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class vI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bI{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,EI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bI(ft.min(),i,new vr(Ft),Oo(),Yt())}}class EI{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new EI(r,t,Yt(),Yt(),Yt())}}class fx{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Tee{constructor(e,t){this.targetId=e,this.me=t}}class Aee{constructor(e,t,r=li.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class See{constructor(){this.fe=0,this.ge=Dee(),this.pe=li.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Yt(),t=Yt(),r=Yt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new EI(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Dee()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _Oe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Oo(),this.qe=xee(),this.Qe=new vr(Ft)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(ox(s))if(0===r){const o=new Xe(s.path);this.Ue(t,o,Dr.newNoDocument(o,ft.min()))}else ct(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Xc(r).toUint8Array()}catch(l){if(l instanceof RJ)return na("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new TV(o,i,s)}catch(l){return na(l instanceof vI?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&ox(a.target)){const l=new Xe(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,Dr.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Yt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new bI(e,t,this.Qe,this.ke,r);return this.ke=Oo(),this.qe=xee(),this.Qe=new vr(Ft),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new See,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new rr(Ft),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new See),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xee(){return new vr(Xe.comparator)}function Dee(){return new vr(Xe.comparator)}const yOe={asc:"ASCENDING",desc:"DESCENDING"},vOe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bOe={and:"AND",or:"OR"};class EOe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function AV(n,e){return n.useProto3Json||sI(e)?e:{value:e}}function S_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ree(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IOe(n,e){return S_(n,e.toTimestamp())}function Ii(n){return ct(!!n),ft.fromTimestamp(function(t){const r=Yc(t);return new Br(r.seconds,r.nanos)}(n))}function SV(n,e){return xV(n,e).canonicalString()}function xV(n,e){const t=(i=n,new yn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function Mee(n){const e=yn.fromString(n);return ct(zee(e)),e}function II(n,e){return SV(n.databaseId,e.path)}function Xl(n,e){const t=Mee(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(Nee(t))}function Pee(n,e){return SV(n.databaseId,e)}function kee(n){const e=Mee(n);return 4===e.length?yn.emptyPath():Nee(e)}function DV(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Nee(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Oee(n,e,t){return{name:II(n,e),fields:t.value.mapValue.fields}}function Fee(n,e,t){const r=Xl(n,e.name),i=Ii(e.updateTime),s=e.createTime?Ii(e.createTime):ft.min(),o=new ms({mapValue:{fields:e.fields}}),a=Dr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function wI(n,e){let t;if(e instanceof T_)t={update:Oee(n,e.key,e.value)};else if(e instanceof A_)t={delete:II(n,e.key)};else if(e instanceof eu)t={update:Oee(n,e.key,e.data),updateMask:ROe(e.fieldMask)};else{if(!(e instanceof EV))return st();t={verify:II(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof w_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof C_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:IOe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:st()),t;var s}function RV(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?jr.updateTime(Ii(s.updateTime)):void 0!==s.exists?jr.exists(s.exists):jr.none():jr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(ct("REQUEST_TIME"===a.setToServerValue),l=new w_):"appendMissingElements"in a?l=new Yf(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Xf(a.removeAllFromArray.values||[]):"increment"in a?l=new C_(o,a.increment):st();const c=xr.fromServerFormat(a.fieldPath);return new _I(c,l)}(n,i)):[];var s;if(e.update){const i=Xl(n,e.update.name),s=new ms({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new No((e.updateMask.fieldPaths||[]).map(u=>xr.fromServerFormat(u)));return new eu(i,s,o,t,r)}return new T_(i,s,t,r)}if(e.delete){const i=Xl(n,e.delete);return new A_(i,t)}if(e.verify){const i=Xl(n,e.verify);return new EV(i,t)}return st()}function Lee(n,e){return{documents:[Pee(n,e.path)]}}function px(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Pee(n,i);const s=function(c){if(0!==c.length)return jee(Yn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:Md((m=u).field),direction:SOe(m.dir)};var m})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=AV(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function Bee(n){let e=kee(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const m=Uee(h);return m instanceof Yn&&pV(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new dI(x_((b=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(h){let m;return m="object"==typeof h?h.value:h,sI(m)?null:m}(t.limit));let l=null;var h;t.startAt&&(l=new Rd((h=t.startAt).values||[],!!h.before));let c=null;return t.endAt&&(c=function(h){return new Rd(h.values||[],!h.before)}(t.endAt)),XJ(e,i,o,s,a,"F",l,c)}function Uee(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=x_(t.unaryFilter.field);return vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=x_(t.unaryFilter.field);return vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=x_(t.unaryFilter.field);return vn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=x_(t.unaryFilter.field);return vn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?vn.create(x_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Yn.create(t.compositeFilter.filters.map(r=>Uee(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return st()}}(t.compositeFilter.op))}(n):st();var t}function SOe(n){return yOe[n]}function xOe(n){return vOe[n]}function DOe(n){return bOe[n]}function Md(n){return{fieldPath:n.canonicalString()}}function x_(n){return xr.fromServerFormat(n.fieldPath)}function jee(n){return n instanceof vn?function(t){if("=="===t.op){if(NJ(t.value))return{unaryFilter:{field:Md(t.field),op:"IS_NAN"}};if(kJ(t.value))return{unaryFilter:{field:Md(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(NJ(t.value))return{unaryFilter:{field:Md(t.field),op:"IS_NOT_NAN"}};if(kJ(t.value))return{unaryFilter:{field:Md(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Md(t.field),op:xOe(t.op),value:t.value}}}(n):n instanceof Yn?function(t){const r=t.getFilters().map(i=>jee(i));return 1===r.length?r[0]:{compositeFilter:{op:DOe(t.op),filters:r}}}(n):st()}function ROe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zee(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class tu{constructor(e,t,r,i,s=ft.min(),o=ft.min(),a=li.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hee{constructor(e){this.ct=e}}function $ee(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:II(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:S_(s,o.version.toTimestamp()),createTime:S_(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Zf(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Zf(e.version)}}var s,o;return r}function mx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Jf(n){const e=new Br(n.seconds,n.nanoseconds);return ft.fromTimestamp(e)}function ep(n,e){const t=(e.baseMutations||[]).map(s=>RV(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>RV(n.ct,s)),i=Br.fromMillis(e.localWriteTimeMs);return new IV(e.batchId,i,t,r)}function CI(n){const e=Jf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Jf(n.lastLimboFreeSnapshotVersion):ft.min();let r;return r=void 0!==n.query.documents?(ct(1===(s=n.query).documents.length),Vs(b_(kee(s.documents[0])))):function(s){return Vs(Bee(s))}(n.query),new tu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,li.fromBase64String(n.resumeToken));var s}function Wee(n,e){const t=Zf(e.snapshotVersion),r=Zf(e.lastLimboFreeSnapshotVersion);let i;i=ox(e.target)?Lee(n.ct,e.target):px(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function MV(n){const e=Bee({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lx(e,e.limit,"L"):e}function PV(n,e){return new CV(e.largestBatchId,RV(n.ct,e.overlayMutation))}function Gee(n,e){const t=e.path.lastSegment();return[n,Ls(e.path.popLast()),t]}function qee(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Zf(r.readTime),documentKey:Ls(r.documentKey.path),largestBatchId:r.largestBatchId}}class POe{getBundleMetadata(e,t){return Kee(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Jf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Kee(e).put({bundleId:(i=t).id,createTime:Zf(Ii(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Qee(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:MV(s.bundledQuery),readTime:Jf(s.readTime)};var s})}saveNamedQuery(e,t){return Qee(e).put({name:(i=t).name,readTime:Zf(Ii(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Kee(n){return $i(n,"bundles")}function Qee(n){return $i(n,"namedQueries")}class gx{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new gx(e,t.uid||"")}getOverlay(e,t){return TI(e).get(Gee(this.userId,t)).next(r=>r?PV(this.serializer,r):null)}getOverlays(e,t){const r=Yl();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new CV(t,o);i.push(this.ht(e,a))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Ls(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(TI(e).j("collectionPathOverlayIndex",a))}),le.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Yl(),s=Ls(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return TI(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=PV(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Yl();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return TI(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=PV(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}ht(e,t){return TI(e).put(function(i,s,o){const[a,l,c]=Gee(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:wI(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function TI(n){return $i(n,"documentOverlays")}class kOe{Pt(e){return $i(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?li.fromUint8Array(r):li.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class tp{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ur(e.integerValue));else if("doubleValue"in e){const r=Ur(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),oI(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Yc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?OJ(e)?this.dt(t,Number.MAX_SAFE_INTEGER):sx(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):st()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Ur(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Xe.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function NOe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Yee(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=NOe(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}tp.vt=new tp;class OOe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=Yee(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=Yee(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class FOe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class LOe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class AI{constructor(){this.jt=new OOe,this.Ht=new FOe(this.jt),this.Jt=new LOe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class np{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new np(this.indexId,this.documentKey,this.arrayValue,r)}}function Pd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xee(n.arrayValue,e.arrayValue),0!==t?t:(t=Xee(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function Xee(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Zee{constructor(e){this.Xt=new rr((t,r)=>xr.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ct(e.collectionGroup===this.collectionId),this.nn)return!1;const t=sV(e);if(void 0!==t&&!this.sn(t))return!1;const r=Wf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new rr(xr.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Gf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Gf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Gf(r.field,"asc"===r.dir?0:1)));return new m_(m_.UNKNOWN_ID,this.collectionId,t,g_.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Jee(n){var e,t;if(ct(n instanceof vn||n instanceof Yn),n instanceof vn){if(n instanceof KJ){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>vn.create(n.field,"==",s)))||[];return Yn.create(i,"or")}return n}const r=n.filters.map(i=>Jee(i));return Yn.create(r,n.op)}function VOe(n){if(0===n.getFilters().length)return[];const e=OV(Jee(n));return ct(ete(e)),kV(e)||NV(e)?[e]:e.getFilters()}function kV(n){return n instanceof vn}function NV(n){return n instanceof Yn&&pV(n)}function ete(n){return kV(n)||NV(n)||function(t){if(t instanceof Yn&&fV(t)){for(const r of t.getFilters())if(!kV(r)&&!NV(r))return!1;return!0}return!1}(n)}function OV(n){if(ct(n instanceof vn||n instanceof Yn),n instanceof vn)return n;if(1===n.filters.length)return OV(n.filters[0]);const e=n.filters.map(r=>OV(r));let t=Yn.create(e,n.op);return t=_x(t),ete(t)?t:(ct(t instanceof Yn),ct(v_(t)),ct(t.filters.length>1),t.filters.reduce((r,i)=>FV(r,i)))}function FV(n,e){let t;return ct(n instanceof vn||n instanceof Yn),ct(e instanceof vn||e instanceof Yn),t=n instanceof vn?e instanceof vn?Yn.create([n,e],"and"):tte(n,e):e instanceof vn?tte(e,n):function(i,s){if(ct(i.filters.length>0&&s.filters.length>0),v_(i)&&v_(s))return WJ(i,s.getFilters());const o=fV(i)?i:s,a=fV(i)?s:i,l=o.filters.map(c=>FV(c,a));return Yn.create(l,"or")}(n,e),_x(t)}function tte(n,e){if(v_(e))return WJ(e,n.getFilters());{const t=e.filters.map(r=>FV(n,r));return Yn.create(t,"or")}}function _x(n){if(ct(n instanceof vn||n instanceof Yn),n instanceof vn)return n;const e=n.getFilters();if(1===e.length)return _x(e[0]);if(HJ(n))return n;const t=e.map(i=>_x(i)),r=[];return t.forEach(i=>{i instanceof vn?r.push(i):i instanceof Yn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Yn.create(r,n.op)}class BOe{constructor(){this.un=new LV}addToCollectionParentIndex(e,t){return this.un.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(ra.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class LV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rr(yn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rr(yn.comparator)).toArray()}}const yx=new Uint8Array(0);class UOe{constructor(e,t){this.databaseId=t,this.cn=new LV,this.ln=new Jc(r=>Qf(r),(r,i)=>hI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Ls(i)};return nte(e).put(s)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hJ(t),""],!1,!0);return nte(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Kl(o.parent))}return r})}addFieldIndex(e,t){const r=SI(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=R_(e);return s.next(a=>{o.put(qee(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=SI(e),i=R_(e),s=D_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=SI(e),r=D_(e),i=R_(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return le.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Zee(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=D_(e);let i=!0;const s=new Map;return le.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Yt();const a=[];return le.forEach(s,(l,c)=>{var Q;Le("IndexedDbIndexManager",`Using index ${Q=l,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(we=>`${we.fieldPath}:${we.kind}`).join(",")}`} to execute ${Qf(t)}`);const u=function(Q,we){const je=sV(we);if(void 0===je)return null;for(const He of ax(Q,je.fieldPath))switch(He.op){case"array-contains-any":return He.value.arrayValue.values||[];case"array-contains":return[He.value]}return null}(c,l),h=function(Q,we){const je=new Map;for(const He of Wf(we))for(const H of ax(Q,He.fieldPath))switch(H.op){case"==":case"in":je.set(He.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return je.set(He.fieldPath.canonicalString(),H.value),Array.from(je.values())}return null}(c,l),m=function(Q,we){const je=[];let He=!0;for(const H of Wf(we)){const L=0===H.kind?QJ(Q,H.fieldPath,Q.startAt):YJ(Q,H.fieldPath,Q.startAt);je.push(L.value),He&&(He=L.inclusive)}return new Rd(je,He)}(c,l),y=function(Q,we){const je=[];let He=!0;for(const H of Wf(we)){const L=0===H.kind?YJ(Q,H.fieldPath,Q.endAt):QJ(Q,H.fieldPath,Q.endAt);je.push(L.value),He&&(He=L.inclusive)}return new Rd(je,He)}(c,l),b=this.In(l,c,m),T=this.In(l,c,y),M=this.Tn(l,c,h),B=this.En(l.indexId,u,b,m.inclusive,T,y.inclusive,M);return le.forEach(B,V=>r.G(V,t.limit).next(Q=>{Q.forEach(we=>{const je=Xe.fromSegments(we.documentKey);o.has(je)||(o=o.add(je),a.push(je))})}))}).next(()=>a)}return le.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:VOe(Yn.create(e.filters,"and")).map(r=>gV(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let h=0;h<l;++h){const m=t?this.dn(t[h/c]):yx,y=this.An(e,m,r[h%c],i),b=this.Rn(e,m,s[h%c],o),T=a.map(M=>this.An(e,m,M,!0));u.push(...this.createRange(y,b,T))}return u}An(e,t,r,i){const s=new np(e,Xe.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new np(e,Xe.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new Zee(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return le.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new rr(xr.comparator),u=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?u=!0:c=c.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new AI;for(const i of Wf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);tp.vt.It(s,o)}return r.zt()}dn(e){const t=new AI;return tp.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new AI;return tp.vt.It(Kf(this.databaseId,t),r.Yt(function(s){const o=Wf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new AI);let s=0;for(const o of Wf(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&cI(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);tp.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new AI;l.seed(a.zt()),tp.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof vn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=SI(e),i=R_(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return le.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const m=h?new g_(h.sequenceNumber,new ra(Jf(h.readTime),new Xe(Kl(h.documentKey)),h.largestBatchId)):g_.empty(),y=u.fields.map(([b,T])=>new Gf(xr.fromServerFormat(b),T));return new m_(u.indexId,u.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=SI(e),s=R_(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>le.forEach(a,l=>s.put(qee(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?le.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),le.forEach(a,l=>this.wn(e,i,l).next(c=>{const u=this.Sn(s,l);return c.isEqual(u)?le.resolve():this.bn(e,s,l,c,u)}))))})}Dn(e,t,r,i){return D_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return D_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=D_(e);let s=new rr(Pd);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new np(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new rr(Pd);const i=this.Vn(t,e);if(null==i)return r;const s=sV(t);if(null!=s){const o=e.data.field(s.fieldPath);if(cI(o))for(const a of o.arrayValue.values||[])r=r.add(new np(t.indexId,e.key,this.dn(a),i))}else r=r.add(new np(t.indexId,e.key,yx,i));return r}bn(e,t,r,i,s){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,u,h,m){const y=l.getIterator(),b=c.getIterator();let T=__(y),M=__(b);for(;T||M;){let B=!1,V=!1;if(T&&M){const Q=u(T,M);Q<0?V=!0:Q>0&&(B=!0)}else null!=T?V=!0:B=!0;B?(h(M),M=__(b)):V?(m(T),T=__(y)):(T=__(y),M=__(b))}}(i,s,Pd,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),le.waitFor(o)}yn(e){let t=1;return R_(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Pd(o,a)).filter((o,a,l)=>!a||0!==Pd(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=Pd(o,e),l=Pd(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,yx,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,yx,[]]))}return s}Cn(e,t){return Pd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rte)}getMinOffset(e,t){return le.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||st())).next(rte)}}function nte(n){return $i(n,"collectionParents")}function D_(n){return $i(n,"indexEntries")}function SI(n){return $i(n,"indexConfiguration")}function R_(n){return $i(n,"indexState")}function rte(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;oV(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ra(e.readTime,e.documentKey,t)}const ite={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ste(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(u,h,m)=>(a++,m.delete()));s.push(l.next(()=>{ct(1===a)}));const c=[];for(const u of t.mutations){const h=IJ(e,u.key.path,t.batchId);s.push(i.delete(h)),c.push(u.key)}return le.waitFor(s).next(()=>c)}function vx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class bx{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ct(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new bx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kd(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=M_(e),o=kd(e);return o.add({}).next(a=>{ct("number"==typeof a);const l=new IV(a,t,r,i),c=function(y,b,T){const M=T.baseMutations.map(V=>wI(y.ct,V)),B=T.mutations.map(V=>wI(y.ct,V));return{userId:b,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:M,mutations:B}}(this.serializer,this.userId,l),u=[];let h=new rr((m,y)=>Ft(m.canonicalString(),y.canonicalString()));for(const m of i){const y=IJ(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),u.push(o.put(c)),u.push(s.put(y,SNe))}return h.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),le.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return kd(e).get(t).next(r=>r?(ct(r.userId===this.userId),ep(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?le.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return kd(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ct(a.batchId>=r),s=ep(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return kd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kd(e).U("userMutationsIndex",t).next(r=>r.map(i=>ep(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ZS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return M_(e).J({range:i},(o,a,l)=>{const[c,u,h]=o,m=Kl(u);if(c===this.userId&&t.path.isEqual(m))return kd(e).get(h).next(y=>{if(!y)throw st();ct(y.userId===this.userId),s.push(ep(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Ft);const i=[];return t.forEach(s=>{const o=ZS(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=M_(e).J({range:a},(c,u,h)=>{const[m,y,b]=c,T=Kl(y);m===this.userId&&s.path.isEqual(T)?r=r.add(b):h.done()});i.push(l)}),le.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=ZS(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new rr(Ft);return M_(e).J({range:o},(l,c,u)=>{const[h,m,y]=l,b=Kl(m);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):u.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(kd(e).get(s).next(o=>{if(null===o)throw st();ct(o.userId===this.userId),r.push(ep(this.serializer,o))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ste(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return M_(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Kl(s[1]);i.push(l)}else a.done()}).next(()=>{ct(0===i.length)})})}containsKey(e,t){return ote(e,this.userId,t)}Nn(e){return ate(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ote(n,e,t){const r=ZS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return M_(n).J({range:s,H:!0},(a,l,c)=>{const[u,h,m]=a;u===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function kd(n){return $i(n,"mutations")}function M_(n){return $i(n,"documentMutations")}function ate(n){return $i(n,"mutationQueues")}class rp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new rp(0)}static kn(){return new rp(-1)}}class jOe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new rp(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ft.fromTimestamp(new Br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>P_(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return P_(e).J((o,a)=>{const l=CI(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>le.waitFor(s)).next(()=>i)}forEachTarget(e,t){return P_(e).J((r,i)=>{const s=CI(i);t(s)})}qn(e){return lte(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}Qn(e,t){return lte(e).put("targetGlobalKey",t)}Kn(e,t){return P_(e).put(Wee(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Qf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return P_(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=CI(a);hI(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Nd(e);return t.forEach(o=>{const a=Ls(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Nd(e);return le.forEach(t,s=>{const o=Ls(s.path);return le.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Nd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nd(e);let s=Yt();return i.J({range:r,H:!0},(o,a,l)=>{const c=Kl(o[1]),u=new Xe(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const r=Ls(t.path),i=IDBKeyRange.bound([r],[hJ(r)],!1,!0);let s=0;return Nd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return P_(e).get(t).next(r=>r?CI(r):null)}}function P_(n){return $i(n,"targets")}function lte(n){return $i(n,"targetGlobal")}function Nd(n){return $i(n,"targetDocuments")}function cte([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class zOe{constructor(e){this.Un=e,this.buffer=new rr(cte),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cte(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ute{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,O.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Cd(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wd(r)}yield t.Hn(3e5)}))}}class HOe{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(ia.oe);const r=new zOe(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(ite)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ite):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),f_()<=Mo.$b.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${h} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}class $Oe{constructor(e,t){this.db=e,this.garbageCollector=function dte(n,e){return new HOe(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Ex(e,r)}removeReference(e,t,r){return Ex(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ex(e,t)}nr(e,t){return function(i,s){let o=!1;return ate(i).Y(a=>ote(i,a,s).next(l=>(l&&(o=!0),le.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ft.min()),Nd(e).delete([0,Ls(o.path)])))});i.push(l)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ex(e,t)}tr(e,t){const r=Nd(e);let i,s=ia.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==ia.oe&&t(new Xe(Kl(i)),s),s=c,i=l):s=ia.oe}).next(()=>{s!==ia.oe&&t(new Xe(Kl(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ex(n,e){return Nd(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ls(e.path),sequenceNumber:i}));var i}class hte{constructor(){this.changes=new Jc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WOe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ip(e).put(r)}removeEntry(e,t,r){return ip(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],mx(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Dr.newInvalidDocument(t);return ip(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xI(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Dr.newInvalidDocument(t)};return ip(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xI(t))},(i,s)=>{r={document:this.ir(t,s),size:vx(s)}}).next(()=>r)}getEntries(e,t){let r=Oo();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Oo(),i=new vr(Xe.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,vx(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return le.resolve();let i=new rr(gte);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(xI(i.first()),xI(i.last())),o=i.getIterator();let a=o.getNext();return ip(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=Xe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&gte(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(xI(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),mx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ip(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=Oo();for(const h of c){const m=this.ir(Xe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(pI(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let s=Oo();const o=mte(t,r),a=mte(t,ra.max());return ip(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.ir(Xe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new GOe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return pte(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}rr(e,t){return pte(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function MOe(n,e){let t;if(e.document)t=Fee(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Jf(e.noDocument.readTime);t=Dr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Xe.fromSegments(e.unknownDocument.path),i=Jf(e.unknownDocument.version);t=Dr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Br(i[0],i[1]);return ft.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ft.min()))return r}return Dr.newInvalidDocument(e)}}function fte(n){return new WOe(n)}class GOe extends hte{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Jc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new rr((s,o)=>Ft(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=$ee(this.cr.serializer,o);i=i.add(s.path.popLast());const c=vx(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=$ee(this.cr.serializer,o.convertToNoDocument(ft.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function pte(n){return $i(n,"remoteDocumentGlobal")}function ip(n){return $i(n,"remoteDocumentsV14")}function xI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mte(n,e){const t=e.documentKey.path.toArray();return[n,mx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gte(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ft(t[s],r[s]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class qOe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _te{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&yI(r.mutation,i,No.empty(),Br.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Yl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=mI();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Yl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Oo();const o=gI(),a=gI();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof eu)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),yI(u.mutation,c,u.mutation.getFieldMask(),Br.now())):o.set(c.key,No.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var h;return a.set(c,new qOe(u,null!==(h=o.get(c))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=gI();let i=new vr((o,a)=>o-a),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||No.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Yt()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=oee();u.forEach(m=>{if(!s.has(m)){const y=pee(t.get(m),r.get(m));null!==y&&h.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Xe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_V(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):le.resolve(Yl());let a=-1,l=s;return o.next(c=>le.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?le.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Yt())).next(u=>({batchId:a,changes:see(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=mI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=mI();return this.indexManager.getCollectionParents(e,s).next(a=>le.forEach(a,l=>{const c=(h=t,m=l.child(s),new Zc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,m;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,Dr.newInvalidDocument(u)))});let a=mI();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&yI(u.mutation,c,No.empty(),Br.now()),pI(t,c)&&(a=a.insert(l,c))}),a})}}class KOe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return le.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Ii(i.createTime)}),le.resolve();var i}getNamedQuery(e,t){return le.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:MV(i.bundledQuery),readTime:Ii(i.readTime)}),le.resolve();var i}}class QOe{constructor(){this.overlays=new vr(Xe.comparator),this.Ir=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Yl();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Yl(),s=t.length+1,o=new Xe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new vr((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=Yl(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Yl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return le.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new CV(t,r));let s=this.Ir.get(t);void 0===s&&(s=Yt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class YOe{constructor(){this.sessionToken=li.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}class VV{constructor(){this.Tr=new rr(is.Er),this.dr=new rr(is.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new is(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new is(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Xe(new yn([])),r=new is(t,e),i=new is(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Xe(new yn([])),r=new is(t,e),i=new is(t,e+1);let s=Yt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new is(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class is{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Xe.comparator(e.key,t.key)||Ft(e.wr,t.wr)}static Ar(e,t){return Ft(e.wr,t.wr)||Xe.comparator(e.key,t.key)}}class XOe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new rr(is.Er)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new IV(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new is(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,t){return le.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new is(t,0),i=new is(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Ft);return t.forEach(i=>{const s=new is(i,0),o=new is(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),le.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Xe.isDocumentKey(s)||(s=s.child(""));const o=new is(new Xe(s),0);let a=new rr(Ft);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),le.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ct(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return le.forEach(t.mutations,i=>{const s=new is(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new is(t,0),i=this.br.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZOe{constructor(e){this.Mr=e,this.docs=new vr(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Dr.newInvalidDocument(t))}getEntries(e,t){let r=Oo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Oo();const o=t.path,a=new Xe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||oV(pJ(u),r)<=0||(i.has(u.key)||pI(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,t,r,i){st()}Or(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JOe(this)}getSize(e){return le.resolve(this.size)}}class JOe extends hte{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class eFe{constructor(e){this.persistence=e,this.Nr=new Jc(t=>Qf(t),hI),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.Lr=0,this.Br=new VV,this.targetCount=0,this.kr=rp.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),le.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new rp(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Kn(t),le.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Br.containsKey(t))}}class BV{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ia(0),this.Kr=!1,this.Kr=!0,this.$r=new YOe,this.referenceDelegate=e(this),this.Ur=new eFe(this),this.indexManager=new BOe,this.remoteDocumentCache=new ZOe(r=>this.referenceDelegate.Wr(r)),this.serializer=new Hee(t),this.Gr=new KOe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QOe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new XOe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new tFe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return le.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class tFe extends gJ{constructor(e){super(),this.currentSequenceNumber=e}}class Ix{constructor(e){this.persistence=e,this.Jr=new VV,this.Yr=null}static Zr(e){return new Ix(e)}get Xr(){if(this.Yr)return this.Yr;throw st()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),le.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xr,r=>{const i=Xe.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ft.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return le.or([()=>le.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class nFe{constructor(e){this.serializer=e}O(e,t,r,i){const s=new XS("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",EJ,{unique:!0}),l.createObjectStore("documentMutations"),yte(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=le.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),yte(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",EJ,{unique:!0});const h=c.store("mutations"),m=u.map(y=>h.put(y));return le.waitFor(m)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:BNe});c.createIndex("collectionPathOverlayIndex",UNe,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",jNe,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:xNe});c.createIndex("documentKeyIndex",DNe),c.createIndex("collectionGroupIndex",RNe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:ONe}).createIndex("sequenceNumberIndex",FNe,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:LNe}).createIndex("documentKeyIndex",VNe,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(l){l.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=vx(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>le.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>le.forEach(a,l=>{ct(l.userId===s.userId);const c=ep(this.serializer,l);return ste(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new yn(o),c=[0,Ls(l)];s.push(t.get(c).next(u=>u?le.resolve():t.put({targetId:0,path:Ls(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:NNe});const r=t.store("collectionParents"),i=new LV,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Ls(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new yn(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=Kl(a);return s(u.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=CI(i),o=Wee(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(h=o,h.document?new Xe(yn.fromString(h.document.name).popFirst(5)):h.noDocument?Xe.fromSegments(h.noDocument.path):h.unknownDocument?Xe.fromSegments(h.unknownDocument.path):st()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var h;i.push(a.put(c))}).next(()=>le.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=fte(this.serializer),s=new BV(Ix.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Yt();ep(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),le.forEach(a,(l,c)=>{const u=new ns(c),h=gx.lt(this.serializer,u),m=s.getIndexManager(u),y=bx.lt(u,this.serializer,m,s.referenceDelegate);return new _te(i,y,h,m).recalculateAndSaveOverlaysForDocumentKeys(new uV(t,ia.oe),l).next()})})}}function yte(n){n.createObjectStore("targetDocuments",{keyPath:PNe}).createIndex("documentTargetsIndex",kNe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",MNe,{unique:!0}),n.createObjectStore("targetGlobal")}const UV="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jV{constructor(e,t,r,i,s,o,a,l,c,u,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!jV.D())throw new Ne(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $Oe(this,i),this.Ai=t+"main",this.serializer=new Hee(l),this.Ri=new ql(this.Ai,this.hi,new nFe(this.serializer)),this.$r=new kOe,this.Ur=new jOe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fte(this.serializer),this.Gr=new POe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===u&&Ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(Ie.FAILED_PRECONDITION,UV);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ia(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,O.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,O.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,O.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Cd(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return DI(e).get("owner").next(t=>le.resolve(this.vi(t)))}Ci(e){return Cx(e).delete(this.clientId)}Fi(){var e=this;return(0,O.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=$i(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return le.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?le.resolve(!0):DI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Ne(Ie.FAILED_PRECONDITION,UV);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cx(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,O.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new uV(t,ia.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Cx(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return bx.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UOe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gx.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(l=this.hi)?$Ne:16===l?HNe:15===l?cV:14===l?TJ:13===l?CJ:12===l?zNe:11===l?wJ:void st();var l;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new uV(a,this.Qr?this.Qr.next():ia.oe),"readwrite-primary"===t?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ne(Ie.FAILED_PRECONDITION,mJ);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return DI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(Ie.FAILED_PRECONDITION,UV)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return DI(e).put("owner",t)}static D(){return ql.D()}bi(e){const t=DI(e);return t.get("owner").next(r=>this.vi(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ei(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,N.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ei("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ei("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function DI(n){return $i(n,"owner")}function Cx(n){return $i(n,"clientMetadata")}function zV(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HV{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Yt(),i=Yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new HV(e,t.fromCache,r,i)}}class rFe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class vte{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,N.nr)()?8:_J((0,N.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new rFe;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(f_()<=Mo.$b.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",I_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),le.resolve()):(f_()<=Mo.$b.DEBUG&&Le("QueryEngine","Query:",I_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(f_()<=Mo.$b.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",I_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(t))):le.resolve())}Yi(e,t){if(ZJ(t))return le.resolve(null);let r=Vs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=lx(t,null,"F"),r=Vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Yt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,lx(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return ZJ(t)||i.isEqual(ft.min())?le.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?le.resolve(null):(f_()<=Mo.$b.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),I_(t)),this.rs(e,o,t,fJ(i,-1)).next(a=>a))})}ts(e,t){let r=new rr(ree(e));return t.forEach((i,s)=>{pI(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return f_()<=Mo.$b.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",I_(t)),this.Ji.getDocumentsMatchingQuery(e,t,ra.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class iFe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new vr(Ft),this._s=new Jc(s=>Qf(s),hI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _te(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function bte(n,e,t,r){return new iFe(n,e,t,r)}function Ete(n,e){return $V.apply(this,arguments)}function $V(){return($V=(0,O.A)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Yt();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function Ite(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function wte(n,e,t){let r=Yt(),i=Yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Oo();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ft.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function aFe(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function k_(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new tu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function N_(n,e,t){return WV.apply(this,arguments)}function WV(){return(WV=(0,O.A)(function*(n,e,t){const r=Ge(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Cd(o))throw o;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function Tx(n,e,t){const r=Ge(n);let i=ft.min(),s=Yt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Ge(l),m=h._s.get(u);return void 0!==m?le.resolve(h.os.get(m)):h.Ur.getTargetData(c,u)}(r,o,Vs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ft.min(),t?s:Yt())).next(a=>(Ate(r,nee(e),a),{documents:a,Ts:s})))}function Cte(n,e){const t=Ge(n),r=Ge(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function Tte(n,e){const t=Ge(n),r=t.us.get(e)||ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,fJ(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Ate(t,e,i),i))}function Ate(n,e,t){let r=n.us.get(e)||ft.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function GV(){return(GV=(0,O.A)(function*(n,e,t,r){const i=Ge(n);let s=Yt(),o=Oo();for(const c of t){const u=e.Es(c.metadata.name);c.document&&(s=s.add(u));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(u,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=yield k_(i,(u=r,Vs(b_(yn.fromString(`__bundle__/docs/${u}`)))));var u;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>wte(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))})).apply(this,arguments)}function cFe(n,e){return qV.apply(this,arguments)}function qV(){return(qV=(0,O.A)(function*(n,e,t=Yt()){const r=yield k_(n,Vs(MV(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ii(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(li.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function Ste(n,e){return`firestore_clients_${n}_${e}`}function xte(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function KV(n,e){return`firestore_targets_${n}_${e}`}class Ax{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Ne(i.error.code,i.error.message))),o?new Ax(e,t,i.state,s):(Ei("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class RI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ne(r.error.code,r.error.message))),s?new RI(e,r.state,i):(Ei("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=vV();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=vJ(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Sx(e,s):(Ei("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class QV{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new QV(t.clientId,t.onlineState):(Ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YV{constructor(){this.activeTargetIds=vV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XV{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new vr(Ft),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Ste(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new YV),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,O.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(Ste(e.persistenceKey,i));if(s){const o=Sx.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(KV(this.persistenceKey,e));if(i){const s=RI.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(KV(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,O.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=ia.oe;if(null!=o)try{const l=JSON.parse(o);ct("number"==typeof l),a=l}catch(l){Ei("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==ia.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Ax(this.currentUser,e,t,r),s=xte(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=xte(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=KV(this.persistenceKey,e),s=new RI(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Sx.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return Ax.Rs(new ns(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return RI.Rs(i,t)}Ls(e){return QV.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,O.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=vV();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Dte{constructor(){this.so=new YV,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new YV,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uFe{_o(e){}shutdown(){}}class Rte{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xx=null;function ZV(){return null===xx?xx=268435456+Math.round(2147483648*Math.random()):xx++,"0x"+xx.toString(16)}const dFe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hFe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Us="WebChannelConnection";class fFe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=ZV(),l=this.xo(t,r.toUriEncodedString());Le("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(u=>(Le("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw na("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+h_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${dFe[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=ZV();return new Promise((o,a)=>{const l=new rJ;l.setWithCredentials(!0),l.listenOnce(iJ.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case YS.NO_ERROR:const u=l.getResponseJson();Le(Us,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case YS.TIMEOUT:Le(Us,`RPC '${e}' ${s} timed out`),a(new Ne(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case YS.HTTP_ERROR:const h=l.getStatus();if(Le(Us,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const b=function(M){const B=M.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(B)>=0?B:Ie.UNKNOWN}(y.status);a(new Ne(b,y.message))}else a(new Ne(Ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ne(Ie.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Le(Us,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Le(Us,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=ZV(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aJ(),a=oJ(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");Le(Us,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let m=!1,y=!1;const b=new hFe({Io:M=>{y?Le(Us,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(Le(Us,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),Le(Us,`RPC '${e}' stream ${i} sending:`,M),h.send(M))},To:()=>h.close()}),T=(M,B,V)=>{M.listen(B,Q=>{try{V(Q)}catch(we){setTimeout(()=>{throw we},0)}})};return T(h,nI.EventType.OPEN,()=>{y||(Le(Us,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),T(h,nI.EventType.CLOSE,()=>{y||(y=!0,Le(Us,`RPC '${e}' stream ${i} transport closed`),b.So())}),T(h,nI.EventType.ERROR,M=>{y||(y=!0,na(Us,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new Ne(Ie.UNAVAILABLE,"The operation could not be completed")))}),T(h,nI.EventType.MESSAGE,M=>{var B;if(!y){const V=M.data[0];ct(!!V);const we=V.error||(null===(B=V[0])||void 0===B?void 0:B.error);if(we){Le(Us,`RPC '${e}' stream ${i} received error:`,we);const je=we.status;let He=function(W){const J=Mi[W];if(void 0!==J)return Eee(J)}(je),H=we.message;void 0===He&&(He=Ie.INTERNAL,H="Unknown error status: "+je+" with message "+we.message),y=!0,b.So(new Ne(He,H)),h.close()}else Le(Us,`RPC '${e}' stream ${i} received:`,V),b.bo(V)}}),T(a,sJ.STAT_EVENT,M=>{M.stat===rV.PROXY?Le(Us,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===rV.NOPROXY&&Le(Us,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Mte(){return typeof window<"u"?window:null}function Dx(){return typeof document<"u"?document:null}function MI(n){return new EOe(n,!0)}class JV{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Pte{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new JV(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,O.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,O.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,O.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===Ie.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Ne(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,O.A)(function*(){e.state=0,e.start()}))}I_(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pFe extends Pte{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function COe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:st(),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(ct(void 0===u||"string"==typeof u),li.fromBase64String(u||"")):(ct(void 0===u||u instanceof Buffer||u instanceof Uint8Array),li.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?Ie.UNKNOWN:Eee(c.code);return new Ne(u,c.message||"")}(o);t=new Aee(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Xl(n,r.document.name),s=Ii(r.document.updateTime),o=r.document.createTime?Ii(r.document.createTime):ft.min(),a=new ms({mapValue:{fields:r.document.fields}}),l=Dr.newFoundDocument(i,s,o,a);t=new fx(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Xl(n,r.document),s=r.readTime?Ii(r.readTime):ft.min(),o=Dr.newNoDocument(i,s);t=new fx([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Xl(n,r.document);t=new fx([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new mOe(i,s);t=new Tee(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ft.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ft.min():o.readTime?Ii(o.readTime):ft.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=DV(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=ox(l)?{documents:Lee(s,l)}:{query:px(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ree(s,o.resumeToken);const c=AV(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ft.min())>0){a.readTime=S_(s,o.snapshotVersion.toTimestamp());const c=AV(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function AOe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=DV(this.serializer),t.removeTarget=e,this.a_(t)}}class mFe extends Pte{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ct(!!e.streamToken),this.lastStreamToken=e.streamToken,ct(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function TOe(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(i,s){let o=Ii(i.updateTime?i.updateTime:s);return o.isEqual(ft.min())&&(o=Ii(s)),new hOe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=DV(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wI(this.serializer,r))};this.a_(t)}}class gFe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ne(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,xV(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(Ie.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,xV(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(Ie.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _Fe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ei(t),this.D_=!1):Le("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class yFe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,O.A)(function*(){var l;Od(o)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,O.A)(function*(u){const h=Ge(u);h.L_.add(4),yield O_(h),h.q_.set("Unknown"),h.L_.delete(4),yield PI(h)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.q_=new _Fe(r,i)}}function PI(n){return eB.apply(this,arguments)}function eB(){return(eB=(0,O.A)(function*(n){if(Od(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function O_(n){return tB.apply(this,arguments)}function tB(){return(tB=(0,O.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Rx(n,e){const t=Ge(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),iB(t)?rB(t):V_(t).r_()&&nB(t,e))}function F_(n,e){const t=Ge(n),r=V_(t);t.N_.delete(e),r.r_()&&kte(t,e),0===t.N_.size&&(r.r_()?r.o_():Od(t)&&t.q_.set("Unknown"))}function nB(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}V_(n).A_(e)}function kte(n,e){n.Q_.xe(e),V_(n).R_(e)}function rB(n){n.Q_=new _Oe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),V_(n).start(),n.q_.v_()}function iB(n){return Od(n)&&!V_(n).n_()&&n.N_.size>0}function Od(n){return 0===Ge(n).L_.size}function Nte(n){n.Q_=void 0}function vFe(n){return sB.apply(this,arguments)}function sB(){return(sB=(0,O.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function bFe(n){return oB.apply(this,arguments)}function oB(){return(oB=(0,O.A)(function*(n){n.N_.forEach((e,t)=>{nB(n,e)})})).apply(this,arguments)}function EFe(n,e){return aB.apply(this,arguments)}function aB(){return(aB=(0,O.A)(function*(n,e){Nte(n),iB(n)?(n.q_.M_(e),rB(n)):n.q_.set("Unknown")})).apply(this,arguments)}function IFe(n,e,t){return lB.apply(this,arguments)}function lB(){return lB=(0,O.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof Aee&&2===e.state&&e.cause)try{yield(r=(0,O.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Mx(n,r)}else if(e instanceof fx?n.Q_.Ke(e):e instanceof Tee?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ft.min()))try{const r=yield Ite(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(li.EMPTY_BYTE_STRING,u.snapshotVersion)),kte(s,l);const h=new tu(u.target,l,c,u.sequenceNumber);nB(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield Mx(n,r)}var r}),lB.apply(this,arguments)}function Mx(n,e,t){return cB.apply(this,arguments)}function cB(){return(cB=(0,O.A)(function*(n,e,t){if(!Cd(e))throw e;n.L_.add(1),yield O_(n),n.q_.set("Offline"),t||(t=()=>Ite(n.localStore)),n.asyncQueue.enqueueRetryable((0,O.A)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield PI(n)}))})).apply(this,arguments)}function Ote(n,e){return e().catch(t=>Mx(n,t,e))}function L_(n){return uB.apply(this,arguments)}function uB(){return(uB=(0,O.A)(function*(n){const e=Ge(n),t=Fd(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wFe(e);)try{const i=yield aFe(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,CFe(e,i)}catch(i){yield Mx(e,i)}Fte(e)&&Lte(e)})).apply(this,arguments)}function wFe(n){return Od(n)&&n.O_.length<10}function CFe(n,e){n.O_.push(e);const t=Fd(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Fte(n){return Od(n)&&!Fd(n).n_()&&n.O_.length>0}function Lte(n){Fd(n).start()}function TFe(n){return dB.apply(this,arguments)}function dB(){return(dB=(0,O.A)(function*(n){Fd(n).p_()})).apply(this,arguments)}function AFe(n){return hB.apply(this,arguments)}function hB(){return(hB=(0,O.A)(function*(n){const e=Fd(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function SFe(n,e,t){return fB.apply(this,arguments)}function fB(){return(fB=(0,O.A)(function*(n,e,t){const r=n.O_.shift(),i=wV.from(r,e,t);yield Ote(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield L_(n)})).apply(this,arguments)}function xFe(n,e){return pB.apply(this,arguments)}function pB(){return pB=(0,O.A)(function*(n,e){var t;e&&Fd(n).V_&&(yield(t=(0,O.A)(function*(i,s){if(bee(a=s.code)&&a!==Ie.ABORTED){const o=i.O_.shift();Fd(i).s_(),yield Ote(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield L_(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),Fte(n)&&Lte(n)}),pB.apply(this,arguments)}function Vte(n,e){return mB.apply(this,arguments)}function mB(){return(mB=(0,O.A)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=Od(t);t.L_.add(3),yield O_(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield PI(t)})).apply(this,arguments)}function gB(n,e){return _B.apply(this,arguments)}function _B(){return(_B=(0,O.A)(function*(n,e){const t=Ge(n);e?(t.L_.delete(2),yield PI(t)):e||(t.L_.add(2),yield O_(t),t.q_.set("Unknown"))})).apply(this,arguments)}function V_(n){return n.K_||(n.K_=function(t,r,i){const s=Ge(t);return s.w_(),new pFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:vFe.bind(null,n),Ro:bFe.bind(null,n),mo:EFe.bind(null,n),d_:IFe.bind(null,n)}),n.B_.push(function(){var e=(0,O.A)(function*(t){t?(n.K_.s_(),iB(n)?rB(n):n.q_.set("Unknown")):(yield n.K_.stop(),Nte(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Fd(n){return n.U_||(n.U_=function(t,r,i){const s=Ge(t);return s.w_(),new mFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TFe.bind(null,n),mo:xFe.bind(null,n),f_:AFe.bind(null,n),g_:SFe.bind(null,n)}),n.B_.push(function(){var e=(0,O.A)(function*(t){t?(n.U_.s_(),yield L_(n)):(yield n.U_.stop(),n.O_.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class yB{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new yB(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(n,e){if(Ei("AsyncQueue",`${e}: ${n}`),Cd(n))return new Ne(Ie.UNAVAILABLE,`${e}: ${n}`);throw n}class U_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=mI(),this.sortedSet=new vr(this.comparator)}static emptySet(e){return new U_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof U_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new U_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Bte{constructor(){this.W_=new vr(Xe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):st():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class j_{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new j_(e,t,U_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class DFe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class RFe{constructor(){this.queries=Ute(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ge(t),s=i.queries;i.queries=Ute(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})}(this,new Ne(Ie.ABORTED,"Firestore shutting down"))}}function Ute(){return new Jc(n=>tee(n),fI)}function vB(n,e){return bB.apply(this,arguments)}function bB(){return(bB=(0,O.A)(function*(n,e){const t=Ge(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new DFe,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=B_(o,`Initialization of query '${I_(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&wB(t)})).apply(this,arguments)}function EB(n,e){return IB.apply(this,arguments)}function IB(){return(IB=(0,O.A)(function*(n,e){const t=Ge(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function MFe(n,e){const t=Ge(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&wB(t)}function PFe(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function wB(n){n.Y_.forEach(e=>{e.next()})}var CB,jte;(jte=CB||(CB={})).ea="default",jte.Cache="cache";class TB{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new j_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=j_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==CB.Cache}}class kFe{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class zte{constructor(e){this.serializer=e}Es(e){return Xl(this.serializer,e)}ds(e){return e.metadata.exists?Fee(this.serializer,e.document,!1):Dr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ii(e)}}class NFe{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Hte(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=yn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new zte(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Yt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,O.A)(function*(){const t=yield function lFe(n,e,t,r){return GV.apply(this,arguments)}(e.localStore,new zte(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield cFe(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function Hte(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $te{constructor(e){this.key=e}}class Wte{constructor(e){this.key=e}}class Gte{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Yt(),this.mutatedKeys=Yt(),this.Aa=ree(e),this.Ra=new U_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Bte,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const m=i.get(u),y=pI(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?b!==T&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(l||c)&&(a=!0)),M&&(y?(o=o.add(y),s=T?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,h)=>function(y,b){const T=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return T(y)-T(b)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],l=0===this.da.size&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,0!==o.length||c?{snapshot:new j_(this.query,e.Ra,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Bte,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Yt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Wte(r))}),this.da.forEach(r=>{e.has(r)||t.push(new $te(r))}),t}ba(e){this.Ta=e.Ts,this.da=Yt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return j_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class OFe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class FFe{constructor(e){this.key=e,this.va=!1}}class LFe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Jc(a=>tee(a),fI),this.Ma=new Map,this.xa=new Set,this.Oa=new vr(Xe.comparator),this.Na=new Map,this.La=new VV,this.Ba={},this.ka=new Map,this.qa=rp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function VFe(n,e){return AB.apply(this,arguments)}function AB(){return(AB=(0,O.A)(function*(n,e,t=!0){const r=Px(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield qte(r,e,t,!0),i})).apply(this,arguments)}function BFe(n,e){return SB.apply(this,arguments)}function SB(){return(SB=(0,O.A)(function*(n,e){const t=Px(n);yield qte(t,e,!0,!1)})).apply(this,arguments)}function qte(n,e,t,r){return xB.apply(this,arguments)}function xB(){return(xB=(0,O.A)(function*(n,e,t,r){const i=yield k_(n.localStore,Vs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield DB(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Rx(n.remoteStore,i),a})).apply(this,arguments)}function DB(n,e,t,r,i){return RB.apply(this,arguments)}function RB(){return RB=(0,O.A)(function*(n,e,t,r,i){n.Ka=(h,m,y)=>{return(b=(0,O.A)(function*(M,B,V,Q){let we=B.view.ma(V);we.ns&&(we=yield Tx(M.localStore,B.query,!1).then(({documents:L})=>B.view.ma(L,we)));const je=Q&&Q.targetChanges.get(B.targetId),He=Q&&null!=Q.targetMismatches.get(B.targetId),H=B.view.applyChanges(we,M.isPrimaryClient,je,He);return jB(M,B.targetId,H.wa),H.snapshot}),function T(M,B,V,Q){return b.apply(this,arguments)})(n,h,m,y);var b};const s=yield Tx(n.localStore,e,!0),o=new Gte(e,s.Ts),a=o.ma(s.documents),l=EI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);jB(n,t,c.wa);const u=new OFe(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),RB.apply(this,arguments)}function UFe(n,e,t){return MB.apply(this,arguments)}function MB(){return(MB=(0,O.A)(function*(n,e,t){const r=Ge(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!fI(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield N_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&F_(r.remoteStore,i.targetId),z_(r,i.targetId)}).catch(wd))):(z_(r,i.targetId),yield N_(r.localStore,i.targetId,!0))})).apply(this,arguments)}function jFe(n,e){return PB.apply(this,arguments)}function PB(){return(PB=(0,O.A)(function*(n,e){const t=Ge(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),F_(t.remoteStore,r.targetId))})).apply(this,arguments)}function kB(){return(kB=(0,O.A)(function*(n,e,t){const r=ZB(n);try{const i=yield function(o,a){const l=Ge(o),c=Br.now(),u=a.reduce((y,b)=>y.add(b.key),Yt());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Oo(),T=Yt();return l.cs.getEntries(y,u).next(M=>{b=M,b.forEach((B,V)=>{V.isValidDocument()||(T=T.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(M=>{h=M;const B=[];for(const V of a){const Q=pOe(V,h.get(V.key).overlayedDocument);null!=Q&&B.push(new eu(V.key,Q,BJ(Q.value.mapValue),jr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,B,a)}).next(M=>{m=M;const B=M.applyToLocalDocumentSet(h,T);return l.documentOverlayCache.saveOverlays(y,M.batchId,B)})}).then(()=>({batchId:m.batchId,changes:see(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new vr(Ft)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),yield nu(r,i.changes),yield L_(r.remoteStore)}catch(i){const s=B_(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function Kte(n,e){return NB.apply(this,arguments)}function NB(){return(NB=(0,O.A)(function*(n,e){const t=Ge(n);try{const r=yield function oFe(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((u,h)=>{const m=i.get(h);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,h)));let y=m.withSequenceNumber(s.currentSequenceNumber);var T,M,B;null!==e.targetMismatches.get(h)?y=y.withResumeToken(li.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,r)),i=i.insert(h,y),M=y,B=u,(0===(T=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,y))});let l=Oo(),c=Yt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(wte(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(ft.min())){const u=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return le.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ct(o.va):i.removedDocuments.size>0&&(ct(o.va),o.va=!1))}),yield nu(t,r,e)}catch(r){yield wd(r)}})).apply(this,arguments)}function Qte(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ge(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const m of h.j_)m.Z_(a)&&(c=!0)}),c&&wB(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function HFe(n,e,t){return OB.apply(this,arguments)}function OB(){return(OB=(0,O.A)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new vr(Xe.comparator);o=o.insert(s,Dr.newNoDocument(s,ft.min()));const a=Yt().add(s),l=new bI(ft.min(),new Map,new vr(Ft),o,a);yield Kte(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),zB(r)}else yield N_(r.localStore,e,!1).then(()=>z_(r,e,t)).catch(wd)})).apply(this,arguments)}function $Fe(n,e){return FB.apply(this,arguments)}function FB(){return(FB=(0,O.A)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield function sFe(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,m=h.keys();let y=le.resolve();return m.forEach(b=>{y=y.next(()=>u.getEntry(l,b)).next(T=>{const M=c.docVersions.get(b);ct(null!==M),T.version.compareTo(M)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),u.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Yt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);UB(t,r,null),BB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nu(t,i)}catch(i){yield wd(i)}})).apply(this,arguments)}function WFe(n,e,t){return LB.apply(this,arguments)}function LB(){return(LB=(0,O.A)(function*(n,e,t){const r=Ge(n);try{const i=yield function(o,a){const l=Ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ct(null!==h),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);UB(r,e,t),BB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nu(r,i)}catch(i){yield wd(i)}})).apply(this,arguments)}function VB(){return(VB=(0,O.A)(function*(n,e){const t=Ge(n);Od(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ge(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=B_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function BB(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function UB(n,e,t){const r=Ge(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function z_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Yte(n,r)})}function Yte(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(F_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),zB(n))}function jB(n,e,t){for(const r of t)r instanceof $te?(n.La.addReference(r.key,e),qFe(n,r)):r instanceof Wte?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Yte(n,r.key)):st()}function qFe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.xa.add(r),zB(n))}function zB(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Xe(yn.fromString(e)),r=n.qa.next();n.Na.set(r,new FFe(t)),n.Oa=n.Oa.insert(t,r),Rx(n.remoteStore,new tu(Vs(b_(t.path)),r,"TargetPurposeLimboResolution",ia.oe))}}function nu(n,e,t){return HB.apply(this,arguments)}function HB(){return HB=(0,O.A)(function*(n,e,t){const r=Ge(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:null===(u=t?.targetChanges.get(l.targetId))||void 0===u?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=HV.Wi(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,O.A)(function*(c,u){const h=Ge(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>le.forEach(u,y=>le.forEach(y.$i,b=>h.persistence.referenceDelegate.addReference(m,y.targetId,b)).next(()=>le.forEach(y.Ui,b=>h.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))}catch(m){if(!Cd(m))throw m;Le("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const y=m.targetId;if(!m.fromCache){const b=h.os.get(y),M=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);h.os=h.os.insert(y,M)}}}),function l(c,u){return a.apply(this,arguments)})(r.localStore,s))}),HB.apply(this,arguments)}function KFe(n,e){return $B.apply(this,arguments)}function $B(){return($B=(0,O.A)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield Ete(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(l=>{l.reject(new Ne(Ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nu(t,r.hs)}var s})).apply(this,arguments)}function QFe(n,e){const t=Ge(n),r=t.Na.get(e);if(r&&r.va)return Yt().add(r.key);{let i=Yt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function YFe(n,e){return WB.apply(this,arguments)}function WB(){return(WB=(0,O.A)(function*(n,e){const t=Ge(n),r=yield Tx(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&jB(t,e.targetId,i.wa),i})).apply(this,arguments)}function XFe(n,e){return GB.apply(this,arguments)}function GB(){return(GB=(0,O.A)(function*(n,e){const t=Ge(n);return Tte(t.localStore,e).then(r=>nu(t,r))})).apply(this,arguments)}function ZFe(n,e,t,r){return qB.apply(this,arguments)}function qB(){return(qB=(0,O.A)(function*(n,e,t,r){const i=Ge(n),s=yield function(a,l){const c=Ge(a),u=Ge(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Mn(h,l).next(m=>m?c.localDocuments.getDocuments(h,m):le.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield L_(i.remoteStore):"acknowledged"===t||"rejected"===t?(UB(i,e,r||null),BB(i,e),l=e,Ge(Ge(i.localStore).mutationQueue).On(l)):st(),yield nu(i,s)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function KB(){return(KB=(0,O.A)(function*(n,e){const t=Ge(n);if(Px(t),ZB(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Xte(t,r.toArray());t.Qa=!0,yield gB(t.remoteStore,!0);for(const s of i)Rx(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(z_(t,o),N_(t.localStore,o,!0))),F_(t.remoteStore,o)}),yield i,yield Xte(t,r),function(o){const a=Ge(o);a.Na.forEach((l,c)=>{F_(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new vr(Xe.comparator)}(t),t.Qa=!1,yield gB(t.remoteStore,!1)}})).apply(this,arguments)}function Xte(n,e,t){return QB.apply(this,arguments)}function QB(){return(QB=(0,O.A)(function*(n,e,t){const r=Ge(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&0!==l.length){a=yield k_(r.localStore,Vs(l[0]));for(const c of l){const u=r.Fa.get(c),h=yield YFe(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=yield Cte(r.localStore,o);a=yield k_(r.localStore,c),yield DB(r,Zte(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function Zte(n){return XJ(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function eLe(n){return t=Ge(n).localStore,Ge(Ge(t).persistence).Qi();var t}function tLe(n,e,t,r){return YB.apply(this,arguments)}function YB(){return(YB=(0,O.A)(function*(n,e,t,r){const i=Ge(n);if(i.Qa)return void Le("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield Tte(i.localStore,nee(s[0])),a=bI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,li.EMPTY_BYTE_STRING);yield nu(i,o,a);break}case"rejected":yield N_(i.localStore,e,!0),z_(i,e,r);break;default:st()}})).apply(this,arguments)}function nLe(n,e,t){return XB.apply(this,arguments)}function XB(){return(XB=(0,O.A)(function*(n,e,t){const r=Px(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Le("SyncEngine","Adding an already active target "+i);continue}const s=yield Cte(r.localStore,i),o=yield k_(r.localStore,s);yield DB(r,Zte(s),o.targetId,!1,o.resumeToken),Rx(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield N_(r.localStore,i,!1).then(()=>{F_(r.remoteStore,i),z_(r,i)}).catch(wd))}})).apply(this,arguments)}function Px(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kte.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QFe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HFe.bind(null,e),e.Ca.d_=MFe.bind(null,e.eventManager),e.Ca.$a=PFe.bind(null,e.eventManager),e}function ZB(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$Fe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WFe.bind(null,e),e}let H_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,O.A)(function*(){r.serializer=MI(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return bte(this.persistence,new vte,t.initialUser,this.serializer)}Ga(t){return new BV(Ix.Zr,this.serializer)}Wa(t){return new Dte}terminate(){var t=this;return(0,O.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class JB extends H_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,O.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield ZB(r.Ja.syncEngine),yield L_(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return bte(this.persistence,new vte,e.initialUser,this.serializer)}ja(e,t){return new ute(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new TNe(t,this.persistence);return new CNe(e.asyncQueue,r)}Ga(e){const t=zV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new jV(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Mte(),Dx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Dte}}class Jte extends JB{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,O.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof XV&&(r.sharedClientState.syncEngine={no:ZFe.bind(null,i),ro:tLe.bind(null,i),io:nLe.bind(null,i),Qi:eLe.bind(null,i),eo:XFe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,O.A)(function*(o){yield function JFe(n,e){return KB.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=Mte();if(!XV.D(t))throw new Ne(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new XV(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let $_=(()=>{class n{initialize(t,r){var i=this;return(0,O.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>Qte(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=KFe.bind(null,i.syncEngine),yield gB(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new RFe}createDatastore(t){const r=MI(t.databaseInfo.databaseId),i=new fFe(t.databaseInfo);return new gFe(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>Qte(this.syncEngine,r,0),l=Rte.D()?new Rte:new uFe,new yFe(i,s,o,a,l);var i,s,o,a,l}createSyncEngine(t,r){return function(s,o,a,l,c,u,h){const m=new LFe(s,o,a,l,c,u);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,O.A)(function*(){var r,i,s;yield(s=(0,O.A)(function*(a){const l=Ge(a);Le("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield O_(l),l.k_.shutdown(),l.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function ene(n,e=10240){let t=0;return{read:()=>(0,O.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,O.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class kx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class sLe{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new rs,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,O.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,O.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,O.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new kFe(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,O.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,O.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,O.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class oLe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,O.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ne(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,O.A)(function*(o,a){const l=Ge(o),c={documents:a.map(y=>II(l.serializer,y))},u=yield l.Lo("BatchGetDocuments",l.serializer.databaseId,yn.emptyPath(),c,a.length),h=new Map;u.forEach(y=>{const b=function wOe(n,e){return"found"in e?function(r,i){ct(!!i.found);const s=Xl(r,i.found.name),o=Ii(i.found.updateTime),a=i.found.createTime?Ii(i.found.createTime):ft.min(),l=new ms({mapValue:{fields:i.found.fields}});return Dr.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){ct(!!i.missing),ct(!!i.readTime);const s=Xl(r,i.missing),o=Ii(i.readTime);return Dr.newNoDocument(s,o)}(n,e):st()}(l.serializer,y);h.set(b.key.toString(),b)});const m=[];return a.forEach(y=>{const b=h.get(y.toString());ct(!!b),m.push(b)}),m}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new A_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,O.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Xe.fromPath(i);e.mutations.push(new EV(s,e.precondition(s)))}),yield(r=(0,O.A)(function*(s,o){const a=Ge(s),l={writes:o.map(c=>wI(a.serializer,c))};yield a.Mo("Commit",a.serializer.databaseId,yn.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ft.min())?jr.exists(!1):jr.updateTime(t):jr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ft.min()))throw new Ne(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jr.updateTime(t)}return jr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class aLe{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new JV(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,O.A)(function*(){const t=new oLe(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!sI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bee(t)}return!1}}class lLe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ns.UNAUTHENTICATED,this.clientId=dJ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,O.A)(function*(l){Le("FirestoreClient","Received user=",l.uid),yield o.authCredentialListener(l),o.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Le("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,O.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=B_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function eU(n,e){return tU.apply(this,arguments)}function tU(){return tU=(0,O.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,O.A)(function*(s){r.isEqual(s)||(yield Ete(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),tU.apply(this,arguments)}function tne(n,e){return nU.apply(this,arguments)}function nU(){return(nU=(0,O.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rU(n);Le("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Vte(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Vte(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function rU(n){return iU.apply(this,arguments)}function iU(){return(iU=(0,O.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield eU(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;na("Error using user provided cache. Falling back to memory cache: "+e),yield eU(n,new H_)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield eU(n,new H_);var i;return n._offlineComponents})).apply(this,arguments)}function Nx(n){return sU.apply(this,arguments)}function sU(){return(sU=(0,O.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield tne(n,n._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield tne(n,new $_))),n._onlineComponents})).apply(this,arguments)}function nne(n){return rU(n).then(e=>e.persistence)}function W_(n){return rU(n).then(e=>e.localStore)}function rne(n){return Nx(n).then(e=>e.remoteStore)}function oU(n){return Nx(n).then(e=>e.syncEngine)}function G_(n){return aU.apply(this,arguments)}function aU(){return(aU=(0,O.A)(function*(n){const e=yield Nx(n),t=e.eventManager;return t.onListen=VFe.bind(null,e.syncEngine),t.onUnlisten=UFe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BFe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jFe.bind(null,e.syncEngine),t})).apply(this,arguments)}function sne(n,e,t={}){const r=new rs;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function(s,o,a,l,c){const u=new kx({next:m=>{u.Za(),o.enqueueAndForget(()=>EB(s,h));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Ne(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&"server"===l.source?c.reject(new Ne(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new TB(b_(a.path),u,{includeMetadataChanges:!0,_a:!0});return vB(s,h)}(yield G_(n),n.asyncQueue,e,t,r)})),r.promise}function one(n,e,t={}){const r=new rs;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function(s,o,a,l,c){const u=new kx({next:m=>{u.Za(),o.enqueueAndForget(()=>EB(s,h)),m.fromCache&&"server"===l.source?c.reject(new Ne(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new TB(a,u,{includeMetadataChanges:!0,_a:!0});return vB(s,h)}(yield G_(n),n.asyncQueue,e,t,r)})),r.promise}function ane(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const lne=new Map;function lU(n,e,t){if(!t)throw new Ne(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cne(n,e,t,r){if(!0===e&&!0===r)throw new Ne(Ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function une(n){if(!Xe.isDocumentKey(n))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dne(n){if(Xe.isDocumentKey(n))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ox(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":st()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ox(n);throw new Ne(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hne(n,e){if(e<=0)throw new Ne(Ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class fne{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cne("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ane(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ne(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fne({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fne(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new hNe;switch(r.type){case"firstParty":return new gNe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,O.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=lne.get(t);r&&(Le("ComponentProvider","Removing Datastore"),lne.delete(t),r.terminate())}(this),Promise.resolve()}}class gs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}}class Zl extends gs{constructor(e,t,r){super(e,t,b_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new Xe(e))}withConverter(e){return new Zl(this.firestore,e,this._path)}}function mne(n,e,...t){if(n=(0,N.Ku)(n),lU("collection","path",e),n instanceof kI){const r=yn.fromString(e,...t);return dne(r),new Zl(n,null,r)}{if(!(n instanceof Rr||n instanceof Zl))throw new Ne(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return dne(r),new Zl(n.firestore,null,r)}}function Fx(n,e,...t){if(n=(0,N.Ku)(n),1===arguments.length&&(e=dJ.newId()),lU("doc","path",e),n instanceof kI){const r=yn.fromString(e,...t);return une(r),new Rr(n,null,new Xe(r))}{if(!(n instanceof Rr||n instanceof Zl))throw new Ne(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return une(r),new Rr(n.firestore,n instanceof Zl?n.converter:null,new Xe(r))}}function gne(n,e){return n=(0,N.Ku)(n),e=(0,N.Ku)(e),(n instanceof Rr||n instanceof Zl)&&(e instanceof Rr||e instanceof Zl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cU(n,e){return n=(0,N.Ku)(n),e=(0,N.Ku)(e),n instanceof gs&&e instanceof gs&&n.firestore===e.firestore&&fI(n._query,e._query)&&n.converter===e.converter}class _ne{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new JV(this,"async_queue_retry"),this.Vu=()=>{const r=Dx();r&&Le("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Dx();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Dx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new rs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,O.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Cd(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Ei("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=yB.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&st()}verifyOperationInProgress(){}wu(){var e=this;return(0,O.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function uU(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class ELe{constructor(){this._progressObserver={},this._taskCompletionResolver=new rs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends kI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new _ne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,O.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new _ne(t),e._firestoreClient=void 0,yield t}})()}}function zr(n){if(n._terminated)throw new Ne(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yne(n),n._firestoreClient}function yne(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new qNe(n._databaseId,l,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,ane(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lLe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function dU(){return(dU=(0,O.A)(function*(n){na("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();vne(n,$_.provider,{build:t=>new Jte(t,e.cacheSizeBytes)})})).apply(this,arguments)}function vne(n,e,t){if((n=un(n,ur))._firestoreClient||n._terminated)throw new Ne(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ne(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},yne(n)}class Jl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jl(li.fromBase64String(e))}catch(t){throw new Ne(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jl(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ru{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sp{constructor(e){this._methodName=e}}class Lx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}class Vx{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const PLe=/^__.*__$/;class kLe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new T_(e,this.data,t,this.fieldTransforms)}}class bne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ene(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Bx{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Ene(this.Cu)&&PLe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NLe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||MI(e)}Qu(e,t,r,i=!1){return new Bx({Cu:e,methodName:t,qu:r,path:xr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function op(n){const e=n._freezeSettings(),t=MI(n._databaseId);return new NLe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ux(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);yU("Data must be an object, but it was:",o,r);const a=Cne(r,o);let l,c;if(s.merge)l=new No(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const m=FI(e,h,t);if(!o.contains(m))throw new Ne(Ie.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Ane(u,m)||u.push(m)}l=new No(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new kLe(new ms(a),l,c)}class OI extends sp{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof OI}}function Ine(n,e,t){return new Bx({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hU extends sp{_toFieldTransform(e){return new _I(e.path,new w_)}isEqual(e){return e instanceof hU}}class fU extends sp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Ine(this,e,!0),r=this.Ku.map(s=>ap(s,t)),i=new Yf(r);return new _I(e.path,i)}isEqual(e){return e instanceof fU&&(0,N.bD)(this.Ku,e.Ku)}}class pU extends sp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Ine(this,e,!0),r=this.Ku.map(s=>ap(s,t)),i=new Xf(r);return new _I(e.path,i)}isEqual(e){return e instanceof pU&&(0,N.bD)(this.Ku,e.Ku)}}class mU extends sp{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new C_(e.serializer,lee(e.serializer,this.$u));return new _I(e.path,t)}isEqual(e){return e instanceof mU&&this.$u===e.$u}}function gU(n,e,t,r){const i=n.Qu(1,e,t);yU("Data must be an object, but it was:",i,r);const s=[],o=ms.empty();Td(r,(l,c)=>{const u=jx(e,l,t);c=(0,N.Ku)(c);const h=i.Nu(u);if(c instanceof OI)s.push(u);else{const m=ap(c,h);null!=m&&(s.push(u),o.set(u,m))}});const a=new No(s);return new bne(o,a,i.fieldTransforms)}function _U(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[FI(e,r,t)],l=[i];if(s.length%2!=0)throw new Ne(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(FI(e,s[m])),l.push(s[m+1]);const c=[],u=ms.empty();for(let m=a.length-1;m>=0;--m)if(!Ane(c,a[m])){const y=a[m];let b=l[m];b=(0,N.Ku)(b);const T=o.Nu(y);if(b instanceof OI)c.push(y);else{const M=ap(b,T);null!=M&&(c.push(y),u.set(y,M))}}const h=new No(c);return new bne(u,h,o.fieldTransforms)}function wne(n,e,t,r=!1){return ap(t,n.Qu(r?4:3,e))}function ap(n,e){if(Tne(n=(0,N.Ku)(n)))return yU("Unsupported field value:",e,n),Cne(n,e);if(n instanceof sp)return function(r,i){if(!Ene(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ap(a,i.Lu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,N.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return lee(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Br.fromDate(r);return{timestampValue:S_(i.serializer,s)}}if(r instanceof Br){const s=new Br(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:S_(i.serializer,s)}}if(r instanceof Lx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jl)return{bytesValue:Ree(i.serializer,r._byteString)};if(r instanceof Rr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:SV(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vx)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(l=>{if("number"!=typeof l)throw a.Bu("VectorValues must only contain numeric values.");return bV(a.serializer,l)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Ox(r)}`)}(n,e)}function Cne(n,e){const t={};return xJ(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Td(n,(r,i)=>{const s=ap(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Tne(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Br||n instanceof Lx||n instanceof Jl||n instanceof Rr||n instanceof sp||n instanceof Vx)}function yU(n,e,t){if(!Tne(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Ox(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function FI(n,e,t){if((e=(0,N.Ku)(e))instanceof ru)return e._internalPath;if("string"==typeof e)return jx(n,e);throw zx("Field path arguments must be of type string or ",n,!1,void 0,t)}const OLe=new RegExp("[~\\*/\\[\\]]");function jx(n,e,t){if(e.search(OLe)>=0)throw zx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ru(...e.split("."))._internalPath}catch{throw zx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zx(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ne(Ie.INVALID_ARGUMENT,a+n+l)}function Ane(n,e){return n.some(t=>t.isEqual(e))}class LI{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new FLe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class FLe extends LI{data(){return super.data()}}function Hx(n,e){return"string"==typeof e?jx(n,e):e instanceof ru?e._internalPath:e._delegate._internalPath}function Sne(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vU{}class VI extends vU{}function Ld(n,e,...t){let r=[];e instanceof vU&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof q_).length,a=s.filter(l=>l instanceof BI).length;if(o>1||o>0&&a>0)throw new Ne(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class BI extends VI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new BI(e,t,r)}_apply(e){const t=this._parse(e);return Mne(e._query,t),new gs(e.firestore,e.converter,yV(e._query,t))}_parse(e){const t=op(e.firestore);return function(s,o,a,l,c,u,h){let m;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){Rne(h,u);const y=[];for(const b of h)y.push(Dne(l,s,b));m={arrayValue:{values:y}}}else m=Dne(l,s,h)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||Rne(h,u),m=wne(a,"where",h,"in"===u||"not-in"===u);return vn.create(c,u,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class q_ extends vU{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new q_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Mne(o,l),o=yV(o,l)}(e._query,t),new gs(e.firestore,e.converter,yV(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bU extends VI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bU(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Ne(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ne(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dI(s,o)}(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class $x extends VI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new $x(e,t,r)}_apply(e){return new gs(e.firestore,e.converter,lx(e._query,this._limit,this._limitType))}}class Wx extends VI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Wx(e,t,r)}_apply(e){const t=xne(e,this.type,this._docOrFields,this._inclusive);return new gs(e.firestore,e.converter,(s=t,new Zc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Gx extends VI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Gx(e,t,r)}_apply(e){const t=xne(e,this.type,this._docOrFields,this._inclusive);return new gs(e.firestore,e.converter,(s=t,new Zc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function xne(n,e,t,r){if(t[0]=(0,N.Ku)(t[0]),t[0]instanceof LI)return function(s,o,a,l,c){if(!l)throw new Ne(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of E_(s))if(h.field.isKeyField())u.push(Kf(o,l.key));else{const m=l.data.field(h.field);if(ex(m))throw new Ne(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=h.field.canonicalString();throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}u.push(m)}return new Rd(u,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=op(n.firestore);return function(o,a,l,c,u,h){const m=o.explicitOrderBy;if(u.length>m.length)throw new Ne(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let b=0;b<u.length;b++){const T=u[b];if(m[b].field.isKeyField()){if("string"!=typeof T)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!_V(o)&&-1!==T.indexOf("/"))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const M=o.path.child(yn.fromString(T));if(!Xe.isDocumentKey(M))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const B=new Xe(M);y.push(Kf(a,B))}else{const M=wne(l,c,T);y.push(M)}}return new Rd(y,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Dne(n,e,t){if("string"==typeof(t=(0,N.Ku)(t))){if(""===t)throw new Ne(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_V(e)&&-1!==t.indexOf("/"))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yn.fromString(t));if(!Xe.isDocumentKey(r))throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kf(n,new Xe(r))}if(t instanceof Rr)return Kf(n,t._key);throw new Ne(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ox(t)}.`)}function Rne(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mne(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(Ie.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class EU{convertValue(e,t="none"){switch(xd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Td(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Ur(o.doubleValue));return new Vx(s)}convertGeoPoint(e){return new Lx(Ur(e.latitude),Ur(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tx(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(aI(e));default:return null}}convertTimestamp(e){const t=Yc(e);return new Br(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yn.fromString(e);ct(zee(r));const i=new Ad(r.get(1),r.get(3)),s=new Xe(r.popFirst(5));return i.isEqual(t)||Ei(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function qx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class WLe extends EU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,t)}}class lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iu extends LI{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new UI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Hx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class UI extends iu{data(e={}){return super.data(e)}}class Vd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new UI(this._firestore,this._userDataWriter,r.key,r,new lp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new UI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lp(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new UI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lp(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:qLe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qLe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function kne(n,e){return n instanceof iu&&e instanceof iu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Vd&&e instanceof Vd&&n._firestore===e._firestore&&cU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bd extends EU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,t)}}function Nne(n,e,t){n=un(n,Rr);const r=un(n.firestore,ur),i=qx(n.converter,e,t);return K_(r,[Ux(op(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,jr.none())])}function One(n,e,t,...r){n=un(n,Rr);const i=un(n.firestore,ur),s=op(i);let o;return o="string"==typeof(e=(0,N.Ku)(e))||e instanceof ru?_U(s,"updateDoc",n._key,e,t,r):gU(s,"updateDoc",n._key,e),K_(i,[o.toMutation(n._key,jr.exists(!0))])}function Fne(n,...e){var t,r,i;n=(0,N.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||uU(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(uU(e[o])){const h=e[o];e[o]=null===(t=h.next)||void 0===t?void 0:t.bind(h),e[o+1]=null===(r=h.error)||void 0===r?void 0:r.bind(h),e[o+2]=null===(i=h.complete)||void 0===i?void 0:i.bind(h)}let l,c,u;if(n instanceof Rr)c=un(n.firestore,ur),u=b_(n._key.path),l={next:h=>{e[o]&&e[o](IU(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=un(n,gs);c=un(h.firestore,ur),u=h._query;const m=new Bd(c);l={next:y=>{e[o]&&e[o](new Vd(c,m,h,y))},error:e[o+1],complete:e[o+2]},Sne(n._query)}return function(m,y,b,T){const M=new kx(T),B=new TB(y,M,b);return m.asyncQueue.enqueueAndForget((0,O.A)(function*(){return vB(yield G_(m),B)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget((0,O.A)(function*(){return EB(yield G_(m),B)}))}}(zr(c),u,a,l)}function K_(n,e){return function(r,i){const s=new rs;return r.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function zFe(n,e,t){return kB.apply(this,arguments)}(yield oU(r),i,s)})),s.promise}(zr(n),e)}function IU(n,e,t){const r=t.docs.get(e._key),i=new Bd(n);return new iu(n,i,e._key,r,new lp(t.hasPendingWrites,t.fromCache),e.converter)}const d2e={maxAttempts:5};class Lne{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=op(e)}set(e,t,r){this._verifyNotCommitted();const i=Ud(e,this._firestore),s=qx(i.converter,t,r),o=Ux(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,jr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ud(e,this._firestore);let o;return o="string"==typeof(t=(0,N.Ku)(t))||t instanceof ru?_U(this._dataReader,"WriteBatch.update",s._key,t,r,i):gU(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,jr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ud(e,this._firestore);return this._mutations=this._mutations.concat(new A_(t._key,jr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ud(n,e){if((n=(0,N.Ku)(n)).firestore!==e)throw new Ne(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class h2e extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=op(t)}get(t){const r=Ud(t,this._firestore),i=new WLe(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return st();const o=s[0];if(o.isFoundDocument())return new LI(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new LI(this._firestore,i,r._key,null,r.converter);throw st()})}set(t,r,i){const s=Ud(t,this._firestore),o=qx(s.converter,r,i),a=Ux(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Ud(t,this._firestore);let a;return a="string"==typeof(r=(0,N.Ku)(r))||r instanceof ru?_U(this._dataReader,"Transaction.update",o._key,r,i,s):gU(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Ud(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ud(e,this._firestore),r=new Bd(this._firestore);return super.get(e).then(i=>new iu(this._firestore,r,t._key,i._document,new lp(!1,!1),t.converter))}}function CU(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jne(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function zne(){if(!function WNe(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){h_=$n.SDK_VERSION,(0,$n._registerComponent)(new Jo.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ur(new pNe(r.getProvider("auth-internal")),new _Ne(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ne(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ad(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(lJ,"4.7.3",e),(0,$n.registerVersion)(lJ,"4.7.3","esm2017")}();class jI{constructor(e){this._delegate=e}static fromBase64String(e){return zne(),new jI(Jl.fromBase64String(e))}static fromUint8Array(e){return jne(),new jI(Jl.fromUint8Array(e))}toBase64(){return zne(),this._delegate.toBase64()}toUint8Array(){return jne(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TU(n){return function I2e(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class w2e{enableIndexedDbPersistence(e,t){return function wLe(n,e){na("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return vne(n,$_.provider,{build:r=>new JB(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function CLe(n){return dU.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function TLe(n){if(n._initialized&&!n._terminated)throw new Ne(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new rs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,O.A)(function*(){try{yield(t=(0,O.A)(function*(i){if(!ql.D())return Promise.resolve();const s=i+"main";yield ql.delete(s)}),function r(i){return t.apply(this,arguments)})(zV(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Hne{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ad||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&na("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function pne(n,e,t,r={}){var i;const s=(n=un(n,kI))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=ns.MOCK_USER;else{a=(0,N.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ne(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ns(c)}n._authCredentials=new fNe(new cJ(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function SLe(n){return function cLe(n){return n.asyncQueue.enqueue((0,O.A)(function*(){const e=yield nne(n),t=yield rne(n);return e.setNetworkEnabled(!0),function(i){const s=Ge(i);return s.L_.delete(0),PI(s)}(t)}))}(zr(n=un(n,ur)))}(this._delegate)}disableNetwork(){return function xLe(n){return function uLe(n){return n.asyncQueue.enqueue((0,O.A)(function*(){const e=yield nne(n),t=yield rne(n);return e.setNetworkEnabled(!1),(r=(0,O.A)(function*(s){const o=Ge(s);o.L_.add(0),yield O_(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(zr(n=un(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cne("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ALe(n){return function(t){const r=new rs;return t.asyncQueue.enqueueAndForget((0,O.A)(function*(){return function GFe(n,e){return VB.apply(this,arguments)}(yield oU(t),r)})),r.promise}(zr(n=un(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function n2e(n,e){return function pLe(n,e){const t=new kx(e);return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return i=yield G_(n),s=t,Ge(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return i=yield G_(n),s=t,void Ge(i).Y_.delete(s);var i,s}))}}(zr(n=un(n,ur)),uU(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Q_(this,mne(this._delegate,e))}catch(t){throw oo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ma(this,Fx(this._delegate,e))}catch(t){throw oo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ao(this,function bLe(n,e){if(n=un(n,kI),lU("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(Ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(n,null,(r=e,new Zc(yn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw oo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function f2e(n,e,t){n=un(n,ur);const r=Object.assign(Object.assign({},d2e),t);return function(s){if(s.maxAttempts<1)throw new Ne(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new rs;return s.asyncQueue.enqueueAndForget((0,O.A)(function*(){const c=yield function ine(n){return Nx(n).then(e=>e.datastore)}(s);new aLe(s.asyncQueue,c,a,o,l).au()})),l.promise}(zr(n),i=>e(new h2e(n,i)),r)}(this._delegate,t=>e(new $ne(this,t)))}batch(){return zr(this._delegate),new Wne(new Lne(this._delegate,e=>K_(this._delegate,e)))}loadBundle(e){return function DLe(n,e){const t=zr(n=un(n,ur)),r=new ELe;return function mLe(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?Iee().encode(o):o,u=function(u,h){if(u instanceof Uint8Array)return ene(u,h);if(u instanceof ArrayBuffer)return ene(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new sLe(u,a);var u}(t,MI(e));n.asyncQueue.enqueueAndForget((0,O.A)(function*(){!function rLe(n,e,t){const r=Ge(n);var i;(i=(0,O.A)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(b,T){const M=Ge(b),B=Ii(T.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",V=>M.Gr.getBundleMetadata(V,T.id)).then(V=>!!V&&V.createTime.compareTo(B)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(b=c).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);l._updateProgress(Hte(c));const u=new NFe(c,o.localStore,a.serializer);let h=yield a.Ua();for(;h;){const y=yield u.la(h);y&&l._updateProgress(y),h=yield a.Ua()}const m=yield u.complete();return yield nu(o,m.Ia,void 0),yield function(b,T){const M=Ge(b);return M.persistence.runTransaction("Save bundle","readwrite",B=>M.Gr.saveBundleMetadata(B,T))}(o.localStore,c),l._completeWith(m.progress),Promise.resolve(m.Pa)}catch(c){return na("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var b}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield oU(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function RLe(n,e){return function gLe(n,e){return n.asyncQueue.enqueue((0,O.A)(function*(){return function(r,i){const s=Ge(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield W_(n),e)}))}(zr(n=un(n,ur)),e).then(t=>t?new gs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ao(this,t):null)}}class Qx extends EU{constructor(e){super(),this.firestore=e}convertBytes(e){return new jI(new Jl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ma.forKey(t,this.firestore,null)}}class $ne{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Qx(e)}get(e){const t=up(e);return this._delegate.get(t).then(r=>new zI(this._firestore,new iu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=up(e);return r?(CU("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=up(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=up(e);return this._delegate.delete(t),this}}class Wne{constructor(e){this._delegate=e}set(e,t,r){const i=up(e);return r?(CU("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=up(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=up(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new UI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new HI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=cp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new cp(e,new Qx(e),t),i.set(t,s)),s}}cp.INSTANCES=new WeakMap;class Ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Qx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ma(t,new Rr(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new Ma(t,new Rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Q_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Q_(this.firestore,mne(this._delegate,e))}catch(t){throw oo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.Ku)(e))instanceof Rr&&gne(this._delegate,e)}set(e,t){t=CU("DocumentReference.set",t);try{return t?Nne(this._delegate,e,t):Nne(this._delegate,e)}catch(r){throw oo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?One(this._delegate,e):One(this._delegate,e,t,...r)}catch(i){throw oo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function e2e(n){return K_(un(n.firestore,ur),[new A_(n._key,jr.none())])}(this._delegate)}onSnapshot(...e){const t=Gne(e),r=qne(e,i=>new zI(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Fne(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function QLe(n){n=un(n,Rr);const e=un(n.firestore,ur),t=zr(e),r=new Bd(e);return function dLe(n,e){const t=new rs;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return(r=(0,O.A)(function*(s,o,a){try{const l=yield function(u,h){const m=Ge(u);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,h))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Ne(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=B_(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield W_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new iu(e,r,n._key,i,new lp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function YLe(n){n=un(n,Rr);const e=un(n.firestore,ur);return sne(zr(e),n._key,{source:"server"}).then(t=>IU(e,n,t))}(this._delegate):function KLe(n){n=un(n,Rr);const e=un(n.firestore,ur);return sne(zr(e),n._key).then(t=>IU(e,n,t))}(this._delegate),t.then(r=>new zI(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ma(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function oo(n,e,t){return n.message=n.message.replace(e,t),n}function Gne(n){for(const e of n)if("object"==typeof e&&!TU(e))return e;return{}}function qne(n,e){var t,r;let i;return i=TU(n[0])?n[0]:TU(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class zI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kne(this._delegate,e._delegate)}}class HI extends zI{data(e){const t=this._delegate.data(e);return this._delegate._converter||function dNe(n){n||st()}(void 0!==t),t}}class ao{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Qx(e)}where(e,t,r){try{return new ao(this.firestore,Ld(this._delegate,function LLe(n,e,t){const r=e,i=Hx("where",n);return BI._create(i,r,t)}(e,t,r)))}catch(i){throw oo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ao(this.firestore,Ld(this._delegate,function VLe(n,e="asc"){const t=e,r=Hx("orderBy",n);return bU._create(r,t)}(e,t)))}catch(r){throw oo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ao(this.firestore,Ld(this._delegate,function BLe(n){return hne("limit",n),$x._create("limit",n,"F")}(e)))}catch(t){throw oo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ao(this.firestore,Ld(this._delegate,function ULe(n){return hne("limitToLast",n),$x._create("limitToLast",n,"L")}(e)))}catch(t){throw oo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ao(this.firestore,Ld(this._delegate,function jLe(...n){return Wx._create("startAt",n,!0)}(...e)))}catch(t){throw oo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ao(this.firestore,Ld(this._delegate,function zLe(...n){return Wx._create("startAfter",n,!1)}(...e)))}catch(t){throw oo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ao(this.firestore,Ld(this._delegate,function HLe(...n){return Gx._create("endBefore",n,!1)}(...e)))}catch(t){throw oo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ao(this.firestore,Ld(this._delegate,function $Le(...n){return Gx._create("endAt",n,!0)}(...e)))}catch(t){throw oo(t,"endAt()","Query.endAt()")}}isEqual(e){return cU(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ZLe(n){n=un(n,gs);const e=un(n.firestore,ur),t=zr(e),r=new Bd(e);return function hLe(n,e){const t=new rs;return n.asyncQueue.enqueueAndForget((0,O.A)(function*(){return(r=(0,O.A)(function*(s,o,a){try{const l=yield Tx(s,o,!0),c=new Gte(o,l.Ts),u=c.ma(l.documents),h=c.applyChanges(u,!1);a.resolve(h.snapshot)}catch(l){const c=B_(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield W_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Vd(e,r,n,i))}(this._delegate):"server"===e?.source?function JLe(n){n=un(n,gs);const e=un(n.firestore,ur),t=zr(e),r=new Bd(e);return one(t,n._query,{source:"server"}).then(i=>new Vd(e,r,n,i))}(this._delegate):function XLe(n){n=un(n,gs);const e=un(n.firestore,ur),t=zr(e),r=new Bd(e);return Sne(n._query),one(t,n._query).then(i=>new Vd(e,r,n,i))}(this._delegate),t.then(r=>new AU(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Gne(e),r=qne(e,i=>new AU(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Fne(this._delegate,t,r)}withConverter(e){return new ao(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}class T2e{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new HI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AU{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ao(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new HI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new T2e(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new HI(this._firestore,r))})}isEqual(e){return kne(this._delegate,e._delegate)}}class Q_ extends ao{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ma(this.firestore,e):null}doc(e){try{return new Ma(this.firestore,void 0===e?Fx(this._delegate):Fx(this._delegate,e))}catch(t){throw oo(t,"doc()","CollectionReference.doc()")}}add(e){return function t2e(n,e){const t=un(n.firestore,ur),r=Fx(n),i=qx(n.converter,e);return K_(t,[Ux(op(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,jr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ma(this.firestore,t))}isEqual(e){return gne(this._delegate,e._delegate)}withConverter(e){return new Q_(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function up(n){return un(n,Rr)}class SU{constructor(...e){this._delegate=new ru(...e)}static documentId(){return new SU(xr.keyField().canonicalString())}isEqual(e){return(e=(0,N.Ku)(e))instanceof ru&&this._delegate._internalPath.isEqual(e._internalPath)}}class dp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function m2e(){return new hU("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dp(e)}static delete(){const e=function p2e(){return new OI("deleteField")}();return e._methodName="FieldValue.delete",new dp(e)}static arrayUnion(...e){const t=function g2e(...n){return new fU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dp(t)}static arrayRemove(...e){const t=function _2e(...n){return new pU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dp(t)}static increment(e){const t=function y2e(n){return new mU("increment",n)}(e);return t._methodName="FieldValue.increment",new dp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const A2e={Firestore:Hne,GeoPoint:Lx,Timestamp:Br,Blob:jI,Transaction:$ne,WriteBatch:Wne,DocumentReference:Ma,DocumentSnapshot:zI,Query:ao,QueryDocumentSnapshot:HI,QuerySnapshot:AU,CollectionReference:Q_,FieldPath:SU,FieldValue:dp,setLogLevel:function C2e(n){!function uNe(n){Id.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Kne(n,e){return function D2e(n,e=vf){return new Ut(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function xU(n,e){return Kne(n,e).pipe(Be(t=>({payload:t,type:"query"})))}!function x2e(n){(function S2e(n,e){n.INTERNAL.registerComponent(new Jo.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},A2e)))})(n,(e,t)=>new Hne(e,t,new w2e)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Gl.A);class Qne{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Jne(r,t);return new Zne(i,s,this.afs)}snapshotChanges(){return function R2e(n,e){return Kne(n,e).pipe(nl(void 0),nV(),Be(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zi)}valueChanges(e={}){return this.snapshotChanges().pipe(Be(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return Wn(this.ref.get(e)).pipe(zi)}}function Yx(n,e){return xU(n,e).pipe(nl(void 0),nV(),Be(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(h=>h.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function Yne(n,e,t){return Yx(n,t).pipe(bg((r,i)=>function M2e(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function P2e(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return DU(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return DU(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return DU(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),RA(),Be(r=>r.map(i=>({type:i.type,payload:i}))))}function DU(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Xne(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Zne{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Yx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Be(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(nl(void 0),nV(),Yr(([r,i])=>i.length>0||!r),Be(([,r])=>r),zi)}auditTrail(e){return this.stateChanges(e).pipe(bg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Xne(e);return Yne(this.query,t,this.afs.schedulers.outsideAngular).pipe(zi)}valueChanges(e={}){return xU(this.query,this.afs.schedulers.outsideAngular).pipe(Be(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),zi)}get(e){return Wn(this.query.get(e)).pipe(zi)}add(e){return this.ref.add(e)}doc(e){return new Qne(this.ref.doc(e),this.afs)}}class k2e{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Yx(this.query,this.afs.schedulers.outsideAngular).pipe(Be(t=>t.filter(r=>e.indexOf(r.type)>-1)),Yr(t=>t.length>0),zi):Yx(this.query,this.afs.schedulers.outsideAngular).pipe(zi)}auditTrail(e){return this.stateChanges(e).pipe(bg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Xne(e);return Yne(this.query,t,this.afs.schedulers.outsideAngular).pipe(zi)}valueChanges(e={}){return xU(this.query,this.afs.schedulers.outsideAngular).pipe(Be(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),zi)}get(e){return Wn(this.query.get(e)).pipe(zi)}}const N2e=new Ee("angularfire2.enableFirestorePersistence"),O2e=new Ee("angularfire2.firestore.persistenceSettings"),F2e=new Ee("angularfire2.firestore.settings"),L2e=new Ee("angularfire2.firestore.use-emulator");function Jne(n,e=t=>t){return{query:e(n),ref:n}}let V2e=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,u,h,m,y,b,T,M,B,V){this.schedulers=l;const Q=qS(t,a,r),we=u;h&&tV(Q,a,m,b,T,M,y,B),[this.firestore,this.persistenceEnabled$]=G2(`${Q.name}.firestore`,"AngularFirestore",Q.name,()=>{const je=a.runOutsideAngular(()=>Q.firestore());if(s&&je.settings(s),we&&je.useEmulator(...we),i&&!wT(o)){const He=()=>{try{return Wn(je.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(H){return typeof console<"u"&&console.warn(H),Qe(!1)}};return[je,a.runOutsideAngular(He)]}return[je,Qe(!1)]},[s,we,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Jne(i,r),a=this.schedulers.ngZone.run(()=>s);return new Zne(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new k2e(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Qne(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Re(JE),Re(eI,8),Re(N2e,8),Re(F2e,8),Re(Ys),Re(yt),Re(jg),Re(O2e,8),Re(L2e,8),Re(tI,8),Re(Q2,8),Re(Y2,8),Re(X2,8),Re(Z2,8),Re(J2,8),Re(eV,8),Re(VA,8))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),ere=(()=>{class n{constructor(){this.storesSubject=new F([]),this.stores$=this.storesSubject.asObservable(),this.isLocationSearchSubject=new F(!0),this.isLocationSearch$=this.isLocationSearchSubject.asObservable()}setStores(t){this.storesSubject.next(t)}getStores(){return this.storesSubject.getValue()}setIsUserLocationSearch(t){this.isLocationSearchSubject.next(t)}getIsUserLocationSearch(){return this.isLocationSearchSubject.getValue()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const B2e=["determinateSpinner"];function U2e(n,e){if(1&n&&(us(),ue(0,"svg",11),Et(1,"circle",12),pe()),2&n){const t=Pe();er("viewBox",t._viewBox()),de(),Kv("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),er("r",t._circleRadius())}}const j2e=new Ee("mat-progress-spinner-default-options",{providedIn:"root",factory:function z2e(){return{diameter:tre}}}),tre=100;let $2e=(()=>{class n{_elementRef=k(jn);_noopAnimations;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";_determinateCircle;constructor(){const t=k(Tl,{optional:!0}),r=k(j2e);this._noopAnimations="NoopAnimations"===t&&!!r&&!r._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}_value=0;get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}_diameter=tre;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,i){if(1&r&&Hu(B2e,5),2&r){let s;Js(s=eo())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,i){2&r&&(er("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),Xh("mat-"+i.color),Kv("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),Lr("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",H1],diameter:[2,"diameter","diameter",H1],strokeWidth:[2,"strokeWidth","strokeWidth",H1]},exportAs:["matProgressSpinner"],standalone:!0,features:[xl,si],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,i){if(1&r&&(ot(0,U2e,2,8,"ng-template",null,0,qC),ue(2,"div",2,1),us(),ue(4,"svg",3),Et(5,"circle",4),pe()(),kh(),ue(6,"div",5)(7,"div",6)(8,"div",7),rg(9,8),pe(),ue(10,"div",9),rg(11,8),pe(),ue(12,"div",10),rg(13,8),pe()()()),2&r){const s=sg(1);de(4),er("viewBox",i._viewBox()),de(),Kv("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),er("r",i._circleRadius()),de(4),Me("ngTemplateOutlet",s),de(2),Me("ngTemplateOutlet",s),de(2),Me("ngTemplateOutlet",s)}},dependencies:[S7],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return n})(),nre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr]})}return n})();const X2e=new Ee("MatFormField");let $I=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr,pK,lr]})}return n})();function rre(n,e){return e?t=>Rb(e.pipe(Zi(1),function Z2e(){return ye((n,e)=>{n.subscribe(Fe(e,vs))})}()),t.pipe(rre(n))):Xi((t,r)=>n(t,r).pipe(Zi(1),K8(t)))}const eVe=["panel"],tVe=["*"];function nVe(n,e){if(1&n){const t=Ti();ue(0,"div",1,0),kt("@panelAnimation.done",function(i){return hn(t),fn(Pe()._animationDone.next(i))}),Yi(2),pe()}if(2&n){const t=e.id,r=Pe();Xh(r._classList),Lr("mat-mdc-autocomplete-visible",r.showPanel)("mat-mdc-autocomplete-hidden",!r.showPanel)("mat-primary","primary"===r._color)("mat-accent","accent"===r._color)("mat-warn","warn"===r._color),Me("id",r.id)("@panelAnimation",r.isOpen?"visible":"hidden"),er("aria-label",r.ariaLabel||null)("aria-labelledby",r._getPanelAriaLabelledby(t))}}const rVe=Tf("panelAnimation",[Af("void, hidden",Di({opacity:0,transform:"scaleY(0.8)"})),al(":enter, hidden => visible",[JN([ol("0.03s linear",Di({opacity:1})),ol("0.12s cubic-bezier(0, 0, 0.2, 1)",Di({transform:"scaleY(1)"}))])]),al(":leave, visible => hidden",[ol("0.075s linear",Di({opacity:0}))])]);class iVe{source;option;constructor(e,t){this.source=e,this.option=t}}const ire=new Ee("mat-autocomplete-default-options",{providedIn:"root",factory:function sVe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let oVe=(()=>{class n{_changeDetectorRef=k(Ea);_elementRef=k(jn);_defaults=k(ire);_activeOptionChanges=Dt.EMPTY;_animationDone=new pn;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(t){this._color=t,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new pn;opened=new pn;closed=new pn;optionActivated=new pn;set classList(t){this._classList=t,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}id=k(wf).getId("mat-autocomplete-");inertGroups;constructor(){const t=k(Ns);this.inertGroups=t?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new hTe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const r=new iVe(this,t);this.optionSelected.emit(r)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_skipPredicate(){return!1}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(r,i,s){if(1&r&&(zu(s,tQ,5),zu(s,JK,5)),2&r){let o;Js(o=eo())&&(i.options=o),Js(o=eo())&&(i.optionGroups=o)}},viewQuery:function(r,i){if(1&r&&(Hu(ya,7),Hu(eVe,5)),2&r){let s;Js(s=eo())&&(i.template=s.first),Js(s=eo())&&(i.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",oi],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",oi],requireSelection:[2,"requireSelection","requireSelection",oi],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",oi],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",oi]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[sr([{provide:ZK,useExisting:n}]),xl,si],ngContentSelectors:tVe,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(r,i){1&r&&(Ya(),ot(0,nVe,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[rVe]},changeDetection:0})}return n})();const aVe={provide:el,useExisting:Qn(()=>ore),multi:!0},sre=new Ee("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(hs);return()=>n.scrollStrategies.reposition()}}),cVe={provide:sre,deps:[hs],useFactory:function lVe(n){return()=>n.scrollStrategies.reposition()}};let ore=(()=>{class n{_injector=k(Rn);_element=k(jn);_overlay=k(hs);_viewContainerRef=k(xo);_zone=k(yt);_changeDetectorRef=k(Ea);_dir=k(Og,{optional:!0});_formField=k(X2e,{optional:!0,host:!0});_document=k(_n);_viewportRuler=k(DN);_scrollStrategy=k(sre);_renderer=k(qa);_defaults=k(ire,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new E;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=Dt.EMPTY;_breakpointObserver=k(gK);_handsetLandscapeSubscription=Dt.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new E;_windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&BN(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return sl(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Yr(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Yr(()=>this._overlayAttached)):Qe()).pipe(Be(t=>t instanceof eQ?t:null))}optionSelections=Mb(()=>{const t=this.autocomplete?this.autocomplete.options:null;return t?t.changes.pipe(nl(t),Qt(()=>sl(...t.map(r=>r.onSelectionChange)))):this._initialized.pipe(Qt(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Ut(t=>{const r=s=>{const o=Vl(s),a=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,l=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&o!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!a||!a.contains(o))&&(!l||!l.contains(o))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(o)&&t.next(s)},i=[this._renderer.listen("document","click",r),this._renderer.listen("document","auxclick",r),this._renderer.listen("document","touchend",r)];return()=>{i.forEach(s=>s())}})}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const r=t.keyCode,i=nd(t);if(27===r&&!i&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===r&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===r||40===r;9===r||o&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let r=t.target,i=r.value;if("number"===r.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),i){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&i!==this._getDisplayValue(s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===t.target){const s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const t=new Ut(i=>{Dc(()=>{i.next()},{injector:this._injector})}),r=this.autocomplete.options.changes.pipe(ai(()=>this._positionStrategy.reapplyLastPosition()),function J2e(n,e=vf){const t=nK(n,e);return rre(()=>t)}(0));return sl(t,r).pipe(Qt(()=>this._zone.run(()=>{const i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Zi(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(t){const r=this.autocomplete;return r&&r.displayWith?r.displayWith(t):t}_assignOptionValue(t){const r=this._getDisplayValue(t);null==t&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(r??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const r=this.autocomplete,i=t?t.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),r._emitSelectEvent(i),this._element.nativeElement.focus()):r.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),r._animationDone?r._animationDone.pipe(Zi(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,r){this.autocomplete?.options?.forEach(i=>{i!==t&&i.selected&&i.deselect(r)})}_openPanelInternal(t=this._element.nativeElement.value){this._attachOverlay(t),this._floatLabel(),this._trackedModal&&vK(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(t){let r=this._overlayRef;r?(this._positionStrategy.setOrigin(this._getConnectedElement()),r.updateSize({width:this._getPanelWidth()})):(this._portal=new AA(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),r=this._overlay.create(this._getOverlayConfig()),this._overlayRef=r,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&r&&r.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe("(max-width: 959.98px) and (orientation: landscape)").subscribe(s=>{s.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),r&&!r.hasAttached()&&(r.attach(this._portal),this._valueOnAttach=t,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=t=>{(27===t.keyCode&&!nd(t)||38===t.keyCode&&nd(t,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),t.stopPropagation(),t.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new NA({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const r=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}];let o;o="above"===this.position?s:"below"===this.position?r:[...r,...s],t.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let r=-1;for(let i=0;i<t.options.length;i++)if(!t.options.get(i).disabled){r=i;break}t._keyManager.setActiveItem(r)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_scrollToOption(t){const r=this.autocomplete,i=function yAe(n,e,t){if(t.length){let r=e.toArray(),i=t.toArray(),s=0;for(let o=0;o<n+1;o++)r[o].group&&r[o].group===i[s]&&s++;return s}return 0}(t,r.options,r.optionGroups);if(0===t&&1===i)r._setScrollTop(0);else if(r.panel){const s=r.options.toArray()[t];if(s){const o=s._getHostElement(),a=function vAe(n,e,t,r){return n<t?n:n+e>t+r?Math.max(0,n-r+e):t}(o.offsetTop,o.offsetHeight,r._getScrollTop(),r.panel.nativeElement.offsetHeight);r._setScrollTop(a)}}}_trackedModal=null;_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const r=this.autocomplete.id;this._trackedModal&&BN(this._trackedModal,"aria-owns",r),vK(t,"aria-owns",r),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(BN(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(r,i){1&r&&kt("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(o){return i._handleInput(o)})("keydown",function(o){return i._handleKeydown(o)})("click",function(){return i._handleClick()}),2&r&&er("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",oi]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[sr([aVe]),xl,cs]})}return n})(),uVe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[cVe],imports:[Jb,Vg,lr,Xb,Vg,lr]})}return n})(),dVe=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||n)(De(Bg),De(iO))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-image-dialog"]],decls:4,vars:1,consts:[[1,"dialog-container"],[1,"dialog-image",3,"src"],["mat-icon-button","",1,"close-button",3,"click"]],template:function(r,i){1&r&&(ue(0,"div",0),Et(1,"img",1),ue(2,"button",2),kt("click",function(){return i.closeDialog()}),Ke(3," \u2716 "),pe()()),2&r&&(de(),Me("src",i.data.image,ii))},styles:['@charset "UTF-8";.dialog-container[_ngcontent-%COMP%]{position:relative;padding:20px;display:flex;justify-content:center;align-items:center;background:transparent}.dialog-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;border-radius:8px}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#f4efe6;color:#a18249;border:none;cursor:pointer;font-size:18px;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px #0003;transition:background .3s ease,transform .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:#ede3d4;transform:scale(1.1)}']})}}return n})();function su(n){return Array.isArray?Array.isArray(n):"[object Array]"===cre(n)}function ec(n){return"string"==typeof n}function are(n){return"number"==typeof n}function lre(n){return"object"==typeof n}function sa(n){return null!=n}function RU(n){return!n.trim().length}function cre(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const bVe=n=>`Missing ${n} property in key`,EVe=n=>`Property 'weight' in key '${n}' must be a positive integer`,ure=Object.prototype.hasOwnProperty;class IVe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=dre(r);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dre(n){let e=null,t=null,r=null,i=1,s=null;if(ec(n)||su(n))r=n,e=hre(n),t=MU(n);else{if(!ure.call(n,"name"))throw new Error(bVe("name"));const o=n.name;if(r=o,ure.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(EVe(o));e=hre(o),t=MU(o),s=n.getFn}return{path:e,id:t,weight:i,src:r,getFn:s}}function hre(n){return su(n)?n:n.split(".")}function MU(n){return su(n)?n.join("."):n}var Bt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function wVe(n,e){let t=[],r=!1;const i=(s,o,a)=>{if(sa(s))if(o[a]){const c=s[o[a]];if(!sa(c))return;if(a===o.length-1&&(ec(c)||are(c)||function mVe(n){return!0===n||!1===n||function gVe(n){return lre(n)&&null!==n}(n)&&"[object Boolean]"==cre(n)}(c)))t.push(function pVe(n){return null==n?"":function fVe(n){if("string"==typeof n)return n;let e=n+"";return"0"==e&&1/n==-1/0?"-0":e}(n)}(c));else if(su(c)){r=!0;for(let u=0,h=c.length;u<h;u+=1)i(c[u],o,a+1)}else o.length&&i(c,o,a+1)}else t.push(s)};return i(n,ec(e)?e.split("."):e,0),r?t:t[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const CVe=/[^ ]+/g;class PU{constructor({getFn:e=Bt.getFn,fieldNormWeight:t=Bt.fieldNormWeight}={}){this.norm=function TVe(n=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(CVe).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*n),a=parseFloat(Math.round(o*r)/r);return t.set(s,a),a},clear(){t.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ec(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();ec(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!sa(e)||RU(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(sa(o))if(su(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(sa(u))if(ec(u)&&!RU(u)){let h={v:u,i:c,n:this.norm.get(u)};a.push(h)}else su(u)&&u.forEach((h,m)=>{l.push({nestedArrIndex:m,value:h})})}r.$[s]=a}else if(ec(o)&&!RU(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function fre(n,e,{getFn:t=Bt.getFn,fieldNormWeight:r=Bt.fieldNormWeight}={}){const i=new PU({getFn:t,fieldNormWeight:r});return i.setKeys(n.map(dre)),i.setSources(e),i.create(),i}function AVe(n,{getFn:e=Bt.getFn,fieldNormWeight:t=Bt.fieldNormWeight}={}){const{keys:r,records:i}=n,s=new PU({getFn:e,fieldNormWeight:t});return s.setKeys(r),s.setIndexRecords(i),s}function Xx(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=Bt.distance,ignoreLocation:s=Bt.ignoreLocation}={}){const o=e/n.length;if(s)return o;const a=Math.abs(r-t);return i?o+a/i:a?1:o}function DVe(n){let e={};for(let t=0,r=n.length;t<r;t+=1){const i=n.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}class pre{constructor(e,{location:t=Bt.location,threshold:r=Bt.threshold,distance:i=Bt.distance,includeMatches:s=Bt.includeMatches,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:a=Bt.minMatchCharLength,isCaseSensitive:l=Bt.isCaseSensitive,ignoreLocation:c=Bt.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(m,y)=>{this.chunks.push({pattern:m,alphabet:DVe(m),startIndex:y})},h=this.pattern.length;if(h>32){let m=0;const y=h%32,b=h-y;for(;m<b;)u(this.pattern.substr(m,32),m),m+=32;if(y){const T=h-32;u(this.pattern.substr(T),T)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let b={isMatch:!0,score:0};return r&&(b.indices=[[0,e.length-1]]),b}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],h=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:T,startIndex:M})=>{const{isMatch:B,score:V,indices:Q}=function xVe(n,e,t,{location:r=Bt.location,distance:i=Bt.distance,threshold:s=Bt.threshold,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:a=Bt.minMatchCharLength,includeMatches:l=Bt.includeMatches,ignoreLocation:c=Bt.ignoreLocation}={}){if(e.length>32)throw new Error("Pattern length exceeds max of 32.");const u=e.length,h=n.length,m=Math.max(0,Math.min(r,h));let y=s,b=m;const T=a>1||l,M=T?Array(h):[];let B;for(;(B=n.indexOf(e,b))>-1;){let H=Xx(e,{currentLocation:B,expectedLocation:m,distance:i,ignoreLocation:c});if(y=Math.min(H,y),b=B+u,T){let L=0;for(;L<u;)M[B+L]=1,L+=1}}b=-1;let V=[],Q=1,we=u+h;const je=1<<u-1;for(let H=0;H<u;H+=1){let L=0,W=we;for(;L<W;)Xx(e,{errors:H,currentLocation:m+W,expectedLocation:m,distance:i,ignoreLocation:c})<=y?L=W:we=W,W=Math.floor((we-L)/2+L);we=W;let J=Math.max(1,m-W+1),ne=o?h:Math.min(m+W,h)+u,re=Array(ne+2);re[ne+1]=(1<<H)-1;for(let $r=ne;$r>=J;$r-=1){let ua=$r-1,at=t[n.charAt(ua)];if(T&&(M[ua]=+!!at),re[$r]=(re[$r+1]<<1|1)&at,H&&(re[$r]|=(V[$r+1]|V[$r])<<1|1|V[$r+1]),re[$r]&je&&(Q=Xx(e,{errors:H,currentLocation:ua,expectedLocation:m,distance:i,ignoreLocation:c}),Q<=y)){if(y=Q,b=ua,b<=m)break;J=Math.max(1,2*m-b)}}if(Xx(e,{errors:H+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:c})>y)break;V=re}const He={isMatch:b>=0,score:Math.max(.001,Q)};if(T){const H=function SVe(n=[],e=Bt.minMatchCharLength){let t=[],r=-1,i=-1,s=0;for(let o=n.length;s<o;s+=1){let a=n[s];a&&-1===r?r=s:!a&&-1!==r&&(i=s-1,i-r+1>=e&&t.push([r,i]),r=-1)}return n[s-1]&&s-r>=e&&t.push([r,s-1]),t}(M,a);H.length?l&&(He.indices=H):He.isMatch=!1}return He}(e,b,T,{location:i+M,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});B&&(m=!0),h+=V,B&&Q&&(u=[...u,...Q])});let y={isMatch:m,score:m?h/this.chunks.length:1};return m&&r&&(y.indices=u),y}}class jd{constructor(e){this.pattern=e}static isMultiMatch(e){return mre(e,this.multiRegex)}static isSingleMatch(e){return mre(e,this.singleRegex)}search(){}}function mre(n,e){const t=n.match(e);return t?t[1]:null}class gre extends jd{constructor(e,{location:t=Bt.location,threshold:r=Bt.threshold,distance:i=Bt.distance,includeMatches:s=Bt.includeMatches,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:a=Bt.minMatchCharLength,isCaseSensitive:l=Bt.isCaseSensitive,ignoreLocation:c=Bt.ignoreLocation}={}){super(e),this._bitapSearch=new pre(e,{location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class _re extends jd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r,t=0;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+s,i.push([r,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const kU=[class RVe extends jd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},_re,class PVe extends jd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class kVe extends jd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class OVe extends jd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class NVe extends jd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class MVe extends jd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=-1===e.indexOf(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},gre],yre=kU.length,FVe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,BVe=new Set([gre.type,_re.type]),NU=[];function OU(n,e){for(let t=0,r=NU.length;t<r;t+=1){let i=NU[t];if(i.condition(n,e))return new i(n,e)}return new pre(n,e)}const Zx_AND="$and",LU=n=>!(!n.$and&&!n.$or),vre=n=>({[Zx_AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function bre(n,e,{auto:t=!0}={}){const r=i=>{let s=Object.keys(i);const o=(n=>!!n.$path)(i);if(!o&&s.length>1&&!LU(i))return r(vre(i));if((n=>!su(n)&&lre(n)&&!LU(n))(i)){const l=o?i.$path:s[0],c=o?i.$val:i[l];if(!ec(c))throw new Error((n=>`Invalid value for key ${n}`)(l));const u={keyId:MU(l),pattern:c};return t&&(u.searcher=OU(c,e)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=i[l];su(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return LU(n)||(n=vre(n)),r(n)}function WVe(n,e){const t=n.matches;e.matches=[],sa(t)&&t.forEach(r=>{if(!sa(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function GVe(n,e){e.score=n.score}let VU=(()=>{class n{constructor(t,r={},i){this.options={...Bt,...r},this._keyStore=new IVe(this.options.keys),this.setCollection(t,i)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof PU))throw new Error("Incorrect 'index' type");this._myIndex=r||fre(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){sa(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let i=0,s=this._docs.length;i<s;i+=1){const o=this._docs[i];t(o,i)&&(this.removeAt(i),i-=1,s-=1,r.push(o))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options;let c=ec(t)?ec(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function $Ve(n,{ignoreFieldNorm:e=Bt.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=r})}(c,{ignoreFieldNorm:l}),o&&c.sort(a),are(r)&&r>-1&&(c=c.slice(0,r)),function qVe(n,e,{includeMatches:t=Bt.includeMatches,includeScore:r=Bt.includeScore}={}){const i=[];return t&&i.push(WVe),r&&i.push(GVe),n.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}(c,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(t){const r=OU(t,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:o,i:a,n:l})=>{if(!sa(o))return;const{isMatch:c,score:u,indices:h}=r.searchIn(o);c&&s.push({item:o,idx:a,matches:[{score:u,value:o,norm:l,indices:h}]})}),s}_searchLogical(t){const r=bre(t,this.options),i=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:y}=l,b=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:y});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}const h=[];for(let m=0,y=l.children.length;m<y;m+=1){const T=i(l.children[m],c,u);if(T.length)h.push(...T);else if("$and"===l.operator)return[]}return h},o={},a=[];return this._myIndex.records.forEach(({$:l,i:c})=>{if(sa(l)){let u=i(r,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},a.push(o[c])),u.forEach(({matches:h})=>{o[c].matches.push(...h)}))}}),a}_searchObjectList(t){const r=OU(t,this.options),{keys:i,records:s}=this._myIndex,o=[];return s.forEach(({$:a,i:l})=>{if(!sa(a))return;let c=[];i.forEach((u,h)=>{c.push(...this._findMatches({key:u,value:a[h],searcher:r}))}),c.length&&o.push({idx:l,item:a,matches:c})}),o}_findMatches({key:t,value:r,searcher:i}){if(!sa(r))return[];let s=[];if(su(r))r.forEach(({v:o,i:a,n:l})=>{if(!sa(o))return;const{isMatch:c,score:u,indices:h}=i.searchIn(o);c&&s.push({score:u,key:t,value:o,idx:a,norm:l,indices:h})});else{const{v:o,n:a}=r,{isMatch:l,score:c,indices:u}=i.searchIn(o);l&&s.push({score:c,key:t,value:o,norm:a,indices:u})}return s}}return n.version="7.0.0",n.createIndex=fre,n.parseIndex=AVe,n.config=Bt,n})();VU.parseQuery=bre,function jVe(...n){NU.push(...n)}(class UVe{constructor(e,{isCaseSensitive:t=Bt.isCaseSensitive,includeMatches:r=Bt.includeMatches,minMatchCharLength:i=Bt.minMatchCharLength,ignoreLocation:s=Bt.ignoreLocation,findAllMatches:o=Bt.findAllMatches,location:a=Bt.location,threshold:l=Bt.threshold,distance:c=Bt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function VVe(n,e={}){return n.split("|").map(t=>{let r=t.trim().split(FVe).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,c=-1;for(;!l&&++c<yre;){const u=kU[c];let h=u.isMultiMatch(a);h&&(i.push(new u(h,e)),l=!0)}if(!l)for(c=-1;++c<yre;){const u=kU[c];let h=u.isSingleMatch(a);if(h){i.push(new u(h,e));break}}}return i})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const u=t[l];o.length=0,s=0;for(let h=0,m=u.length;h<m;h+=1){const y=u[h],{isMatch:b,indices:T,score:M}=y.search(e);if(!b){a=0,s=0,o.length=0;break}s+=1,a+=M,r&&(BVe.has(y.constructor.type)?o=[...o,...T]:o.push(T))}if(s){let h={isMatch:!0,score:a/s};return r&&(h.indices=o),h}}return{isMatch:!1,score:1}}});let Ere=(()=>{class n{transform(t,r=0){const i=parseFloat(t);return isNaN(i)?t:-1===r?`${i.toFixed(0)} \u5143`:i<1e3?`${i.toFixed(r)} \u516c\u5c3a`:`${(i/1e3).toFixed(r)} \u516c\u91cc`}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Oi({name:"round",type:n,pure:!0})}}return n})(),KVe=(()=>{class n{transform(t){return null==t||""===t?"\u66ab\u7121\u8cc7\u8a0a":t.toString()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Oi({name:"emptyInfo",type:n,pure:!0})}}return n})();function QVe(n,e){1&n&&(ue(0,"div",17),Ke(1," \u65b0\u54c1 "),pe())}function YVe(n,e){1&n&&(ue(0,"div",18),Ke(1," \u7279\u50f9\u4e2d "),pe())}function XVe(n,e){if(1&n&&(ue(0,"div")(1,"div",19)(2,"span",20),Ke(3,"\u50f9\u683c(NT$): "),pe(),ue(4,"span",21),Ke(5),pe(),ue(6,"span",22),Ke(7,"\u2192"),pe(),ue(8,"span",23),Ke(9),Ps(10,"round"),pe()(),ue(11,"p",24),Ke(12),Ps(13,"emptyInfo"),pe(),ue(14,"p",24),Ke(15),Ps(16,"emptyInfo"),pe()()),2&n){const t=Pe().$implicit,r=Pe(5);de(5),Ro(r.getFoodDetail711(t).originalPrice),de(4),en(" ",og(10,4,r.getFoodDetail711(t).discountedPrice,-1)," "),de(3),en("\u5546\u54c1\u63cf\u8ff0: ",ef(13,7,r.getFoodDetail711(t).content),""),de(3),en("\u5361\u8def\u91cc(kcal): ",ef(16,9,r.getFoodDetail711(t).kcal),"")}}function ZVe(n,e){1&n&&(ue(0,"div")(1,"div",19)(2,"p",24),Ke(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),pe()()())}function JVe(n,e){if(1&n){const t=Ti();ue(0,"li")(1,"div",8)(2,"img",9),kt("click",function(){const i=hn(t).$implicit,s=Pe(5);return fn(s.openImageDialog(s.getFoodDetail711(i).image))}),pe(),ue(3,"div",10)(4,"div",11)(5,"h3",12),Ke(6),pe(),ue(7,"div",13),Ke(8),pe()(),ue(9,"div",14),ot(10,QVe,2,0,"div",15)(11,YVe,2,0,"div",16),pe(),ot(12,XVe,17,11,"div",0)(13,ZVe,4,0,"div",0),pe()()()}if(2&n){const t=e.$implicit,r=Pe(5);de(2),Me("src",r.getFoodDetail711(t).image,ii)("alt",r.getFoodDetail711(t).name),de(4),en(" ",t.ItemName," "),de(2),en(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),de(2),Me("ngIf","True"===r.getFoodDetail711(t).new),de(),Me("ngIf","True"===r.getFoodDetail711(t).special_sale),de(),Me("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetail711(t).image),de(),Me("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetail711(t).image)}}function eBe(n,e){if(1&n&&(ue(0,"div",4)(1,"div",5)(2,"h3",6),Ke(3),pe()(),ue(4,"ul",7),ot(5,JVe,14,8,"li",2),pe()()),2&n){const t=Pe().$implicit,r=Pe(3);de(3),en(" ",t.Name," "),de(2),Me("ngForOf",r.itemsBySubCategory[t.Name])}}function tBe(n,e){if(1&n&&(Rs(0),ot(1,eBe,6,2,"div",3),Ms()),2&n){const t=e.$implicit,r=Pe(3);de(),Me("ngIf",r.itemsBySubCategory[t.Name]&&r.itemsBySubCategory[t.Name].length>0)}}function nBe(n,e){if(1&n&&(Rs(0),ue(1,"h2",1),Ke(2),pe(),ot(3,tBe,2,1,"ng-container",2),Ms()),2&n){const t=Pe(2);de(2),Ro(t.category.Name),de(),Me("ngForOf",t.subCategories)}}function rBe(n,e){if(1&n&&(ue(0,"div")(1,"p",24),Ke(2),Ps(3,"emptyInfo"),pe()()),2&n){const t=Pe().$implicit,r=Pe(5);de(2),en("\u5546\u54c1\u63cf\u8ff0: ",ef(3,1,r.getFoodDetailFamilyMart(t).Description),"")}}function iBe(n,e){1&n&&(ue(0,"div")(1,"div",19)(2,"p",24),Ke(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),pe()()())}function sBe(n,e){if(1&n){const t=Ti();ue(0,"li")(1,"div",26)(2,"img",9),kt("click",function(){const i=hn(t).$implicit,s=Pe(5);return fn(s.openImageDialog(s.getFoodDetailFamilyMart(i).picture_url))}),pe(),ue(3,"div",10)(4,"div",11)(5,"h3",12),Ke(6),pe(),ue(7,"div",27),Ke(8),pe()(),ot(9,rBe,4,3,"div",0)(10,iBe,4,0,"div",0),pe()()()}if(2&n){const t=e.$implicit,r=Pe(5);de(2),Me("src",r.getFoodDetailFamilyMart(t).picture_url,ii)("alt",r.getFoodDetailFamilyMart(t).title),de(4),en(" ",t.ItemName," "),de(2),en(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),de(),Me("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetailFamilyMart(t).picture_url),de(),Me("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetailFamilyMart(t).picture_url)}}function oBe(n,e){if(1&n&&(ue(0,"div",4)(1,"div",5)(2,"h3",25),Ke(3),pe()(),ue(4,"ul",7),ot(5,sBe,11,6,"li",2),pe()()),2&n){const t=Pe().$implicit,r=Pe(3);de(3),en(" ",t.name," "),de(2),Me("ngForOf",r.itemsBySubCategory[t.name])}}function aBe(n,e){if(1&n&&(Rs(0),ot(1,oBe,6,2,"div",3),Ms()),2&n){const t=e.$implicit,r=Pe(3);de(),Me("ngIf",r.itemsBySubCategory[t.name]&&r.itemsBySubCategory[t.name].length>0)}}function lBe(n,e){if(1&n&&(Rs(0),ue(1,"h2",1),Ke(2),pe(),ot(3,aBe,2,1,"ng-container",2),Ms()),2&n){const t=Pe(2);de(2),Ro(t.category.name),de(),Me("ngForOf",t.subCategories)}}function cBe(n,e){if(1&n&&(ue(0,"div"),ot(1,nBe,4,2,"ng-container",0)(2,lBe,4,2,"ng-container",0),pe()),2&n){const t=Pe();de(),Me("ngIf",t.category.Name),de(),Me("ngIf",t.category.name)}}let uBe=(()=>{class n{constructor(t,r){this.sevenElevenRequestService=t,this.dialog=r,this.subCategories=[],this.subCategoriesName="",this.itemsBySubCategory={}}ngOnInit(){}ngOnChanges(t){(t.category||t.store)&&this.loadSubCategories()}loadSubCategories(){if(this.store&&this.category)if(this.store.StoreName)this.subCategories=this.category.Children,this.subCategoriesName=this.category.Name,this.loadItemsBySubCategory();else if(this.store.name){this.subCategories=this.category.categories;var t=[];this.subCategories.forEach(r=>{t.push(...r.products.map(i=>({ItemName:i.name,RemainingQty:i.qty}))),this.itemsBySubCategory[r.name]=t||[],t=[]})}}loadItemsBySubCategory(){this.store&&this.sevenElevenRequestService.getItemsByStoreNo(this.store.StoreNo).subscribe(t=>{if(t.isSuccess&&t.element.StoreStockItem){let r=t.element.StoreStockItem.CategoryStockItems;if("\u751c\u9ede"==this.subCategoriesName){let i="";this.subCategories=this.subCategories.map(s=>"\u86cb\u7cd5"===s.Name?(i=s.ID,{...s,Name:"\u51b7\u85cf\u86cb\u7cd5"}):s),r=r.map(s=>"\u86cb\u7cd5"===s.Name&&s.NodeID.toString()==i?{...s,Name:"\u51b7\u85cf\u86cb\u7cd5"}:s)}if("\u9eb5\u5305\u86cb\u7cd5"==this.subCategoriesName){let i="";this.subCategories=this.subCategories.map(s=>"\u86cb\u7cd5"===s.Name?(i=s.ID,{...s,Name:"\u9eb5\u5305\u86cb\u7cd5"}):s),r=r.map(s=>"\u86cb\u7cd5"===s.Name&&s.NodeID.toString()==i?{...s,Name:"\u9eb5\u5305\u86cb\u7cd5"}:s)}this.subCategories.forEach(i=>{const s=[];r.forEach(o=>{o.Name===i.Name&&s.push(...o.ItemList)}),this.itemsBySubCategory[i.Name]=s||[]})}})}getDiscountedPrice(t){const r=parseFloat(t.replace("NT$","").trim()),s=(new Date).getHours();let o=r;return o*=s>=19&&s<20?.8:s>=10&&s<18||s>=20||s<3?.65:.8,o.toString()}getFoodDetail711(t){const s=new VU(this.foodDetails,{includeScore:!0,threshold:.3,keys:["name"]}).search(t.ItemName),o=s.length>0?s[0].item:{category:"",content:"",image:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png",kcal:"",name:"",new:"False",price:"",special_sale:"False"},a=this.getDiscountedPrice(o.price);return o.discountedPrice=a,o.originalPrice=o.price,o}getFoodDetailFamilyMart(t){const s=new VU(this.foodDetails,{includeScore:!0,threshold:.3,keys:["title"]}).search(t.ItemName);return s.length>0?s[0].item:{category:"",title:"",picture_url:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png","Protein (g)":"","Carb (g)":"","Calories (kcal)":"","Fat (g)":"",Description:""}}openImageDialog(t){this.dialog.open(dVe,{data:{image:t},panelClass:"custom-dialog"})}static{this.\u0275fac=function(r){return new(r||n)(De(aO),De(Sf))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-display"]],inputs:{store:"store",category:"category",foodDetails:"foodDetails"},features:[cs],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-2xl","font-bold","mb-4","text-primary-default"],[4,"ngFor","ngForOf"],["class","sub-category-item bg-white border border-gray-100 p-6 mb-8 rounded-lg shadow-lg",4,"ngIf"],[1,"sub-category-item","bg-white","border","border-gray-100","p-6","mb-8","rounded-lg","shadow-lg"],[1,"mb-4"],[1,"text-2xl","font-bold","text-primary-default","text-primary-light"],[1,"space-y-6","sm:space-y-4"],[1,"border","border-gray-300","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"object-contain","rounded-lg","mb-4","sm:mb-0","sm:mr-6","shadow-md","w-24","h-24","sm:w-32","sm:h-32","cursor-pointer",3,"click","src","alt"],[1,"flex-1"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-2"],[1,"text-sm","sm:text-lg","font-semibold","text-gray-600"],[1,"text-center","inline-block","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"flex","space-x-2","mb-2"],["class","inline-block bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],["class","inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[1,"inline-block","bg-red-100","text-red-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"inline-block","bg-yellow-100","text-yellow-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"text-sm","sm:text-base","font-semibold","text-gray-800","mb-2"],[1,"text-gray-800"],[1,"line-through","text-gray-500"],[1,"text-red-600","mx-2"],[1,"text-red-600"],[1,"text-xs","sm:text-sm","text-gray-500","mb-1"],[1,"text-2xl","font-bold","text-primary-default"],[1,"border","border-gray-300","food-item","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"text-center","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"]],template:function(r,i){1&r&&ot(0,cBe,3,2,"div",0),2&r&&Me("ngIf",i.subCategories.length>0)},dependencies:[_b,sf,Ere,KVe]})}}return n})();const hBe=["mat-icon-button",""],fBe=["*"],pBe=new Ee("MAT_BUTTON_CONFIG"),mBe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let gBe=(()=>{class n{_elementRef=k(jn);_platform=k(Ns);_ngZone=k(yt);_animationMode=k(Tl,{optional:!0});_focusMonitor=k(kA);_rippleLoader=k(bAe);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){k(td).load(QN);const t=k(pBe,{optional:!0}),r=this._elementRef.nativeElement,i=r.classList;this.disabledInteractive=t?.disabledInteractive??!1,this.color=t?.color??null,this._rippleLoader?.configureRipple(r,{className:"mat-mdc-button-ripple"});for(const{attribute:s,mdcClasses:o}of mBe)r.hasAttribute(s)&&i.add(...o)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",oi],disabled:[2,"disabled","disabled",oi],ariaDisabled:[2,"aria-disabled","ariaDisabled",oi],disabledInteractive:[2,"disabledInteractive","disabledInteractive",oi]},standalone:!0,features:[xl]})}return n})(),Ire=(()=>{class n extends gBe{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,i){2&r&&(er("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Xh(i.color?"mat-"+i.color:""),Lr("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[wn,si],attrs:hBe,ngContentSelectors:fBe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Ya(),Et(0,"span",0),Yi(1),Et(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return n})(),wre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr,YN,lr]})}return n})();function yBe(n,e){1&n&&(ue(0,"small",19),Ke(1,"\u5e33\u865f\u70ba\u5fc5\u586b"),pe())}function vBe(n,e){1&n&&(ue(0,"small",19),Ke(1,"\u8acb\u8f38\u5165\u6709\u6548\u7684\u96fb\u5b50\u90f5\u4ef6"),pe())}function bBe(n,e){1&n&&(ue(0,"small",19),Ke(1,"\u5bc6\u78bc\u70ba\u5fc5\u586b"),pe())}function EBe(n,e){1&n&&(ue(0,"small",19),Ke(1,"\u5bc6\u78bc\u81f3\u5c11\u9700\u89816\u500b\u5b57\u5143"),pe())}function IBe(n,e){1&n&&(ue(0,"small",19),Ke(1," \u5bc6\u78bc\u8207\u518d\u6b21\u8f38\u5165\u7684\u5bc6\u78bc\u4e0d\u4e00\u81f4 "),pe())}function wBe(n,e){1&n&&(ue(0,"small",19),Ke(1," \u66b1\u7a31\u70ba\u5fc5\u586b "),pe())}function CBe(n,e){if(1&n&&(ue(0,"div")(1,"div")(2,"label",20),Ke(3,"\u91cd\u65b0\u8f38\u5165\u5bc6\u78bc"),pe(),Et(4,"input",21),ot(5,IBe,2,0,"small",8),pe(),ue(6,"div")(7,"label",22),Ke(8,"\u66b1\u7a31"),pe(),Et(9,"input",23),ot(10,wBe,2,0,"small",8),pe()()),2&n){const t=Pe();de(5),Me("ngIf",(null==t.authForm.errors?null:t.authForm.errors.passwordsMismatch)&&t.f.rePassword.touched),de(5),Me("ngIf",(null==t.authForm.errors?null:t.authForm.errors.displayNameRequired)&&t.f.displayName.touched)}}function TBe(n,e){if(1&n&&(ue(0,"p",24),Ke(1),pe()),2&n){const t=Pe();de(),Ro(t.errorMessage)}}function ABe(n,e){if(1&n){const t=Ti();ue(0,"div")(1,"button",25),kt("click",function(){return hn(t),fn(Pe().resendVerificationEmail())}),Ke(2," \u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1 "),pe()()}}function SBe(n,e){if(1&n){const t=Ti();ue(0,"div",26)(1,"button",27),kt("click",function(){return hn(t),fn(Pe().forgotPassword())}),Ke(2," \u5fd8\u8a18\u5bc6\u78bc\uff1f "),pe()()}}let xBe=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.authService=r,this.dialogRef=i,this.dialog=s,this.isRegister=!1,this.errorMessage="",this.authForm=this.fb.group({email:["",[NT.required,NT.email]],password:["",[NT.required,NT.minLength(6)]],rePassword:[""],displayName:[""]},{validators:[this.passwordMatchValidator,this.displayNameRequiredValidator.bind(this)]})}passwordMatchValidator(t){const r=t.get("password")?.value,i=t.get("rePassword")?.value;return r&&i&&r!==i?{passwordsMismatch:!0}:null}displayNameRequiredValidator(t){const r=this.isRegister,i=t.get("displayName")?.value;return!r||i&&""!==i.trim()?null:{displayNameRequired:!0}}submitForm(){this.authForm.invalid?this.markFormGroupTouched(this.authForm):this.isRegister?this.register():this.login()}markFormGroupTouched(t){Object.values(t.controls).forEach(r=>{r instanceof hf?this.markFormGroupTouched(r):r.markAsTouched()})}collectErrors(t){const r=[];return Object.keys(t.controls).forEach(i=>{const s=t.get(i);s&&s.errors&&(s.errors.required&&r.push(`${this.getFieldDisplayName(i)} \u70ba\u5fc5\u586b`),s.errors.email&&r.push(`${this.getFieldDisplayName(i)} \u683c\u5f0f\u4e0d\u6b63\u78ba`),s.errors.minlength&&r.push(`${this.getFieldDisplayName(i)} \u81f3\u5c11\u9700\u8981 ${s.errors.minlength.requiredLength} \u500b\u5b57\u5143`))}),t.errors?.passwordsMismatch&&r.push("\u5bc6\u78bc\u8207\u78ba\u8a8d\u5bc6\u78bc\u4e0d\u4e00\u81f4"),r.join("\n")}getFieldDisplayName(t){return{email:"Email",password:"\u5bc6\u78bc",rePassword:"\u78ba\u8a8d\u5bc6\u78bc",displayName:"\u66b1\u7a31"}[t]||t}login(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;console.log(s),!s||s.emailVerified?(console.log("\u4e00\u822c\u767b\u5165\u6210\u529f"),this.dialog.open(iE,{width:"300px",data:{title:"\u767b\u5165\u6210\u529f",message:`${s.displayName}\uff5e\u6b61\u8fce\u56de\u4f86\u55b5`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(a=>{this.close(!0)})):this.errorMessage="\u60a8\u7684\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49\uff0c\u8acb\u5148\u81f3\u4fe1\u7bb1\u9ede\u64ca\u9a57\u8b49\u9023\u7d50\u5f8c\u518d\u91cd\u65b0\u767b\u5165\u3002"}).catch(i=>{this.errorMessage="auth/invalid-credential"===i.code?"\u5e33\u865f\u4e0d\u5b58\u5728\u6216\u5bc6\u78bc\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\u3002":"\u56e0\u4e0d\u660e\u539f\u56e0\u767b\u5165\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002",console.error(i.message)})}register(){const{email:t,password:r,displayName:i}=this.authForm.value;this.authService.register(t,r,i).then(()=>{this.errorMessage="\u8a3b\u518a\u6210\u529f\uff0c\u8acb\u81f3\u60a8\u7684\u4fe1\u7bb1\u78ba\u8a8d\u5f8c\u91cd\u65b0\u767b\u5165",this.authForm.reset(),this.isRegister=!1}).catch(s=>{this.errorMessage="auth/email-already-in-use"===s.code?"\u5e33\u865f\u5df2\u5b58\u5728\uff0c\u8acb\u4f7f\u7528Google\u6216\u76f4\u63a5\u767b\u5165":"\u56e0\u4e0d\u660e\u539f\u56e0\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}resendVerificationEmail(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;if(console.log("\u9a57\u8b49\u4fe1\u91cd\u767c\u7d66",s),s)return this.authService.sendVerificationEmail(s),void(this.errorMessage="\u9a57\u8b49\u4fe1\u5df2\u91cd\u65b0\u5bc4\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u96fb\u5b50\u90f5\u4ef6\u4e26\u91cd\u65b0\u767b\u5165")}).catch(i=>{console.error(i.message),this.errorMessage="\u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}loginWithGoogle(){this.authService.loginWithGoogle().then(t=>{const r=t.user;console.log("Google\u767b\u5165\u6210\u529f"),this.dialog.open(iE,{width:"300px",data:{title:"\u767b\u5165\u6210\u529f",message:`${r.displayName}\uff5e\u6b61\u8fce\u56de\u4f86\u55b5`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(s=>{this.close(!0)})}).catch(t=>{console.error(t.message),this.errorMessage="Google\u767b\u5165\u5931\u6557\uff0c\u8acb\u91cd\u65b0\u518d\u8a66"})}close(t){this.dialogRef.close(t)}get f(){return this.authForm.controls}forgotPassword(){const{email:t}=this.authForm.value;t?this.authService.forgotPassword(t).then(()=>{this.errorMessage="\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u4fe1\u7bb1"}).catch(r=>{console.error("\u91cd\u8a2d\u5bc6\u78bc\u932f\u8aa4",r.message),this.errorMessage="\u767c\u9001\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u6642\u51fa\u932f\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"}):this.errorMessage="\u8acb\u8f38\u5165\u5e33\u865f\u4f7f\u7528\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740"}static{this.\u0275fac=function(r){return new(r||n)(De(jIe),De(KS),De(Bg),De(Sf))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-login-page"]],decls:32,vars:12,consts:[[1,"dialog-content"],[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"text-primary-default","text-xl","font-semibold","mb-6"],["mat-icon-button","",1,"text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],[1,"material-icons"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"text-primary-default"],["type","email","id","email","formControlName","email","placeholder","\u8acb\u8f38\u5165\u4fe1\u7bb1\u4f5c\u70ba\u5e33\u865f",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["class","text-red-500",4,"ngIf"],["for","password",1,"text-primary-default"],["type","password","id","password","formControlName","password","placeholder","\u8f38\u5165\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[4,"ngIf"],["type","submit",1,"btn-login","w-full","py-2","px-4","bg-primary-default","text-white","rounded-md","mt-4","hover:bg-gray-400","hover:shadow-lg","transition-all","focus:outline-none"],["class","error-message text-red-500 mb-4",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],[1,"flex","justify-between","items-center","mt-6"],[1,"btn-register","text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"],[1,"btn-google","border","border-gray-300","flex","items-center","py-2","px-4","bg-primary-light","text-gray-700","rounded-md","hover:bg-gray-200","hover:border-gray-400","transition-all","focus:outline-none",3,"click"],["src","assets/google.png","alt","Google Logo",1,"w-5","h-5","mr-2"],[1,"text-red-500"],["for","rePassword",1,"text-primary-default"],["type","password","id","rePassword","formControlName","rePassword","placeholder","\u518d\u6b21\u8f38\u5165\u60a8\u7684\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["for","displayName",1,"text-primary-default"],["type","text","id","displayName","formControlName","displayName","placeholder","\u600e\u9ebc\u7a31\u547c\u60a8",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[1,"error-message","text-red-500","mb-4"],[1,"btn-resend","w-full","py-2","px-4","bg-primary-light","border","border-gray-300","text-gray-700","rounded-md","hover:bg-gray-400","hover:text-white","transition-all","focus:outline-none",3,"click"],[1,"mt-4","text-center"],[1,"text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"]],template:function(r,i){1&r&&(ue(0,"mat-dialog-content",0)(1,"div",1)(2,"h2",2),Ke(3),pe(),ue(4,"button",3),kt("click",function(){return i.close(!1)}),ue(5,"span",4),Ke(6,"close"),pe()()(),ue(7,"form",5),kt("ngSubmit",function(){return i.submitForm()}),ue(8,"div")(9,"label",6),Ke(10,"\u5e33\u865f"),pe(),Et(11,"input",7),ot(12,yBe,2,0,"small",8)(13,vBe,2,0,"small",8),pe(),ue(14,"div")(15,"label",9),Ke(16,"\u5bc6\u78bc"),pe(),Et(17,"input",10),ot(18,bBe,2,0,"small",8)(19,EBe,2,0,"small",8),pe(),ot(20,CBe,11,2,"div",11),ue(21,"button",12),Ke(22),pe(),ot(23,TBe,2,1,"p",13)(24,ABe,3,0,"div",11),pe(),ot(25,SBe,3,0,"div",14),ue(26,"div",15)(27,"button",16),kt("click",function(){return i.isRegister=!i.isRegister}),Ke(28),pe(),ue(29,"button",17),kt("click",function(){return i.loginWithGoogle()}),Et(30,"img",18),Ke(31," Google \u767b\u5165 "),pe()()()),2&r&&(de(3),en(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),de(4),Me("formGroup",i.authForm),de(5),Me("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),de(),Me("ngIf",(null==i.f.email.errors?null:i.f.email.errors.email)&&i.f.email.touched),de(5),Me("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),de(),Me("ngIf",(null==i.f.password.errors?null:i.f.password.errors.minlength)&&i.f.password.touched),de(),Me("ngIf",i.isRegister),de(2),en(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),de(),Me("ngIf",i.errorMessage),de(),Me("ngIf",!i.isRegister&&i.errorMessage.includes("\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49")),de(),Me("ngIf",!i.isRegister),de(3),en(" ",i.isRegister?"\u5df2\u6709\u5e33\u865f\uff1f\u767b\u5165":"\u8a3b\u518a"," "))},dependencies:[sf,sO,mQ,Ire,zk,mg,LT,Mk,QT,Gk]})}}return n})();const DBe=["*"];let Jx;function WI(n){return function RBe(){if(void 0===Jx&&(Jx=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Jx=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Jx}()?.createHTML(n)||n}function Cre(n){return Error(`Unable to find icon with the name "${n}"`)}function Tre(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Are(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class fp{url;svgText;options;svgElement;constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let eD=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new fp(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(ds.HTML,i);if(!o)throw Are(i);const a=WI(o);return this._addSvgIconConfig(t,r,new fp("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new fp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(ds.HTML,r);if(!s)throw Are(r);const o=WI(s);return this._addSvgIconSetConfig(t,new fp("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(ds.RESOURCE_URL,t);if(!r)throw Tre(t);const i=this._cachedIconsByUrl.get(r);return i?Qe(tD(i)):this._loadSvgIconFromConfig(new fp(t,null)).pipe(ai(s=>this._cachedIconsByUrl.set(r,s)),Be(s=>tD(s)))}getNamedSvgIcon(t,r=""){const i=Sre(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):Pb(Cre(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Qe(tD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Be(r=>tD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Qe(i):kT(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Ju(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(ds.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Qe(null)})))).pipe(Be(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw Cre(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(ai(r=>t.svgText=r),Be(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Qe(null):this._fetchIcon(t).pipe(ai(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(WI("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(WI("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function MBe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const o=this._sanitizer.sanitize(ds.RESOURCE_URL,r);if(!o)throw Tre(r);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Be(c=>WI(c)),fg(()=>this._inProgressUrlFetches.delete(o)),q2());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(Sre(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return kBe(s)?new fp(s.url,null,s.options):new fp(s,null)}}static \u0275fac=function(r){return new(r||n)(Re(wb,8),Re(yk),Re(_n,8),Re(Go))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tD(n){return n.cloneNode(!0)}function Sre(n,e){return n+":"+e}function kBe(n){return!(!n.url||!n.options)}const NBe=new Ee("MAT_ICON_DEFAULT_OPTIONS"),OBe=new Ee("mat-icon-location",{providedIn:"root",factory:function FBe(){const n=k(_n),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),xre=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],LBe=xre.map(n=>`[${n}]`).join(", "),VBe=/^url\(['"]?#(.*?)['"]?\)$/;let BBe=(()=>{class n{_elementRef=k(jn);_iconRegistry=k(eD);_location=k(OBe);_errorHandler=k(Go);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Dt.EMPTY;constructor(){const t=k(new Nle("aria-hidden"),{optional:!0}),r=k(NBe,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(LBe),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)xre.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(VBe):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Zi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){2&r&&(er("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Xh(i.color?"mat-"+i.color:""),Lr("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:[2,"inline","inline",oi],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[xl,si],ngContentSelectors:DBe,decls:1,vars:0,template:function(r,i){1&r&&(Ya(),Yi(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),UBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr,lr]})}return n})();const jBe=["mat-menu-item",""],zBe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],HBe=["mat-icon, [matMenuItemIcon]","*"];function $Be(n,e){1&n&&(us(),ue(0,"svg",2),Et(1,"polygon",3),pe())}const WBe=["*"];function GBe(n,e){if(1&n){const t=Ti();ue(0,"div",0),kt("click",function(){return hn(t),fn(Pe().closed.emit("click"))})("animationstart",function(i){return hn(t),fn(Pe()._onAnimationStart(i.animationName))})("animationend",function(i){return hn(t),fn(Pe()._onAnimationDone(i.animationName))})("animationcancel",function(i){return hn(t),fn(Pe()._onAnimationDone(i.animationName))}),ue(1,"div",1),Yi(2),pe()()}if(2&n){const t=Pe();Xh(t._classList),Lr("mat-menu-panel-animations-disabled",t._animationsDisabled)("mat-menu-panel-exit-animation","void"===t._panelAnimationState)("mat-menu-panel-animating",t._isAnimating),Me("id",t.panelId),er("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const BU=new Ee("MAT_MENU_PANEL");let nD=(()=>{class n{_elementRef=k(jn);_document=k(_n);_focusMonitor=k(kA);_parentMenu=k(BU,{optional:!0});_changeDetectorRef=k(Ea);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new E;_focused=new E;_highlighted=!1;_triggersSubmenu=!1;constructor(){k(td).load(QN),this._parentMenu?.addItem?.(this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),r=t.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++)r[i].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(r,i){1&r&&kt("click",function(o){return i._checkDisabled(o)})("mouseenter",function(){return i._handleMouseEnter()}),2&r&&(er("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),Lr("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",oi],disableRipple:[2,"disableRipple","disableRipple",oi]},exportAs:["matMenuItem"],standalone:!0,features:[xl,si],attrs:jBe,ngContentSelectors:HBe,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,i){1&r&&(Ya(zBe),Yi(0),ue(1,"span",0),Yi(2,1),pe(),Et(3,"div",1),ot(4,$Be,2,0,":svg:svg",2)),2&r&&(de(3),Me("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),de(),Xv(i._triggersSubmenu?4:-1))},dependencies:[XK],encapsulation:2,changeDetection:0})}return n})();const qBe=new Ee("MatMenuContent"),KBe=new Ee("mat-menu-default-options",{providedIn:"root",factory:function QBe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),UU="_mat-menu-enter",rD="_mat-menu-exit";let GI=(()=>{class n{_elementRef=k(jn);_changeDetectorRef=k(Ea);_injector=k(Rn);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled;_allItems;_directDescendantItems=new Fh;_classList={};_panelAnimationState="void";_animationDone=new E;_isAnimating=!1;parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(t){const r=this._previousPanelClass,i={...this._classList};r&&r.length&&r.split(" ").forEach(s=>{i[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{i[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=i}_previousPanelClass;get classList(){return this.panelClass}set classList(t){this.panelClass=t}closed=new pn;close=this.closed;panelId=k(wf).getId("mat-menu-panel-");constructor(){const t=k(KBe);this.overlayPanelClass=t.overlayPanelClass||"",this._xPosition=t.xPosition,this._yPosition=t.yPosition,this.backdropClass=t.backdropClass,this.overlapTrigger=t.overlapTrigger,this.hasBackdrop=t.hasBackdrop,this._animationsDisabled="NoopAnimations"===k(Tl,{optional:!0})}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new fTe(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(nl(this._directDescendantItems),Qt(t=>sl(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const i=t.toArray(),s=Math.max(0,Math.min(i.length-1,r.activeItemIndex||0));i[s]&&!i[s].disabled?r.setActiveItem(s):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(nl(this._directDescendantItems),Qt(r=>sl(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:nd(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Dc(()=>{const r=this._resolvePanel();if(!r||!r.contains(document.activeElement)){const i=this._keyManager;i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&r&&r.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){}setPositionClasses(t=this.xPosition,r=this.yPosition){this._classList={...this._classList,"mat-menu-before":"before"===t,"mat-menu-after":"after"===t,"mat-menu-above":"above"===r,"mat-menu-below":"below"===r},this._changeDetectorRef.markForCheck()}_onAnimationDone(t){const r=t===rD;(r||t===UU)&&(r&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(r?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(t){(t===UU||t===rD)&&(this._isAnimating=!0)}_setIsOpen(t){if(this._panelAnimationState=t?"enter":"void",t){if(0===this._keyManager.activeItemIndex){const r=this._resolvePanel();r&&(r.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(rD),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(t?UU:rD)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(nl(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let t=null;return this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),t}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-menu"]],contentQueries:function(r,i,s){if(1&r&&(zu(s,qBe,5),zu(s,nD,5),zu(s,nD,4)),2&r){let o;Js(o=eo())&&(i.lazyContent=o.first),Js(o=eo())&&(i._allItems=o),Js(o=eo())&&(i.items=o)}},viewQuery:function(r,i){if(1&r&&Hu(ya,5),2&r){let s;Js(s=eo())&&(i.templateRef=s.first)}},hostVars:3,hostBindings:function(r,i){2&r&&er("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",oi],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>null==t?null:oi(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[sr([{provide:BU,useExisting:n}]),xl,si],ngContentSelectors:WBe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(r,i){1&r&&(Ya(),ot(0,GBe,3,12,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,changeDetection:0})}return n})();const Dre=new Ee("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(hs);return()=>n.scrollStrategies.reposition()}}),XBe={provide:Dre,deps:[hs],useFactory:function YBe(n){return()=>n.scrollStrategies.reposition()}},Rre=Ng({passive:!0}),qI=new WeakMap;let ZBe=(()=>{class n{_overlay=k(hs);_element=k(jn);_viewContainerRef=k(xo);_menuItemInstance=k(nD,{optional:!0,self:!0});_dir=k(Og,{optional:!0});_focusMonitor=k(kA);_ngZone=k(yt);_scrollStrategy=k(Dre);_changeDetectorRef=k(Ea);_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=Dt.EMPTY;_hoverSubscription=Dt.EMPTY;_menuCloseSubscription=Dt.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_handleTouchStart=t=>{jN(t)||(this._openedBy="touch")};_openedBy=void 0;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}_menu;menuData;restoreFocus=!0;menuOpened=new pn;onMenuOpen=this.menuOpened;menuClosed=new pn;onMenuClose=this.menuClosed;constructor(){const t=k(BU,{optional:!0});this._parentMaterialMenu=t instanceof GI?t:void 0,this._element.nativeElement.addEventListener("touchstart",this._handleTouchStart,Rre)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this.menu&&this._ownsMenu(this.menu)&&qI.delete(this.menu),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Rre),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;this._pendingRemoval?.unsubscribe();const r=qI.get(t);qI.set(t,this),r&&r!==this&&r.closeMenu();const i=this._createOverlay(t),s=i.getConfig(),o=s.positionStrategy;this._setPosition(t,o),s.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,i.hasAttached()||(i.attach(this._getPortal(t)),t.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),t instanceof GI&&(t._setIsOpen(!0),t._directDescendantItems.changes.pipe(Eg(t.close)).subscribe(()=>{o.withLockedPosition(!1).reapplyLastPosition(),o.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){const r=this._overlayRef,i=this._menu;!r||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),i instanceof GI&&this._ownsMenu(i)?(this._pendingRemoval=i._animationDone.pipe(Zi(1)).subscribe(()=>r.detach()),i._setIsOpen(!1)):r.detach(),i&&this._ownsMenu(i)&&qI.delete(i),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const r=this._getOverlayConfig(t);this._subscribeToPositions(t,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe(i=>{this.menu instanceof GI&&this.menu._handleKeydown(i)})}return this._overlayRef}_getOverlayConfig(t){return new NA({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr"})}_subscribeToPositions(t,r){t.setPositionClasses&&r.positionChanges.subscribe(i=>{this._ngZone.run(()=>{t.setPositionClasses("start"===i.connectionPair.overlayX?"after":"before","top"===i.connectionPair.overlayY?"below":"above")})})}_setPosition(t,r){let[i,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[u,h]=[i,s],m=0;if(this.triggersSubmenu()){if(h=i="before"===t.xPosition?"start":"end",s=u="end"===i?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const y=this._parentMaterialMenu.items.first;this._parentInnerPadding=y?y._getHostElement().offsetTop:0}m="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");r.withPositions([{originX:i,originY:l,overlayX:u,overlayY:o,offsetY:m},{originX:s,originY:l,overlayX:h,overlayY:o,offsetY:m},{originX:i,originY:c,overlayX:u,overlayY:a,offsetY:-m},{originX:s,originY:c,overlayX:h,overlayY:a,offsetY:-m}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return sl(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:Qe(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Yr(o=>this._menuOpen&&o!==this._menuItemInstance)):Qe(),r)}_handleMousedown(t){UN(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(t=>{t===this._menuItemInstance&&!t.disabled&&(this._openedBy="mouse",this.openMenu())}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new AA(t.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(t){return qI.get(t)===this}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,i){1&r&&kt("click",function(o){return i._handleClick(o)})("mousedown",function(o){return i._handleMousedown(o)})("keydown",function(o){return i._handleKeydown(o)}),2&r&&er("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}return n})(),Mre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[XBe],imports:[YN,lr,Jb,Xb,lr]})}return n})();const JBe=["*",[["mat-toolbar-row"]]],eUe=["*","mat-toolbar-row"];let tUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Je({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return n})(),nUe=(()=>{class n{_elementRef=k(jn);_platform=k(Ns);_document=k(_n);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(1&r&&zu(s,tUe,5),2&r){let o;Js(o=eo())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,i){2&r&&(Xh(i.color?"mat-"+i.color:""),Lr("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[si],ngContentSelectors:eUe,decls:2,vars:0,template:function(r,i){1&r&&(Ya(JBe),Yi(0),Yi(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return n})(),rUe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr,lr]})}return n})(),iUe=(()=>{class n{get vertical(){return this._vertical}set vertical(t){this._vertical=Z9(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=Z9(t)}_inset=!1;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,i){2&r&&(er("aria-orientation",i.vertical?"vertical":"horizontal"),Lr("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[si],decls:0,vars:0,template:function(r,i){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return n})(),kre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr,lr]})}return n})();function sUe(n,e){1&n&&Et(0,"img",13),2&n&&Me("src",Pe(3).sevenElevenIconUrl,ii)}function oUe(n,e){1&n&&Et(0,"img",14),2&n&&Me("src",Pe(3).familyMartIconUrl,ii)}function aUe(n,e){if(1&n){const t=Ti();ue(0,"button",9),kt("click",function(){hn(t);const i=Pe().$implicit;return fn(Pe().onSearchStore(i))}),ot(1,sUe,1,1,"img",10)(2,oUe,1,1,"img",11),ue(3,"span",12),Ke(4),pe()()}if(2&n){const t=Pe().$implicit;de(),Me("ngIf",t.storeName.includes("7-11")),de(),Me("ngIf",t.storeName.includes("\u5168\u5bb6")),de(2),Ro(t.storeName)}}function lUe(n,e){if(1&n&&(Rs(0),ot(1,aUe,5,3,"button",8),Ms()),2&n){const t=Pe();de(),Me("ngIf",t.user)}}let cUe=(()=>{class n{constructor(t,r){this.authService=t,this.dialog=r,this.favoriteStores=[],this.userUpdated=new pn,this.favoriteStoresUpdated=new pn,this.searchStore=new pn,this.sevenElevenIconUrl=Os_sevenElevenUrl_icon,this.familyMartIconUrl=Os_familyMartUrl_icon}loginOrlogout(){this.user?(this.authService.logout(),this.user=null,this.favoriteStores=[],this.userUpdated.emit(null),this.favoriteStoresUpdated.emit([]),this.dialog.open(iE,{width:"300px",data:{title:"\u767b\u51fa\u6210\u529f",message:"\u5df2\u9806\u5229\u767b\u51fa",imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(r=>{this.favoriteStores=[]})):this.dialog.open(xBe,{width:"500px",data:{}}).afterClosed().subscribe(r=>{r&&this.authService.getUser().subscribe(i=>{i&&i.emailVerified&&(this.user=i,this.userUpdated.emit(i))})})}onSearchStore(t){this.searchStore.emit(t)}static{this.\u0275fac=function(r){return new(r||n)(De(KS),De(Sf))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-sider"]],inputs:{user:"user",favoriteStores:"favoriteStores"},outputs:{userUpdated:"userUpdated",favoriteStoresUpdated:"favoriteStoresUpdated",searchStore:"searchStore"},decls:15,vars:4,consts:[["menu","matMenu"],[1,"toolbar"],["mat-icon-button","","aria-label","Menu",3,"matMenuTriggerFor"],[1,"text-with-shadow"],[1,"menu-header"],[4,"ngFor","ngForOf"],["mat-menu-item",""],[1,"px-3","py-1","text-white","text-center","bg-primary-default","rounded-full","shadow-sm",3,"click"],["mat-menu-item","","class","custom-menu-item",3,"click",4,"ngIf"],["mat-menu-item","",1,"custom-menu-item",3,"click"],["alt","7-11","class","store-icon",3,"src",4,"ngIf"],["alt","FamilyMart","class","store-icon",3,"src",4,"ngIf"],[1,"text-gray-600"],["alt","7-11",1,"store-icon",3,"src"],["alt","FamilyMart",1,"store-icon",3,"src"]],template:function(r,i){if(1&r){const s=Ti();ue(0,"mat-toolbar",1)(1,"button",2)(2,"mat-icon"),Ke(3,"menu"),pe()(),ue(4,"span",3),Ke(5,"\u53cb\u5584\u9ed1\u8c93 Friendly Cat"),pe(),ue(6,"mat-menu",null,0)(8,"div",4),Ke(9),pe(),Et(10,"mat-divider"),ot(11,lUe,2,1,"ng-container",5),ue(12,"button",6)(13,"div",7),kt("click",function(){return hn(s),fn(i.loginOrlogout())}),Ke(14),pe()()()()}if(2&r){const s=sg(7);de(),Me("matMenuTriggerFor",s),de(8),en(" ",i.user?"\u60a8\u6536\u85cf\u7684\u5e97\u5bb6":"\u767b\u5165\u5f8c\u53ef\u6536\u85cf\u5e97\u5bb6"," "),de(2),Me("ngForOf",i.favoriteStores),de(3),en(" ",i.user?i.user.displayName+" \u767b\u51fa":" \u767b\u5165"," ")}},dependencies:[_b,sf,Ire,BBe,GI,nD,ZBe,nUe,iUe],styles:['@charset "UTF-8";.toolbar[_ngcontent-%COMP%]{background-color:#f4efe6;color:#019863;box-shadow:4px 0 6px #0000001a}.mat-menu-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.menu-header[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;font-weight:700;color:#a18249}.store-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px;display:inline-block;vertical-align:middle}.text-with-shadow[_ngcontent-%COMP%]{font-weight:700;text-shadow:2px 2px 5px rgba(0,0,0,.2)}']})}}return n})();const iD=n=>({opacity:n});function uUe(n,e){if(1&n&&(ue(0,"div",29)(1,"span",30),Ke(2),Ps(3,"async"),Et(4,"mat-progress-spinner",31),pe()()),2&n){const t=Pe();de(2),en(" ",ef(3,1,t.loadingService.message$)," ")}}function dUe(n,e){1&n&&(ue(0,"div",32),Ke(1," \u770b\u770b\u9644\u8fd1\u6709\u5565\u597d\u5403\u7684\u5427\uff01 "),pe())}function hUe(n,e){if(1&n&&(ue(0,"div",35),Et(1,"img",36),ue(2,"div",37)(3,"span"),Ke(4),pe(),ue(5,"span",38),Ke(6),pe()()()),2&n){const t=Pe().$implicit,r=Pe();de(),ju("src",r.sevenElevenIconUrl,ii),de(3),en("",t.name,"\u9580\u5e02"),de(2),Ro(t.addr)}}function fUe(n,e){if(1&n&&(ue(0,"div",35),Et(1,"img",39),ue(2,"div",37)(3,"span"),Ke(4),pe(),ue(5,"span",38),Ke(6),pe()()()),2&n){const t=Pe().$implicit,r=Pe();de(),ju("src",r.familyMartIconUrl,ii),de(3),en("",t.name.replace("\u5e97",""),"\u9580\u5e02"),de(2),Ro(t.addr)}}function pUe(n,e){if(1&n&&(ue(0,"mat-option",33),ot(1,hUe,7,3,"div",34)(2,fUe,7,3,"div",34),pe()),2&n){const t=e.$implicit;Me("value",t),de(),Me("ngIf","7-11"===t.label),de(),Me("ngIf","\u5168\u5bb6"===t.label)}}function mUe(n,e){1&n&&rg(0)}function gUe(n,e){if(1&n&&(ue(0,"p",63),Ke(1),Ps(2,"round"),pe()),2&n){const t=Pe(4).$implicit;de(),en(" \u8ddd\u96e2\u60a8: ",og(2,1,t.distance,1)," ")}}function _Ue(n,e){1&n&&(us(),ue(0,"svg",64),Et(1,"path",65),pe())}function yUe(n,e){1&n&&(us(),ue(0,"svg",66),Et(1,"path",65),pe())}function vUe(n,e){if(1&n){const t=Ti();ue(0,"div",68),kt("click",function(){hn(t);const i=Pe().$implicit,s=Pe(4).$implicit;return fn(Pe(2).toggleSubCategoryDetails(s,i))}),Et(1,"img",69),ue(2,"div")(3,"span",70),Ke(4),pe(),ue(5,"div",71),Ke(6),pe()()()}if(2&n){const t=Pe().$implicit,r=Pe(4).$implicit,i=Pe(2);Yv("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n                      ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Lr("pointer-events-none",0===i.getSubCategoryTotalQty(r,t)),de(),ju("alt",t.Name),Me("src",t.ImageUrl,ii)("ngStyle",ib(10,iD,0===i.getSubCategoryTotalQty(r,t)?.3:1)),de(3),Ro(t.Name),de(2),en(" ",i.getSubCategoryTotalQty(r,t)," ")}}function bUe(n,e){if(1&n&&(Rs(0),ot(1,vUe,7,12,"div",67),Ms()),2&n){const t=e.$implicit,r=Pe(4).$implicit,i=Pe(2);de(),Me("ngIf",i.getSubCategoryTotalQty(r,t)>0)}}function EUe(n,e){if(1&n&&(ue(0,"div",72),Et(1,"app-display",73),pe()),2&n){const t=Pe(6);de(),Me("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetails711)}}function IUe(n,e){if(1&n){const t=Ti();Rs(0),ue(1,"div",47)(2,"div",48)(3,"div",49),Et(4,"img",50),pe(),ue(5,"div",51)(6,"h2",52),Ke(7),ue(8,"a",53),Et(9,"img",54),pe()(),ot(10,gUe,3,4,"p",55),pe()(),ue(11,"div",56)(12,"button",57),kt("click",function(){hn(t);const i=Pe(3).$implicit;return fn(Pe(2).toggleFavorite(i))}),ot(13,_Ue,2,0,"svg",58)(14,yUe,2,0,"svg",59),pe()()(),ue(15,"div",60)(16,"div",61),ot(17,bUe,2,1,"ng-container",40),Ps(18,"slice"),pe(),ot(19,EUe,2,3,"div",62),pe(),Ms()}if(2&n){const t=Pe(3).$implicit,r=Pe(2);de(4),Me("src",r.sevenElevenIconUrl,ii),de(3),en(" 7-11",t.StoreName,"\u9580\u5e02 "),de(),Jh("href","https://www.google.com/maps/search/7-ELEVEN",t.StoreName,"\u9580\u5e02",ii),de(2),Me("ngIf",t.distance>=1),de(3),Me("ngIf",r.isFavorite(t)&&r.user),de(),Me("ngIf",!r.isFavorite(t)&&r.user),de(3),Me("ngForOf",ob(18,9,r.foodCategories,0,10)),de(2),Me("ngIf",r.selectedCategory&&r.selectedStore===t)}}function wUe(n,e){if(1&n&&(ue(0,"div",45),ot(1,IUe,20,13,"ng-container",46),pe()),2&n){const t=Pe(2).$implicit;de(),Me("ngIf","7-11"===t.label&&t.RemainingQty>0)}}function CUe(n,e){if(1&n&&(ue(0,"p",63),Ke(1),Ps(2,"round"),pe()),2&n){const t=Pe(3).$implicit;de(),en(" \u8ddd\u96e2\u60a8: ",og(2,1,t.distance,1)," ")}}function TUe(n,e){1&n&&(us(),ue(0,"svg",64),Et(1,"path",65),pe())}function AUe(n,e){1&n&&(us(),ue(0,"svg",66),Et(1,"path",65),pe())}function SUe(n,e){if(1&n){const t=Ti();ue(0,"div",68),kt("click",function(){const i=hn(t).$implicit,s=Pe(3).$implicit;return fn(Pe(2).toggleSubCategoryDetails(s,i))}),Et(1,"img",69),ue(2,"div")(3,"span",70),Ke(4),pe(),ue(5,"div",71),Ke(6),pe()()()}if(2&n){const t=e.$implicit,r=Pe(3).$implicit,i=Pe(2);Yv("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n            ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Lr("pointer-events-none",0===i.getFSubCategoryQty(r,t)),de(),ju("alt",i.getFCatName(t)),Me("src",i.getFUrl(t),ii)("ngStyle",ib(10,iD,0===i.getFSubCategoryQty(r,t)?.3:1)),de(3),Ro(i.getFCatName(t)),de(2),en(" ",i.getFSubCategoryQty(r,t)," ")}}function xUe(n,e){if(1&n&&(ue(0,"div",76),Et(1,"app-display",77),pe()),2&n){const t=Pe(5);de(),Me("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetailsFamilyMart)}}function DUe(n,e){if(1&n){const t=Ti();ue(0,"div",45)(1,"div",47)(2,"div",48)(3,"div",49),Et(4,"img",50),pe(),ue(5,"div",51)(6,"h2",52),Ke(7),ue(8,"a",53),Et(9,"img",54),pe()(),ot(10,CUe,3,4,"p",55),pe()(),ue(11,"div",56)(12,"button",57),kt("click",function(){hn(t);const i=Pe(2).$implicit;return fn(Pe(2).toggleFavorite(i))}),ot(13,TUe,2,0,"svg",58)(14,AUe,2,0,"svg",59),pe()()(),ue(15,"div",61),ot(16,SUe,7,12,"div",74),Ps(17,"slice"),pe(),ot(18,xUe,2,3,"div",75),pe()}if(2&n){const t=Pe(2).$implicit,r=Pe(2);de(4),Me("src",r.familyMartIconUrl,ii),de(3),en(" ",t.name," "),de(),Jh("href","https://www.google.com/maps/search/\u5168\u5bb6\u4fbf\u5229\u5546\u5e97",r.fStoreName(t.name),"",ii),de(2),Me("ngIf",t.distance>=1),de(3),Me("ngIf",r.isFavorite(t)&&r.user),de(),Me("ngIf",!r.isFavorite(t)&&r.user),de(2),Me("ngForOf",ob(17,9,t.info,0,10)),de(2),Me("ngIf",r.selectedCategory&&r.selectedStore===t)}}function RUe(n,e){if(1&n&&(ue(0,"div",42)(1,"div",43),ot(2,wUe,2,1,"div",44)(3,DUe,19,13,"div",44),pe()()),2&n){const t=Pe().$implicit;de(2),Me("ngIf",t.RemainingQty>0),de(),Me("ngIf","\u5168\u5bb6"===t.label)}}function MUe(n,e){if(1&n&&(Rs(0),ot(1,RUe,4,2,"div",41),Ms()),2&n){const t=Pe(2);de(),Me("ngIf",t.totalStoresShowList.length>0)}}function PUe(n,e){1&n&&ot(0,MUe,2,1,"ng-container",40),2&n&&Me("ngForOf",Pe().totalStoresShowList)}function kUe(n,e){1&n&&(Rs(0),ue(1,"div",42)(2,"div",43)(3,"div",78),Ke(4," \u60a8\u641c\u5c0b\u7684\u5546\u5e97\u76ee\u524d\u7121\u6298\u6263\u5546\u54c1\uff0c\u4ee5\u4e0b\u70ba\u9644\u8fd1\u5e97\u5bb6\uff1a "),pe()()(),Et(5,"br"),Ms())}function NUe(n,e){if(1&n&&(ue(0,"p",63),Ke(1),Ps(2,"round"),pe()),2&n){const t=Pe(4).$implicit;de(),en(" \u8ddd\u96e2\u60a8\u641c\u5c0b\u7684\u5546\u5e97: ",og(2,1,t.distance,1)," ")}}function OUe(n,e){1&n&&(ue(0,"p",80),Ke(1," ( \u60a8\u641c\u5c0b\u7684\u5e97\u5bb6 ) "),pe())}function FUe(n,e){1&n&&(us(),ue(0,"svg",64),Et(1,"path",65),pe())}function LUe(n,e){1&n&&(us(),ue(0,"svg",66),Et(1,"path",65),pe())}function VUe(n,e){if(1&n){const t=Ti();ue(0,"div",68),kt("click",function(){hn(t);const i=Pe().$implicit,s=Pe(4).$implicit;return fn(Pe(2).toggleSubCategoryDetails(s,i))}),Et(1,"img",69),ue(2,"div")(3,"span",70),Ke(4),pe(),ue(5,"div",71),Ke(6),pe()()()}if(2&n){const t=Pe().$implicit,r=Pe(4).$implicit,i=Pe(2);Yv("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n                      ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Lr("pointer-events-none",0===i.getSubCategoryTotalQty(r,t)),de(),ju("alt",t.Name),Me("src",t.ImageUrl,ii)("ngStyle",ib(10,iD,0===i.getSubCategoryTotalQty(r,t)?.3:1)),de(3),Ro(t.Name),de(2),en(" ",i.getSubCategoryTotalQty(r,t)," ")}}function BUe(n,e){if(1&n&&(Rs(0),ot(1,VUe,7,12,"div",67),Ms()),2&n){const t=e.$implicit,r=Pe(4).$implicit,i=Pe(2);de(),Me("ngIf",i.getSubCategoryTotalQty(r,t)>0)}}function UUe(n,e){if(1&n&&(ue(0,"div",72),Et(1,"app-display",73),pe()),2&n){const t=Pe(6);de(),Me("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetails711)}}function jUe(n,e){if(1&n){const t=Ti();Rs(0),ue(1,"div",47)(2,"div",48)(3,"div",49),Et(4,"img",50),pe(),ue(5,"div",51)(6,"h2",52),Ke(7),ue(8,"a",53),Et(9,"img",54),pe()(),ot(10,NUe,3,4,"p",55)(11,OUe,2,0,"p",79),pe()(),ue(12,"div",56)(13,"button",57),kt("click",function(){hn(t);const i=Pe(3).$implicit;return fn(Pe(2).toggleFavorite(i))}),ot(14,FUe,2,0,"svg",58)(15,LUe,2,0,"svg",59),pe()()(),ue(16,"div",60)(17,"div",61),ot(18,BUe,2,1,"ng-container",40),Ps(19,"slice"),pe(),ot(20,UUe,2,3,"div",62),pe(),Ms()}if(2&n){const t=Pe(3).$implicit,r=Pe(2);de(4),Me("src",r.sevenElevenIconUrl,ii),de(3),en(" 7-11",t.StoreName,"\u9580\u5e02 "),de(),Jh("href","https://www.google.com/maps/search/7-ELEVEN",t.StoreName,"\u9580\u5e02",ii),de(2),Me("ngIf",t.distance>=1),de(),Me("ngIf",t.distance<=1),de(3),Me("ngIf",r.isFavorite(t)&&r.user),de(),Me("ngIf",!r.isFavorite(t)&&r.user),de(3),Me("ngForOf",ob(19,10,r.foodCategories,0,10)),de(2),Me("ngIf",r.selectedCategory&&r.selectedStore===t)}}function zUe(n,e){if(1&n&&(ue(0,"div",45),ot(1,jUe,21,14,"ng-container",46),pe()),2&n){const t=Pe(2).$implicit;de(),Me("ngIf","7-11"===t.label&&t.RemainingQty>0)}}function HUe(n,e){if(1&n&&(ue(0,"p",63),Ke(1),Ps(2,"round"),pe()),2&n){const t=Pe(3).$implicit;de(),en(" \u8ddd\u96e2\u60a8\u641c\u5c0b\u7684\u5546\u5e97: ",og(2,1,t.distance,1)," ")}}function $Ue(n,e){1&n&&(ue(0,"p",80),Ke(1," ( \u60a8\u641c\u5c0b\u7684\u5e97\u5bb6 ) "),pe())}function WUe(n,e){1&n&&(us(),ue(0,"svg",64),Et(1,"path",65),pe())}function GUe(n,e){1&n&&(us(),ue(0,"svg",66),Et(1,"path",65),pe())}function qUe(n,e){if(1&n){const t=Ti();ue(0,"div",68),kt("click",function(){const i=hn(t).$implicit,s=Pe(3).$implicit;return fn(Pe(2).toggleSubCategoryDetails(s,i))}),Et(1,"img",69),ue(2,"div")(3,"span",70),Ke(4),pe(),ue(5,"div",71),Ke(6),pe()()()}if(2&n){const t=e.$implicit,r=Pe(3).$implicit,i=Pe(2);Yv("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n            ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Lr("pointer-events-none",0===i.getFSubCategoryQty(r,t)),de(),ju("alt",i.getFCatName(t)),Me("src",i.getFUrl(t),ii)("ngStyle",ib(10,iD,0===i.getFSubCategoryQty(r,t)?.3:1)),de(3),Ro(i.getFCatName(t)),de(2),en(" ",i.getFSubCategoryQty(r,t)," ")}}function KUe(n,e){if(1&n&&(ue(0,"div",76),Et(1,"app-display",77),pe()),2&n){const t=Pe(5);de(),Me("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetailsFamilyMart)}}function QUe(n,e){if(1&n){const t=Ti();ue(0,"div",45)(1,"div",47)(2,"div",48)(3,"div",49),Et(4,"img",50),pe(),ue(5,"div",51)(6,"h2",52),Ke(7),ue(8,"a",53),Et(9,"img",54),pe()(),ot(10,HUe,3,4,"p",55)(11,$Ue,2,0,"p",79),pe()(),ue(12,"div",56)(13,"button",57),kt("click",function(){hn(t);const i=Pe(2).$implicit;return fn(Pe(2).toggleFavorite(i))}),ot(14,WUe,2,0,"svg",58)(15,GUe,2,0,"svg",59),pe()()(),ue(16,"div",61),ot(17,qUe,7,12,"div",74),Ps(18,"slice"),pe(),ot(19,KUe,2,3,"div",75),pe()}if(2&n){const t=Pe(2).$implicit,r=Pe(2);de(4),Me("src",r.familyMartIconUrl,ii),de(3),en(" ",t.name," "),de(),Jh("href","https://www.google.com/maps/search/\u5168\u5bb6\u4fbf\u5229\u5546\u5e97",r.fStoreName(t.name),"",ii),de(2),Me("ngIf",t.distance>=1),de(),Me("ngIf",t.distance<=1),de(3),Me("ngIf",r.isFavorite(t)&&r.user),de(),Me("ngIf",!r.isFavorite(t)&&r.user),de(2),Me("ngForOf",ob(18,10,t.info,0,10)),de(2),Me("ngIf",r.selectedCategory&&r.selectedStore===t)}}function YUe(n,e){if(1&n&&(ue(0,"div",42)(1,"div",43),ot(2,zUe,2,1,"div",44)(3,QUe,20,14,"div",44),pe()()),2&n){const t=Pe().$implicit;de(2),Me("ngIf",t.RemainingQty>0),de(),Me("ngIf","\u5168\u5bb6"===t.label)}}function XUe(n,e){if(1&n&&(Rs(0),ot(1,YUe,4,2,"div",41),Ms()),2&n){const t=Pe(2);de(),Me("ngIf",t.totalStoresShowList.length>0)}}function ZUe(n,e){if(1&n&&ot(0,kUe,6,0,"ng-container",46)(1,XUe,2,1,"ng-container",40),2&n){const t=Pe();Me("ngIf",(null==t.totalStoresShowList[0]?null:t.totalStoresShowList[0].distance)>1||0===(null==t.totalStoresShowList[0]?null:t.totalStoresShowList[0].remainingQty)),de(),Me("ngForOf",t.totalStoresShowList)}}const JUe=[{path:"**",component:(()=>{class n{constructor(t,r,i,s,o,a,l,c,u){this.http=t,this.geolocationService=r,this.sevenElevenService=i,this.familyMartService=s,this.authService=o,this.loadingService=a,this.dialog=l,this.firestore=c,this.storeDataService=u,this.user=null,this.isLocationSearchMode=!0,this.searchTerm="",this.searchSelectedStore=null,this.selectedStoreName="",this.foodDetails711=[],this.foodDetailsFamilyMart=[],this.storeFilter="all",this.dropDown711List=[],this.dropDownFamilyMartList=[],this.unifiedDropDownList=[],this.sevenElevenIconUrl=Os_sevenElevenUrl_icon,this.familyMartIconUrl=Os_familyMartUrl_icon,this.zipcodes=[],this.cities=[],this.filteredDistricts=[],this.zipcodeList=[],this.selectedCity=null,this.selectedDistrict=null,this.selectedZipcode=null,this.foodCategories=[],this.nearby711Stores=[],this.nearbyFamilyMartStores=[],this.totalStoresShowList=[],this.filteredStoresList=[],this.favoriteStores=[],this.searchInput$=new E,this.searchForm=new hf({selectedStoreName:new yg("")})}ngOnInit(){this.searchInput$.pipe(VN(300),RA()).subscribe(t=>{this.handleSearch(t)}),this.init()}getCityName(){return this.http.get("https://demeter.5fpro.com/tw/zipcodes.json").pipe(ai(r=>{this.zipcodes=r,this.cities=[...new Set(r.map(i=>i.city_name))],this.zipcodeList=[...new Set(r.map(i=>i.zipcode))]}))}onCityChange(t){this.filteredDistricts=this.zipcodes.filter(r=>r.city_name===t),this.selectedDistrict=null,this.selectedZipcode=null}onDistrictChange(t){this.selectedZipcode=t}handleError(t){switch(t.code){case 1:return"\u4f7f\u7528\u8005\u62d2\u7d55\u4f4d\u7f6e\u5b58\u53d6";case 2:return"\u7121\u6cd5\u53d6\u5f97\u4f4d\u7f6e\u8cc7\u8a0a";case 3:return"\u4f4d\u7f6e\u8acb\u6c42\u903e\u6642";default:return"\u672a\u77e5\u932f\u8aa4"}}init(){this.authService.getUser().subscribe(t=>{t&&t.emailVerified&&(this.user=t,this.loadFavoriteStores())}),this.loadingService.show("\u8f09\u5165\u5546\u5e97\u8cc7\u8a0a\u4e2d\uff0c\u8acb\u7a0d\u5f8c\u55b5"),this.sevenElevenService.getFoodDetails().subscribe(t=>{this.foodDetails711=t}),this.familyMartService.getFoodDetails().subscribe(t=>{this.foodDetailsFamilyMart=t}),this.getFamilyMartAllStore(),Qe(!0).pipe(Qt(()=>this.sevenElevenService.getAccessToken()),Qt(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Qe([])),Ju(t=>(console.error("Error:",t),Qe([])))).subscribe(t=>{t&&t.element?(this.foodCategories=t.element,this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}getFamilyMartAllStore(){this.familyMartService.getStores().subscribe(t=>{t.length>0&&(this.dropDownFamilyMartList=t)})}getFoodSubCategoryImage(t){for(let r of this.foodCategories)if(r.Children.find(s=>s.ID===t))return r.ImageUrl;return null}getSubCategoryTotalQty(t,r){let i=0;for(const s of t.CategoryStockItems)for(const o of r.Children)s.NodeID===o.ID&&(i+=s.RemainingQty);return i}toggleSubCategoryDetails(t,r){this.selectedCategory=r,this.selectedStore=t}onInput(t){this.searchInput$.next(t.target.value)}handleSearch(t){t.length>=2?(this.loadingService.show("\u6b63\u5728\u70ba\u60a8\u641c\u5c0b\u5e97\u5bb6"),this.unifiedDropDownList=[],this.latitude||this.longitude?Qe(!0).pipe(Qt(()=>this.sevenElevenService.getAccessToken()),Qt(r=>r&&r.element?(sessionStorage.setItem("711Token",r.element),this.sevenElevenService.getStoreByAddress(t)):Qe([]))).subscribe(r=>{if(r&&r.isSuccess){this.dropDown711List=r.element;const i=this.dropDownFamilyMartList.map(u=>({...u,Name:u.Name.replace("\u5168\u5bb6","")})).filter(u=>u.Name.includes(t)||u.addr.includes(t)),s=this.dropDown711List.map(u=>({...u,Name:u.StoreName.replace("711","")})).filter(u=>u.Name.includes(t)||u.Address.includes(t)),o=i.map(u=>({name:u.Name,addr:u.addr,label:"\u5168\u5bb6",longitude:u.px_wgs84,latitude:u.py_wgs84}));s.map(u=>({name:u.StoreName,addr:u.Address,label:"7-11",longitude:u.Longitude,latitude:u.Latitude})).forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)}),o.forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)});const l=this.unifiedDropDownList.filter(u=>u.name.includes(t)).sort((u,h)=>(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude})),c=this.unifiedDropDownList.filter(u=>u.addr.includes(t)&&!l.includes(u)).sort((u,h)=>(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude}));this.unifiedDropDownList=[...l,...c],0===this.unifiedDropDownList.length?(this.loadingService.show("\u597d\u50cf\u627e\u4e0d\u5230\u5e97\u5bb6\u8036\uff5e\u8acb\u91cd\u65b0\u641c\u5c0b"),setTimeout(()=>{this.loadingService.hide()},2e3)):this.loadingService.hide()}},r=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",r),this.loadingService.hide()}):Wn(this.geolocationService.getCurrentPosition()).pipe(Qt(r=>{const s=r.coords.longitude;return this.latitude=r.coords.latitude,this.longitude=s,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Qe([])}),Qt(()=>this.sevenElevenService.getAccessToken()),Qt(r=>r&&r.element?(sessionStorage.setItem("711Token",r.element),this.sevenElevenService.getStoreByAddress(t)):[])).subscribe(r=>{if(r&&r.isSuccess){this.dropDown711List=r.element;const i=this.dropDownFamilyMartList.map(u=>({...u,Name:u.Name.replace("\u5168\u5bb6","")})).filter(u=>u.Name.includes(t)||u.addr.includes(t)),s=this.dropDown711List.map(u=>({...u,Name:u.StoreName.replace("711","")})).filter(u=>u.Name.includes(t)||u.Address.includes(t)),o=i.map(u=>({name:u.Name,addr:u.addr,label:"\u5168\u5bb6",longitude:u.px_wgs84,latitude:u.py_wgs84}));s.map(u=>({name:u.StoreName,addr:u.Address,label:"7-11",longitude:u.Longitude,latitude:u.Latitude})).forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)}),o.forEach(u=>{this.unifiedDropDownList.some(h=>h.name===u.name&&h.addr===u.addr)||this.unifiedDropDownList.push(u)});const l=this.unifiedDropDownList.filter(u=>u.name.includes(t)).sort((u,h)=>(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude})),c=this.unifiedDropDownList.filter(u=>u.addr.includes(t)&&!l.includes(u)).sort((u,h)=>(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:u.latitude,longitude:u.longitude})-(0,rd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:h.latitude,longitude:h.longitude}));this.unifiedDropDownList=[...l,...c],0===this.unifiedDropDownList.length?(this.loadingService.show("\u597d\u50cf\u627e\u4e0d\u5230\u5e97\u5bb6\u8036\uff5e\u8acb\u91cd\u65b0\u641c\u5c0b"),setTimeout(()=>{this.loadingService.hide()},2e3)):this.loadingService.hide()}},r=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",r),this.loadingService.hide()})):this.unifiedDropDownList=[]}onOptionSelect(t,r,i){this.isLocationSearchMode=!1,this.totalStoresShowList=[],this.searchSelectedStore=t?.option.value.name,this.searchTerm=t?.option.value.label+t?.option.value.name.replace("\u5e97","")+"\u9580\u5e02";const a=void 0!==i?i:Number(t?.option.value.longitude),l=void 0!==r?r:Number(t?.option.value.latitude);this.loadingService.show("\u6b63\u5728\u641c\u5c0b\u5e97\u5bb6\u55b5"),Wn(this.geolocationService.getCurrentPosition()).pipe(Qt(c=>{const h=c.coords.longitude;return this.latitude=c.coords.latitude,this.longitude=h,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Qe([])}),Qt(c=>c?this.sevenElevenService.getAccessToken():[]),Qt(c=>c&&c.element?(sessionStorage.setItem("711Token",c.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Qe([]))).subscribe(c=>{c?(this.searchCombineAndTransformStores(l,a),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}onSubmit(){console.log("\u8f38\u5165\u7684\u641c\u5c0b\u95dc\u9375\u5b57:",this.searchSelectedStore)}onUseCurrentLocation(){this.isLocationSearchMode=!0,this.totalStoresShowList=[],this.unifiedDropDownList=[],this.searchTerm="",this.loadingService.show("\u641c\u5c0b\u5e97\u5bb6\u4e2d\u55b5"),Wn(this.geolocationService.getCurrentPosition()).pipe(Qt(t=>{const i=t.coords.longitude;return this.latitude=t.coords.latitude,this.longitude=i,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Qe([])}),Qt(t=>t?this.sevenElevenService.getAccessToken():[]),Qt(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Qe([]))).subscribe(t=>{t?(this.searchCombineAndTransformStores(),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}combineStoreList(t,r){this.totalStoresShowList=[],this.nearby711Stores.forEach(i=>{const s={...i,storeName:`7-11${i.StoreName}\u9580\u5e02`,label:"7-11",distance:i.Distance,remainingQty:i.RemainingQty,showDistance:!0};this.totalStoresShowList.push(s)}),this.nearbyFamilyMartStores.forEach(i=>{const s={...i,storeName:i.name,label:"\u5168\u5bb6",distance:i.distance,showDistance:!0};this.totalStoresShowList.push(s)}),t&&r?(this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),console.log("\u4f7f\u7528\u8005\u641c\u5c0b\u5e97\u5bb6\u9644\u8fd1\u7684\u5546\u5e97:",this.totalStoresShowList)):(this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),console.log("\u4f7f\u7528\u8005\u9644\u8fd1\u7684\u5546\u5e97:",this.totalStoresShowList))}searchCombineAndTransformStores(t,r){const i=t||this.latitude,s=r||this.longitude,a={Latitude:i,Longitude:s};kT({sevenEleven:this.sevenElevenService.getNearByStoreList({CurrentLocation:{Latitude:i,Longitude:s},SearchLocation:{Latitude:i,Longitude:s}}),familyMart:this.familyMartService.getNearByStoreList(a)}).subscribe(({sevenEleven:l,familyMart:c})=>{l&&l.element&&l.element.StoreStockItemList&&(this.nearby711Stores=l.element.StoreStockItemList.sort((u,h)=>u.Distance-h.Distance)),c&&1===c.code&&(this.nearbyFamilyMartStores=c.data.sort((u,h)=>u.distance-h.distance)),t&&r?(this.combineStoreList(t,r),this.storeDataService.setStores(this.totalStoresShowList),this.storeDataService.setIsUserLocationSearch(!1)):(this.combineStoreList(),this.storeDataService.setStores(this.totalStoresShowList),this.storeDataService.setIsUserLocationSearch(!0))},l=>{console.error("Error fetching store data:",l)})}getFStoreQty(t){var r=0;return t.info.forEach(i=>{r+=i.qty}),r}getFUrl(t){return t.iconURL}getFCatName(t){return t.name}getFSubCategoryQty(t,r){return r.qty}fStoreName(t){return t?t.replace("\u5168\u5bb6",""):""}loadFavoriteStores(){this.user.emailVerified&&this.firestore.collection("users").doc(this.user.uid).collection("favorites").valueChanges().subscribe(r=>{this.favoriteStores=r,console.log("favoriteStores",this.favoriteStores)})}toggleFavorite(t){if(this.user.emailVerified){const i=this.firestore.collection("users").doc(this.user.uid).collection("favorites").doc(t.storeName);this.isFavorite(t)?this.dialog.open(iE,{data:{title:"\u53d6\u6d88\u6536\u85cf",message:`\u5df2\u5c07\u300e${t.storeName}\u300f\u5f9e\u6536\u85cf\u4e2d\u79fb\u9664`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(o=>{i.delete()}):this.dialog.open(iE,{data:{title:"\u65b0\u589e\u6536\u85cf",message:`\u300e${t.storeName}\u300f\u5df2\u52a0\u5165\u60a8\u7684\u6536\u85cf\u5e97\u5bb6`,imgPath:"assets/S__222224406.jpg"}}).afterClosed().subscribe(o=>{const a={storeName:t.storeName};t.StoreName&&(a.store711Name=t.StoreName,a.label="7-11"),t.longitude&&t.latitude&&(a.storeFLongitude=t.longitude,a.storeFLatitude=t.latitude,a.label="\u5168\u5bb6"),i.set(a)})}else console.log("\u7528\u6236\u5c1a\u672a\u767b\u5165\u6216\u4fe1\u7bb1\u672a\u9a57\u8b49")}isFavorite(t){return this.favoriteStores.some(r=>r.storeName===t.storeName)}onUserUpdated(t){this.user=t,t&&this.loadFavoriteStores()}onFavoriteStoresUpdated(t){this.favoriteStores=t}onFavoriteStoreSearch(t){console.log("\u641c\u5c0b\u6536\u85cf\u5e97\u5bb6",t),this.loadingService.show("\u5e6b\u4f60\u627e\u770b\u770b\u5537");var r=0,i=0;"\u5168\u5bb6"===t.label?(this.onOptionSelect(null,r=t.storeFLatitude,i=t.storeFLongitude),this.searchTerm=""):Wn(this.geolocationService.getCurrentPosition()).pipe(Qt(s=>{const a=s.coords.longitude;return this.latitude=s.coords.latitude,this.longitude=a,Qe([])}),Qt(s=>s?this.sevenElevenService.getAccessToken():[]),Qt(s=>s&&s.element?(sessionStorage.setItem("711Token",s.element),this.sevenElevenService.getStoreByAddress(t.store711Name)):Qe([]))).subscribe(s=>{s?(r=s.element[0].Latitude,i=s.element[0].Longitude,console.log(r,i),this.onOptionSelect(null,r,i),this.searchTerm=""):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}static{this.\u0275fac=function(r){return new(r||n)(De(wb),De(OAe),De(aO),De(FAe),De(KS),De(lNe),De(Sf),De(V2e),De(ere))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-new-search"]],decls:37,vars:14,consts:[["auto","matAutocomplete"],["locationSearchMode",""],["storeSearchMode",""],[3,"userUpdated","favoriteStoresUpdated","searchStore","user","favoriteStores"],[1,"container","mx-auto","my-3","p-6","bg-primary-white","max-w-4xl"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],["src","assets/S__222224406.jpg","alt","Friendly Superhero",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24"],[1,"text-primary-default","sm:text-xl","font-bold","ml-4","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],["class","loading-container",4,"ngIf"],["class","text-primary-default lg:text-md sm:text-xl",4,"ngIf"],[1,"text-xs","sm:text-sm","text-success","mb-4","text-center"],[1,"w-full",3,"ngSubmit"],[1,"flex","justify-center","w-full"],[1,"w-full","px-4","py-3"],[1,"flex","flex-col","h-12","w-full"],[1,"flex","w-full","items-stretch","rounded-lg","h-full"],["data-icon","MagnifyingGlass","data-size","24px","data-weight","regular",1,"text-primary-default","flex","border-none","bg-primary-light","items-center","justify-center","pl-4","rounded-l-lg","border-r-0"],["xmlns","http://www.w3.org/2000/svg","width","24px","height","24px","fill","currentColor","viewBox","0 0 256 256"],["d","M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"],["mat-input","","placeholder","\u8f38\u5165\u5169\u500b\u5b57\u4ee5\u4e0a\u7684\u5e97\u540d\u6216\u5730\u5740\u641c\u5c0b","name","first",1,"flex","w-full","flex-1","resize-none","overflow-hidden","rounded-lg","text-primary-default","focus:outline-none","focus:ring-0","border-none","bg-primary-light","focus:border-transparent","focus:bg-inherit","h-full","placeholder:text-primary-default","px-4","rounded-l-none","border-l-3","pl-2","text-base","font-normal","leading-normal",3,"ngModelChange","input","matAutocomplete","ngModel"],[3,"optionSelected"],["class","p-2 hover:bg-primary-light focus:bg-primary-default",3,"value",4,"ngFor","ngForOf"],[1,"flex","px-4","py-3","justify-center","items-center"],["type","button",1,"flex","min-w-[84px]","max-w-[480px]","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","h-10","px-4","bg-success","text-white","gap-2","pl-4","text-sm","font-bold","leading-normal","tracking-[0.015em]","text-xs","sm:text-sm","md:text-base",3,"click"],["data-icon","MapPin","data-size","20px","data-weight","regular",1,"text-white"],["xmlns","http://www.w3.org/2000/svg","width","20px","height","20px","fill","currentColor","viewBox","0 0 256 256"],["d","M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z"],[1,"truncate"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"loading-container"],[1,"flex","items-center","text-primary-default","lg:text-md","sm:text-xl"],["mode","indeterminate","diameter","20",1,"text-primary-default"],[1,"text-primary-default","lg:text-md","sm:text-xl"],[1,"p-2","hover:bg-primary-light","focus:bg-primary-default",3,"value"],["class","flex items-center gap-2",4,"ngIf"],[1,"flex","items-center","gap-2"],["alt","7-Eleven Icon",1,"w-4","h-4",3,"src"],[1,"flex","flex-col"],[1,"text-xs","sm:text-sm","text-gray-500"],["alt","FamilyMart Icon",1,"w-4","h-4",3,"src"],[4,"ngFor","ngForOf"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],[1,"w-full","lg:w-4/5","max-w-screen-lg"],["class","store p-4 border border-gray-300 rounded-lg shadow-md mb-6",4,"ngIf"],[1,"store","p-4","border","border-gray-300","rounded-lg","shadow-md","mb-6"],[4,"ngIf"],[1,"flex","items-center","gap-4","bg-primary-white","px-4","min-h-[72px]","py-2","justify-between"],[1,"flex","items-center","gap-4"],["data-icon","Storefront","data-size","24px","data-weight","regular",1,"text-dark","border","border-gray-200","flex","items-center","justify-center","rounded-lg","bg-primary-light","shrink-0","size-12",2,"padding","16px"],["alt","Store Icon","width","24px","height","24px","fill","currentColor",3,"src"],[1,"flex","flex-col","justify-center","text-lg","sm:text-xl","font-semibold"],[1,"text-dark","text-base","font-medium","leading-normal","line-clamp-1"],["target","_blank",1,"ml-2",3,"href"],["src","assets/GoogleMap_icon.png","alt","Google Maps",1,"w-6","h-6","inline-block"],["class","text-success text-sm font-normal leading-normal line-clamp-2",4,"ngIf"],[1,"flex","items-start","justify-end"],[1,"text-red-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"food-categories","mt-4"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-4","gap-0"],["class","sub-category-details mt-4",4,"ngIf"],[1,"text-success","text-sm","font-normal","leading-normal","line-clamp-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[3,"class","pointer-events-none","click",4,"ngIf"],[3,"click"],[1,"w-12","h-12","sm:w-14","sm:h-14","md:w-16","md:h-16","lg:w-20","lg:h-20","mx-auto","mb-2","object-cover",3,"src","alt","ngStyle"],[1,"block","text-sm","sm:text-base","font-semibold"],[1,"inline-block","text-xs","bg-orange-200","text-orange-900","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"sub-category-details","mt-4"],[3,"store","category","foodDetails"],[3,"class","pointer-events-none","click",4,"ngFor","ngForOf"],["class","sub-category-details mt-4 border-gray-700",4,"ngIf"],[1,"sub-category-details","mt-4","border-gray-700"],[1,"border-gray-700",3,"store","category","foodDetails"],[1,"text-center","text-primary-default","text-lg","font-bold","mt-4"],["class","text-orange-900 text-sm font-normal leading-normal line-clamp-2",4,"ngIf"],[1,"text-orange-900","text-sm","font-normal","leading-normal","line-clamp-2"]],template:function(r,i){if(1&r){const s=Ti();ue(0,"app-sider",3),kt("userUpdated",function(a){return hn(s),fn(i.onUserUpdated(a))})("favoriteStoresUpdated",function(a){return hn(s),fn(i.onFavoriteStoresUpdated(a))})("searchStore",function(a){return hn(s),fn(i.onFavoriteStoreSearch(a))}),pe(),ue(1,"div",4),Rs(2),ue(3,"div",5),Et(4,"img",6),ue(5,"h5",7),ot(6,uUe,5,3,"div",8),Ps(7,"async"),ot(8,dUe,2,0,"div",9),Ps(9,"async"),pe()(),ue(10,"div",10)(11,"p"),Ke(12,"* \u8cc7\u8a0a\u50c5\u4f9b\u53c3\u8003\uff0c\u8acb\u4ee5\u5e97\u5167\u5546\u54c1\u70ba\u6e96"),pe()(),ue(13,"form",11),kt("ngSubmit",function(){return hn(s),fn(i.onSubmit())}),ue(14,"div",12)(15,"div",13)(16,"label",14)(17,"div",15)(18,"div",16),us(),ue(19,"svg",17),Et(20,"path",18),pe()(),kh(),ue(21,"input",19),$C("ngModelChange",function(a){return hn(s),v1(i.searchTerm,a)||(i.searchTerm=a),fn(a)}),kt("input",function(a){return hn(s),fn(i.onInput(a))}),pe()()()()(),ue(22,"mat-autocomplete",20,0),kt("optionSelected",function(a){return hn(s),fn(i.onOptionSelect(a))}),ot(24,pUe,3,3,"mat-option",21),pe(),ue(25,"div",22)(26,"button",23),kt("click",function(){return hn(s),fn(i.onUseCurrentLocation())}),ue(27,"div",24),us(),ue(28,"svg",25),Et(29,"path",26),pe()(),kh(),ue(30,"span",27),Ke(31,"\u4f7f\u7528\u76ee\u524d\u4f4d\u7f6e"),pe()()()(),Ms(),pe(),ot(32,mUe,1,0,"ng-container",28)(33,PUe,1,1,"ng-template",null,1,qC)(35,ZUe,2,2,"ng-template",null,2,qC)}if(2&r){const s=sg(23),o=sg(34),a=sg(36);Me("user",i.user)("favoriteStores",i.favoriteStores),de(6),Me("ngIf",ef(7,10,i.loadingService.loading$)),de(2),Me("ngIf",!ef(9,12,i.loadingService.loading$)),de(13),Me("matAutocomplete",s),HC("ngModel",i.searchTerm),de(3),Me("ngForOf",i.unifiedDropDownList),de(8),Me("ngIf",i.isLocationSearchMode)("ngIfThen",o)("ngIfElse",a)}},dependencies:[_b,sf,A7,zk,mg,LT,Mk,KT,qT,tQ,$2e,oVe,ore,uBe,cUe,x7,R7,Ere]})}}return n})()}];let eje=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({imports:[Y9.forRoot(JUe),Y9]})}}return n})();const sje={provide:new Ee("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const n=k(hs);return()=>n.scrollStrategies.reposition()}}),deps:[hs],useFactory:function ije(n){return()=>n.scrollStrategies.reposition()}};let Nre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[sje],imports:[Jb,Vg,lr,Xb,$I,Vg,lr]})}return n})(),oje=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({})}return n})(),aje=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr,$I,$I,oje,lr]})}return n})(),Ore=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({imports:[lr,lr]})}return n})(),Fre=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({imports:[ok,Yk,$I,Nre,Vg,aje,nre,$8,uVe,wre,UBe,Ore,Mre,rUe,kre]})}}return n})(),pje=(()=>{class n{constructor(t){this.requestService=t,this.url="https://openrouter.ai/api/v1/chat/completions",this.model="deepseek/deepseek-chat-v3-0324:free"}getLLMRes(t,r){const i=JSON.stringify({model:this.model,messages:[{role:"system",content:`\u4f60\u662f\u4e00\u500b\u52a9\u624b\uff0c\u5c08\u9580\u6839\u64da\u5546\u5e97\u8cc7\u8a0a\uff0c\u7be9\u9078\u51fa\u7b26\u5408\u6307\u5b9a\u98df\u7269\u985e\u578b\u7684\u5546\u54c1\u3002\n      \u9019\u908a\u63d0\u4f9bJson\u683c\u5f0f\u7684\u5546\u5e97\u8cc7\u8a0a\u7d66\u4f60\uff1a\n      ${this.jsonListToString(r)}\n\n      1. \u4f60\u7684\u56de\u61c9\u5fc5\u9808\u662f**\u7d14 JSON \u683c\u5f0f**\uff0c\u4e0d\u5305\u542b\u4efb\u4f55\u89e3\u91cb\u6216\u984d\u5916\u6587\u5b57\u3002\n\n      2. \u7576\u5339\u914d foodDesc \u8207\u5546\u5e97\u4e2d\u7684 foodInfo \u6642\uff0c\u8acb\u6aa2\u67e5 foodInfo \u4e2d\u7684\u5546\u54c1\u540d\u7a31\u662f\u5426\u5305\u542b foodDesc \u7684\u95dc\u9375\u5b57\uff08\u4e0d\u5340\u5206\u5927\u5c0f\u5beb\uff09\u3002\u5982\u679c foodDesc \u662f\u591a\u500b\u8a5e\uff0c\u5247\u53ea\u9700\u90e8\u5206\u5339\u914d\u5373\u53ef\u3002\n\n      3. \u5982\u679c foodDesc \u4e2d\u63d0\u5230\u7279\u5b9a\u5546\u5e97\u985e\u578b\uff0c\u8acb\u53ea\u6aa2\u67e5\u8a72\u985e\u578b\u7684\u5546\u5e97\uff1a\n      - \u5168\u5bb6\u4fbf\u5229\u5546\u5e97\uff1a\u8b58\u5225\u8a5e\u5305\u62ec\u300c\u5168\u5bb6\u300d\u300cFamilyMart\u300d\u300cFmaily\u300d\u300c\u5168\u5bb6\u4fbf\u5229\u5546\u5e97\u300d\u3002\n      - 7-11\u4fbf\u5229\u5546\u5e97\uff1a\u8b58\u5225\u8a5e\u5305\u62ec\u300c7-11\u300d\u300c711\u300d\u300c\u7d71\u4e00\u8d85\u5546\u300d\u300c\u4e03\u5341\u4e00\u300d\u3002\n      \u5982\u679c foodDesc \u672a\u6307\u5b9a\u5546\u5e97\u985e\u578b\uff0c\u5247\u6aa2\u67e5\u6240\u6709\u5546\u5e97\u7684 foodInfo\u3002\n\n     4. \u5982\u679c foodDesc \u4e0d\u6d89\u53ca\u5546\u5e97\u5167\u5546\u54c1\uff08\u4f8b\u5982\u5929\u6c23\u3001\u6642\u9593\u3001\u5730\u5740\u7b49\u7121\u95dc\u67e5\u8a62\uff09\uff0c\u8acb\u56de\u50b3\uff1a\n      \`\`\`json\n      { "stores": [], "error": "\u6211\u53ea\u80fd\u5e6b\u5fd9\u641c\u5c0b\u5546\u5e97\u5167\u7684\u98df\u54c1\u8cc7\u8a0a\u5566\u{1f633}" }\n      \`\`\`\n\n      5. \u5982\u679c\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c1\uff0c\u8acb\u56de\u50b3\uff1a\n      \`\`\`json\n      { "stores": [] }\n      \`\`\`\n      `},{role:"user",content:`${t}\u3002\n      \n      \u8acb\u53ea\u56de\u50b3 JSON \u683c\u5f0f\uff0c\u4e0d\u8981\u6709\u5176\u4ed6\u89e3\u91cb\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a\n      \`\`\`json\n      {\n        "stores": [\n        {\n          "storeName": "\u5546\u5e97\u540d\u7a31",\n          "distance": "\u8ddd\u96e2",\n          "items": [\n          "\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c11",\n          "\u7b26\u5408\u689d\u4ef6\u7684\u5546\u54c12"\n          ]\n        }\n        ]\n      }\n      \`\`\`\n      `}],max_tokens:6e3});return this.requestService.get("https://square-water-d5e4.jhcheng-alan.workers.dev/").pipe(Qt(s=>{const o=new Headers({Authorization:s.token,"Content-Type":"application/json"});return this.requestService.post(this.url,null,i,o)}))}jsonListToString(t){return t.map(r=>JSON.stringify(r)).join(", ")}static{this.\u0275fac=function(r){return new(r||n)(Re(oO))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const mje=["chatBody"];function gje(n,e){if(1&n&&(ue(0,"span",13),Ke(1),pe()),2&n){const t=Pe().$implicit;de(),Ro(t.text)}}function _je(n,e){if(1&n&&(ue(0,"span"),Ke(1),pe()),2&n){const t=Pe(2).$implicit;de(),en("\u{1f408}\u200d\u2b1b\uff1a",t.text,"")}}function yje(n,e){if(1&n&&(ue(0,"div"),Et(1,"span",16),pe()),2&n){const t=Pe(2).$implicit,r=Pe(3);de(),Me("innerHTML",r.formatStoreMessage(t.text),R$)}}function vje(n,e){if(1&n&&(ue(0,"div",14),ot(1,_je,2,1,"span",15)(2,yje,2,1,"div",15),pe()),2&n){const t=Pe().$implicit,r=Pe(3);de(),Me("ngIf",!r.isStoreMessage(t.text)),de(),Me("ngIf",r.isStoreMessage(t.text))}}function bje(n,e){if(1&n&&(ue(0,"span",17),Ke(1),pe()),2&n){const t=Pe().$implicit;de(),en(" \u{1f408}\u200d\u2b1b\uff1a ",t.text," ")}}function Eje(n,e){if(1&n&&(ue(0,"div",9),ot(1,gje,2,1,"span",10)(2,vje,3,2,"div",11)(3,bje,2,1,"span",12),pe()),2&n){const t=e.$implicit;Me("ngClass",t.sender),de(),Me("ngIf","user"===t.sender),de(),Me("ngIf","bot"===t.sender&&!t.isLoading),de(),Me("ngIf","bot"===t.sender&&t.isLoading)}}function Ije(n,e){if(1&n&&(ue(0,"div",7,0),ot(2,Eje,4,4,"div",8),pe()),2&n){const t=Pe(2);de(2),Me("ngForOf",t.messages)}}function wje(n,e){if(1&n){const t=Ti();ue(0,"div",18)(1,"input",19),$C("ngModelChange",function(i){hn(t);const s=Pe(2);return v1(s.userInput,i)||(s.userInput=i),fn(i)}),kt("keyup.enter",function(i){return hn(t),fn(Pe(2).handleEnter(i))}),pe(),ue(2,"button",20),kt("click",function(){return hn(t),fn(Pe(2).sendMessage())}),Ke(3,"\u27a4"),pe()()}if(2&n){const t=Pe(2);de(),HC("ngModel",t.userInput),Me("disabled",t.messages[t.messages.length-1].isLoading||!1)("placeholder",t.messages[t.messages.length-1].isLoading?"\u641c\u5c0b\u4e2d\uff0c\u8acb\u7a0d\u5f8c...":"\u8acb\u8f38\u5165\u8a0a\u606f")}}function Cje(n,e){if(1&n){const t=Ti();ue(0,"div",2)(1,"div",3),kt("click",function(){return hn(t),fn(Pe().toggleChat())}),Ke(2," \u9ed1\u8c93\u5e6b\u4f60\u627e\u{1f4ac} "),ue(3,"button",4),kt("click",function(i){return hn(t),fn(Pe().toggleChat(i))}),Ke(4),pe()(),ot(5,Ije,3,1,"div",5)(6,wje,4,3,"div",6),pe()}if(2&n){const t=Pe();Lr("open",t.isOpen),de(4),en(" ",t.isOpen?"\u2796":"\u2795"," "),de(),Me("ngIf",t.isOpen),de(),Me("ngIf",t.isOpen)}}let Lre=(()=>{class n{constructor(t,r,i,s){this.authService=t,this.storeDataService=r,this.sevenElevenRequestService=i,this.llmRequestService=s,this.isLogin=!1,this.storesInfo=[],this.isUserLocationSearch=!0,this.isOpen=!1,this.userInput="",this.userName="",this.messages=[],this.sevenElevenFoodCategoryMap=new Map([["\u4fbf\u7576\u7ca5\u54c1",[137,139,140,142,143,185,187,192]],["\u9eb5\u98df",[144,146,149,151,153,155]],["\u751f\u9bae\u852c\u679c",[157,158]],["\u6c99\u62c9",[160,159,189]],["\u914d\u83dc\u6e6f\u54c1",[161,162]],["\u98ef\u7cf0\u624b\u5377",[163,164,165,166,167]],["\u9eb5\u5305\u86cb\u7cd5",[168,169,170,171]],["\u4e09\u660e\u6cbb\u5821\u985e",[172,178,174,175,176,177,190,191]],["\u751c\u9ede",[179,180,181,182,183]]])}ngOnInit(){this.authService.isLoggedIn().subscribe(t=>{this.isLogin=t}),this.authService.getUser().subscribe(t=>{t||(this.isLogin=!1,this.putMessage("\u55e8\uff5e\uff01 \u60f3\u627e\u4ec0\u9ebc\u985e\u578b\u7684\u98df\u7269\u5462\uff1f","bot")),this.userName=t.displayName,this.putMessage(`\u6b61\u8fce\u56de\u4f86\uff5e${this.userName}\uff01 \u60f3\u627e\u4ec0\u9ebc\u985e\u578b\u7684\u98df\u7269\u5462\uff1f`,"bot")}),this.storeDataService.isLocationSearch$.subscribe(t=>{this.isUserLocationSearch=t})}toggleChat(t){t&&t.stopPropagation(),this.isOpen=!this.isOpen}handleEnter(t){t.isComposing?t.preventDefault():this.sendMessage()}sendMessage(){if(this.userInput.trim()){this.storesInfo=this.storeDataService.getStores().filter(r=>!("7-11"===r.label&&0===r.remainingQty)).slice(0,10),console.log("Filtered storesInfo:",this.storesInfo);const t=this.userInput;if(this.userInput="",this.putMessage(t,"user"),this.messages.length>0&&this.messages[this.messages.length-1].isLoading)return void this.putMessage("\u6b63\u5728\u641c\u5c0b\u4e2d\uff0c\u641c\u5c0b\u5b8c\u7562\u5f8c\u8acb\u91cd\u65b0\u67e5\u8a62...","bot",!1);if(0===this.storesInfo.length)return void this.putMessage("\u8acb\u5148\u9ede\u64ca\u300c\u4f7f\u7528\u76ee\u524d\u4f4d\u7f6e\u300d\u641c\u5c0b\u6309\u9215\uff0c\u624d\u80fd\u5e6b\u4f60\u770b\u9644\u8fd1\u5546\u5e97\u5537\uff01","bot");this.putMessage("\u6b63\u5728\u641c\u5c0b\u9644\u8fd1\u7684\u4fbf\u5229\u5546\u5e97...","bot",!0),this.requestSevenInfoAndCombineFm().subscribe(r=>{this.storesInfo=r,this.llmRequestService.getLLMRes(t,this.storesInfo).subscribe({next:i=>{this.messages=this.messages.filter(s=>!s.isLoading);try{let s=i.choices[0].message.content.trim();s=s.replace(/```(json)?/g,"");const o=JSON.parse(s);if(!o.stores)throw new Error("Invalid store response format");if(o.error)return void this.putMessage(o.error,"bot");if(0===o.stores.length)return void this.putMessage("\u627e\u4e0d\u5230\u4f60\u60f3\u8981\u7684\u6771\u897fQQ","bot");let a="\u{1f408}\u200d\u2b1b\uff1a\u9019\u4e9b\u5546\u5e97\u6709\u4f60\u60f3\u8981\u7684\uff01\n\n";o.stores.forEach(l=>{a+=`\u{1f3ea} ${l.storeName}  \n`,a+=this.isUserLocationSearch?`\uff08\u{1f4cd} \u8ddd\u96e2\u60a8 ${l.distance.toFixed(0)} \u516c\u5c3a\uff09\n`:`\uff08\u{1f4cd} \u8ddd\u96e2\u60a8\u641c\u5c0b\u7684\u5546\u5e97 ${l.distance.toFixed(0)} \u516c\u5c3a\uff09\n`,a+=l.items.length>0?`${l.items.map((c,u)=>`${u+1}. ${c}`).join("\n")}\n\n`:"\u26a0\ufe0f \u9019\u9593\u5e97\u6c92\u6709\u627e\u5230\u76f8\u95dc\u5546\u54c1\n\n"}),this.putMessage(a,"bot")}catch(s){console.error("JSON parse error:",s),this.putMessage("\u8655\u7406\u5546\u5e97\u8cc7\u8a0a\u6642\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66","bot")}},error:i=>{console.error("API request error:",i),this.putMessage("\u7121\u6cd5\u53d6\u5f97\u5546\u5e97\u8cc7\u8a0a\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66","bot")}})})}}putMessage(t,r,i){"bot"===r?setTimeout(()=>{this.messages.push({text:t,sender:r,isLoading:i})},500):this.messages.push({text:t,sender:r})}ngAfterViewChecked(){this.isOpen&&this.chatBody&&this.scrollToBottom()}scrollToBottom(){const t=this.chatBody.nativeElement;t.scrollTop=t.scrollHeight}requestSevenInfoAndCombineFm(){return kT(this.storesInfo.map(r=>r.StoreNo?this.sevenElevenRequestService.getItemsByStoreNo(r.StoreNo).pipe(Be(i=>({storeName:r.storeName,distance:r.distance,foodInfo:i.element.StoreStockItem.CategoryStockItems.map(s=>({category:this.getCategoryNameByNodeID(s.NodeID),RemainingQty:s.RemainingQty,ItemList:s.ItemList}))}))):Qe({storeName:r.storeName,distance:r.distance,foodInfo:r.info}))).pipe(Be(r=>r.filter(i=>i.foodInfo.length>0)))}getCategoryNameByNodeID(t){for(const[r,i]of this.sevenElevenFoodCategoryMap.entries())if(i.includes(t))return r;return"\u672a\u77e5\u5206\u985e"}isStoreMessage(t){return t.includes("\u{1f3ea}")&&t.includes("\u8ddd\u96e2")}formatStoreMessage(t){const r=t.split("\n");let i="",s=!0;for(let o=0;o<r.length;o++)if(r[o].startsWith("\u{1f3ea}")){i+="<br>";const a=r[o].substring(1).trim();let l="";try{l=encodeURIComponent(a)}catch{l=encodeURIComponent(a.replace(/[^\w\u4e00-\u9fa5]/g,""))}i+=`${r[o]} <a href="https://www.google.com/maps/search/${l}" target="_blank" style="display: inline-block; margin-left: 5px;"><img src="assets/GoogleMap_icon.png" alt="Google \u5730\u5716" class="w-3 h-3 inline-block" style="width: 16px; height: 16px; vertical-align: middle;"></a><br>`,s=!1}else""!==r[o].trim()&&(i+=`${r[o]}<br>`);return i}static{this.\u0275fac=function(r){return new(r||n)(De(KS),De(ere),De(aO),De(pje))}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-chatbot"]],viewQuery:function(r,i){if(1&r&&Hu(mje,5),2&r){let s;Js(s=eo())&&(i.chatBody=s.first)}},standalone:!0,features:[si],decls:1,vars:1,consts:[["chatBody",""],["class","chatbot-container",3,"open",4,"ngIf"],[1,"chatbot-container"],[1,"chatbot-header",3,"click"],[1,"toggle-btn",3,"click"],["class","chatbot-body",4,"ngIf"],["class","chatbot-footer",4,"ngIf"],[1,"chatbot-body"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","text-gray-700",4,"ngIf"],["class","text-primary-default",4,"ngIf"],["class","text-primary-default loading-text",4,"ngIf"],[1,"text-gray-700"],[1,"text-primary-default"],[4,"ngIf"],[3,"innerHTML"],[1,"text-primary-default","loading-text"],[1,"chatbot-footer"],["type","text",3,"ngModelChange","keyup.enter","ngModel","disabled","placeholder"],[3,"click"]],template:function(r,i){1&r&&ot(0,Cje,7,5,"div",1),2&r&&Me("ngIf",!0)},dependencies:[Yk,mg,LT,KT,ok,E7,_b,sf,Fre],styles:['@charset "UTF-8";.chatbot-container[_ngcontent-%COMP%]{position:fixed;bottom:1.5rem;right:1.5rem;width:20rem;max-width:50vw;background:#fff;border:1px solid #F4EFE6;border-radius:.625rem;box-shadow:0 .125rem .625rem #0000001a;display:flex;flex-direction:column;overflow:hidden}.chatbot-container.open[_ngcontent-%COMP%]{resize:vertical;height:25rem;max-height:80vh}.chatbot-header[_ngcontent-%COMP%]{background:#a18249;color:#fff;padding:.625rem;cursor:pointer;text-align:center;display:flex;justify-content:space-between;align-items:center}.chatbot-body[_ngcontent-%COMP%]{flex:1;padding:.625rem;overflow-y:auto;scroll-behavior:smooth}.chatbot-body[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:.3125rem 0}.chatbot-body[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#f4efe6;padding:.5rem .75rem;border-radius:.5rem;display:inline-block}.chatbot-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:.3125rem 0}.chatbot-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fcdab3;padding:.5rem .75rem;border-radius:.5rem;display:inline-block}.chatbot-body[_ngcontent-%COMP%]   .text-primary-default[_ngcontent-%COMP%]{white-space:pre-line}.chatbot-footer[_ngcontent-%COMP%]{display:flex;border-top:1px solid #F4EFE6;padding:.3125rem}.chatbot-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.3125rem;border:none;outline:none}.chatbot-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#a18249;color:#fff;border:none;padding:.3125rem .625rem;cursor:pointer}.toggle-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;font-size:1rem}@media (max-width: 768px){.chatbot-container[_ngcontent-%COMP%]{width:18rem;bottom:1rem;right:1rem}.chatbot-container.open[_ngcontent-%COMP%]{height:20rem}}@media (max-width: 480px){.chatbot-container[_ngcontent-%COMP%]{width:90vw;bottom:.5rem;right:.5rem;border-radius:.5rem}.chatbot-container.open[_ngcontent-%COMP%]{height:70vh}.chatbot-header[_ngcontent-%COMP%], .chatbot-body[_ngcontent-%COMP%]{padding:.5rem}.chatbot-footer[_ngcontent-%COMP%]{padding:.25rem}.chatbot-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.25rem .5rem}.toggle-btn[_ngcontent-%COMP%]{font-size:.875rem}}@keyframes _ngcontent-%COMP%_blink{0%{opacity:1}50%{opacity:.5}to{opacity:1}}.loading-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite}']})}}return n})(),Tje=(()=>{class n{constructor(){this.title="friendly-time"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vn({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&Et(0,"router-outlet")(1,"app-chatbot")},dependencies:[hN,Lre]})}}return n})();function Vre(n){return new K(3e3,!1)}function zd(n){switch(n.length){case 0:return new rE;case 1:return n[0];default:return new sQ(n)}}function Bre(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,h=u&&a||new Map;l.forEach((m,y)=>{let b=y,T=m;if("offset"!==y)switch(b=n.normalizePropertyName(b,i),T){case"!":T=t.get(y);break;case Lc:T=r.get(y);break;default:T=n.normalizeStyleValue(y,b,T,i)}h.set(b,T)}),u||s.push(h),a=h,o=c}),i.length)throw function Kje(){return new K(3502,!1)}();return s}function jU(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&zU(t,"start",n)));break;case"done":n.onDone(()=>r(t&&zU(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&zU(t,"destroy",n)))}}function zU(n,e,t){const s=HU(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function HU(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function oa(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Ure(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const o4e=typeof document>"u"?null:document.documentElement;function $U(n){const e=n.parentNode||n.host||null;return e===o4e?null:e}let pp=null,jre=!1;function zre(n,e){for(;e;){if(e===n)return!0;e=$U(e)}return!1}function Hre(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let WU=(()=>{class n{validateStyleProperty(t){return function l4e(n){pp||(pp=function c4e(){return typeof document<"u"?document.body:null}()||{},jre=!!pp.style&&"WebkitAppearance"in pp.style);let e=!0;return pp.style&&!function a4e(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in pp.style,!e&&jre&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in pp.style)),e}(t)}containsElement(t,r){return zre(t,r)}getParentElement(t){return $U(t)}query(t,r,i){return Hre(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new rE(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})();class GU{static{this.NOOP=new WU}}class qU{}const d4e=1e3,KU="ng-enter",sD="ng-leave",oD="ng-trigger",aD=".ng-trigger",Wre="ng-animating",QU=".ng-animating";function ou(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:YU(parseFloat(e[1]),e[2])}function YU(n,e){return"s"===e?n*d4e:n}function lD(n,e,t){return n.hasOwnProperty("duration")?n:function f4e(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Vre()),{duration:0,delay:0,easing:""};i=YU(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=YU(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function Aje(){return new K(3100,!1)}()),a=!0),s<0&&(e.push(function Sje(){return new K(3101,!1)}()),a=!0),a&&e.splice(l,0,Vre())}return{duration:i,delay:s,easing:o}}(n,e,t)}function tc(n,e,t){e.forEach((r,i)=>{const s=ZU(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function mp(n,e){e.forEach((t,r)=>{const i=ZU(r);n.style[i]=""})}function KI(n){return Array.isArray(n)?1==n.length?n[0]:function EAe(n,e=null){return{type:Nt.Sequence,steps:n,options:e}}(n):n}const XU=new RegExp("{{\\s*(.+?)\\s*}}","g");function qre(n){let e=[];if("string"==typeof n){let t;for(;t=XU.exec(n);)e.push(t[1]);XU.lastIndex=0}return e}function QI(n,e,t){const r=`${n}`,i=r.replace(XU,(s,o)=>{let a=e[o];return null==a&&(t.push(function Dje(){return new K(3003,!1)}()),a=""),a.toString()});return i==r?n:i}const g4e=/-+([a-z0-9])/g;function ZU(n){return n.replace(g4e,(...e)=>e[1].toUpperCase())}function aa(n,e,t){switch(e.type){case Nt.Trigger:return n.visitTrigger(e,t);case Nt.State:return n.visitState(e,t);case Nt.Transition:return n.visitTransition(e,t);case Nt.Sequence:return n.visitSequence(e,t);case Nt.Group:return n.visitGroup(e,t);case Nt.Animate:return n.visitAnimate(e,t);case Nt.Keyframes:return n.visitKeyframes(e,t);case Nt.Style:return n.visitStyle(e,t);case Nt.Reference:return n.visitReference(e,t);case Nt.AnimateChild:return n.visitAnimateChild(e,t);case Nt.AnimateRef:return n.visitAnimateRef(e,t);case Nt.Query:return n.visitQuery(e,t);case Nt.Stagger:return n.visitStagger(e,t);default:throw function Rje(){return new K(3004,!1)}()}}function JU(n,e){return window.getComputedStyle(n)[e]}const v4e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Kre extends qU{normalizePropertyName(e,t){return ZU(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(v4e.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Mje(){return new K(3005,!1)}())}return o+s}}const cD="*";const uD=new Set(["true","1"]),dD=new Set(["false","0"]);function Qre(n,e){const t=uD.has(n)||dD.has(n),r=uD.has(e)||dD.has(e);return(i,s)=>{let o=n==cD||n==i,a=e==cD||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?uD.has(n):dD.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?uD.has(e):dD.has(e)),o&&a}}const w4e=new RegExp("s*:selfs*,?","g");function ej(n,e,t,r){return new C4e(n).build(e,t,r)}class C4e{constructor(e){this._driver=e}build(e,t,r){const i=new S4e(t);return this._resetContextStyleTimingState(i),aa(this,KI(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Pje(){return new K(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Nt.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==Nt.Transition){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function kje(){return new K(3007,!1)}())}),{type:Nt.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{qre(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(function Nje(){return new K(3008,!1)}(0,s.values()))}return{type:Nt.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=aa(this,KI(e.animation),t),i=function b4e(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function E4e(n,e,t){if(":"==n[0]){const l=function I4e(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function $je(){return new K(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Hje(){return new K(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(Qre(i,o)),"<"==s[0]&&(i!=cD||o!=cD)&&e.push(Qre(o,i))}(r,t,e)):t.push(n),t}(e.expr,t.errors);return{type:Nt.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:gp(e.options)}}visitSequence(e,t){return{type:Nt.Sequence,steps:e.steps.map(r=>aa(this,r,t)),options:gp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=aa(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Nt.Group,steps:s,options:gp(e.options)}}visitAnimate(e,t){const r=function D4e(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return tj(lD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=tj(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=lD(t,e);return tj(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Di({});if(s.type==Nt.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Di(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:Nt.Animate,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Lc?r.push(a):t.errors.push(new K(3002,!1)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:Nt.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let h=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(function Fje(){return new K(3010,!1)}()),h=!1),s=u.startTime),h&&c.set(l,{startTime:s,endTime:i}),t.options&&function m4e(n,e,t){const r=e.params||{},i=qre(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function xje(){return new K(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:Nt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Lje(){return new K(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(B=>{const V=this._makeStyleAst(B,t);let Q=null!=V.offset?V.offset:function x4e(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),we=0;return null!=Q&&(s++,we=V.offset=Q),l=l||we<0||we>1,a=a||we<c,c=we,o.push(we),V});l&&t.errors.push(function Vje(){return new K(3012,!1)}()),a&&t.errors.push(function Bje(){return new K(3200,!1)}());const h=e.steps.length;let m=0;s>0&&s<h?t.errors.push(function Uje(){return new K(3202,!1)}()):0==s&&(m=1/(h-1));const y=h-1,b=t.currentTime,T=t.currentAnimateTimings,M=T.duration;return u.forEach((B,V)=>{const Q=m>0?V==y?1:m*V:o[V],we=Q*M;t.currentTime=b+T.delay+we,T.duration=we,this._validateStyleAst(B,t),B.offset=Q,r.styles.push(B)}),r}visitReference(e,t){return{type:Nt.Reference,animation:aa(this,KI(e.animation),t),options:gp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Nt.AnimateChild,options:gp(e.options)}}visitAnimateRef(e,t){return{type:Nt.AnimateRef,animation:this.visitReference(e.animation,t),options:gp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function T4e(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(w4e,"")),n=n.replace(/@\*/g,aD).replace(/@\w+/g,t=>aD+"-"+t.slice(1)).replace(/:animating/g,QU),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,oa(t.collectedStyles,t.currentQuerySelector,new Map);const a=aa(this,KI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Nt.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:gp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function jje(){return new K(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:lD(e.timings,t.errors,!0);return{type:Nt.Stagger,animation:aa(this,KI(e.animation),t),timings:r,options:null}}}class S4e{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gp(n){return n?(n={...n}).params&&(n.params=function A4e(n){return n?{...n}:null}(n.params)):n={},n}function tj(n,e,t){return{duration:n,delay:e,easing:t}}function nj(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class hD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const P4e=new RegExp(":enter","g"),N4e=new RegExp(":leave","g");function rj(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new O4e).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class O4e{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new hD;const h=new ij(e,t,c,i,s,u,[]);h.options=l;const m=l.delay?ou(l.delay):0;h.currentTimeline.delayNextStep(m),h.currentTimeline.setStyles([o],null,h.errors,l),aa(this,r,h);const y=h.timelines.filter(b=>b.containsAnimation());if(y.length&&a.size){let b;for(let T=y.length-1;T>=0;T--){const M=y[T];if(M.element===t){b=M;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,h.errors,l)}return y.length?y.map(b=>b.buildKeyframes()):[nj(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:ou(QI(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?ou(r.duration):null,a=null!=r.delay?ou(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),aa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){i.previousNode.type==Nt.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=fD);const o=ou(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>aa(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ou(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),aa(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return lD(t.params?QI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;s.type==Nt.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ou(i.delay):0;s&&(t.previousNode.type===Nt.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=fD);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const h=t.createSubContext(e.options,c);s&&h.delayNextStep(s),c===t.element&&(l=h.currentTimeline),aa(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;aa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}}const fD={};class ij{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new pD(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ou(r.duration)),null!=r.delay&&(i.delay=ou(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=QI(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new ij(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=fD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new F4e(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(P4e,"."+this._enterClassName)).replace(N4e,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function zje(){return new K(3014,!1)}()),a}}class pD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new pD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Lc),this._currentKeyframe.set(t,Lc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function L4e(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r??=e.keys();for(let s of r)t.set(s,Lc)}else for(let[s,o]of i)t.set(s,o)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=QI(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Lc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((u,h)=>{"!"===u?e.add(h):u===Lc&&t.add(h)}),r||c.set("offset",l/this.duration),i.push(c)});const s=[...e.values()],o=[...t.values()];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return nj(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class F4e extends pD{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);const c=new Map(e[0]);c.set("offset",Zre(a)),s.push(c);const u=e.length-1;for(let h=1;h<=u;h++){let m=new Map(e[h]);const y=m.get("offset");m.set("offset",Zre((t+y*r)/o)),s.push(m)}r=o,t=0,i="",e=s}return nj(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Zre(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function Jre(n,e,t,r,i,s,o,a,l,c,u,h,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:m}}const sj={};class eie{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function V4e(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,u){const h=[],m=this.ast.options&&this.ast.options.params||sj,b=this.buildStyles(r,a&&a.params||sj,h),T=l&&l.params||sj,M=this.buildStyles(i,T,h),B=new Set,V=new Map,Q=new Map,we="void"===i,je={params:tie(T,m),delay:this.ast.options?.delay},He=u?[]:rj(e,t,this.ast.animation,s,o,b,M,je,c,h);let H=0;return He.forEach(L=>{H=Math.max(L.duration+L.delay,H)}),h.length?Jre(t,this._triggerName,r,i,we,b,M,[],[],V,Q,H,h):(He.forEach(L=>{const W=L.element,J=oa(V,W,new Set);L.preStyleProps.forEach(re=>J.add(re));const ne=oa(Q,W,new Set);L.postStyleProps.forEach(re=>ne.add(re)),W!==t&&B.add(W)}),Jre(t,this._triggerName,r,i,we,b,M,He,[...B.values()],V,Q,H))}}function tie(n,e){const t={...e};return Object.entries(n).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class B4e{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=tie(e,this.defaultParams);return this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=QI(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class j4e{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new B4e(i.style,i.options&&i.options.params||{},r))}),nie(this.states,"true","1"),nie(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new eie(e,i,this.states))}),this.fallbackTransition=function z4e(n,e){return new eie(n,{type:Nt.Transition,animation:{type:Nt.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function nie(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const H4e=new hD;class $4e{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=ej(this._driver,t,r,[]);if(r.length)throw function Qje(){return new K(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Bre(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=rj(this._driver,t,s,KU,sD,new Map,new Map,r,H4e,i),o.forEach(u=>{const h=oa(a,u.element,new Map);u.postStyleProps.forEach(m=>h.set(m,null))})):(i.push(function Yje(){return new K(3300,!1)}()),o=[]),i.length)throw function Xje(){return new K(3504,!1)}();a.forEach((u,h)=>{u.forEach((m,y)=>{u.set(y,this._driver.computeStyle(h,y,Lc))})});const c=zd(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,new Map,h)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Zje(){return new K(3301,!1)}();return t}listen(e,t,r,i){const s=HU(t,"","","");return jU(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const rie="ng-animate-queued",oj="ng-animate-disabled",Q4e=[],iie={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Y4e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hl="__ng_removed";class aj{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function eze(n){return n??null}(r?e.value:e),r){const{value:s,...o}=e;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const YI="void",lj=new aj(YI);class X4e{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Pa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Jje(){return new K(3302,!1)}();if(null==r||0==r.length)throw function e4e(){return new K(3303,!1)}();if(!function tze(n){return"start"==n||"done"==n}(r))throw function t4e(){return new K(3400,!1)}();const s=oa(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=oa(this._engine.statesByElement,e,new Map);return a.has(t)||(Pa(e,oD),Pa(e,oD+"-"+t),a.set(t,lj)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function n4e(){return new K(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new cj(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Pa(e,oD),Pa(e,oD+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new aj(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=lj),c.value!==YI&&l.value===c.value){if(!function ize(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const T=[],M=s.matchStyles(l.value,l.params,T),B=s.matchStyles(c.value,c.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{mp(e,M),tc(e,B)})}return}const m=oa(this._engine.playersByElement,e,[]);m.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let y=s.matchTransition(l.value,c.value,e,c.params),b=!1;if(!y){if(!i)return;y=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:b}),b||(Pa(e,rie),o.onStart(()=>{Y_(e,rie)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const M=this._engine.playersByElement.get(e);if(M){let B=M.indexOf(o);B>=0&&M.splice(B,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,aD,!0);r.forEach(i=>{if(i[hl])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,YI,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&zd(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||lj,u=new aj(YI),h=new cj(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[hl];(!s||s===iie)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Pa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=HU(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,jU(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Z4e{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new X4e(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(mD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!mD(t))return;const s=t[hl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Pa(e,oj)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Y_(e,oj))}removeNode(e,t,r){if(mD(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[hl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return mD(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,aD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,QU,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return zd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[hl];if(t&&t.setForRemoval){if(e[hl]=iie,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(oj)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Pa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?zd(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function r4e(){return new K(3402,!1)}()}_flushAnimations(e,t){const r=new hD,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(at=>{u.add(at);const pt=this.driver.query(at,".ng-animate-queued",!0);for(let It=0;It<pt.length;It++)u.add(pt[It])});const h=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=aie(m,this.collectedEnterElements),b=new Map;let T=0;y.forEach((at,pt)=>{const It=KU+T++;b.set(pt,It),at.forEach(mn=>Pa(mn,It))});const M=[],B=new Set,V=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const pt=this.collectedLeaveElements[at],It=pt[hl];It&&It.setForRemoval&&(M.push(pt),B.add(pt),It.hasAnimation?this.driver.query(pt,".ng-star-inserted",!0).forEach(mn=>B.add(mn)):V.add(pt))}const Q=new Map,we=aie(m,Array.from(B));we.forEach((at,pt)=>{const It=sD+T++;Q.set(pt,It),at.forEach(mn=>Pa(mn,It))}),e.push(()=>{y.forEach((at,pt)=>{const It=b.get(pt);at.forEach(mn=>Y_(mn,It))}),we.forEach((at,pt)=>{const It=Q.get(pt);at.forEach(mn=>Y_(mn,It))}),M.forEach(at=>{this.processLeaveNode(at)})});const je=[],He=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(It=>{const mn=It.player,wi=It.element;if(je.push(mn),this.collectedEnterElements.length){const ui=wi[hl];if(ui&&ui.setForMove){if(ui.previousTriggersValues&&ui.previousTriggersValues.has(It.triggerName)){const uu=ui.previousTriggersValues.get(It.triggerName),Vo=this.statesByElement.get(It.element);if(Vo&&Vo.has(It.triggerName)){const du=Vo.get(It.triggerName);du.value=uu,Vo.set(It.triggerName,du)}}return void mn.destroy()}}const Fa=!h||!this.driver.containsElement(h,wi),ci=Q.get(wi),Mr=b.get(wi),Pr=this._buildInstruction(It,r,Mr,ci,Fa);if(Pr.errors&&Pr.errors.length)return void He.push(Pr);if(Fa)return mn.onStart(()=>mp(wi,Pr.fromStyles)),mn.onDestroy(()=>tc(wi,Pr.toStyles)),void i.push(mn);if(It.isFallbackTransition)return mn.onStart(()=>mp(wi,Pr.fromStyles)),mn.onDestroy(()=>tc(wi,Pr.toStyles)),void i.push(mn);const eh=[];Pr.timelines.forEach(ui=>{ui.stretchStartingKeyframe=!0,this.disabledNodes.has(ui.element)||eh.push(ui)}),Pr.timelines=eh,r.append(wi,Pr.timelines),o.push({instruction:Pr,player:mn,element:wi}),Pr.queriedElements.forEach(ui=>oa(a,ui,[]).push(mn)),Pr.preStyleProps.forEach((ui,uu)=>{if(ui.size){let Vo=l.get(uu);Vo||l.set(uu,Vo=new Set),ui.forEach((du,th)=>Vo.add(th))}}),Pr.postStyleProps.forEach((ui,uu)=>{let Vo=c.get(uu);Vo||c.set(uu,Vo=new Set),ui.forEach((du,th)=>Vo.add(th))})});if(He.length){const at=[];He.forEach(pt=>{at.push(function i4e(){return new K(3505,!1)}())}),je.forEach(pt=>pt.destroy()),this.reportError(at)}const H=new Map,L=new Map;o.forEach(at=>{const pt=at.element;r.has(pt)&&(L.set(pt,pt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,H))}),i.forEach(at=>{const pt=at.element;this._getPreviousPlayers(pt,!1,at.namespaceId,at.triggerName,null).forEach(mn=>{oa(H,pt,[]).push(mn),mn.destroy()})});const W=M.filter(at=>cie(at,l,c)),J=new Map;oie(J,this.driver,V,c,Lc).forEach(at=>{cie(at,l,c)&&W.push(at)});const re=new Map;y.forEach((at,pt)=>{oie(re,this.driver,new Set(at),l,"!")}),W.forEach(at=>{const pt=J.get(at),It=re.get(at);J.set(at,new Map([...pt?.entries()??[],...It?.entries()??[]]))});const q=[],$r=[],ua={};o.forEach(at=>{const{element:pt,player:It,instruction:mn}=at;if(r.has(pt)){if(u.has(pt))return It.onDestroy(()=>tc(pt,mn.toStyles)),It.disabled=!0,It.overrideTotalTime(mn.totalTime),void i.push(It);let wi=ua;if(L.size>1){let ci=pt;const Mr=[];for(;ci=ci.parentNode;){const Pr=L.get(ci);if(Pr){wi=Pr;break}Mr.push(ci)}Mr.forEach(Pr=>L.set(Pr,wi))}const Fa=this._buildAnimation(It.namespaceId,mn,H,s,re,J);if(It.setRealPlayer(Fa),wi===ua)q.push(It);else{const ci=this.playersByElement.get(wi);ci&&ci.length&&(It.parentPlayer=zd(ci)),i.push(It)}}else mp(pt,mn.fromStyles),It.onDestroy(()=>tc(pt,mn.toStyles)),$r.push(It),u.has(pt)&&i.push(It)}),$r.forEach(at=>{const pt=s.get(at.element);if(pt&&pt.length){const It=zd(pt);at.setRealPlayer(It)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<M.length;at++){const pt=M[at],It=pt[hl];if(Y_(pt,sD),It&&It.hasAnimation)continue;let mn=[];if(a.size){let Fa=a.get(pt);Fa&&Fa.length&&mn.push(...Fa);let ci=this.driver.query(pt,QU,!0);for(let Mr=0;Mr<ci.length;Mr++){let Pr=a.get(ci[Mr]);Pr&&Pr.length&&mn.push(...Pr)}}const wi=mn.filter(Fa=>!Fa.destroyed);wi.length?nze(this,pt,wi):this.processLeaveNode(pt)}return M.length=0,q.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const pt=this.players.indexOf(at);this.players.splice(pt,1)}),at.play()}),q}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==YI;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,h=oa(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(y=>{const b=y.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),y.destroy(),h.push(y)})}mp(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,m=t.timelines.map(b=>{const T=b.element;u.add(T);const M=T[hl];if(M&&M.removedBeforeQueried)return new rE(b.duration,b.delay);const B=T!==l,V=function rze(n){const e=[];return lie(n,e),e}((r.get(T)||Q4e).map(H=>H.getRealPlayer())).filter(H=>!!H.element&&H.element===T),Q=s.get(T),we=o.get(T),je=Bre(this._normalizer,b.keyframes,Q,we),He=this._buildPlayer(b,je,V);if(b.subTimeline&&i&&h.add(T),B){const H=new cj(e,a,T);H.setRealPlayer(He),c.push(H)}return He});c.forEach(b=>{oa(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function J4e(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),u.forEach(b=>Pa(b,Wre));const y=zd(m);return y.onDestroy(()=>{u.forEach(b=>Y_(b,Wre)),tc(l,t.toStyles)}),h.forEach(b=>{oa(i,b,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new rE(e.duration,e.delay)}}class cj{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new rE,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>jU(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){oa(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mD(n){return n&&1===n.nodeType}function sie(n,e){const t=n.style.display;return n.style.display=e??"none",t}function oie(n,e,t,r,i){const s=[];t.forEach(l=>s.push(sie(l)));const o=[];r.forEach((l,c)=>{const u=new Map;l.forEach(h=>{const m=e.computeStyle(c,h,i);u.set(h,m),(!m||0==m.length)&&(c[hl]=Y4e,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>sie(l,s[a++])),o}function aie(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Pa(n,e){n.classList?.add(e)}function Y_(n,e){n.classList?.remove(e)}function nze(n,e,t){zd(t).onDone(()=>n.processLeaveNode(e))}function lie(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof sQ?lie(r.players,e):e.push(r)}}function cie(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class XI{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Z4e(e.body,t,r),this._timelineEngine=new $4e(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=ej(this._driver,s,l,[]);if(l.length)throw function qje(){return new K(3404,!1)}();a=function U4e(n,e,t){return new j4e(n,e,t)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=Ure(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=Ure(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class ZI{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=ZI.initialStylesByElement.get(e);i||ZI.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&tc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tc(this._element,this._initialStyles),this._endStyles&&(tc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ZI.initialStylesByElement.delete(this._element),this._startStyles&&(mp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mp(this._element,this._endStyles),this._endStyles=null),tc(this._element,this._initialStyles),this._state=3)}}function uj(n){let e=null;return n.forEach((t,r)=>{(function oze(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class uie{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:JU(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class die{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return zre(e,t)}getParentElement(e){return $U(e)}query(e,t,r){return Hre(e,t,r)}computeStyle(e,t,r){return JU(e,t)}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(y=>y instanceof uie);(function _4e(n,e){return 0===n||0===e})(r,i)&&u.forEach(y=>{y.currentSnapshot.forEach((b,T)=>c.set(T,b))});let h=function p4e(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(y=>new Map(y));h=function y4e(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,JU(n,a)))}}return e}(e,h,c);const m=function sze(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=uj(e[0]),e.length>1&&(r=uj(e[e.length-1]))):e instanceof Map&&(t=uj(e)),t||r?new ZI(n,t,r):null}(e,h);return new uie(e,h,l,m)}}const hie="@.disabled";class fie{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==hie?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class aze extends fie{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==hie?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function lze(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function cze(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}class uze{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const c=this._rendererCache;let u=c.get(i);return u||(u=new fie("",i,this.engine,()=>c.delete(i)),c.set(i,u)),u}const s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new aze(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const pie=[{provide:qU,useFactory:function hze(){return new Kre}},{provide:XI,useClass:(()=>{class n extends XI{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(Re(_n),Re(GU),Re(qU))}}static{this.\u0275prov=Oe({token:n,factory:n.\u0275fac})}}return n})()},{provide:Gh,useFactory:function fze(n,e,t){return new uze(n,e,t)},deps:[mk,XI,yt]}],dj=[{provide:GU,useFactory:()=>new die},{provide:Tl,useValue:"BrowserAnimations"},...pie],mie=[{provide:GU,useClass:WU},{provide:Tl,useValue:"NoopAnimations"},...pie];let pze=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?mie:dj}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n})}static{this.\u0275inj=$t({providers:dj,imports:[nq]})}}return n})();const gie="@firebase/installations",hj="0.6.9",_ie=1e4,yie=`w:${hj}`,vie="FIS_v2",mze="https://firebaseinstallations.googleapis.com/v1",gze=36e5,au=new N.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bie(n){return n instanceof N.g&&n.code.includes("request-failed")}function fj({projectId:n}){return`${mze}/projects/${n}/installations`}function Eie(n){return{token:n.token,requestStatus:2,expiresIn:bze(n.expiresIn),creationTime:Date.now()}}function pj(n,e){return mj.apply(this,arguments)}function mj(){return(mj=(0,O.A)(function*(n,e){const r=(yield e.json()).error;return au.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function Iie({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function gj(n){return _j.apply(this,arguments)}function _j(){return(_j=(0,O.A)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function bze(n){return Number(n.replace("s","000"))}function yj(){return(yj=(0,O.A)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=fj(n),i=Iie(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:vie,appId:n.appId,sdkVersion:yie})},l=yield gj(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:Eie(c.authToken)}}throw yield pj("Create Installation",l)})).apply(this,arguments)}function Cie(n){return new Promise(e=>{setTimeout(e,n)})}const Cze=/^[cdef][\w-]{21}$/,vj="";function Tze(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Aze(n){return function wze(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Cze.test(t)?t:vj}catch{return vj}}function X_(n){return`${n.appName}!${n.appId}`}const Z_=new Map;function Tie(n,e){const t=X_(n);Aie(t,e),function Dze(n,e){const t=function Sie(){return!_p&&"BroadcastChannel"in self&&(_p=new BroadcastChannel("[Firebase] FID Change"),_p.onmessage=n=>{Aie(n.data.key,n.data.fid)}),_p}();t&&t.postMessage({key:n,fid:e}),function xie(){0===Z_.size&&_p&&(_p.close(),_p=null)}()}(t,e)}function Aie(n,e){const t=Z_.get(n);if(t)for(const r of t)r(e)}let _p=null;const Rze="firebase-installations-database",Mze=1,yp="firebase-installations-store";let bj=null;function Ej(){return bj||(bj=(0,RQ.P2)(Rze,Mze,{upgrade:(n,e)=>{0===e&&n.createObjectStore(yp)}})),bj}function _D(n,e){return Ij.apply(this,arguments)}function Ij(){return(Ij=(0,O.A)(function*(n,e){const t=X_(n),i=(yield Ej()).transaction(yp,"readwrite"),s=i.objectStore(yp),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&Tie(n,e.fid),e})).apply(this,arguments)}function wj(n){return Cj.apply(this,arguments)}function Cj(){return(Cj=(0,O.A)(function*(n){const e=X_(n),r=(yield Ej()).transaction(yp,"readwrite");yield r.objectStore(yp).delete(e),yield r.done})).apply(this,arguments)}function JI(n,e){return Tj.apply(this,arguments)}function Tj(){return(Tj=(0,O.A)(function*(n,e){const t=X_(n),i=(yield Ej()).transaction(yp,"readwrite"),s=i.objectStore(yp),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&Tie(n,a.fid),a})).apply(this,arguments)}function Aj(n){return Sj.apply(this,arguments)}function Sj(){return Sj=(0,O.A)(function*(n){let e;const t=yield JI(n.appConfig,r=>{const i=function Pze(n){return Rie(n||{fid:Tze(),registrationStatus:0})}(r),s=function kze(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(au.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Nze(n,e){return xj.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Oze(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===vj?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Sj.apply(this,arguments)}function xj(){return xj=(0,O.A)(function*(n,e){try{const t=yield function Ize(n,e){return yj.apply(this,arguments)}(n,e);return _D(n.appConfig,t)}catch(t){throw bie(t)&&409===t.customData.serverCode?yield wj(n.appConfig):yield _D(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),xj.apply(this,arguments)}function Oze(n){return Dj.apply(this,arguments)}function Dj(){return(Dj=(0,O.A)(function*(n){let e=yield Die(n.appConfig);for(;1===e.registrationStatus;)yield Cie(100),e=yield Die(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Aj(n);return r||t}return e})).apply(this,arguments)}function Die(n){return JI(n,e=>{if(!e)throw au.create("installation-not-found");return Rie(e)})}function Rie(n){return function Fze(n){return 1===n.registrationStatus&&n.registrationTime+_ie<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Rj(){return(Rj=(0,O.A)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function Vze(n,{fid:e}){return`${fj(n)}/${e}/authTokens:generate`}(n,t),i=function wie(n,{refreshToken:e}){const t=Iie(n);return t.append("Authorization",function Eze(n){return`${vie} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:yie,appId:n.appId}})},l=yield gj(()=>fetch(r,a));if(l.ok)return Eie(yield l.json());throw yield pj("Generate Auth Token",l)})).apply(this,arguments)}function Mj(n){return Pj.apply(this,arguments)}function Pj(){return Pj=(0,O.A)(function*(n,e=!1){let t;const r=yield JI(n.appConfig,s=>{if(!Pie(s))throw au.create("not-registered");const o=s.authToken;if(!e&&function jze(n){return 2===n.requestStatus&&!function zze(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+gze}(n)}(o))return s;if(1===o.requestStatus)return t=function Bze(n,e){return kj.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw au.create("app-offline");const a=function Hze(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function Uze(n,e){return Nj.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),Pj.apply(this,arguments)}function kj(){return(kj=(0,O.A)(function*(n,e){let t=yield Mie(n.appConfig);for(;1===t.authToken.requestStatus;)yield Cie(100),t=yield Mie(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Mj(n,e):r})).apply(this,arguments)}function Mie(n){return JI(n,e=>{if(!Pie(e))throw au.create("not-registered");return function $ze(n){return 1===n.requestStatus&&n.requestTime+_ie<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Nj(){return Nj=(0,O.A)(function*(n,e){try{const t=yield function Lze(n,e){return Rj.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield _D(n.appConfig,r),t}catch(t){if(!bie(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield _D(n.appConfig,r)}else yield wj(n.appConfig);throw t}}),Nj.apply(this,arguments)}function Pie(n){return void 0!==n&&2===n.registrationStatus}function Oj(){return(Oj=(0,O.A)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Aj(e);return r?r.catch(console.error):Mj(e).catch(console.error),t.fid})).apply(this,arguments)}function Fj(){return Fj=(0,O.A)(function*(n,e=!1){const t=n;return yield function qze(n){return Lj.apply(this,arguments)}(t),(yield Mj(t,e)).token}),Fj.apply(this,arguments)}function Lj(){return(Lj=(0,O.A)(function*(n){const{registrationPromise:e}=yield Aj(n);e&&(yield e)})).apply(this,arguments)}function Uj(n){return au.create("missing-app-config-values",{valueName:n})}const kie="installations",Zze=n=>{const e=n.getProvider("app").getImmediate(),t=function Yze(n){if(!n||!n.options)throw Uj("App Configuration");if(!n.name)throw Uj("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Uj(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,$n._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},Jze=n=>{const e=n.getProvider("app").getImmediate(),t=(0,$n._getProvider)(e,kie).getImmediate();return{getId:()=>function Wze(n){return Oj.apply(this,arguments)}(t),getToken:i=>function Gze(n){return Fj.apply(this,arguments)}(t,i)}};(function eHe(){(0,$n._registerComponent)(new Jo.uA(kie,Zze,"PUBLIC")),(0,$n._registerComponent)(new Jo.uA("installations-internal",Jze,"PRIVATE"))})(),(0,$n.registerVersion)(gie,hj),(0,$n.registerVersion)(gie,hj,"esm2017");const yD="analytics",tHe="firebase_id",nHe="origin",rHe=6e4,iHe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jj="https://www.googletagmanager.com/gtag/js",ss=new Mo.Vy("@firebase/analytics"),lo=new N.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function oHe(n){if(!n.startsWith(jj)){const e=lo.create("invalid-gtag-resource",{gtagURL:n});return ss.warn(e.message),""}return n}function Nie(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function zj(){return(zj=(0,O.A)(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield Nie(t)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){ss.error(a)}n("config",i,s)})).apply(this,arguments)}function Hj(){return(Hj=(0,O.A)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield Nie(t);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){ss.error(s)}})).apply(this,arguments)}const mHe=30,Oie=new class _He{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function yHe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function $j(){return($j=(0,O.A)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:yHe(r)},s=iHe.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw lo.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Wj(){return(Wj=(0,O.A)(function*(n,e=Oie,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw lo.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw lo.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new wHe;return setTimeout((0,O.A)(function*(){a.abort()}),void 0!==t?t:rHe),Fie({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function Fie(n,e,t){return Gj.apply(this,arguments)}function Gj(){return Gj=(0,O.A)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Oie){var s;const{appId:o,measurementId:a}=n;try{yield function EHe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(lo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(l){if(a)return ss.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield function vHe(n){return $j.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!function IHe(n){if(!(n instanceof N.g&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return ss.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?(0,N.p9)(t,i.intervalMillis,mHe):(0,N.p9)(t,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,h),ss.debug(`Calling attemptFetch again in ${u} millis`),Fie(n,h,r,i)}}),Gj.apply(this,arguments)}class wHe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let qj,e4;function Kj(){return(Kj=(0,O.A)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function t4(){return(t4=(0,O.A)(function*(){if(!(0,N.zW)())return ss.warn(lo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,N.eX)()}catch(n){return ss.warn(lo.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function n4(){return n4=(0,O.A)(function*(n,e,t,r,i,s,o){var a;const l=function bHe(n){return Wj.apply(this,arguments)}(n);l.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&ss.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>ss.error(y)),e.push(l);const c=function RHe(){return t4.apply(this,arguments)}().then(y=>{if(y)return r.getId()}),[u,h]=yield Promise.all([l,c]);(function pHe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(jj)&&t.src.includes(n))return t;return null})(s)||function lHe(n,e){const t=function aHe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:oHe}),r=document.createElement("script"),i=`${jj}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),e4&&(i("consent","default",e4),function Lie(n){e4=n}(void 0)),i("js",new Date);const m=null!==(a=o?.config)&&void 0!==a?a:{};return m[nHe]="firebase",m.update=!0,null!=h&&(m[tHe]=h),i("config",u.measurementId,m),qj&&(i("set",qj),function Vie(n){qj=n}(void 0)),u.measurementId}),n4.apply(this,arguments)}class PHe{constructor(e){this.app=e}_delete(){return delete nc[this.app.options.appId],Promise.resolve()}}let nc={},Bie=[];const Uie={};let zie,rc,vD="dataLayer",r4=!1;function NHe(n,e,t){!function kHe(){const n=[];if((0,N.sr)()&&n.push("This is a browser extension environment."),(0,N.dM)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=lo.create("invalid-analytics-context",{errorInfo:e});ss.warn(t.message)}}();const r=n.options.appId;if(!r)throw lo.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw lo.create("no-api-key");ss.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=nc[r])throw lo.create("already-exists",{id:r});if(!r4){!function cHe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(vD);const{wrappedGtag:s,gtagCore:o}=function fHe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function hHe(n,e,t,r){function s(){return s=(0,O.A)(function*(o,...a){try{if("event"===o){const[l,c]=a;yield function dHe(n,e,t,r,i){return Hj.apply(this,arguments)}(n,e,t,l,c)}else if("config"===o){const[l,c]=a;yield function uHe(n,e,t,r,i,s){return zj.apply(this,arguments)}(n,e,t,r,l,c)}else if("consent"===o){const[l,c]=a;n("consent",l,c)}else if("get"===o){const[l,c,u]=a;n("get",l,c,u)}else if("set"===o){const[l]=a;n("set",l)}else n(o,...a)}catch(l){ss.error(l)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(nc,Bie,Uie,vD,"gtag");rc=s,zie=o,r4=!0}return nc[r]=function MHe(n,e,t,r,i,s,o){return n4.apply(this,arguments)}(n,Bie,Uie,e,zie,vD,t),new PHe(n)}function OHe(n=(0,$n.getApp)()){n=(0,N.Ku)(n);const e=(0,$n._getProvider)(n,yD);return e.isInitialized()?e.getImmediate():function FHe(n,e={}){const t=(0,$n._getProvider)(n,yD);if(t.isInitialized()){const i=t.getImmediate();if((0,N.bD)(e,t.getOptions()))return i;throw lo.create("already-initialized")}return t.initialize({options:e})}(n)}function LHe(){return i4.apply(this,arguments)}function i4(){return(i4=(0,O.A)(function*(){if((0,N.sr)()||!(0,N.dM)()||!(0,N.zW)())return!1;try{return yield(0,N.eX)()}catch{return!1}})).apply(this,arguments)}const Hie="@firebase/analytics";!function BHe(){(0,$n._registerComponent)(new Jo.uA(yD,(e,{options:t})=>NHe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,$n._registerComponent)(new Jo.uA("analytics-internal",function n(e){try{const t=e.getProvider(yD).getImmediate();return{logEvent:(r,i,s)=>function VHe(n,e,t,r){n=(0,N.Ku)(n),function CHe(n,e,t,r,i){return Kj.apply(this,arguments)}(rc,nc[n.app.options.appId],e,t,r).catch(i=>ss.error(i))}(t,r,i,s)}}catch(t){throw lo.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,$n.registerVersion)(Hie,"0.10.8"),(0,$n.registerVersion)(Hie,"0.10.8","esm2017")}();class o4{constructor(e){return e}}const a4="__angularfire_symbol__analyticsIsSupportedValue",Gie="__angularfire_symbol__analyticsIsSupported";globalThis[Gie]||=LHe().then(n=>globalThis[a4]=n).catch(()=>globalThis[a4]=!1);const bD={async:()=>globalThis[Gie],sync:()=>{const n=globalThis[a4];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Analytics"));return n}},jHe=Vc(OHe,!0),u4=new Ee("angularfire2.analytics-instances");function t$e(n){return(e,t)=>{if(!bD.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new o4(r)}}const n$e={provide:class UHe{constructor(){return lO("analytics")}},deps:[[new ki,u4]]},r$e={provide:o4,useFactory:function e$e(n,e){if(!bD.sync())return null;const t=yQ("analytics",n,e);return t&&new o4(t)},deps:[[new ki,u4],sE]};function i$e(n,...e){return(0,$n.registerVersion)("angularfire",id.full,"analytics"),El([r$e,n$e,{provide:XC,useValue:bD.async,multi:!0},{provide:u4,useFactory:t$e(n),multi:!0,deps:[yt,Rn,jg,cO,...e]}])}const Qie="@firebase/database";let d4="";function h4(n){d4=n}class a$e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class l$e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Xie=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new a$e(e)}}catch{}return new l$e},vp=Xie("localStorage"),f4=Xie("sessionStorage"),J_=new Mo.Vy("@firebase/database"),Zie=function(){let n=1;return function(){return n++}}(),Jie=function(n){const e=(0,N.kj)(n),t=new N.gz;t.update(e);const r=t.digest();return N.K3.encodeByteArray(r)},tw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=tw.apply(null,r):e+="object"==typeof r?(0,N.As)(r):r,e+=" "}return e};let bp=null,ese=!0;const tse=function(n,e){(0,N.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(J_.logLevel=Mo.$b.VERBOSE,bp=J_.log.bind(J_),e&&f4.set("logging_enabled",!0)):"function"==typeof n?bp=n:(bp=null,f4.remove("logging_enabled"))},os=function(...n){if(!0===ese&&(ese=!1,null===bp&&!0===f4.get("logging_enabled")&&tse(!0)),bp){const e=tw.apply(null,n);bp(e)}},nw=function(n){return function(...e){os(n,...e)}},p4=function(...n){const e="FIREBASE INTERNAL ERROR: "+tw(...n);J_.error(e)},ic=function(...n){const e=`FIREBASE FATAL ERROR: ${tw(...n)}`;throw J_.error(e),new Error(e)},js=function(...n){const e="FIREBASE WARNING: "+tw(...n);J_.warn(e)},ED=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Hd="[MIN_NAME]",lu="[MAX_NAME]",Ep=function(n,e){if(n===e)return 0;if(n===Hd||e===lu)return-1;if(e===Hd||n===lu)return 1;{const t=ise(n),r=ise(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},d$e=function(n,e){return n===e?0:n<e?-1:1},rw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.As)(e))},m4=function(n){if("object"!=typeof n||null===n)return(0,N.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.As)(e[r]),t+=":",t+=m4(n[e[r]]);return t+="}",t},nse=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function as(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const rse=function(n){(0,N.vA)(!ED(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),h+=m}return h.toLowerCase()},m$e=new RegExp("^-?(0*)\\d{1,10}$"),ise=function(n){if(m$e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ey=function(n){try{n()}catch(e){setTimeout(()=>{throw js("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},iw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class v$e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){js(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class b$e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(os("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',js(e)}}let sw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const cse=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fse="long_polling";class _4{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function pse(n,e,t){let r;if((0,N.vA)("string"==typeof e,"typeof type must == string"),(0,N.vA)("object"==typeof t,"typeof params must == object"),"websocket"===e)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==fse)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function E$e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return as(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class I$e{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.A4)(this.counters_)}}const y4={},v4={};function b4(n){const e=n.toString();return y4[e]||(y4[e]=new I$e),y4[e]}class C$e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ey(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $d{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nw(e),this.stats_=b4(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),pse(t,fse,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new C$e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new E4((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&cse.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$d.forceAllow_=!0}static forceDisallow(){$d.forceDisallow_=!0}static isAvailable(){return!((0,N.$g)()||!$d.forceAllow_&&($d.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.KA)(t),i=nse(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class E4{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Zie(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=E4.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){os("frame writing exception"),a.stack&&os(a.stack),os(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||os("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{os("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let wD=null;typeof MozWebSocket<"u"?wD=MozWebSocket:typeof WebSocket<"u"&&(wD=WebSocket);let ty=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nw(this.connId),this.stats_=b4(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,N.$g)()&&typeof location<"u"&&location.hostname&&cse.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),pse(t,"websocket",a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vp.set("previous_websocket_failure",!0);try{let i;if((0,N.$g)()){i={headers:{"User-Agent":`Firebase/5/${d4}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new wD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==wD&&!n.forceDisallow_}static previouslyFailed(){return vp.isInMemoryStorage||!0===vp.get("previous_websocket_failure")}markConnectionHealthy(){vp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=nse(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Ese=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[$d,ty]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=ty&&ty.isAvailable();let i=r&&!ty.previouslyFailed();if(t.webSocketOnly&&(r||js("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ty];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class xse{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nw("c:"+this.id+":"),this.transportManager_=new Ese(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=iw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rw("t",e),r=rw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rw("t",e),r=rw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rw("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?p4("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):p4("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&js("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),iw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):iw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Dse{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Rse{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,N.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class CD extends Rse{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new CD}getInitialEvent(e){return(0,N.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class qn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new qn("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Wd(n){return n.pieces_.length-n.pieceNum_}function dr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new qn(n.pieces_,e)}function w4(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ow(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function kse(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new qn(e,0)}function Hr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof qn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new qn(t,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function co(n,e){const t=an(n),r=an(e);if(null===t)return e;if(t===r)return co(dr(n),dr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function G$e(n,e){const t=ow(n,0),r=ow(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Ep(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function C4(n,e){if(Wd(n)!==Wd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ka(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Wd(n)>Wd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class q$e{constructor(e,t){this.errorPrefix_=t,this.parts_=ow(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.OE)(this.parts_[r]);Nse(this)}}function Nse(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ip(n))}function Ip(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class T4 extends Rse{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new T4}getInitialEvent(e){return(0,N.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const aw=1e3;let AD,wp=(()=>{class n extends Dse{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=nw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=aw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,N.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");T4.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&CD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,N.As)(o)),(0,N.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new N.cY,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,N.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.vA)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.gR)(t,"w")){const i=(0,N.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();js(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,N.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):p4("Unrecognized action received from server: "+(0,N.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=aw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=aw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=aw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){(0,N.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?os("getToken() completed but was canceled"):(os("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new xse(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{js(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&js(y),u())}}})()}interrupt(t){os("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){os("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.Im)(this.interruptReasons_)&&(this.reconnectDelay_=aw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>m4(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new qn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){os("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){os("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+d4.replace(/\./g,"-")]=1,(0,N.jZ)()?t["framework.cordova"]=1:(0,N.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=CD.getInstance().currentlyOnline();return(0,N.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new dn(e,t)}}class TD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new dn(Hd,e),i=new dn(Hd,t);return 0!==this.compare(r,i)}minPost(){return dn.MIN}}class Lse extends TD{static get __EMPTY_NODE(){return AD}static set __EMPTY_NODE(e){AD=e}compare(e,t){return Ep(e.name,t.name)}isDefinedOn(e){throw(0,N.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return dn.MIN}maxPost(){return new dn(lu,AD)}makePost(e,t){return(0,N.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new dn(e,AD)}toString(){return".key"}}const sc=new Lse;class SD{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let S4,fl=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Fo.EMPTY_NODE,this.right=o??Fo.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Fo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Fo{constructor(e,t=Fo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Fo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fl.BLACK,null,null))}remove(e){return new Fo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new SD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new SD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new SD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new SD(this.root_,null,this.comparator_,!0,e)}}function t3e(n,e){return Ep(n.name,e.name)}function A4(n,e){return Ep(n,e)}Fo.EMPTY_NODE=new class e3e{copy(e,t,r,i,s){return this}insert(e,t,r){return new fl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Vse=function(n){return"number"==typeof n?"number:"+rse(n):"string:"+n},Bse=function(n){if(n.isLeafNode()){const e=n.val();(0,N.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.gR)(e,".sv"),"Priority must be a string or number.")}else(0,N.vA)(n===S4||n.isEmpty(),"priority of unexpected type.");(0,N.vA)(n===S4||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Use,jse,zse,ny=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Bse(this.priorityNode_)}static set __childrenNodeConstructor(t){Use=t}static get __childrenNodeConstructor(){return Use}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ln(t)?this:".priority"===an(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=an(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.vA)(".priority"!==i||1===Wd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(dr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Vse(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?rse(this.value_):this.value_,this.lazyHash_=Jie(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.vA)(s>=0,"Unknown leaf type: "+r),(0,N.vA)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const br=new class s3e extends TD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Ep(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(lu,new ny("[PRIORITY-POST]",zse))}makePost(e,t){const r=jse(e);return new dn(t,new ny("[PRIORITY-POST]",r))}toString(){return".priority"}},o3e=Math.log(2);class a3e{constructor(e){this.count=parseInt(Math.log(e+1)/o3e,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xD=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let h,m;if(0===u)return null;if(1===u)return h=n[l],m=t?t(h):h,new fl(m,h.node,fl.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return h=n[y],m=t?t(h):h,new fl(m,h.node,fl.BLACK,b,T)}},a=function(l){let c=null,u=null,h=n.length;const m=function(b,T){const M=h-b,B=h;h-=b;const V=i(M+1,B),Q=n[M],we=t?t(Q):Q;y(new fl(we,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),M=Math.pow(2,l.count-(b+1));T?m(M,fl.BLACK):(m(M,fl.BLACK),m(M,fl.RED))}return u}(new a3e(n.length));return new Fo(r||e,a)};let x4;const ry={};class cu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.vA)(ry&&br,"ChildrenNode.ts has not been loaded"),x4=x4||new cu({".priority":ry},{".priority":br}),x4}get(e){const t=(0,N.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Fo?t:null}hasIndex(e){return(0,N.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.vA)(e!==sc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(dn.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?xD(r,e.getCompare()):ry;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new cu(u,c)}addToIndexes(e,t){const r=(0,N.kH)(this.indexes_,(i,s)=>{const o=(0,N.yw)(this.indexSet_,s);if((0,N.vA)(o,"Missing index implementation for "+s),i===ry){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(dn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),xD(a,o.getCompare())}return ry}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new dn(e.name,a))),l.insert(e,e.node)}});return new cu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.kH)(this.indexes_,i=>{if(i===ry)return i;{const s=t.get(e.name);return s?i.remove(new dn(e.name,s)):i}});return new cu(r,this.indexSet_)}}let lw,Gt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Bse(this.priorityNode_),this.children_.isEmpty()&&(0,N.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return lw||(lw=new n(new Fo(A4),null,cu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?lw:r}}getChild(t){const r=an(t);return null===r?this:this.getImmediateChild(r).getChild(dr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new dn(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?lw:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=an(t);if(null===i)return r;{(0,N.vA)(".priority"!==an(t)||1===Wd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(dr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(br,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Vse(this.getPriority().val())+":"),this.forEachChild(br,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Jie(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new dn(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,dn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,dn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cw?-1:0}withIndex(t){if(t===sc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===sc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(br),s=r.getIterator(br);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===sc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const cw=new class l3e extends Gt{constructor(){super(new Fo(A4),Gt.EMPTY_NODE,cu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Gt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(dn,{MIN:{value:new dn(Hd,Gt.EMPTY_NODE)},MAX:{value:new dn(lu,cw)}}),Lse.__EMPTY_NODE=Gt.EMPTY_NODE,ny.__childrenNodeConstructor=Gt,function n3e(n){S4=n}(cw),function i3e(n){zse=n}(cw);const c3e=!0;function Zr(n,e=null){if(null===n)return Gt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ny(n,Zr(e));if(n instanceof Array||!c3e){let t=Gt.EMPTY_NODE;return as(n,(r,i)=>{if((0,N.gR)(n,r)&&"."!==r.substring(0,1)){const s=Zr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Zr(e))}{const t=[];let r=!1;if(as(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Zr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new dn(o,l)))}}),0===t.length)return Gt.EMPTY_NODE;const s=xD(t,t3e,o=>o.name,A4);if(r){const o=xD(t,br.getCompare());return new Gt(s,Zr(e),new cu({".priority":o},{".priority":br}))}return new Gt(s,Zr(e),cu.Default)}}!function r3e(n){jse=n}(Zr);class D4 extends TD{constructor(e){super(),this.indexPath_=e,(0,N.vA)(!ln(e)&&".priority"!==an(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Ep(e.name,t.name):s}makePost(e,t){const r=Zr(e),i=Gt.EMPTY_NODE.updateChild(this.indexPath_,r);return new dn(t,i)}maxPost(){const e=Gt.EMPTY_NODE.updateChild(this.indexPath_,cw);return new dn(lu,e)}toString(){return ow(this.indexPath_,0).join("/")}}const R4=new class u3e extends TD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ep(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(e,t){const r=Zr(e);return new dn(t,r)}toString(){return".value"}};function Hse(n){return{type:"value",snapshotNode:n}}function iy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function uw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function dw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class M4{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,N.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(uw(t,a)):(0,N.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(iy(t,r)):o.trackChildChange(dw(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(br,(i,s)=>{t.hasChild(i)||r.trackChildChange(uw(i,s))}),t.isLeafNode()||t.forEachChild(br,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(dw(i,s,o))}else r.trackChildChange(iy(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Gt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class hw{constructor(e){this.indexedFilter_=new M4(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hw.getStartPost_(e),this.endPost_=hw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new dn(t,r))||(r=Gt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Gt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Gt.EMPTY_NODE);const s=this;return t.forEachChild(br,(o,a)=>{s.matches(new dn(o,a))||(i=i.updateImmediateChild(o,Gt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class h3e{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new dn(t,r))||(r=Gt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Gt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Gt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(m,y)=>h(y,m)}else o=this.index_.getCompare();const a=e;(0,N.vA)(a.numChildren()===this.limit_,"");const l=new dn(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const h=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(dw(t,r,h)),a.updateImmediateChild(t,r);{s?.trackChildChange(uw(t,h));const T=a.updateImmediateChild(t,Gt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(iy(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(uw(c.name,c.node)),s.trackChildChange(iy(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,Gt.EMPTY_NODE)):e}}class DD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=br}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===br}copy(){const e=new DD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function P4(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function k4(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function RD(n,e){const t=n.copy();return t.index_=e,t}function $se(n){const e={};if(n.isDefault())return e;let t;if(n.index_===br?t="$priority":n.index_===R4?t="$value":n.index_===sc?t="$key":((0,N.vA)(n.index_ instanceof D4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,N.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,N.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,N.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,N.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Wse(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==br&&(e.i=n.index_.toString()),e}class MD extends Dse{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=nw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=MD.getListenId_(e,r),a={};this.listens_[o]=a;const l=$se(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(404===c&&(h=null,c=null),null===c&&this.onDataUpdate_(s,h,!1,r),(0,N.yw)(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=MD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=$se(e._queryParams),r=e._path.toString(),i=new N.cY;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.Am)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,N.$L)(a.responseText)}catch{js("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&js("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class y3e{constructor(){this.rootNode_=Gt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function PD(){return{value:null,children:new Map}}function sy(n,e,t){if(ln(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=an(e);n.children.has(r)||n.children.set(r,PD()),sy(n.children.get(r),e=dr(e),t)}}function N4(n,e){if(ln(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(br,(r,i)=>{sy(n,new qn(r),i)}),N4(n,e)}}if(n.children.size>0){const t=an(e);return e=dr(e),n.children.has(t)&&N4(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function O4(n,e,t){null!==n.value?t(e,n.value):function v3e(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{O4(i,new qn(e.toString()+"/"+r),t)})}class b3e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&as(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class w3e{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new b3e(e);const r=1e4+2e4*Math.random();iw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;as(e,(i,s)=>{s>0&&(0,N.gR)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),iw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var oc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(oc||{});function V4(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class kD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=oc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,N.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new qn(e));return new kD(Nn(),t,this.revert)}}return(0,N.vA)(an(this.path)===e,"operationForChild called for unrelated child."),new kD(dr(this.path),this.affectedTree,this.revert)}}class fw{constructor(e,t){this.source=e,this.path=t,this.type=oc.LISTEN_COMPLETE}operationForChild(e){return ln(this.path)?new fw(this.source,Nn()):new fw(this.source,dr(this.path))}}class Cp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=oc.OVERWRITE}operationForChild(e){return ln(this.path)?new Cp(this.source,Nn(),this.snap.getImmediateChild(e)):new Cp(this.source,dr(this.path),this.snap)}}class oy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=oc.MERGE}operationForChild(e){if(ln(this.path)){const t=this.children.subtree(new qn(e));return t.isEmpty()?null:t.value?new Cp(this.source,Nn(),t.value):new oy(this.source,Nn(),t)}return(0,N.vA)(an(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new oy(this.source,dr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ln(e))return this.isFullyInitialized()&&!this.filtered_;const t=an(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class C3e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pw(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function S3e(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.Hk)("Should only compare child_ events.");const r=new dn(e.childName,e.snapshotNode),i=new dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function A3e(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function ND(n,e){return{eventCache:n,serverCache:e}}function mw(n,e,t,r){return ND(new Gd(e,t,r),n.serverCache)}function qse(n,e,t,r){return ND(n.eventCache,new Gd(e,t,r))}function OD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Tp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let B4;class Er{constructor(e,t=(()=>(B4||(B4=new Fo(d$e)),B4))()){this.value=e,this.children=t}static fromObject(e){let t=new Er(null);return as(e,(r,i)=>{t=t.set(new qn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(ln(e))return null;{const r=an(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(dr(e),t);return null!=s?{path:Hr(new qn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ln(e))return this;{const t=an(e),r=this.children.get(t);return null!==r?r.subtree(dr(e)):new Er(null)}}set(e,t){if(ln(e))return new Er(t,this.children);{const r=an(e),s=(this.children.get(r)||new Er(null)).set(dr(e),t),o=this.children.insert(r,s);return new Er(this.value,o)}}remove(e){if(ln(e))return this.children.isEmpty()?new Er(null):new Er(null,this.children);{const t=an(e),r=this.children.get(t);if(r){const i=r.remove(dr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Er(null):new Er(this.value,s)}return this}}get(e){if(ln(e))return this.value;{const t=an(e),r=this.children.get(t);return r?r.get(dr(e)):null}}setTree(e,t){if(ln(e))return t;{const r=an(e),s=(this.children.get(r)||new Er(null)).setTree(dr(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Er(this.value,o)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Hr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ln(e))return null;{const s=an(e),o=this.children.get(s);return o?o.findOnPath_(dr(e),Hr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,r){if(ln(e))return this;{this.value&&r(t,this.value);const i=an(e),s=this.children.get(i);return s?s.foreachOnPath_(dr(e),Hr(t,i),r):new Er(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Hr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class pl{constructor(e){this.writeTree_=e}static empty(){return new pl(new Er(null))}}function gw(n,e,t){if(ln(e))return new pl(new Er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=co(i,e);return s=s.updateChild(o,t),new pl(n.writeTree_.set(i,s))}{const i=new Er(t),s=n.writeTree_.setTree(e,i);return new pl(s)}}}function U4(n,e,t){let r=n;return as(t,(i,s)=>{r=gw(r,Hr(e,i),s)}),r}function Kse(n,e){if(ln(e))return pl.empty();{const t=n.writeTree_.setTree(e,new Er(null));return new pl(t)}}function j4(n,e){return null!=Ap(n,e)}function Ap(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(co(t.path,e)):null}function Qse(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(br,(r,i)=>{e.push(new dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new dn(r,i.value))}),e}function qd(n,e){if(ln(e))return n;{const t=Ap(n,e);return new pl(null!=t?new Er(t):n.writeTree_.subtree(e))}}function z4(n){return n.writeTree_.isEmpty()}function ay(n,e){return Yse(Nn(),n.writeTree_,e)}function Yse(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,N.vA)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=Yse(Hr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Hr(n,".priority"),r)),t}}function FD(n,e){return toe(e,n)}function k3e(n,e){if(n.snap)return ka(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ka(Hr(n.path,t),e))return!0;return!1}function O3e(n){return n.visible}function Xse(n,e,t){let r=pl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)ka(t,o)?(a=co(t,o),r=gw(r,a,s.snap)):ka(o,t)&&(a=co(o,t),r=gw(r,Nn(),s.snap.getChild(a)));else{if(!s.children)throw(0,N.Hk)("WriteRecord should have .snap or .children");if(ka(t,o))a=co(t,o),r=U4(r,a,s.children);else if(ka(o,t))if(a=co(o,t),ln(a))r=U4(r,Nn(),s.children);else{const l=(0,N.yw)(s.children,an(a));if(l){const c=l.getChild(dr(a));r=gw(r,Nn(),c)}}}}}return r}function Zse(n,e,t,r,i){if(r||i){const s=qd(n.visibleWrites,e);return!i&&z4(s)?t:i||null!=t||j4(s,Nn())?ay(Xse(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(ka(c.path,e)||ka(e,c.path))},e),t||Gt.EMPTY_NODE):null}{const s=Ap(n.visibleWrites,e);if(null!=s)return s;{const o=qd(n.visibleWrites,e);return z4(o)?t:null!=t||j4(o,Nn())?ay(o,t||Gt.EMPTY_NODE):null}}}function LD(n,e,t,r){return Zse(n.writeTree,n.treePath,e,t,r)}function H4(n,e){return function F3e(n,e,t){let r=Gt.EMPTY_NODE;const i=Ap(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(br,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=qd(n.visibleWrites,e);return t.forEachChild(br,(o,a)=>{const l=ay(qd(s,new qn(o)),a);r=r.updateImmediateChild(o,l)}),Qse(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return Qse(qd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function Jse(n,e,t,r){return function L3e(n,e,t,r,i){(0,N.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Hr(e,t);if(j4(n.visibleWrites,s))return null;{const o=qd(n.visibleWrites,s);return z4(o)?i.getChild(t):ay(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function VD(n,e){return function B3e(n,e){return Ap(n.visibleWrites,e)}(n.writeTree,Hr(n.treePath,e))}function $4(n,e,t){return function V3e(n,e,t,r){const i=Hr(e,t),s=Ap(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?ay(qd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function eoe(n,e){return toe(Hr(n.treePath,e),n.writeTree)}function toe(n,e){return{treePath:n,writeTree:e}}class H3e{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,dw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,uw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,iy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,dw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const noe=new class $3e{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class W4{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Gd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $4(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Tp(this.viewCache_),s=function z3e(n,e,t,r,i,s){return function U3e(n,e,t,r,i,s,o){let a;const l=qd(n.visibleWrites,e),c=Ap(l,Nn());if(null!=c)a=c;else{if(null==t)return[];a=ay(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==h(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function roe(n,e,t,r,i,s){const o=e.eventCache;if(null!=VD(r,t))return e;{let a,l;if(ln(t))if((0,N.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Tp(e),h=H4(r,c instanceof Gt?c:Gt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=LD(r,Tp(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=an(t);if(".priority"===c){(0,N.vA)(1===Wd(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=Jse(r,t,u,l);a=null!=h?n.filter.updatePriority(u,h):o.getNode()}else{const u=dr(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=Jse(r,t,o.getNode(),l);h=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else h=$4(r,c,e.serverCache);a=null!=h?n.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return mw(e,a,o.isFullyInitialized()||ln(t),n.filter.filtersNodes())}}function BD(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(ln(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=an(t);if(!l.isCompleteForPath(t)&&Wd(t)>1)return e;const b=dr(t),M=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),M):u.updateChild(l.getNode(),y,M,b,noe,null)}const h=qse(e,c,l.isFullyInitialized()||ln(t),u.filtersNodes());return roe(n,h,t,i,new W4(i,h,s),a)}function G4(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new W4(i,e,s);if(ln(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=mw(e,c,!0,n.filter.filtersNodes());else{const h=an(t);if(".priority"===h)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=mw(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=dr(t),y=a.getNode().getImmediateChild(h);let b;if(ln(m))b=r;else{const T=u.getCompleteChild(h);b=null!=T?".priority"===w4(m)&&T.getChild(kse(m)).isEmpty()?T:T.updateChild(m,r):Gt.EMPTY_NODE}l=y.equals(b)?e:mw(e,n.filter.updateChild(a.getNode(),h,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function ioe(n,e){return n.eventCache.isCompleteForChild(e)}function soe(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function q4(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=ln(t)?r:new Er(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,m)=>{if(u.hasChild(h)){const b=soe(0,e.serverCache.getNode().getImmediateChild(h),m);l=BD(n,l,new qn(h),b,i,s,o,a)}}),c.children.inorderTraversal((h,m)=>{const y=!e.serverCache.isCompleteForChild(h)&&null===m.value;if(!u.hasChild(h)&&!y){const T=soe(0,e.serverCache.getNode().getImmediateChild(h),m);l=BD(n,l,new qn(h),T,i,s,o,a)}}),l}class J3e{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new M4(r.getIndex()),s=function f3e(n){return n.loadsAllData()?new M4(n.getIndex()):n.hasLimit()?new h3e(n):new hw(n)}(r);this.processor_=function W3e(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Gt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Gt.EMPTY_NODE,a.getNode(),null),u=new Gd(l,o.isFullyInitialized(),i.filtersNodes()),h=new Gd(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=ND(h,u),this.eventGenerator_=new C3e(this.query_)}get query(){return this.query_}}function nWe(n,e){const t=Tp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ln(e)&&!t.getImmediateChild(an(e)).isEmpty())?t.getChild(e):null}function ooe(n){return 0===n.eventRegistrations_.length}function aoe(n,e,t){const r=[];if(t){(0,N.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function loe(n,e,t,r){e.type===oc.MERGE&&null!==e.source.queryId&&((0,N.vA)(Tp(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.vA)(OD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function q3e(n,e,t,r,i){const s=new H3e;let o,a;if(t.type===oc.OVERWRITE){const c=t;c.source.fromUser?o=G4(n,e,c.path,c.snap,r,i,s):((0,N.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ln(c.path),o=BD(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===oc.MERGE){const c=t;c.source.fromUser?o=function Q3e(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Hr(t,l);ioe(e,an(u))&&(a=G4(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Hr(t,l);ioe(e,an(u))||(a=G4(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,N.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=q4(n,e,c.path,c.children,r,i,a,s))}else if(t.type===oc.ACK_USER_WRITE){const c=t;o=c.revert?function Z3e(n,e,t,r,i,s){let o;if(null!=VD(r,t))return e;{const a=new W4(r,e,i),l=e.eventCache.getNode();let c;if(ln(t)||".priority"===an(t)){let u;if(e.serverCache.isFullyInitialized())u=LD(r,Tp(e));else{const h=e.serverCache.getNode();(0,N.vA)(h instanceof Gt,"serverChildren would be complete if leaf node"),u=H4(r,h)}c=n.filter.updateFullNode(l,u,s)}else{const u=an(t);let h=$4(r,u,e.serverCache);null==h&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),c=null!=h?n.filter.updateChild(l,u,h,dr(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,Gt.EMPTY_NODE,dr(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=LD(r,Tp(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=VD(r,Nn()),mw(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function Y3e(n,e,t,r,i,s,o){if(null!=VD(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(ln(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return BD(n,e,t,l.getNode().getChild(t),i,s,a,o);if(ln(t)){let c=new Er(null);return l.getNode().forEachChild(sc,(u,h)=>{c=c.set(new qn(u),h)}),q4(n,e,t,c,i,s,a,o)}return e}{let c=new Er(null);return r.foreach((u,h)=>{const m=Hr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),q4(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==oc.LISTEN_COMPLETE)throw(0,N.Hk)("Unknown operation type: "+t.type);o=function X3e(n,e,t,r,i){const s=e.serverCache;return roe(n,qse(e,s.getNode(),s.isFullyInitialized()||ln(t),s.isFiltered()),t,r,noe,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function K3e(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=OD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Hse(OD(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function G3e(n,e){(0,N.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,coe(n,s.changes,s.viewCache.eventCache.getNode(),null)}function coe(n,e,t,r){return function T3e(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function d3e(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),pw(n,i,"child_removed",e,r,t),pw(n,i,"child_added",e,r,t),pw(n,i,"child_moved",s,r,t),pw(n,i,"child_changed",e,r,t),pw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let UD,zD;class uoe{constructor(){this.views=new Map}}function K4(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,N.vA)(null!=s,"SyncTree gave us an op for an invalid query."),loe(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(loe(o,e,t,r));return s}}function doe(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=LD(t,i?r:null),l=!1;a?l=!0:r instanceof Gt?(a=H4(t,r),l=!1):(a=Gt.EMPTY_NODE,l=!1);const c=ND(new Gd(a,l,!1),new Gd(r,i,!1));return new J3e(e,c)}return o}function hoe(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Kd(n,e){let t=null;for(const r of n.views.values())t=t||nWe(r,e);return t}function foe(n,e){return e._queryParams.loadsAllData()?jD(n):n.views.get(e._queryIdentifier)}function poe(n,e){return null!=foe(n,e)}function Qd(n){return null!=jD(n)}function jD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let hWe=1;class moe{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Er(null),this.pendingWriteTree_=function j3e(){return{visibleWrites:pl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Q4(n,e,t,r,i){return function D3e(n,e,t,r,i){(0,N.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=gw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ly(n,new Cp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Yd(n,e,t=!1){const r=function M3e(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function P3e(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,N.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&k3e(a,r.path)?i=!1:ka(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function N3e(n){n.visibleWrites=Xse(n.allWrites,O3e,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Kse(n.visibleWrites,r.path):as(r.children,l=>{n.visibleWrites=Kse(n.visibleWrites,Hr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new Er(null);return null!=r.snap?s=s.set(Nn(),!0):as(r.children,o=>{s=s.set(new qn(o),!0)}),ly(n,new kD(r.path,s,t))}return[]}function _w(n,e,t){return ly(n,new Cp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function HD(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||poe(o,e))){const l=function cWe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Qd(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(aoe(c,t,r)),ooe(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(aoe(l,t,r)),ooe(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Qd(n)&&s.push(new(function oWe(){return(0,N.vA)(UD,"Reference.ts has not been loaded"),UD}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function aWe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(s,(m,y)=>Qd(y));if(u&&!h){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function vWe(n){return n.fold((e,t,r)=>{if(t&&Qd(t))return[jD(t)];{let i=[];return t&&(i=hoe(t)),as(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],M=T.query,B=voe(n,T);n.listenProvider_.startListening(vw(M),yw(n,M),B.hashFn,B.onComplete)}}}!h&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(vw(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(WD(m));n.listenProvider_.stopListening(vw(m),y)}))}!function bWe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=WD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function goe(n,e,t,r){const i=X4(n,r);if(null!=i){const s=Z4(i),o=s.path,a=s.queryId,l=co(o,e);return J4(n,o,new Cp(V4(a),l,t))}return[]}function Y4(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=co(m,i);s=s||Kd(y,b),o=o||Qd(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||Qd(a),s=s||Kd(a,Nn())):(a=new uoe,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=Gt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=Kd(b,Nn());T&&(s=s.updateImmediateChild(y,T))}));const c=poe(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=WD(e);(0,N.vA)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function EWe(){return hWe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let h=function lWe(n,e,t,r,i,s){const o=doe(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function rWe(n,e){n.eventRegistrations_.push(e)}(o,t),function iWe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(br,(s,o)=>{r.push(iy(s,o))}),t.isFullyInitialized()&&r.push(Hse(t.getNode())),coe(n,r,t.getNode(),e)}(o,t)}(a,e,t,FD(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=foe(a,e);h=h.concat(function IWe(n,e,t){const r=e._path,i=yw(n,e),s=voe(n,t),o=n.listenProvider_.startListening(vw(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,N.vA)(!Qd(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!ln(c)&&u&&Qd(u))return[jD(u).query];{let m=[];return u&&(m=m.concat(hoe(u).map(y=>y.query))),as(h,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(vw(u),yw(n,u))}}return o}(n,e,m))}return h}function $D(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Kd(a,co(o,e));if(c)return c});return Zse(i,e,s,t,!0)}function ly(n,e){return _oe(e,n.syncPointTree_,null,FD(n.pendingWriteTree_,Nn()))}function _oe(n,e,t,r){if(ln(n.path))return yoe(n,e,t,r);{const i=e.get(Nn());null==t&&null!=i&&(t=Kd(i,Nn()));let s=[];const o=an(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=eoe(r,o);s=s.concat(_oe(a,l,c,u))}return i&&(s=s.concat(K4(i,n,r,t))),s}}function yoe(n,e,t,r){const i=e.get(Nn());null==t&&null!=i&&(t=Kd(i,Nn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=eoe(r,o),u=n.operationForChild(o);u&&(s=s.concat(yoe(u,a,l,c)))}),i&&(s=s.concat(K4(i,n,r,t))),s}function voe(n,e){const t=e.query,r=yw(n,t);return{hashFn:()=>(function eWe(n){return n.viewCache_.serverCache.getNode()}(e)||Gt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function gWe(n,e,t){const r=X4(n,t);if(r){const i=Z4(r),s=i.path,o=i.queryId,a=co(s,e);return J4(n,s,new fw(V4(o),a))}return[]}(n,t._path,r):function mWe(n,e){return ly(n,new fw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function p$e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return HD(n,t,null,s)}}}}function yw(n,e){const t=WD(e);return n.queryToTagMap.get(t)}function WD(n){return n._path.toString()+"$"+n._queryIdentifier}function X4(n,e){return n.tagToQueryMap.get(e)}function Z4(n){const e=n.indexOf("$");return(0,N.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new qn(n.substr(0,e))}}function J4(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.vA)(r,"Missing sync point for query tag that we're tracking"),K4(r,t,FD(n.pendingWriteTree_,e),null)}function vw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function dWe(){return(0,N.vA)(zD,"Reference.ts has not been loaded"),zD}())(n._repo,n._path):n}class ez{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ez(t)}node(){return this.node_}}class tz{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Hr(this.path_,e);return new tz(this.syncTree_,t)}node(){return $D(this.syncTree_,this.path_)}}const wWe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},boe=function(n,e,t){return n&&"object"==typeof n?((0,N.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?CWe(n[".sv"],e,t):"object"==typeof n[".sv"]?TWe(n[".sv"],e):void(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},CWe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.vA)(!1,"Unexpected server value: "+n)},TWe=function(n,e,t){n.hasOwnProperty("increment")||(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},Eoe=function(n,e,t,r){return rz(e,new tz(t,n),r)},nz=function(n,e,t){return rz(n,new ez(e),t)};function rz(n,e,t){const r=n.getPriority().val(),i=boe(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=boe(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new ny(a,Zr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ny(i))),o.forEachChild(br,(a,l)=>{const c=rz(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class iz{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function GD(n,e){let t=e instanceof qn?e:new qn(e),r=n,i=an(t);for(;null!==i;){const s=(0,N.yw)(r.node.children,i)||{children:{},childCount:0};r=new iz(i,r,s),t=dr(t),i=an(t)}return r}function Sp(n){return n.node.value}function sz(n,e){n.node.value=e,oz(n)}function Ioe(n){return n.node.childCount>0}function qD(n,e){as(n.node.children,(t,r)=>{e(new iz(t,n,r))})}function woe(n,e,t,r){t&&!r&&e(n),qD(n,i=>{woe(i,e,!0,r)}),t&&r&&e(n)}function bw(n){return new qn(null===n.parent?n.name:bw(n.parent)+"/"+n.name)}function oz(n){null!==n.parent&&function xWe(n,e,t){const r=function AWe(n){return void 0===Sp(n)&&!Ioe(n)}(t),i=(0,N.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,oz(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,oz(n))}(n.parent,n.name,n)}const DWe=/[\[\].#$\/\u0000-\u001F\u007F]/,RWe=/[\[\].#$\u0000-\u001F\u007F]/,az=10485760,KD=function(n){return"string"==typeof n&&0!==n.length&&!DWe.test(n)},Coe=function(n){return"string"==typeof n&&0!==n.length&&!RWe.test(n)},Ew=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ED(n)||n&&"object"==typeof n&&(0,N.gR)(n,".sv")},ac=function(n,e,t,r){r&&void 0===e||Iw((0,N.dI)(n,"value"),e,t)},Iw=function(n,e,t){const r=t instanceof qn?new q$e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ip(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ip(r)+" with contents = "+e.toString());if(ED(e))throw new Error(n+"contains "+e.toString()+" "+Ip(r));if("string"==typeof e&&e.length>az/3&&(0,N.OE)(e)>az)throw new Error(n+"contains a string greater than "+az+" utf8 bytes "+Ip(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(as(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!KD(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ip(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function K$e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.OE)(e),Nse(n)})(r,o),Iw(n,a,r),function Q$e(n){const e=n.parts_.pop();n.byteLength_-=(0,N.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ip(r)+" in addition to actual children.")}},Toe=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];as(e,(o,a)=>{const l=new qn(o);if(Iw(i,a,Hr(t,l)),".priority"===w4(l)&&!Ew(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=ow(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!KD(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(G$e);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ka(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},lz=function(n,e,t){if(!t||void 0!==e){if(ED(e))throw new Error((0,N.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ew(e))throw new Error((0,N.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ww=function(n,e,t,r){if(!(r&&void 0===t||KD(t)))throw new Error((0,N.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Cw=function(n,e,t,r){if(!(r&&void 0===t||Coe(t)))throw new Error((0,N.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kWe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Cw(n,e,t,r)},Na=function(n,e){if(".info"===an(e))throw new Error(n+" failed = Can't modify data under /.info/")},Aoe=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!KD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Coe(n)}(t))throw new Error((0,N.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class NWe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function QD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!C4(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Soe(n,e,t){QD(n,t),xoe(n,r=>C4(r,e))}function la(n,e,t){QD(n,t),xoe(n,r=>ka(r,e)||ka(e,r))}function xoe(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(OWe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function OWe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();bp&&os("event: "+t.toString()),ey(r)}}}const Doe="repo_interrupt",FWe=25;class LWe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NWe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=PD(),this.transactionQueueTree_=new iz,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Roe(n){const t=n.infoData_.getNode(new qn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Tw(n){return wWe({timestamp:Roe(n)})}function Moe(n,e,t,r,i){n.dataUpdateCount++;const s=new qn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,N.kH)(t,c=>Zr(c));o=function _We(n,e,t,r){const i=X4(n,r);if(i){const s=Z4(i),o=s.path,a=s.queryId,l=co(o,e),c=Er.fromObject(t);return J4(n,o,new oy(V4(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Zr(t);o=goe(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,N.kH)(t,c=>Zr(c));o=function pWe(n,e,t){const r=Er.fromObject(t);return ly(n,new oy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Zr(t);o=_w(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=uy(n,s)),la(n.eventQueue_,a,o)}function Poe(n,e){cz(n,"connected",e),!1===e&&function zWe(n){cy(n,"onDisconnectEvents");const e=Tw(n),t=PD();O4(n.onDisconnect_,Nn(),(i,s)=>{const o=Eoe(i,s,n.serverSyncTree_,e);sy(t,i,o)});let r=[];O4(t,Nn(),(i,s)=>{r=r.concat(_w(n.serverSyncTree_,i,s));const o=fz(n,i);uy(n,o)}),n.onDisconnect_=PD(),la(n.eventQueue_,Nn(),r)}(n)}function cz(n,e,t){const r=new qn("/.info/"+e),i=Zr(t);n.infoData_.updateSnapshot(r,i);const s=_w(n.infoSyncTree_,r,i);la(n.eventQueue_,r,s)}function YD(n){return n.nextWriteId_++}function uz(n,e,t,r,i){cy(n,"set",{path:e.toString(),value:t,priority:r});const s=Tw(n),o=Zr(t,r),a=$D(n.serverSyncTree_,e),l=nz(o,a,s),c=YD(n),u=Q4(n.serverSyncTree_,e,l,c,!0);QD(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(m,y)=>{const b="ok"===m;b||js("set at "+e+" failed: "+m);const T=Yd(n.serverSyncTree_,c,!b);la(n.eventQueue_,e,T),Xd(0,i,m,y)});const h=fz(n,e);uy(n,h),la(n.eventQueue_,h,[])}function HWe(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&N4(n.onDisconnect_,e),Xd(0,t,r,i)})}function koe(n,e,t,r){const i=Zr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&sy(n.onDisconnect_,e,i),Xd(0,r,s,o)})}function dz(n,e,t){let r;r=".info"===an(e._path)?HD(n.infoSyncTree_,e,t):HD(n.serverSyncTree_,e,t),Soe(n.eventQueue_,e._path,r)}function Noe(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Doe)}function cy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),os(t,...e)}function Xd(n,e,t,r){e&&ey(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function hz(n,e,t){return $D(n.serverSyncTree_,e,t)||Gt.EMPTY_NODE}function XD(n,e=n.transactionQueueTree_){if(e||ZD(n,e),Sp(e)){const t=Foe(n,e);(0,N.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function QWe(n,e,t){const r=t.map(c=>c.currentWriteId),i=hz(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];(0,N.vA)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=co(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{cy(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const h=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(Yd(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&h.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();ZD(n,GD(n.transactionQueueTree_,e)),XD(n,n.transactionQueueTree_),la(n.eventQueue_,e,u);for(let m=0;m<h.length;m++)ey(h[m])}else{if("datastale"===c)for(let h=0;h<t.length;h++)t[h].status=3===t[h].status?4:0;else{js("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}uy(n,e)}},o)}(n,bw(e),t)}else Ioe(e)&&qD(e,t=>{XD(n,t)})}function uy(n,e){const t=Ooe(n,e),r=bw(t);return function YWe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=co(t,l.path);let h,u=!1;if((0,N.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,h=l.abortReason,i=i.concat(Yd(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=FWe)u=!0,h="maxretry",i=i.concat(Yd(n.serverSyncTree_,l.currentWriteId,!0));else{const m=hz(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){Iw("transaction failed: Data returned ",y,l.path);let b=Zr(y);"object"==typeof y&&null!=y&&(0,N.gR)(y,".priority")||(b=b.updatePriority(m.getPriority()));const M=l.currentWriteId,B=Tw(n),V=nz(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=YD(n),o.splice(o.indexOf(M),1),i=i.concat(Q4(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(Yd(n.serverSyncTree_,M,!0))}else u=!0,h="nodata",i=i.concat(Yd(n.serverSyncTree_,l.currentWriteId,!0))}la(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===h?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(h),!1,null)))}ZD(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)ey(r[a]);XD(n,n.transactionQueueTree_)}(n,Foe(n,t),r),r}function Ooe(n,e){let t,r=n.transactionQueueTree_;for(t=an(e);null!==t&&void 0===Sp(r);)r=GD(r,t),t=an(e=dr(e));return r}function Foe(n,e){const t=[];return Loe(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Loe(n,e,t){const r=Sp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);qD(e,i=>{Loe(n,i,t)})}function ZD(n,e){const t=Sp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,sz(e,t.length>0?t:void 0)}qD(e,r=>{ZD(n,r)})}function fz(n,e){const t=bw(Ooe(n,e)),r=GD(n.transactionQueueTree_,e);return function SWe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{pz(n,i)}),pz(n,r),woe(r,i=>{pz(n,i)}),t}function pz(n,e){const t=Sp(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,N.vA)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,N.vA)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Yd(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?sz(e,void 0):t.length=s+1,la(n.eventQueue_,bw(e),i);for(let o=0;o<r.length;o++)ey(r[o])}}const mz=function(n,e){const t=JWe(n),r=t.namespace;return"firebase.com"===t.domain&&ic(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ic("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&js("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _4(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new qn(t.pathString)}},JWe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=function XWe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,h)));const m=function ZWe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):js(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},Voe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e5e=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Voe.charAt(t%64),t=Math.floor(t/64);(0,N.vA)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=Voe.charAt(e[i]);return(0,N.vA)(20===o.length,"nextPushId: Length should be 20."),o}}();class Boe{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.As)(this.snapshot.exportVal())}}class Uoe{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class gz{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class joe{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.cY;return HWe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Na("OnDisconnect.remove",this._path);const e=new N.cY;return koe(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Na("OnDisconnect.set",this._path),ac("OnDisconnect.set",e,this._path,!1);const t=new N.cY;return koe(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Na("OnDisconnect.setWithPriority",this._path),ac("OnDisconnect.setWithPriority",e,this._path,!1),lz("OnDisconnect.setWithPriority",t,!1);const r=new N.cY;return function $We(n,e,t,r,i){const s=Zr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&sy(n.onDisconnect_,e,s),Xd(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Na("OnDisconnect.update",this._path),Toe("OnDisconnect.update",e,this._path,!1);const t=new N.cY;return function WWe(n,e,t,r){if((0,N.Im)(t))return os("onDisconnect().update() called with empty data.  Don't do anything."),void Xd(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&as(t,(o,a)=>{const l=Zr(a);sy(n.onDisconnect_,Hr(e,o),l)}),Xd(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Lo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:w4(this._path)}get ref(){return new Oa(this._repo,this._path)}get _queryIdentifier(){const e=Wse(this._queryParams),t=m4(e);return"{}"===t?"default":t}get _queryObject(){return Wse(this._queryParams)}isEqual(e){if(!((e=(0,N.Ku)(e))instanceof Lo))return!1;const t=this._repo===e._repo,r=C4(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function W$e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function JD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Zd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===sc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Hd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==lu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===br){if(null!=e&&!Ew(e)||null!=t&&!Ew(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.vA)(n.getIndex()instanceof D4||n.getIndex()===R4,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eR(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Oa extends Lo{constructor(e,t){super(e,t,new DD,!1)}get parent(){const e=kse(this._path);return null===e?null:new Oa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class xp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new qn(e),r=Dp(this.ref,e);return new xp(this._node.getChild(t),r,br)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new xp(i,Dp(this.ref,r),br)))}hasChild(e){const t=new qn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function zoe(n,e){return(n=(0,N.Ku)(n))._checkNotDeleted("ref"),void 0!==e?Dp(n._root,e):n._root}function Hoe(n,e){(n=(0,N.Ku)(n))._checkNotDeleted("refFromURL");const t=mz(e,n._repo.repoInfo_.nodeAdmin);Aoe("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ic("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),zoe(n,t.path.toString())}function Dp(n,e){return null===an((n=(0,N.Ku)(n))._path)?kWe("child","path",e,!1):Cw("child","path",e,!1),new Oa(n._repo,Hr(n._path,e))}function _z(n,e){n=(0,N.Ku)(n),Na("set",n._path),ac("set",e,n._path,!1);const t=new N.cY;return uz(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function s5e(n,e){Toe("update",e,n._path,!1);const t=new N.cY;return function jWe(n,e,t,r){cy(n,"update",{path:e.toString(),value:t});let i=!0;const s=Tw(n),o={};if(as(t,(a,l)=>{i=!1,o[a]=Eoe(Hr(e,a),Zr(l),n.serverSyncTree_,s)}),i)os("update() called with empty data.  Don't do anything."),Xd(0,r,"ok",void 0);else{const a=YD(n),l=function fWe(n,e,t,r){!function R3e(n,e,t,r){(0,N.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=U4(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Er.fromObject(t);return ly(n,new oy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);QD(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{const h="ok"===c;h||js("update at "+e+" failed: "+c);const m=Yd(n.serverSyncTree_,a,!h),y=m.length>0?uy(n,e):e;la(n.eventQueue_,y,m),Xd(0,r,c,u)}),as(t,c=>{const u=fz(n,Hr(e,c));uy(n,u)}),la(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function o5e(n){n=(0,N.Ku)(n);const e=new gz(()=>{}),t=new Aw(e);return function UWe(n,e,t){const r=function yWe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const h=co(c,t);r=r||Kd(u,h)});let i=n.syncPointTree_.get(t);i?r=r||Kd(i,Nn()):(i=new uoe,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Gd(r,!0,!1):null;return function tWe(n){return OD(n.viewCache_)}(doe(i,e,FD(n.pendingWriteTree_,e._path),s?o.getNode():Gt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Zr(i).withIndex(e._queryParams.getIndex());let o;if(Y4(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=_w(n.serverSyncTree_,e._path,s);else{const a=yw(n.serverSyncTree_,e);o=goe(n.serverSyncTree_,e._path,s,a)}return la(n.eventQueue_,e._path,o),HD(n.serverSyncTree_,e,t,null,!0),s},i=>(cy(n,"get for query "+(0,N.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new xp(r,new Oa(n._repo,n._path),n._queryParams.getIndex()))}class Aw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Boe("value",this,new xp(e.snapshotNode,new Oa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Uoe(this,e,t):null}matches(e){return e instanceof Aw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tR{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Uoe(this,e,t):null}createEvent(e,t){(0,N.vA)(null!=e.childName,"Child events should have a childName.");const r=Dp(new Oa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Boe(e.type,this,new xp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof tR&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Sw(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(u,h)=>{dz(n._repo,n,a),l(u,h)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new gz(t,s||void 0),a="value"===e?new Aw(o):new tR(e,o);return function GWe(n,e,t){let r;r=".info"===an(e._path)?Y4(n.infoSyncTree_,e,t):Y4(n.serverSyncTree_,e,t),Soe(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>dz(n._repo,n,a)}function yz(n,e,t,r){return Sw(n,"value",e,t,r)}function $oe(n,e,t,r){return Sw(n,"child_added",e,t,r)}function Woe(n,e,t,r){return Sw(n,"child_changed",e,t,r)}function Goe(n,e,t,r){return Sw(n,"child_moved",e,t,r)}function qoe(n,e,t,r){return Sw(n,"child_removed",e,t,r)}function Koe(n,e,t){let r=null;const i=t?new gz(t):null;"value"===e?r=new Aw(i):e&&(r=new tR(e,i)),dz(n._repo,n,r)}class ml{}class Qoe extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){ac("endAt",this._value,e._path,!0);const t=k4(e._queryParams,this._value,this._key);if(eR(t),Zd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Lo(e._repo,e._path,t,e._orderByCalled)}}class l5e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){ac("endBefore",this._value,e._path,!1);const t=function _3e(n,e,t){let r;return r=k4(n,e,n.index_===sc||t?t:Hd),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(eR(t),Zd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Lo(e._repo,e._path,t,e._orderByCalled)}}class Yoe extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){ac("startAt",this._value,e._path,!0);const t=P4(e._queryParams,this._value,this._key);if(eR(t),Zd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Lo(e._repo,e._path,t,e._orderByCalled)}}class d5e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){ac("startAfter",this._value,e._path,!1);const t=function g3e(n,e,t){let r;return r=P4(n,e,n.index_===sc||t?t:lu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(eR(t),Zd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Lo(e._repo,e._path,t,e._orderByCalled)}}class f5e extends ml{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lo(e._repo,e._path,function p3e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class m5e extends ml{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lo(e._repo,e._path,function m3e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class _5e extends ml{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){JD(e,"orderByChild");const t=new qn(this._path);if(ln(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new D4(t),i=RD(e._queryParams,r);return Zd(i),new Lo(e._repo,e._path,i,!0)}}class v5e extends ml{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){JD(e,"orderByKey");const t=RD(e._queryParams,sc);return Zd(t),new Lo(e._repo,e._path,t,!0)}}class E5e extends ml{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){JD(e,"orderByPriority");const t=RD(e._queryParams,br);return Zd(t),new Lo(e._repo,e._path,t,!0)}}class w5e extends ml{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){JD(e,"orderByValue");const t=RD(e._queryParams,R4);return Zd(t),new Lo(e._repo,e._path,t,!0)}}class T5e extends ml{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(ac("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qoe(this._value,this._key)._apply(new Yoe(this._value,this._key)._apply(e))}}function gl(n,...e){let t=(0,N.Ku)(n);for(const r of e)t=r._apply(t);return t}(function sWe(n){(0,N.vA)(!UD,"__referenceConstructor has already been defined"),UD=n})(Oa),function uWe(n){(0,N.vA)(!zD,"__referenceConstructor has already been defined"),zD=n}(Oa);const vz={};function bz(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ic("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),os("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=mz(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=mz(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new sw(sw.OWNER):new b$e(n.name,n.options,e);Aoe("Invalid Firebase Database URL",o),ln(o.path)||ic("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function R5e(n,e,t,r){let i=vz[e.name];i||(i={},vz[e.name]=i);let s=i[n.toURLString()];return s&&ic("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new LWe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new v$e(n.name,t));return new P5e(h,n)}class P5e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function VWe(n,e,t){if(n.stats_=b4(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new MD(n.repoInfo_,(r,i,s,o)=>{Moe(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Poe(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new wp(n.repoInfo_,e,(r,i,s,o)=>{Moe(n,r,i,s,o)},r=>{Poe(n,r)},r=>{!function BWe(n,e){as(e,(t,r)=>{cz(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function w$e(n,e){const t=n.toString();return v4[t]||(v4[t]=e()),v4[t]}(n.repoInfo_,()=>new w3e(n.stats_,n.server_)),n.infoData_=new y3e,n.infoSyncTree_=new moe({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=_w(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),cz(n,"connected",!1),n.serverSyncTree_=new moe({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);la(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oa(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function D5e(n,e){const t=vz[e];(!t||t[n.key]!==n)&&ic(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Noe(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ic("Cannot call "+e+" on a deleted database.")}}function Zoe(){Ese.IS_TRANSPORT_INITIALIZED&&js("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function k5e(){Zoe(),$d.forceDisallow()}function N5e(){Zoe(),ty.forceDisallow(),$d.forceAllow()}function L5e(n,e){tse(n,e)}const B5e={".sv":"timestamp"};class z5e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},wp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function V5e(n){h4($n.SDK_VERSION),(0,$n._registerComponent)(new Jo.uA("database",(e,{instanceIdentifier:t})=>bz(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(Qie,"1.0.8",n),(0,$n.registerVersion)(Qie,"1.0.8","esm2017")}();const G5e=new Mo.Vy("@firebase/database-compat"),eae=function(n){G5e.warn("FIREBASE WARNING: "+n)};class Q5e{constructor(e){this._delegate=e}cancel(e){(0,N.od)("OnDisconnect.cancel",0,1,arguments.length),(0,N.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.od)("OnDisconnect.remove",0,1,arguments.length),(0,N.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.od)("OnDisconnect.set",1,2,arguments.length),(0,N.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,N.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,eae("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Y5e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Jd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),Cw("DataSnapshot.child","path",e,!1),new Jd(this._database,this._delegate.child(e))}hasChild(e){return(0,N.od)("DataSnapshot.hasChild",1,1,arguments.length),Cw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.od)("DataSnapshot.forEach",1,1,arguments.length),(0,N.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Jd(this._database,t)))}hasChildren(){return(0,N.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.od)("DataSnapshot.ref",0,0,arguments.length),new ca(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class _s{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,N.od)("Query.on",2,4,arguments.length),(0,N.oD)("Query.on","callback",t,!1);const o=_s.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{t.call(o.context,new Jd(this.database,c),u)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return yz(this._delegate,a,l),t;case"child_added":return $oe(this._delegate,a,l),t;case"child_removed":return qoe(this._delegate,a,l),t;case"child_changed":return Woe(this._delegate,a,l),t;case"child_moved":return Goe(this._delegate,a,l),t;default:throw new Error((0,N.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.od)("Query.off",0,3,arguments.length),function(n,e){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.oD)("Query.off","callback",t,!0),(0,N.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Koe(this._delegate,e,i)}else Koe(this._delegate,e)}get(){return o5e(this._delegate).then(e=>new Jd(this.database,e))}once(e,t,r,i){(0,N.od)("Query.once",1,4,arguments.length),(0,N.oD)("Query.once","callback",t,!0);const s=_s.getCancelAndContextArgs_("Query.once",r,i),o=new N.cY,a=(c,u)=>{const h=new Jd(this.database,c);t&&t.call(s.context,h,u),o.resolve(h)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":yz(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":$oe(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":qoe(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Woe(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Goe(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,N.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,N.od)("Query.limitToFirst",1,1,arguments.length),new _s(this.database,gl(this._delegate,function p5e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new f5e(n)}(e)))}limitToLast(e){return(0,N.od)("Query.limitToLast",1,1,arguments.length),new _s(this.database,gl(this._delegate,function g5e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new m5e(n)}(e)))}orderByChild(e){return(0,N.od)("Query.orderByChild",1,1,arguments.length),new _s(this.database,gl(this._delegate,function y5e(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Cw("orderByChild","path",n,!1),new _5e(n)}(e)))}orderByKey(){return(0,N.od)("Query.orderByKey",0,0,arguments.length),new _s(this.database,gl(this._delegate,function b5e(){return new v5e}()))}orderByPriority(){return(0,N.od)("Query.orderByPriority",0,0,arguments.length),new _s(this.database,gl(this._delegate,function I5e(){return new E5e}()))}orderByValue(){return(0,N.od)("Query.orderByValue",0,0,arguments.length),new _s(this.database,gl(this._delegate,function C5e(){return new w5e}()))}startAt(e=null,t){return(0,N.od)("Query.startAt",0,2,arguments.length),new _s(this.database,gl(this._delegate,function u5e(n=null,e){return ww("startAt","key",e,!0),new Yoe(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.od)("Query.startAfter",0,2,arguments.length),new _s(this.database,gl(this._delegate,function h5e(n,e){return ww("startAfter","key",e,!0),new d5e(n,e)}(e,t)))}endAt(e=null,t){return(0,N.od)("Query.endAt",0,2,arguments.length),new _s(this.database,gl(this._delegate,function a5e(n,e){return ww("endAt","key",e,!0),new Qoe(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.od)("Query.endBefore",0,2,arguments.length),new _s(this.database,gl(this._delegate,function c5e(n,e){return ww("endBefore","key",e,!0),new l5e(n,e)}(e,t)))}equalTo(e,t){return(0,N.od)("Query.equalTo",1,2,arguments.length),new _s(this.database,gl(this._delegate,function A5e(n,e){return ww("equalTo","key",e,!0),new T5e(n,e)}(e,t)))}toString(){return(0,N.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.od)("Query.isEqual",1,1,arguments.length),!(e instanceof _s))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,N.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ca(this.database,new Oa(this._delegate._repo,this._delegate._path))}}class ca extends _s{constructor(e,t){super(e,new Lo(t._repo,t._path,new DD,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ca(this.database,Dp(this._delegate,e))}getParent(){(0,N.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ca(this.database,e):null}getRoot(){return(0,N.od)("Reference.root",0,0,arguments.length),new ca(this.database,this._delegate.root)}set(e,t){(0,N.od)("Reference.set",1,2,arguments.length),(0,N.oD)("Reference.set","onComplete",t,!0);const r=_z(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,eae("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Na("Reference.update",this._delegate._path),(0,N.oD)("Reference.update","onComplete",t,!0);const r=s5e(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.od)("Reference.setWithPriority",2,3,arguments.length),(0,N.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function i5e(n,e,t){if(Na("setWithPriority",n._path),ac("setWithPriority",e,n._path,!1),lz("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.cY;return uz(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,N.od)("Reference.remove",0,1,arguments.length),(0,N.oD)("Reference.remove","onComplete",e,!0);const t=function n5e(n){return Na("remove",n._path),_z(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.od)("Reference.transaction",1,3,arguments.length),(0,N.oD)("Reference.transaction","transactionUpdate",e,!1),(0,N.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function H5e(n,e,t){var r;if(n=(0,N.Ku)(n),Na("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new N.cY,a=yz(n,()=>{});return function KWe(n,e,t,r,i,s){cy(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:Zie(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=hz(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Iw("transaction failed: Data returned ",l,o.path),o.status=0;const c=GD(n.transactionQueueTree_,e),u=Sp(c)||[];let h;u.push(o),sz(c,u),"object"==typeof l&&null!==l&&(0,N.gR)(l,".priority")?(h=(0,N.yw)(l,".priority"),(0,N.vA)(Ew(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=($D(n.serverSyncTree_,e)||Gt.EMPTY_NODE).getPriority().val();const m=Tw(n),y=Zr(l,h),b=nz(y,a,m);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=b,o.currentWriteId=YD(n);const T=Q4(n.serverSyncTree_,e,b,o.currentWriteId,o.applyLocally);la(n.eventQueue_,e,T),XD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,u)=>{let h=null;l?s.reject(l):(h=new xp(u,new Oa(n._repo,n._path),br),s.resolve(new z5e(c,h)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new Y5e(s.committed,new Jd(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,N.od)("Reference.setPriority",1,2,arguments.length),(0,N.oD)("Reference.setPriority","onComplete",t,!0);const r=function r5e(n,e){n=(0,N.Ku)(n),Na("setPriority",n._path),lz("setPriority",e,!1);const t=new N.cY;return uz(n._repo,Hr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.od)("Reference.push",0,2,arguments.length),(0,N.oD)("Reference.push","onComplete",t,!0);const r=function t5e(n,e){n=(0,N.Ku)(n),Na("push",n._path),ac("push",e,n._path,!0);const t=Roe(n._repo),r=e5e(t),i=Dp(n,r),s=Dp(n,r);let o;return o=null!=e?_z(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new ca(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new ca(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Na("Reference.onDisconnect",this._delegate._path),new Q5e(new joe(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class xw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:k5e,forceLongPolling:N5e}}useEmulator(e,t,r={}){!function Joe(n,e,t,r={}){(n=(0,N.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ic("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ic('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new sw(sw.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Fy)(r.mockUserToken,n.app.options.projectId);s=new sw(o)}!function x5e(n,e,t,r){n.repoInfo_=new _4(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,N.od)("database.ref",0,1,arguments.length),e instanceof ca){const t=Hoe(this._delegate,e.toString());return new ca(this,t)}{const t=zoe(this._delegate,e);return new ca(this,t)}}refFromURL(e){(0,N.od)("database.refFromURL",1,1,arguments.length);const r=Hoe(this._delegate,e);return new ca(this,r)}goOffline(){return(0,N.od)("database.goOffline",0,0,arguments.length),function O5e(n){(n=(0,N.Ku)(n))._checkNotDeleted("goOffline"),Noe(n._repo)}(this._delegate)}goOnline(){return(0,N.od)("database.goOnline",0,0,arguments.length),function F5e(n){(n=(0,N.Ku)(n))._checkNotDeleted("goOnline"),function qWe(n){n.persistentConnection_&&n.persistentConnection_.resume(Doe)}(n._repo)}(this._delegate)}}xw.ServerValue={TIMESTAMP:function U5e(){return B5e}(),increment:n=>function j5e(n){return{".sv":{increment:n}}}(n)};var Z5e=Object.freeze({__proto__:null,initStandalone:function X5e({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){h4(t);const a=new Jo.h1("database-standalone"),l=new Jo.Kq("auth-internal",a);let c;return l.setComponent(new Jo.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new Jo.Kq("app-check-internal",a),c.setComponent(new Jo.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new xw(bz(n,l,c,e,o),n),namespace:s}}});const J5e=xw.ServerValue;function Dw(n,e,t="on",r=vf){return new Ut(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(Be(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),q2())}function tae(n){return null==n}function nae(n){return"function"==typeof n.set}function rae(n,e){return nae(e)?e:n.ref(e)}function iae(n,e){if(function tGe(n){return"string"==typeof n}(n))return e.stringCase();if(nae(n))return e.firebaseCase();if(function nGe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function sae(n){return(tae(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function oae(n,e,t){return sl(...(e=sae(e)).map(i=>Dw(n,i,"on",t)))}function aae(n,e){return function(r,i){return iae(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function oGe(n){return function(t){return t?iae(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function lae(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function cGe(n,e){const{payload:t,prevKey:r,key:i}=e,s=lae(n,i),o=function lGe(n,e){if(tae(e))return 0;{const t=lae(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function cae(n,e,t){return function aGe(n,e,t){return Dw(n,"value","once",t).pipe(Qt(r=>{const i=[Qe(r)];return e.forEach(s=>i.push(Dw(n,s,"on",t))),sl(...i).pipe(bg(cGe,[]))}),RA())}(n,e=sae(e),t)}function uae(n,e){return function(){return Dw(n,"value","on",e)}}!function eGe(n){n.INTERNAL.registerComponent(new Jo.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new xw(i,r)},"PUBLIC").setServiceProps({Reference:ca,Query:_s,Database:xw,DataSnapshot:Jd,enableLogging:L5e,INTERNAL:Z5e,ServerValue:J5e}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.8")}(Gl.A);const hGe=new Ee("angularfire2.realtimeDatabaseURL"),fGe=new Ee("angularfire2.database.use-emulator");let pGe=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,c,u,h,m,y,b,T,M){this.schedulers=a;const B=l,V=qS(t,o,r);c&&tV(V,o,u,m,y,b,h,T),this.database=G2(`${V.name}.database.${i}`,"AngularFireDatabase",V.name,()=>{const Q=o.runOutsideAngular(()=>V.database(i||void 0));return B&&Q.useEmulator(...B),Q},[B])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>rae(this.database,t));let s=i;return r&&(s=r(i)),function uGe(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:aae(r,"update"),set:aae(r,"set"),push:i=>r.push(i),remove:oGe(r),snapshotChanges:i=>cae(n,i,t).pipe(zi),stateChanges:i=>oae(n,i,t).pipe(zi),auditTrail:i=>function rGe(n,e,t){return function sGe(n,e,t){return function iGe(n,e){return Dw(n,"value","on",e).pipe(Be(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function s$e(...n){const e=bk(n);return ye((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)ro(n[l]).subscribe(Fe(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Pi))&&(o=null))},vs));t.subscribe(Fe(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}(e),Be(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function o$e(n){return ye((e,t)=>{let r=!1,i=0;e.subscribe(Fe(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),Be(i=>i.actions))}(n,oae(n,e).pipe(bg((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(zi),valueChanges:(i,s)=>cae(n,i,t).pipe(Be(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),zi)}}(s,this)}object(t){return function dGe(n,e){return{query:n,snapshotChanges:()=>uae(n,e.schedulers.outsideAngular)().pipe(zi),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>uae(n,e.schedulers.outsideAngular)().pipe(zi,Be(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>rae(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(Re(JE),Re(eI,8),Re(hGe,8),Re(Ys),Re(yt),Re(jg),Re(fGe,8),Re(tI,8),Re(Q2,8),Re(Y2,8),Re(X2,8),Re(Z2,8),Re(J2,8),Re(eV,8),Re(VA,8))};static \u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),mGe=(()=>{class n{constructor(){Gl.A.registerVersion("angularfire",id.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zt({type:n});static \u0275inj=$t({providers:[pGe]})}return n})(),gGe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=zt({type:n,bootstrap:[Tje]})}static{this.\u0275inj=$t({providers:[DEe(uf(Ku.LegacyInterceptors,[{provide:Mq,useFactory:yEe},{provide:Cb,useExisting:Mq,multi:!0}])),ZAe(()=>JAe(Os_firebaseConfig)),sSe(()=>aSe()),i$e(()=>jHe())],imports:[nq,eje,Fre,pze,$I,Nre,Vg,nre,kAe,wre,Yk,$8,nNe.initializeApp(Os_firebaseConfig),aNe,mGe,kre,Ore,Mre,Lre]})}}return n})();Nbe().bootstrapModule(gGe).catch(n=>console.error(n))},443:(vt,U,G)=>{G.d(U,{$:()=>e0,A:()=>$,G:()=>Ve,K:()=>ER,L:()=>oh,N:()=>_o,P:()=>Ho,R:()=>ut,U:()=>gt,V:()=>jp,W:()=>nH,X:()=>uh,Y:()=>Sy,Z:()=>zp,_:()=>$p,a:()=>$y,a0:()=>Re,a1:()=>Kp,a2:()=>mc,a3:()=>fh,a4:()=>o0,a5:()=>In,a6:()=>l0,a7:()=>Xp,a8:()=>bo,a9:()=>DR,aA:()=>pu,aB:()=>St,aC:()=>ie,aD:()=>Ki,aE:()=>ye,aF:()=>Be,aG:()=>pm,aH:()=>JR,aI:()=>dH,aJ:()=>Cr,aN:()=>Ts,aQ:()=>Eu,aa:()=>c0,ab:()=>_h,ac:()=>u0,ad:()=>RR,ae:()=>Ny,af:()=>PR,ag:()=>kR,ah:()=>NR,ak:()=>OR,al:()=>Vn,am:()=>FR,ap:()=>hh,aq:()=>qi,as:()=>g0,at:()=>Li,au:()=>bt,av:()=>go,aw:()=>$w,ax:()=>At,ay:()=>hn,az:()=>Ss,b:()=>_c,c:()=>sH,d:()=>aH,e:()=>oH,f:()=>D0,g:()=>R0,h:()=>tM,i:()=>yc,j:()=>iM,k:()=>Co,l:()=>Ru,m:()=>L0,o:()=>pM,p:()=>ee,r:()=>om,s:()=>_a,u:()=>Ec,y:()=>UR});var D=G(467),Z=G(1631),x=G(1401),me=G(5398),ce=G(1635),te=G(8779);const ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ve=function he(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},nt=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new x.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new me.Vy("@firebase/auth");function Jt(g,...d){tt.logLevel<=me.$b.ERROR&&tt.error(`Auth (${Z.SDK_VERSION}): ${g}`,...d)}function At(g,...d){throw Ue(g,...d)}function St(g,...d){return Ue(g,...d)}function Lt(g,d,f){const _=Object.assign(Object.assign({},nt()),{[d]:f});return new x.FA("auth","Firebase",_).create(d,{appName:g.name})}function _t(g){return Lt(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wt(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&At(g,"argument-error"),Lt(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return Ze.create(g,...d)}function ie(g,d,...f){if(!g)throw Ue(d,...f)}function it(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Jt(d),new Error(d)}function bt(g,d){g||it(d)}function Ht(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Sn(){return"http:"===xn()||"https:"===xn()}function xn(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class ir{constructor(d,f){this.shortDelay=d,this.longDelay=f,bt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,x.jZ)()||(0,x.lV)()}get(){return function Ir(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Sn()||(0,x.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fr(g,d){bt(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class Wr{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},be=new ir(3e4,6e4);function se(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function ae(g,d,f,_){return ve.apply(this,arguments)}function ve(){return(ve=(0,D.A)(function*(g,d,f,_,w={}){return _e(g,w,(0,D.A)(function*(){let R={},Y={};_&&("GET"===d?Y=_:R={body:JSON.stringify(_)});const ge=(0,x.Am)(Object.assign({key:g.config.apiKey},Y)).slice(1),ke=yield g._getAdditionalHeaders();ke["Content-Type"]="application/json",g.languageCode&&(ke["X-Firebase-Locale"]=g.languageCode);const rt=Object.assign({method:d,headers:ke},R);return(0,x.c1)()||(rt.referrerPolicy="no-referrer"),Wr.fetch()(Ct(g,g.config.apiHost,f,ge),rt)}))})).apply(this,arguments)}function _e(g,d,f){return lt.apply(this,arguments)}function lt(){return(lt=(0,D.A)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},fe),d);try{const w=new mt(g),R=yield Promise.race([f(),w.promise]);w.clearNetworkTimeout();const Y=yield R.json();if("needConfirmation"in Y)throw Jr(g,"account-exists-with-different-credential",Y);if(R.ok&&!("errorMessage"in Y))return Y;{const ge=R.ok?Y.errorMessage:Y.error.message,[ke,rt]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Jr(g,"credential-already-in-use",Y);if("EMAIL_EXISTS"===ke)throw Jr(g,"email-already-in-use",Y);if("USER_DISABLED"===ke)throw Jr(g,"user-disabled",Y);const dt=_[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Lt(g,dt,rt);At(g,dt)}}catch(w){if(w instanceof x.g)throw w;At(g,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function Pt(g,d,f,_){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,D.A)(function*(g,d,f,_,w={}){const R=yield ae(g,d,f,_,w);return"mfaPendingCredential"in R&&At(g,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ct(g,d,f,_){const w=`${d}${f}?${_}`;return g.config.emulator?fr(g.config,w):`${g.config.apiScheme}://${w}`}function Tn(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mt{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(St(this.auth,"network-request-failed")),be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jr(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const w=St(g,d,_);return w.customData._tokenResponse=f,w}function tn(g){return void 0!==g&&void 0!==g.getResponse}function nn(g){return void 0!==g&&void 0!==g.enterprise}class Dt{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return Tn(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Ci(){return(Ci=(0,D.A)(function*(g){return(yield ae(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nr(g,d){return ti.apply(this,arguments)}function ti(){return(ti=(0,D.A)(function*(g,d){return ae(g,"GET","/v2/recaptchaConfig",se(g,d))})).apply(this,arguments)}function La(){return(La=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Ws(){return(Ws=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function po(g,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Gs(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function qs(){return(qs=(0,D.A)(function*(g,d=!1){const f=(0,x.Ku)(g),_=yield f.getIdToken(d),w=Bo(_);ie(w&&w.exp&&w.auth_time&&w.iat,f.auth,"internal-error");const R="object"==typeof w.firebase?w.firebase:void 0,Y=R?.sign_in_provider;return{claims:w,token:_,authTime:Gs(ls(w.auth_time)),issuedAtTime:Gs(ls(w.iat)),expirationTime:Gs(ls(w.exp)),signInProvider:Y||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function ls(g){return 1e3*Number(g)}function Bo(g){const[d,f,_]=g.split(".");if(void 0===d||void 0===f||void 0===_)return Jt("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,x.u)(f);return w?JSON.parse(w):(Jt("Failed to decode base64 JWT payload"),null)}catch(w){return Jt("Caught error parsing JWT payload as JSON",w?.toString()),null}}function bs(g){const d=Bo(g);return ie(d,"internal-error"),ie(typeof d.exp<"u","internal-error"),ie(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function Fn(g,d){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,D.A)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof x.g&&function Es({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class yl{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const w=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,D.A)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,D.A)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class fi{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gs(this.lastLoginAt),this.creationTime=Gs(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Is(g){return mo.apply(this,arguments)}function mo(){return(mo=(0,D.A)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),w=yield Fn(g,po(f,{idToken:_}));ie(w?.users.length,f,"internal-error");const R=w.users[0];g._notifyReloadListener(R);const Y=null!==(d=R.providerUserInfo)&&void 0!==d&&d.length?Ut(R.providerUserInfo):[],ge=function pa(g,d){return[...g.filter(_=>!d.some(w=>w.providerId===_.providerId)),...d]}(g.providerData,Y),dt=!!g.isAnonymous&&!(g.email&&R.passwordHash||ge?.length),rn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ge,metadata:new fi(R.createdAt,R.lastLoginAt),isAnonymous:dt};Object.assign(g,rn)})).apply(this,arguments)}function Va(){return(Va=(0,D.A)(function*(g){const d=(0,x.Ku)(g);yield Is(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ut(g){return g.map(d=>{var{providerId:f}=d,_=(0,ce.Tt)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function qe(){return(qe=(0,D.A)(function*(g,d){const f=yield _e(g,{},(0,D.A)(function*(){const _=(0,x.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:w,apiKey:R}=g.config,Y=Ct(g,w,"/v1/token",`key=${R}`),ge=yield g._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",Wr.fetch()(Y,{method:"POST",headers:ge,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,D.A)(function*(g,d){return ae(g,"POST","/v2/accounts:revokeToken",se(g,d))})).apply(this,arguments)}class E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ie(d.idToken,"internal-error"),ie(typeof d.idToken<"u","internal-error"),ie(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):bs(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}updateFromIdToken(d){ie(0!==d.length,"internal-error");const f=bs(d);this.updateTokensAndExpiration(d,null,f)}getToken(d,f=!1){var _=this;return(0,D.A)(function*(){return f||!_.accessToken||_.isExpired?(ie(_.refreshToken,d,"user-token-expired"),_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null):_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,D.A)(function*(){const{accessToken:w,refreshToken:R,expiresIn:Y}=yield function lc(g,d){return qe.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(w,R,Number(Y))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:w,expirationTime:R}=f,Y=new E;return _&&(ie("string"==typeof _,"internal-error",{appName:d}),Y.refreshToken=_),w&&(ie("string"==typeof w,"internal-error",{appName:d}),Y.accessToken=w),R&&(ie("number"==typeof R,"internal-error",{appName:d}),Y.expirationTime=R),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new E,this.toJSON())}_performRefresh(){return it("not implemented")}}function S(g,d){ie("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class F{constructor(d){var{uid:f,auth:_,stsTokenManager:w}=d,R=(0,ce.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new fi(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,D.A)(function*(){const _=yield Fn(f,f.stsTokenManager.getToken(f.auth,d));return ie(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function fa(g){return qs.apply(this,arguments)}(this,d)}reload(){return function Pi(g){return Va.apply(this,arguments)}(this)}_assign(d){this!==d&&(ie(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new F(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,D.A)(function*(){let w=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),w=!0),f&&(yield Is(_)),yield _.auth._persistUserIfCurrent(_),w&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,D.A)(function*(){if((0,Z._isFirebaseServerApp)(d.auth.app))return Promise.reject(_t(d.auth));const f=yield d.getIdToken();return yield Fn(d,function fo(g,d){return La.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,w,R,Y,ge,ke,rt,dt;const rn=null!==(_=f.displayName)&&void 0!==_?_:void 0,Pn=null!==(w=f.email)&&void 0!==w?w:void 0,xs=null!==(R=f.phoneNumber)&&void 0!==R?R:void 0,Un=null!==(Y=f.photoURL)&&void 0!==Y?Y:void 0,us=null!==(ge=f.tenantId)&&void 0!==ge?ge:void 0,ov=null!==(ke=f._redirectEventId)&&void 0!==ke?ke:void 0,kh=null!==(rt=f.createdAt)&&void 0!==rt?rt:void 0,U0=null!==(dt=f.lastLoginAt)&&void 0!==dt?dt:void 0,{uid:Em,emailVerified:av,isAnonymous:ku,providerData:To,stsTokenManager:j0}=f;ie(Em&&j0,d,"internal-error");const Im=E.fromJSON(this.name,j0);ie("string"==typeof Em,d,"internal-error"),S(rn,d.name),S(Pn,d.name),ie("boolean"==typeof av,d,"internal-error"),ie("boolean"==typeof ku,d,"internal-error"),S(xs,d.name),S(Un,d.name),S(us,d.name),S(ov,d.name),S(kh,d.name),S(U0,d.name);const Nu=new F({uid:Em,auth:d,email:Pn,emailVerified:av,displayName:rn,isAnonymous:ku,photoURL:Un,phoneNumber:xs,tenantId:us,stsTokenManager:Im,createdAt:kh,lastLoginAt:U0});return To&&Array.isArray(To)&&(Nu.providerData=To.map(wm=>Object.assign({},wm))),ov&&(Nu._redirectEventId=ov),Nu}static _fromIdTokenResponse(d,f,_=!1){return(0,D.A)(function*(){const w=new E;w.updateFromServerResponse(f);const R=new F({uid:f.localId,auth:d,stsTokenManager:w,isAnonymous:_});return yield Is(R),R})()}static _fromGetAccountInfoResponse(d,f,_){return(0,D.A)(function*(){const w=f.users[0];ie(void 0!==w.localId,"internal-error");const R=void 0!==w.providerUserInfo?Ut(w.providerUserInfo):[],Y=!(w.email&&w.passwordHash||R?.length),ge=new E;ge.updateFromIdToken(_);const ke=new F({uid:w.localId,auth:d,stsTokenManager:ge,isAnonymous:Y}),rt={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:R,metadata:new fi(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||R?.length)};return Object.assign(ke,rt),ke})()}}const j=new Map;function ye(g){bt(g instanceof Function,"Expected a class definition");let d=j.get(g);return d?(bt(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,j.set(g,d),d)}const gt=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(f,_){var w=this;return(0,D.A)(function*(){w.storage[f]=_})()}_get(f){var _=this;return(0,D.A)(function*(){const w=_.storage[f];return void 0===w?null:w})()}_remove(f){var _=this;return(0,D.A)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function Be(g,d,f){return`firebase:${g}:${d}:${f}`}class bn{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:w,name:R}=this.auth;this.fullUserKey=Be(this.userKey,w.apiKey,R),this.fullPersistenceKey=Be("persistence",w.apiKey,R),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,D.A)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?F._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,D.A)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,D.A)(function*(){if(!f.length)return new bn(ye(gt),d,_);const w=(yield Promise.all(f.map(function(){var rt=(0,D.A)(function*(dt){if(yield dt._isAvailable())return dt});return function(dt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let R=w[0]||ye(gt);const Y=Be(_,d.config.apiKey,d.name);let ge=null;for(const rt of f)try{const dt=yield rt._get(Y);if(dt){const rn=F._fromJSON(d,dt);rt!==R&&(ge=rn),R=rt;break}}catch{}const ke=w.filter(rt=>rt._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],ge&&(yield R._set(Y,ge.toJSON())),yield Promise.all(f.map(function(){var rt=(0,D.A)(function*(dt){if(dt!==R)try{yield dt._remove(Y)}catch{}});return function(dt){return rt.apply(this,arguments)}}())),new bn(R,d,_)):new bn(R,d,_)})()}}function wr(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(sh(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(K(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(_R(d))return"Blackberry";if(my(d))return"Webos";if(Xn(d))return"Safari";if((d.includes("chrome/")||Ks(d))&&!d.includes("edge/"))return"Chrome";if($w(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function K(g=(0,x.ZQ)()){return/firefox\//i.test(g)}function Xn(g=(0,x.ZQ)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ks(g=(0,x.ZQ)()){return/crios\//i.test(g)}function sh(g=(0,x.ZQ)()){return/iemobile/i.test(g)}function $w(g=(0,x.ZQ)()){return/android/i.test(g)}function _R(g=(0,x.ZQ)()){return/blackberry/i.test(g)}function my(g=(0,x.ZQ)()){return/webos/i.test(g)}function go(g=(0,x.ZQ)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function pu(g=(0,x.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}function gy(g=(0,x.ZQ)()){return go(g)||$w(g)||my(g)||_R(g)||/windows phone/i.test(g)||sh(g)}function Np(g,d=[]){let f;switch(g){case"Browser":f=wr((0,x.ZQ)());break;case"Worker":f=`${wr((0,x.ZQ)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${Z.SDK_VERSION}/${_}`}class _u{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=R=>new Promise((Y,ge)=>{try{Y(d(R))}catch(ke){ge(ke)}});_.onAbort=f,this.queue.push(_);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,D.A)(function*(){if(f.auth.currentUser===d)return;const _=[];try{for(const w of f.queue)yield w(d),w.onAbort&&_.push(w.onAbort)}catch(w){_.reverse();for(const R of _)try{R()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function Kn(){return(Kn=(0,D.A)(function*(g,d={}){return ae(g,"GET","/v2/passwordPolicy",se(g,d))})).apply(this,arguments)}class Kz{constructor(d){var f,_,w,R;const Y=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Y.minPasswordLength)&&void 0!==f?f:6,Y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Y.maxPasswordLength),void 0!==Y.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Y.containsLowercaseCharacter),void 0!==Y.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Y.containsUppercaseCharacter),void 0!==Y.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Y.containsNumericCharacter),void 0!==Y.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Y.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(_=d.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(R=d.forceUpgradeOnSignin)&&void 0!==R&&R,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,_,w,R,Y,ge;const ke={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,ke),this.validatePasswordCharacterOptions(d,ke),ke.isValid&&(ke.isValid=null===(f=ke.meetsMinPasswordLength)||void 0===f||f),ke.isValid&&(ke.isValid=null===(_=ke.meetsMaxPasswordLength)||void 0===_||_),ke.isValid&&(ke.isValid=null===(w=ke.containsLowercaseLetter)||void 0===w||w),ke.isValid&&(ke.isValid=null===(R=ke.containsUppercaseLetter)||void 0===R||R),ke.isValid&&(ke.isValid=null===(Y=ke.containsNumericCharacter)||void 0===Y||Y),ke.isValid&&(ke.isValid=null===(ge=ke.containsNonAlphanumericCharacter)||void 0===ge||ge),ke}validatePasswordLengthOptions(d,f){const _=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;_&&(f.meetsMinPasswordLength=d.length>=_),w&&(f.meetsMaxPasswordLength=d.length<=w)}validatePasswordCharacterOptions(d,f){let _;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let w=0;w<d.length;w++)_=d.charAt(w),this.updatePasswordCharacterOptionsStatuses(f,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(d,f,_,w,R){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=R))}}class Ln{constructor(d,f,_,w){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ni(this),this.idTokenSubscription=new ni(this),this.beforeStateQueue=new _u(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=ye(f)),this._initializationPromise=this.queue((0,D.A)(function*(){var w,R;if(!_._deleted&&(_.persistenceManager=yield bn.create(_,d),!_._deleted)){if(null!==(w=_._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,D.A)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(d){var f=this;return(0,D.A)(function*(){try{const _=yield po(f,{idToken:d}),w=yield F._fromGetAccountInfoResponse(f,_,d);yield f.directlySetCurrentUser(w)}catch(_){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",_),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var f=this;return(0,D.A)(function*(){var _;if((0,Z._isFirebaseServerApp)(f.app)){const ge=f.app.settings.authIdToken;return ge?new Promise(ke=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(ge).then(ke,ke))}):f.directlySetCurrentUser(null)}const w=yield f.assertedPersistence.getCurrentUser();let R=w,Y=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const ge=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,ke=R?._redirectEventId,rt=yield f.tryRedirectSignIn(d);(!ge||ge===ke)&&rt?.user&&(R=rt.user,Y=!0)}if(!R)return f.directlySetCurrentUser(null);if(!R._redirectEventId){if(Y)try{yield f.beforeStateQueue.runMiddleware(R)}catch(ge){R=w,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(ge))}return R?f.reloadAndSetCurrentUserOrClear(R):f.directlySetCurrentUser(null)}return ie(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===R._redirectEventId?f.directlySetCurrentUser(R):f.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(d){var f=this;return(0,D.A)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,D.A)(function*(){try{yield Is(d)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Dn(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,D.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,D.A)(function*(){if((0,Z._isFirebaseServerApp)(f.app))return Promise.reject(_t(f));const _=d?(0,x.Ku)(d):null;return _&&ie(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,D.A)(function*(){if(!_._deleted)return d&&ie(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,D.A)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,D.A)(function*(){return(0,Z._isFirebaseServerApp)(d.app)?Promise.reject(_t(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var f=this;return(0,Z._isFirebaseServerApp)(this.app)?Promise.reject(_t(this)):this.queue((0,D.A)(function*(){yield f.assertedPersistence.setPersistence(ye(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,D.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const _=f._getPasswordPolicyInternal();return _.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,D.A)(function*(){const f=yield function Gz(g){return Kn.apply(this,arguments)}(d),_=new Kz(f);null===d.tenantId?d._projectPasswordPolicy=_:d._tenantPasswordPolicies[d.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new x.FA("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const _=this.onAuthStateChanged(()=>{_(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,D.A)(function*(){if(f.currentUser){const _=yield f.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:_};null!=f.tenantId&&(w.tenantId=f.tenantId),yield function Se(g,d){return C.apply(this,arguments)}(f,w)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,D.A)(function*(){const w=yield _.getOrInitRedirectPersistenceManager(f);return null===d?w.removeCurrentUser():w.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,D.A)(function*(){if(!f.redirectPersistenceManager){const _=d&&ye(d)||f._popupRedirectResolver;ie(_,f,"argument-error"),f.redirectPersistenceManager=yield bn.create(f,[ye(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,D.A)(function*(){var _,w;return f._isInitialized&&(yield f.queue((0,D.A)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,D.A)(function*(){if(d===f.currentUser)return f.queue((0,D.A)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,w){if(this._deleted)return()=>{};const R="function"==typeof f?f:f.next.bind(f);let Y=!1;const ge=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(ge,this,"internal-error"),ge.then(()=>{Y||R(this.currentUser)}),"function"==typeof f){const ke=d.addObserver(f,_,w);return()=>{Y=!0,ke()}}{const ke=d.addObserver(f);return()=>{Y=!0,ke()}}}directlySetCurrentUser(d){var f=this;return(0,D.A)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Np(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,D.A)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const w=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();w&&(_["X-Firebase-Client"]=w);const R=yield d._getAppCheckToken();return R&&(_["X-Firebase-AppCheck"]=R),_})()}_getAppCheckToken(){var d=this;return(0,D.A)(function*(){var f;const _=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function qt(g,...d){tt.logLevel<=me.$b.WARN&&tt.warn(`Auth (${Z.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function Cr(g){return(0,x.Ku)(g)}class ni{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,x.tD)(f=>this.observer=f)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let cc={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _y(g){return cc.loadJS(g)}function ws(g){return`__${g}${Math.floor(1e6*Math.random())}`}class vR{constructor(d){this.type="recaptcha-enterprise",this.auth=Cr(d)}verify(d="verify",f=!1){var _=this;return(0,D.A)(function*(){function R(){return R=(0,D.A)(function*(ge){if(!f){if(null==ge.tenantId&&null!=ge._agentRecaptchaConfig)return ge._agentRecaptchaConfig.siteKey;if(null!=ge.tenantId&&void 0!==ge._tenantRecaptchaConfigs[ge.tenantId])return ge._tenantRecaptchaConfigs[ge.tenantId].siteKey}return new Promise(function(){var ke=(0,D.A)(function*(rt,dt){Nr(ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(rn=>{if(void 0!==rn.recaptchaKey){const Pn=new Dt(rn);return null==ge.tenantId?ge._agentRecaptchaConfig=Pn:ge._tenantRecaptchaConfigs[ge.tenantId]=Pn,rt(Pn.siteKey)}dt(new Error("recaptcha Enterprise site key undefined"))}).catch(rn=>{dt(rn)})});return function(rt,dt){return ke.apply(this,arguments)}}())}),R.apply(this,arguments)}function Y(ge,ke,rt){const dt=window.grecaptcha;nn(dt)?dt.enterprise.ready(()=>{dt.enterprise.execute(ge,{action:d}).then(rn=>{ke(rn)}).catch(()=>{ke("NO_RECAPTCHA")})}):rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ge,ke)=>{(function w(ge){return R.apply(this,arguments)})(_.auth).then(rt=>{if(!f&&nn(window.grecaptcha))Y(rt,ge,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));let dt=function xt(){return cc.recaptchaEnterpriseScript}();0!==dt.length&&(dt+=rt),_y(dt).then(()=>{Y(rt,ge,ke)}).catch(rn=>{ke(rn)})}}).catch(rt=>{ke(rt)})})})()}}function Ba(g,d,f){return Ww.apply(this,arguments)}function Ww(){return(Ww=(0,D.A)(function*(g,d,f,_=!1){const w=new vR(g);let R;try{R=yield w.verify(f)}catch{R=yield w.verify(f,!0)}const Y=Object.assign({},d);return Object.assign(Y,_?{captchaResp:R}:{captchaResponse:R}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}function Fp(g,d,f,_){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,D.A)(function*(g,d,f,_){var w;if(null!==(w=g._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const R=yield Ba(g,d,f,"getOobCode"===f);return _(g,R)}return _(g,d).catch(function(){var R=(0,D.A)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ge=yield Ba(g,d,f,"getOobCode"===f);return _(g,ge)}return Promise.reject(Y)});return function(Y){return R.apply(this,arguments)}}())}),Gw.apply(this,arguments)}function ER(g,d,f){const _=Cr(g);ie(_._canInitEmulator,_,"emulator-config-failed"),ie(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const w=!!f?.disableWarnings,R=Cs(d),{host:Y,port:ge}=function Tt(g){const d=Cs(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(_);if(w){const R=w[1];return{host:R,port:IR(_.substr(R.length+1))}}{const[R,Y]=_.split(":");return{host:R,port:IR(Y)}}}(d);_.config.emulator={url:`${R}//${Y}${null===ge?"":`:${ge}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:Y,port:ge,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function Jz(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}function Cs(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function IR(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class oh{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return it("not implemented")}_getIdTokenResponse(d){return it("not implemented")}_linkToIdToken(d,f){return it("not implemented")}_getReauthenticationResolver(d){return it("not implemented")}}function wR(g,d){return qw.apply(this,arguments)}function qw(){return(qw=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:resetPassword",se(g,d))})).apply(this,arguments)}function Kw(){return(Kw=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function $t(g,d){return yu.apply(this,arguments)}function yu(){return(yu=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Lp(){return(Lp=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:update",se(g,d))})).apply(this,arguments)}function TR(g,d){return vu.apply(this,arguments)}function vu(){return(vu=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithPassword",se(g,d))})).apply(this,arguments)}function uc(g,d){return ah.apply(this,arguments)}function ah(){return(ah=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:sendOobCode",se(g,d))})).apply(this,arguments)}function vy(){return(vy=(0,D.A)(function*(g,d){return uc(g,d)})).apply(this,arguments)}function Ee(g,d){return lh.apply(this,arguments)}function lh(){return(lh=(0,D.A)(function*(g,d){return uc(g,d)})).apply(this,arguments)}function by(g,d){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,D.A)(function*(g,d){return uc(g,d)})).apply(this,arguments)}function Iy(){return(Iy=(0,D.A)(function*(g,d){return uc(g,d)})).apply(this,arguments)}function Yw(){return(Yw=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithEmailLink",se(g,d))})).apply(this,arguments)}function Xw(){return(Xw=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithEmailLink",se(g,d))})).apply(this,arguments)}class Bp extends oh{constructor(d,f,_,w=null){super("password",_),this._email=d,this._password=f,this._tenantId=w}static _fromEmailAndPassword(d,f){return new Bp(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new Bp(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,D.A)(function*(){switch(f.signInMethod){case"password":return Fp(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",TR);case"emailLink":return function wy(g,d){return Yw.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:At(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,D.A)(function*(){switch(_.signInMethod){case"password":return Fp(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$t);case"emailLink":return function eH(g,d){return Xw.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:At(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Uo(g,d){return dc.apply(this,arguments)}function dc(){return(dc=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithIdp",se(g,d))})).apply(this,arguments)}class _o extends oh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new _o(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):At("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:w}=f,R=(0,ce.Tt)(f,["providerId","signInMethod"]);if(!_||!w)return null;const Y=new _o(_,w);return Y.idToken=R.idToken||void 0,Y.accessToken=R.accessToken||void 0,Y.secret=R.secret,Y.nonce=R.nonce,Y.pendingToken=R.pendingToken||null,Y}_getIdTokenResponse(d){return Uo(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Uo(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Uo(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,x.Am)(f)}return d}}function jo(){return(jo=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:sendVerificationCode",se(g,d))})).apply(this,arguments)}function Up(){return(Up=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,d))})).apply(this,arguments)}function En(){return(En=(0,D.A)(function*(g,d){const f=yield Pt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,d));if(f.temporaryProof)throw Jr(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const tH={USER_NOT_FOUND:"user-not-found"};function Ty(){return(Ty=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),tH)})).apply(this,arguments)}class bu extends oh{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new bu({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new bu({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function ch(g,d){return Up.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Ot(g,d){return En.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function AR(g,d){return Ty.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:w}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:w}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}=d;return _||f||w||R?new bu({verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}):null}}class jt{constructor(d){var f,_,w,R,Y,ge;const ke=(0,x.I9)((0,x.hp)(d)),rt=null!==(f=ke.apiKey)&&void 0!==f?f:null,dt=null!==(_=ke.oobCode)&&void 0!==_?_:null,rn=function SR(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=ke.mode)&&void 0!==w?w:null);ie(rt&&dt&&rn,"argument-error"),this.apiKey=rt,this.operation=rn,this.code=dt,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(Y=ke.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ge=ke.tenantId)&&void 0!==ge?ge:null}static parseLink(d){const f=function Ay(g){const d=(0,x.I9)((0,x.hp)(g)).link,f=d?(0,x.I9)((0,x.hp)(d)).deep_link_id:null,_=(0,x.I9)((0,x.hp)(g)).deep_link_id;return(_?(0,x.I9)((0,x.hp)(_)).link:null)||_||f||d||g}(d);try{return new jt(f)}catch{return null}}}let jp=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return Bp._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const w=jt.parseLink(_);return ie(w,"argument-error"),Bp._fromEmailAndCode(f,w.code,w.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Or{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class hc extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class zp extends hc{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return ie("providerId"in f&&"signInMethod"in f,"argument-error"),_o._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ie(d.idToken||d.accessToken,"argument-error"),_o._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return zp.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return zp.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:w,pendingToken:R,nonce:Y,providerId:ge}=d;if(!_&&!w&&!f&&!R||!ge)return null;try{return new zp(ge)._credential({idToken:f,accessToken:_,nonce:Y,pendingToken:R})}catch{return null}}}let nH=(()=>{class g extends hc{constructor(){super("facebook.com")}static credential(f){return _o._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),uh=(()=>{class g extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return _o._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:w}=f;if(!_&&!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Sy=(()=>{class g extends hc{constructor(){super("github.com")}static credential(f){return _o._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Eu extends oh{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Uo(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Uo(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Uo(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:w,pendingToken:R}=f;return _&&w&&R&&_===w?new Eu(_,R):null}static _create(d,f){return new Eu(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $p extends Or{constructor(d){ie(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return $p.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return $p.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Eu.fromJSON(d);return ie(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return Eu._create(_,f)}catch{return null}}}let e0=(()=>{class g extends hc{constructor(){super("twitter.com")}static credential(f,_){return _o._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:w}=f;if(!_||!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function fc(g,d){return xy.apply(this,arguments)}function xy(){return(xy=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signUp",se(g,d))})).apply(this,arguments)}class pi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,w=!1){return(0,D.A)(function*(){const R=yield F._fromIdTokenResponse(d,_,w),Y=t0(_);return new pi({user:R,providerId:Y,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,D.A)(function*(){yield d._updateTokensIfNecessary(_,!0);const w=t0(_);return new pi({user:d,providerId:w,_tokenResponse:_,operationType:f})})()}}function t0(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Re(g){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,D.A)(function*(g){var d;if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const f=Cr(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new pi({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield fc(f,{returnSecureToken:!0}),w=yield pi._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(w.user),w})).apply(this,arguments)}class k extends x.g{constructor(d,f,_,w){var R;super(f.code,f.message),this.operationType=_,this.user=w,Object.setPrototypeOf(this,k.prototype),this.customData={appName:d.name,tenantId:null!==(R=d.tenantId)&&void 0!==R?R:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,w){return new k(d,f,_,w)}}function dh(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?k._fromErrorAndOperation(g,R,d,_):R})}function Gp(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function hh(g,d){return Dy.apply(this,arguments)}function Dy(){return Dy=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);yield qp(!0,f,d);const{providerUserInfo:_}=yield function vs(g,d){return Ws.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),w=Gp(_||[]);return f.providerData=f.providerData.filter(R=>w.has(R.providerId)),w.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Dy.apply(this,arguments)}function Ry(g,d){return My.apply(this,arguments)}function My(){return(My=(0,D.A)(function*(g,d,f=!1){const _=yield Fn(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return pi._forOperation(g,"link",_)})).apply(this,arguments)}function qp(g,d,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,D.A)(function*(g,d,f){yield Is(d);const w=!1===g?"provider-already-linked":"no-such-provider";ie(Gp(d.providerData).has(f)===g,d.auth,w)})).apply(this,arguments)}function n0(g,d){return pc.apply(this,arguments)}function pc(){return(pc=(0,D.A)(function*(g,d,f=!1){const{auth:_}=g;if((0,Z._isFirebaseServerApp)(_.app))return Promise.reject(_t(_));const w="reauthenticate";try{const R=yield Fn(g,dh(_,w,d,g),f);ie(R.idToken,_,"internal-error");const Y=Bo(R.idToken);ie(Y,_,"internal-error");const{sub:ge}=Y;return ie(g.uid===ge,_,"user-mismatch"),pi._forOperation(g,w,R)}catch(R){throw"auth/user-not-found"===R?.code&&At(_,"user-mismatch"),R}})).apply(this,arguments)}function r0(g,d){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,D.A)(function*(g,d,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _="signIn",w=yield dh(g,_,d),R=yield pi._fromIdTokenResponse(g,_,w);return f||(yield g._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Kp(g,d){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,D.A)(function*(g,d){return r0(Cr(g),d)})).apply(this,arguments)}function mc(g,d){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);return yield qp(!1,f,d.providerId),Ry(f,d)})).apply(this,arguments)}function fh(g,d){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,D.A)(function*(g,d){return n0((0,x.Ku)(g),d)})).apply(this,arguments)}function s0(){return(s0=(0,D.A)(function*(g,d){return Pt(g,"POST","/v1/accounts:signInWithCustomToken",se(g,d))})).apply(this,arguments)}function o0(g,d){return a0.apply(this,arguments)}function a0(){return a0=(0,D.A)(function*(g,d){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const f=Cr(g),_=yield function Py(g,d){return s0.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),w=yield pi._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(w.user),w}),a0.apply(this,arguments)}class Ni{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?ph._fromServerResponse(d,f):"totpInfo"in f?vl._fromServerResponse(d,f):At(d,"internal-error")}}class ph extends Ni{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new ph(f)}}class vl extends Ni{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new vl(f)}}function ky(g,d,f){var _;ie((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),ie(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ie(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(ie(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Yp(g){return yo.apply(this,arguments)}function yo(){return(yo=(0,D.A)(function*(g){const d=Cr(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function In(g,d,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,D.A)(function*(g,d,f){const _=Cr(g),w={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&ky(_,w,f),yield Fp(_,w,"getOobCode",Ee)})).apply(this,arguments)}function l0(g,d,f){return mh.apply(this,arguments)}function mh(){return mh=(0,D.A)(function*(g,d,f){yield wR((0,x.Ku)(g),{oobCode:d,newPassword:f}).catch(function(){var _=(0,D.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Yp(g),w});return function(w){return _.apply(this,arguments)}}())}),mh.apply(this,arguments)}function Xp(g,d){return wu.apply(this,arguments)}function wu(){return wu=(0,D.A)(function*(g,d){yield function CR(g,d){return Lp.apply(this,arguments)}((0,x.Ku)(g),{oobCode:d})}),wu.apply(this,arguments)}function bo(g,d){return ma.apply(this,arguments)}function ma(){return(ma=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g),_=yield wR(f,{oobCode:d}),w=_.requestType;switch(ie(w,f,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(_.mfaInfo,f,"internal-error");default:ie(_.email,f,"internal-error")}let R=null;return _.mfaInfo&&(R=Ni._fromServerResponse(Cr(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:w}})).apply(this,arguments)}function DR(g,d){return gh.apply(this,arguments)}function gh(){return(gh=(0,D.A)(function*(g,d){const{data:f}=yield bo((0,x.Ku)(g),d);return f.email})).apply(this,arguments)}function c0(g,d,f){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=Cr(g),Y=yield Fp(_,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fc).catch(ke=>{throw"auth/password-does-not-meet-requirements"===ke.code&&Yp(g),ke}),ge=yield pi._fromIdTokenResponse(_,"signIn",Y);return yield _._updateCurrentUser(ge.user),ge})).apply(this,arguments)}function _h(g,d,f){return(0,Z._isFirebaseServerApp)(g.app)?Promise.reject(_t(g)):Kp((0,x.Ku)(g),jp.credential(d,f)).catch(function(){var _=(0,D.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Yp(g),w});return function(w){return _.apply(this,arguments)}}())}function u0(g,d,f){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,D.A)(function*(g,d,f){const _=Cr(g),w={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function R(Y,ge){ie(ge.handleCodeInApp,_,"argument-error"),ge&&ky(_,Y,ge)})(w,f),yield Fp(_,w,"getOobCode",by)})).apply(this,arguments)}function RR(g,d){const f=jt.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}function Ny(g,d,f){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=(0,x.Ku)(g),w=jp.credentialWithLink(d,f||Ht());return ie(w._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Kp(_,w)})).apply(this,arguments)}function Qs(){return(Qs=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:createAuthUri",se(g,d))})).apply(this,arguments)}function PR(g,d){return em.apply(this,arguments)}function em(){return em=(0,D.A)(function*(g,d){const _={identifier:d,continueUri:Sn()?Ht():"http://localhost"},{signinMethods:w}=yield function MR(g,d){return Qs.apply(this,arguments)}((0,x.Ku)(g),_);return w||[]}),em.apply(this,arguments)}function kR(g,d){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g),w={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&ky(f.auth,w,d);const{email:R}=yield function Qw(g,d){return vy.apply(this,arguments)}(f.auth,w);R!==g.email&&(yield g.reload())}),Fy.apply(this,arguments)}function NR(g,d,f){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&ky(_.auth,R,f);const{email:Y}=yield function Ey(g,d){return Iy.apply(this,arguments)}(_.auth,R);Y!==g.email&&(yield g.reload())}),Ly.apply(this,arguments)}function Vy(){return(Vy=(0,D.A)(function*(g,d){return ae(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function OR(g,d){return By.apply(this,arguments)}function By(){return By=(0,D.A)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,x.Ku)(g),R={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},Y=yield Fn(_,function d0(g,d){return Vy.apply(this,arguments)}(_.auth,R));_.displayName=Y.displayName||null,_.photoURL=Y.photoUrl||null;const ge=_.providerData.find(({providerId:ke})=>"password"===ke);ge&&(ge.displayName=_.displayName,ge.photoURL=_.photoURL),yield _._updateTokensIfNecessary(Y)}),By.apply(this,arguments)}function Vn(g,d){const f=(0,x.Ku)(g);return(0,Z._isFirebaseServerApp)(f.auth.app)?Promise.reject(_t(f.auth)):h0(f,d,null)}function FR(g,d){return h0((0,x.Ku)(g),null,d)}function h0(g,d,f){return zt.apply(this,arguments)}function zt(){return zt=(0,D.A)(function*(g,d,f){const{auth:_}=g,R={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(R.email=d),f&&(R.password=f);const Y=yield Fn(g,function Oe(g,d){return Kw.apply(this,arguments)}(_,R));yield g._updateTokensIfNecessary(Y,!0)}),zt.apply(this,arguments)}class Je{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class Oi extends Je{constructor(d,f,_,w){super(d,f,_),this.username=w}}class Xt extends Je{constructor(d,f){super(d,"facebook.com",f)}}class mi extends Oi{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Fi extends Je{constructor(d,f){super(d,"google.com",f)}}class bl extends Oi{constructor(d,f,_){super(d,"twitter.com",f,_)}}function qi(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function f0(g){var d,f;if(!g)return null;const{providerId:_}=g,w=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},R=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const Y=null===(f=null===(d=Bo(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(Y)return new Je(R,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!_)return null;switch(_){case"facebook.com":return new Xt(R,w);case"github.com":return new mi(R,w);case"google.com":return new Fi(R,w);case"twitter.com":return new bl(R,w,g.screenName||null);case"custom":case"anonymous":return new Je(R,null);default:return new Je(R,_,w)}}(f)}function UR(g,d,f,_){return(0,x.Ku)(g).onAuthStateChanged(d,f,_)}class ja{constructor(d,f,_){this.type=d,this.credential=f,this.user=_}static _fromIdtoken(d,f){return new ja("enroll",d,f)}static _fromMfaPendingCredential(d){return new ja("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return ja._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return ja._fromIdtoken(d.multiFactorSession.idToken)}return null}}class tm{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=Cr(d),w=f.customData._serverResponse,R=(w.mfaInfo||[]).map(ge=>Ni._fromServerResponse(_,ge));ie(w.mfaPendingCredential,_,"internal-error");const Y=ja._fromMfaPendingCredential(w.mfaPendingCredential);return new tm(Y,R,function(){var ge=(0,D.A)(function*(ke){const rt=yield ke._process(_,Y);delete w.mfaInfo,delete w.mfaPendingCredential;const dt=Object.assign(Object.assign({},w),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(f.operationType){case"signIn":const rn=yield pi._fromIdTokenResponse(_,f.operationType,dt);return yield _._updateCurrentUser(rn.user),rn;case"reauthenticate":return ie(f.user,_,"internal-error"),pi._forOperation(f.user,f.operationType,dt);default:At(_,"internal-error")}});return function(ke){return ge.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,D.A)(function*(){return f.signInResolver(d)})()}}function g0(g,d){var f;const _=(0,x.Ku)(g),w=d;return ie(d.customData.operationType,_,"argument-error"),ie(null===(f=w.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),tm._fromError(_,w)}class yh{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>Ni._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new yh(d)}getSession(){var d=this;return(0,D.A)(function*(){return ja._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var _=this;return(0,D.A)(function*(){const w=d,R=yield _.getSession(),Y=yield Fn(_.user,w._process(_.user.auth,R,f));return yield _.user._updateTokensIfNecessary(Y),_.user.reload()})()}unenroll(d){var f=this;return(0,D.A)(function*(){const _="string"==typeof d?d:d.uid,w=yield f.user.getIdToken();try{const R=yield Fn(f.user,function HR(g,d){return ae(g,"POST","/v2/accounts/mfaEnrollment:withdraw",se(g,d))}(f.user.auth,{idToken:w,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Y})=>Y!==_),yield f.user._updateTokensIfNecessary(R),yield f.user.reload()}catch(R){throw R}})()}}const Cu=new WeakMap;function Li(g){const d=(0,x.Ku)(g);return Cu.has(d)||Cu.set(d,yh._fromUser(d)),Cu.get(d)}const za="__sak";class rm{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const _c=(()=>{class g extends rm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gy(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const w=this.storage.getItem(_),R=this.localCache[_];w!==R&&f(_,R,w)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((ge,ke,rt)=>{this.notifyListeners(ge,rt)});const w=f.key;_?this.detachListener():this.stopPolling();const R=()=>{const ge=this.storage.getItem(w);!_&&this.localCache[w]===ge||this.notifyListeners(w,ge)},Y=this.storage.getItem(w);!function gu(){return(0,x.lT)()&&10===document.documentMode}()||Y===f.newValue||f.newValue===f.oldValue?R():setTimeout(R,10)}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var w=()=>super._set,R=this;return(0,D.A)(function*(){yield w().call(R,f,_),R.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,w=this;return(0,D.A)(function*(){const R=yield _().call(w,f);return w.localCache[f]=JSON.stringify(R),R})()}_remove(f){var _=()=>super._remove,w=this;return(0,D.A)(function*(){yield _().call(w,f),delete w.localCache[f]})()}}return g.type="LOCAL",g})(),$y=(()=>{class g extends rm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let Wy=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(R=>R.isListeningto(f));if(_)return _;const w=new g(f);return this.receivers.push(w),w}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,D.A)(function*(){const w=f,{eventId:R,eventType:Y,data:ge}=w.data,ke=_.handlersMap[Y];if(!ke?.size)return;w.ports[0].postMessage({status:"ack",eventId:R,eventType:Y});const rt=Array.from(ke).map(function(){var rn=(0,D.A)(function*(Pn){return Pn(w.origin,ge)});return function(Pn){return rn.apply(this,arguments)}}()),dt=yield function qR(g){return Promise.all(g.map(function(){var d=(0,D.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(rt);w.ports[0].postMessage({status:"done",eventId:R,eventType:Y,response:dt})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Ts(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class y0{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var w=this;return(0,D.A)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let Y,ge;return new Promise((ke,rt)=>{const dt=Ts("",20);R.port1.start();const rn=setTimeout(()=>{rt(new Error("unsupported_event"))},_);ge={messageChannel:R,onMessage(Pn){const xs=Pn;if(xs.data.eventId===dt)switch(xs.data.status){case"ack":clearTimeout(rn),Y=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),ke(xs.data.response);break;default:clearTimeout(rn),clearTimeout(Y),rt(new Error("invalid_response"))}}},w.handlers.add(ge),R.port1.addEventListener("message",ge.onMessage),w.target.postMessage({eventType:d,eventId:dt,data:f},[R.port2])}).finally(()=>{ge&&w.removeMessageHandler(ge)})})()}}function Fr(){return window}function Gy(){return typeof Fr().WorkerGlobalScope<"u"&&"function"==typeof Fr().importScripts}function Gr(){return(Gr=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Au="firebaseLocalStorageDb",im="firebaseLocalStorage",b0="fbase_key";class vh{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function sm(g,d){return g.transaction([im],d?"readwrite":"readonly").objectStore(im)}function bh(){const g=indexedDB.open(Au,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(im,{keyPath:b0})}catch(w){f(w)}}),g.addEventListener("success",(0,D.A)(function*(){const _=g.result;_.objectStoreNames.contains(im)?d(_):(_.close(),yield function XR(){const g=indexedDB.deleteDatabase(Au);return new vh(g).toPromise()}(),d(yield bh()))}))})}function Eh(g,d,f){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,D.A)(function*(g,d,f){const _=sm(g,!0).put({[b0]:d,value:f});return new vh(_).toPromise()})).apply(this,arguments)}function ht(){return(ht=(0,D.A)(function*(g,d){const f=sm(g,!1).get(d),_=yield new vh(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function qr(g,d){const f=sm(g,!0).delete(d);return new vh(f).toPromise()}const yc=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,D.A)(function*(){return f.db||(f.db=yield bh()),f.db})()}_withRetries(f){var _=this;return(0,D.A)(function*(){let w=0;for(;;)try{const R=yield _._openDb();return yield f(R)}catch(R){if(w++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,D.A)(function*(){return Gy()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,D.A)(function*(){f.receiver=Wy._getInstance(function QR(){return Gy()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,D.A)(function*(w,R){return{keyProcessed:(yield f._poll()).includes(R.key)}});return function(w,R){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,D.A)(function*(w,R){return["keyChanged"]});return function(w,R){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,D.A)(function*(){var _,w;if(f.activeServiceWorker=yield function KR(){return Gr.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new y0(f.activeServiceWorker);const R=yield f.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(w=R[0])&&void 0!==w&&w.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,D.A)(function*(){if(_.sender&&_.activeServiceWorker&&function v0(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const f=yield bh();return yield Eh(f,za,"1"),yield qr(f,za),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,D.A)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var w=this;return(0,D.A)(function*(){return w._withPendingWrite((0,D.A)(function*(){return yield w._withRetries(R=>Eh(R,f,_)),w.localCache[f]=_,w.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,D.A)(function*(){const w=yield _._withRetries(R=>function ze(g,d){return ht.apply(this,arguments)}(R,f));return _.localCache[f]=w,w})()}_remove(f){var _=this;return(0,D.A)(function*(){return _._withPendingWrite((0,D.A)(function*(){return yield _._withRetries(w=>qr(w,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,D.A)(function*(){const _=yield f._withRetries(Y=>{const ge=sm(Y,!1).getAll();return new vh(ge).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const w=[],R=new Set;if(0!==_.length)for(const{fbase_key:Y,value:ge}of _)R.add(Y),JSON.stringify(f.localCache[Y])!==JSON.stringify(ge)&&(f.notifyListeners(Y,ge),w.push(Y));for(const Y of Object.keys(f.localCache))f.localCache[Y]&&!R.has(Y)&&(f.notifyListeners(Y,null),w.push(Y));return w})()}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),wh=1e12;class Su{constructor(d){this.auth=d,this.counter=wh,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new pr(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||wh;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||wh))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,D.A)(function*(){var _;return null===(_=f._widgets.get(d||wh))||void 0===_||_.execute(),""})()}}class pr{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof d?document.getElementById(d):d;ie(w,"argument-error",{appName:f}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vc(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Il=ws("rcb"),Ha=new ir(3e4,6e4);class xu{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Fr().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return ie(function E0(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&tn(Fr().grecaptcha)?Promise.resolve(Fr().grecaptcha):new Promise((_,w)=>{const R=Fr().setTimeout(()=>{w(St(d,"network-request-failed"))},Ha.get());Fr()[Il]=()=>{Fr().clearTimeout(R),delete Fr()[Il];const ge=Fr().grecaptcha;if(!ge||!tn(ge))return void w(St(d,"internal-error"));const ke=ge.render;ge.render=(rt,dt)=>{const rn=ke(rt,dt);return this.counter++,rn},this.hostLanguage=f,_(ge)},_y(`${function Qn(){return cc.recaptchaV2Script}()}?${(0,x.Am)({onload:Il,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(R),w(St(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Fr().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wl{load(d){return(0,D.A)(function*(){return new Su(d)})()}clearedOneInstance(){}}const Ch="recaptcha",Eo={theme:"light",type:"image"};class ut{constructor(d,f,_=Object.assign({},Eo)){this.parameters=_,this.type=Ch,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cr(d),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof f?document.getElementById(f):f;ie(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wl:new xu,this.validateStartingState()}verify(){var d=this;return(0,D.A)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(R=>{const Y=ge=>{ge&&(d.tokenChangeListeners.delete(Y),R(ge))};d.tokenChangeListeners.add(Y),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=Fr()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,D.A)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,D.A)(function*(){ie(Sn()&&!Gy(),d.auth,"internal-error"),yield function qy(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function ei(g){return Ci.apply(this,arguments)}(d.auth);ie(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bc{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=bu._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function _a(g,d,f){return Du.apply(this,arguments)}function Du(){return(Du=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=Cr(g),w=yield gi(_,d,(0,x.Ku)(f));return new bc(w,R=>Kp(_,R))})).apply(this,arguments)}function Ru(g,d,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);yield qp(!1,_,"phone");const w=yield gi(_.auth,d,(0,x.Ku)(f));return new bc(w,R=>mc(_,R))})).apply(this,arguments)}function om(g,d,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(_t(_.auth));const w=yield gi(_.auth,d,(0,x.Ku)(f));return new bc(w,R=>fh(_,R))})).apply(this,arguments)}function gi(g,d,f){return Th.apply(this,arguments)}function Th(){return Th=(0,D.A)(function*(g,d,f){var _;const w=yield f.verify();try{let R;if(ie("string"==typeof w,g,"argument-error"),ie(f.type===Ch,g,"argument-error"),R="string"==typeof d?{phoneNumber:d}:d,"session"in R){const Y=R.session;if("phoneNumber"in R)return ie("enroll"===Y.type,g,"internal-error"),(yield function gc(g,d){return ae(g,"POST","/v2/accounts/mfaEnrollment:start",se(g,d))}(g,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{ie("signin"===Y.type,g,"internal-error");const ge=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return ie(ge,g,"missing-multi-factor-info"),(yield function Jn(g,d){return ae(g,"POST","/v2/accounts/mfaSignIn:start",se(g,d))}(g,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Zw(g,d){return jo.apply(this,arguments)}(g,{phoneNumber:R.phoneNumber,recaptchaToken:w});return Y}}finally{f._reset()}}),Th.apply(this,arguments)}function Ec(g,d){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,D.A)(function*(g,d){const f=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(f.auth.app))return Promise.reject(_t(f.auth));yield Ry(f,d)})).apply(this,arguments)}let Ho=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=Cr(f)}verifyPhoneNumber(f,_){return gi(this.auth,f,(0,x.Ku)(_))}static credential(f,_){return bu._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:w}=f;return _&&w?bu._fromTokenResponse(_,w):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function $o(g,d){return d?ye(d):(ie(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class am extends oh{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Uo(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Uo(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Uo(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function ZR(g){return r0(g.auth,new am(g),g.bypassAuthState)}function Ky(g){const{auth:d,user:f}=g;return ie(f,d,"internal-error"),n0(f,new am(g),g.bypassAuthState)}function I0(g){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,D.A)(function*(g){const{auth:d,user:f}=g;return ie(f,d,"internal-error"),Ry(f,new am(g),g.bypassAuthState)})).apply(this,arguments)}class lm{constructor(d,f,_,w,R=!1){this.auth=d,this.resolver=_,this.user=w,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,D.A)(function*(_,w){d.pendingPromise={resolve:_,reject:w};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(R){d.reject(R)}});return function(_,w){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,D.A)(function*(){const{urlResponse:_,sessionId:w,postBody:R,tenantId:Y,error:ge,type:ke}=d;if(ge)return void f.reject(ge);const rt={auth:f.auth,requestUri:_,sessionId:w,tenantId:Y||void 0,postBody:R||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(ke)(rt))}catch(dt){f.reject(dt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return ZR;case"linkViaPopup":case"linkViaRedirect":return I0;case"reauthViaPopup":case"reauthViaRedirect":return Ky;default:At(this.auth,"internal-error")}}resolve(d){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iH=new ir(2e3,1e4);function sH(g,d,f){return w0.apply(this,arguments)}function w0(){return(w0=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(St(g,"operation-not-supported-in-this-environment"));const _=Cr(g);wt(g,d,Or);const w=$o(_,f);return new A0(_,"signInViaPopup",d,w).executeNotNull()})).apply(this,arguments)}function oH(g,d,f){return C0.apply(this,arguments)}function C0(){return(C0=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(St(_.auth,"operation-not-supported-in-this-environment"));wt(_.auth,d,Or);const w=$o(_.auth,f);return new A0(_.auth,"reauthViaPopup",d,w,_).executeNotNull()})).apply(this,arguments)}function aH(g,d,f){return T0.apply(this,arguments)}function T0(){return(T0=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);wt(_.auth,d,Or);const w=$o(_.auth,f);return new A0(_.auth,"linkViaPopup",d,w,_).executeNotNull()})).apply(this,arguments)}let A0=(()=>{class g extends lm{constructor(f,_,w,R,Y){super(f,_,R,Y),this.provider=w,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,D.A)(function*(){const _=yield f.execute();return ie(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,D.A)(function*(){bt(1===f.filter.length,"Popup operations only handle one event");const _=Ts();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(w=>{f.reject(w)}),f.resolver._isIframeWebStorageSupported(f.auth,w=>{w||f.reject(St(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,w;this.pollId=null!==(w=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,iH.get())};f()}}return g.currentPopupAction=null,g})();const lH="pendingRedirect",cm=new Map;class cH extends lm{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,D.A)(function*(){let _=cm.get(f.auth._key());if(!_){try{const R=(yield function uH(g,d){return um.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(R)}catch(w){_=()=>Promise.reject(w)}cm.set(f.auth._key(),_)}return f.bypassAuthState||cm.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,D.A)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const w=yield _.auth._redirectUserForId(d.eventId);if(w)return _.user=w,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function um(){return(um=(0,D.A)(function*(g,d){const f=x0(d),_=eM(g);if(!(yield _._isAvailable()))return!1;const w="true"===(yield _._get(f));return yield _._remove(f),w})).apply(this,arguments)}function dm(g,d){return S0.apply(this,arguments)}function S0(){return(S0=(0,D.A)(function*(g,d){return eM(g)._set(x0(d),"true")})).apply(this,arguments)}function dH(){cm.clear()}function JR(g,d){cm.set(g._key(),d)}function eM(g){return ye(g._redirectPersistence)}function x0(g){return Be(lH,g.config.apiKey,g.name)}function D0(g,d,f){return function cs(g,d,f){return hm.apply(this,arguments)}(g,d,f)}function hm(){return(hm=(0,D.A)(function*(g,d,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=Cr(g);wt(g,d,Or),yield _._initializationPromise;const w=$o(_,f);return yield dm(w,_),w._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function tM(g,d,f){return function nM(g,d,f){return fm.apply(this,arguments)}(g,d,f)}function fm(){return(fm=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);if(wt(_.auth,d,Or),(0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(_t(_.auth));yield _.auth._initializationPromise;const w=$o(_.auth,f);yield dm(w,_.auth);const R=yield gn(_);return w._openRedirect(_.auth,d,"reauthViaRedirect",R)})).apply(this,arguments)}function R0(g,d,f){return function rM(g,d,f){return Ah.apply(this,arguments)}(g,d,f)}function Ah(){return(Ah=(0,D.A)(function*(g,d,f){const _=(0,x.Ku)(g);wt(_.auth,d,Or),yield _.auth._initializationPromise;const w=$o(_.auth,f);yield qp(!1,_,d.providerId),yield dm(w,_.auth);const R=yield gn(_);return w._openRedirect(_.auth,d,"linkViaRedirect",R)})).apply(this,arguments)}function iM(g,d){return Io.apply(this,arguments)}function Io(){return(Io=(0,D.A)(function*(g,d){return yield Cr(g)._initializationPromise,pm(g,d,!1)})).apply(this,arguments)}function pm(g,d){return mm.apply(this,arguments)}function mm(){return(mm=(0,D.A)(function*(g,d,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(_t(g));const _=Cr(g),w=$o(_,d),Y=yield new cH(_,w,f).execute();return Y&&!f&&(delete Y.user._redirectEventId,yield _._persistUserIfCurrent(Y.user),yield _._setRedirectUser(null,d)),Y})).apply(this,arguments)}function gn(g){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,D.A)(function*(g){const d=Ts(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Ki{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Ic(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pu(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!Pu(d)){const w=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(St(this.auth,w))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(M0(d))}saveEventToCache(d){this.cachedEventUids.add(M0(d)),this.lastProcessedEventTime=Date.now()}}function M0(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function Pu({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Ss(g){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,D.A)(function*(g,d={}){return ae(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Xy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sM=/^https?/;function gm(){return(gm=(0,D.A)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Ss(g);for(const f of d)try{if(P0(f))return}catch{}At(g,"unauthorized-domain")})).apply(this,arguments)}function P0(g){const d=Ht(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const Y=new URL(g);return""===Y.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&Y.hostname===_}if(!sM.test(f))return!1;if(Xy.test(g))return _===g;const w=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(_)}const k0=new ir(3e4,6e4);function Dh(){const g=Fr().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let wc=null;const Jy=new ir(5e3,15e3),$a="__/auth/iframe",Mt="emulator/auth/iframe",ym={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ev=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N0(g){const d=g.config;ie(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?fr(d,Mt):`https://${g.config.authDomain}/${$a}`,_={apiKey:d.apiKey,appName:g.name,v:Z.SDK_VERSION},w=ev.get(g.config.apiHost);w&&(_.eid=w);const R=g._getFrameworks();return R.length&&(_.fw=R.join(",")),`${f}?${(0,x.Am)(_).slice(1)}`}function tv(){return tv=(0,D.A)(function*(g){const d=yield function _m(g){return wc=wc||function Zy(g){return new Promise((d,f)=>{var _,w,R;function Y(){Dh(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Dh(),f(St(g,"network-request-failed"))},timeout:k0.get()})}if(null!==(w=null===(_=Fr().gapi)||void 0===_?void 0:_.iframes)&&void 0!==w&&w.Iframe)d(gapi.iframes.getContext());else{if(null===(R=Fr().gapi)||void 0===R||!R.load){const ge=ws("iframefcb");return Fr()[ge]=()=>{gapi.load?Y():f(St(g,"network-request-failed"))},_y(`${function Op(){return cc.gapiScript}()}?onload=${ge}`).catch(ke=>f(ke))}Y()}}).catch(d=>{throw wc=null,d})}(g),wc}(g),f=Fr().gapi;return ie(f,g,"internal-error"),d.open({where:document.body,url:N0(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ym,dontclear:!0},_=>new Promise(function(){var w=(0,D.A)(function*(R,Y){yield _.restyle({setHideOnLeave:!1});const ge=St(g,"network-request-failed"),ke=Fr().setTimeout(()=>{Y(ge)},Jy.get());function rt(){Fr().clearTimeout(ke),R(_)}_.ping(rt).then(rt,()=>{Y(ge)})});return function(R,Y){return w.apply(this,arguments)}}()))}),tv.apply(this,arguments)}const oM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class F0{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const dM="__/auth/handler",Te="emulator/auth/handler",Kt=encodeURIComponent("fac");function hn(g,d,f,_,w,R){return fn.apply(this,arguments)}function fn(){return(fn=(0,D.A)(function*(g,d,f,_,w,R){ie(g.config.authDomain,g,"auth-domain-config-required"),ie(g.config.apiKey,g,"invalid-api-key");const Y={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:Z.SDK_VERSION,eventId:w};if(d instanceof Or){d.setDefaultLanguage(g.languageCode),Y.providerId=d.providerId||"",(0,x.Im)(d.getCustomParameters())||(Y.customParameters=JSON.stringify(d.getCustomParameters()));for(const[dt,rn]of Object.entries(R||{}))Y[dt]=rn}if(d instanceof hc){const dt=d.getScopes().filter(rn=>""!==rn);dt.length>0&&(Y.scopes=dt.join(","))}g.tenantId&&(Y.tid=g.tenantId);const ge=Y;for(const dt of Object.keys(ge))void 0===ge[dt]&&delete ge[dt];const ke=yield g._getAppCheckToken(),rt=ke?`#${Kt}=${encodeURIComponent(ke)}`:"";return`${function Bn({config:g}){return g.emulator?fr(g,Te):`https://${g.authDomain}/${dM}`}(g)}?${(0,x.Am)(ge).slice(1)}${rt}`})).apply(this,arguments)}const vm="webStorageSupport",Co=class Rh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$y,this._completeRedirectFn=pm,this._overrideRedirectResult=JR}_openPopup(d,f,_,w){var R=this;return(0,D.A)(function*(){var Y;bt(null===(Y=R.eventManagers[d._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ge=yield hn(d,f,_,Ht(),w);return function cM(g,d,f,_=500,w=600){const R=Math.max((window.screen.availHeight-w)/2,0).toString(),Y=Math.max((window.screen.availWidth-_)/2,0).toString();let ge="";const ke=Object.assign(Object.assign({},oM),{width:_.toString(),height:w.toString(),top:R,left:Y}),rt=(0,x.ZQ)().toLowerCase();f&&(ge=Ks(rt)?"_blank":f),K(rt)&&(d=d||"http://localhost",ke.scrollbars="yes");const dt=Object.entries(ke).reduce((Pn,[xs,Un])=>`${Pn}${xs}=${Un},`,"");if(function mu(g=(0,x.ZQ)()){var d;return go(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(rt)&&"_self"!==ge)return function uM(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",ge),new F0(null);const rn=window.open(d||"",ge,dt);ie(rn,g,"popup-blocked");try{rn.focus()}catch{}return new F0(rn)}(d,ge,Ts())})()}_openRedirect(d,f,_,w){var R=this;return(0,D.A)(function*(){return yield R._originValidation(d),function Tu(g){Fr().location.href=g}(yield hn(d,f,_,Ht(),w)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:w,promise:R}=this.eventManagers[f];return w?Promise.resolve(w):(bt(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,D.A)(function*(){const _=yield function hH(g){return tv.apply(this,arguments)}(d),w=new Ki(d);return _.register("authEvent",R=>(ie(R?.authEvent,d,"invalid-auth-event"),{status:w.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:w},f.iframes[d._key()]=_,w})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(vm,{type:vm},w=>{var R;const Y=null===(R=w?.[0])||void 0===R?void 0:R[vm];void 0!==Y&&f(!!Y),At(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function wo(g){return gm.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return gy()||Xn()||go()}};class bm{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return it("unexpected MultiFactorSessionType")}}}class Mh extends bm{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Mh(d)}_finalizeEnroll(d,f,_){return function zR(g,d){return ae(g,"POST","/v2/accounts/mfaEnrollment:finalize",se(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function ri(g,d){return ae(g,"POST","/v2/accounts/mfaSignIn:finalize",se(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let L0=(()=>{class g{constructor(){}static assertion(f){return Mh._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var rv="@firebase/auth";class Wa{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,D.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const hM=(0,x.XA)("authIdTokenMaxAge")||300;let iv=null;const fM=g=>function(){var d=(0,D.A)(function*(f){const _=f&&(yield f.getIdTokenResult()),w=_&&((new Date).getTime()-Date.parse(_.issuedAtTime))/1e3;if(w&&w>hM)return;const R=_?.token;iv!==R&&(iv=R,yield fetch(g,{method:R?"POST":"DELETE",headers:R?{Authorization:`Bearer ${R}`}:{}}))});return function(f){return d.apply(this,arguments)}}();function pM(g=(0,Z.getApp)()){const d=(0,Z._getProvider)(g,"auth");if(d.isInitialized())return d.getImmediate();const f=function Zz(g,d){const f=(0,Z._getProvider)(g,"auth");if(f.isInitialized()){const w=f.getImmediate(),R=f.getOptions();if((0,x.bD)(R,d??{}))return w;At(w,"already-initialized")}return f.initialize({options:d})}(g,{popupRedirectResolver:Co,persistence:[yc,_c,$y]}),_=(0,x.XA)("authTokenSyncURL");if(_&&"boolean"==typeof isSecureContext&&isSecureContext){const R=new URL(_,location.origin);if(location.origin===R.origin){const Y=fM(R.toString());(function El(g,d,f){(0,x.Ku)(g).beforeAuthStateChanged(d,f)})(f,Y,()=>Y(f.currentUser)),function BR(g,d,f,_){(0,x.Ku)(g).onIdTokenChanged(d,f,_)}(f,ge=>Y(ge))}}const w=(0,x.Tj)("auth");return w&&ER(f,`http://${w}`),f}(function Qz(g){cc=g})({loadJS:g=>new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=w=>{const R=St("internal-error");R.customData=w,f(R)},_.type="text/javascript",_.charset="UTF-8",function sv(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Wo(g){(0,Z._registerComponent)(new te.uA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),w=d.getProvider("heartbeat"),R=d.getProvider("app-check-internal"),{apiKey:Y,authDomain:ge}=_.options;ie(Y&&!Y.includes(":"),"invalid-api-key",{appName:_.name});const ke={apiKey:Y,authDomain:ge,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Np(g)},rt=new Ln(_,w,R,ke);return function bR(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(ye);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(rt,f),rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new te.uA("auth-internal",d=>{const f=Cr(d.getProvider("auth").getImmediate());return new Wa(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(rv,"1.7.9",function B0(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Z.registerVersion)(rv,"1.7.9","esm2017")}("Browser")},1401:(vt,U,G)=>{G.d(U,{$L:()=>Mn,$g:()=>fr,A4:()=>$,Am:()=>vs,As:()=>Ct,Bd:()=>it,Cv:()=>tn,FA:()=>_e,Fy:()=>_t,HN:()=>Es,Hk:()=>x,I9:()=>Ws,Im:()=>Ci,K3:()=>te,KA:()=>ee,Ku:()=>Se,Ll:()=>ie,OE:()=>fi,T9:()=>At,Tj:()=>qt,Uj:()=>X,XA:()=>St,ZQ:()=>wt,bD:()=>ti,c1:()=>Ht,cY:()=>Lt,dI:()=>bs,dM:()=>se,eX:()=>be,g:()=>ve,gR:()=>Dt,gz:()=>ha,hp:()=>po,jZ:()=>Ue,kH:()=>Nr,kj:()=>yl,lT:()=>Dn,lV:()=>xn,mS:()=>Ve,nr:()=>Wr,oD:()=>Wi,od:()=>Bo,p7:()=>bt,p9:()=>Ut,qc:()=>nn,sr:()=>Sn,tD:()=>Gs,u:()=>z,vA:()=>Z,yw:()=>ei,zW:()=>fe,zw:()=>he});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(C,E){if(!C)throw x(E)},x=function(C){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+C)},me=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):55296==(64512&j)&&F+1<C.length&&56320==(64512&C.charCodeAt(F+1))?(j=65536+((1023&j)<<10)+(1023&C.charCodeAt(++F)),E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,E){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=E?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let j=0;j<C.length;j+=3){const ye=C[j],Fe=j+1<C.length,gt=Fe?C[j+1]:0,Be=j+2<C.length,bn=Be?C[j+2]:0;let Xn=(15&gt)<<2|bn>>6,Ks=63&bn;Be||(Ks=64,Fe||(Xn=64)),F.push(S[ye>>2],S[(3&ye)<<4|gt>>4],S[Xn],S[Ks])}return F.join("")},encodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?btoa(C):this.encodeByteArray(me(C),E)},decodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?atob(C):function(C){const E=[];let S=0,F=0;for(;S<C.length;){const j=C[S++];if(j<128)E[F++]=String.fromCharCode(j);else if(j>191&&j<224){const ye=C[S++];E[F++]=String.fromCharCode((31&j)<<6|63&ye)}else if(j>239&&j<365){const Be=((7&j)<<18|(63&C[S++])<<12|(63&C[S++])<<6|63&C[S++])-65536;E[F++]=String.fromCharCode(55296+(Be>>10)),E[F++]=String.fromCharCode(56320+(1023&Be))}else{const ye=C[S++],Fe=C[S++];E[F++]=String.fromCharCode((15&j)<<12|(63&ye)<<6|63&Fe)}}return E.join("")}(this.decodeStringToByteArray(C,E))},decodeStringToByteArray(C,E){this.init_();const S=E?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let j=0;j<C.length;){const ye=S[C.charAt(j++)],gt=j<C.length?S[C.charAt(j)]:0;++j;const bn=j<C.length?S[C.charAt(j)]:64;++j;const K=j<C.length?S[C.charAt(j)]:64;if(++j,null==ye||null==gt||null==bn||null==K)throw new Ae;F.push(ye<<2|gt>>4),64!==bn&&(F.push(gt<<4&240|bn>>2),64!==K&&F.push(bn<<6&192|K))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ee=function(C){const E=me(C);return te.encodeByteArray(E,!0)},X=function(C){return ee(C).replace(/\./g,"")},z=function(C){try{return te.decodeString(C,!0)}catch(E){console.error("base64Decode failed: ",E)}return null};function $(C){return he(void 0,C)}function he(C,E){if(!(E instanceof Object))return E;switch(E.constructor){case Date:return new Date(E.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return E}for(const S in E)!E.hasOwnProperty(S)||!xe(S)||(C[S]=he(C[S],E[S]));return C}function xe(C){return"__proto__"!==C}function Ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const tt=()=>{try{return Ve().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const E=C&&z(C[1]);return E&&JSON.parse(E)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},qt=C=>{var E,S;return null===(S=null===(E=tt())||void 0===E?void 0:E.emulatorHosts)||void 0===S?void 0:S[C]},At=()=>{var C;return null===(C=tt())||void 0===C?void 0:C.config},St=C=>{var E;return null===(E=tt())||void 0===E?void 0:E[`_${C}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((E,S)=>{this.resolve=E,this.reject=S})}wrapCallback(E){return(S,F)=>{S?this.reject(S):this.resolve(F),"function"==typeof E&&(this.promise.catch(()=>{}),1===E.length?E(S):E(S,F))}}}function _t(C,E){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=E||"demo-project",j=C.iat||0,ye=C.sub||C.user_id;if(!ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:j,exp:j+3600,auth_time:j,sub:ye,user_id:ye,firebase:{sign_in_provider:"custom",identities:{}}},C);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(Fe)),""].join(".")}function wt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function ie(){var C;const E=null===(C=tt())||void 0===C?void 0:C.forceEnvironment;if("node"===E)return!0;if("browser"===E)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return typeof window<"u"||bt()}function bt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ht(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Sn(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function xn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Dn(){const C=wt();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function fr(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function Wr(){return!ie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){try{return"object"==typeof indexedDB}catch{return!1}}function be(){return new Promise((C,E)=>{try{let S=!0;const F="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(F);j.onsuccess=()=>{j.result.close(),S||self.indexedDB.deleteDatabase(F),C(!0)},j.onupgradeneeded=()=>{S=!1},j.onerror=()=>{var ye;E((null===(ye=j.error)||void 0===ye?void 0:ye.message)||"")}}catch(S){E(S)}})}function se(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ve extends Error{constructor(E,S,F){super(S),this.code=E,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_e.prototype.create)}}class _e{constructor(E,S,F){this.service=E,this.serviceName=S,this.errors=F}create(E,...S){const F=S[0]||{},j=`${this.service}/${E}`,ye=this.errors[E],Fe=ye?function lt(C,E){return C.replace(Pt,(S,F)=>{const j=E[F];return null!=j?String(j):`<${F}?>`})}(ye,F):"Error";return new ve(j,`${this.serviceName}: ${Fe} (${j}).`,F)}}const Pt=/\{\$([^}]+)}/g;function Mn(C){return JSON.parse(C)}function Ct(C){return JSON.stringify(C)}const Tn=function(C){let E={},S={},F={},j="";try{const ye=C.split(".");E=Mn(z(ye[0])||""),S=Mn(z(ye[1])||""),j=ye[2],F=S.d||{},delete S.d}catch{}return{header:E,claims:S,data:F,signature:j}},tn=function(C){const S=Tn(C).claims;return!!S&&"object"==typeof S&&S.hasOwnProperty("iat")},nn=function(C){const E=Tn(C).claims;return"object"==typeof E&&!0===E.admin};function Dt(C,E){return Object.prototype.hasOwnProperty.call(C,E)}function ei(C,E){if(Object.prototype.hasOwnProperty.call(C,E))return C[E]}function Ci(C){for(const E in C)if(Object.prototype.hasOwnProperty.call(C,E))return!1;return!0}function Nr(C,E,S){const F={};for(const j in C)Object.prototype.hasOwnProperty.call(C,j)&&(F[j]=E.call(S,C[j],j,C));return F}function ti(C,E){if(C===E)return!0;const S=Object.keys(C),F=Object.keys(E);for(const j of S){if(!F.includes(j))return!1;const ye=C[j],Fe=E[j];if(fo(ye)&&fo(Fe)){if(!ti(ye,Fe))return!1}else if(ye!==Fe)return!1}for(const j of F)if(!S.includes(j))return!1;return!0}function fo(C){return null!==C&&"object"==typeof C}function vs(C){const E=[];for(const[S,F]of Object.entries(C))Array.isArray(F)?F.forEach(j=>{E.push(encodeURIComponent(S)+"="+encodeURIComponent(j))}):E.push(encodeURIComponent(S)+"="+encodeURIComponent(F));return E.length?"&"+E.join("&"):""}function Ws(C){const E={};return C.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[j,ye]=F.split("=");E[decodeURIComponent(j)]=decodeURIComponent(ye)}}),E}function po(C){const E=C.indexOf("?");if(!E)return"";const S=C.indexOf("#",E);return C.substring(E,S>0?S:void 0)}class ha{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let E=1;E<this.blockSize;++E)this.pad_[E]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(E,S){S||(S=0);const F=this.W_;if("string"==typeof E)for(let K=0;K<16;K++)F[K]=E.charCodeAt(S)<<24|E.charCodeAt(S+1)<<16|E.charCodeAt(S+2)<<8|E.charCodeAt(S+3),S+=4;else for(let K=0;K<16;K++)F[K]=E[S]<<24|E[S+1]<<16|E[S+2]<<8|E[S+3],S+=4;for(let K=16;K<80;K++){const Xn=F[K-3]^F[K-8]^F[K-14]^F[K-16];F[K]=4294967295&(Xn<<1|Xn>>>31)}let bn,wr,j=this.chain_[0],ye=this.chain_[1],Fe=this.chain_[2],gt=this.chain_[3],Be=this.chain_[4];for(let K=0;K<80;K++){K<40?K<20?(bn=gt^ye&(Fe^gt),wr=1518500249):(bn=ye^Fe^gt,wr=1859775393):K<60?(bn=ye&Fe|gt&(ye|Fe),wr=2400959708):(bn=ye^Fe^gt,wr=3395469782);const Xn=(j<<5|j>>>27)+bn+Be+wr+F[K]&4294967295;Be=gt,gt=Fe,Fe=4294967295&(ye<<30|ye>>>2),ye=j,j=Xn}this.chain_[0]=this.chain_[0]+j&4294967295,this.chain_[1]=this.chain_[1]+ye&4294967295,this.chain_[2]=this.chain_[2]+Fe&4294967295,this.chain_[3]=this.chain_[3]+gt&4294967295,this.chain_[4]=this.chain_[4]+Be&4294967295}update(E,S){if(null==E)return;void 0===S&&(S=E.length);const F=S-this.blockSize;let j=0;const ye=this.buf_;let Fe=this.inbuf_;for(;j<S;){if(0===Fe)for(;j<=F;)this.compress_(E,j),j+=this.blockSize;if("string"==typeof E){for(;j<S;)if(ye[Fe]=E.charCodeAt(j),++Fe,++j,Fe===this.blockSize){this.compress_(ye),Fe=0;break}}else for(;j<S;)if(ye[Fe]=E[j],++Fe,++j,Fe===this.blockSize){this.compress_(ye),Fe=0;break}}this.inbuf_=Fe,this.total_+=S}digest(){const E=[];let S=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let j=this.blockSize-1;j>=56;j--)this.buf_[j]=255&S,S/=256;this.compress_(this.buf_);let F=0;for(let j=0;j<5;j++)for(let ye=24;ye>=0;ye-=8)E[F]=this.chain_[j]>>ye&255,++F;return E}}function Gs(C,E){const S=new hi(C,E);return S.subscribe.bind(S)}class hi{constructor(E,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{E(this)}).catch(F=>{this.error(F)})}next(E){this.forEachObserver(S=>{S.next(E)})}error(E){this.forEachObserver(S=>{S.error(E)}),this.close(E)}complete(){this.forEachObserver(E=>{E.complete()}),this.close()}subscribe(E,S,F){let j;if(void 0===E&&void 0===S&&void 0===F)throw new Error("Missing Observer.");j=function qs(C,E){if("object"!=typeof C||null===C)return!1;for(const S of E)if(S in C&&"function"==typeof C[S])return!0;return!1}(E,["next","error","complete"])?E:{next:E,error:S,complete:F},void 0===j.next&&(j.next=ls),void 0===j.error&&(j.error=ls),void 0===j.complete&&(j.complete=ls);const ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?j.error(this.finalError):j.complete()}catch{}}),this.observers.push(j),ye}unsubscribeOne(E){void 0===this.observers||void 0===this.observers[E]||(delete this.observers[E],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(E){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,E)}sendOne(E,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[E])try{S(this.observers[E])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(E){this.finalized||(this.finalized=!0,void 0!==E&&(this.finalError=E),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ls(){}const Bo=function(C,E,S,F){let j;if(F<E?j="at least "+E:F>S&&(j=0===S?"none":"no more than "+S),j)throw new Error(C+" failed: Was called with "+F+(1===F?" argument.":" arguments.")+" Expects "+j+".")};function bs(C,E){return`${C} failed: ${E} argument `}function Wi(C,E,S,F){if((!F||S)&&"function"!=typeof S)throw new Error(bs(C,E)+"must be a valid function.")}function Es(C,E,S,F){if((!F||S)&&("object"!=typeof S||null===S))throw new Error(bs(C,E)+"must be a valid context object.")}const yl=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);if(j>=55296&&j<=56319){const ye=j-55296;F++,Z(F<C.length,"Surrogate pair missing trail surrogate."),j=65536+(ye<<10)+(C.charCodeAt(F)-56320)}j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):j<65536?(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},fi=function(C){let E=0;for(let S=0;S<C.length;S++){const F=C.charCodeAt(S);F<128?E++:F<2048?E+=2:F>=55296&&F<=56319?(E+=4,S++):E+=3}return E},mo=1e3,Pi=2,Va=144e5,pa=.5;function Ut(C,E=mo,S=Pi){const F=E*Math.pow(S,C),j=Math.round(pa*F*(Math.random()-.5)*2);return Math.min(Va,F+j)}function Se(C){return C&&C._delegate?C._delegate:C}},2222:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=te(G(7029)),Z=te(G(3100)),x=te(G(5705)),me=te(G(942)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$,he){var xe=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,Ve=(0,D.default)(z),nt=(0,Z.default)(z),Ze=$/xe,et=(0,x.default)(he),tt=(0,x.default)(Ve),qt=(0,x.default)(nt),Jt=Math.asin(Math.sin(tt)*Math.cos(Ze)+Math.cos(tt)*Math.sin(Ze)*Math.cos(et)),At=qt+Math.atan2(Math.sin(et)*Math.sin(Ze)*Math.cos(tt),Math.cos(Ze)-Math.sin(tt)*Math.sin(Jt)),St=(0,me.default)(At);return(St<ce.MINLON||St>ce.MAXLON)&&(At=(At+3*Math.PI)%(2*Math.PI)-Math.PI,St=(0,me.default)(At)),{latitude:(0,me.default)(Jt),longitude:St}}},7636:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.areaConversion=U.timeConversion=U.distanceConversion=U.altitudeKeys=U.latitudeKeys=U.longitudeKeys=U.MAXLON=U.MINLON=U.MAXLAT=U.MINLAT=U.earthRadius=U.sexagesimalPattern=void 0,U.sexagesimalPattern=/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['\u2032]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["\u2033]\s*)?([NEOSW]?)$/,U.earthRadius=6378137,U.MINLAT=-90,U.MAXLAT=90,U.MINLON=-180,U.MAXLON=180,U.longitudeKeys=["lng","lon","longitude",0],U.latitudeKeys=["lat","latitude",1],U.altitudeKeys=["alt","altitude","elevation","elev",2],U.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},U.timeConversion={m:60,h:3600,d:86400};var $={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};U.areaConversion=$,$.sqm=$.m2,$.sqkm=$.km2,$.sqft=$.ft2,$.sqyd=$.yd2,$.sqin=$.in2},179:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){var Ae=D.areaConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(Ae)return ce*Ae;throw new Error("Invalid unit used for area conversion.")}},917:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){var Ae=D.distanceConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(Ae)return ce*Ae;throw new Error("Invalid unit used for distance conversion.")}},1167:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh"){case"kmh":return ce*D.timeConversion.h*D.distanceConversion.km;case"mph":return ce*D.timeConversion.h*D.distanceConversion.mi;default:return ce}}},8948:(vt,U)=>{function G(X,z){return function ce(X){if(Array.isArray(X))return X}(X)||function me(X,z){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(X)){var $=[],he=!0,xe=!1,Ve=void 0;try{for(var Ze,nt=X[Symbol.iterator]();!(he=(Ze=nt.next()).done)&&($.push(Ze.value),!z||$.length!==z);he=!0);}catch(et){xe=!0,Ve=et}finally{try{!he&&null!=nt.return&&nt.return()}finally{if(xe)throw Ve}}return $}}(X,z)||function Z(X,z){if(X){if("string"==typeof X)return x(X,z);var $=Object.prototype.toString.call(X).slice(8,-1);if("Object"===$&&X.constructor&&($=X.constructor.name),"Map"===$||"Set"===$)return Array.from(X);if("Arguments"===$||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return x(X,z)}}(X,z)||function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(X,z){(null==z||z>X.length)&&(z=X.length);for(var $=0,he=new Array(z);$<z;$++)he[$]=X[$];return he}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(z){var he=G(z.toString().split("."),2),Ve=he[1],nt=Math.abs(Number(he[0])),Ze=60*+("0."+(Ve||0)),et=Ze.toString().split("."),tt=Math.floor(Ze),qt=function(z){var he=Math.pow(10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:4);return Math.round(z*he)/he}(60*+("0."+(et[1]||0))).toString(),At=G(qt.split("."),2),St=At[0],Lt=At[1],_t=void 0===Lt?"0":Lt;return nt+"\xb0 "+tt.toString().padStart(2,"0")+"' "+St.padStart(2,"0")+"."+_t.padEnd(1,"0")+'"'}},1118:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(2447));U.default=function(te,Ae){return(0,D.default)(te,Ae)[0]}},1691:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(5705)),Z=ce(G(7029)),x=ce(G(3100)),me=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){var z=0;if(X.length>2){for(var $,he,xe,Ve=0;Ve<X.length;Ve++){Ve===X.length-2?($=X.length-2,he=X.length-1,xe=0):Ve===X.length-1?($=X.length-1,he=0,xe=1):($=Ve,he=Ve+1,xe=Ve+2);var nt=(0,x.default)(X[$]),Ze=(0,Z.default)(X[he]),et=(0,x.default)(X[xe]);z+=((0,D.default)(et)-(0,D.default)(nt))*Math.sin((0,D.default)(Ze))}z=z*me.earthRadius*me.earthRadius/2}return Math.abs(z)}},9144:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(7029)),Z=x(G(3100));function x(te){return te&&te.__esModule?te:{default:te}}U.default=function(Ae){if(!1===Array.isArray(Ae)||0===Ae.length)throw new Error("No points were given.");return Ae.reduce(function(ee,X){var z=(0,D.default)(X),$=(0,Z.default)(X);return{maxLat:Math.max(z,ee.maxLat),minLat:Math.min(z,ee.minLat),maxLng:Math.max($,ee.maxLng),minLng:Math.min($,ee.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}},190:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=te(G(7029)),Z=te(G(3100)),x=te(G(5705)),me=te(G(942)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var Lt,_t,he=(0,D.default)(z),xe=(0,Z.default)(z),Ve=(0,x.default)(he),nt=(0,x.default)(xe),Ze=$/ce.earthRadius,et=Ve-Ze,tt=Ve+Ze,qt=(0,x.default)(ce.MAXLAT),Jt=(0,x.default)(ce.MINLAT),At=(0,x.default)(ce.MAXLON),St=(0,x.default)(ce.MINLON);if(et>Jt&&tt<qt){var wt=Math.asin(Math.sin(Ze)/Math.cos(Ve));(Lt=nt-wt)<St&&(Lt+=2*Math.PI),(_t=nt+wt)>At&&(_t-=2*Math.PI)}else et=Math.max(et,Jt),tt=Math.min(tt,qt),Lt=St,_t=At;return[{latitude:(0,me.default)(et),longitude:(0,me.default)(Lt)},{latitude:(0,me.default)(tt),longitude:(0,me.default)(_t)}]}},5524:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(7029)),Z=ce(G(3100)),x=ce(G(5705)),me=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){if(!1===Array.isArray(X)||0===X.length)return!1;var z=X.length,$=X.reduce(function(nt,Ze){var et=(0,x.default)((0,D.default)(Ze)),tt=(0,x.default)((0,Z.default)(Ze));return{X:nt.X+Math.cos(et)*Math.cos(tt),Y:nt.Y+Math.cos(et)*Math.sin(tt),Z:nt.Z+Math.sin(et)}},{X:0,Y:0,Z:0}),he=$.X/z,xe=$.Y/z,Ve=$.Z/z;return{longitude:(0,me.default)(Math.atan2(xe,he)),latitude:(0,me.default)(Math.atan2(Ve,Math.sqrt(he*he+xe*xe)))}}},7088:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(9144));U.default=function(te){var Ae=(0,D.default)(te),X=Ae.minLng+(Ae.maxLng-Ae.minLng)/2;return{latitude:parseFloat((Ae.minLat+(Ae.maxLat-Ae.minLat)/2).toFixed(6)),longitude:parseFloat(X.toFixed(6))}}},9952:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(939));U.default=function(te,Ae){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default,X="function"==typeof ee?ee(te,Ae):(0,D.default)(te,Ae);if(isNaN(X))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(X/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}},8744:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x,me){return me.reduce(function(ce,te){if(typeof x>"u"||null===x)throw new Error("'".concat(x,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(x,te)&&typeof te<"u"&&typeof ce>"u"?(ce=te,te):ce},void 0)}},4695:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=function x(X){return X&&X.__esModule?X:{default:X}}(G(8744));function me(X,z){var $=Object.keys(X);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(X);z&&(he=he.filter(function(xe){return Object.getOwnPropertyDescriptor(X,xe).enumerable})),$.push.apply($,he)}return $}function te(X,z,$){return z in X?Object.defineProperty(X,z,{value:$,enumerable:!0,configurable:!0,writable:!0}):X[z]=$,X}U.default=function(z){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:D.longitudeKeys,latitude:D.latitudeKeys,altitude:D.altitudeKeys},he=(0,Z.default)(z,$.longitude),xe=(0,Z.default)(z,$.latitude),Ve=(0,Z.default)(z,$.altitude);return function ce(X){for(var z=1;z<arguments.length;z++){var $=null!=arguments[z]?arguments[z]:{};z%2?me(Object($),!0).forEach(function(he){te(X,he,$[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors($)):me(Object($)).forEach(function(he){Object.defineProperty(X,he,Object.getOwnPropertyDescriptor($,he))})}return X}({latitude:xe,longitude:he},Ve?{altitude:Ve}:{})}},8674:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=te(G(7029)),Z=te(G(3100)),x=te(G(5705)),me=te(G(6522)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var he=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;he=typeof he<"u"&&!isNaN(he)?he:1;var xe=(0,D.default)(z),Ve=(0,Z.default)(z),nt=(0,D.default)($),Ze=(0,Z.default)($),et=Math.acos((0,me.default)(Math.sin((0,x.default)(nt))*Math.sin((0,x.default)(xe))+Math.cos((0,x.default)(nt))*Math.cos((0,x.default)(xe))*Math.cos((0,x.default)(Ve)-(0,x.default)(Ze))))*ce.earthRadius;return Math.round(et/he)*he}},7504:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(8674)),Z=x(G(6522));function x(te){return te&&te.__esModule?te:{default:te}}U.default=function(Ae,ee,X){var z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,$=(0,D.default)(ee,Ae,z),he=(0,D.default)(Ae,X,z),xe=(0,D.default)(ee,X,z),Ve=Math.acos((0,Z.default)(($*$+xe*xe-he*he)/(2*$*xe))),nt=Math.acos((0,Z.default)((he*he+xe*xe-$*$)/(2*he*xe)));return Ve>Math.PI/2?$:nt>Math.PI/2?he:Math.sin(Ve)*$}},884:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(7029)),Z=ce(G(3100)),x=ce(G(5705)),me=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,D.default)(z),he=(0,Z.default)(z),xe=(0,D.default)(X),Ve=(0,Z.default)(X);return((0,me.default)(Math.atan2(Math.sin((0,x.default)(he)-(0,x.default)(Ve))*Math.cos((0,x.default)($)),Math.cos((0,x.default)(xe))*Math.sin((0,x.default)($))-Math.sin((0,x.default)(xe))*Math.cos((0,x.default)($))*Math.cos((0,x.default)(he)-(0,x.default)(Ve))))+360)%360}},7029:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=me(G(8744)),x=me(G(5101));function me(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}U.default=function(ee,X){var z=(0,Z.default)(ee,D.latitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,x.default)($)}}},3100:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636),Z=me(G(8744)),x=me(G(5101));function me(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}U.default=function(ee,X){var z=(0,Z.default)(ee,D.longitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,x.default)($)}}},5378:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(te){return te&&te.__esModule?te:{default:te}}(G(8674));function x(te){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(te)}U.default=function(Ae){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.default;return Ae.reduce(function(X,z){return"object"===x(X)&&null!==X.last&&(X.distance+=ee(z,X.last)),X.last=z,X},{last:null,distance:0}).distance}},2671:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(7029)),Z=ce(G(3100)),x=ce(G(5705)),me=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;$=typeof $<"u"&&!isNaN($)?$:1;var qt,Jt,At,St,Lt,_t,xn,he=(0,D.default)(X),xe=(0,Z.default)(X),Ve=(0,D.default)(z),nt=(0,Z.default)(z),Ze=6356752.314245,et=1/298.257223563,tt=(0,x.default)(nt-xe),wt=Math.atan((1-et)*Math.tan((0,x.default)(parseFloat(he)))),Ue=Math.atan((1-et)*Math.tan((0,x.default)(parseFloat(Ve)))),ie=Math.sin(wt),it=Math.cos(wt),bt=Math.sin(Ue),Ht=Math.cos(Ue),Sn=tt,Ir=100;do{var Dn=Math.sin(Sn),ir=Math.cos(Sn);if(0===(_t=Math.sqrt(Ht*Dn*(Ht*Dn)+(it*bt-ie*Ht*ir)*(it*bt-ie*Ht*ir))))return 0;qt=ie*bt+it*Ht*ir,Jt=Math.atan2(_t,qt),Lt=qt-2*ie*bt/(St=1-(At=it*Ht*Dn/_t)*At),isNaN(Lt)&&(Lt=0);var fr=et/16*St*(4+et*(4-3*St));xn=Sn,Sn=tt+(1-fr)*et*At*(Jt+fr*_t*(Lt+fr*qt*(2*Lt*Lt-1)))}while(Math.abs(Sn-xn)>1e-12&&--Ir>0);if(0===Ir)return NaN;var Wr=St*(me.earthRadius*me.earthRadius-Ze*Ze)/(Ze*Ze),be=Wr/1024*(256+Wr*(Wr*(74-47*Wr)-128));return Math.round(Ze*(1+Wr/16384*(4096+Wr*(Wr*(320-175*Wr)-768)))*(Jt-be*_t*(Lt+be/4*(qt*(2*Lt*Lt-1)-be/6*Lt*(4*_t*_t-3)*(4*Lt*Lt-3))))/$)*$}},939:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(7029)),Z=ce(G(3100)),x=ce(G(5705)),me=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,x.default)((0,Z.default)(z))-(0,x.default)((0,Z.default)(X)),he=Math.log(Math.tan((0,x.default)((0,D.default)(z))/2+Math.PI/4)/Math.tan((0,x.default)((0,D.default)(X))/2+Math.PI/4));return Math.abs($)>Math.PI&&($=$>0?-1*(2*Math.PI-$):2*Math.PI+$),((0,me.default)(Math.atan2($,he))+360)%360}},2845:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return/^(NNE|NE|NNW|N)$/.test(x)?"N":/^(ENE|E|ESE|SE)$/.test(x)?"E":/^(SSE|S|SSW|SW)$/.test(x)?"S":/^(WSW|W|WNW|NW)$/.test(x)?"W":void 0}},8950:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,Ae){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default)(te,Ae)/(Number(Ae.time)-Number(te.time))*1e3}},2541:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0});var D={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(U,"computeDestinationPoint",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(U,"convertArea",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(U,"convertDistance",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(U,"convertSpeed",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(U,"decimalToSexagesimal",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(U,"findNearest",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(U,"getAreaOfPolygon",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(U,"getBounds",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(U,"getBoundsOfDistance",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(U,"getCenter",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(U,"getCenterOfBounds",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(U,"getCompassDirection",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(U,"getCoordinateKey",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(U,"getCoordinateKeys",{enumerable:!0,get:function(){return nt.default}}),Object.defineProperty(U,"getDistance",{enumerable:!0,get:function(){return Ze.default}}),Object.defineProperty(U,"getDistanceFromLine",{enumerable:!0,get:function(){return et.default}}),Object.defineProperty(U,"getGreatCircleBearing",{enumerable:!0,get:function(){return tt.default}}),Object.defineProperty(U,"getLatitude",{enumerable:!0,get:function(){return qt.default}}),Object.defineProperty(U,"getLongitude",{enumerable:!0,get:function(){return Jt.default}}),Object.defineProperty(U,"getPathLength",{enumerable:!0,get:function(){return At.default}}),Object.defineProperty(U,"getPreciseDistance",{enumerable:!0,get:function(){return St.default}}),Object.defineProperty(U,"getRhumbLineBearing",{enumerable:!0,get:function(){return Lt.default}}),Object.defineProperty(U,"getRoughCompassDirection",{enumerable:!0,get:function(){return _t.default}}),Object.defineProperty(U,"getSpeed",{enumerable:!0,get:function(){return wt.default}}),Object.defineProperty(U,"isDecimal",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(U,"isPointInLine",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(U,"isPointInPolygon",{enumerable:!0,get:function(){return it.default}}),Object.defineProperty(U,"isPointNearLine",{enumerable:!0,get:function(){return bt.default}}),Object.defineProperty(U,"isPointWithinRadius",{enumerable:!0,get:function(){return Ht.default}}),Object.defineProperty(U,"isSexagesimal",{enumerable:!0,get:function(){return Sn.default}}),Object.defineProperty(U,"isValidCoordinate",{enumerable:!0,get:function(){return xn.default}}),Object.defineProperty(U,"isValidLatitude",{enumerable:!0,get:function(){return Ir.default}}),Object.defineProperty(U,"isValidLongitude",{enumerable:!0,get:function(){return Dn.default}}),Object.defineProperty(U,"orderByDistance",{enumerable:!0,get:function(){return ir.default}}),Object.defineProperty(U,"sexagesimalToDecimal",{enumerable:!0,get:function(){return fr.default}}),Object.defineProperty(U,"toDecimal",{enumerable:!0,get:function(){return Wr.default}}),Object.defineProperty(U,"toRad",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(U,"toDeg",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(U,"wktToPolygon",{enumerable:!0,get:function(){return se.default}});var Z=ve(G(2222)),x=ve(G(179)),me=ve(G(917)),ce=ve(G(1167)),te=ve(G(8948)),Ae=ve(G(1118)),ee=ve(G(1691)),X=ve(G(9144)),z=ve(G(190)),$=ve(G(5524)),he=ve(G(7088)),xe=ve(G(9952)),Ve=ve(G(8744)),nt=ve(G(4695)),Ze=ve(G(8674)),et=ve(G(7504)),tt=ve(G(884)),qt=ve(G(7029)),Jt=ve(G(3100)),At=ve(G(5378)),St=ve(G(2671)),Lt=ve(G(939)),_t=ve(G(2845)),wt=ve(G(8950)),Ue=ve(G(3026)),ie=ve(G(4194)),it=ve(G(3536)),bt=ve(G(2787)),Ht=ve(G(202)),Sn=ve(G(4902)),xn=ve(G(7637)),Ir=ve(G(6563)),Dn=ve(G(266)),ir=ve(G(2447)),fr=ve(G(1532)),Wr=ve(G(5101)),fe=ve(G(5705)),be=ve(G(942)),se=ve(G(354)),ae=G(7636);function ve(_e){return _e&&_e.__esModule?_e:{default:_e}}Object.keys(ae).forEach(function(_e){"default"===_e||"__esModule"===_e||Object.prototype.hasOwnProperty.call(D,_e)||Object.defineProperty(U,_e,{enumerable:!0,get:function(){return ae[_e]}})})},3026:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){var me=x.toString().trim();return!isNaN(parseFloat(me))&&parseFloat(me)===Number(me)}},4194:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,Ae,ee){return(0,D.default)(Ae,te)+(0,D.default)(te,ee)===(0,D.default)(Ae,ee)}},3536:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=x(G(7029)),Z=x(G(3100));function x(te){return te&&te.__esModule?te:{default:te}}U.default=function(Ae,ee){for(var X=!1,z=ee.length,$=-1,he=z-1;++$<z;he=$)((0,Z.default)(ee[$])<=(0,Z.default)(Ae)&&(0,Z.default)(Ae)<(0,Z.default)(ee[he])||(0,Z.default)(ee[he])<=(0,Z.default)(Ae)&&(0,Z.default)(Ae)<(0,Z.default)(ee[$]))&&(0,D.default)(Ae)<((0,D.default)(ee[he])-(0,D.default)(ee[$]))*((0,Z.default)(Ae)-(0,Z.default)(ee[$]))/((0,Z.default)(ee[he])-(0,Z.default)(ee[$]))+(0,D.default)(ee[$])&&(X=!X);return X}},2787:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(7504));U.default=function(te,Ae,ee,X){return(0,D.default)(te,Ae,ee)<X}},202:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,Ae,ee){return(0,D.default)(te,Ae,.01)<ee}},4902:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){return D.sexagesimalPattern.test(ce.toString().trim())}},7637:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=me(G(4695)),Z=me(G(6563)),x=me(G(266));function me(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}U.default=function(ee){var X=(0,D.default)(ee),z=X.latitude,$=X.longitude;if(Array.isArray(ee)&&ee.length>=2)return(0,x.default)(ee[0])&&(0,Z.default)(ee[1]);if(typeof z>"u"||typeof $>"u")return!1;var he=ee[$],xe=ee[z];return!(typeof xe>"u"||typeof he>"u"||!1===(0,Z.default)(xe)||!1===(0,x.default)(he))}},6563:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(3026)),Z=ce(G(4902)),x=ce(G(1532)),me=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,D.default)(X)?!(parseFloat(X)>me.MAXLAT||X<me.MINLAT):!!(0,Z.default)(X)&&ee((0,x.default)(X))}},266:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=ce(G(3026)),Z=ce(G(4902)),x=ce(G(1532)),me=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,D.default)(X)?!(parseFloat(X)>me.MAXLON||X<me.MINLON):!!(0,Z.default)(X)&&ee((0,x.default)(X))}},2447:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,Ae){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.default;return ee="function"==typeof ee?ee:D.default,Ae.slice().sort(function(X,z){return ee(te,X)-ee(te,z)})}},6522:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return x>1?1:x<-1?-1:x}},1532:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=G(7636);U.default=function(ce){var te=new RegExp(D.sexagesimalPattern).exec(ce.toString().trim());if(typeof te>"u"||null===te)throw new Error("Given value is not in sexagesimal format");var Ae=Number(te[2])/60||0,ee=Number(te[4])/3600||0,X=parseFloat(te[1])+Ae+ee;return["S","W"].includes(te[7])?-X:X}},5101:(vt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var D=te(G(3026)),Z=te(G(4902)),x=te(G(1532)),me=te(G(7637)),ce=te(G(4695));function te(he){return he&&he.__esModule?he:{default:he}}function Ae(he,xe){var Ve=Object.keys(he);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(he);xe&&(nt=nt.filter(function(Ze){return Object.getOwnPropertyDescriptor(he,Ze).enumerable})),Ve.push.apply(Ve,nt)}return Ve}function ee(he){for(var xe=1;xe<arguments.length;xe++){var Ve=null!=arguments[xe]?arguments[xe]:{};xe%2?Ae(Object(Ve),!0).forEach(function(nt){X(he,nt,Ve[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(he,Object.getOwnPropertyDescriptors(Ve)):Ae(Object(Ve)).forEach(function(nt){Object.defineProperty(he,nt,Object.getOwnPropertyDescriptor(Ve,nt))})}return he}function X(he,xe,Ve){return xe in he?Object.defineProperty(he,xe,{value:Ve,enumerable:!0,configurable:!0,writable:!0}):he[xe]=Ve,he}U.default=function he(xe){if((0,D.default)(xe))return Number(xe);if((0,Z.default)(xe))return(0,x.default)(xe);if((0,me.default)(xe)){var Ve=(0,ce.default)(xe);return Array.isArray(xe)?xe.map(function(nt,Ze){return[0,1].includes(Ze)?he(nt):nt}):ee(ee(ee({},xe),Ve.latitude&&X({},Ve.latitude,he(xe[Ve.latitude]))),Ve.longitude&&X({},Ve.longitude,he(xe[Ve.longitude])))}return Array.isArray(xe)?xe.map(function(nt){return(0,me.default)(nt)?he(nt):nt}):xe}},942:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return 180*x/Math.PI}},5705:(vt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(x){return x*Math.PI/180}},354:(vt,U)=>{function x(ee,X){(null==X||X>ee.length)&&(X=ee.length);for(var z=0,$=new Array(X);z<X;z++)$[z]=ee[z];return $}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(X){if(!X.startsWith("POLYGON"))throw new Error("Invalid wkt.");return X.slice(X.indexOf("(")+2,X.indexOf(")")).split(", ").map(function(he){var Ve=function G(ee,X){return function ce(ee){if(Array.isArray(ee))return ee}(ee)||function me(ee,X){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(ee)){var z=[],$=!0,he=!1,xe=void 0;try{for(var nt,Ve=ee[Symbol.iterator]();!($=(nt=Ve.next()).done)&&(z.push(nt.value),!X||z.length!==X);$=!0);}catch(Ze){he=!0,xe=Ze}finally{try{!$&&null!=Ve.return&&Ve.return()}finally{if(he)throw xe}}return z}}(ee,X)||function Z(ee,X){if(ee){if("string"==typeof ee)return x(ee,X);var z=Object.prototype.toString.call(ee).slice(8,-1);if("Object"===z&&ee.constructor&&(z=ee.constructor.name),"Map"===z||"Set"===z)return Array.from(ee);if("Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return x(ee,X)}}(ee,X)||function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(he.split(" "),2),Ze=Ve[1];return{longitude:parseFloat(Ve[0]),latitude:parseFloat(Ze)}})}},9574:(vt,U,G)=>{G.d(U,{A:()=>nt});var D=G(1401),Z=G(8779),x=G(1631),me=G(5398);class ce{constructor(et,tt){this._delegate=et,this.firebase=tt,(0,x._addComponent)(et,new Z.uA("app-compat",()=>this,"PUBLIC")),this.container=et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this._delegate.automaticDataCollectionEnabled=et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(et=>{this._delegate.checkDestroyed(),et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(et,tt=x._DEFAULT_ENTRY_NAME){var qt;this._delegate.checkDestroyed();const Jt=this._delegate.container.getProvider(et);return!Jt.isInitialized()&&"EXPLICIT"===(null===(qt=Jt.getComponent())||void 0===qt?void 0:qt.instantiationMode)&&Jt.initialize(),Jt.getImmediate({identifier:tt})}_removeServiceInstance(et,tt=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(et).clearInstance(tt)}_addComponent(et){(0,x._addComponent)(this._delegate,et)}_addOrOverwriteComponent(et){(0,x._addOrOverwriteComponent)(this._delegate,et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new D.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function X(){const Ze=function ee(Ze){const et={},tt={__esModule:!0,initializeApp:function At(wt,Ue={}){const ie=x.initializeApp(wt,Ue);if((0,D.gR)(et,ie.name))return et[ie.name];const it=new Ze(ie,tt);return et[ie.name]=it,it},app:Jt,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function Lt(wt){const Ue=wt.name,ie=Ue.replace("-compat","");if(x._registerComponent(wt)&&"PUBLIC"===wt.type){const it=(bt=Jt())=>{if("function"!=typeof bt[ie])throw Ae.create("invalid-app-argument",{appName:Ue});return bt[ie]()};void 0!==wt.serviceProps&&(0,D.zw)(it,wt.serviceProps),tt[ie]=it,Ze.prototype[ie]=function(...bt){return this._getService.bind(this,Ue).apply(this,wt.multipleInstances?bt:[])}}return"PUBLIC"===wt.type?tt[ie]:null},removeApp:function qt(wt){delete et[wt]},useAsService:function _t(wt,Ue){return"serverAuth"===Ue?null:Ue},modularAPIs:x}};function Jt(wt){if(!(0,D.gR)(et,wt=wt||x._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:wt});return et[wt]}return tt.default=tt,Object.defineProperty(tt,"apps",{get:function St(){return Object.keys(et).map(wt=>et[wt])}}),Jt.App=Ze,tt}(ce);return Ze.INTERNAL=Object.assign(Object.assign({},Ze.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function et(tt){(0,D.zw)(Ze,tt)},createSubscribe:D.tD,ErrorFactory:D.FA,deepExtend:D.zw}),Ze}(),$=new me.Vy("@firebase/app-compat");try{const Ze=(0,D.mS)();if(void 0!==Ze.firebase){$.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const et=Ze.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&$.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const nt=z;!function Ve(Ze){(0,x.registerVersion)("@firebase/app-compat","0.2.43",Ze)}()},1631:(vt,U,G)=>{G.r(U),G.d(U,{FirebaseError:()=>me.g,SDK_VERSION:()=>Ci,_DEFAULT_ENTRY_NAME:()=>fe,_addComponent:()=>_e,_addOrOverwriteComponent:()=>lt,_apps:()=>se,_clearComponents:()=>Jr,_components:()=>ve,_getProvider:()=>Mn,_isFirebaseApp:()=>Tn,_isFirebaseServerApp:()=>mt,_registerComponent:()=>Pt,_removeServiceInstance:()=>Ct,_serverApps:()=>ae,deleteApp:()=>vs,getApp:()=>fo,getApps:()=>La,initializeApp:()=>Nr,initializeServerApp:()=>ti,onLog:()=>ha,registerVersion:()=>po,setLogLevel:()=>Gs});var D=G(467),Z=G(8779),x=G(5398),me=G(1401),ce=G(6749);class te{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(C=>{if(function Ae(qe){const Se=qe.getComponent();return"VERSION"===Se?.type}(C)){const E=C.getImmediate();return`${E.library}/${E.version}`}return null}).filter(C=>C).join(" ")}}const ee="@firebase/app",X="0.10.13",z=new x.Vy("@firebase/app"),$="@firebase/app-compat",he="@firebase/analytics-compat",xe="@firebase/analytics",Ve="@firebase/app-check-compat",nt="@firebase/app-check",Ze="@firebase/auth",et="@firebase/auth-compat",tt="@firebase/database",qt="@firebase/data-connect",Jt="@firebase/database-compat",At="@firebase/functions",St="@firebase/functions-compat",Lt="@firebase/installations",_t="@firebase/installations-compat",wt="@firebase/messaging",Ue="@firebase/messaging-compat",ie="@firebase/performance",it="@firebase/performance-compat",bt="@firebase/remote-config",Ht="@firebase/remote-config-compat",Sn="@firebase/storage",xn="@firebase/storage-compat",Ir="@firebase/firestore",Dn="@firebase/vertexai-preview",ir="@firebase/firestore-compat",fr="firebase",fe="[DEFAULT]",be={[ee]:"fire-core",[$]:"fire-core-compat",[xe]:"fire-analytics",[he]:"fire-analytics-compat",[nt]:"fire-app-check",[Ve]:"fire-app-check-compat",[Ze]:"fire-auth",[et]:"fire-auth-compat",[tt]:"fire-rtdb",[qt]:"fire-data-connect",[Jt]:"fire-rtdb-compat",[At]:"fire-fn",[St]:"fire-fn-compat",[Lt]:"fire-iid",[_t]:"fire-iid-compat",[wt]:"fire-fcm",[Ue]:"fire-fcm-compat",[ie]:"fire-perf",[it]:"fire-perf-compat",[bt]:"fire-rc",[Ht]:"fire-rc-compat",[Sn]:"fire-gcs",[xn]:"fire-gcs-compat",[Ir]:"fire-fst",[ir]:"fire-fst-compat",[Dn]:"fire-vertex","fire-js":"fire-js",[fr]:"fire-js-all"},se=new Map,ae=new Map,ve=new Map;function _e(qe,Se){try{qe.container.addComponent(Se)}catch(C){z.debug(`Component ${Se.name} failed to register with FirebaseApp ${qe.name}`,C)}}function lt(qe,Se){qe.container.addOrOverwriteComponent(Se)}function Pt(qe){const Se=qe.name;if(ve.has(Se))return z.debug(`There were multiple attempts to register component ${Se}.`),!1;ve.set(Se,qe);for(const C of se.values())_e(C,qe);for(const C of ae.values())_e(C,qe);return!0}function Mn(qe,Se){const C=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return C&&C.triggerHeartbeat(),qe.container.getProvider(Se)}function Ct(qe,Se,C=fe){Mn(qe,Se).clearInstance(C)}function Tn(qe){return void 0!==qe.options}function mt(qe){return void 0!==qe.settings}function Jr(){ve.clear()}const nn=new me.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Dt{constructor(Se,C,E){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},C),this._name=C.name,this._automaticDataCollectionEnabled=C.automaticDataCollectionEnabled,this._container=E,this.container.addComponent(new Z.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}class ei extends Dt{constructor(Se,C,E,S){const F=void 0!==C.automaticDataCollectionEnabled&&C.automaticDataCollectionEnabled,j={name:E,automaticDataCollectionEnabled:F};super(void 0!==Se.apiKey?Se:Se.options,j,S),this._serverConfig=Object.assign({automaticDataCollectionEnabled:F},C),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,C.releaseOnDeref=void 0,po(ee,X,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Se){this.isDeleted||(this._refCount++,void 0!==Se&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Se,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){vs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nn.create("server-app-deleted")}}const Ci="10.14.1";function Nr(qe,Se={}){let C=qe;"object"!=typeof Se&&(Se={name:Se});const E=Object.assign({name:fe,automaticDataCollectionEnabled:!1},Se),S=E.name;if("string"!=typeof S||!S)throw nn.create("bad-app-name",{appName:String(S)});if(C||(C=(0,me.T9)()),!C)throw nn.create("no-options");const F=se.get(S);if(F){if((0,me.bD)(C,F.options)&&(0,me.bD)(E,F.config))return F;throw nn.create("duplicate-app",{appName:S})}const j=new Z.h1(S);for(const Fe of ve.values())j.addComponent(Fe);const ye=new Dt(C,E,j);return se.set(S,ye),ye}function ti(qe,Se){if((0,me.Bd)()&&!(0,me.p7)())throw nn.create("invalid-server-app-environment");let C;void 0===Se.automaticDataCollectionEnabled&&(Se.automaticDataCollectionEnabled=!1),C=Tn(qe)?qe.options:qe;const E=Object.assign(Object.assign({},Se),C);if(void 0!==E.releaseOnDeref&&delete E.releaseOnDeref,void 0!==Se.releaseOnDeref&&typeof FinalizationRegistry>"u")throw nn.create("finalization-registry-not-supported",{});const F=""+(gt=JSON.stringify(E),[...gt].reduce((Be,bn)=>Math.imul(31,Be)+bn.charCodeAt(0)|0,0)),j=ae.get(F);var gt;if(j)return j.incRefCount(Se.releaseOnDeref),j;const ye=new Z.h1(F);for(const gt of ve.values())ye.addComponent(gt);const Fe=new ei(C,Se,F,ye);return ae.set(F,Fe),Fe}function fo(qe=fe){const Se=se.get(qe);if(!Se&&qe===fe&&(0,me.T9)())return Nr();if(!Se)throw nn.create("no-app",{appName:qe});return Se}function La(){return Array.from(se.values())}function vs(qe){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,D.A)(function*(qe){let Se=!1;const C=qe.name;se.has(C)?(Se=!0,se.delete(C)):ae.has(C)&&qe.decRefCount()<=0&&(ae.delete(C),Se=!0),Se&&(yield Promise.all(qe.container.getProviders().map(E=>E.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function po(qe,Se,C){var E;let S=null!==(E=be[qe])&&void 0!==E?E:qe;C&&(S+=`-${C}`);const F=S.match(/\s|\//),j=Se.match(/\s|\//);if(F||j){const ye=[`Unable to register library "${S}" with version "${Se}":`];return F&&ye.push(`library name "${S}" contains illegal characters (whitespace or "/")`),F&&j&&ye.push("and"),j&&ye.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void z.warn(ye.join(" "))}Pt(new Z.uA(`${S}-version`,()=>({library:S,version:Se}),"VERSION"))}function ha(qe,Se){if(null!==qe&&"function"!=typeof qe)throw nn.create("invalid-log-argument");(0,x.Ey)(qe,Se)}function Gs(qe){(0,x.He)(qe)}const hi="firebase-heartbeat-database",fa=1,qs="firebase-heartbeat-store";let ls=null;function Bo(){return ls||(ls=(0,ce.P2)(hi,fa,{upgrade:(qe,Se)=>{if(0===Se)try{qe.createObjectStore(qs)}catch(C){console.warn(C)}}}).catch(qe=>{throw nn.create("idb-open",{originalErrorMessage:qe.message})})),ls}function Fn(){return(Fn=(0,D.A)(function*(qe){try{const C=(yield Bo()).transaction(qs),E=yield C.objectStore(qs).get(yl(qe));return yield C.done,E}catch(Se){if(Se instanceof me.g)z.warn(Se.message);else{const C=nn.create("idb-get",{originalErrorMessage:Se?.message});z.warn(C.message)}}})).apply(this,arguments)}function Wi(qe,Se){return Es.apply(this,arguments)}function Es(){return(Es=(0,D.A)(function*(qe,Se){try{const E=(yield Bo()).transaction(qs,"readwrite");yield E.objectStore(qs).put(Se,yl(qe)),yield E.done}catch(C){if(C instanceof me.g)z.warn(C.message);else{const E=nn.create("idb-set",{originalErrorMessage:C?.message});z.warn(E.message)}}})).apply(this,arguments)}function yl(qe){return`${qe.name}!${qe.options.appId}`}class mo{constructor(Se){this.container=Se,this._heartbeatsCache=null;const C=this.container.getProvider("app").getImmediate();this._storage=new pa(C),this._heartbeatsCachePromise=this._storage.read().then(E=>(this._heartbeatsCache=E,E))}triggerHeartbeat(){var Se=this;return(0,D.A)(function*(){var C,E;try{const F=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),j=Pi();return null==(null===(C=Se._heartbeatsCache)||void 0===C?void 0:C.heartbeats)&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise,null==(null===(E=Se._heartbeatsCache)||void 0===E?void 0:E.heartbeats))||Se._heartbeatsCache.lastSentHeartbeatDate===j||Se._heartbeatsCache.heartbeats.some(ye=>ye.date===j)?void 0:(Se._heartbeatsCache.heartbeats.push({date:j,agent:F}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(ye=>{const Fe=new Date(ye.date).valueOf();return Date.now()-Fe<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache))}catch(S){z.warn(S)}})()}getHeartbeatsHeader(){var Se=this;return(0,D.A)(function*(){var C;try{if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null==(null===(C=Se._heartbeatsCache)||void 0===C?void 0:C.heartbeats)||0===Se._heartbeatsCache.heartbeats.length)return"";const E=Pi(),{heartbeatsToSend:S,unsentEntries:F}=function Va(qe,Se=1024){const C=[];let E=qe.slice();for(const S of qe){const F=C.find(j=>j.agent===S.agent);if(F){if(F.dates.push(S.date),Ut(C)>Se){F.dates.pop();break}}else if(C.push({agent:S.agent,dates:[S.date]}),Ut(C)>Se){C.pop();break}E=E.slice(1)}return{heartbeatsToSend:C,unsentEntries:E}}(Se._heartbeatsCache.heartbeats),j=(0,me.Uj)(JSON.stringify({version:2,heartbeats:S}));return Se._heartbeatsCache.lastSentHeartbeatDate=E,F.length>0?(Se._heartbeatsCache.heartbeats=F,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),j}catch(E){return z.warn(E),""}})()}}function Pi(){return(new Date).toISOString().substring(0,10)}class pa{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,me.zW)()&&(0,me.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,D.A)(function*(){if(yield Se._canUseIndexedDBPromise){const E=yield function bs(qe){return Fn.apply(this,arguments)}(Se.app);return E?.heartbeats?E:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Se){var C=this;return(0,D.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return Wi(C.app,{lastSentHeartbeatDate:null!==(E=Se.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var C=this;return(0,D.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return Wi(C.app,{lastSentHeartbeatDate:null!==(E=Se.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:[...F.heartbeats,...Se.heartbeats]})}})()}}function Ut(qe){return(0,me.Uj)(JSON.stringify({version:2,heartbeats:qe})).length}!function lc(qe){Pt(new Z.uA("platform-logger",Se=>new te(Se),"PRIVATE")),Pt(new Z.uA("heartbeat",Se=>new mo(Se),"PRIVATE")),po(ee,X,qe),po(ee,X,"esm2017"),po("fire-js","")}("")},8779:(vt,U,G)=>{G.d(U,{Kq:()=>ce,h1:()=>ee,uA:()=>x});var D=G(467),Z=G(1401);class x{constructor(z,$,he){this.name=z,this.instanceFactory=$,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const me="[DEFAULT]";class ce{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const he=new Z.cY;if(this.instancesDeferred.set($,he),this.isInitialized($)||this.shouldAutoInitialize())try{const xe=this.getOrInitializeService({instanceIdentifier:$});xe&&he.resolve(xe)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const he=this.normalizeInstanceIdentifier(z?.identifier),xe=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(Ve){if(xe)return null;throw Ve}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function Ae(X){return"EAGER"===X.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:me})}catch{}for(const[$,he]of this.instancesDeferred.entries()){const xe=this.normalizeInstanceIdentifier($);try{const Ve=this.getOrInitializeService({instanceIdentifier:xe});he.resolve(Ve)}catch{}}}}clearInstance(z=me){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,D.A)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(he=>"INTERNAL"in he).map(he=>he.INTERNAL.delete()),...$.filter(he=>"_delete"in he).map(he=>he._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=me){return this.instances.has(z)}getOptions(z=me){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,he=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(he))throw Error(`${this.name}(${he}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const xe=this.getOrInitializeService({instanceIdentifier:he,options:$});for(const[Ve,nt]of this.instancesDeferred.entries())he===this.normalizeInstanceIdentifier(Ve)&&nt.resolve(xe);return xe}onInit(z,$){var he;const xe=this.normalizeInstanceIdentifier($),Ve=null!==(he=this.onInitCallbacks.get(xe))&&void 0!==he?he:new Set;Ve.add(z),this.onInitCallbacks.set(xe,Ve);const nt=this.instances.get(xe);return nt&&z(nt,xe),()=>{Ve.delete(z)}}invokeOnInitCallbacks(z,$){const he=this.onInitCallbacks.get($);if(he)for(const xe of he)try{xe(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let he=this.instances.get(z);if(!he&&this.component&&(he=this.component.instanceFactory(this.container,{instanceIdentifier:(X=z,X===me?void 0:X),options:$}),this.instances.set(z,he),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(he,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,he)}catch{}var X;return he||null}normalizeInstanceIdentifier(z=me){return this.component?this.component.multipleInstances?z:me:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new ce(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},5398:(vt,U,G)=>{G.d(U,{$b:()=>Z,Ey:()=>X,He:()=>ee,Vy:()=>Ae});const D=[];var Z=function(z){return z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",z}(Z||{});const x={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},me=Z.INFO,ce={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},te=(z,$,...he)=>{if($<z.logLevel)return;const xe=(new Date).toISOString(),Ve=ce[$];if(!Ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ve](`[${xe}]  ${z.name}:`,...he)};class Ae{constructor($){this.name=$,this._logLevel=me,this._logHandler=te,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Z))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?x[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...$),this._logHandler(this,Z.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...$),this._logHandler(this,Z.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...$),this._logHandler(this,Z.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...$),this._logHandler(this,Z.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...$),this._logHandler(this,Z.ERROR,...$)}}function ee(z){D.forEach($=>{$.setLogLevel(z)})}function X(z,$){for(const he of D){let xe=null;$&&$.level&&(xe=x[$.level]),he.userLogHandler=null===z?null:(Ve,nt,...Ze)=>{const et=Ze.map(tt=>{if(null==tt)return null;if("string"==typeof tt)return tt;if("number"==typeof tt||"boolean"==typeof tt)return tt.toString();if(tt instanceof Error)return tt.message;try{return JSON.stringify(tt)}catch{return null}}).filter(tt=>tt).join(" ");nt>=(xe??Ve.logLevel)&&z({level:Z[nt].toLowerCase(),message:et,args:Ze,type:Ve.name})}}}},5046:(vt,U,G)=>{var D=G(467),Z=G(9574),x=G(443),me=G(1401),Ae=(G(1631),G(5398),G(8779));function ee(){return window}function $(){return $=(0,D.A)(function*(C,E,S){var F;const{BuildInfo:j}=ee();(0,x.au)(E.sessionId,"AuthEvent did not contain a session ID");const ye=yield function tt(C){return qt.apply(this,arguments)}(E.sessionId),Fe={};return(0,x.av)()?Fe.ibi=j.packageName:(0,x.aw)()?Fe.apn=j.packageName:(0,x.ax)(C,"operation-not-supported-in-this-environment"),j.displayName&&(Fe.appDisplayName=j.displayName),Fe.sessionId=ye,(0,x.ay)(C,S,E.type,void 0,null!==(F=E.eventId)&&void 0!==F?F:void 0,Fe)}),$.apply(this,arguments)}function xe(){return(xe=(0,D.A)(function*(C){const{BuildInfo:E}=ee(),S={};(0,x.av)()?S.iosBundleId=E.packageName:(0,x.aw)()?S.androidPackageName=E.packageName:(0,x.ax)(C,"operation-not-supported-in-this-environment"),yield(0,x.az)(C,S)})).apply(this,arguments)}function Ze(){return(Ze=(0,D.A)(function*(C,E,S){const{cordova:F}=ee();let j=()=>{};try{yield new Promise((ye,Fe)=>{let gt=null;function Be(){var K;ye();const Xn=null===(K=F.plugins.browsertab)||void 0===K?void 0:K.close;"function"==typeof Xn&&Xn(),"function"==typeof S?.close&&S.close()}function bn(){gt||(gt=window.setTimeout(()=>{Fe((0,x.aB)(C,"redirect-cancelled-by-user"))},2e3))}function wr(){"visible"===document?.visibilityState&&bn()}E.addPassiveListener(Be),document.addEventListener("resume",bn,!1),(0,x.aw)()&&document.addEventListener("visibilitychange",wr,!1),j=()=>{E.removePassiveListener(Be),document.removeEventListener("resume",bn,!1),document.removeEventListener("visibilitychange",wr,!1),gt&&window.clearTimeout(gt)}})}finally{j()}})).apply(this,arguments)}function qt(){return(qt=(0,D.A)(function*(C){const E=function Jt(C){if((0,x.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const E=new ArrayBuffer(C.length),S=new Uint8Array(E);for(let F=0;F<C.length;F++)S[F]=C.charCodeAt(F);return S}(C),S=yield crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(S)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class St extends x.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(E=>{this.resolveInitialized=E})}addPassiveListener(E){this.passiveListeners.add(E)}removePassiveListener(E){this.passiveListeners.delete(E)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(E){return this.resolveInitialized(),this.passiveListeners.forEach(S=>S(E)),super.onEvent(E)}initialized(){var E=this;return(0,D.A)(function*(){yield E.initPromise})()}}function wt(C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,D.A)(function*(C){const E=yield bt()._get(Ht(C));return E&&(yield bt()._remove(Ht(C))),E})).apply(this,arguments)}function it(){const C=[];for(let S=0;S<20;S++){const F=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(F))}return C.join("")}function bt(){return(0,x.aE)(x.b)}function Ht(C){return(0,x.aF)("authEvent",C.config.apiKey,C.name)}function Ir(C){if(!C?.includes("?"))return{};const[E,...S]=C.split("?");return(0,me.I9)(S.join("?"))}const fr=class ir{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(E){var S=this;return(0,D.A)(function*(){const F=E._key();let j=S.eventManagers.get(F);return j||(j=new St(E),S.eventManagers.set(F,j),S.attachCallbackListeners(E,j)),j})()}_openPopup(E){(0,x.ax)(E,"operation-not-supported-in-this-environment")}_openRedirect(E,S,F,j){var ye=this;return(0,D.A)(function*(){!function et(C){var E,S,F,j,ye,Fe,gt,Be,bn,wr;const K=ee();(0,x.aC)("function"==typeof(null===(E=K?.universalLinks)||void 0===E?void 0:E.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.aC)(typeof(null===(S=K?.BuildInfo)||void 0===S?void 0:S.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.aC)("function"==typeof(null===(ye=null===(j=null===(F=K?.cordova)||void 0===F?void 0:F.plugins)||void 0===j?void 0:j.browsertab)||void 0===ye?void 0:ye.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(Be=null===(gt=null===(Fe=K?.cordova)||void 0===Fe?void 0:Fe.plugins)||void 0===gt?void 0:gt.browsertab)||void 0===Be?void 0:Be.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(wr=null===(bn=K?.cordova)||void 0===bn?void 0:bn.InAppBrowser)||void 0===wr?void 0:wr.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(E);const Fe=yield ye._initialize(E);yield Fe.initialized(),Fe.resetRedirect(),(0,x.aI)(),yield ye._originValidation(E);const gt=function Lt(C,E,S=null){return{type:E,eventId:S,urlResponse:null,sessionId:it(),postBody:null,tenantId:C.tenantId,error:(0,x.aB)(C,"no-auth-event")}}(E,F,j);yield function _t(C,E){return bt()._set(Ht(C),E)}(E,gt);const Be=yield function z(C,E,S){return $.apply(this,arguments)}(E,gt,S),bn=yield function Ve(C){const{cordova:E}=ee();return new Promise(S=>{E.plugins.browsertab.isAvailable(F=>{let j=null;F?E.plugins.browsertab.openUrl(C):j=E.InAppBrowser.open(C,(0,x.aA)()?"_blank":"_system","location=yes"),S(j)})})}(Be);return function nt(C,E,S){return Ze.apply(this,arguments)}(E,Fe,bn)})()}_isIframeWebStorageSupported(E,S){throw new Error("Method not implemented.")}_originValidation(E){const S=E._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function he(C){return xe.apply(this,arguments)}(E)),this.originValidationPromises[S]}attachCallbackListeners(E,S){const{universalLinks:F,handleOpenURL:j,BuildInfo:ye}=ee(),Fe=setTimeout((0,D.A)(function*(){yield wt(E),S.onEvent(Wr())}),500),gt=function(){var wr=(0,D.A)(function*(K){clearTimeout(Fe);const Xn=yield wt(E);let Ks=null;Xn&&K?.url&&(Ks=function ie(C,E){var S,F;const j=function xn(C){const E=Ir(C),S=E.link?decodeURIComponent(E.link):void 0,F=Ir(S).link,j=E.deep_link_id?decodeURIComponent(E.deep_link_id):void 0;return Ir(j).link||j||F||S||C}(E);if(j.includes("/__/auth/callback")){const ye=Ir(j),Fe=ye.firebaseError?function Sn(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(ye.firebaseError)):null,gt=null===(F=null===(S=Fe?.code)||void 0===S?void 0:S.split("auth/"))||void 0===F?void 0:F[1],Be=gt?(0,x.aB)(gt):null;return Be?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:j,postBody:null}}return null}(Xn,K.url)),S.onEvent(Ks||Wr())});return function(Xn){return wr.apply(this,arguments)}}();typeof F<"u"&&"function"==typeof F.subscribe&&F.subscribe(null,gt);const Be=j,bn=`${ye.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var wr=(0,D.A)(function*(K){if(K.toLowerCase().startsWith(bn)&&gt({url:K}),"function"==typeof Be)try{Be(K)}catch(Xn){console.error(Xn)}});return function(K){return wr.apply(this,arguments)}}()}};function Wr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aB)("no-auth-event")}}function ve(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function lt(C=(0,me.ZQ)()){return!("file:"!==ve()&&"ionic:"!==ve()&&"capacitor:"!==ve()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function mt(){try{const C=self.localStorage,E=x.aN();if(C)return C.setItem(E,"1"),C.removeItem(E),!function Tn(C=(0,me.ZQ)()){return function Mn(){return(0,me.lT)()&&11===document?.documentMode}()||function Ct(C=(0,me.ZQ)()){return/Edge\/\d+/.test(C)}(C)}()||(0,me.zW)()}catch{return Jr()&&(0,me.zW)()}return!1}function Jr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tn(){return(function _e(){return"http:"===ve()||"https:"===ve()}()||(0,me.sr)()||lt())&&!function Pt(){return(0,me.lV)()||(0,me.Ll)()}()&&mt()&&!Jr()}function nn(){return lt()&&typeof document<"u"}function ei(){return(ei=(0,D.A)(function*(){return!!nn()&&new Promise(C=>{const E=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(E),C(!0)})})})).apply(this,arguments)}const Nr={LOCAL:"local",NONE:"none",SESSION:"session"},ti=x.aC,fo="persistence";function vs(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,D.A)(function*(C){yield C._initializationPromise;const E=ha(),S=x.aF(fo,C.config.apiKey,C.name);E&&E.setItem(S,C._getPersistence())})).apply(this,arguments)}function ha(){var C;try{return(null===(C=function Ci(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const Gs=x.aC;class hi{constructor(){this.browserResolver=x.aE(x.k),this.cordovaResolver=x.aE(fr),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(E){var S=this;return(0,D.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._initialize(E)})()}_openPopup(E,S,F,j){var ye=this;return(0,D.A)(function*(){return yield ye.selectUnderlyingResolver(),ye.assertedUnderlyingResolver._openPopup(E,S,F,j)})()}_openRedirect(E,S,F,j){var ye=this;return(0,D.A)(function*(){return yield ye.selectUnderlyingResolver(),ye.assertedUnderlyingResolver._openRedirect(E,S,F,j)})()}_isIframeWebStorageSupported(E,S){this.assertedUnderlyingResolver._isIframeWebStorageSupported(E,S)}_originValidation(E){return this.assertedUnderlyingResolver._originValidation(E)}get _shouldInitProactively(){return nn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var E=this;return(0,D.A)(function*(){if(E.underlyingResolver)return;const S=yield function Dt(){return ei.apply(this,arguments)}();E.underlyingResolver=S?E.cordovaResolver:E.browserResolver})()}}function fa(C){return C.unwrap()}function ls(C){return bs(C)}function bs(C){const{_tokenResponse:E}=C instanceof me.g?C.customData:C;if(!E)return null;if(!(C instanceof me.g)&&"temporaryProof"in E&&"phoneNumber"in E)return x.P.credentialFromResult(C);const S=E.providerId;if(!S||S===x.p.PASSWORD)return null;let F;switch(S){case x.p.GOOGLE:F=x.X;break;case x.p.FACEBOOK:F=x.W;break;case x.p.GITHUB:F=x.Y;break;case x.p.TWITTER:F=x.$;break;default:const{oauthIdToken:j,oauthAccessToken:ye,oauthTokenSecret:Fe,pendingToken:gt,nonce:Be}=E;return ye||Fe||j||gt?gt?S.startsWith("saml.")?x.aQ._create(S,gt):x.N._fromParams({providerId:S,signInMethod:S,pendingToken:gt,idToken:j,accessToken:ye}):new x.Z(S).credential({idToken:j,accessToken:ye,rawNonce:Be}):null}return C instanceof me.g?F.credentialFromError(C):F.credentialFromResult(C)}function Fn(C,E){return E.catch(S=>{throw S instanceof me.g&&function Bo(C,E){var S;const F=null===(S=E.customData)||void 0===S?void 0:S._tokenResponse;if("auth/multi-factor-auth-required"===E?.code)E.resolver=new yl(C,x.as(C,E));else if(F){const j=bs(E),ye=E;j&&(ye.credential=j,ye.tenantId=F.tenantId||void 0,ye.email=F.email||void 0,ye.phoneNumber=F.phoneNumber||void 0)}}(C,S),S}).then(S=>{const j=S.user;return{operationType:S.operationType,credential:ls(S),additionalUserInfo:x.aq(S),user:fi.getOrCreate(j)}})}function Wi(C,E){return Es.apply(this,arguments)}function Es(){return(Es=(0,D.A)(function*(C,E){const S=yield E;return{verificationId:S.verificationId,confirm:F=>Fn(C,S.confirm(F))}})).apply(this,arguments)}class yl{constructor(E,S){this.resolver=S,this.auth=function qs(C){return C.wrapped()}(E)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(E){return Fn(fa(this.auth),this.resolver.resolveSignIn(E))}}class fi{constructor(E){this._delegate=E,this.multiFactor=x.at(E)}static getOrCreate(E){return fi.USER_MAP.has(E)||fi.USER_MAP.set(E,new fi(E)),fi.USER_MAP.get(E)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(E){return this._delegate.getIdTokenResult(E)}getIdToken(E){return this._delegate.getIdToken(E)}linkAndRetrieveDataWithCredential(E){return this.linkWithCredential(E)}linkWithCredential(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.a2(S._delegate,E))})()}linkWithPhoneNumber(E,S){var F=this;return(0,D.A)(function*(){return Wi(F.auth,x.l(F._delegate,E,S))})()}linkWithPopup(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.d(S._delegate,E,hi))})()}linkWithRedirect(E){var S=this;return(0,D.A)(function*(){return yield vs(x.aJ(S.auth)),x.g(S._delegate,E,hi)})()}reauthenticateAndRetrieveDataWithCredential(E){return this.reauthenticateWithCredential(E)}reauthenticateWithCredential(E){var S=this;return(0,D.A)(function*(){return Fn(S.auth,x.a3(S._delegate,E))})()}reauthenticateWithPhoneNumber(E,S){return Wi(this.auth,x.r(this._delegate,E,S))}reauthenticateWithPopup(E){return Fn(this.auth,x.e(this._delegate,E,hi))}reauthenticateWithRedirect(E){var S=this;return(0,D.A)(function*(){return yield vs(x.aJ(S.auth)),x.h(S._delegate,E,hi)})()}sendEmailVerification(E){return x.ag(this._delegate,E)}unlink(E){var S=this;return(0,D.A)(function*(){return yield x.ap(S._delegate,E),S})()}updateEmail(E){return x.al(this._delegate,E)}updatePassword(E){return x.am(this._delegate,E)}updatePhoneNumber(E){return x.u(this._delegate,E)}updateProfile(E){return x.ak(this._delegate,E)}verifyBeforeUpdateEmail(E,S){return x.ah(this._delegate,E,S)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fi.USER_MAP=new WeakMap;const Is=x.aC;let mo=(()=>{class C{constructor(S,F){if(this.app=S,F.isInitialized())return this._delegate=F.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=S.options;Is(j,"invalid-api-key",{appName:S.name}),Is(j,"invalid-api-key",{appName:S.name});const ye=typeof window<"u"?hi:void 0;this._delegate=F.initialize({options:{persistence:Va(j,S.name),popupRedirectResolver:ye}}),this._delegate._updateErrorMap(x.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(S){this._delegate.languageCode=S}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(S){this._delegate.tenantId=S}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(S,F){x.K(this._delegate,S,F)}applyActionCode(S){return x.a7(this._delegate,S)}checkActionCode(S){return x.a8(this._delegate,S)}confirmPasswordReset(S,F){return x.a6(this._delegate,S,F)}createUserWithEmailAndPassword(S,F){var j=this;return(0,D.A)(function*(){return Fn(j._delegate,x.aa(j._delegate,S,F))})()}fetchProvidersForEmail(S){return this.fetchSignInMethodsForEmail(S)}fetchSignInMethodsForEmail(S){return x.af(this._delegate,S)}isSignInWithEmailLink(S){return x.ad(this._delegate,S)}getRedirectResult(){var S=this;return(0,D.A)(function*(){Is(tn(),S._delegate,"operation-not-supported-in-this-environment");const F=yield x.j(S._delegate,hi);return F?Fn(S._delegate,Promise.resolve(F)):{credential:null,user:null}})()}addFrameworkForLogging(S){!function fe(C,E){(0,x.aJ)(C)._logFramework(E)}(this._delegate,S)}onAuthStateChanged(S,F,j){const{next:ye,error:Fe,complete:gt}=Pi(S,F,j);return this._delegate.onAuthStateChanged(ye,Fe,gt)}onIdTokenChanged(S,F,j){const{next:ye,error:Fe,complete:gt}=Pi(S,F,j);return this._delegate.onIdTokenChanged(ye,Fe,gt)}sendSignInLinkToEmail(S,F){return x.ac(this._delegate,S,F)}sendPasswordResetEmail(S,F){return x.a5(this._delegate,S,F||void 0)}setPersistence(S){var F=this;return(0,D.A)(function*(){let j;switch(function La(C,E){ti(Object.values(Nr).includes(E),C,"invalid-persistence-type"),(0,me.lV)()?ti(E!==Nr.SESSION,C,"unsupported-persistence-type"):(0,me.Ll)()?ti(E===Nr.NONE,C,"unsupported-persistence-type"):Jr()?ti(E===Nr.NONE||E===Nr.LOCAL&&(0,me.zW)(),C,"unsupported-persistence-type"):ti(E===Nr.NONE||mt(),C,"unsupported-persistence-type")}(F._delegate,S),S){case Nr.SESSION:j=x.a;break;case Nr.LOCAL:j=(yield x.aE(x.i)._isAvailable())?x.i:x.b;break;case Nr.NONE:j=x.U;break;default:return x.ax("argument-error",{appName:F._delegate.name})}return F._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(S){return this.signInWithCredential(S)}signInAnonymously(){return Fn(this._delegate,x.a0(this._delegate))}signInWithCredential(S){return Fn(this._delegate,x.a1(this._delegate,S))}signInWithCustomToken(S){return Fn(this._delegate,x.a4(this._delegate,S))}signInWithEmailAndPassword(S,F){return Fn(this._delegate,x.ab(this._delegate,S,F))}signInWithEmailLink(S,F){return Fn(this._delegate,x.ae(this._delegate,S,F))}signInWithPhoneNumber(S,F){return Wi(this._delegate,x.s(this._delegate,S,F))}signInWithPopup(S){var F=this;return(0,D.A)(function*(){return Is(tn(),F._delegate,"operation-not-supported-in-this-environment"),Fn(F._delegate,x.c(F._delegate,S,hi))})()}signInWithRedirect(S){var F=this;return(0,D.A)(function*(){return Is(tn(),F._delegate,"operation-not-supported-in-this-environment"),yield vs(F._delegate),x.f(F._delegate,S,hi)})()}updateCurrentUser(S){return this._delegate.updateCurrentUser(S)}verifyPasswordResetCode(S){return x.a9(this._delegate,S)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Nr,C})();function Pi(C,E,S){let F=C;"function"!=typeof C&&({next:F,error:E,complete:S}=C);const j=F;return{next:Fe=>j(Fe&&fi.getOrCreate(Fe)),error:E,complete:S}}function Va(C,E){const S=function po(C,E){const S=ha();if(!S)return[];const F=x.aF(fo,C,E);switch(S.getItem(F)){case Nr.NONE:return[x.U];case Nr.LOCAL:return[x.i,x.a];case Nr.SESSION:return[x.a];default:return[]}}(C,E);if(typeof self<"u"&&!S.includes(x.i)&&S.push(x.i),typeof window<"u")for(const F of[x.b,x.a])S.includes(F)||S.push(F);return S.includes(x.U)||S.push(x.U),S}class pa{constructor(){this.providerId="phone",this._delegate=new x.P(fa(Z.A.auth()))}static credential(E,S){return x.P.credential(E,S)}verifyPhoneNumber(E,S){return this._delegate.verifyPhoneNumber(E,S)}unwrap(){return this._delegate}}pa.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,pa.PROVIDER_ID=x.P.PROVIDER_ID;const Ut=x.aC;class lc{constructor(E,S,F=Z.A.app()){var j;Ut(null===(j=F.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:F.name}),this._delegate=new x.R(F.auth(),E,S),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Se(C){C.INTERNAL.registerComponent(new Ae.uA("auth-compat",E=>{const S=E.getProvider("app-compat").getImmediate(),F=E.getProvider("auth");return new mo(S,F)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.V,FacebookAuthProvider:x.W,GithubAuthProvider:x.Y,GoogleAuthProvider:x.X,OAuthProvider:x.Z,SAMLAuthProvider:x._,PhoneAuthProvider:pa,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:lc,TwitterAuthProvider:x.$,Auth:mo,AuthCredential:x.L,Error:me.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.14")}(Z.A)},6749:(vt,U,G)=>{G.d(U,{P2:()=>Jt});var D=G(467);const Z=(Ue,ie)=>ie.some(it=>Ue instanceof it);let x,me;const Ae=new WeakMap,ee=new WeakMap,X=new WeakMap,z=new WeakMap,$=new WeakMap;let Ve={get(Ue,ie,it){if(Ue instanceof IDBTransaction){if("done"===ie)return ee.get(Ue);if("objectStoreNames"===ie)return Ue.objectStoreNames||X.get(Ue);if("store"===ie)return it.objectStoreNames[1]?void 0:it.objectStore(it.objectStoreNames[0])}return tt(Ue[ie])},set:(Ue,ie,it)=>(Ue[ie]=it,!0),has:(Ue,ie)=>Ue instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in Ue};function et(Ue){return"function"==typeof Ue?function Ze(Ue){return Ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ue)?function(...ie){return Ue.apply(qt(this),ie),tt(Ae.get(this))}:function(...ie){return tt(Ue.apply(qt(this),ie))}:function(ie,...it){const bt=Ue.call(qt(this),ie,...it);return X.set(bt,ie.sort?ie.sort():[ie]),tt(bt)}}(Ue):(Ue instanceof IDBTransaction&&function xe(Ue){if(ee.has(Ue))return;const ie=new Promise((it,bt)=>{const Ht=()=>{Ue.removeEventListener("complete",Sn),Ue.removeEventListener("error",xn),Ue.removeEventListener("abort",xn)},Sn=()=>{it(),Ht()},xn=()=>{bt(Ue.error||new DOMException("AbortError","AbortError")),Ht()};Ue.addEventListener("complete",Sn),Ue.addEventListener("error",xn),Ue.addEventListener("abort",xn)});ee.set(Ue,ie)}(Ue),Z(Ue,function ce(){return x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ue,Ve):Ue)}function tt(Ue){if(Ue instanceof IDBRequest)return function he(Ue){const ie=new Promise((it,bt)=>{const Ht=()=>{Ue.removeEventListener("success",Sn),Ue.removeEventListener("error",xn)},Sn=()=>{it(tt(Ue.result)),Ht()},xn=()=>{bt(Ue.error),Ht()};Ue.addEventListener("success",Sn),Ue.addEventListener("error",xn)});return ie.then(it=>{it instanceof IDBCursor&&Ae.set(it,Ue)}).catch(()=>{}),$.set(ie,Ue),ie}(Ue);if(z.has(Ue))return z.get(Ue);const ie=et(Ue);return ie!==Ue&&(z.set(Ue,ie),$.set(ie,Ue)),ie}const qt=Ue=>$.get(Ue);function Jt(Ue,ie,{blocked:it,upgrade:bt,blocking:Ht,terminated:Sn}={}){const xn=indexedDB.open(Ue,ie),Ir=tt(xn);return bt&&xn.addEventListener("upgradeneeded",Dn=>{bt(tt(xn.result),Dn.oldVersion,Dn.newVersion,tt(xn.transaction),Dn)}),it&&xn.addEventListener("blocked",Dn=>it(Dn.oldVersion,Dn.newVersion,Dn)),Ir.then(Dn=>{Sn&&Dn.addEventListener("close",()=>Sn()),Ht&&Dn.addEventListener("versionchange",ir=>Ht(ir.oldVersion,ir.newVersion,ir))}).catch(()=>{}),Ir}const St=["get","getKey","getAll","getAllKeys","count"],Lt=["put","add","delete","clear"],_t=new Map;function wt(Ue,ie){if(!(Ue instanceof IDBDatabase)||ie in Ue||"string"!=typeof ie)return;if(_t.get(ie))return _t.get(ie);const it=ie.replace(/FromIndex$/,""),bt=ie!==it,Ht=Lt.includes(it);if(!(it in(bt?IDBIndex:IDBObjectStore).prototype)||!Ht&&!St.includes(it))return;const Sn=function(){var xn=(0,D.A)(function*(Ir,...Dn){const ir=this.transaction(Ir,Ht?"readwrite":"readonly");let fr=ir.store;return bt&&(fr=fr.index(Dn.shift())),(yield Promise.all([fr[it](...Dn),Ht&&ir.done]))[0]});return function(Dn){return xn.apply(this,arguments)}}();return _t.set(ie,Sn),Sn}!function nt(Ue){Ve=Ue(Ve)}(Ue=>({...Ue,get:(ie,it,bt)=>wt(ie,it)||Ue.get(ie,it,bt),has:(ie,it)=>!!wt(ie,it)||Ue.has(ie,it)}))},467:(vt,U,G)=>{function D(x,me,ce,te,Ae,ee,X){try{var z=x[ee](X),$=z.value}catch(he){return void ce(he)}z.done?me($):Promise.resolve($).then(te,Ae)}function Z(x){return function(){var me=this,ce=arguments;return new Promise(function(te,Ae){var ee=x.apply(me,ce);function X($){D(ee,te,Ae,X,z,"next",$)}function z($){D(ee,te,Ae,X,z,"throw",$)}X(void 0)})}}G.d(U,{A:()=>Z})},1635:(vt,U,G)=>{function me(fe,be){var se={};for(var ae in fe)Object.prototype.hasOwnProperty.call(fe,ae)&&be.indexOf(ae)<0&&(se[ae]=fe[ae]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(ae=Object.getOwnPropertySymbols(fe);ve<ae.length;ve++)be.indexOf(ae[ve])<0&&Object.prototype.propertyIsEnumerable.call(fe,ae[ve])&&(se[ae[ve]]=fe[ae[ve]])}return se}function he(fe,be,se,ae){return new(se||(se=Promise))(function(_e,lt){function Pt(Tn){try{Ct(ae.next(Tn))}catch(mt){lt(mt)}}function Mn(Tn){try{Ct(ae.throw(Tn))}catch(mt){lt(mt)}}function Ct(Tn){Tn.done?_e(Tn.value):function ve(_e){return _e instanceof se?_e:new se(function(lt){lt(_e)})}(Tn.value).then(Pt,Mn)}Ct((ae=ae.apply(fe,be||[])).next())})}function At(fe){return this instanceof At?(this.v=fe,this):new At(fe)}function St(fe,be,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,ae=se.apply(fe,be||[]),_e=[];return ve=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Pt("next"),Pt("throw"),Pt("return",function lt(tn){return function(nn){return Promise.resolve(nn).then(tn,mt)}}),ve[Symbol.asyncIterator]=function(){return this},ve;function Pt(tn,nn){ae[tn]&&(ve[tn]=function(Dt){return new Promise(function(ei,Ci){_e.push([tn,Dt,ei,Ci])>1||Mn(tn,Dt)})},nn&&(ve[tn]=nn(ve[tn])))}function Mn(tn,nn){try{!function Ct(tn){tn.value instanceof At?Promise.resolve(tn.value.v).then(Tn,mt):Jr(_e[0][2],tn)}(ae[tn](nn))}catch(Dt){Jr(_e[0][3],Dt)}}function Tn(tn){Mn("next",tn)}function mt(tn){Mn("throw",tn)}function Jr(tn,nn){tn(nn),_e.shift(),_e.length&&Mn(_e[0][0],_e[0][1])}}function _t(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,be=fe[Symbol.asyncIterator];return be?be.call(fe):(fe=function Ze(fe){var be="function"==typeof Symbol&&Symbol.iterator,se=be&&fe[be],ae=0;if(se)return se.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&ae>=fe.length&&(fe=void 0),{value:fe&&fe[ae++],done:!fe}}};throw new TypeError(be?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),se={},ae("next"),ae("throw"),ae("return"),se[Symbol.asyncIterator]=function(){return this},se);function ae(_e){se[_e]=fe[_e]&&function(lt){return new Promise(function(Pt,Mn){!function ve(_e,lt,Pt,Mn){Promise.resolve(Mn).then(function(Ct){_e({value:Ct,done:Pt})},lt)}(Pt,Mn,(lt=fe[_e](lt)).done,lt.value)})}}}G.d(U,{AQ:()=>St,N3:()=>At,Tt:()=>me,sH:()=>he,xN:()=>_t}),"function"==typeof SuppressedError&&SuppressedError}},vt=>{vt(vt.s=9269)}]);