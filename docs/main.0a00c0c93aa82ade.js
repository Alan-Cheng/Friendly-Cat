"use strict";(self.webpackChunkfriendly_time=self.webpackChunkfriendly_time||[]).push([[792],{2602:(yt,U,G)=>{function x(n,e){return Object.is(n,e)}let Z=null,D=!1,he=1;const ce=Symbol("SIGNAL");function te(n){const e=Z;return Z=n,e}const z={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $(n){if(D)throw new Error("");if(null===Z)return;Z.consumerOnSignalRead(n);const e=Z.nextProducerIndex++;mt(Z),e<Z.producerNode.length&&Z.producerNode[e]!==n&&Nt(Z)&&Tt(Z.producerNode[e],Z.producerIndexOfThis[e]),Z.producerNode[e]!==n&&(Z.producerNode[e]=n,Z.producerIndexOfThis[e]=Nt(Z)?Ct(n,Z,e):0),Z.producerLastReadVersion[e]=n.version}function Te(n){if((!Nt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==he)){if(!n.producerMustRecompute(n)&&!Ht(n))return n.dirty=!1,void(n.lastCleanEpoch=he);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=he}}function Fe(n){if(void 0===n.liveConsumerNode)return;const e=D;D=!0;try{for(const t of n.liveConsumerNode)t.dirty||Ke(t)}finally{D=e}}function Je(){return!1!==Z?.consumerAllowSignalWrites}function Ke(n){n.dirty=!0,Fe(n),n.consumerMarkedDirty?.(n)}function Qe(n){return n&&(n.nextProducerIndex=0),te(n)}function Ye(n,e){if(te(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Nt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tt(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ht(n){mt(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Te(t),r!==t.version))return!0}return!1}function Yt(n){if(mt(n),Nt(n))for(let e=0;e<n.producerNode.length;e++)Tt(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ct(n,e,t){if(Et(n),0===n.liveConsumerNode.length&&Le(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Ct(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Tt(n,e){if(Et(n),1===n.liveConsumerNode.length&&Le(n))for(let r=0;r<n.producerNode.length;r++)Tt(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];mt(i),i.producerIndexOfThis[r]=e}}function Nt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mt(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Et(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Le(n){return void 0!==n.producerNode}const tt=Symbol("UNSET"),vt=Symbol("COMPUTING"),Bt=Symbol("ERRORED"),In={...z,value:tt,dirty:!0,error:null,equal:x,producerMustRecompute:n=>n.value===tt||n.value===vt,producerRecomputeValue(n){if(n.value===vt)throw new Error("Detected cycle in computations.");const e=n.value;n.value=vt;const t=Qe(n);let r;try{r=n.computation()}catch(i){r=Bt,n.error=i}finally{Ye(n,t)}e!==tt&&e!==Bt&&r!==Bt&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let _r=function wn(){throw new Error};function Cn(){_r()}let or=null;function se(n,e){Je()||Cn(),n.equal(n.value,e)||(n.value=e,function st(n){n.version++,function ue(){he++}(),Fe(n),or?.()}(n))}const pe={...z,equal:x,value:void 0};const Tn=()=>{},It={...z,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Tn};function ft(n){return"function"==typeof n}function Kr(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Xt=Kr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Zt(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class kt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(ft(r))try{r()}catch(s){e=s instanceof Xt?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{xr(s)}catch(o){e=e??[],o instanceof Xt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Xt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)xr(e);else{if(e instanceof kt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Zt(t,e)}remove(e){const{_finalizers:t}=this;t&&Zt(t,e),e instanceof kt&&e._removeParent(this)}}kt.EMPTY=(()=>{const n=new kt;return n.closed=!0,n})();const Qr=kt.EMPTY;function yi(n){return n instanceof kt||n&&"closed"in n&&ft(n.remove)&&ft(n.add)&&ft(n.unsubscribe)}function xr(n){ft(n)?n():n.unsubscribe()}const Yr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},to={setTimeout(n,e,...t){const{delegate:r}=to;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=to;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function xa(n){to.setTimeout(()=>{const{onUnhandledError:e}=Yr;if(!e)throw n;e(n)})}function us(){}const ks=Os("C",void 0,void 0);function Os(n,e,t){return{kind:n,value:e,error:t}}let oi=null;function ra(n){if(Yr.useDeprecatedSynchronousErrorHandling){const e=!oi;if(e&&(oi={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=oi;if(oi=null,t)throw r}}else n()}class es extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yi(e)&&e.add(this)):this.destination=fs}static create(e,t,r){return new Li(e,t,r)}next(e){this.isStopped?ai(function na(n){return Os("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ai(function no(n){return Os("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ai(ks,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Do=Function.prototype.bind;function ds(n,e){return Do.call(n,e)}class Mn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){hs(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){hs(r)}else hs(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){hs(t)}}}class Li extends es{constructor(e,t,r){let i;if(super(),ft(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Yr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ds(e.next,s),error:e.error&&ds(e.error,s),complete:e.complete&&ds(e.complete,s)}):i=e}this.destination=new Mn(i)}}function hs(n){Yr.useDeprecatedSynchronousErrorHandling?function Fs(n){Yr.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=n)}(n):xa(n)}function ai(n,e){const{onStoppedNotification:t}=Yr;t&&to.setTimeout(()=>t(n,e))}const fs={closed:!0,next:us,error:function ll(n){throw n},complete:us},ro="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ci(n){return n}function ia(n){return 0===n.length?Ci:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Lt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Ce(n){return n&&n instanceof es||function We(n){return n&&ft(n.next)&&ft(n.error)&&ft(n.complete)}(n)&&yi(n)}(t)?t:new Li(t,r,i);return ra(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Xl(r))((i,s)=>{const o=new Li({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ro](){return this}pipe(...t){return ia(t)(this)}toPromise(t){return new(t=Xl(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Xl(n){var e;return null!==(e=n??Yr.Promise)&&void 0!==e?e:Promise}const C=Kr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class n extends Lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new S(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new C}next(t){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Qr:(this.currentObservers=null,s.push(t),new kt(()=>{this.currentObservers=null,Zt(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Lt;return t.source=this,t}}return n.create=(e,t)=>new S(e,t),n})();class S extends E{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Qr}}class F extends E{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function j(n){return ft(n?.lift)}function me(n){return e=>{if(j(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pe(n,e,t,r,i){return new pt(n,e,t,r,i)}class pt extends es{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ve(n,e){return me((t,r)=>{let i=0;t.subscribe(Pe(r,s=>{r.next(n.call(e,s,i++))}))})}const yr="https://g.co/ng/security#xss";class K extends Error{constructor(e,t){super(function Gn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function io(n){return{toString:n}.toString()}const lu="__parameters__";function uu(n,e,t){return io(()=>{const r=function wp(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(lu)?l[lu]:Object.defineProperty(l,lu,{value:[]})[lu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const zn=globalThis;function Nn(n){for(let e in n)if(n[e]===Nn)return e;throw Error("Could not find renamed property on target object.")}function vr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Xr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Xr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Zl(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ny=Nn({__forward_ref__:Nn});function Hn(n){return n.__forward_ref__=Hn,n.toString=function(){return Xr(this())},n}function At(n){return Cp(n)?n():n}function Cp(n){return"function"==typeof n&&n.hasOwnProperty(ny)&&n.__forward_ref__===Hn}function Ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function du(n){return Ap(n,Jl)||Ap(n,Mw)}function Ap(n,e){return n.hasOwnProperty(e)?n[e]:null}function hu(n){return n&&(n.hasOwnProperty(eh)||n.hasOwnProperty(iy))?n[eh]:null}const Jl=Nn({\u0275prov:Nn}),eh=Nn({\u0275inj:Nn}),Mw=Nn({ngInjectableDef:Nn}),iy=Nn({ngInjectorDef:Nn});class ve{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xo(n){return n&&!!n.\u0275providers}const ec=Nn({\u0275cmp:Nn}),cy=Nn({\u0275dir:Nn}),so=Nn({\u0275pipe:Nn}),Ow=Nn({\u0275mod:Nn}),Ro=Nn({\u0275fac:Nn}),nh=Nn({__NG_ELEMENT_ID__:Nn}),xp=Nn({__NG_ENV_ID__:Nn});function Pt(n){return"string"==typeof n?n:null==n?"":String(n)}function dy(n,e){throw new K(-201,!1)}var Vt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Vt||{});let Fw;function Rp(){return Fw}function Rr(n){const e=Fw;return Fw=n,e}function tc(n,e,t){const r=du(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Vt.Optional?null:void 0!==e?e:void dy()}const rh={},hy="__NG_DI_FLAG__",Mp="ngTempTokenPath",iR=/\n/gm,Lw="__source";let nc;function li(n){const e=nc;return nc=n,e}function Vw(n,e=Vt.Default){if(void 0===nc)throw new K(-203,!1);return null===nc?tc(n,void 0,e):nc.get(n,e&Vt.Optional?null:void 0,e)}function Ae(n,e=Vt.Default){return(Rp()||Vw)(At(n),e)}function O(n,e=Vt.Default){return Ae(n,ih(e))}function ih(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Op(n){const e=[];for(let t=0;t<n.length;t++){const r=At(n[t]);if(Array.isArray(r)){if(0===r.length)throw new K(900,!1);let i,s=Vt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=py(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Ae(i,s))}else e.push(Ae(r))}return e}function sh(n,e){return n[hy]=e,n.prototype[hy]=e,n}function py(n){return n[hy]}const Ti=sh(uu("Optional"),8),rc=sh(uu("SkipSelf"),4);function Ma(n,e){return n.hasOwnProperty(Ro)?n[Ro]:null}function ic(n,e){n.forEach(t=>Array.isArray(t)?ic(t,e):e(t))}function Vp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function oh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ai(n,e,t){let r=cl(n,e);return r>=0?n[1|r]=t:(r=~r,function zw(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function ah(n,e){const t=cl(n,e);if(t>=0)return n[1|t]}function cl(n,e){return function Bp(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const oo={},gn=[],ao=new ve(""),$w=new ve("",-1),lh=new ve("");class Up{get(e,t=rh){if(t===rh){const r=new Error(`NullInjectorError: No provider for ${Xr(e)}!`);throw r.name="NullInjectorError",r}return t}}var gu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gu||{}),lo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(lo||{}),sa=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(sa||{});function sR(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function ch(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];jp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Ww(n){return 3===n||4===n||6===n}function jp(n){return 64===n.charCodeAt(0)}function uh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Gw(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Gw(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const zp="ng-template";function oR(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==sR(e[i+1].toLowerCase(),t,0))return!0}else if(vy(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function vy(n){return 4===n.type&&n.value!==zp}function by(n,e,t){return e===(4!==n.type||t?n.value:zp)}function aR(n,e,t){let r=4;const i=n.attrs,s=null!==i?function Ey(n){for(let e=0;e<n.length;e++)if(Ww(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!by(n,l,t)||""===l&&1===e.length){if(Vs(r))return!1;o=!0}}else if(8&r){if(null===i||!oR(n,i,l,t)){if(Vs(r))return!1;o=!0}}else{const c=e[++a],u=lR(l,i,vy(n),t);if(-1===u){if(Vs(r))return!1;o=!0;continue}if(""!==c){let d;if(d=u>s?"":i[u+1].toLowerCase(),2&r&&c!==d){if(Vs(r))return!1;o=!0}}}}else{if(!o&&!Vs(r)&&!Vs(l))return!1;if(o&&Vs(l))continue;o=!1,r=l|1&r}}return Vs(r)||o}function Vs(n){return!(1&n)}function lR(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function uR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Hp(n,e,t=!1){for(let r=0;r<e.length;r++)if(aR(n,e[r],t))return!0;return!1}function Iy(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function qw(n,e){return n?":not("+e.trim()+")":e}function wy(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Vs(o)&&(e+=qw(s,i),i=""),r=o,s=s||!Vs(r);t++}return""!==i&&(e+=qw(s,i)),e}function Ur(n){return io(()=>{const e=fR(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||lo.Emulated,styles:n.styles||gn,_:null,schemas:n.schemas||null,tView:null,id:""};pR(t);const r=n.dependencies;return t.directiveDefs=Ty(r,!1),t.pipeDefs=Ty(r,!0),t.id=function mR(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function hR(n){return Kt(n)||ci(n)}function Kw(n){return null!==n}function $t(n){return io(()=>({type:n.type,bootstrap:n.bootstrap||gn,declarations:n.declarations||gn,imports:n.imports||gn,exports:n.exports||gn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Qw(n,e){if(null==n)return oo;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=sa.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==sa.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Ze(n){return io(()=>{const e=fR(n);return pR(e),e})}function Si(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Kt(n){return n[ec]||null}function ci(n){return n[cy]||null}function Di(n){return n[so]||null}function Bi(n,e){const t=n[Ow]||null;if(!t&&!0===e)throw new Error(`Type ${Xr(n)} does not have '\u0275mod' property.`);return t}function fR(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||oo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||gn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qw(n.inputs,e),outputs:Qw(n.outputs),debugInfo:null}}function pR(n){n.features?.forEach(e=>e(n))}function Ty(n,e){if(!n)return null;const t=e?Di:hR;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Kw)}function dl(n){return{\u0275providers:n}}function gR(...n){return{\u0275providers:Yw(0,n),\u0275fromNgModule:!0}}function Yw(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return ic(e,o=>{const a=o;Sy(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&_R(i,s),t}function _R(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Xw(i,s=>{e(s,r)})}}function Sy(n,e,t,r){if(!(n=At(n)))return!1;let i=null,s=hu(n);const o=!s&&Kt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=hu(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Sy(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{ic(s.imports,u=>{Sy(u,e,t,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&_R(c,e)}if(!a){const c=Ma(i)||(()=>new i);e({provide:i,useFactory:c,deps:gn},i),e({provide:lh,useValue:i,multi:!0},i),e({provide:ao,useValue:()=>Ae(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;Xw(l,u=>{e(u,c)})}}}return i!==n&&void 0!==n.providers}function Xw(n,e){for(let t of n)xo(t)&&(t=t.\u0275providers),Array.isArray(t)?Xw(t,e):e(t)}const Dy=Nn({provide:String,useValue:Nn});function Na(n){return null!==n&&"object"==typeof n&&Dy in n}function sc(n){return"function"==typeof n}const Jw=new ve(""),Wp={},vR={};let dh;function _u(){return void 0===dh&&(dh=new Up),dh}class xi{}class ka extends xi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ry(e,o=>this.processProvider(o)),this.records.set($w,oc(void 0,this)),i.has("environment")&&this.records.set(xi,oc(void 0,this));const s=this.records.get(Jw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(lh,gn,Vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=te(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=li(this),r=Rr(void 0);try{return e()}finally{li(t),Rr(r)}}get(e,t=rh,r=Vt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xp))return e[xp](this);r=ih(r);const s=li(this),o=Rr(void 0);try{if(!(r&Vt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function wR(n){return"function"==typeof n||"object"==typeof n&&n instanceof ve}(e)&&du(e);l=c&&this.injectableDefInScope(c)?oc(Gp(e),Wp):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&Vt.Self?_u():this.parent).get(e,t=r&Vt.Optional&&t===rh?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Mp]=a[Mp]||[]).unshift(Xr(e)),s)throw a;return function my(n,e,t,r){const i=n[Mp];throw e[Lw]&&i.unshift(e[Lw]),n.message=function gy(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Xr(e);if(Array.isArray(e))i=e.map(Xr).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Xr(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(iR,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Mp]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Rr(o),li(s)}}resolveInjectorInitializers(){const e=te(null),t=li(this),r=Rr(void 0);try{const s=this.get(ao,gn,Vt.Self);for(const o of s)o()}finally{li(t),Rr(r),te(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Xr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){let t=sc(e=At(e))?e:At(e&&e.provide);const r=function ER(n){return Na(n)?oc(void 0,n.useValue):oc(IR(n),Wp)}(e);if(!sc(e)&&!0===e.multi){let i=this.records.get(t);i||(i=oc(void 0,Wp,!0),i.factory=()=>Op(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=te(null);try{return t.value===Wp&&(t.value=vR,t.value=t.factory()),"object"==typeof t.value&&t.value&&function xy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=At(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Gp(n){const e=du(n),t=null!==e?e.factory:Ma(n);if(null!==t)return t;if(n instanceof ve)throw new K(204,!1);if(n instanceof Function)return function bR(n){if(n.length>0)throw new K(204,!1);const t=function tR(n){return n&&(n[Jl]||n[Mw])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new K(204,!1)}function IR(n,e,t){let r;if(sc(n)){const i=At(n);return Ma(i)||Gp(i)}if(Na(n))r=()=>At(n.useValue);else if(function Zw(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Op(n.deps||[]));else if(function $p(n){return!(!n||!n.useExisting)}(n))r=()=>Ae(At(n.useExisting));else{const i=At(n&&(n.useClass||n.provide));if(!function PH(n){return!!n.deps}(n))return Ma(i)||Gp(i);r=()=>new i(...Op(n.deps))}return r}function oc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Ry(n,e){for(const t of n)Array.isArray(t)?Ry(t,e):t&&xo(t)?Ry(t.\u0275providers,e):e(t)}function gs(n,e){n instanceof ka&&n.assertNotDestroyed();const r=li(n),i=Rr(void 0);try{return e()}finally{li(r),Rr(i)}}function e0(){return void 0!==Rp()||null!=function fy(){return nc}()}function Pr(n){if(!e0())throw new K(-203,!1)}const qn=0,Ue=1,ct=2,zr=3,Po=4,Ri=5,_s=6,ac=7,Kn=8,Zr=9,oa=10,St=11,mh=12,gh=13,bu=14,ar=15,lc=16,hl=17,Oa=18,Eu=19,r0=20,fl=21,_h=22,co=23,at=25,My=1,aa=7,wu=9,br=10;var Qp=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Qp||{});function Hr(n){return Array.isArray(n)&&"object"==typeof n[My]}function ui(n){return Array.isArray(n)&&!0===n[My]}function yh(n){return!!(4&n.flags)}function uc(n){return n.componentOffset>-1}function Cu(n){return!(1&~n.flags)}function Mo(n){return!!n.template}function No(n){return!!(512&n[ct])}class d0{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function h0(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function ts(){return tm}function tm(n){return n.type.prototype.ngOnChanges&&(n.setInput=MR),PR}function PR(){const n=f0(this),e=n?.current;if(e){const t=n.previous;if(t===oo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function MR(n,e,t,r,i){const s=this.declaredInputs[r],o=f0(n)||function NR(n,e){return n[nm]=e}(n,{previous:oo,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new d0(c&&c.currentValue,t,l===oo),h0(n,e,i,t)}ts.ngInherit=!0;const nm="__ngSimpleChanges__";function f0(n){return n[nm]||null}const uo=function(n,e,t){},rm="svg";function un(n){for(;Array.isArray(n);)n=n[qn];return n}function Eh(n,e){return un(e[n])}function Ui(n,e){return un(e[n.index])}function Tu(n,e){return n.data[e]}function dc(n,e){return n[e]}function ys(n,e){const t=e[n];return Hr(t)?t:t[qn]}function Fy(n){return!(128&~n[ct])}function ho(n,e){return null==e?null:n[e]}function sm(n){n[hl]=0}function m0(n){1024&n[ct]||(n[ct]|=1024,Fy(n)&&hc(n))}function Ih(n){return!!(9216&n[ct]||n[co]?.dirty)}function Ly(n){n[oa].changeDetectionScheduler?.notify(8),64&n[ct]&&(n[ct]|=1024),Ih(n)&&hc(n)}function hc(n){n[oa].changeDetectionScheduler?.notify(0);let e=Fa(n);for(;null!==e&&!(8192&e[ct])&&(e[ct]|=8192,Fy(e));)e=Fa(e)}function om(n,e){if(!(256&~n[ct]))throw new K(911,!1);null===n[fl]&&(n[fl]=[]),n[fl].push(e)}function Fa(n){const e=n[zr];return ui(e)?e[zr]:e}const Dt={lFrame:fe(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let _0=!1;function y0(){return Dt.bindingsEnabled}function fc(){return null!==Dt.skipHydrationRootTNode}function Ie(){return Dt.lFrame.lView}function Wt(){return Dt.lFrame.tView}function ji(n){return Dt.lFrame.contextLView=n,n[Kn]}function zi(n){return Dt.lFrame.contextLView=null,n}function kn(){let n=lm();for(;null!==n&&64===n.type;)n=n.parent;return n}function lm(){return Dt.lFrame.currentTNode}function fo(n,e){const t=Dt.lFrame;t.currentTNode=n,t.isParent=e}function cm(){return Dt.lFrame.isParent}function Ch(){Dt.lFrame.isParent=!1}function Th(){return _0}function zy(n){_0=n}function Hi(){const n=Dt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ko(){return Dt.lFrame.bindingIndex++}function Va(n){const e=Dt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function HR(n,e){const t=Dt.lFrame;t.bindingIndex=t.bindingRootIndex=n,$y(e)}function $y(n){Dt.lFrame.currentDirectiveIndex=n}function h(){return Dt.lFrame.currentQueryIndex}function f(n){Dt.lFrame.currentQueryIndex=n}function _(n){const e=n[Ue];return 2===e.type?e.declTNode:1===e.type?n[Ri]:null}function w(n,e,t){if(t&Vt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Vt.Host||(i=_(s),null===i||(s=s[bu],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Dt.lFrame=Y();return r.currentTNode=e,r.lView=n,!0}function R(n){const e=Y(),t=n[Ue];Dt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Y(){const n=Dt.lFrame,e=null===n?null:n.child;return null===e?fe(n):e}function fe(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Se(){const n=Dt.lFrame;return Dt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const et=Se;function lt(){const n=Se();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function An(){return Dt.lFrame.selectedIndex}function vs(n){Dt.lFrame.selectedIndex=n}function On(){const n=Dt.lFrame;return Tu(n.tView,n.selectedIndex)}function la(){Dt.lFrame.currentNamespace=rm}function Ah(){!function w0(){Dt.lFrame.currentNamespace=null}()}let Gy=!0;function Au(){return Gy}function po(n){Gy=n}function dm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Su(n,e,t){jH(n,e,3,t)}function hm(n,e,t,r){(3&n[ct])===t&&jH(n,e,t,r)}function WR(n,e){let t=n[ct];(3&t)===e&&(t&=16383,t+=1,n[ct]=t)}function jH(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[hl]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[hl]+=65536),(a<s||-1==s)&&(zae(n,t,e,l),n[hl]=(4294901760&n[hl])+l+2),l++}function zH(n,e){uo(4,n,e);const t=te(null);try{e.call(n)}finally{te(t),uo(5,n,e)}}function zae(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ct]>>14<n[hl]>>16&&(3&n[ct])===e&&(n[ct]+=16384,zH(a,s)):zH(a,s)}const fm=-1;class qy{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const qR={};class Sh{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ih(r);const i=this.injector.get(e,qR,r);return i!==qR||t===qR?i:this.parentInjector.get(e,t,r)}}function KR(n){return n!==fm}function Ky(n){return 32767&n}function Qy(n,e){let t=function qae(n){return n>>16}(n),r=e;for(;t>0;)r=r[bu],t--;return r}let QR=!0;function T0(n){const e=QR;return QR=n,e}const $H=255,WH=5;let Qae=0;const pl={};function A0(n,e){const t=GH(n,e);if(-1!==t)return t;const r=e[Ue];r.firstCreatePass&&(n.injectorIndex=e.length,YR(r.data,n),YR(e,null),YR(r.blueprint,null));const i=S0(n,e),s=n.injectorIndex;if(KR(i)){const o=Ky(i),a=Qy(i,e),l=a[Ue].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function YR(n,e){n.push(0,0,0,0,0,0,0,0,e)}function GH(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function S0(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=JH(i),null===r)return fm;if(t++,i=i[bu],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return fm}function XR(n,e,t){!function Yae(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(nh)&&(r=t[nh]),null==r&&(r=t[nh]=Qae++);const i=r&$H;e.data[n+(i>>WH)]|=1<<i}(n,e,t)}function qH(n,e,t){if(t&Vt.Optional||void 0!==n)return n;dy()}function KH(n,e,t,r){if(t&Vt.Optional&&void 0===r&&(r=null),!(t&(Vt.Self|Vt.Host))){const i=n[Zr],s=Rr(void 0);try{return i?i.get(e,r,t&Vt.Optional):tc(e,r,t&Vt.Optional)}finally{Rr(s)}}return qH(r,0,t)}function QH(n,e,t,r=Vt.Default,i){if(null!==n){if(2048&e[ct]&&!(r&Vt.Self)){const o=function tle(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ct]&&!(512&o[ct]);){const a=YH(s,o,t,r|Vt.Self,pl);if(a!==pl)return a;let l=s.parent;if(!l){const c=o[r0];if(c){const u=c.get(t,pl,r);if(u!==pl)return u}l=JH(o),o=o[bu]}s=l}return i}(n,e,t,r,pl);if(o!==pl)return o}const s=YH(n,e,t,r,pl);if(s!==pl)return s}return KH(e,t,r,i)}function YH(n,e,t,r,i){const s=function Jae(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(nh)?n[nh]:void 0;return"number"==typeof e?e>=0?e&$H:ele:e}(t);if("function"==typeof s){if(!w(e,n,r))return r&Vt.Host?qH(i,0,r):KH(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Vt.Optional)return o;dy()}finally{et()}}else if("number"==typeof s){let o=null,a=GH(n,e),l=fm,c=r&Vt.Host?e[ar][Ri]:null;for((-1===a||r&Vt.SkipSelf)&&(l=-1===a?S0(n,e):e[a+8],l!==fm&&ZH(r,!1)?(o=e[Ue],a=Ky(l),e=Qy(l,e)):a=-1);-1!==a;){const u=e[Ue];if(XH(s,a,u.data)){const d=Zae(a,e,t,o,r,c);if(d!==pl)return d}l=e[a+8],l!==fm&&ZH(r,e[Ue].data[a+8]===c)&&XH(s,a,e)?(o=u,a=Ky(l),e=Qy(l,e)):a=-1}}return i}function Zae(n,e,t,r,i,s){const o=e[Ue],a=o.data[n+8],u=D0(a,o,t,null==r?uc(a)&&QR:r!=o&&!!(3&a.type),i&Vt.Host&&s===a);return null!==u?Dh(e,o,u,a):pl}function D0(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,m=i?a+u:n.directiveEnd;for(let y=r?a:a+u;y<m;y++){const b=o[y];if(y<l&&t===b||y>=l&&b.type===t)return y}if(i){const y=o[l];if(y&&Mo(y)&&y.type===t)return l}return null}function Dh(n,e,t,r){let i=n[t];const s=e.data;if(function Hae(n){return n instanceof qy}(i)){const o=i;o.resolving&&function uy(n,e){throw e&&e.join(" > "),new K(-200,n)}(function mn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Pt(n)}(s[t]));const a=T0(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Rr(o.injectImpl):null;w(n,r,Vt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function C0(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=tm(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Rr(c),T0(a),o.resolving=!1,et()}}return i}function XH(n,e,t){return!!(t[e+(n>>WH)]&1<<n)}function ZH(n,e){return!(n&Vt.Self||n&Vt.Host&&e)}class Pi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return QH(this._tNode,this._lView,e,ih(r),t)}}function ele(){return new Pi(kn(),Ie())}function $r(n){return io(()=>{const e=n.prototype.constructor,t=e[Ro]||ZR(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ro]||ZR(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ZR(n){return Cp(n)?()=>{const e=ZR(At(n));return e&&e()}:Ma(n)}function JH(n){const e=n[Ue],t=e.type;return 2===t?e.declTNode:1===t?n[Ri]:null}function i4(n,e=null,t=null,r){const i=s4(n,e,t,r);return i.resolveInjectorInitializers(),i}function s4(n,e=null,t=null,r,i=new Set){const s=[t||gn,gR(n)];return r=r||("object"==typeof n?void 0:Xr(n)),new ka(s,e||_u(),r||null,i)}class Sn{static{this.THROW_IF_NOT_FOUND=rh}static{this.NULL=new Up}static create(e,t){if(Array.isArray(e))return i4({name:""},t,e,"");{const r=e.name??"";return i4({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Ne({token:Sn,providedIn:"any",factory:()=>Ae($w)})}static{this.__NG_ELEMENT_ID__=-1}}new ve("").__NG_ELEMENT_ID__=n=>{const e=kn();if(null===e)throw new K(204,!1);if(2&e.type)return e.value;if(n&Vt.Optional)return null;throw new K(204,!1)};function eP(n){return n.ngOriginalError}const a4=!0;let Xy=(()=>{class n{static{this.__NG_ELEMENT_ID__=dle}static{this.__NG_ENV_ID__=t=>t}}return n})();class ule extends Xy{constructor(e){super(),this._lView=e}onDestroy(e){return om(this._lView,e),()=>function Vy(n,e){if(null===n[fl])return;const t=n[fl].indexOf(e);-1!==t&&n[fl].splice(t,1)}(this._lView,e)}}function dle(){return new ule(Ie())}let pc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();const Fn=class hle extends E{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,e0()&&(this.destroyRef=O(Xy,{optional:!0})??void 0,this.pendingTasks=O(pc,{optional:!0})??void 0)}emit(e){const t=te(null);try{super.next(e)}finally{te(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof kt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function R0(...n){}function l4(n){let e,t;function r(){n=R0;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function c4(n){return queueMicrotask(()=>n()),()=>{n=R0}}const tP="isAngularZone",P0=tP+"_ID";let fle=0;class _t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fn(!1),this.onMicrotaskEmpty=new Fn(!1),this.onStable=new Fn(!1),this.onError=new Fn(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=a4}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function gle(n){const e=()=>{!function mle(n){function e(){l4(()=>{n.callbackScheduled=!1,rP(n),n.isCheckStableRunning=!0,nP(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),rP(n))}(n)},t=fle++;n._inner=n._inner.fork({name:"angular",properties:{[tP]:!0,[P0]:t,[P0+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(function _le(n){return h4(n,"__ignore_ng_zone__")}(l))return r.invokeTask(s,o,a,l);try{return u4(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),d4(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return u4(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function yle(n){return h4(n,"__scheduler_tick__")}(l)&&e(),d4(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,rP(n),nP(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(tP)}static assertInAngularZone(){if(!_t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(_t.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,ple,R0,R0);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const ple={};function nP(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rP(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function u4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function d4(n){n._nesting--,nP(n)}class iP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fn,this.onMicrotaskEmpty=new Fn,this.onStable=new Fn,this.onError=new Fn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function h4(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class ca{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&eP(e);for(;t&&eP(t);)t=eP(t);return t||null}}const ble=new ve("",{providedIn:"root",factory:()=>{const n=O(_t),e=O(ca);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Ele(){return gm(kn(),Ie())}function gm(n,e){return new lr(Ui(n,e))}let lr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Ele}}return n})();function p4(n){return n instanceof lr?n.nativeElement:n}function Ile(){return this._results[Symbol.iterator]()}class _m{get changes(){return this._changes??=new Fn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=_m.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Ile)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function Vi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Lp(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Jy(n){return!(128&~n.flags)}const oP=new Map;let Cle=0;function aP(n){oP.delete(n[Eu])}const M0="__ngContext__";function bs(n,e){Hr(e)?(n[M0]=e[Eu],function Ale(n){oP.set(n[Eu],n)}(e)):n[M0]=e}function C4(n){return A4(n[mh])}function T4(n){return A4(n[Po])}function A4(n){for(;null!==n&&!ui(n);)n=n[Po];return n}let cP;const xh=new ve("",{providedIn:"root",factory:()=>Hle}),Hle="ng",k4=new ve(""),Bs=new ve("",{providedIn:"platform",factory:()=>"unknown"}),mc=new ve(""),uP=new ve("",{providedIn:"root",factory:()=>function Du(){if(void 0!==cP)return cP;if(typeof document<"u")return document;throw new K(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let O4=()=>null;function _P(n,e,t=!1){return O4(n,e,t)}const H4=new ve("",{providedIn:"root",factory:()=>!1});class Ph{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yr})`}}function Oo(n){return n instanceof Ph?n.changingThisBreaksApplicationSecurity:n}const _ce=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ns=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ns||{});function Fo(n){const e=function av(){const n=Ie();return n&&n[oa].sanitizer}();return e?e.sanitize(ns.URL,n)||"":function ml(n,e){const t=function lce(n){return n instanceof Ph&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${yr})`)}return t===e}(n,"URL")?Oo(n):function z0(n){return(n=String(n)).match(_ce)?n:"unsafe:"+n}(Pt(n))}const Mce=/^>|^->|<!--|-->|--!>|<!-$/g,Nce=/(<|>)/g,kce="\u200b$1\u200b";function Lo(n){return n instanceof Function?n():n}function Vo(n){return"browser"===(n??O(Sn)).get(Bs)}var xu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(xu||{});let xP;function RP(n,e){return xP(n,e)}function wm(n,e,t,r,i){if(null!=r){let s,o=!1;ui(r)?s=r:Hr(r)&&(o=!0,r=r[qn]);const a=un(r);0===n&&null!==t?null==i?y$(e,t,a):Mh(e,t,a,i||null,!0):1===n&&null!==t?Mh(e,t,a,i||null,!0):2===n?function cv(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function eue(n,e,t,r,i){const s=t[aa];s!==un(t)&&wm(e,n,r,s,i);for(let a=br;a<t.length;a++){const l=t[a];Q0(l[Ue],l,n,e,r,s)}}(e,n,s,t,i)}}function MP(n,e){return n.createComment(function o$(n){return n.replace(Mce,e=>e.replace(Nce,kce))}(e))}function G0(n,e,t){return n.createElement(e,t)}function m$(n,e){e[oa].changeDetectionScheduler?.notify(9),Q0(n,e,e[St],2,null,null)}function g$(n,e){const t=n[wu],r=e[zr];(Hr(r)||e[ar]!==r[zr][ar])&&(n[ct]|=Qp.HasTransplantedViews),null===t?n[wu]=[e]:t.push(e)}function NP(n,e){const t=n[wu],r=t.indexOf(e);t.splice(r,1)}function lv(n,e){if(n.length<=br)return;const t=br+e,r=n[t];if(r){const i=r[lc];null!==i&&i!==n&&NP(i,r),e>0&&(n[t-1][Po]=r[Po]);const s=oh(n,br+e);!function Gce(n,e){m$(n,e),e[qn]=null,e[Ri]=null}(r[Ue],r);const o=s[Oa];null!==o&&o.detachView(s[Ue]),r[zr]=null,r[Po]=null,r[ct]&=-129}return r}function q0(n,e){if(!(256&e[ct])){const t=e[St];t.destroyNode&&Q0(n,e,t,3,null,null),function Kce(n){let e=n[mh];if(!e)return kP(n[Ue],n);for(;e;){let t=null;if(Hr(e))t=e[mh];else{const r=e[br];r&&(t=r)}if(!t){for(;e&&!e[Po]&&e!==n;)Hr(e)&&kP(e[Ue],e),e=e[zr];null===e&&(e=n),Hr(e)&&kP(e[Ue],e),t=e&&e[Po]}e=t}}(e)}}function kP(n,e){if(256&e[ct])return;const t=te(null);try{e[ct]&=-129,e[ct]|=256,e[co]&&Yt(e[co]),function Xce(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof qy)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];uo(4,a,l);try{l.call(a)}finally{uo(5,a,l)}}else{uo(4,i,s);try{s.call(i)}finally{uo(5,i,s)}}}}}(n,e),function Yce(n,e){const t=n.cleanup,r=e[ac];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ac]=null);const i=e[fl];if(null!==i){e[fl]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Ue].type&&e[St].destroy();const r=e[lc];if(null!==r&&ui(e[zr])){r!==e[zr]&&NP(r,e);const i=e[Oa];null!==i&&i.detachView(n)}aP(e)}finally{te(t)}}function OP(n,e,t){return function _$(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[qn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===lo.None||s===lo.Emulated)return null}return Ui(r,t)}}(n,e.parent,t)}function Mh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function y$(n,e,t){n.appendChild(e,t)}function v$(n,e,t,r,i){null!==r?Mh(n,e,t,r,i):y$(n,e,t)}function FP(n,e){return n.parentNode(e)}function b$(n,e,t){return I$(n,e,t)}let LP,I$=function E$(n,e,t){return 40&n.type?Ui(n,t):null};function K0(n,e,t,r){const i=OP(n,r,e),s=e[St],a=b$(r.parent||e[Ri],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)v$(s,i,t[l],a,!1);else v$(s,i,t,a,!1);void 0!==LP&&LP(s,r,e,t,i)}function Nh(n,e){if(null!==e){const t=e.type;if(3&t)return Ui(e,n);if(4&t)return VP(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Nh(n,r);{const i=n[e.index];return ui(i)?VP(-1,i):un(i)}}if(128&t)return Nh(n,e.next);if(32&t)return RP(e,n)()||un(n[e.index]);{const r=C$(n,e);return null!==r?Array.isArray(r)?r[0]:Nh(Fa(n[ar]),r):Nh(n,e.next)}}return null}function C$(n,e){return null!==e?n[ar][Ri].projection[e.projection]:null}function VP(n,e){const t=br+n+1;if(t<e.length){const r=e[t],i=r[Ue].firstChild;if(null!==i)return Nh(r,i)}return e[aa]}function BP(n,e,t,r,i,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],l=t.type;if(o&&0===e&&(a&&bs(un(a),r),t.flags|=2),32&~t.flags)if(8&l)BP(n,e,t.child,r,i,s,!1),wm(e,n,i,a,s);else if(32&l){const c=RP(t,r);let u;for(;u=c();)wm(e,n,i,u,s);wm(e,n,i,a,s)}else 16&l?A$(n,e,r,t,i,s):wm(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Q0(n,e,t,r,i,s){BP(t,r,n.firstChild,e,i,s,!1)}function A$(n,e,t,r,i,s){const o=t[ar],l=o[Ri].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)wm(e,n,i,l[c],s);else{let c=l;const u=o[zr];Jy(r)&&(c.flags|=128),BP(n,e,c,u,i,s,!0)}}function S$(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function D$(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&ch(n,e,r),null!==i&&S$(n,e,i),null!==s&&function nue(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Ot={};function Oe(n=1){x$(Wt(),Ie(),An()+n,!1)}function x$(n,e,t,r){if(!r)if(3&~e[ct]){const s=n.preOrderHooks;null!==s&&hm(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Su(e,s,t)}vs(t)}function Re(n,e=Vt.Default){const t=Ie();return null===t?Ae(n,e):QH(kn(),t,At(n),e)}function P$(n,e,t,r,i,s){const o=te(null);try{let a=null;i&sa.SignalBased&&(a=e[r][ce]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&sa.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):h0(e,a,r,s)}finally{te(o)}}function Y0(n,e,t,r,i,s,o,a,l,c,u){const d=e.blueprint.slice();return d[qn]=i,d[ct]=204|r,(null!==c||n&&2048&n[ct])&&(d[ct]|=2048),sm(d),d[zr]=d[bu]=n,d[Kn]=t,d[oa]=o||n&&n[oa],d[St]=a||n&&n[St],d[Zr]=l||n&&n[Zr]||null,d[Ri]=s,d[Eu]=function Tle(){return Cle++}(),d[_s]=u,d[r0]=c,d[ar]=2==e.type?n[ar]:d,d}function kh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function UP(n,e,t,r,i){const s=lm(),o=cm(),l=n.data[e]=function uue(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return fc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function zR(){return Dt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function wh(){const n=Dt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return fo(s,!0),s}function uv(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function M$(n,e,t,r,i){const s=An(),o=2&r;try{vs(-1),o&&e.length>at&&x$(n,e,at,!1),uo(o?2:0,i),t(r,i)}finally{vs(s),uo(o?3:1,i)}}function jP(n,e,t){if(yh(e)){const r=te(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{te(r)}}}function zP(n,e,t){y0()&&(function _ue(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;uc(t)&&function Cue(n,e,t){const r=Ui(e,n),i=N$(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=X0(n,Y0(n,i,null,o,r,e,null,n[oa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||A0(t,e),bs(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Dh(e,n,a,t);bs(c,e),null!==o&&Tue(0,a-i,c,l,0,o),Mo(l)&&(ys(t.index,e)[Kn]=Dh(e,n,a,t))}}(n,e,t,Ui(t,e)),!(64&~t.flags)&&V$(n,e,t))}function HP(n,e,t=Ui){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function N$(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=$P(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $P(n,e,t,r,i,s,o,a,l,c,u){const d=at+r,m=d+i,y=function iue(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ot);return t}(d,m),b="function"==typeof c?c():c;return y[Ue]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:u}}let k$=()=>null;function O$(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,l=sa.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==i){if(!i.hasOwnProperty(s))continue;c=i[s]}0===n?F$(r,t,c,a,l):F$(r,t,c,a)}return r}function F$(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function go(n,e,t,r,i,s,o,a){const l=Ui(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(QP(n,t,u,r,i),uc(e)&&function fue(n,e){const t=ys(e,n);16&t[ct]||(t[ct]|=64)}(t,e.index)):3&e.type&&(r=function hue(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function WP(n,e,t,r){if(y0()){const i=null===r?null:{"":-1},s=function vue(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Hp(e,o.selectors,!1))if(r||(r=[]),Mo(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),GP(n,e,a.length)}else r.unshift(o),GP(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&L$(n,e,t,o,i,a),i&&function bue(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new K(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=uh(t.mergedAttrs,t.attrs)}function L$(n,e,t,r,i,s){for(let c=0;c<r.length;c++)XR(A0(t,e),n,r[c].type);!function Iue(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=uv(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=uh(t.mergedAttrs,u.hostAttrs),wue(n,t,e,l,u),Eue(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function due(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const d=s[u],m=t?t.get(d):null,b=m?m.outputs:null;l=O$(0,d.inputs,u,l,m?m.inputs:null),c=O$(1,d.outputs,u,c,b);const T=null===l||null===o||vy(e)?null:Aue(l,u,o);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function V$(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function $R(){return Dt.lFrame.currentDirectiveIndex}();try{vs(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];$y(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&yue(l,c)}}finally{vs(-1),$y(o)}}function yue(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function GP(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Eue(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Mo(e)&&(t[""]=n)}}function wue(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ma(i.type)),o=new qy(s,Mo(i),Re);n.blueprint[r]=o,t[r]=o,function mue(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function gue(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,uv(n,t,i.hostVars,Ot),i)}function gl(n,e,t,r,i,s){const o=Ui(n,e);!function qP(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Pt(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[St],o,s,n.value,t,r,i)}function Tue(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)P$(r,t,o[a++],o[a++],o[a++],o[a++])}function Aue(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function B$(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function U$(n,e){const t=n.contentQueries;if(null!==t){const r=te(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];f(t[i]),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function X0(n,e){return n[mh]?n[gh][Po]=e:n[mh]=e,n[gh]=e,e}function KP(n,e,t){f(0);const r=te(null);try{e(n,t)}finally{te(r)}}function j$(n){return n[ac]??=[]}function z$(n){return n.cleanup??=[]}function Z0(n,e){const t=n[Zr],r=t?t.get(ca,null):null;r&&r.handleError(e)}function QP(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=t[s++];P$(n.data[o],e[o],r,a,l,i)}}function Sue(n,e){const t=ys(e,n),r=t[Ue];!function Due(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[qn];null!==i&&null===t[_s]&&(t[_s]=_P(i,t[Zr])),YP(r,t,t[Kn])}function YP(n,e,t){R(e);try{const r=n.viewQuery;null!==r&&KP(1,r,t);const i=n.template;null!==i&&M$(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Oa]?.finishViewCreation(n),n.staticContentQueries&&U$(n,e),n.staticViewQueries&&KP(2,n.viewQuery,t);const s=n.components;null!==s&&function xue(n,e){for(let t=0;t<e.length;t++)Sue(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ct]&=-5,lt()}}function Cm(n,e,t,r){const i=te(null);try{const s=e.tView,l=Y0(n,s,t,4096&n[ct]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[lc]=n[e.index];const u=n[Oa];return null!==u&&(l[Oa]=u.createEmbeddedView(s)),YP(s,l,t),l}finally{te(i)}}function Oh(n,e){return!e||null===e.firstChild||Jy(n)}function Tm(n,e,t,r=!0){const i=e[Ue];if(function Qce(n,e,t,r){const i=br+r,s=t.length;r>0&&(t[i-1][Po]=e),r<s-br?(e[Po]=t[i],Vp(t,br+r,e)):(t.push(e),e[Po]=null),e[zr]=t;const o=e[lc];null!==o&&t!==o&&g$(o,e);const a=e[Oa];null!==a&&a.insertView(n),Ly(e),e[ct]|=128}(i,e,n,t),r){const o=VP(t,n),a=e[St],l=FP(a,n[aa]);null!==l&&function qce(n,e,t,r,i,s){r[qn]=i,r[Ri]=e,Q0(n,r,t,1,i,s)}(i,n[Ri],a,e,l,o)}const s=e[_s];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function dv(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&r.push(un(s)),ui(s)&&W$(s,r);const o=t.type;if(8&o)dv(n,e,t.child,r);else if(32&o){const a=RP(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=C$(e,t);if(Array.isArray(a))r.push(...a);else{const l=Fa(e[ar]);dv(l[Ue],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function W$(n,e){for(let t=br;t<n.length;t++){const r=n[t],i=r[Ue].firstChild;null!==i&&dv(r[Ue],r,i,e)}n[aa]!==n[qn]&&e.push(n[aa])}let G$=[];const Nue={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{hc(n.lView)},consumerOnSignalRead(){this.lView[co]=this}},Oue={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Fa(n.lView);for(;e&&!q$(e[Ue]);)e=Fa(e);e&&m0(e)},consumerOnSignalRead(){this.lView[co]=this}};function q$(n){return 2!==n.type}const Fue=100;function J0(n,e=!0,t=0){const r=n[oa],i=r.rendererFactory;i.begin?.();try{!function Lue(n,e){const t=Th();try{zy(!0),ZP(n,e);let r=0;for(;Ih(n);){if(r===Fue)throw new K(103,!1);r++,ZP(n,1)}}finally{zy(t)}}(n,t)}catch(o){throw e&&Z0(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function Vue(n,e,t,r){const i=e[ct];if(!(256&~i))return;e[oa].inlineEffectRunner?.flush(),R(e);let a=!0,l=null,c=null;q$(n)?(c=function Rue(n){return n[co]??function Pue(n){const e=G$.pop()??Object.create(Nue);return e.lView=n,e}(n)}(e),l=Qe(c)):null===function we(){return Z}()?(a=!1,c=function kue(n){const e=n[co]??Object.create(Oue);return e.lView=n,e}(e),l=Qe(c)):e[co]&&(Yt(e[co]),e[co]=null);try{sm(e),function I0(n){return Dt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&M$(n,e,t,2,r);const u=!(3&~i);if(u){const y=n.preOrderCheckHooks;null!==y&&Su(e,y,null)}else{const y=n.preOrderHooks;null!==y&&hm(e,y,0,null),WR(e,0)}if(function Bue(n){for(let e=C4(n);null!==e;e=T4(e)){if(!(e[ct]&Qp.HasTransplantedViews))continue;const t=e[wu];for(let r=0;r<t.length;r++)m0(t[r])}}(e),Q$(e,0),null!==n.contentQueries&&U$(n,e),u){const y=n.contentCheckHooks;null!==y&&Su(e,y)}else{const y=n.contentHooks;null!==y&&hm(e,y,1),WR(e,1)}!function rue(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)vs(~i);else{const s=i,o=t[++r],a=t[++r];HR(o,s),a(2,e[s])}}}finally{vs(-1)}}(n,e);const d=n.components;null!==d&&X$(e,d,0);const m=n.viewQuery;if(null!==m&&KP(2,m,r),u){const y=n.viewCheckHooks;null!==y&&Su(e,y)}else{const y=n.viewHooks;null!==y&&hm(e,y,2),WR(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[_h]){for(const y of e[_h])y();e[_h]=null}e[ct]&=-73}catch(u){throw hc(e),u}finally{null!==c&&(Ye(c,l),a&&function Mue(n){n.lView[co]!==n&&(n.lView=null,G$.push(n))}(c)),lt()}}function Q$(n,e){for(let t=C4(n);null!==t;t=T4(t))for(let r=br;r<t.length;r++)Y$(t[r],e)}function Uue(n,e,t){Y$(ys(e,n),t)}function Y$(n,e){Fy(n)&&ZP(n,e)}function ZP(n,e){const r=n[Ue],i=n[ct],s=n[co];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!Ht(s)),o||=!1,s&&(s.dirty=!1),n[ct]&=-9217,o)Vue(r,n,r.template,n[Kn]);else if(8192&i){Q$(n,1);const a=r.components;null!==a&&X$(n,a,1)}}function X$(n,e,t){for(let r=0;r<e.length;r++)Uue(n,e[r],t)}function hv(n,e){const t=Th()?64:1088;for(n[oa].changeDetectionScheduler?.notify(e);n;){n[ct]|=t;const r=Fa(n);if(No(n)&&!r)return n;n=r}return null}class fv{get rootNodes(){const e=this._lView,t=e[Ue];return dv(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kn]}set context(e){this._lView[Kn]=e}get destroyed(){return!(256&~this._lView[ct])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[zr];if(ui(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(lv(e,r),oh(t,r))}this._attachedToViewContainer=!1}q0(this._lView[Ue],this._lView)}onDestroy(e){om(this._lView,e)}markForCheck(){hv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ct]&=-129}reattach(){Ly(this._lView),this._lView[ct]|=128}detectChanges(){this._lView[ct]|=1024,J0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=No(this._lView),t=this._lView[lc];null!==t&&!e&&NP(t,this._lView),m$(this._lView[Ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;const t=No(this._lView),r=this._lView[lc];null!==r&&!t&&g$(r,this._lView),Ly(this._lView)}}let Ba=(()=>{class n{static{this.__NG_ELEMENT_ID__=Hue}}return n})();const jue=Ba,zue=class extends jue{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Cm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new fv(i)}};function Hue(){return eC(kn(),Ie())}function eC(n,e){return 4&n.type?new zue(e,n,gm(n,e)):null}let yW=()=>null;function Lh(n,e){return yW(n,e)}class Sm{}const Ev=new ve("",{providedIn:"root",factory:()=>!1}),vW=new ve(""),cM=new ve("");class Ode{}class bW{}class Lde{resolveComponentFactory(e){throw function Fde(n){const e=Error(`No component factory found for ${Xr(n)}.`);return e.ngComponent=n,e}(e)}}class oC{static{this.NULL=new Lde}}class Vh{}let Ua=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Vde(){const n=Ie(),t=ys(kn().index,n);return(Hr(t)?t:n)[St]}()}}return n})(),Bde=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>null})}}return n})();function lC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Zl(i,a):2==s&&(r=Zl(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class CW extends oC{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Kt(e);return new Cv(t,this.ngModule)}}function TW(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;t.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:sa.None)&sa.SignalBased)}:{propName:o,templateName:r})}return t}class Cv extends bW{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=TW(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return TW(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function dR(n){return n.map(wy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=te(null);try{let o=(i=i||this.ngModule)instanceof xi?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Sh(e,o):e,l=a.get(Vh,null);if(null===l)throw new K(407,!1);const d={rendererFactory:l,sanitizer:a.get(Bde,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(Sm,null)},m=l.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?function sue(n,e,t,r){const s=r.get(H4,!1)||t===lo.ShadowDom,o=n.selectRootElement(e,s);return function oue(n){k$(n)}(o),o}(m,r,this.componentDef.encapsulation,a):G0(m,y,function zde(n){const e=n.toLowerCase();return"svg"===e?rm:"math"===e?"math":null}(y));let T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let P=null;null!==b&&(P=_P(b,a,!0));const B=$P(0,null,null,1,0,null,null,null,null,null,null),V=Y0(null,B,null,T,null,null,d,m,a,null,P);R(V);let Q,be,Be=null;try{const je=this.componentDef;let H,L=null;je.findHostDirectiveDefs?(H=[],L=new Map,je.findHostDirectiveDefs(je,H,L),H.push(je)):H=[je];const W=function $de(n,e){const t=n[Ue],r=at;return n[r]=e,kh(t,r,2,"#host",null)}(V,b);Be=function Wde(n,e,t,r,i,s,o){const a=i[Ue];!function Gde(n,e,t,r){for(const i of n)e.mergedAttrs=uh(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(lC(e,e.mergedAttrs,!0),null!==t&&D$(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=_P(e,i[Zr]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=Y0(i,N$(t),null,u,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&GP(a,n,r.length-1),X0(i,d),i[n.index]=d}(W,b,je,H,V,d,m),be=Tu(B,at),b&&function Kde(n,e,t,r){if(r)ch(n,t,["ng-version","18.2.13"]);else{const{attrs:i,classes:s}=function Cy(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Vs(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&ch(n,t,i),s&&s.length>0&&S$(n,t,s.join(" "))}}(m,je,b,r),void 0!==t&&function Qde(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(be,this.ngContentSelectors,t),Q=function qde(n,e,t,r,i,s){const o=kn(),a=i[Ue],l=Ui(o,i);L$(a,i,o,t,null,r);for(let u=0;u<t.length;u++)bs(Dh(i,a,o.directiveStart+u,o),i);V$(a,i,o),l&&bs(l,i);const c=Dh(i,a,o.directiveStart+o.componentOffset,o);if(n[Kn]=i[Kn]=c,null!==s)for(const u of s)u(c,e);return jP(a,o,i),c}(Be,je,H,L,V,[Yde]),YP(B,V,null)}catch(je){throw null!==Be&&aP(Be),aP(V),je}finally{lt()}return new Hde(this.componentType,Q,gm(be,V),V,be)}finally{te(s)}}}class Hde extends Ode{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new fv(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;QP(s[Ue],s,i,e,t),this.previousInputValues.set(e,t),hv(ys(this._tNode.index,s),1)}}get injector(){return new Pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Yde(){const n=kn();dm(Ie()[Ue],n)}let Bo=(()=>{class n{static{this.__NG_ELEMENT_ID__=Xde}}return n})();function Xde(){return DW(kn(),Ie())}const Zde=Bo,AW=class extends Zde{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return gm(this._hostTNode,this._hostLView)}get injector(){return new Pi(this._hostTNode,this._hostLView)}get parentInjector(){const e=S0(this._hostTNode,this._hostLView);if(KR(e)){const t=Qy(e,this._hostLView),r=Ky(e);return new Pi(t[Ue].data[r+8],t)}return new Pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=SW(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-br}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=Lh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Oh(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function vu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const l=o?e:new Cv(Kt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const T=(o?c:this.parentInjector).get(xi,null);T&&(s=T)}const u=Kt(l.componentType??{}),d=Lh(this._lContainer,u?.id??null),y=l.create(c,i,d?.firstChild??null,s);return this.insertImpl(y.hostView,a,Oh(this._hostTNode,d)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function OR(n){return ui(n[zr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[zr],c=new AW(l,l[Ri],l[zr]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return Tm(o,i,s,r),e.attachToViewContainerRef(),Vp(hM(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=SW(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=lv(this._lContainer,t);r&&(oh(hM(this._lContainer),t),q0(r[Ue],r))}detach(e){const t=this._adjustIndex(e,-1),r=lv(this._lContainer,t);return r&&null!=oh(hM(this._lContainer),t)?new fv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function SW(n){return n[8]}function hM(n){return n[8]||(n[8]=[])}function DW(n,e){let t;const r=e[n.index];return ui(r)?t=r:(t=B$(r,e,null,n),e[n.index]=t,X0(e,t)),xW(t,e,n,r),new AW(t,n,e)}let xW=function PW(n,e,t,r){if(n[aa])return;let i;i=8&t.type?un(r):function Jde(n,e){const t=n[St],r=t.createComment(""),i=Ui(e,n);return Mh(t,FP(t,i),r,function Zce(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[aa]=i},fM=()=>!1;class pM{constructor(e){this.queryList=e,this.matches=null}clone(){return new pM(this.queryList)}setDirty(){this.queryList.setDirty()}}class mM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new mM(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==bM(e,t).matches&&this.queries[t].setDirty()}}class MW{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function ahe(n){return n.split(",").map(e=>e.trim())}(e):e}}class gM{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new gM(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class _M{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new _M(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,rhe(t,s)),this.matchTNodeWithReadOption(e,t,D0(t,e,s,!1,!1))}else r===Ba?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,D0(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===lr||i===Bo||i===Ba&&4&t.type)this.addMatch(t.index,-2);else{const s=D0(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function rhe(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function she(n,e,t,r){return-1===t?function ihe(n,e){return 11&n.type?gm(n,e):4&n.type?eC(n,e):null}(e,n):-2===t?function ohe(n,e,t){return t===lr?gm(e,n):t===Ba?eC(e,n):t===Bo?DW(e,n):void 0}(n,e,r):Dh(n,n[Ue],t,e)}function NW(n,e,t,r){const i=e[Oa].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:she(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function yM(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=NW(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=br;d<u.length;d++){const m=u[d];m[lc]===m[zr]&&yM(m[Ue],m,c,r)}if(null!==u[wu]){const d=u[wu];for(let m=0;m<d.length;m++){const y=d[m];yM(y[Ue],y,c,r)}}}}}return r}function kW(n,e,t){const r=new _m(!(4&~t));return function cue(n,e,t,r){const i=j$(e);i.push(t),n.firstCreatePass&&z$(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[Oa]??=new mM).queries.push(new pM(r))-1}function LW(n,e,t){null===n.queries&&(n.queries=new gM),n.queries.track(new _M(e,t))}function bM(n,e){return n.queries.getByIndex(e)}function VW(n,e){const t=n[Ue],r=bM(t,e);return r.crossesNgTemplate?yM(t,n,e,[]):NW(t,n,r,e)}const BW=new Set;function Us(n){BW.has(n)||(BW.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Tv(n){return"function"==typeof n&&void 0!==n[ce]}function Bh(n,e){Us("NgSignals");const t=function Br(n){const e=Object.create(pe);e.value=n;const t=()=>($(e),e.value);return t[ce]=e,t}(n),r=t[ce];return e?.equal&&(r.equal=e.equal),t.set=i=>se(r,i),t.update=i=>function ae(n,e){Je()||Cn(),se(n,e(n.value))}(r,i),t.asReadonly=UW.bind(t),t}function UW(){const n=this[ce];if(void 0===n.readonlyFn){const e=()=>this();e[ce]=n,n.readonlyFn=e}return n.readonlyFn}function jW(n){return Tv(n)&&"function"==typeof n.set}function _n(n){let e=function ZW(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Mo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=uC(n.inputs),o.inputTransforms=uC(n.inputTransforms),o.declaredInputs=uC(n.declaredInputs),o.outputs=uC(n.outputs);const a=i.hostBindings;a&&Ihe(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&bhe(n,l),c&&Ehe(n,c),yhe(n,i),vr(n.outputs,i.outputs),Mo(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===_n&&(t=!1)}}e=Object.getPrototypeOf(e)}!function vhe(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uh(i.hostAttrs,t=uh(t,i.hostAttrs))}}(r)}function yhe(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function uC(n){return n===oo?{}:n===gn?[]:n}function bhe(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Ehe(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Ihe(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function JW(n){const e=t=>{const r=Array.isArray(n);null===t.hostDirectives?(t.findHostDirectiveDefs=e3,t.hostDirectives=r?n.map(IM):[n]):r?t.hostDirectives.unshift(...n.map(IM)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function e3(n,e,t){if(null!==n.hostDirectives)for(const r of n.hostDirectives)if("function"==typeof r){const i=r();for(const s of i)t3(IM(s),e,t)}else t3(r,e,t)}function t3(n,e,t){const r=ci(n.directive);(function Ahe(n,e){for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=n[t])})(r.declaredInputs,n.inputs),e3(r,e,t),t.set(r,n),e.push(r)}function IM(n){return"function"==typeof n?{directive:At(n),inputs:oo,outputs:oo}:{directive:At(n.directive),inputs:n3(n.inputs),outputs:n3(n.outputs)}}function n3(n){if(void 0===n||0===n.length)return oo;const e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function Uh(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class yc{}class i3{}class wM extends yc{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new CW(this);const s=Bi(e);this._bootstrapComponents=Lo(s.bootstrap),this._r3Injector=s4(e,t,[{provide:yc,useValue:this},{provide:oC,useValue:this.componentFactoryResolver},...r],Xr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class CM extends i3{constructor(e){super(),this.moduleType=e}create(e){return new wM(this.moduleType,e,[])}}class s3 extends yc{constructor(e){super(),this.componentFactoryResolver=new CW(this),this.instance=null;const t=new ka([...e.providers,{provide:yc,useValue:this},{provide:oC,useValue:this.componentFactoryResolver}],e.parent||_u(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function dC(n,e,t=null){return new s3({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function hC(n){return!!TM(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function TM(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function _l(n,e,t){return n[e]=t}function di(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function jh(n,e,t,r){const i=di(n,e,t);return di(n,e+1,r)||i}function Dv(n,e,t,r,i,s,o,a,l,c){const u=t+at,d=e.firstCreatePass?function Nhe(n,e,t,r,i,s,o,a,l){const c=e.consts,u=kh(e,n,4,o||null,a||null);WP(e,t,u,ho(c,l)),dm(e,u);const d=u.tView=$P(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,e,n,r,i,s,o,a,l):e.data[u];fo(d,!1);const m=o3(e,n,d,t);Au()&&K0(e,n,m,d),bs(m,n);const y=B$(m,n,m,d);return n[u]=y,X0(n,y),function RW(n,e,t){return fM(n,e,t)}(y,d,n),Cu(d)&&zP(e,n,d),null!=l&&HP(n,d,c),d}function Ut(n,e,t,r,i,s,o,a){const l=Ie(),c=Wt();return Dv(l,c,n,e,t,r,i,ho(c.consts,s),o,a),Ut}let o3=function a3(n,e,t,r){return po(!0),e[St].createComment("")};var Pm=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Pm||{});let f3=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();class Pv{constructor(){this.ngZone=O(_t),this.scheduler=O(Sm),this.errorHandler=O(ca,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Pm.EarlyRead,Pm.Write,Pm.MixedReadWrite,Pm.Read]}execute(){this.executing=!0;for(const e of Pv.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Ne({token:Pv,providedIn:"root",factory:()=>new Pv})}}class Lhe{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function Mu(n,e){!e?.injector&&Pr();const t=e?.injector??O(Sn);return Vo(t)?(Us("NgAfterNextRender"),m3(n,t,e,!0)):g3}function m3(n,e,t,r){const i=e.get(f3);i.impl??=e.get(Pv);const s=t?.phase??Pm.MixedReadWrite,o=!0!==t?.manualCleanup?e.get(Xy):null,a=new Lhe(i.impl,function Vhe(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),r,o);return i.impl.register(a),a}const g3={destroy(){}};function Jr(n,e,t,r){const i=Ie();return di(i,ko(),e)&&(Wt(),gl(On(),i,n,e,t,r)),Jr}function Vm(n,e,t,r){return di(n,ko(),t)?e+Pt(t)+r:Ot}function vC(n,e){return n<<17|e<<2}function ku(n){return n>>17&32767}function FM(n){return 2|n}function Hh(n){return(131068&n)>>2}function LM(n,e){return-131069&n|e<<2}function VM(n){return 1|n}function z3(n,e,t,r){const i=n[t+1],s=null===e;let o=r?ku(i):Hh(i),a=!1;for(;0!==o&&(!1===a||s);){const c=n[o+1];bfe(n[o],e)&&(a=!0,n[o+1]=r?VM(c):FM(c)),o=r?ku(c):Hh(c)}a&&(n[t+1]=r?FM(i):VM(i))}function bfe(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&cl(n,e)>=0}const Mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function H3(n){return n.substring(Mi.key,Mi.keyEnd)}function $3(n,e){const t=Mi.textEnd;return t===e?-1:(e=Mi.keyEnd=function Cfe(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Mi.key=e,t),Gm(n,e,t))}function Gm(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function rt(n,e,t){const r=Ie();return di(r,ko(),e)&&go(Wt(),On(),r,n,e,r[St],t,!1),rt}function BM(n,e,t,r,i){const o=i?"class":"style";QP(n,t,e.inputs[o],o,r)}function Nv(n,e,t){return ja(n,e,t,!1),Nv}function Es(n,e){return ja(n,e,null,!0),Es}function bC(n){za(Nfe,vl,n,!0)}function vl(n,e){for(let t=function Ife(n){return function G3(n){Mi.key=0,Mi.keyEnd=0,Mi.value=0,Mi.valueEnd=0,Mi.textEnd=n.length}(n),$3(n,Gm(n,0,Mi.textEnd))}(e);t>=0;t=$3(e,t))Ai(n,H3(e),!0)}function ja(n,e,t,r){const i=Ie(),s=Wt(),o=Va(2);s.firstUpdatePass&&Y3(s,n,o,r),e!==Ot&&di(i,o,e)&&Z3(s,s.data[An()],i,i[St],n,i[o+1]=function Ofe(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Xr(Oo(n)))),n}(e,t),r,o)}function za(n,e,t,r){const i=Wt(),s=Va(2);i.firstUpdatePass&&Y3(i,null,s,r);const o=Ie();if(t!==Ot&&di(o,s,t)){const a=i.data[An()];if(eG(a,r)&&!Q3(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Zl(l,t||"")),BM(i,a,o,t,r)}else!function kfe(n,e,t,r,i,s,o,a){i===Ot&&(i=gn);let l=0,c=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const m=l<i.length?i[l+1]:void 0,y=c<s.length?s[c+1]:void 0;let T,b=null;u===d?(l+=2,c+=2,m!==y&&(b=d,T=y)):null===d||null!==u&&u<d?(l+=2,b=u):(c+=2,b=d,T=y),null!==b&&Z3(n,e,t,r,b,T,o,a),u=l<i.length?i[l]:null,d=c<s.length?s[c]:null}}(i,a,o,o[St],o[s+1],o[s+1]=function Mfe(n,e,t){if(null==t||""===t)return gn;const r=[],i=Oo(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}function Q3(n,e){return e>=n.expandoStartIndex}function Y3(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[An()],o=Q3(n,t);eG(s,r)&&null===e&&!o&&(e=!1),e=function Dfe(n,e,t,r){const i=function g(n){const e=Dt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=kv(t=UM(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=UM(i,n,e,t,r),null===s){let l=function xfe(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Hh(r))return n[ku(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=UM(null,n,e,l[1],r),l=kv(l,e.attrs,r),function Rfe(n,e,t,r){n[ku(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function Pfe(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=kv(r,n[s].hostAttrs,t);return kv(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function yfe(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ku(o),l=Hh(o);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||cl(t,u)>0)&&(c=!0)):u=t,i)if(0!==l){const m=ku(n[a+1]);n[r+1]=vC(m,a),0!==m&&(n[m+1]=LM(n[m+1],r)),n[a+1]=function gfe(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=vC(a,0),0!==a&&(n[a+1]=LM(n[a+1],r)),a=r;else n[r+1]=vC(l,0),0===a?a=r:n[l+1]=LM(n[l+1],r),l=r;c&&(n[r+1]=FM(n[r+1])),z3(n,u,r,!0),z3(n,u,r,!1),function vfe(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&cl(s,e)>=0&&(t[r+1]=VM(t[r+1]))}(e,u,n,r,s),o=vC(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function UM(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=kv(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function kv(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ai(n,o,!!t||e[++s]))}return void 0===n?null:n}function Nfe(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Ai(n,r,t)}function Z3(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function _fe(n){return!(1&~n)}(c)?J3(l,e,t,i,Hh(c),o):void 0;EC(u)||(EC(s)||function mfe(n){return!(2&~n)}(c)&&(s=J3(l,null,t,i,a,o)),function tue(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:xu.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=xu.Important),n.setStyle(t,r,i,s))}}(r,o,Eh(An(),t),i,s))}function J3(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let m=t[i+1];m===Ot&&(m=d?gn:void 0);let y=d?ah(m,r):u===r?m:void 0;if(c&&!EC(y)&&(y=ah(l,r)),EC(y)&&(a=y,o))return a;const b=n[i+1];i=o?ku(b):Hh(b)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=ah(l,r))}return a}function EC(n){return void 0!==n}function eG(n,e){return!!(n.flags&(e?8:16))}function jM(n,e,t){za(Ai,vl,Vm(Ie(),n,e,t),!0)}function IC(n,e){Us("NgControlFlow");const t=Ie(),r=ko(),i=t[r]!==Ot?t[r]:-1,s=-1!==i?wC(t,at+i):void 0;if(di(t,r,n)){const a=te(null);try{if(void 0!==s&&function XP(n,e){const t=lv(n,e);return void 0!==t&&q0(t[Ue],t),t}(s,0),-1!==n){const l=at+n,c=wC(t,l),u=function $M(n,e){return Tu(n,e)}(t[Ue],l),d=Lh(c,u.tView.ssrId);Tm(c,Cm(t,u,e,{dehydratedView:d}),0,Oh(u,d))}}finally{te(a)}}else if(void 0!==s){const a=function $$(n,e){const t=br+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Kn]=e)}}function wC(n,e){return n[e]}function De(n,e,t,r){const i=Ie(),s=Wt(),o=at+n,a=i[St],l=s.firstCreatePass?function npe(n,e,t,r,i,s){const o=e.consts,l=kh(e,n,2,r,ho(o,i));return WP(e,t,l,ho(o,s)),null!==l.attrs&&lC(l,l.attrs,!1),null!==l.mergedAttrs&&lC(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=iG(s,i,l,a,e,n);i[o]=c;const u=Cu(l);return fo(l,!0),D$(a,c,l),!function xm(n){return!(32&~n.flags)}(l)&&Au()&&K0(s,i,c,l),0===function Uy(){return Dt.lFrame.elementDepthCount}()&&bs(c,i),function FR(){Dt.lFrame.elementDepthCount++}(),u&&(zP(s,i,l),jP(s,l,i)),null!==r&&HP(i,l),De}function Me(){let n=kn();cm()?Ch():(n=n.parent,fo(n,!1));const e=n;(function VR(n){return Dt.skipHydrationRootTNode===n})(e)&&function jR(){Dt.skipHydrationRootTNode=null}(),function LR(){Dt.lFrame.elementDepthCount--}();const t=Wt();return t.firstCreatePass&&(dm(t,n),yh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Wae(n){return!!(8&n.flags)}(e)&&BM(t,e,Ie(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Gae(n){return!!(16&n.flags)}(e)&&BM(t,e,Ie(),e.stylesWithoutHost,!1),Me}function ln(n,e,t,r){return De(n,e,t,r),Me(),ln}let iG=(n,e,t,r,i,s)=>(po(!0),G0(r,i,function um(){return Dt.lFrame.currentNamespace}()));function Ha(n,e,t){const r=Ie(),i=Wt(),s=n+at,o=i.firstCreatePass?function spe(n,e,t,r,i){const s=e.consts,o=ho(s,r),a=kh(e,n,8,"ng-container",o);return null!==o&&lC(a,o,!0),WP(e,t,a,ho(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];fo(o,!0);const a=sG(i,r,o,n);return r[s]=a,Au()&&K0(i,r,a,o),bs(a,r),Cu(o)&&(zP(i,r,o),jP(i,o,r)),null!=t&&HP(r,o),Ha}function $a(){let n=kn();const e=Wt();return cm()?Ch():(n=n.parent,fo(n,!1)),e.firstCreatePass&&(dm(e,n),yh(n)&&e.queries.elementEnd(n)),$a}function Ov(n,e,t){return Ha(n,e,t),$a(),Ov}let sG=(n,e,t,r)=>(po(!0),MP(e[St],""));function vc(){return Ie()}function Fv(n,e,t){const r=Ie();return di(r,ko(),e)&&go(Wt(),On(),r,n,e,r[St],t,!0),Fv}const CC="en-US";let cG=CC,SG=(n,e,t)=>{};function Dn(n,e,t,r){const i=Ie(),s=Wt(),o=kn();return qM(s,i,i[St],o,n,e,r),Dn}function qM(n,e,t,r,i,s,o){const a=Cu(r),c=n.firstCreatePass&&z$(n),u=e[Kn],d=j$(e);let m=!0;if(3&r.type||o){const T=Ui(r,e),P=o?o(T):T,B=d.length,V=o?be=>o(un(be[r.index])):r.index;let Q=null;if(!o&&a&&(Q=function Zpe(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ac],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,m=!1;else{s=PG(r,e,u,s),SG(T,i,s);const be=t.listen(P,i,s);d.push(s,be),c&&c.push(i,V,B,B+1)}}else s=PG(r,e,u,s);const y=r.outputs;let b;if(m&&null!==y&&(b=y[i])){const T=b.length;if(T)for(let P=0;P<T;P+=2){const Be=e[b[P]][b[P+1]].subscribe(s),je=d.length;d.push(s,Be),c&&c.push(i,r.index,je,-(je+1))}}}function RG(n,e,t,r){const i=te(null);try{return uo(6,e,t),!1!==t(r)}catch(s){return Z0(n,s),!1}finally{uo(7,e,t),te(i)}}function PG(n,e,t,r){return function i(s){if(s===Function)return r;hv(n.componentOffset>-1?ys(n.index,e):e,5);let a=RG(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)a=RG(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function gt(n=1){return function Jt(n){return(Dt.lFrame.contextLView=function g0(n,e){for(;n>0;)e=e[bu],n--;return e}(n,Dt.lFrame.contextLView))[Kn]}(n)}function Jpe(n,e){let t=null;const r=function cR(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Hp(n,s,!0):Iy(r,s))return i}else t=i}return t}function Wh(n){const e=Ie()[ar][Ri];if(!e.projection){const r=e.projection=function mu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){if(128!==s.type){const o=n?Jpe(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function da(n,e=0,t,r,i,s){const o=Ie(),a=Wt(),l=r?n+1:null;null!==l&&Dv(o,a,l,r,i,s,null,t);const c=kh(a,at+n,16,null,t||null);null===c.projection&&(c.projection=e),Ch();const d=!o[_s]||fc();null===o[ar][Ri].projection[c.projection]&&null!==l?function eme(n,e,t){const r=at+t,i=e.data[r],s=n[r],o=Lh(s,i.tView.ssrId);Tm(s,Cm(n,i,void 0,{dehydratedView:o}),0,Oh(i,o))}(o,a,l):d&&32&~c.flags&&function Jce(n,e,t){A$(e[St],0,e,t,OP(n,t,e),b$(t.parent||e[Ri],t,e))}(a,o,c)}function Km(n,e,t){return zv(n,"",e,"",t),Km}function zv(n,e,t,r,i){const s=Ie(),o=Vm(s,e,t,r);return o!==Ot&&go(Wt(),On(),s,n,o,s[St],i,!1),zv}function DC(n,e,t,r){!function FW(n,e,t,r){const i=Wt();if(i.firstCreatePass){const s=kn();LW(i,new MW(e,t,r),s.index),function lhe(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return kW(i,Ie(),t)}(n,e,t,r)}function Qm(n,e,t){!function OW(n,e,t){const r=Wt();return r.firstCreatePass&&(LW(r,new MW(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),kW(r,Ie(),e)}(n,e,t)}function bc(n){const e=Ie(),t=Wt(),r=h();f(r+1);const i=bM(t,r);if(n.dirty&&function Oy(n){return!(4&~n[ct])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=VW(e,r);n.reset(s,p4),n.notifyOnChanges()}return!0}return!1}function Ec(){return function vM(n,e){return n[Oa].queries[e].queryList}(Ie(),h())}function QM(n){return dc(function b0(){return Dt.lFrame.contextLView}(),at+n)}function ut(n,e=""){const t=Ie(),r=Wt(),i=n+at,s=r.firstCreatePass?kh(r,i,1,e,null):r.data[i],o=QG(r,t,s,e,n);t[i]=o,Au()&&K0(r,t,o,s),fo(s,!1)}let QG=(n,e,t,r,i)=>(po(!0),function PP(n,e){return n.createText(e)}(e[St],r));function bl(n){return Qn("",n,""),bl}function Qn(n,e,t){const r=Ie(),i=Vm(r,n,e,t);return i!==Ot&&function _c(n,e,t){const r=Eh(e,n);!function p$(n,e,t){n.setValue(e,t)}(n[St],r,t)}(r,An(),i),Qn}function YM(n,e,t){jW(e)&&(e=e());const r=Ie();return di(r,ko(),e)&&go(Wt(),On(),r,n,e,r[St],t,!1),YM}function XM(n,e){const t=Ie(),r=Wt(),i=kn();return qM(r,t,t[St],i,n,e),XM}function ZM(n,e,t,r,i){if(n=At(n),Array.isArray(n))for(let s=0;s<n.length;s++)ZM(n[s],e,t,r,i);else{const s=Wt(),o=Ie(),a=kn();let l=sc(n)?n:At(n.provide);const c=IR(n),u=1048575&a.providerIndexes,d=a.directiveStart,m=a.providerIndexes>>20;if(sc(n)||!n.multi){const y=new qy(c,i,Re),b=eN(l,e,i?u:u+m,d);-1===b?(XR(A0(a,o),s,l),JM(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[b]=y,o[b]=y)}else{const y=eN(l,e,u+m,d),b=eN(l,e,u,u+m),P=b>=0&&t[b];if(i&&!P||!i&&!(y>=0&&t[y])){XR(A0(a,o),s,l);const B=function bme(n,e,t,r,i){const s=new qy(n,t,Re);return s.multi=[],s.index=e,s.componentProviders=0,a5(s,i,r&&!t),s}(i?vme:yme,t.length,i,r,c);!i&&P&&(t[b].providerFactory=B),JM(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),o.push(B)}else JM(s,n,y>-1?y:b,a5(t[i?b:y],c,!i&&r));!i&&r&&P&&t[b].componentProviders++}}}function JM(n,e,t,r){const i=sc(e),s=function yR(n){return!!n.useClass}(e);if(i||s){const l=(s?At(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function a5(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function eN(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function yme(n,e,t,r){return tN(this.multi,[])}function vme(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Dh(t,t[Ue],this.providerFactory.index,r);s=a.slice(0,o),tN(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],tN(i,s);return s}function tN(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ur(n,e=[]){return t=>{t.providersResolver=(r,i)=>function _me(n,e,t){const r=Wt();if(r.firstCreatePass){const i=Mo(n);ZM(t,r.data,r.blueprint,i,!0),ZM(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let Eme=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Yw(0,t.type),i=r.length>0?dC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ne({token:n,providedIn:"environment",factory:()=>new n(Ae(xi))})}}return n})();function Is(n){Us("NgStandalone"),n.getStandaloneInjector=e=>e.get(Eme).getOrCreateStandaloneInjector(n)}function nN(n,e,t,r){return u5(Ie(),Hi(),n,e,t,r)}function Hv(n,e){const t=n[e];return t===Ot?void 0:t}function u5(n,e,t,r,i,s){const o=e+t;return di(n,o,i)?_l(n,o+1,s?r.call(s,i):r(i)):Hv(n,o+1)}function h5(n,e,t,r,i,s,o,a){const l=e+t;return function fC(n,e,t,r,i){const s=jh(n,e,t,r);return di(n,e+2,i)||s}(n,l,i,s,o)?_l(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):Hv(n,l+3)}function ha(n,e){const t=Wt();let r;const i=n+at;t.firstCreatePass?(r=function kme(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ma(r.type)),a=Rr(Re);try{const l=T0(!1),c=s();return T0(l),function KM(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Ie(),i,c),c}finally{Rr(a)}}function Gh(n,e,t){const r=n+at,i=Ie(),s=dc(i,r);return $v(i,r)?u5(i,Hi(),e,s.transform,t,s):s.transform(t)}function PC(n,e,t,r){const i=n+at,s=Ie(),o=dc(s,i);return $v(s,i)?function d5(n,e,t,r,i,s,o){const a=e+t;return jh(n,a,i,s)?_l(n,a+2,o?r.call(o,i,s):r(i,s)):Hv(n,a+2)}(s,Hi(),e,o.transform,t,r,o):o.transform(t,r)}function rN(n,e,t,r,i){const s=n+at,o=Ie(),a=dc(o,s);return $v(o,s)?h5(o,Hi(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function $v(n,e){return n[Ue].data[e].pure}function m5(n,e){return eC(n,e)}class qh{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const P5=new qh("18.2.13");let M5=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const L5=new ve(""),kC=new ve("");let dN,cN=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,dN||(function xge(n){dN=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(Ae(_t),Ae(uN),Ae(kC))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),uN=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return dN?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function qv(n){return!!n&&"function"==typeof n.then}function V5(n){return!!n&&"function"==typeof n.subscribe}const OC=new ve("");let B5=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=O(OC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(qv(s))t.push(s);else if(V5(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const FC=new ve("");function j5(n,e){return Array.isArray(e)?e.reduce(j5,n):{...n,...e}}let fa=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(ble),this.afterRenderManager=O(f3),this.zonelessEnabled=O(Ev),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new E,this.afterTick=new E,this.componentTypes=[],this.components=[],this.isStable=O(pc).hasPendingTasks.pipe(Ve(t=>!t)),this._injector=O(xi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof bW;if(!this._injector.get(B5).done)throw!i&&function ul(n){const e=Kt(n)||ci(n)||Di(n);return null!==e&&e.standalone}(t),new K(405,!1);let o;o=i?t:this._injector.get(oC).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Rge(n){return n.isBoundToModule}(o)?void 0:this._injector.get(yc),c=o.create(Sn.NULL,[],r||o.selector,a),u=c.location.nativeElement,d=c.injector.get(L5,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),LC(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);const t=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Vh,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)Nge(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Ih(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;LC(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(FC,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>LC(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Nge(n,e,t,r){(t||Ih(n))&&J0(n,e,t&&!r?0:1)}class kge{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let H5=(()=>{class n{compileModuleSync(t){return new CM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Lo(Bi(t).declarations).reduce((o,a)=>{const l=Kt(a);return l&&o.push(new Cv(l)),o},[]);return new kge(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lge=(()=>{class n{constructor(){this.zone=O(_t),this.changeDetectionScheduler=O(Sm),this.applicationRef=O(fa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _t({...fN(),scheduleInRootZone:t}),[{provide:_t,useFactory:n},{provide:ao,multi:!0,useFactory:()=>{const r=O(Lge,{optional:!0});return()=>r.initialize()}},{provide:ao,multi:!0,useFactory:()=>{const r=O(Bge);return()=>{r.initialize()}}},!0===e?{provide:vW,useValue:!0}:[],{provide:cM,useValue:t??a4}]}function fN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let Bge=(()=>{class n{constructor(){this.subscription=new kt,this.initialized=!1,this.zone=O(_t),this.pendingTasks=O(pc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_t.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kv=(()=>{class n{constructor(){this.appRef=O(fa),this.taskService=O(pc),this.ngZone=O(_t),this.zonelessEnabled=O(Ev),this.disableScheduling=O(vW,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new kt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(P0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(cM,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof iP||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?c4:l4;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(P0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,c4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ic=new ve("",{providedIn:"root",factory:()=>O(Ic,Vt.Optional|Vt.SkipSelf)||function Uge(){return typeof $localize<"u"&&$localize.locale||CC}()}),BC=new ve("");function UC(n){return!n.moduleRef}let Q5=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[hN({ngZoneFactory:()=>function vle(n="zone.js",e){return"noop"===n?new iP:"zone.js"===n?new _t(e):n}(r?.ngZone,{...fN({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:o}),{provide:Sm,useExisting:Kv}],l=function Dhe(n,e,t){return new wM(n,e,t,!1)}(t.moduleType,this.injector,a);return function K5(n){const e=UC(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_t);return t.run(()=>{UC(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(ca,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),UC(n)){const s=()=>e.destroy(),o=n.platformInjector.get(BC);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(BC);o.add(s),n.moduleRef.onDestroy(()=>{LC(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return function Mge(n,e,t){try{const r=t();return qv(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const s=e.get(B5);return s.runInitializers(),s.donePromise.then(()=>{if(function ppe(n){"string"==typeof n&&(cG=n.toLowerCase().replace(/_/g,"-"))}(e.get(Ic,CC)||CC),UC(n)){const a=e.get(fa);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function Gge(n,e){const t=n.injector.get(fa);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new K(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){const i=j5({},r);return function Fge(n,e,t){const r=new CM(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(BC,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(Ae(Sn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ou=null;const Y5=new ve("");function X5(n,e,t=[]){const r=`Platform: ${e}`,i=new ve(r);return(s=[])=>{let o=mN();if(!o||o.injector.get(Y5,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function qge(n){if(Ou&&!Ou.get(Y5,!1))throw new K(400,!1);(function U5(){!function Jn(n){_r=n}(()=>{throw new K(600,!1)})})(),Ou=n;const e=n.get(Q5);(function J5(n){n.get(k4,null)?.forEach(t=>t())})(n)}(function Z5(n=[],e){return Sn.create({name:e,providers:[{provide:Jw,useValue:"platform"},{provide:BC,useValue:new Set([()=>Ou=null])},...n]})}(a,r))}return function Kge(){const e=mN();if(!e)throw new K(401,!1);return e}()}}function mN(){return Ou?.get(Q5)??null}let wc=(()=>{class n{static{this.__NG_ELEMENT_ID__=Yge}}return n})();function Yge(n){return function Xge(n,e,t){if(uc(n)&&!t){const r=ys(n.index,e);return new fv(r,r)}return 175&n.type?new fv(e[ar],e):null}(kn(),Ie(),!(16&~n))}class s7{constructor(){}supports(e){return hC(e)}create(e){return new n_e(e)}}const t_e=(n,e)=>e;class n_e{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||t_e}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<a7(r,i,s)?t:r,a=a7(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,b=y+m;u<=b&&b<c&&(s[m]=y+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!hC(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Phe(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new r_e(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new o7),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new o7),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class r_e{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class i_e{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class o7{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new i_e,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function a7(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class l7{constructor(){}supports(e){return e instanceof Map||TM(e)}create(){return new s_e}}class s_e{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||TM(e)))throw new K(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new o_e(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class o_e{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function c7(){return new bN([new s7])}let bN=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:c7})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||c7()),deps:[[n,new rc,new Ti]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new K(901,!1)}}return n})();function u7(){return new HC([new l7])}let HC=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:u7})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||u7()),deps:[[n,new rc,new Ti]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();const c_e=X5(null,"core",[]);let u_e=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(Ae(fa))}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({})}}return n})();function rs(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function wN(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}function Zv(n,e){Us("NgSignals");const t=function ie(n){const e=Object.create(In);e.computation=n;const t=()=>{if(Te(e),$(e),e.value===Bt)throw e.error;return e.value};return t[ce]=e,t}(n);return e?.equal&&(t[ce].equal=e.equal),t}function Wa(n){const e=te(null);try{return n()}finally{te(e)}}const z_e=new ve("",{providedIn:"root",factory:()=>O(H_e)});let H_e=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new $_e})}}return n})();class $_e{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=O(pc),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){const t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}class W_e{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=function xt(n,e,t){const r=Object.create(It);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=l=>{r.cleanupFn=l};return r.ref={notify:()=>Ke(r),run:()=>{if(null===r.fn)return;if(function ee(){return D}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Ht(r))return;r.hasRun=!0;const l=Qe(r);try{r.cleanupFn(),r.cleanupFn=Tn,r.fn(i)}finally{Ye(r,l)}},cleanup:()=>r.cleanupFn(),destroy:()=>function o(l){(function s(l){return null===l.fn&&null===l.schedule})(l)||(Yt(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Tn)}(r),[ce]:r},r.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(ca,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function k7(n,e){const t=Kt(n),r=e.elementInjector||_u();return new Cv(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}let O7=null;function Fu(){return O7}class K_e{}const bn=new ve("");let CN=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>O(Y_e),providedIn:"platform"})}}return n})();const Q_e=new ve("");let Y_e=(()=>{class n extends CN{constructor(){super(),this._doc=O(bn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fu().getBaseHref(this._doc)}onPopState(t){const r=Fu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Fu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function TN(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function F7(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Cc(n){return n&&"?"!==n[0]?"?"+n:n}let Qh=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>O(V7),providedIn:"root"})}}return n})();const L7=new ve("");let V7=(()=>{class n extends Qh{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(bn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return TN(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Cc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Cc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Cc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(CN),Ae(L7,8))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),X_e=(()=>{class n extends Qh{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=TN(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Cc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Cc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(CN),Ae(L7,8))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),Zm=(()=>{class n{constructor(t){this._subject=new Fn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function eye(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(F7(B7(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Cc(r))}normalize(t){return n.stripTrailingSlash(function J_e(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,B7(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Cc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Cc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Cc}static{this.joinWithSlash=TN}static{this.stripTrailingSlash=F7}static{this.\u0275fac=function(r){return new(r||n)(Ae(Qh))}}static{this.\u0275prov=Ne({token:n,factory:()=>function Z_e(){return new Zm(Ae(Qh))}(),providedIn:"root"})}}return n})();function B7(n){return n.replace(/\/index.html$/,"")}function K7(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Uye{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let FN=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Uye(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),X7(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{X7(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Re(Bo),Re(Ba),Re(bN))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function X7(n,e){n.context.$implicit=e.item}let aT=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jye,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Z7("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Z7("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Re(Bo),Re(Ba))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class jye{constructor(){this.$implicit=null,this.ngIf=null}}function Z7(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Xr(e)}'.`)}let e6=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:xu.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Re(lr),Re(HC),Re(Ua))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),t6=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static{this.\u0275fac=function(r){return new(r||n)(Re(Bo))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ts]})}}return n})();function qa(n,e){return new K(2100,!1)}class Wye{createSubscription(e,t){return Wa(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Wa(()=>e.unsubscribe())}}class Gye{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const qye=new Gye,Kye=new Wye;let n6=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(qv(t))return qye;if(V5(t))return Kye;throw qa()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Re(wc,16))}}static{this.\u0275pipe=Si({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),i6=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw qa();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Si({name:"slice",type:n,pure:!1,standalone:!0})}}return n})(),s6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({})}}return n})();const o6="browser";function a6(n){return n===o6}function lT(n){return"server"===n}let fve=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>a6(O(Bs))?new pve(O(bn),window):new gve})}}return n})();class pve{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function mve(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class gve{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class l6{}class $ve extends K_e{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $N extends $ve{static makeCurrent(){!function q_e(n){O7??=n}(new $N)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Wve(){return nb=nb||document.querySelector("base"),nb?nb.getAttribute("href"):null}();return null==t?null:function Gve(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){nb=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return K7(document.cookie,e)}}let nb=null,Kve=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const WN=new ve("");let v6=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Ae(WN),Ae(_t))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class b6{constructor(e){this._doc=e}}const GN="ng-app-id";let E6=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lT(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${GN}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(GN),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(GN,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Ae(bn),Ae(xh),Ae(uP,8),Ae(Bs))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const qN={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},KN=/%COMP%/g,Zve=new ve("",{providedIn:"root",factory:()=>!0});function w6(n,e){return e.map(t=>t.replace(KN,n))}let QN=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=lT(a),this.defaultRenderer=new YN(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===lo.ShadowDom&&(r={...r,encapsulation:lo.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof T6?i.applyToHost(t):i instanceof XN&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case lo.Emulated:s=new T6(l,c,r,this.appId,u,o,a,d);break;case lo.ShadowDom:return new nbe(l,c,t,r,o,a,this.nonce,d);default:s=new XN(l,c,r,u,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Ae(v6),Ae(E6),Ae(xh),Ae(Zve),Ae(bn),Ae(Bs),Ae(_t),Ae(uP))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class YN{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(qN[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(C6(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(C6(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=qN[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qN[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(xu.DashCase|xu.Important)?e.style.setProperty(t,r,i&xu.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&xu.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Fu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function C6(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nbe extends YN{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=w6(i.id,i.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class XN extends YN{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?w6(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class T6 extends XN{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function Jve(n){return"_ngcontent-%COMP%".replace(KN,n)}(c),this.hostAttr=function ebe(n){return"_nghost-%COMP%".replace(KN,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let rbe=(()=>{class n extends b6{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Ae(bn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const A6=["alt","control","meta","shift"],ibe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sbe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let obe=(()=>{class n extends b6{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fu().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),A6.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=ibe[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),A6.forEach(o=>{o!==i&&(0,sbe[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Ae(bn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const ube=X5(c_e,"browser",[{provide:Bs,useValue:o6},{provide:k4,useValue:function abe(){$N.makeCurrent()},multi:!0},{provide:bn,useFactory:function cbe(){return function zle(n){cP=n}(document),document},deps:[]}]),dbe=new ve(""),x6=[{provide:kC,useClass:class qve{addToWindow(e){zn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new K(5103,!1);return s},zn.getAllAngularTestabilities=()=>e.getAllTestabilities(),zn.getAllAngularRootElements=()=>e.getAllRootElements(),zn.frameworkStabilizers||(zn.frameworkStabilizers=[]),zn.frameworkStabilizers.push(r=>{const i=zn.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Fu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:L5,useClass:cN,deps:[_t,uN,kC]},{provide:cN,useClass:cN,deps:[_t,uN,kC]}],R6=[{provide:Jw,useValue:"root"},{provide:ca,useFactory:function lbe(){return new ca},deps:[]},{provide:WN,useClass:rbe,multi:!0,deps:[bn,_t,Bs]},{provide:WN,useClass:obe,multi:!0,deps:[bn]},QN,E6,v6,{provide:Vh,useExisting:QN},{provide:l6,useClass:Kve,deps:[]},[]];let P6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:xh,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(Ae(dbe,12))}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({providers:[...R6,...x6],imports:[s6,u_e]})}}return n})(),hbe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Ae(bn))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var k=G(467);function k6(n){return n&&ft(n.schedule)}function JN(n){return n[n.length-1]}function ek(n){return ft(JN(n))?n.pop():void 0}function rb(n){return k6(JN(n))?n.pop():void 0}var Sc=G(1635);const tk=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function O6(n){return ft(n?.then)}function F6(n){return ft(n[ro])}function L6(n){return Symbol.asyncIterator&&ft(n?.[Symbol.asyncIterator])}function V6(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const B6=function ybe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function U6(n){return ft(n?.[B6])}function j6(n){return(0,Sc.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Sc.N3)(t.read());if(i)return yield(0,Sc.N3)(void 0);yield yield(0,Sc.N3)(r)}}finally{t.releaseLock()}})}function z6(n){return ft(n?.getReader)}function $s(n){if(n instanceof Lt)return n;if(null!=n){if(F6(n))return function vbe(n){return new Lt(e=>{const t=n[ro]();if(ft(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(tk(n))return function bbe(n){return new Lt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(O6(n))return function Ebe(n){return new Lt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,xa)})}(n);if(L6(n))return H6(n);if(U6(n))return function Ibe(n){return new Lt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(z6(n))return function wbe(n){return H6(j6(n))}(n)}throw V6(n)}function H6(n){return new Lt(e=>{(function Cbe(n,e){var t,r,i,s;return(0,Sc.sH)(this,void 0,void 0,function*(){try{for(t=(0,Sc.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Dc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Lu(n,e=0){return me((t,r)=>{t.subscribe(Pe(r,i=>Dc(r,n,()=>r.next(i),e),()=>Dc(r,n,()=>r.complete(),e),i=>Dc(r,n,()=>r.error(i),e)))})}function Xh(n,e=0){return me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function $6(n,e){if(!n)throw new Error("Iterable cannot be null");return new Lt(t=>{Dc(t,e,()=>{const r=n[Symbol.asyncIterator]();Dc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function $n(n,e){return e?function Rbe(n,e){if(null!=n){if(F6(n))return function Tbe(n,e){return $s(n).pipe(Xh(e),Lu(e))}(n,e);if(tk(n))return function Sbe(n,e){return new Lt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(O6(n))return function Abe(n,e){return $s(n).pipe(Xh(e),Lu(e))}(n,e);if(L6(n))return $6(n,e);if(U6(n))return function Dbe(n,e){return new Lt(t=>{let r;return Dc(t,e,()=>{r=n[B6](),Dc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>ft(r?.return)&&r.return()})}(n,e);if(z6(n))return function xbe(n,e){return $6(j6(n),e)}(n,e)}throw V6(n)}(n,e):$s(n)}function Xe(...n){return $n(n,rb(n))}function $i(n,e,t=1/0){return ft(e)?$i((r,i)=>Ve((s,o)=>e(r,s,i,o))($s(n(r,i))),t):("number"==typeof e&&(t=e),me((r,i)=>function Pbe(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const m=()=>{d&&!l.length&&!c&&e.complete()},y=T=>c<r?b(T):l.push(T),b=T=>{s&&e.next(T),c++;let P=!1;$s(t(T,u++)).subscribe(Pe(e,B=>{i?.(B),s?y(B):e.next(B)},()=>{P=!0},void 0,()=>{if(P)try{for(c--;l.length&&c<r;){const B=l.shift();o?Dc(e,o,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(Pe(e,y,()=>{d=!0,m()})),()=>{a?.()}}(r,i,n,t)))}function tg(n,e){return ft(e)?$i(n,e,1):$i(n,1)}function ei(n,e){return me((t,r)=>{let i=0;t.subscribe(Pe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ng(n){return me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function dn(n,e){return me((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Pe(r,l=>{i?.unsubscribe();let c=0;const u=s++;$s(n(l,u)).subscribe(i=Pe(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}class fT{}class pT{}class ga{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ga?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ga;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ga?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Mbe{encodeKey(e){return W6(e)}encodeValue(e){return W6(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const kbe=/%(\d[a-f0-9])/gi,Obe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function W6(n){return encodeURIComponent(n).replace(kbe,(e,t)=>Obe[t]??e)}function mT(n){return`${n}`}class El{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Mbe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Nbe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(mT):[mT(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new El({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(mT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(mT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Fbe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function G6(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function q6(n){return typeof Blob<"u"&&n instanceof Blob}function K6(n){return typeof FormData<"u"&&n instanceof FormData}class ib{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Lbe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ga,this.context??=new Fbe,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new El,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||G6(this.body)||q6(this.body)||K6(this.body)||function Vbe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof El?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||K6(this.body)?null:q6(this.body)?this.body.type||null:G6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof El?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),u)),new ib(t,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}}var Vu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vu||{});class nk{constructor(e,t=200,r="OK"){this.headers=e.headers||new ga,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class gT extends nk{constructor(e={}){super(e),this.type=Vu.ResponseHeader}clone(e={}){return new gT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Zh extends nk{constructor(e={}){super(e),this.type=Vu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Zh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class rg extends nk{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function rk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let sb=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ib)s=t;else{let l,c;l=i.headers instanceof ga?i.headers:new ga(i.headers),i.params&&(c=i.params instanceof El?i.params:new El({fromObject:i.params})),s=new ib(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=Xe(s).pipe(tg(l=>this.handler.handle(l)));if(t instanceof ib||"events"===i.observe)return o;const a=o.pipe(ei(l=>l instanceof Zh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ve(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ve(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ve(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ve(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new El).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,rk(i,r))}post(t,r,i={}){return this.request("POST",t,rk(i,r))}put(t,r,i={}){return this.request("PUT",t,rk(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Ae(fT))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const jbe=/^\)\]\}',?\n/;function Y6(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let ik=(()=>{class n{constructor(){this.fetchImpl=O(Hbe,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=O(_t)}handle(t){return new Lt(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(sk,s=>r.error(new rg({error:s}))),()=>i.abort()})}doRequest(t,r,i){var s=this;return(0,k.A)(function*(){const o=s.createRequestInit(t);let a;try{const b=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:r,...o}));(function $be(n){n.then(sk,sk)})(b),i.next({type:Vu.Sent}),a=yield b}catch(b){return void i.error(new rg({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}))}const l=new ga(a.headers),c=a.statusText,u=Y6(a)??t.urlWithParams;let d=a.status,m=null;if(t.reportProgress&&i.next(new gT({headers:l,status:d,statusText:c,url:u})),a.body){const b=a.headers.get("content-length"),T=[],P=a.body.getReader();let V,Q,B=0;const be=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,k.A)(function*(){for(;;){const{done:je,value:H}=yield P.read();if(je)break;if(T.push(H),B+=H.length,t.reportProgress){Q="text"===t.responseType?(Q??"")+(V??=new TextDecoder).decode(H,{stream:!0}):void 0;const L=()=>i.next({type:Vu.DownloadProgress,total:b?+b:void 0,loaded:B,partialText:Q});be?be.run(L):L()}}}));const Be=s.concatChunks(T,B);try{const je=a.headers.get("Content-Type")??"";m=s.parseBody(t,Be,je)}catch(je){return void i.error(new rg({error:je,headers:new ga(a.headers),status:a.status,statusText:a.statusText,url:Y6(a)??t.urlWithParams}))}}0===d&&(d=m?200:0),d>=200&&d<300?(i.next(new Zh({body:m,headers:l,status:d,statusText:c,url:u})),i.complete()):i.error(new rg({error:m,headers:l,status:d,statusText:c,url:u}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const s=(new TextDecoder).decode(r).replace(jbe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let s=0;for(const o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class Hbe{}function sk(){}function X6(n,e){return e(n)}function Wbe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const qbe=new ve(""),ob=new ve(""),Z6=new ve(""),J6=new ve("",{providedIn:"root",factory:()=>!0});function Kbe(){let n=null;return(e,t)=>{null===n&&(n=(O(qbe,{optional:!0})??[]).reduceRight(Wbe,X6));const r=O(pc);if(O(J6)){const s=r.add();return n(e,t).pipe(ng(()=>r.remove(s)))}return n(e,t)}}let eq=(()=>{class n extends fT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=O(pc),this.contributeToStability=O(J6)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(ob),...this.injector.get(Z6,[])]));this.chain=r.reduceRight((i,s)=>function Gbe(n,e,t){return(r,i)=>gs(t,()=>e(r,s=>n(s,i)))}(i,s,this.injector),X6)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ng(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Ae(pT),Ae(xi))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const Jbe=/^\)\]\}',?\n/;let nq=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new K(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?$n(r.\u0275loadImpl()):Xe(null)).pipe(dn(()=>new Lt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((T,P)=>o.setRequestHeader(T,P.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const T=t.detectContentTypeHeader();null!==T&&o.setRequestHeader("Content-Type",T)}if(t.responseType){const T=t.responseType.toLowerCase();o.responseType="json"!==T?T:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const T=o.statusText||"OK",P=new ga(o.getAllResponseHeaders()),B=function eEe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new gT({headers:P,status:o.status,statusText:T,url:B}),l},u=()=>{let{headers:T,status:P,statusText:B,url:V}=c(),Q=null;204!==P&&(Q=typeof o.response>"u"?o.responseText:o.response),0===P&&(P=Q?200:0);let be=P>=200&&P<300;if("json"===t.responseType&&"string"==typeof Q){const Be=Q;Q=Q.replace(Jbe,"");try{Q=""!==Q?JSON.parse(Q):null}catch(je){Q=Be,be&&(be=!1,Q={error:je,text:Q})}}be?(s.next(new Zh({body:Q,headers:T,status:P,statusText:B,url:V||void 0})),s.complete()):s.error(new rg({error:Q,headers:T,status:P,statusText:B,url:V||void 0}))},d=T=>{const{url:P}=c(),B=new rg({error:T,status:o.status||0,statusText:o.statusText||"Unknown Error",url:P||void 0});s.error(B)};let m=!1;const y=T=>{m||(s.next(c()),m=!0);let P={type:Vu.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(P.total=T.total),"text"===t.responseType&&o.responseText&&(P.partialText=o.responseText),s.next(P)},b=T=>{let P={type:Vu.UploadProgress,loaded:T.loaded};T.lengthComputable&&(P.total=T.total),s.next(P)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:Vu.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Ae(l6))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const ok=new ve(""),rq=new ve("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),iq=new ve("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class sq{}let rEe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=K7(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Ae(bn),Ae(Bs),Ae(rq))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function iEe(n,e){const t=n.url.toLowerCase();if(!O(ok)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=O(sq).getToken(),i=O(iq);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Bu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Bu||{});function Jh(n,e){return{\u0275kind:n,\u0275providers:e}}function sEe(...n){const e=[sb,nq,eq,{provide:fT,useExisting:eq},{provide:pT,useFactory:()=>O(ik,{optional:!0})??O(nq)},{provide:ob,useValue:iEe,multi:!0},{provide:ok,useValue:!0},{provide:sq,useClass:rEe}];for(const t of n)e.push(...t.\u0275providers);return dl(e)}const oq=new ve(""),{isArray:mEe}=Array,{getPrototypeOf:gEe,prototype:_Ee,keys:yEe}=Object;function pq(n){if(1===n.length){const e=n[0];if(mEe(e))return{args:e,keys:null};if(function vEe(n){return n&&"object"==typeof n&&gEe(n)===_Ee}(e)){const t=yEe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:bEe}=Array;function ak(n){return Ve(e=>function EEe(n,e){return bEe(e)?n(...e):n(e)}(n,e))}function mq(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function lk(...n){const e=ek(n),{args:t,keys:r}=pq(n),i=new Lt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;$s(t[u]).subscribe(Pe(s,m=>{d||(d=!0,c--),a[u]=m},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?mq(r,a):a),s.complete())}))}});return e?i.pipe(ak(e)):i}let gq=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Re(Ua),Re(lr))}}static{this.\u0275dir=Ze({type:n})}}return n})(),ef=(()=>{class n extends gq{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=$r(n)))(i||n)}})()}static{this.\u0275dir=Ze({type:n,features:[_n]})}}return n})();const Ka=new ve(""),wEe={provide:Ka,useExisting:Hn(()=>ab),multi:!0},TEe=new ve("");let ab=(()=>{class n extends gq{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CEe(){const n=Fu()?Fu().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(Ua),Re(lr),Re(TEe,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Dn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ur([wEe]),_n]})}}return n})();function Uu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function yq(n){return null!=n&&"number"==typeof n.length}const ws=new ve(""),ju=new ve(""),AEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class yT{static min(e){return function vq(n){return e=>{if(Uu(e.value)||Uu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function bq(n){return e=>{if(Uu(e.value)||Uu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Eq(n){return Uu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Iq(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function wq(n){return Uu(n.value)||AEe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Cq(n){return e=>Uu(e.value)||!yq(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Tq(n){return e=>yq(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Aq(n){if(!n)return vT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Uu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Mq(e)}static composeAsync(e){return Nq(e)}}function vT(n){return null}function Sq(n){return null!=n}function Dq(n){return qv(n)?$n(n):n}function xq(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Rq(n,e){return e.map(t=>t(n))}function Pq(n){return n.map(e=>function SEe(n){return!n.validate}(e)?e:t=>e.validate(t))}function Mq(n){if(!n)return null;const e=n.filter(Sq);return 0==e.length?null:function(t){return xq(Rq(t,e))}}function ck(n){return null!=n?Mq(Pq(n)):null}function Nq(n){if(!n)return null;const e=n.filter(Sq);return 0==e.length?null:function(t){return lk(Rq(t,e).map(Dq)).pipe(Ve(xq))}}function uk(n){return null!=n?Nq(Pq(n)):null}function kq(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Oq(n){return n._rawValidators}function Fq(n){return n._rawAsyncValidators}function dk(n){return n?Array.isArray(n)?n:[n]:[]}function bT(n,e){return Array.isArray(n)?n.includes(e):n===e}function Lq(n,e){const t=dk(e);return dk(n).forEach(i=>{bT(t,i)||t.push(i)}),t}function Vq(n,e){return dk(e).filter(t=>!bT(n,t))}class Bq{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ck(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ws extends Bq{get formDirective(){return null}get path(){return null}}class zu extends Bq{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Uq{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let hk=(()=>{class n extends Uq{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(zu,2))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Es("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[_n]})}}return n})(),fk=(()=>{class n extends Uq{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(Ws,10))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Es("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[_n]})}}return n})();const lb="VALID",IT="INVALID",ig="PENDING",cb="DISABLED";class sg{}class zq extends sg{constructor(e,t){super(),this.value=e,this.source=t}}class gk extends sg{constructor(e,t){super(),this.pristine=e,this.source=t}}class _k extends sg{constructor(e,t){super(),this.touched=e,this.source=t}}class wT extends sg{constructor(e,t){super(),this.status=e,this.source=t}}class MEe extends sg{constructor(e){super(),this.source=e}}class NEe extends sg{constructor(e){super(),this.source=e}}function yk(n){return(CT(n)?n.validators:n)||null}function vk(n,e){return(CT(e)?e.asyncValidators:n)||null}function CT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Hq(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[t])throw new K(1001,"")}function $q(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new K(1002,"")})}class TT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Zv(()=>this.statusReactive()),this.statusReactive=Bh(void 0),this._pristine=Zv(()=>this.pristineReactive()),this.pristineReactive=Bh(!0),this._touched=Zv(()=>this.touchedReactive()),this.touchedReactive=Bh(!1),this._events=new E,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Wa(this.statusReactive)}set status(e){Wa(()=>this.statusReactive.set(e))}get valid(){return this.status===lb}get invalid(){return this.status===IT}get pending(){return this.status==ig}get disabled(){return this.status===cb}get enabled(){return this.status!==cb}get pristine(){return Wa(this.pristineReactive)}set pristine(e){Wa(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Wa(this.touchedReactive)}set touched(e){Wa(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Lq(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Lq(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Vq(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Vq(e,this._rawAsyncValidators))}hasValidator(e){return bT(this._rawValidators,e)}hasAsyncValidator(e){return bT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new _k(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new _k(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new gk(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new gk(!0,r))}markAsPending(e={}){this.status=ig;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new wT(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cb,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new zq(this.value,r)),this._events.next(new wT(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lb,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lb||this.status===ig)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new zq(this.value,t)),this._events.next(new wT(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cb:lb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ig,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=Dq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new wT(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Fn,this.statusChanges=new Fn}_calculateStatus(){return this._allControlsDisabled()?cb:this.errors?IT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ig)?ig:this._anyControlsHaveStatus(IT)?IT:lb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new gk(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new _k(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function kEe(n){return Array.isArray(n)?ck(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function OEe(n){return Array.isArray(n)?uk(n):n||null}(this._rawAsyncValidators)}}class tf extends TT{constructor(e,t,r){super(yk(t),vk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){$q(this,0,e),Object.keys(e).forEach(r=>{Hq(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Wq extends tf{}const nf=new ve("CallSetDisabledState",{providedIn:"root",factory:()=>ub}),ub="always";function AT(n,e){return[...e.path,n]}function db(n,e,t=ub){bk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function LEe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Gq(n,e)})}(n,e),function BEe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function VEe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Gq(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function FEe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ST(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function DT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bk(n,e){const t=Oq(n);null!==e.validator?n.setValidators(kq(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Fq(n);null!==e.asyncValidator?n.setAsyncValidators(kq(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();DT(e._rawValidators,i),DT(e._rawAsyncValidators,i)}function xT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Oq(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Fq(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return DT(e._rawValidators,r),DT(e._rawAsyncValidators,r),t}function Gq(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qq(n,e){bk(n,e)}function Ik(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Kq(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function wk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===ab?t=s:function zEe(n){return Object.getPrototypeOf(n.constructor)===ef}(s)?r=s:i=s}),i||r||t||null}const $Ee={provide:Ws,useExisting:Hn(()=>RT)},hb=Promise.resolve();let RT=(()=>{class n extends Ws{get submitted(){return Wa(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Zv(()=>this.submittedReactive()),this.submittedReactive=Bh(!1),this._directives=new Set,this.ngSubmit=new Fn,this.form=new tf({},ck(t),uk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){hb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),db(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){hb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){hb.then(()=>{const r=this._findContainer(t.path),i=new tf({});qq(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){hb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){hb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Kq(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Re(ws,10),Re(ju,10),Re(nf,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Dn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ur([$Ee]),_n]})}}return n})();function Qq(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Yq(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const og=class extends TT{constructor(e=null,t,r){super(yk(t),vk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),CT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Yq(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Qq(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Qq(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Yq(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},qEe={provide:zu,useExisting:Hn(()=>Ck)},Jq=Promise.resolve();let Ck=(()=>{class n extends zu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new og,this._registered=!1,this.name="",this.update=new Fn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wk(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Ik(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){db(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Jq.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&rs(r);Jq.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?AT(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Re(Ws,9),Re(ws,10),Re(ju,10),Re(Ka,10),Re(wc,8),Re(nf,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ur([qEe]),_n,ts]})}}return n})(),Tk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const Ak=new ve(""),JEe={provide:Ws,useExisting:Hn(()=>PT)};let PT=(()=>{class n extends Ws{get submitted(){return Wa(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Zv(()=>this._submittedReactive()),this._submittedReactive=Bh(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Fn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return db(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ST(t.control||null,t,!1),function HEe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Kq(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new MEe(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new NEe(this.form))}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ST(r||null,t),(n=>n instanceof og)(i)&&(db(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);qq(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function UEe(n,e){return xT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bk(this.form,this),this._oldForm&&xT(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||n)(Re(ws,10),Re(ju,10),Re(nf,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Dn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ur([JEe]),_n,ts]})}}return n})();const nIe={provide:zu,useExisting:Hn(()=>xk)};let xk=(()=>{class n extends zu{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Fn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wk(0,s)}ngOnChanges(t){this._added||this._setUpControl(),Ik(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return AT(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Re(Ws,13),Re(ws,10),Re(ju,10),Re(Ka,10),Re(Ak,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[ur([nIe]),_n,ts]})}}return n})(),g8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({})}}return n})();class _8 extends TT{constructor(e,t,r){super(yk(t),vk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){$q(this,0,e),e.forEach((r,i)=>{Hq(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function y8(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let _Ie=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return y8(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new tf(i,s)}record(t,r=null){const i=this._reduceControls(t);return new Wq(i,r)}control(t,r,i){let s={};return this.useNonNullable?(y8(r)?s=r:(s.validators=r,s.asyncValidators=i),new og(t,{...s,nonNullable:!0})):new og(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new _8(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof og||t instanceof TT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),v8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nf,useValue:t.callSetDisabledState??ub}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({imports:[g8]})}}return n})(),b8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ak,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:nf,useValue:t.callSetDisabledState??ub}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({imports:[g8]})}}return n})();function MT(...n){const e=rb(n),t=ek(n),{args:r,keys:i}=pq(n);if(0===r.length)return $n([],e);const s=new Lt(function yIe(n,e,t=Ci){return r=>{E8(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)E8(e,()=>{const c=$n(n[l],e);let u=!1;c.subscribe(Pe(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>mq(i,o):Ci));return t?s.pipe(ak(t)):s}function E8(n,e,t){n?Dc(t,n,e):e()}const NT=Kr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ag(n=1/0){return $i(Ci,n)}function fb(...n){return function vIe(){return ag(1)}()($n(n,rb(n)))}function pb(n){return new Lt(e=>{$s(n()).subscribe(e)})}function mb(n,e){const t=ft(n)?n:()=>n,r=i=>i.error(t());return new Lt(e?i=>e.schedule(r,0,i):r)}const Qa=new Lt(n=>n.complete());function kk(){return me((n,e)=>{let t=null;n._refCount++;const r=Pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class I8 extends Lt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,j(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kt;const t=this.getSubject();e.add(this.source.subscribe(Pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kt.EMPTY)}return e}refCount(){return kk()(this)}}function Cs(n){return n<=0?()=>Qa:me((e,t)=>{let r=0;e.subscribe(Pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Hu(...n){const e=rb(n);return me((t,r)=>{(e?fb(n,t,e):fb(n,t)).subscribe(r)})}function kT(n){return me((e,t)=>{let r=!1;e.subscribe(Pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function w8(n=EIe){return me((e,t)=>{let r=!1;e.subscribe(Pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function EIe(){return new NT}function $u(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ei((i,s)=>n(i,s,r)):Ci,Cs(1),t?kT(e):w8(()=>new NT))}function ti(n,e,t){const r=ft(n)||e||t?{next:n,error:e,complete:t}:n;return r?me((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Pe(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Ci}function Wu(n){return me((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Pe(t,void 0,void 0,o=>{s=$s(n(o,Wu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function lg(n,e){return me(function IIe(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Pe(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Ok(n){return n<=0?()=>Qa:me((e,t)=>{let r=[];e.subscribe(Pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function C8(n){return Ve(()=>n)}function gb(n){return me((e,t)=>{$s(n).subscribe(Pe(t,()=>t.complete(),us)),!t.closed&&e.subscribe(t)})}const Qt="primary",_b=Symbol("RouteTitle");class CIe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function cg(n){return new CIe(n)}function TIe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Il(n,e){const t=n?Fk(n):void 0,r=e?Fk(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!T8(n[i],e[i]))return!1;return!0}function Fk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function T8(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function A8(n){return n.length>0?n[n.length-1]:null}function Gu(n){return function Nk(n){return!!n&&(n instanceof Lt||ft(n.lift)&&ft(n.subscribe))}(n)?n:qv(n)?$n(Promise.resolve(n)):Xe(n)}const SIe={exact:function x8(n,e,t){if(!af(n.segments,e.segments)||!OT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!x8(n.children[r],e.children[r],t))return!1;return!0},subset:R8},S8={exact:function DIe(n,e){return Il(n,e)},subset:function xIe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>T8(n[t],e[t]))},ignored:()=>!0};function D8(n,e,t){return SIe[t.paths](n.root,e.root,t.matrixParams)&&S8[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function R8(n,e,t){return P8(n,e,e.segments,t)}function P8(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!af(i,t)||e.hasChildren()||!OT(i,t,r))}if(n.segments.length===t.length){if(!af(n.segments,t)||!OT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!R8(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(af(n.segments,i)&&OT(n.segments,i,r)&&n.children[Qt])&&P8(n.children[Qt],e,s,r)}}function OT(n,e,t){return e.every((r,i)=>S8[t](n[i].parameters,r.parameters))}class sf{constructor(e=new Yn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=cg(this.queryParams),this._queryParamMap}toString(){return MIe.serialize(this)}}class Yn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return LT(this)}}class yb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=cg(this.parameters),this._parameterMap}toString(){return k8(this)}}function af(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ug=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>new FT,providedIn:"root"})}}return n})();class FT{parse(e){const t=new HIe(e);return new sf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${vb(e.root,!0)}`,r=function OIe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${VT(t)}=${VT(i)}`).join("&"):`${VT(t)}=${VT(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function NIe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const MIe=new FT;function LT(n){return n.segments.map(e=>k8(e)).join("/")}function vb(n,e){if(!n.hasChildren())return LT(n);if(e){const t=n.children[Qt]?vb(n.children[Qt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Qt&&r.push(`${i}:${vb(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function PIe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Qt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Qt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Qt?[vb(n.children[Qt],!1)]:[`${i}:${vb(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${LT(n)}/${t[0]}`:`${LT(n)}/(${t.join("//")})`}}function M8(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function VT(n){return M8(n).replace(/%3B/gi,";")}function Lk(n){return M8(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function BT(n){return decodeURIComponent(n)}function N8(n){return BT(n.replace(/\+/g,"%20"))}function k8(n){return`${Lk(n.path)}${function kIe(n){return Object.entries(n).map(([e,t])=>`;${Lk(e)}=${Lk(t)}`).join("")}(n.parameters)}`}const FIe=/^[^\/()?;#]+/;function Vk(n){const e=n.match(FIe);return e?e[0]:""}const LIe=/^[^\/()?;=#]+/,BIe=/^[^=?&#]+/,jIe=/^[^&#]+/;class HIe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yn([],{}):new Yn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new Yn(e,t)),r}parseSegment(){const e=Vk(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new yb(BT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function VIe(n){const e=n.match(LIe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Vk(this.remaining);i&&(r=i,this.capture(r))}e[BT(t)]=BT(r)}parseQueryParam(e){const t=function UIe(n){const e=n.match(BIe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function zIe(n){const e=n.match(jIe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=N8(t),s=N8(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Vk(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Qt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Qt]:new Yn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}}function O8(n){return n.segments.length>0?new Yn([],{[Qt]:n}):n}function F8(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=F8(i);if(r===Qt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function $Ie(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new Yn(n.segments.concat(e.segments),e.children)}return n}(new Yn(n.segments,e))}function lf(n){return n instanceof sf}function L8(n){let e;const i=O8(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new Yn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function V8(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Bk(i,i,i,t,r);const s=function GIe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new U8(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new U8(t,e,r)}(e);if(s.toRoot())return Bk(i,i,new Yn([],{}),t,r);const o=function qIe(n,e,t){if(n.isAbsolute)return new jT(e,!0,0);if(!t)return new jT(e,!1,NaN);if(null===t.parent)return new jT(t,!0,0);const r=UT(n.commands[0])?0:1;return function KIe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new jT(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Eb(o.segmentGroup,o.index,s.commands):j8(o.segmentGroup,o.index,s.commands);return Bk(i,o.segmentGroup,a,t,r)}function UT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function bb(n){return"object"==typeof n&&null!=n&&n.outlets}function Bk(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:B8(n,e,t);const a=O8(F8(o));return new sf(a,s,i)}function B8(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:B8(s,e,t)}),new Yn(n.segments,r)}class U8{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&UT(r[0]))throw new K(4003,!1);const i=r.find(bb);if(i&&i!==A8(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function j8(n,e,t){if(n??=new Yn([],{}),0===n.segments.length&&n.hasChildren())return Eb(n,e,t);const r=function YIe(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(bb(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!H8(l,c,o))return s;r+=2}else{if(!H8(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Yn(n.segments.slice(0,r.pathIndex),{});return s.children[Qt]=new Yn(n.segments.slice(r.pathIndex),n.children),Eb(s,0,i)}return r.match&&0===i.length?new Yn(n.segments,{}):r.match&&!n.hasChildren()?Uk(n,e,t):r.match?Eb(n,0,i):Uk(n,e,t)}function Eb(n,e,t){if(0===t.length)return new Yn(n.segments,{});{const r=function QIe(n){return bb(n[0])?n[0].outlets:{[Qt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Qt)&&n.children[Qt]&&1===n.numberOfChildren&&0===n.children[Qt].segments.length){const s=Eb(n.children[Qt],e,t);return new Yn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=j8(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Yn(n.segments,i)}}function Uk(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(bb(s)){const l=XIe(s.outlets);return new Yn(r,l)}if(0===i&&UT(t[0])){r.push(new yb(n.segments[e].path,z8(t[0]))),i++;continue}const o=bb(s)?s.outlets[Qt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&UT(a)?(r.push(new yb(o,z8(a))),i+=2):(r.push(new yb(o,{})),i++)}return new Yn(r,{})}function XIe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Uk(new Yn([],{}),0,r))}),e}function z8(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function H8(n,e,t){return n==t.path&&Il(e,t.parameters)}const Ib="imperative";var yn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(yn||{});class wl{constructor(e,t){this.id=e,this.url=t}}class zT extends wl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=yn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xc extends wl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=yn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var zo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(zo||{}),HT=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(HT||{});class cf extends wl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=yn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dg extends wl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=yn.NavigationSkipped}}class jk extends wl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=yn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $8 extends wl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=yn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZIe extends wl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=yn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JIe extends wl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=yn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ewe extends wl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=yn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class twe extends wl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=yn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nwe{constructor(e){this.route=e,this.type=yn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rwe{constructor(e){this.route=e,this.type=yn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iwe{constructor(e){this.snapshot=e,this.type=yn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class swe{constructor(e){this.snapshot=e,this.type=yn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class owe{constructor(e){this.snapshot=e,this.type=yn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class awe{constructor(e){this.snapshot=e,this.type=yn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W8{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=yn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class zk{}class $T{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function Ya(n){return n.outlet||Qt}function wb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class fwe{get injector(){return wb(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Cb(this.rootInjector),this.attachRef=null}}let Cb=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fwe(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Ae(xi))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class G8{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Hk(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Hk(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$k(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $k(e,this._root).map(t=>t.value)}}function Hk(n,e){if(n===e.value)return e;for(const t of e.children){const r=Hk(n,t);if(r)return r}return null}function $k(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$k(n,t);if(r.length)return r.unshift(e),r}return[]}class Xa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function hg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class q8 extends G8{constructor(e,t){super(e),this.snapshot=t,Wk(this,e)}toString(){return this.snapshot.toString()}}function K8(n){const e=function pwe(n){const s=new GT([],{},{},"",{},Qt,n,null,{});return new Q8("",new Xa(s,[]))}(n),t=new F([new yb("",{})]),r=new F({}),i=new F({}),s=new F({}),o=new F(""),a=new fg(t,r,s,o,i,Qt,n,e.root);return a.snapshot=e.root,new q8(new Xa(a,[]),e)}class fg{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ve(c=>c[_b]))??Xe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(e=>cg(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(e=>cg(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WT(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&X8(i)&&(r.resolve[_b]=i.title),r}class GT{get title(){return this.data?.[_b]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=cg(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=cg(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Q8 extends G8{constructor(e,t){super(t),this.url=e,Wk(this,t)}toString(){return Y8(this._root)}}function Wk(n,e){e.value._routerState=n,e.children.forEach(t=>Wk(n,t))}function Y8(n){const e=n.children.length>0?` { ${n.children.map(Y8).join(", ")} } `:"";return`${n.value}${e}`}function Gk(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Il(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Il(e.params,t.params)||n.paramsSubject.next(t.params),function AIe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Il(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Il(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qk(n,e){const t=Il(n.params,e.params)&&function RIe(n,e){return af(n,e)&&n.every((t,r)=>Il(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||qk(n.parent,e.parent))}function X8(n){return"string"==typeof n.title||null===n.title}let Kk=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qt,this.activateEvents=new Fn,this.deactivateEvents=new Fn,this.attachEvents=new Fn,this.detachEvents=new Fn,this.parentContexts=O(Cb),this.location=O(Bo),this.changeDetector=O(wc),this.inputBinder=O(qT,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Qk(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ts]})}}return n})();class Qk{__ngOutletInjector(e){return new Qk(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fg?this.route:e===Cb?this.childContexts:this.parent.get(e,t)}}const qT=new ve("");let Z8=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=MT([r.queryParams,r.params,r.data]).pipe(dn(([s,o,a],l)=>(a={...s,...o,...a},0===l?Xe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function G_e(n){const e=Kt(n);if(!e)return null;const t=new Cv(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function Tb(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function gwe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Tb(n,r,i);return Tb(n,r)})}(n,e,t);return new Xa(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Tb(n,a)),o}}const r=function _we(n){return new fg(new F(n.url),new F(n.params),new F(n.queryParams),new F(n.fragment),new F(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Tb(n,s));return new Xa(r,i)}}class Yk{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const J8="ngNavigationCancelingError";function KT(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=lf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=e9(!1,zo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function e9(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[J8]=!0,t.cancellationCode=e,t}function t9(n){return!!n&&n[J8]}class bwe{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gk(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=hg(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=hg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=hg(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=hg(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new awe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new swe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Gk(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Gk(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class n9{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class QT{constructor(e,t){this.component=e,this.route=t}}function Ewe(n,e,t){const r=n._root;return Ab(r,e?e._root:null,t,[r.value])}function pg(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function eR(n){return null!==du(n)}(n)?e.get(n):n:r}function Ab(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=hg(e);return n.children.forEach(o=>{(function wwe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Cwe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!af(n.url,e.url);case"pathParamsOrQueryParamsChange":return!af(n.url,e.url)||!Il(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qk(n,e)||!Il(n.queryParams,e.queryParams);default:return!qk(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new n9(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Ab(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new QT(a.outlet.component,o))}else o&&Sb(e,a,i),i.canActivateChecks.push(new n9(r)),Ab(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Sb(a,t.getContext(o),i)),i}function Sb(n,e,t){const r=hg(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Sb(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new QT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Db(n){return"function"==typeof n}function r9(n){return n instanceof NT||"EmptyError"===n?.name}const YT=Symbol("INITIAL_VALUE");function mg(){return dn(n=>MT(n.map(e=>e.pipe(Cs(1),Hu(YT)))).pipe(Ve(e=>{for(const t of e)if(!0!==t){if(t===YT)return YT;if(!1===t||Pwe(t))return t}return!0}),ei(e=>e!==YT),Cs(1)))}function Pwe(n){return lf(n)||n instanceof Yk}function i9(n){return function Ra(...n){return ia(n)}(ti(e=>{if("boolean"!=typeof e)throw KT(0,e)}),Ve(e=>!0===e))}class Xk{constructor(e){this.segmentGroup=e||null}}class XT extends Error{constructor(e){super(),this.urlTree=e}}function gg(n){return mb(new Xk(n))}class $we{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Xe(r);if(i.numberOfChildren>1||!i.children[Qt])return mb(new K(4e3,!1));i=i.children[Qt]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:m,params:y,data:b,title:T}=i,P=gs(s,()=>a({params:y,data:b,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:m,title:T}));if(P instanceof sf)throw new XT(P);t=P}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new XT(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new sf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Yn(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Zk={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wwe(n,e,t,r,i){const s=s9(n,e,t);return s.matched?(r=function lwe(n,e){return n.providers&&!n._injector&&(n._injector=dC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function jwe(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Xe(i.map(o=>{const a=pg(o,n);return Gu(function Rwe(n){return n&&Db(n.canMatch)}(a)?a.canMatch(e,t):gs(n,()=>a(e,t)))})).pipe(mg(),i9()):Xe(!0)}(r,e,t).pipe(Ve(o=>!0===o?s:{...Zk}))):Xe(s)}function s9(n,e,t){if("**"===e.path)return function Gwe(n){return{matched:!0,parameters:n.length>0?A8(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Zk}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||TIe)(t,n,e);if(!i)return{...Zk};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function o9(n,e,t,r){return t.length>0&&function Qwe(n,e,t){return t.some(r=>ZT(n,e,r)&&Ya(r)!==Qt)}(n,t,r)?{segmentGroup:new Yn(e,Kwe(r,new Yn(t,n.children))),slicedSegments:[]}:0===t.length&&function Ywe(n,e,t){return t.some(r=>ZT(n,e,r))}(n,t,r)?{segmentGroup:new Yn(n.segments,qwe(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Yn(n.segments,n.children),slicedSegments:t}}function qwe(n,e,t,r){const i={};for(const s of t)if(ZT(n,e,s)&&!r[Ya(s)]){const o=new Yn([],{});i[Ya(s)]=o}return{...r,...i}}function Kwe(n,e){const t={};t[Qt]=e;for(const r of n)if(""===r.path&&Ya(r)!==Qt){const i=new Yn([],{});t[Ya(r)]=i}return t}function ZT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Zwe{}class t0e{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new $we(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){const e=o9(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ve(({children:t,rootSnapshot:r})=>{const i=new Xa(r,t),s=new Q8("",i),o=function WIe(n,e,t=null,r=null){return V8(L8(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new GT([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Qt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Qt,t).pipe(Ve(r=>({children:r,rootSnapshot:t})),Wu(r=>{if(r instanceof XT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xk?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Ve(o=>o instanceof Xa?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return $n(s).pipe(tg(o=>{const a=r.children[o],l=function hwe(n,e){const t=n.filter(r=>Ya(r)===e);return t.push(...n.filter(r=>Ya(r)!==e)),t}(t,o);return this.processSegmentGroup(e,l,a,o,i)}),lg((o,a)=>(o.push(...a),o)),kT(null),function wIe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ei((i,s)=>n(i,s,r)):Ci,Ok(1),t?kT(e):w8(()=>new NT))}(),$i(o=>{if(null===o)return gg(r);const a=a9(o);return function n0e(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Xe(a)}))}processSegment(e,t,r,i,s,o,a){return $n(t).pipe(tg(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(Wu(c=>{if(c instanceof Xk)return Xe(null);throw c}))),$u(l=>!!l),Wu(l=>{if(r9(l))return function Xwe(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?Xe(new Zwe):gg(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return Ya(r)===o||o!==Qt&&ZT(i,s,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):gg(i):gg(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:m}=s9(t,i,s);if(!l)return gg(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const y=new GT(s,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,l9(i),Ya(i),i.component??i._loadedComponent??null,i,c9(i)),b=WT(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);const T=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,y,e);return this.applyRedirects.lineralizeSegments(i,T).pipe($i(P=>this.processSegment(e,r,t,P.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=Wwe(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(dn(l=>l.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(dn(({routes:c})=>{const u=r._loadedInjector??e,{parameters:d,consumedSegments:m,remainingSegments:y}=l,b=new GT(m,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,l9(r),Ya(r),r.component??r._loadedComponent??null,r,c9(r)),T=WT(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(T.params),b.data=Object.freeze(T.data);const{segmentGroup:P,slicedSegments:B}=o9(t,m,y,c);if(0===B.length&&P.hasChildren())return this.processChildren(u,c,P,b).pipe(Ve(Q=>new Xa(b,Q)));if(0===c.length&&0===B.length)return Xe(new Xa(b,[]));const V=Ya(r)===s;return this.processSegment(u,c,P,B,V?Qt:s,!0,b).pipe(Ve(Q=>new Xa(b,Q instanceof Xa?[Q]:[])))})):gg(t)))}getChildConfig(e,t,r){return t.children?Xe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Xe({routes:t._loadedRoutes,injector:t._loadedInjector}):function Uwe(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Xe(!0):Xe(i.map(o=>{const a=pg(o,n);return Gu(function Awe(n){return n&&Db(n.canLoad)}(a)?a.canLoad(e,t):gs(n,()=>a(e,t)))})).pipe(mg(),i9())}(e,t,r).pipe($i(i=>i?this.configLoader.loadChildren(e,t).pipe(ti(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Hwe(){return mb(e9(!1,zo.GuardRejected))}())):Xe({routes:[],injector:e})}}function r0e(n){const e=n.value.routeConfig;return e&&""===e.path}function a9(n){const e=[],t=new Set;for(const r of n){if(!r0e(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=a9(r.children);e.push(new Xa(r.value,i))}return e.filter(r=>!t.has(r))}function l9(n){return n.data||{}}function c9(n){return n.resolve||{}}function u9(n){const e=n.children.map(t=>u9(t)).flat();return[n,...e]}function Jk(n){return dn(e=>{const t=n(e);return t?$n(t).pipe(Ve(()=>e)):Xe(e)})}let d9=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[_b]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>O(c0e),providedIn:"root"})}}return n})(),c0e=(()=>{class n extends d9{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Ae(hbe))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const _g=new ve("",{providedIn:"root",factory:()=>({})});let h9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["ng-component"]],standalone:!0,features:[Is],decls:1,vars:0,template:function(r,i){1&r&&ln(0,"router-outlet")},dependencies:[Kk],encapsulation:2})}}return n})();function eO(n){const e=n.children&&n.children.map(eO),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=h9),t}const yg=new ve("");let tO=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(H5)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Xe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gu(t.loadComponent()).pipe(Ve(f9),ti(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ng(()=>{this.componentLoaders.delete(t)})),i=new I8(r,()=>new E).pipe(kk());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Xe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function u0e(n,e,t,r){return Gu(n.loadChildren()).pipe(Ve(f9),$i(i=>i instanceof i3||Array.isArray(i)?Xe(i):$n(e.compileModuleAsync(i))),Ve(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(yg,[],{optional:!0,self:!0}).flat()),{routes:o.map(eO),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ng(()=>{this.childrenLoaders.delete(r)})),o=new I8(s,()=>new E).pipe(kk());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function f9(n){return function d0e(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let nO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>O(h0e),providedIn:"root"})}}return n})(),h0e=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const p9=new ve(""),m9=new ve("");function f0e(n,e,t){const r=n.get(m9),i=n.get(bn);return n.get(_t).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s;const o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),function p0e(n){return new Promise(e=>{Mu({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:l}=r;return l&&gs(n,()=>l({transition:a,from:e,to:t})),o})}const g9=new ve("");let JT=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new E,this.transitionAbortSubject=new E,this.configLoader=O(tO),this.environmentInjector=O(xi),this.urlSerializer=O(ug),this.rootContexts=O(Cb),this.location=O(Zm),this.inputBindingEnabled=null!==O(qT,{optional:!0}),this.titleStrategy=O(d9),this.options=O(_g,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(nO),this.createViewTransition=O(p9,{optional:!0}),this.navigationErrorHandler=O(g9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Xe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new rwe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new nwe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new F({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ib,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ei(s=>0!==s.id),Ve(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),dn(s=>{let o=!1,a=!1;return Xe(s).pipe(dn(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",zo.SupersededByNewNavigation),Qa;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:"string"==typeof l.extras.browserUrl?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new dg(l.id,this.urlSerializer.serialize(l.rawUrl),d,HT.IgnoredSameUrlNavigation)),l.resolve(!1),Qa}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Xe(l).pipe(dn(d=>{const m=this.transitions?.getValue();return this.events.next(new zT(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions?.getValue()?Qa:Promise.resolve(d)}),function i0e(n,e,t,r,i,s){return $i(o=>function Jwe(n,e,t,r,i,s,o="emptyOnly"){return new t0e(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Ve(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ti(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const m=new $8(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:d,extractedUrl:m,source:y,restoredState:b,extras:T}=l,P=new zT(d,this.urlSerializer.serialize(m),y,b);this.events.next(P);const B=K8(this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:B,urlAfterRedirects:m,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=m,Xe(s)}{const d="";return this.events.next(new dg(l.id,this.urlSerializer.serialize(l.extractedUrl),d,HT.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Qa}}),ti(l=>{const c=new ZIe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Ve(l=>(this.currentTransition=s={...l,guards:Ewe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Mwe(n,e){return $i(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Xe({...t,guardsResult:!0}):function Nwe(n,e,t,r){return $n(n).pipe($i(i=>function Bwe(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Xe(s.map(a=>{const l=wb(e)??i,c=pg(a,l);return Gu(function xwe(n){return n&&Db(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):gs(l,()=>c(n,e,t,r))).pipe($u())})).pipe(mg()):Xe(!0)}(i.component,i.route,t,e,r)),$u(i=>!0!==i,!0))}(o,r,i,n).pipe($i(a=>a&&function Twe(n){return"boolean"==typeof n}(a)?function kwe(n,e,t,r){return $n(e).pipe(tg(i=>fb(function Fwe(n,e){return null!==n&&e&&e(new iwe(n)),Xe(!0)}(i.route.parent,r),function Owe(n,e){return null!==n&&e&&e(new owe(n)),Xe(!0)}(i.route,r),function Vwe(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Iwe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>pb(()=>Xe(o.guards.map(l=>{const c=wb(o.node)??t,u=pg(l,c);return Gu(function Dwe(n){return n&&Db(n.canActivateChild)}(u)?u.canActivateChild(r,n):gs(c,()=>u(r,n))).pipe($u())})).pipe(mg())));return Xe(s).pipe(mg())}(n,i.path,t),function Lwe(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const i=r.map(s=>pb(()=>{const o=wb(e)??t,a=pg(s,o);return Gu(function Swe(n){return n&&Db(n.canActivate)}(a)?a.canActivate(e,n):gs(o,()=>a(e,n))).pipe($u())}));return Xe(i).pipe(mg())}(n,i.route,t))),$u(i=>!0!==i,!0))}(r,s,n,e):Xe(a)),Ve(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),ti(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw KT(0,l.guardsResult);const c=new JIe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),ei(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",zo.GuardRejected),!1)),Jk(l=>{if(l.guards.canActivateChecks.length)return Xe(l).pipe(ti(c=>{const u=new ewe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),dn(c=>{let u=!1;return Xe(c).pipe(function s0e(n,e){return $i(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Xe(t);const s=new Set(i.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const c of u9(l))o.add(c);let a=0;return $n(o).pipe(tg(l=>s.has(l)?function o0e(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!X8(i)&&(s[_b]=i.title),function a0e(n,e,t,r){const i=Fk(n);if(0===i.length)return Xe({});const s={};return $n(i).pipe($i(o=>function l0e(n,e,t,r){const i=wb(e)??r,s=pg(n,i);return Gu(s.resolve?s.resolve(e,t):gs(i,()=>s(e,t)))}(n[o],e,t,r).pipe($u(),ti(a=>{if(a instanceof Yk)throw KT(new FT,a);s[o]=a}))),Ok(1),C8(s),Wu(o=>r9(o)?Qa:mb(o)))}(s,n,e,r).pipe(Ve(o=>(n._resolvedData=o,n.data=WT(n,n.parent,t).resolve,null)))}(l,r,n,e):(l.data=WT(l,l.parent,n).resolve,Xe(void 0))),ti(()=>a++),Ok(1),$i(l=>a===o.size?Xe(t):Qa))})}(this.paramsInheritanceStrategy,this.environmentInjector),ti({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",zo.NoDataFromResolver)}}))}),ti(c=>{const u=new twe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Jk(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(ti(m=>{u.component=m}),Ve(()=>{})));for(const m of u.children)d.push(...c(m));return d};return MT(c(l.targetSnapshot.root)).pipe(kT(null),Cs(1))}),Jk(()=>this.afterPreactivation()),dn(()=>{const{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?$n(u).pipe(Ve(()=>s)):Xe(s)}),Ve(l=>{const c=function mwe(n,e,t){const r=Tb(n,e._root,t?t._root:void 0);return new q8(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,s}),ti(()=>{this.events.next(new zk)}),((n,e,t,r)=>Ve(i=>(new bwe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Cs(1),ti({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),gb(this.transitionAbortSubject.pipe(ti(l=>{throw l}))),ng(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",zo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wu(l=>{if(a=!0,t9(l))this.events.next(new cf(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function ywe(n){return t9(n)&&lf(n.url)}(l)?this.events.next(new $T(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{const c=new jk(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{const u=gs(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Yk){const{message:d,cancellationCode:m}=KT(0,u);this.events.next(new cf(s.id,this.urlSerializer.serialize(s.extractedUrl),d,m)),this.events.next(new $T(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);const d=t.errorHandler(l);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Qa}))}))}cancelNavigationTransition(t,r,i){const s=new cf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function m0e(n){return n!==Ib}let g0e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>O(y0e),providedIn:"root"})}}return n})();class _0e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let y0e=(()=>{class n extends _0e{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=$r(n)))(i||n)}})()}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>O(v0e),providedIn:"root"})}}return n})(),v0e=(()=>{class n extends _9{constructor(){super(...arguments),this.location=O(Zm),this.urlSerializer=O(ug),this.options=O(_g,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(nO),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new sf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=K8(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof zT)this.stateMemento=this.createStateMemento();else if(t instanceof dg)this.rawUrlTree=r.initialUrl;else if(t instanceof $8){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof zk?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof cf&&(t.code===zo.GuardRejected||t.code===zo.NoDataFromResolver)?this.restoreHistory(r):t instanceof jk?this.restoreHistory(r,!0):t instanceof xc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof sf?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=$r(n)))(i||n)}})()}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xb=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(xb||{});function y9(n,e){n.events.pipe(ei(t=>t instanceof xc||t instanceof cf||t instanceof jk||t instanceof dg),Ve(t=>t instanceof xc||t instanceof dg?xb.COMPLETE:t instanceof cf&&(t.code===zo.Redirect||t.code===zo.SupersededByNewNavigation)?xb.REDIRECTING:xb.FAILED),ei(t=>t!==xb.REDIRECTING),Cs(1)).subscribe(()=>{e()})}function b0e(n){throw n}const E0e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},I0e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cl=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(M5),this.stateManager=O(_9),this.options=O(_g,{optional:!0})||{},this.pendingTasks=O(pc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(JT),this.urlSerializer=O(ug),this.location=O(Zm),this.urlHandlingStrategy=O(nO),this._events=new E,this.errorHandler=this.options.errorHandler||b0e,this.navigated=!1,this.routeReuseStrategy=O(g0e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(yg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(qT,{optional:!0}),this.eventsSubscription=new kt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof cf&&r.code!==zo.Redirect&&r.code!==zo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xc)this.navigated=!0;else if(r instanceof $T){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||m0e(i.source),...o};this.scheduleNavigation(a,Ib,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function C0e(n){return!(n instanceof zk||n instanceof $T)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ib,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(eO),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=L8(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),d=this.currentUrlTree.root}return V8(d,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=lf(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ib,null,r)}navigate(t,r={skipLocationChange:!1}){return function w0e(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new K(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...E0e}:!1===r?{...I0e}:r,lf(t))return D8(this.currentUrlTree,t,i);const s=this.parseUrl(t);return D8(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,m)=>{a=d,l=m});const u=this.pendingTasks.add();return y9(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class v9{}let S0e=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ei(t=>t instanceof xc),tg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=dC(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return $n(i).pipe(ag())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Xe(null);const s=i.pipe($i(o=>null===o?Xe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?$n([s,this.loader.loadComponent(r)]).pipe(ag()):s})}static{this.\u0275fac=function(r){return new(r||n)(Ae(Cl),Ae(H5),Ae(xi),Ae(v9),Ae(tO))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const iO=new ve("");let b9=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof dg&&t.code===HT.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof W8&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new W8(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function R$(){throw new Error("invalid")}()}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function Tl(n,e){return{\u0275kind:n,\u0275providers:e}}function I9(){const n=O(Sn);return e=>{const t=n.get(fa);if(e!==t.components[0])return;const r=n.get(Cl),i=n.get(w9);1===n.get(sO)&&r.initialNavigation(),n.get(C9,null,Vt.Optional)?.setUpPreloading(),n.get(iO,null,Vt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const w9=new ve("",{factory:()=>new E}),sO=new ve("",{providedIn:"root",factory:()=>1}),C9=new ve("");function P0e(n){return Tl(0,[{provide:C9,useExisting:S0e},{provide:v9,useExisting:n}])}function N0e(n){return Tl(9,[{provide:p9,useValue:f0e},{provide:m9,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const T9=new ve("ROUTER_FORROOT_GUARD"),k0e=[Zm,{provide:ug,useClass:FT},Cl,Cb,{provide:fg,useFactory:function E9(n){return n.routerState.root},deps:[Cl]},tO,[]];let A9=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[k0e,[],{provide:yg,multi:!0,useValue:t},{provide:T9,useFactory:V0e,deps:[[Cl,new Ti,new rc]]},{provide:_g,useValue:r||{}},r?.useHash?{provide:Qh,useClass:X_e}:{provide:Qh,useClass:V7},{provide:iO,useFactory:()=>{const n=O(fve),e=O(_t),t=O(_g),r=O(JT),i=O(ug);return t.scrollOffset&&n.setOffset(t.scrollOffset),new b9(i,r,n,e,t)}},r?.preloadingStrategy?P0e(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?B0e(r):[],r?.bindToComponentInputs?Tl(8,[Z8,{provide:qT,useExisting:Z8}]).\u0275providers:[],r?.enableViewTransitions?N0e().\u0275providers:[],[{provide:S9,useFactory:I9},{provide:FC,multi:!0,useExisting:S9}]]}}static forChild(t){return{ngModule:n,providers:[{provide:yg,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Ae(T9,8))}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({})}}return n})();function V0e(n){return"guarded"}function B0e(n){return["disabled"===n.initialNavigation?Tl(3,[{provide:OC,multi:!0,useFactory:()=>{const e=O(Cl);return()=>{e.setUpLocationChangeListener()}}},{provide:sO,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Tl(2,[{provide:sO,useValue:0},{provide:OC,multi:!0,deps:[Sn],useFactory:e=>{const t=e.get(Q_e,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Cl),s=e.get(w9);y9(i,()=>{r(!0)}),e.get(JT).afterPreactivation=()=>(r(!0),s.closed?Xe(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const S9=new ve("");function D9(n,e=0){return function j0e(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):2===arguments.length?e:0}function eA(n){return Array.isArray(n)?n:[n]}function Ei(n){return null==n?"":"string"==typeof n?n:`${n}px`}function vg(n){return n instanceof lr?n.nativeElement:n}const z0e=["addListener","removeListener"],H0e=["addEventListener","removeEventListener"],$0e=["on","off"];function tA(n,e,t,r){if(ft(t)&&(r=t,t=void 0),r)return tA(n,e,t).pipe(ak(r));const[i,s]=function q0e(n){return ft(n.addEventListener)&&ft(n.removeEventListener)}(n)?H0e.map(o=>a=>n[o](e,a,t)):function W0e(n){return ft(n.addListener)&&ft(n.removeListener)}(n)?z0e.map(x9(n,e)):function G0e(n){return ft(n.on)&&ft(n.off)}(n)?$0e.map(x9(n,e)):[];if(!i&&tk(n))return $i(o=>tA(o,e,t))($s(n));if(!i)throw new TypeError("Invalid event target");return new Lt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function x9(n,e){return t=>r=>n[t](e,r)}class K0e extends kt{constructor(e,t){super()}schedule(e,t=0){return this}}const nA={setInterval(n,e,...t){const{delegate:r}=nA;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=nA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class rA extends K0e{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return nA.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&nA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Zt(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Rb={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Rb;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new kt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Rb;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Rb;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},oO={now:()=>(oO.delegate||Date).now(),delegate:void 0};class Pb{constructor(e,t=Pb.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Pb.now=oO.now;class iA extends Pb{constructor(e,t=Pb.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class Y0e extends iA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Q0e extends rA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Rb.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(Rb.cancelAnimationFrame(t),e._scheduled=void 0)}});let aO,Z0e=1;const sA={};function R9(n){return n in sA&&(delete sA[n],!0)}const J0e={setImmediate(n){const e=Z0e++;return sA[e]=!0,aO||(aO=Promise.resolve()),aO.then(()=>R9(e)&&n()),e},clearImmediate(n){R9(n)}},{setImmediate:eCe,clearImmediate:tCe}=J0e,oA={setImmediate(...n){const{delegate:e}=oA;return(e?.setImmediate||eCe)(...n)},clearImmediate(n){const{delegate:e}=oA;return(e?.clearImmediate||tCe)(n)},delegate:void 0},uf=(new class rCe extends iA{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class nCe extends rA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=oA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(oA.clearImmediate(t),e._scheduled=void 0)}}),new iA(rA)),sCe=uf;function P9(n=0,e,t=sCe){let r=-1;return null!=e&&(k6(e)?t=e:r=e),new Lt(i=>{let s=function aCe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function M9(n,e=uf){return function oCe(n){return me((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(Pe(t,c=>{r=!0,i=c,s||$s(n(c)).subscribe(s=Pe(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>P9(n,e))}let lO;try{lO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{lO=!1}let Mb,Gs=(()=>{class n{_platformId=O(Bs);isBrowser=this._platformId?a6(this._platformId):"object"==typeof document&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!(!window.chrome&&!lO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nb(n){return function lCe(){if(null==Mb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Mb=!0}))}finally{Mb=Mb||!1}return Mb}()?n:!!n.capture}var Al=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Al||{});let aA,df,cO;function k9(){if(null==df){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return df=!1,df;if("scrollBehavior"in document.documentElement.style)df=!0;else{const n=Element.prototype.scrollTo;df=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return df}function kb(){if("object"!=typeof document||!document)return Al.NORMAL;if(null==aA){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),aA=Al.NORMAL,0===n.scrollLeft&&(n.scrollLeft=1,aA=0===n.scrollLeft?Al.NEGATED:Al.INVERTED),n.remove()}return aA}function uO(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Sl(n){return n.composedPath?n.composedPath()[0]:n.target}function O9(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const dCe=new ve("cdk-dir-doc",{providedIn:"root",factory:function hCe(){return O(bn)}}),fCe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ob=(()=>{class n{value="ltr";change=new Fn;constructor(){const t=O(dCe,{optional:!0});t&&(this.value=function pCe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?fCe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({})}return n})(),F9=(()=>{class n{_ngZone=O(_t);_platform=O(Gs);_document=O(bn,{optional:!0});constructor(){}_scrolled=new E;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Lt(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(M9(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Xe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(ei(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=vg(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>tA(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gCe=(()=>{class n{elementRef=O(lr);scrollDispatcher=O(F9);ngZone=O(_t);dir=O(Ob,{optional:!0});_destroyed=new E;_elementScrolled=new Lt(t=>this.ngZone.runOutsideAngular(()=>tA(this.elementRef.nativeElement,"scroll").pipe(gb(this._destroyed)).subscribe(t)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&kb()!=Al.NORMAL?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),kb()==Al.INVERTED?t.left=t.right:kb()==Al.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;k9()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?i:r:"end"==t&&(t=o?r:i),o&&kb()==Al.INVERTED?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&kb()==Al.NEGATED?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),dO=(()=>{class n{_platform=O(Gs);_listeners;_viewportSize;_change=new E;_document=O(bn,{optional:!0});constructor(){const t=O(_t),r=O(Vh).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){const i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(M9(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({})}return n})(),L9=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Fb,lA,Fb,lA]})}return n})();class hO{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class fO extends hO{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=s}}class pO extends hO{templateRef;viewContainerRef;context;injector;constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class yCe extends hO{element;constructor(e){super(),this.element=e instanceof lr?e.nativeElement:e}}class mO{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof fO?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof pO?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof yCe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class vCe extends mO{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,r,i,s){super(),this.outletElement=e,this._appRef=r,this._defaultInjector=i,this._document=s}attachComponentPortal(e){let t;if(e.viewContainerRef){const r=e.injector||e.viewContainerRef.injector,i=r.get(yc,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else t=k7(e.component,{elementInjector:e.injector||this._defaultInjector||Sn.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(t.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(t.hostView),t.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}attachDomPortal=e=>{const t=e.element,r=this._document.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let gO=(()=>{class n extends mO{_moduleRef=O(yc,{optional:!0});_document=O(bn);_viewContainerRef=O(Bo);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new Fn;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,i=r.createComponent(t.component,{index:r.length,injector:t.injector||r.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=t=>{const r=t.element,i=this._document.createComment("dom-portal");t.setAttachedHost(this),r.parentNode.insertBefore(i,r),this._getRootNode().appendChild(r),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(r,i)})};_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[_n]})}return n})(),cA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({})}return n})();const uA=new WeakMap;let hf=(()=>{class n{_appRef;_injector=O(Sn);_environmentInjector=O(xi);load(t){const r=this._appRef=this._appRef||this._injector.get(fa);let i=uA.get(r);i||(i={loaders:new Set,refs:[]},uA.set(r,i),r.onDestroy(()=>{uA.get(r)?.refs.forEach(s=>s.destroy()),uA.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(k7(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),V9=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],standalone:!0,features:[Is],decls:0,vars:0,template:function(r,i){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function ff(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function z9(n,e=uf){return me((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(Pe(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function H9(n){return ei((e,t)=>n<=t)}function yO(n,e=Ci){return n=n??FCe,me((t,r)=>{let i,s=!0;t.subscribe(Pe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function FCe(n,e){return n===e}let LCe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),W9=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[LCe]})}return n})();const G9=new Set;let pf,VCe=(()=>{class n{_platform=O(Gs);_nonce=O(uP,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):UCe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function BCe(n,e){if(!G9.has(n))try{pf||(pf=document.createElement("style"),e&&pf.setAttribute("nonce",e),pf.setAttribute("type","text/css"),document.head.appendChild(pf)),pf.sheet&&(pf.sheet.insertRule(`@media ${n} {body{ }}`,0),G9.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UCe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let q9=(()=>{class n{_mediaMatcher=O(VCe);_zone=O(_t);_queries=new Map;_destroySubject=new E;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return K9(eA(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=MT(K9(eA(t)).map(o=>this._registerQuery(o).observable));return s=fb(s.pipe(Cs(1)),s.pipe(H9(1),z9(0))),s.pipe(Ve(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Lt(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Hu(r),Ve(({matches:o})=>({query:t,matches:o})),gb(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K9(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Y9(n,e,t){const r=X9(n,e);t=t.trim(),!r.some(i=>i.trim()===t)&&(r.push(t),n.setAttribute(e,r.join(" ")))}function vO(n,e,t){const r=X9(n,e);t=t.trim();const i=r.filter(s=>s!==t);i.length?n.setAttribute(e,i.join(" ")):n.removeAttribute(e)}function X9(n,e){return n.getAttribute(e)?.match(/\S+/g)??[]}class Z9{_letterKeyStream=new E;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new E;selectedItem=this._selectedItem;constructor(e,t){const r="number"==typeof t?.debounceInterval?t.debounceInterval:200;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){const t=e.keyCode;e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(ti(t=>this._pressedLetters.push(t)),z9(e),ei(()=>this._pressedLetters.length>0),Ve(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let r=1;r<this._items.length+1;r++){const s=this._items[(this._selectedItemIndex+r)%this._items.length];if(!this._skipPredicateFn?.(s)&&0===s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)){this._selectedItem.next(s);break}}this._pressedLetters=[]})}}class WCe{_items;_activeItemIndex=-1;_activeItem=Bh(null);_wrap=!1;_typeaheadSubscription=kt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof _m?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):Tv(e)&&(this._effectRef=function N7(n,e){Us("NgSignals"),!e?.injector&&Pr();const t=e?.injector??O(Sn),r=!0!==e?.manualCleanup?t.get(Xy):null,i=new W_e(t.get(z_e),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(wc,null,{optional:!0});return s&&8&s._lView[ct]?(s._lView[_h]??=[]).push(i.watcher.notify):i.watcher.notify(),i}(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new E;change=new E;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();const t=this._getItemsArray();return this._typeahead=new Z9(t,{debounceInterval:"number"==typeof e?e:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&i){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((i||ff(e,"shiftKey"))&&this._typeahead?.handleKey(e))}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem.set(t[r]??null),this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return Tv(this._items)?this._items():this._items instanceof _m?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);const t=this._activeItem();if(t){const r=e.indexOf(t);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r))}}}class GCe extends WCe{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let tK=(()=>{class n{_platform=O(Gs);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function XCe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function YCe(n){try{return n.frameElement}catch{return null}}(function sTe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===rK(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=rK(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function rTe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function iTe(n){return!function JCe(n){return function tTe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function ZCe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function eTe(n){return function nTe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||nK(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nK(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function rK(n){if(!nK(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class iK{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,r,i,s=!1,o){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._injector=o,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Mu(e,{injector:this._injector}):setTimeout(e)}}let oTe=(()=>{class n{_checker=O(tK);_ngZone=O(_t);_document=O(bn);_injector=O(Sn);constructor(){O(hf).load(V9)}create(t,r=!1){return new iK(t,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sK(n){return 0===n.buttons||0===n.detail}function oK(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const aTe=new ve("cdk-input-modality-detector-options"),lTe={ignoreKeys:[18,17,224,91,16]},Eg=Nb({passive:!0,capture:!0});let cTe=(()=>{class n{_platform=O(Gs);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new F(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Sl(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(sK(t)?"keyboard":"mouse"),this._mostRecentTarget=Sl(t))};_onTouchstart=t=>{oK(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Sl(t))};constructor(){const t=O(_t),r=O(bn),i=O(aTe,{optional:!0});this._options={...lTe,...i},this.modalityDetected=this._modality.pipe(H9(1)),this.modalityChanged=this.modalityDetected.pipe(yO()),this._platform.isBrowser&&t.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Eg),r.addEventListener("mousedown",this._onMousedown,Eg),r.addEventListener("touchstart",this._onTouchstart,Eg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Eg),document.removeEventListener("mousedown",this._onMousedown,Eg),document.removeEventListener("touchstart",this._onTouchstart,Eg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hA=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(hA||{});const dTe=new ve("cdk-focus-monitor-default-options"),fA=Nb({passive:!0,capture:!0});let lK=(()=>{class n{_ngZone=O(_t);_platform=O(Gs);_inputModalityDetector=O(cTe);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=O(bn,{optional:!0});_stopInputModalityDetector=new E;constructor(){const t=O(dTe,{optional:!0});this._detectionMode=t?.detectionMode||hA.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{for(let i=Sl(t);i;i=i.parentElement)"focus"===t.type?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){const i=vg(t);if(!this._platform.isBrowser||1!==i.nodeType)return Xe();const s=function uCe(n){if(function cCe(){if(null==cO){const n=typeof document<"u"?document.head:null;cO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return cO}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new E,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=vg(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=vg(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===hA.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===hA.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Sl(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,fA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,fA)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gb(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,fA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,fA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mf=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(mf||{});const cK="cdk-high-contrast-black-on-white",uK="cdk-high-contrast-white-on-black",bO="cdk-high-contrast-active";let dK=(()=>{class n{_platform=O(Gs);_hasCheckedHighContrastMode;_document=O(bn);_breakpointSubscription;constructor(){this._breakpointSubscription=O(q9).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return mf.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return mf.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return mf.BLACK_ON_WHITE}return mf.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(bO,cK,uK),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===mf.BLACK_ON_WHITE?t.add(bO,cK):r===mf.WHITE_ON_BLACK&&t.add(bO,uK)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hTe=(()=>{class n{constructor(){O(dK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[W9]})}return n})();const EO={};let Ig=(()=>{class n{_appId=O(xh);getId(t){return"ng"!==this._appId&&(t+=this._appId),EO.hasOwnProperty(t)||(EO[t]=0),`${t}${EO[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qu(...n){const e=rb(n),t=function _be(n,e){return"number"==typeof JN(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?$s(r[0]):ag(t)($n(r,e)):Qa}const hK=k9();class fTe{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ei(-this._previousScrollPosition.left),e.style.top=Ei(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),hK&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),hK&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class pTe{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(ei(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}class fK{enable(){}disable(){}attach(){}}function IO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function pK(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class mTe{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();IO(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let gTe=(()=>{class n{_scrollDispatcher=O(F9);_viewportRuler=O(dO);_ngZone=O(_t);_document=O(bn);constructor(){}noop=()=>new fK;close=t=>new pTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,t);block=()=>new fTe(this._viewportRuler,this._document);reposition=t=>new mTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,t);static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class wO{positionStrategy;scrollStrategy=new fK;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class _Te{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let mK=(()=>{class n{_attachedOverlays=[];_document=O(bn);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yTe=(()=>{class n extends mK{_ngZone=O(_t);_renderer=O(Vh).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{const r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=$r(n)))(i||n)}})();static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vTe=(()=>{class n extends mK{_platform=O(Gs);_ngZone=O(_t,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=t=>{this._pointerDownEventTarget=Sl(t)};_clickListener=t=>{const r=Sl(t),i="click"===t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;const s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){const a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(gK(a.overlayElement,r)||gK(a.overlayElement,i))break;const l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=$r(n)))(i||n)}})();static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gK(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let _K=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],standalone:!0,features:[Is],decls:0,vars:0,template:function(r,i){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),CO=(()=>{class n{_platform=O(Gs);_containerElement;_document=O(bn);_styleLoader=O(hf);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||O9()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),O9()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(_K)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class TO{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropElement=null;_backdropTimeout;_backdropClick=new E;_attachments=new E;_detachments=new E;_positionStrategy;_scrollStrategy;_locationChanges=kt.EMPTY;_cleanupBackdropClick;_cleanupBackdropTransitionEnd;_previousHostParent;_keydownEvents=new E;_outsidePointerEvents=new E;_renders=new E;_afterRenderRef;_afterNextRenderRef;constructor(e,t,r,i,s,o,a,l,c,u=!1,d,m){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=m,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=Wa(()=>function p3(n,e){!e?.injector&&Pr();const t=e?.injector??O(Sn);return Vo(t)?(Us("NgAfterRender"),m3(n,t,e,!1)):g3}(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Mu(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ei(this._config.width),e.height=Ei(this._config.height),e.minWidth=Ei(this._config.minWidth),e.minHeight=Ei(this._config.minHeight),e.maxWidth=Ei(this._config.maxWidth),e.maxHeight=Ei(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._cleanupBackdropClick?.(),this._cleanupBackdropClick=this._renderer.listen(this._backdropElement,"click",t=>this._backdropClick.next(t)),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{this._cleanupBackdropTransitionEnd?.(),this._cleanupBackdropTransitionEnd=this._renderer.listen(e,"transitionend",t=>{this._disposeBackdrop(t.target)})}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=eA(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(gb(qu(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){this._cleanupBackdropClick?.(),this._cleanupBackdropTransitionEnd?.(),e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const yK="cdk-overlay-connected-position-bounding-box",bTe=/([A-Za-z%]+)$/;class ETe{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new E;_resizeSubscription=kt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(yK),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&gf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(yK),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=bK(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let m=0-a,y=a+s.height-r.height,b=this._subtractOverflows(s.width,0-o,o+s.width-r.width),T=this._subtractOverflows(s.height,m,y),P=b*T;return{visibleArea:P,isCompletelyWithinViewport:s.width*s.height===P,fitsInViewportVertically:T===s.height,fitsInViewportHorizontally:b==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=vK(this._overlayRef.getConfig().minHeight),a=vK(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=bK(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,d=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,d=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function ITe(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,r)){const i=new _Te(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,d,m;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const y=Math.min(r.bottom-e.y+r.top,e.y),b=this._lastBoundingBoxSize.height;s=2*y,o=e.y-y,s>b&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-b/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)m=r.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)d=e.x,u=r.right-e.x;else{const y=Math.min(r.right-e.x+r.left,e.x),b=this._lastBoundingBoxSize.width;u=2*y,d=e.x-y,u>b&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-b/2)}return{top:o,left:d,bottom:a,right:m,width:u,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Ei(r.height),i.top=Ei(r.top),i.bottom=Ei(r.bottom),i.width=Ei(r.width),i.left=Ei(r.left),i.right=Ei(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Ei(s)),o&&(i.maxWidth=Ei(o))}this._lastBoundingBoxSize=r,gf(this._boundingBox.style,i)}_resetBoundingBoxStyles(){gf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){gf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();gf(r,this._getExactOverlayY(t,e,u)),gf(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Ei(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Ei(o.maxWidth):s&&(r.maxWidth="")),gf(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Ei(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Ei(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:pK(e,r),isOriginOutsideView:IO(e,r),isOverlayClipped:pK(t,r),isOverlayOutsideView:IO(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&eA(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof lr)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function gf(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function vK(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(bTe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function bK(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const EK="cdk-global-overlay-wrapper";class wTe{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(EK),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let y="",b="",T="";l?T="flex-start":"center"===u?(T="center",m?b=d:y=d):m?"left"===u||"end"===u?(T="flex-end",y=d):("right"===u||"start"===u)&&(T="flex-start",b=d):"left"===u||"start"===u?(T="flex-start",y=d):("right"===u||"end"===u)&&(T="flex-end",b=d),e.position=this._cssPosition,e.marginLeft=l?"0":y,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":b,t.justifyContent=T,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(EK),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let CTe=(()=>{class n{_viewportRuler=O(dO);_document=O(bn);_platform=O(Gs);_overlayContainer=O(CO);constructor(){}global(){return new wTe}flexibleConnectedTo(t){return new ETe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yo=(()=>{class n{scrollStrategies=O(gTe);_overlayContainer=O(CO);_positionBuilder=O(CTe);_keyboardDispatcher=O(yTe);_injector=O(Sn);_ngZone=O(_t);_document=O(bn);_directionality=O(Ob);_location=O(Zm);_outsideClickDispatcher=O(vTe);_animationsModuleType=O(mc,{optional:!0});_idGenerator=O(Ig);_renderer=O(Vh).createRenderer(null,null);_appRef;_styleLoader=O(hf);constructor(){}create(t){this._styleLoader.load(_K);const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new wO(t);return o.direction=o.direction||this._directionality.value,new TO(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(xi),this._renderer)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id=this._idGenerator.getId("cdk-overlay-"),r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(fa)),new vCe(t,null,this._appRef,this._injector,this._document)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const STe={provide:new ve("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=O(yo);return()=>n.scrollStrategies.reposition()}}),deps:[yo],useFactory:function ATe(n){return()=>n.scrollStrategies.reposition()}};let pA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[yo,STe],imports:[Fb,cA,L9,L9]})}return n})();function DTe(n,e){}class Lb{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext}let IK=(()=>{class n extends mO{_elementRef=O(lr);_focusTrapFactory=O(oTe);_config;_interactivityChecker=O(tK);_ngZone=O(_t);_overlayRef=O(TO);_focusMonitor=O(lK);_renderer=O(Ua);_platform=O(Gs);_document=O(bn,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=O(wc);_injector=O(Sn);_isDestroyed=!1;constructor(){super(),this._config=O(Lb,{optional:!0})||new Lb,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}attachDomPortal=t=>{this._portalOutlet.hasAttached();const r=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{s(),o(),t.removeAttribute("tabindex")},s=this._renderer.listen(t,"blur",i),o=this._renderer.listen(t,"mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){this._isDestroyed||Mu(()=>{const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=uO(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=uO();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=uO()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&Qm(gO,7),2&r){let s;bc(s=Ec())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&Jr("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},standalone:!0,features:[_n,Is],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&Ut(0,DTe,0,0,"ng-template",0)},dependencies:[gO],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class AO{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new E;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!ff(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const wK=new ve("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=O(yo);return()=>n.scrollStrategies.block()}}),xTe=new ve("DialogData"),RTe=new ve("DefaultDialogConfig");let CK=(()=>{class n{_overlay=O(yo);_injector=O(Sn);_defaultOptions=O(RTe,{optional:!0});_parentDialog=O(n,{optional:!0,skipSelf:!0});_overlayContainer=O(CO);_idGenerator=O(Ig);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;_ariaHiddenElements=new Map;_scrollStrategy=O(wK);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=pb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Hu(void 0)));constructor(){}open(t,r){(r={...this._defaultOptions||new Lb,...r}).id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),o=this._overlay.create(s),a=new AO(o,r),l=this._attachContainer(o,a,r);return a.containerInstance=l,this._attachDialogContent(t,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){SO(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){SO(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),SO(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new wO({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,o=[{provide:Lb,useValue:i},{provide:AO,useValue:r},{provide:TO,useValue:t}];let a;i.container?"function"==typeof i.container?a=i.container:(a=i.container.type,o.push(...i.container.providers(i))):a=IK;const l=new fO(a,i.viewContainerRef,Sn.create({parent:s||this._injector,providers:o}));return t.attach(l).instance}_attachDialogContent(t,r,i,s){if(t instanceof Ba){const o=this._createInjector(s,r,i,void 0);let a={$implicit:s.data,dialogRef:r};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new pO(t,null,a,o))}else{const o=this._createInjector(s,r,i,this._injector),a=i.attachComponentPortal(new fO(t,s.viewContainerRef,o));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,i,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:xTe,useValue:t.data},{provide:AO,useValue:r}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(r,t,i)):a.push(...t.providers)),t.direction&&(!o||!o.get(Ob,null,{optional:!0}))&&a.push({provide:Ob,useValue:{value:t.direction,change:Xe()}}),Sn.create({parent:o||s,providers:a})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SO(n,e){let t=n.length;for(;t--;)e(n[t])}let MTe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[CK],imports:[pA,cA,hTe,cA]})}return n})();const NTe=["text"],kTe=[[["mat-icon"]],"*"],OTe=["mat-icon","*"];function FTe(n,e){if(1&n&&ln(0,"mat-pseudo-checkbox",1),2&n){const t=gt();rt("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function LTe(n,e){1&n&&ln(0,"mat-pseudo-checkbox",3),2&n&&rt("disabled",gt().disabled)}function VTe(n,e){if(1&n&&(De(0,"span",4),ut(1),Me()),2&n){const t=gt();Oe(),Qn("(",t.group.label,")")}}let Wr=(()=>{class n{constructor(){O(dK)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Fb,Fb]})}return n})(),TK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["structural-styles"]],standalone:!0,features:[Is],decls:0,vars:0,template:function(r,i){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var _a=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(_a||{});class $Te{_renderer;element;config;_animationForciblyDisabledThroughCss;state=_a.HIDDEN;constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}}const AK=Nb({passive:!0,capture:!0});class WTe{_events=new Map;addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,AK)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,AK)))}_delegateEventHandler=e=>{const t=Sl(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}const mA={enterDuration:225,exitDuration:150},SK=Nb({passive:!0,capture:!0}),DK=["mousedown","touchstart"],xK=["mouseup","mouseleave","touchend","touchcancel"];let qTe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],standalone:!0,features:[Is],decls:0,vars:0,template:function(r,i){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})();class Bb{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new WTe;constructor(e,t,r,i,s){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=vg(r)),s&&s.get(hf).load(qTe)}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...mA,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function KTe(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),y=d.transitionDuration,b="none"===d.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,T=new $Te(this,u,r,b);u.style.transform="scale3d(1, 1, 1)",T.state=_a.FADING_IN,r.persistent||(this._mostRecentTransientRipple=T);let P=null;return!b&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const B=()=>{P&&(P.fallbackTimer=null),clearTimeout(Q),this._finishRippleTransition(T)},V=()=>this._destroyRipple(T),Q=setTimeout(V,c+100);u.addEventListener("transitionend",B),u.addEventListener("transitioncancel",V),P={onTransitionEnd:B,onTransitionCancel:V,fallbackTimer:Q}}),this._activeRipples.set(T,P),(b||!c)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(e.state===_a.FADING_OUT||e.state===_a.HIDDEN)return;const t=e.element,r={...mA,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=_a.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=vg(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,DK.forEach(r=>{Bb._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{xK.forEach(t=>{this._triggerElement.addEventListener(t,this,SK)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===_a.FADING_IN?this._startFadeOutTransition(e):e.state===_a.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=_a.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=_a.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=sK(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!oK(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===_a.VISIBLE||e.config.terminateOnPointerUp&&e.state===_a.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(DK.forEach(t=>Bb._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(xK.forEach(t=>e.removeEventListener(t,this,SK)),this._pointerUpEventsRegistered=!1))}}const RK=new ve("mat-ripple-global-options");let QTe=(()=>{class n{_elementRef=O(lr);_animationMode=O(mc,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){const t=O(_t),r=O(Gs),i=O(RK,{optional:!0}),s=O(Sn);this._globalOptions=i||{},this._rippleRenderer=new Bb(this,t,this._elementRef,r,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&Es("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),PK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr,Wr]})}return n})(),YTe=(()=>{class n{_animationMode=O(mc,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,i){2&r&&Es("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Is],decls:0,vars:0,template:function(r,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})(),XTe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr]})}return n})();const MK=new ve("MAT_OPTION_PARENT_COMPONENT"),NK=new ve("MatOptgroup");class kK{source;isUserInput;constructor(e,t=!1){this.source=e,this.isUserInput=t}}let OK=(()=>{class n{_element=O(lr);_changeDetectorRef=O(wc);_parent=O(MK,{optional:!0});group=O(NK,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=O(Ig).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=t}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}onSelectionChange=new Fn;_text;_stateChanges=new E;constructor(){O(hf).load(TK),O(hf).load(V9),this._signalDisableRipple=!!this._parent&&Tv(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!ff(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new kK(this,t))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["mat-option"]],viewQuery:function(r,i){if(1&r&&Qm(NTe,7),2&r){let s;bc(s=Ec())&&(i._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,i){1&r&&Dn("click",function(){return i._selectViaInteraction()})("keydown",function(o){return i._handleKeydown(o)}),2&r&&(Fv("id",i.id),Jr("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),Es("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",rs]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Uh,Is],ngContentSelectors:OTe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,i){1&r&&(Wh(kTe),Ut(0,FTe,1,2,"mat-pseudo-checkbox",1),da(1),De(2,"span",2,0),da(4,1),Me(),Ut(5,LTe,1,1,"mat-pseudo-checkbox",3)(6,VTe,2,1,"span",4),ln(7,"div",5)),2&r&&(IC(i.multiple?0:-1),Oe(5),IC(i.multiple||!i.selected||i.hideSingleSelectionIndicator?-1:5),Oe(),IC(i.group&&i.group._inert?6:-1),Oe(),rt("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[YTe,QTe],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),Cg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[PK,Wr,XTe]})}return n})();const FK={capture:!0},LK=["focus","mousedown","mouseenter","touchstart"],DO="mat-ripple-loader-uninitialized",xO="mat-ripple-loader-class-name",VK="mat-ripple-loader-centered",gA="mat-ripple-loader-disabled";let eAe=(()=>{class n{_document=O(bn,{optional:!0});_animationMode=O(mc,{optional:!0});_globalRippleOptions=O(RK,{optional:!0});_platform=O(Gs);_ngZone=O(_t);_injector=O(Sn);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(const t of LK)this._document?.addEventListener(t,this._onInteraction,FK)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of LK)this._document?.removeEventListener(r,this._onInteraction,FK)}configureRipple(t,r){t.setAttribute(DO,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(xO))&&t.setAttribute(xO,r.className||""),r.centered&&t.setAttribute(VK,""),r.disabled&&t.setAttribute(gA,"")}setDisabled(t,r){const i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(gA,""):t.removeAttribute(gA)}_onInteraction=t=>{const r=Sl(t);if(r instanceof HTMLElement){const i=r.closest(`[${DO}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(xO)),t.append(r);const i="NoopAnimations"===this._animationMode,s=this._globalRippleOptions,o=i?0:s?.animation?.enterDuration??mA.enterDuration,a=i?0:s?.animation?.exitDuration??mA.exitDuration,l={rippleDisabled:i||s?.disabled||t.hasAttribute(gA),rippleConfig:{centered:t.hasAttribute(VK),terminateOnPointerUp:s?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:a}}},c=new Bb(l,this._ngZone,r,this._platform,this._injector),u=!l.rippleDisabled;u&&c.setupTriggerEvents(t),this._hosts.set(t,{target:l,renderer:c,hasSetUpEvents:u}),t.removeAttribute(DO)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Rt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Rt||{});const Rc="*";function Ub(n,e){return{type:Rt.Trigger,name:n,definitions:e,options:{}}}function Ku(n,e=null){return{type:Rt.Animate,styles:e,timings:n}}function RO(n,e=null){return{type:Rt.Group,steps:n,options:e}}function qs(n){return{type:Rt.Style,styles:n,offset:null}}function jb(n,e,t){return{type:Rt.State,name:n,styles:e,options:t}}function Qu(n,e,t=null){return{type:Rt.Transition,expr:n,animation:e,options:t}}class zb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class BK{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function oAe(n,e){}class UK{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration}const kO="mdc-dialog--open",jK="mdc-dialog--opening",zK="mdc-dialog--closing";let HK=(()=>{class n extends IK{_animationMode=O(mc,{optional:!0});_animationStateChanged=new Fn;_animationsEnabled="NoopAnimations"!==this._animationMode;_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?WK(this._config.enterAnimationDuration)??150:0;_exitAnimationDuration=this._animationsEnabled?WK(this._config.exitAnimationDuration)??75:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty($K,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(jK,kO)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(kO),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(kO),this._animationsEnabled?(this._hostElement.style.setProperty($K,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(zK)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(jK,zK)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$r(n)))(i||n)}})();static \u0275cmp=Ur({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){2&r&&(Fv("id",i._config.id),Jr("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Es("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},standalone:!0,features:[_n,Is],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(De(0,"div",0)(1,"div",1),Ut(2,oAe,0,0,"ng-template",2),Me()())},dependencies:[gO],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})();const $K="--mat-dialog-transition-duration";function WK(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?D9(n.substring(0,n.length-2)):n.endsWith("s")?1e3*D9(n.substring(0,n.length-1)):"0"===n?0:null}var _A=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(_A||{});class Hb{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new E;_beforeClosed=new E;_result;_closeFallbackTimeout;_state=_A.OPEN;_closeInteractionType;constructor(e,t,r){this._ref=e,this._containerInstance=r,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(ei(i=>"opened"===i.state),Cs(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(ei(i=>"closed"===i.state),Cs(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),qu(this.backdropClick(),this.keydownEvents().pipe(ei(i=>27===i.keyCode&&!this.disableClose&&!ff(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function GK(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(ei(t=>"closing"===t.state),Cs(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=_A.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=_A.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const qK=new ve("MatMdcDialogData"),cAe=new ve("mat-mdc-dialog-default-options"),KK=new ve("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=O(yo);return()=>n.scrollStrategies.block()}});let yA=(()=>{class n{_overlay=O(yo);_defaultOptions=O(cAe,{optional:!0});_scrollStrategy=O(KK);_parentDialog=O(n,{optional:!0,skipSelf:!0});_idGenerator=O(Ig);_dialog=O(CK);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new E;_afterOpenedAtThisLevel=new E;dialogConfigClass=UK;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=pb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Hu(void 0)));constructor(){this._dialogRefConstructor=Hb,this._dialogContainerType=HK,this._dialogDataToken=qK}open(t,r){let i;(r={...this._defaultOptions||new UK,...r}).id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:Lb,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(o,a,l)=>(i=new this._dialogRefConstructor(o,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=s.componentRef,i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QK=(()=>{class n{_dialogRef=O(Hb,{optional:!0});_elementRef=O(lr);_dialog=O(yA);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=function XK(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,standalone:!0})}return n})(),OO=(()=>{class n extends QK{id=O(Ig).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$r(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,i){2&r&&Fv("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[_n]})}return n})(),YK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[JW([gCe])]})}return n})();let fAe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[yA],imports:[MTe,pA,cA,Wr,Wr]})}return n})(),pAe=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r,this.message=r.message||"\u8acb\u7a0d\u5f8c\u518d\u8a66",this.imgPath=r.imgPath||""}close(){this.dialogRef.close()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(Re(Hb),Re(qK))}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-message-dialog"]],decls:11,vars:2,consts:[["mat-dialog-title","",1,"text-xl","font-semibold","text-primary-default","mb-4"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],[1,"flex","w-4/5","items-center","justify-start"],["alt","\u7121\u641c\u5c0b\u7d50\u679c",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24",3,"src"],[1,"text-primary-default","sm:text-xl","font-bold","ml-2","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],[1,"flex","items-center","bg-primary-white","justify-center","py-3"],[1,"px-2","py-2","text-white","bg-success","rounded-full","hover:bg-primary-default","focus:outline-none","focus:ring-2","focus:ring-primary-light",3,"click"]],template:function(r,i){1&r&&(De(0,"h1",0),ut(1," \u63d0\u793a\n"),Me(),De(2,"div",1)(3,"div",2),ln(4,"img",3),De(5,"h5",4)(6,"div"),ut(7),Me()()()(),De(8,"div",5)(9,"button",6),Dn("click",function(){return i.close()}),ut(10," \u95dc\u9589 "),Me()()),2&r&&(Oe(4),rt("src",i.imgPath,Fo),Oe(3),Qn(" ",i.message," "))},dependencies:[OO]})}}return n})();var Bn=G(1631);(0,Bn.registerVersion)("firebase","10.14.1","app");const vAe=new class yAe extends iA{}(class _Ae extends rA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Yu=new qh("ANGULARFIRE2_VERSION");function JK(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const FO=(n,e)=>{const t=e?[e]:(0,Bn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class vA{constructor(){return FO(EAe)}}const EAe="app-check";function Tg(){}class eQ{zone;delegate;constructor(e,t=vAe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class IAe{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tg,{},Tg,Tg)),t.pipe(ti({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ag=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new eQ(Zone.current)),this.insideAngular=t.run(()=>new eQ(Zone.current,uf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ae(_t))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sg(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function _f(n){return Sg().ngZone.run(()=>n())}function ki(n){return function CAe(n){return function(t){return(t=t.lift(new IAe(n.ngZone))).pipe(Xh(n.outsideAngular),Lu(n.insideAngular))}}(Sg())(n)}const TAe=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),_f(()=>n.apply(void 0,r))},Pc=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=_f(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tg,{},Tg,Tg))),r[s]=TAe(r[s],t));const i=function wAe(n){return Sg().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Lt){const s=Sg();return i.pipe(Xh(s.outsideAngular),Lu(s.insideAngular))}return _f(()=>i)}return i instanceof Lt?i.pipe(ki):i instanceof Promise?_f(()=>new Promise((s,o)=>i.then(a=>_f(()=>s(a)),a=>_f(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:_f(()=>i)};class $b{constructor(e){return e}}class LO{constructor(){return(0,Bn.getApps)()}}const VO=new ve("angularfire2._apps"),SAe={provide:$b,useFactory:function AAe(n){return n&&1===n.length?n[0]:new $b((0,Bn.getApp)())},deps:[[new Ti,VO]]},DAe={provide:LO,deps:[[new Ti,VO]]};function xAe(n){return(e,t)=>{const r=t.get(Bs);(0,Bn.registerVersion)("angularfire",Yu.full,"core"),(0,Bn.registerVersion)("angularfire",Yu.full,"app"),(0,Bn.registerVersion)("angular",P5.full,r.toString());const i=e.runOutsideAngular(()=>n(t));return new $b(i)}}function RAe(n,...e){return dl([SAe,DAe,{provide:VO,useFactory:xAe(n),multi:!0,deps:[_t,Sn,Ag,...e]}])}const PAe=Pc(Bn.initializeApp,!0);var Xu=G(443),N=G(1401),vo=G(5398),Ho=G(8779);class bA{constructor(e){return e}}const BO=new ve("angularfire2.auth-instances");function kAe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new bA(r)}}const OAe={provide:class MAe{constructor(){return FO("auth")}},deps:[[new Ti,BO]]},FAe={provide:bA,useFactory:function NAe(n,e){const t=JK("auth",n,e);return t&&new bA(t)},deps:[[new Ti,BO],$b]};function LAe(n,...e){return(0,Bn.registerVersion)("angularfire",Yu.full,"auth"),dl([FAe,OAe,{provide:BO,useFactory:kAe(n),multi:!0,deps:[_t,Sn,Ag,LO,[new Ti,vA],...e]}])}const VAe=Pc(Xu.aa,!0),BAe=Pc(Xu.o,!0),UAe=Pc(Xu.y,!0),UO=Pc(Xu.ag,!0),jAe=Pc(Xu.ab,!0),zAe=Pc(Xu.c,!0),HAe=Pc(Xu.ak,!0),ze=function(n,e){if(!n)throw Dg(e)},Dg=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},nQ=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},zO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let m=(15&a)<<2|c>>6,y=63&c;l||(y=64,o||(m=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nQ(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new WAe;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class WAe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rQ=function(n){const e=nQ(n);return zO.encodeByteArray(e,!0)},EA=function(n){return rQ(n).replace(/\./g,"")},IA=function(n){try{return zO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function GAe(n){return iQ(void 0,n)}function iQ(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!qAe(t)||(n[t]=iQ(n[t],e[t]));return n}function qAe(n){return"__proto__"!==n}const wA=()=>{try{return function KAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&IA(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},sQ=n=>{var e,t;return null===(t=null===(e=wA())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},oQ=()=>{var n;return null===(n=wA())||void 0===n?void 0:n.config},aQ=n=>{var e;return null===(e=wA())||void 0===e?void 0:e[`_${n}`]};class CA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function is(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function HO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(is())}function lQ(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class Zu extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Zu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wb.prototype.create)}}class Wb{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function lSe(n,e){return n.replace(cSe,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Zu(i,`${this.serviceName}: ${o} (${i}).`,r)}}const cSe=/\{\$([^}]+)}/g;function Gb(n){return JSON.parse(n)}function Oi(n){return JSON.stringify(n)}const TA=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=Gb(IA(s[0])||""),t=Gb(IA(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Dl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function xg(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function $O(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function AA(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function SA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(cQ(s)&&cQ(o)){if(!SA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function cQ(n){return null!==n&&"object"==typeof n}function Rg(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class hSe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const m=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(m<<1|m>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const m=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class pSe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function mSe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=WO),void 0===i.error&&(i.error=WO),void 0===i.complete&&(i.complete=WO);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WO(){}function Pg(n,e){return`${n} failed: ${e} argument `}const DA=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function ya(n){return n&&n._delegate?n._delegate:n}class yf{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vf="[DEFAULT]";class ISe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new CA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function CSe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=vf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,k.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=vf){return this.instances.has(e)}getOptions(e=vf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===vf?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=vf){return this.component?this.component.multipleInstances?e:vf:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class TSe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ISe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const GO=[];var Xn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Xn||{});const uQ={debug:Xn.DEBUG,verbose:Xn.VERBOSE,info:Xn.INFO,warn:Xn.WARN,error:Xn.ERROR,silent:Xn.SILENT},ASe=Xn.INFO,SSe={[Xn.DEBUG]:"log",[Xn.VERBOSE]:"log",[Xn.INFO]:"info",[Xn.WARN]:"warn",[Xn.ERROR]:"error"},DSe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=SSe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class qO{constructor(e){this.name=e,this._logLevel=ASe,this._logHandler=DSe,this._userLogHandler=null,GO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?uQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xn.DEBUG,...e),this._logHandler(this,Xn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xn.VERBOSE,...e),this._logHandler(this,Xn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xn.INFO,...e),this._logHandler(this,Xn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xn.WARN,...e),this._logHandler(this,Xn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xn.ERROR,...e),this._logHandler(this,Xn.ERROR,...e)}}var dQ=G(6749);class xSe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function RSe(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const xA="@firebase/app",KO="0.10.17",Nc=new qO("@firebase/app"),PSe="@firebase/app-compat",MSe="@firebase/analytics-compat",NSe="@firebase/analytics",kSe="@firebase/app-check-compat",OSe="@firebase/app-check",FSe="@firebase/auth",LSe="@firebase/auth-compat",VSe="@firebase/database",BSe="@firebase/data-connect",USe="@firebase/database-compat",jSe="@firebase/functions",zSe="@firebase/functions-compat",HSe="@firebase/installations",$Se="@firebase/installations-compat",WSe="@firebase/messaging",GSe="@firebase/messaging-compat",qSe="@firebase/performance",KSe="@firebase/performance-compat",QSe="@firebase/remote-config",YSe="@firebase/remote-config-compat",XSe="@firebase/storage",ZSe="@firebase/storage-compat",JSe="@firebase/firestore",eDe="@firebase/vertexai",tDe="@firebase/firestore-compat",nDe="firebase",RA="[DEFAULT]",iDe={[xA]:"fire-core",[PSe]:"fire-core-compat",[NSe]:"fire-analytics",[MSe]:"fire-analytics-compat",[OSe]:"fire-app-check",[kSe]:"fire-app-check-compat",[FSe]:"fire-auth",[LSe]:"fire-auth-compat",[VSe]:"fire-rtdb",[BSe]:"fire-data-connect",[USe]:"fire-rtdb-compat",[jSe]:"fire-fn",[zSe]:"fire-fn-compat",[HSe]:"fire-iid",[$Se]:"fire-iid-compat",[WSe]:"fire-fcm",[GSe]:"fire-fcm-compat",[qSe]:"fire-perf",[KSe]:"fire-perf-compat",[QSe]:"fire-rc",[YSe]:"fire-rc-compat",[XSe]:"fire-gcs",[ZSe]:"fire-gcs-compat",[JSe]:"fire-fst",[tDe]:"fire-fst-compat",[eDe]:"fire-vertex","fire-js":"fire-js",[nDe]:"fire-js-all"},bf=new Map,qb=new Map,Kb=new Map;function hQ(n,e){try{n.container.addComponent(e)}catch(t){Nc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mg(n){const e=n.name;if(Kb.has(e))return Nc.debug(`There were multiple attempts to register component ${e}.`),!1;Kb.set(e,n);for(const t of bf.values())hQ(t,n);for(const t of qb.values())hQ(t,n);return!0}function PA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ju(n){return void 0!==n.settings}const va=new Wb("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class fQ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw va.create("app-deleted",{appName:this._name})}}const Ng="11.1.0";function pQ(n=RA){const e=bf.get(n);if(!e&&n===RA&&oQ())return function lDe(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:RA,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw va.create("bad-app-name",{appName:String(i)});if(t||(t=oQ()),!t)throw va.create("no-options");const s=bf.get(i);if(s){if(SA(t,s.options)&&SA(r,s.config))return s;throw va.create("duplicate-app",{appName:i})}const o=new TSe(i);for(const l of Kb.values())o.addComponent(l);const a=new fQ(t,r,o);return bf.set(i,a),a}();if(!e)throw va.create("no-app",{appName:n});return e}function ed(n,e,t){var r;let i=null!==(r=iDe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Nc.warn(a.join(" "))}Mg(new yf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const uDe="firebase-heartbeat-database",dDe=1,Qb="firebase-heartbeat-store";let YO=null;function mQ(){return YO||(YO=(0,dQ.P2)(uDe,dDe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(Qb)}catch(t){console.warn(t)}}}).catch(n=>{throw va.create("idb-open",{originalErrorMessage:n.message})})),YO}function XO(){return(XO=(0,k.A)(function*(n){try{const t=(yield mQ()).transaction(Qb),r=yield t.objectStore(Qb).get(_Q(n));return yield t.done,r}catch(e){if(e instanceof Zu)Nc.warn(e.message);else{const t=va.create("idb-get",{originalErrorMessage:e?.message});Nc.warn(t.message)}}})).apply(this,arguments)}function gQ(n,e){return ZO.apply(this,arguments)}function ZO(){return(ZO=(0,k.A)(function*(n,e){try{const r=(yield mQ()).transaction(Qb,"readwrite");yield r.objectStore(Qb).put(e,_Q(n)),yield r.done}catch(t){if(t instanceof Zu)Nc.warn(t.message);else{const r=va.create("idb-set",{originalErrorMessage:t?.message});Nc.warn(r.message)}}})).apply(this,arguments)}function _Q(n){return`${n.name}!${n.options.appId}`}class mDe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _De(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,k.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=yQ();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Nc.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,k.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=yQ(),{heartbeatsToSend:i,unsentEntries:s}=function gDe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vQ(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),vQ(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=EA(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Nc.warn(r),""}})()}}function yQ(){return(new Date).toISOString().substring(0,10)}class _De{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,k.A)(function*(){return!!function sSe(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function oSe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,k.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function hDe(n){return XO.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,k.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return gQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,k.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return gQ(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function vQ(n){return EA(JSON.stringify({version:2,heartbeats:n})).length}!function yDe(n){Mg(new yf("platform-logger",e=>new xSe(e),"PRIVATE")),Mg(new yf("heartbeat",e=>new mDe(e),"PRIVATE")),ed(xA,KO,n),ed(xA,KO,"esm2017"),ed("fire-js","")}("");const bQ="@firebase/database";let JO="";class vDe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Oi(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Gb(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class bDe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Dl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const wQ=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vDe(e)}}catch{}return new bDe},Ef=wQ("localStorage"),e1=wQ("sessionStorage"),kg=new qO("@firebase/database"),CQ=function(){let n=1;return function(){return n++}}(),TQ=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ze(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new hSe;t.update(e);const r=t.digest();return zO.encodeByteArray(r)},Yb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Yb.apply(null,r):e+="object"==typeof r?Oi(r):r,e+=" "}return e};let If=null,AQ=!0;const Wi=function(...n){if(!0===AQ&&(AQ=!1,null===If&&!0===e1.get("logging_enabled")&&function(n,e){ze(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(kg.logLevel=Xn.VERBOSE,If=kg.log.bind(kg),e&&e1.set("logging_enabled",!0)):"function"==typeof n?If=n:(If=null,e1.remove("logging_enabled"))}(!0)),If){const e=Yb.apply(null,n);If(e)}},Xb=function(n){return function(...e){Wi(n,...e)}},t1=function(...n){const e="FIREBASE INTERNAL ERROR: "+Yb(...n);kg.error(e)},xl=function(...n){const e=`FIREBASE FATAL ERROR: ${Yb(...n)}`;throw kg.error(e),new Error(e)},Ts=function(...n){const e="FIREBASE WARNING: "+Yb(...n);kg.warn(e)},MA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},td="[MIN_NAME]",kc="[MAX_NAME]",wf=function(n,e){if(n===e)return 0;if(n===td||e===kc)return-1;if(e===td||n===kc)return 1;{const t=RQ(n),r=RQ(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},wDe=function(n,e){return n===e?0:n<e?-1:1},Zb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Oi(e))},n1=function(n){if("object"!=typeof n||null===n)return Oi(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Oi(e[r]),t+=":",t+=n1(n[e[r]]);return t+="}",t},DQ=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Gi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const xQ=function(n){ze(!MA(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),d+=m}return d.toLowerCase()},SDe=new RegExp("^-?(0*)\\d{1,10}$"),RQ=function(n){if(SDe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Og=function(n){try{n()}catch(e){setTimeout(()=>{throw Ts("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Jb=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class PDe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ts(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class MDe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Wi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ts(e)}}let eE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const OQ=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,VQ="websocket",BQ="long_polling";class s1{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ef.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ef.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function UQ(n,e,t){let r;if(ze("string"==typeof e,"typeof type must == string"),ze("object"==typeof t,"typeof params must == object"),e===VQ)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==BQ)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function NDe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Gi(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class kDe{constructor(){this.counters_={}}incrementCounter(e,t=1){Dl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return GAe(this.counters_)}}const o1={},a1={};function l1(n){const e=n.toString();return o1[e]||(o1[e]=new kDe),o1[e]}class FDe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Og(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class nd{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xb(e),this.stats_=l1(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),UQ(t,BQ,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new FDe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new c1((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&OQ.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nd.forceAllow_=!0}static forceDisallow(){nd.forceDisallow_=!0}static isAvailable(){return!(!nd.forceAllow_&&(nd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Oi(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=rQ(t),i=DQ(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Oi(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class c1{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=CQ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=c1.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Wi("frame writing exception"),a.stack&&Wi(a.stack),Wi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Wi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Wi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let kA=null;typeof MozWebSocket<"u"?kA=MozWebSocket:typeof WebSocket<"u"&&(kA=WebSocket);let Fg=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xb(this.connId),this.stats_=l1(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&OQ.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),UQ(t,VQ,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ef.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new kA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==kA&&!n.forceDisallow_}static previouslyFailed(){return Ef.isInMemoryStorage||!0===Ef.get("previous_websocket_failure")}markConnectionHealthy(){Ef.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Gb(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ze(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Oi(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=DQ(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),qQ=(()=>{class n{static get ALL_TRANSPORTS(){return[nd,Fg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=Fg&&Fg.isAvailable();let i=r&&!Fg.previouslyFailed();if(t.webSocketOnly&&(r||Ts("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Fg];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class eY{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xb("c:"+this.id+":"),this.transportManager_=new qQ(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Jb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Zb("t",e),r=Zb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Zb("t",e),r=Zb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Zb("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?t1("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):t1("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ts("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Jb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ef.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tY{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class nY{constructor(e){this.allowedEvents_=e,this.listeners_={},ze(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){ze(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class OA extends nY{static getInstance(){return new OA}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!HO()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ze("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Un{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xn(){return new Un("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function rd(n){return n.pieces_.length-n.pieceNum_}function nr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Un(n.pieces_,e)}function d1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function tE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function sY(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Un(e,0)}function Mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Un)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Un(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function Ks(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return Ks(nr(n),nr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function h1(n,e){if(rd(n)!==rd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ba(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(rd(n)>rd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class sxe{constructor(e,t){this.errorPrefix_=t,this.parts_=tE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=DA(this.parts_[r]);oY(this)}}function oY(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Cf(n))}function Cf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class f1 extends nY{static getInstance(){return new f1}constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ze("visible"===e,"Unknown event type: "+e),[this.visible_]}}const nE=1e3;let LA,Tf=(()=>{class n extends tY{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Xb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");f1.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&OA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Oi(o)),ze(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new CA,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ze(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ze(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Dl(t,"w")){const i=xg(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ts(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=TA(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=TA(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),ze(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Oi(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):t1("Unrecognized action received from server: "+Oi(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ze(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,k.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){ze(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?Wi("getToken() completed but was canceled"):(Wi("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new eY(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{Ts(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&Ts(y),u())}}})()}interrupt(t){Wi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Wi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],$O(this.interruptReasons_)&&(this.reconnectDelay_=nE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>n1(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Un(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Wi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Wi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+JO.replace(/\./g,"-")]=1,HO()?t["framework.cordova"]=1:lQ()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=OA.getInstance().currentlyOnline();return $O(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class sn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new sn(e,t)}}class FA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new sn(td,e),i=new sn(td,t);return 0!==this.compare(r,i)}minPost(){return sn.MIN}}class cY extends FA{static get __EMPTY_NODE(){return LA}static set __EMPTY_NODE(e){LA=e}compare(e,t){return wf(e.name,t.name)}isDefinedOn(e){throw Dg("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return sn.MIN}maxPost(){return new sn(kc,LA)}makePost(e,t){return ze("string"==typeof e,"KeyIndex indexValue must always be a string."),new sn(e,LA)}toString(){return".key"}}const Rl=new cY;class VA{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let m1,Za=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??bo.EMPTY_NODE,this.right=o??bo.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return bo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return bo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class bo{constructor(e,t=bo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Za.BLACK,null,null))}remove(e){return new bo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Za.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new VA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new VA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new VA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new VA(this.root_,null,this.comparator_,!0,e)}}function fxe(n,e){return wf(n.name,e.name)}function p1(n,e){return wf(n,e)}bo.EMPTY_NODE=new class hxe{copy(e,t,r,i,s){return this}insert(e,t,r){return new Za(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const uY=function(n){return"number"==typeof n?"number:"+xQ(n):"string:"+n},dY=function(n){if(n.isLeafNode()){const e=n.val();ze("string"==typeof e||"number"==typeof e||"object"==typeof e&&Dl(e,".sv"),"Priority must be a string or number.")}else ze(n===m1||n.isEmpty(),"priority of unexpected type.");ze(n===m1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let hY,fY,pY,Lg=(()=>{class n{static set __childrenNodeConstructor(t){hY=t}static get __childrenNodeConstructor(){return hY}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,ze(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),dY(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(ze(".priority"!==i||1===rd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(nr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+uY(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?xQ(this.value_):this.value_,this.lazyHash_=TQ(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(ze(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return ze(s>=0,"Unknown leaf type: "+r),ze(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const hr=new class _xe extends FA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?wf(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return sn.MIN}maxPost(){return new sn(kc,new Lg("[PRIORITY-POST]",pY))}makePost(e,t){const r=fY(e);return new sn(t,new Lg("[PRIORITY-POST]",r))}toString(){return".priority"}},yxe=Math.log(2);class vxe{constructor(e){this.count=parseInt(Math.log(e+1)/yxe,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const BA=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let d,m;if(0===u)return null;if(1===u)return d=n[l],m=t?t(d):d,new Za(m,d.node,Za.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return d=n[y],m=t?t(d):d,new Za(m,d.node,Za.BLACK,b,T)}},a=function(l){let c=null,u=null,d=n.length;const m=function(b,T){const P=d-b,B=d;d-=b;const V=i(P+1,B),Q=n[P],be=t?t(Q):Q;y(new Za(be,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),P=Math.pow(2,l.count-(b+1));T?m(P,Za.BLACK):(m(P,Za.BLACK),m(P,Za.RED))}return u}(new vxe(n.length));return new bo(r||e,a)};let g1;const Vg={};class Oc{static get Default(){return ze(Vg&&hr,"ChildrenNode.ts has not been loaded"),g1=g1||new Oc({".priority":Vg},{".priority":hr}),g1}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=xg(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bo?t:null}hasIndex(e){return Dl(this.indexSet_,e.toString())}addIndex(e,t){ze(e!==Rl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(sn.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?BA(r,e.getCompare()):Vg;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Oc(u,c)}addToIndexes(e,t){const r=AA(this.indexes_,(i,s)=>{const o=xg(this.indexSet_,s);if(ze(o,"Missing index implementation for "+s),i===Vg){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(sn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),BA(a,o.getCompare())}return Vg}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new sn(e.name,a))),l.insert(e,e.node)}});return new Oc(r,this.indexSet_)}removeFromIndexes(e,t){const r=AA(this.indexes_,i=>{if(i===Vg)return i;{const s=t.get(e.name);return s?i.remove(new sn(e.name,s)):i}});return new Oc(r,this.indexSet_)}}let rE,jt=(()=>{class n{static get EMPTY_NODE(){return rE||(rE=new n(new bo(p1),null,Oc.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&dY(this.priorityNode_),this.children_.isEmpty()&&ze(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?rE:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild(nr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(ze(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new sn(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?rE:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=en(t);if(null===i)return r;{ze(".priority"!==en(t)||1===rd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(nr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(hr,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+uY(this.getPriority().val())+":"),this.forEachChild(hr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":TQ(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new sn(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new sn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new sn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,sn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,sn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===iE?-1:0}withIndex(t){if(t===Rl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Rl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(hr),s=r.getIterator(hr);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Rl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const iE=new class bxe extends jt{constructor(){super(new bo(p1),jt.EMPTY_NODE,Oc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return jt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(sn,{MIN:{value:new sn(td,jt.EMPTY_NODE)},MAX:{value:new sn(kc,iE)}}),cY.__EMPTY_NODE=jt.EMPTY_NODE,Lg.__childrenNodeConstructor=jt,function pxe(n){m1=n}(iE),function gxe(n){pY=n}(iE);const Exe=!0;function Gr(n,e=null){if(null===n)return jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),ze(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Lg(n,Gr(e));if(n instanceof Array||!Exe){let t=jt.EMPTY_NODE;return Gi(n,(r,i)=>{if(Dl(n,r)&&"."!==r.substring(0,1)){const s=Gr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Gr(e))}{const t=[];let r=!1;if(Gi(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Gr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new sn(o,l)))}}),0===t.length)return jt.EMPTY_NODE;const s=BA(t,fxe,o=>o.name,p1);if(r){const o=BA(t,hr.getCompare());return new jt(s,Gr(e),new Oc({".priority":o},{".priority":hr}))}return new jt(s,Gr(e),Oc.Default)}}!function mxe(n){fY=n}(Gr);class _1 extends FA{constructor(e){super(),this.indexPath_=e,ze(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?wf(e.name,t.name):s}makePost(e,t){const r=Gr(e),i=jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new sn(t,i)}maxPost(){const e=jt.EMPTY_NODE.updateChild(this.indexPath_,iE);return new sn(kc,e)}toString(){return tE(this.indexPath_,0).join("/")}}const y1=new class Ixe extends FA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?wf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return sn.MIN}maxPost(){return sn.MAX}makePost(e,t){const r=Gr(e);return new sn(t,r)}toString(){return".value"}};function mY(n){return{type:"value",snapshotNode:n}}function Bg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function oE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class v1{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){ze(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(sE(t,a)):ze(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Bg(t,r)):o.trackChildChange(oE(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(hr,(i,s)=>{t.hasChild(i)||r.trackChildChange(sE(i,s))}),t.isLeafNode()||t.forEachChild(hr,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(oE(i,s,o))}else r.trackChildChange(Bg(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class aE{constructor(e){this.indexedFilter_=new v1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=aE.getStartPost_(e),this.endPost_=aE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new sn(t,r))||(r=jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=jt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(jt.EMPTY_NODE);const s=this;return t.forEachChild(hr,(o,a)=>{s.matches(new sn(o,a))||(i=i.updateImmediateChild(o,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Cxe{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new aE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new sn(t,r))||(r=jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=jt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(jt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(m,y)=>d(y,m)}else o=this.index_.getCompare();const a=e;ze(a.numChildren()===this.limit_,"");const l=new sn(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(oE(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(sE(t,d));const T=a.updateImmediateChild(t,jt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Bg(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(sE(c.name,c.node)),s.trackChildChange(Bg(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,jt.EMPTY_NODE)):e}}class b1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ze(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ze(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:td}hasEnd(){return this.endSet_}getIndexEndValue(){return ze(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ze(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ze(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hr}copy(){const e=new b1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gY(n){const e={};if(n.isDefault())return e;let t;if(n.index_===hr?t="$priority":n.index_===y1?t="$value":n.index_===Rl?t="$key":(ze(n.index_ instanceof _1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Oi(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Oi(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Oi(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Oi(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Oi(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function _Y(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==hr&&(e.i=n.index_.toString()),e}class jA extends tY{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(ze(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Xb("p:rest:"),this.listens_={}}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=jA.getListenId_(e,r),a={};this.listens_[o]=a;const l=gY(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),xg(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=jA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=gY(e._queryParams),r=e._path.toString(),i=new CA;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Rg(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Gb(a.responseText)}catch{Ts("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Ts("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Rxe{constructor(){this.rootNode_=jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zA(){return{value:null,children:new Map}}function Ug(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,zA()),Ug(n.children.get(r),e=nr(e),t)}}function C1(n,e,t){null!==n.value?t(e,n.value):function Pxe(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{C1(i,new Un(e.toString()+"/"+r),t)})}class Mxe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Gi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Oxe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Mxe(e);const r=1e4+2e4*Math.random();Jb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Gi(e,(i,s)=>{s>0&&Dl(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Jb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pl=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Pl||{});function S1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class HA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Pl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return ze(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Un(e));return new HA(xn(),t,this.revert)}}return ze(en(this.path)===e,"operationForChild called for unrelated child."),new HA(nr(this.path),this.affectedTree,this.revert)}}class lE{constructor(e,t){this.source=e,this.path=t,this.type=Pl.LISTEN_COMPLETE}operationForChild(e){return tn(this.path)?new lE(this.source,xn()):new lE(this.source,nr(this.path))}}class Af{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Pl.OVERWRITE}operationForChild(e){return tn(this.path)?new Af(this.source,xn(),this.snap.getImmediateChild(e)):new Af(this.source,nr(this.path),this.snap)}}class jg{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Pl.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new Un(e));return t.isEmpty()?null:t.value?new Af(this.source,xn(),t.value):new jg(this.source,xn(),t)}return ze(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new jg(this.source,nr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class id{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Fxe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function cE(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function Bxe(n,e,t){if(null==e.childName||null==t.childName)throw Dg("Should only compare child_ events.");const r=new sn(e.childName,e.snapshotNode),i=new sn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function Vxe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function $A(n,e){return{eventCache:n,serverCache:e}}function uE(n,e,t,r){return $A(new id(e,t,r),n.serverCache)}function vY(n,e,t,r){return $A(n.eventCache,new id(e,t,r))}function WA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Sf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let D1;class fr{static fromObject(e){let t=new fr(null);return Gi(e,(r,i)=>{t=t.set(new Un(r),i)}),t}constructor(e,t=(()=>(D1||(D1=new bo(wDe)),D1))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xn(),value:this.value};if(tn(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(nr(e),t);return null!=s?{path:Mr(new Un(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree(nr(e)):new fr(null)}}set(e,t){if(tn(e))return new fr(t,this.children);{const r=en(e),s=(this.children.get(r)||new fr(null)).set(nr(e),t),o=this.children.insert(r,s);return new fr(this.value,o)}}remove(e){if(tn(e))return this.children.isEmpty()?new fr(null):new fr(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove(nr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new fr(null):new fr(this.value,s)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get(nr(e)):null}}setTree(e,t){if(tn(e))return t;{const r=en(e),s=(this.children.get(r)||new fr(null)).setTree(nr(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new fr(this.value,o)}}fold(e){return this.fold_(xn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Mr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,xn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tn(e))return null;{const s=en(e),o=this.children.get(s);return o?o.findOnPath_(nr(e),Mr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xn(),t)}foreachOnPath_(e,t,r){if(tn(e))return this;{this.value&&r(t,this.value);const i=en(e),s=this.children.get(i);return s?s.foreachOnPath_(nr(e),Mr(t,i),r):new fr(null)}}foreach(e){this.foreach_(xn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ja{constructor(e){this.writeTree_=e}static empty(){return new Ja(new fr(null))}}function dE(n,e,t){if(tn(e))return new Ja(new fr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Ks(i,e);return s=s.updateChild(o,t),new Ja(n.writeTree_.set(i,s))}{const i=new fr(t),s=n.writeTree_.setTree(e,i);return new Ja(s)}}}function x1(n,e,t){let r=n;return Gi(t,(i,s)=>{r=dE(r,Mr(e,i),s)}),r}function bY(n,e){if(tn(e))return Ja.empty();{const t=n.writeTree_.setTree(e,new fr(null));return new Ja(t)}}function R1(n,e){return null!=Df(n,e)}function Df(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ks(t.path,e)):null}function EY(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(hr,(r,i)=>{e.push(new sn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new sn(r,i.value))}),e}function sd(n,e){if(tn(e))return n;{const t=Df(n,e);return new Ja(null!=t?new fr(t):n.writeTree_.subtree(e))}}function P1(n){return n.writeTree_.isEmpty()}function zg(n,e){return IY(xn(),n.writeTree_,e)}function IY(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(ze(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=IY(Mr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Mr(n,".priority"),r)),t}}function GA(n,e){return SY(e,n)}function Wxe(n,e){if(n.snap)return ba(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ba(Mr(n.path,t),e))return!0;return!1}function qxe(n){return n.visible}function wY(n,e,t){let r=Ja.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)ba(t,o)?(a=Ks(t,o),r=dE(r,a,s.snap)):ba(o,t)&&(a=Ks(o,t),r=dE(r,xn(),s.snap.getChild(a)));else{if(!s.children)throw Dg("WriteRecord should have .snap or .children");if(ba(t,o))a=Ks(t,o),r=x1(r,a,s.children);else if(ba(o,t))if(a=Ks(o,t),tn(a))r=x1(r,xn(),s.children);else{const l=xg(s.children,en(a));if(l){const c=l.getChild(nr(a));r=dE(r,xn(),c)}}}}}return r}function CY(n,e,t,r,i){if(r||i){const s=sd(n.visibleWrites,e);return!i&&P1(s)?t:i||null!=t||R1(s,xn())?zg(wY(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(ba(c.path,e)||ba(e,c.path))},e),t||jt.EMPTY_NODE):null}{const s=Df(n.visibleWrites,e);if(null!=s)return s;{const o=sd(n.visibleWrites,e);return P1(o)?t:null!=t||R1(o,xn())?zg(o,t||jt.EMPTY_NODE):null}}}function qA(n,e,t,r){return CY(n.writeTree,n.treePath,e,t,r)}function M1(n,e){return function Kxe(n,e,t){let r=jt.EMPTY_NODE;const i=Df(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(hr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=sd(n.visibleWrites,e);return t.forEachChild(hr,(o,a)=>{const l=zg(sd(s,new Un(o)),a);r=r.updateImmediateChild(o,l)}),EY(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return EY(sd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function TY(n,e,t,r){return function Qxe(n,e,t,r,i){ze(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Mr(e,t);if(R1(n.visibleWrites,s))return null;{const o=sd(n.visibleWrites,s);return P1(o)?i.getChild(t):zg(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function KA(n,e){return function Xxe(n,e){return Df(n.visibleWrites,e)}(n.writeTree,Mr(n.treePath,e))}function N1(n,e,t){return function Yxe(n,e,t,r){const i=Mr(e,t),s=Df(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?zg(sd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function AY(n,e){return SY(Mr(n.treePath,e),n.writeTree)}function SY(n,e){return{treePath:n,writeTree:e}}class tRe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ze("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ze(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,oE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,sE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Bg(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Dg("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,oE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const DY=new class nRe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class k1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new id(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return N1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Sf(this.viewCache_),s=function eRe(n,e,t,r,i,s){return function Zxe(n,e,t,r,i,s,o){let a;const l=sd(n.visibleWrites,e),c=Df(l,xn());if(null!=c)a=c;else{if(null==t)return[];a=zg(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==d(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function xY(n,e,t,r,i,s){const o=e.eventCache;if(null!=KA(r,t))return e;{let a,l;if(tn(t))if(ze(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Sf(e),d=M1(r,c instanceof jt?c:jt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=qA(r,Sf(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=en(t);if(".priority"===c){ze(1===rd(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=TY(r,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=nr(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=TY(r,t,o.getNode(),l);d=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else d=N1(r,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return uE(e,a,o.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function QA(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(tn(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=en(t);if(!l.isCompleteForPath(t)&&rd(t)>1)return e;const b=nr(t),P=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),P):u.updateChild(l.getNode(),y,P,b,DY,null)}const d=vY(e,c,l.isFullyInitialized()||tn(t),u.filtersNodes());return xY(n,d,t,i,new k1(i,d,s),a)}function O1(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new k1(i,e,s);if(tn(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=uE(e,c,!0,n.filter.filtersNodes());else{const d=en(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=uE(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=nr(t),y=a.getNode().getImmediateChild(d);let b;if(tn(m))b=r;else{const T=u.getCompleteChild(d);b=null!=T?".priority"===d1(m)&&T.getChild(sY(m)).isEmpty()?T:T.updateChild(m,r):jt.EMPTY_NODE}l=y.equals(b)?e:uE(e,n.filter.updateChild(a.getNode(),d,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function RY(n,e){return n.eventCache.isCompleteForChild(e)}function PY(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function F1(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=tn(t)?r:new fr(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,m)=>{if(u.hasChild(d)){const b=PY(0,e.serverCache.getNode().getImmediateChild(d),m);l=QA(n,l,new Un(d),b,i,s,o,a)}}),c.children.inorderTraversal((d,m)=>{const y=!e.serverCache.isCompleteForChild(d)&&null===m.value;if(!u.hasChild(d)&&!y){const T=PY(0,e.serverCache.getNode().getImmediateChild(d),m);l=QA(n,l,new Un(d),T,i,s,o,a)}}),l}class dRe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new v1(r.getIndex()),s=function Txe(n){return n.loadsAllData()?new v1(n.getIndex()):n.hasLimit()?new Cxe(n):new aE(n)}(r);this.processor_=function rRe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(jt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(jt.EMPTY_NODE,a.getNode(),null),u=new id(l,o.isFullyInitialized(),i.filtersNodes()),d=new id(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=$A(d,u),this.eventGenerator_=new Fxe(this.query_)}get query(){return this.query_}}function pRe(n,e){const t=Sf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function MY(n){return 0===n.eventRegistrations_.length}function NY(n,e,t){const r=[];if(t){ze(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function kY(n,e,t,r){e.type===Pl.MERGE&&null!==e.source.queryId&&(ze(Sf(n.viewCache_),"We should always have a full cache before handling merges"),ze(WA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function sRe(n,e,t,r,i){const s=new tRe;let o,a;if(t.type===Pl.OVERWRITE){const c=t;c.source.fromUser?o=O1(n,e,c.path,c.snap,r,i,s):(ze(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!tn(c.path),o=QA(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Pl.MERGE){const c=t;c.source.fromUser?o=function aRe(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Mr(t,l);RY(e,en(u))&&(a=O1(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Mr(t,l);RY(e,en(u))||(a=O1(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(ze(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=F1(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Pl.ACK_USER_WRITE){const c=t;o=c.revert?function uRe(n,e,t,r,i,s){let o;if(null!=KA(r,t))return e;{const a=new k1(r,e,i),l=e.eventCache.getNode();let c;if(tn(t)||".priority"===en(t)){let u;if(e.serverCache.isFullyInitialized())u=qA(r,Sf(e));else{const d=e.serverCache.getNode();ze(d instanceof jt,"serverChildren would be complete if leaf node"),u=M1(r,d)}c=n.filter.updateFullNode(l,u,s)}else{const u=en(t);let d=N1(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,nr(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,jt.EMPTY_NODE,nr(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=qA(r,Sf(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=KA(r,xn()),uE(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function lRe(n,e,t,r,i,s,o){if(null!=KA(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(tn(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return QA(n,e,t,l.getNode().getChild(t),i,s,a,o);if(tn(t)){let c=new fr(null);return l.getNode().forEachChild(Rl,(u,d)=>{c=c.set(new Un(u),d)}),F1(n,e,t,c,i,s,a,o)}return e}{let c=new fr(null);return r.foreach((u,d)=>{const m=Mr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),F1(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==Pl.LISTEN_COMPLETE)throw Dg("Unknown operation type: "+t.type);o=function cRe(n,e,t,r,i){const s=e.serverCache;return xY(n,vY(e,s.getNode(),s.isFullyInitialized()||tn(t),s.isFiltered()),t,r,DY,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function oRe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=WA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(mY(WA(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function iRe(n,e){ze(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ze(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),ze(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,OY(n,s.changes,s.viewCache.eventCache.getNode(),null)}function OY(n,e,t,r){return function Lxe(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function wxe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),cE(n,i,"child_removed",e,r,t),cE(n,i,"child_added",e,r,t),cE(n,i,"child_moved",s,r,t),cE(n,i,"child_changed",e,r,t),cE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let YA,ZA;class FY{constructor(){this.views=new Map}}function L1(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return ze(null!=s,"SyncTree gave us an op for an invalid query."),kY(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(kY(o,e,t,r));return s}}function LY(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=qA(t,i?r:null),l=!1;a?l=!0:r instanceof jt?(a=M1(t,r),l=!1):(a=jt.EMPTY_NODE,l=!1);const c=$A(new id(a,l,!1),new id(r,i,!1));return new dRe(e,c)}return o}function VY(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function od(n,e){let t=null;for(const r of n.views.values())t=t||pRe(r,e);return t}function BY(n,e){return e._queryParams.loadsAllData()?XA(n):n.views.get(e._queryIdentifier)}function UY(n,e){return null!=BY(n,e)}function ad(n){return null!=XA(n)}function XA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let CRe=1;class jY{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fr(null),this.pendingWriteTree_=function Jxe(){return{visibleWrites:Ja.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function V1(n,e,t,r,i){return function jxe(n,e,t,r,i){ze(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=dE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Hg(n,new Af({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ld(n,e,t=!1){const r=function Hxe(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function $xe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);ze(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Wxe(a,r.path)?i=!1:ba(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Gxe(n){n.visibleWrites=wY(n.allWrites,qxe,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=bY(n.visibleWrites,r.path):Gi(r.children,l=>{n.visibleWrites=bY(n.visibleWrites,Mr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new fr(null);return null!=r.snap?s=s.set(xn(),!0):Gi(r.children,o=>{s=s.set(new Un(o),!0)}),Hg(n,new HA(r.path,s,t))}return[]}function hE(n,e,t){return Hg(n,new Af({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function JA(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||UY(o,e))){const l=function ERe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=ad(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(NY(c,t,r)),MY(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(NY(l,t,r)),MY(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ad(n)&&s.push(new(function yRe(){return ze(YA,"Reference.ts has not been loaded"),YA}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function vRe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(m,y)=>ad(y));if(u&&!d){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function PRe(n){return n.fold((e,t,r)=>{if(t&&ad(t))return[XA(t)];{let i=[];return t&&(i=VY(t)),Gi(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],P=T.query,B=WY(n,T);n.listenProvider_.startListening(pE(P),fE(n,P),B.hashFn,B.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(pE(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(tS(m));n.listenProvider_.stopListening(pE(m),y)}))}!function MRe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=tS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function zY(n,e,t,r){const i=U1(n,r);if(null!=i){const s=j1(i),o=s.path,a=s.queryId,l=Ks(o,e);return z1(n,o,new Af(S1(a),l,t))}return[]}function B1(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=Ks(m,i);s=s||od(y,b),o=o||ad(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||ad(a),s=s||od(a,xn())):(a=new FY,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=jt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=od(b,xn());T&&(s=s.updateImmediateChild(y,T))}));const c=UY(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=tS(e);ze(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function NRe(){return CRe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let d=function bRe(n,e,t,r,i,s){const o=LY(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function mRe(n,e){n.eventRegistrations_.push(e)}(o,t),function gRe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(hr,(s,o)=>{r.push(Bg(s,o))}),t.isFullyInitialized()&&r.push(mY(t.getNode())),OY(n,r,t.getNode(),e)}(o,t)}(a,e,t,GA(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=BY(a,e);d=d.concat(function kRe(n,e,t){const r=e._path,i=fE(n,e),s=WY(n,t),o=n.listenProvider_.startListening(pE(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)ze(!ad(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!tn(c)&&u&&ad(u))return[XA(u).query];{let m=[];return u&&(m=m.concat(VY(u).map(y=>y.query))),Gi(d,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(pE(u),fE(n,u))}}return o}(n,e,m))}return d}function eS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=od(a,Ks(o,e));if(c)return c});return CY(i,e,s,t,!0)}function Hg(n,e){return HY(e,n.syncPointTree_,null,GA(n.pendingWriteTree_,xn()))}function HY(n,e,t,r){if(tn(n.path))return $Y(n,e,t,r);{const i=e.get(xn());null==t&&null!=i&&(t=od(i,xn()));let s=[];const o=en(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=AY(r,o);s=s.concat(HY(a,l,c,u))}return i&&(s=s.concat(L1(i,n,r,t))),s}}function $Y(n,e,t,r){const i=e.get(xn());null==t&&null!=i&&(t=od(i,xn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=AY(r,o),u=n.operationForChild(o);u&&(s=s.concat($Y(u,a,l,c)))}),i&&(s=s.concat(L1(i,n,r,t))),s}function WY(n,e){const t=e.query,r=fE(n,t);return{hashFn:()=>(function hRe(n){return n.viewCache_.serverCache.getNode()}(e)||jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function DRe(n,e,t){const r=U1(n,t);if(r){const i=j1(r),s=i.path,o=i.queryId,a=Ks(s,e);return z1(n,s,new lE(S1(o),a))}return[]}(n,t._path,r):function SRe(n,e){return Hg(n,new lE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function ADe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return JA(n,t,null,s)}}}}function fE(n,e){const t=tS(e);return n.queryToTagMap.get(t)}function tS(n){return n._path.toString()+"$"+n._queryIdentifier}function U1(n,e){return n.tagToQueryMap.get(e)}function j1(n){const e=n.indexOf("$");return ze(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Un(n.substr(0,e))}}function z1(n,e,t){const r=n.syncPointTree_.get(e);return ze(r,"Missing sync point for query tag that we're tracking"),L1(r,t,GA(n.pendingWriteTree_,e),null)}function pE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function wRe(){return ze(ZA,"Reference.ts has not been loaded"),ZA}())(n._repo,n._path):n}class H1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new H1(t)}node(){return this.node_}}class $1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Mr(this.path_,e);return new $1(this.syncTree_,t)}node(){return eS(this.syncTree_,this.path_)}}const ORe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},GY=function(n,e,t){return n&&"object"==typeof n?(ze(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?FRe(n[".sv"],e,t):"object"==typeof n[".sv"]?LRe(n[".sv"],e):void ze(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},FRe=function(n,e,t){if("timestamp"===n)return t.timestamp;ze(!1,"Unexpected server value: "+n)},LRe=function(n,e,t){n.hasOwnProperty("increment")||ze(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&ze(!1,"Unexpected increment value: "+r);const i=e.node();if(ze(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},qY=function(n,e,t,r){return G1(e,new $1(t,n),r)},W1=function(n,e,t){return G1(n,new H1(e),t)};function G1(n,e,t){const r=n.getPriority().val(),i=GY(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=GY(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Lg(a,Gr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Lg(i))),o.forEachChild(hr,(a,l)=>{const c=G1(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class q1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function nS(n,e){let t=e instanceof Un?e:new Un(e),r=n,i=en(t);for(;null!==i;){const s=xg(r.node.children,i)||{children:{},childCount:0};r=new q1(i,r,s),t=nr(t),i=en(t)}return r}function xf(n){return n.node.value}function K1(n,e){n.node.value=e,Q1(n)}function KY(n){return n.node.childCount>0}function rS(n,e){Gi(n.node.children,(t,r)=>{e(new q1(t,n,r))})}function QY(n,e,t,r){t&&!r&&e(n),rS(n,i=>{QY(i,e,!0,r)}),t&&r&&e(n)}function mE(n){return new Un(null===n.parent?n.name:mE(n.parent)+"/"+n.name)}function Q1(n){null!==n.parent&&function URe(n,e,t){const r=function VRe(n){return void 0===xf(n)&&!KY(n)}(t),i=Dl(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Q1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Q1(n))}(n.parent,n.name,n)}const jRe=/[\[\].#$\/\u0000-\u001F\u007F]/,zRe=/[\[\].#$\u0000-\u001F\u007F]/,Y1=10485760,iS=function(n){return"string"==typeof n&&0!==n.length&&!jRe.test(n)},YY=function(n){return"string"==typeof n&&0!==n.length&&!zRe.test(n)},_E=function(n,e,t){const r=t instanceof Un?new sxe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Cf(r));if("function"==typeof e)throw new Error(n+"contains a function "+Cf(r)+" with contents = "+e.toString());if(MA(e))throw new Error(n+"contains "+e.toString()+" "+Cf(r));if("string"==typeof e&&e.length>Y1/3&&DA(e)>Y1)throw new Error(n+"contains a string greater than "+Y1+" utf8 bytes "+Cf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Gi(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!iS(o)))throw new Error(n+" contains an invalid key ("+o+") "+Cf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function oxe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=DA(e),oY(n)})(r,o),_E(n,a,r),function axe(n){const e=n.parts_.pop();n.byteLength_-=DA(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Cf(r)+" in addition to actual children.")}},Z1=function(n,e,t,r){if(!(r&&void 0===t||YY(t)))throw new Error(Pg(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},WRe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Z1(n,e,t,r)};class GRe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $o(n,e,t){(function sS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!h1(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function eX(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(qRe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>ba(r,e)||ba(e,r))}function qRe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();If&&Wi("event: "+t.toString()),Og(r)}}}const KRe=25;class QRe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GRe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zA(),this.transactionQueueTree_=new q1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nX(n){const t=n.infoData_.getNode(new Un(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vE(n){return ORe({timestamp:nX(n)})}function rX(n,e,t,r,i){n.dataUpdateCount++;const s=new Un(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=AA(t,c=>Gr(c));o=function xRe(n,e,t,r){const i=U1(n,r);if(i){const s=j1(i),o=s.path,a=s.queryId,l=Ks(o,e),c=fr.fromObject(t);return z1(n,o,new jg(S1(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Gr(t);o=zY(n.serverSyncTree_,s,l,i)}else if(r){const l=AA(t,c=>Gr(c));o=function ARe(n,e,t){const r=fr.fromObject(t);return Hg(n,new jg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Gr(t);o=hE(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Wg(n,s)),$o(n.eventQueue_,a,o)}function iX(n,e){J1(n,"connected",e),!1===e&&function ePe(n){$g(n,"onDisconnectEvents");const e=vE(n),t=zA();C1(n.onDisconnect_,xn(),(i,s)=>{const o=qY(i,s,n.serverSyncTree_,e);Ug(t,i,o)});let r=[];C1(t,xn(),(i,s)=>{r=r.concat(hE(n.serverSyncTree_,i,s));const o=function rF(n,e){const t=mE(aX(n,e)),r=nS(n.transactionQueueTree_,e);return function BRe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{iF(n,i)}),iF(n,r),QY(r,i=>{iF(n,i)}),t}(n,i);Wg(n,o)}),n.onDisconnect_=zA(),$o(n.eventQueue_,xn(),r)}(n)}function J1(n,e,t){const r=new Un("/.info/"+e),i=Gr(t);n.infoData_.updateSnapshot(r,i);const s=hE(n.infoSyncTree_,r,i);$o(n.eventQueue_,r,s)}function oS(n){return n.nextWriteId_++}function $g(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Wi(t,...e)}function nF(n,e,t){return eS(n.serverSyncTree_,e,t)||jt.EMPTY_NODE}function aS(n,e=n.transactionQueueTree_){if(e||lS(n,e),xf(e)){const t=lX(n,e);ze(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function aPe(n,e,t){const r=t.map(c=>c.currentWriteId),i=nF(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];ze(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ks(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{$g(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(ld(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&d.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();lS(n,nS(n.transactionQueueTree_,e)),aS(n,n.transactionQueueTree_),$o(n.eventQueue_,e,u);for(let m=0;m<d.length;m++)Og(d[m])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Ts("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Wg(n,e)}},o)}(n,mE(e),t)}else KY(e)&&rS(e,t=>{aS(n,t)})}function Wg(n,e){const t=aX(n,e),r=mE(t);return function lPe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Ks(t,l.path);let d,u=!1;if(ze(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,i=i.concat(ld(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=KRe)u=!0,d="maxretry",i=i.concat(ld(n.serverSyncTree_,l.currentWriteId,!0));else{const m=nF(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){_E("transaction failed: Data returned ",y,l.path);let b=Gr(y);"object"==typeof y&&null!=y&&Dl(y,".priority")||(b=b.updatePriority(m.getPriority()));const P=l.currentWriteId,B=vE(n),V=W1(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=oS(n),o.splice(o.indexOf(P),1),i=i.concat(V1(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(ld(n.serverSyncTree_,P,!0))}else u=!0,d="nodata",i=i.concat(ld(n.serverSyncTree_,l.currentWriteId,!0))}$o(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}lS(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Og(r[a]);aS(n,n.transactionQueueTree_)}(n,lX(n,t),r),r}function aX(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===xf(r);)r=nS(r,t),t=en(e=nr(e));return r}function lX(n,e){const t=[];return cX(n,e,t),t.sort((r,i)=>r.order-i.order),t}function cX(n,e,t){const r=xf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);rS(e,i=>{cX(n,i,t)})}function lS(n,e){const t=xf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,K1(e,t.length>0?t:void 0)}rS(e,r=>{lS(n,r)})}function iF(n,e){const t=xf(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(ze(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(ze(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(ld(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?K1(e,void 0):t.length=s+1,$o(n.eventQueue_,mE(e),i);for(let o=0;o<r.length;o++)Og(r[o])}}const sF=function(n,e){const t=dPe(n),r=t.namespace;return"firebase.com"===t.domain&&xl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&xl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ts("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new s1(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Un(t.pathString)}},dPe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=function cPe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,d)));const m=function uPe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ts(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class dX{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Oi(this.snapshot.exportVal())}}class hX{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class oF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ze(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Wo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tn(this._path)?null:d1(this._path)}get ref(){return new el(this._repo,this._path)}get _queryIdentifier(){const e=_Y(this._queryParams),t=n1(e);return"{}"===t?"default":t}get _queryObject(){return _Y(this._queryParams)}isEqual(e){if(!((e=ya(e))instanceof Wo))return!1;const t=this._repo===e._repo,r=h1(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function rxe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class el extends Wo{constructor(e,t){super(e,t,new b1,!1)}get parent(){const e=sY(this._path);return null===e?null:new el(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Rf{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Un(e),r=Gg(this.ref,e);return new Rf(this._node.getChild(t),r,hr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Rf(i,Gg(this.ref,r),hr)))}hasChild(e){const t=new Un(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Gg(n,e){return null===en((n=ya(n))._path)?WRe("child","path",e,!1):Z1("child","path",e,!1),new el(n._repo,Mr(n._path,e))}function pPe(n){n=ya(n);const e=new oF(()=>{}),t=new bE(e);return function ZRe(n,e,t){const r=function RRe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=Ks(c,t);r=r||od(u,d)});let i=n.syncPointTree_.get(t);i?r=r||od(i,xn()):(i=new FY,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new id(r,!0,!1):null;return function fRe(n){return WA(n.viewCache_)}(LY(i,e,GA(n.pendingWriteTree_,e._path),s?o.getNode():jt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Gr(i).withIndex(e._queryParams.getIndex());let o;if(B1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=hE(n.serverSyncTree_,e._path,s);else{const a=fE(n.serverSyncTree_,e);o=zY(n.serverSyncTree_,e._path,s,a)}return $o(n.eventQueue_,e._path,o),JA(n.serverSyncTree_,e,t,null,!0),s},i=>($g(n,"get for query "+Oi(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Rf(r,new el(n._repo,n._path),n._queryParams.getIndex()))}class bE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new dX("value",this,new Rf(e.snapshotNode,new el(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new hX(this,e,t):null}matches(e){return e instanceof bE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function _Re(n){ze(!YA,"__referenceConstructor has already been defined"),YA=n})(el),function IRe(n){ze(!ZA,"__referenceConstructor has already been defined"),ZA=n}(el);const aF={};function yX(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||xl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=sF(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=sF(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new eE(eE.OWNER):new MDe(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!iS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),YY(n)}(t))throw new Error(Pg(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),tn(o.path)||xl("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function DPe(n,e,t,r){let i=aF[e.name];i||(i={},aF[e.name]=i);let s=i[n.toURLString()];return s&&xl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new QRe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new PDe(n.name,t));return new RPe(d,n)}class RPe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function YRe(n,e,t){if(n.stats_=l1(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jA(n.repoInfo_,(r,i,s,o)=>{rX(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>iX(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oi(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Tf(n.repoInfo_,e,(r,i,s,o)=>{rX(n,r,i,s,o)},r=>{iX(n,r)},r=>{!function XRe(n,e){Gi(e,(t,r)=>{J1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function ODe(n,e){const t=n.toString();return a1[t]||(a1[t]=e()),a1[t]}(n.repoInfo_,()=>new Oxe(n.stats_,n.server_)),n.infoData_=new Rxe,n.infoSyncTree_=new jY({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=hE(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),J1(n,"connected",!1),n.serverSyncTree_=new jY({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);$o(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new el(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function SPe(n,e){const t=aF[e];(!t||t[n.key]!==n)&&xl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function oX(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&xl("Cannot call "+e+" on a deleted database.")}}Tf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Tf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function NPe(n){(function IQ(n){JO=n})(Ng),Mg(new yf("database",(e,{instanceIdentifier:t})=>yX(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),ed(bQ,"1.0.10",n),ed(bQ,"1.0.10","esm2017")}();const FPe=function bX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},EX=new Wb("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),hS=new qO("@firebase/auth");function fS(n,...e){hS.logLevel<=Xn.ERROR&&hS.error(`Auth (${Ng}): ${n}`,...e)}function Eo(n,...e){throw cF(n,...e)}function Ea(n,...e){return cF(n,...e)}function lF(n,e,t){const r=Object.assign(Object.assign({},FPe()),{[e]:t});return new Wb("auth","Firebase",r).create(e,{appName:n.name})}function qi(n){return lF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cF(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return EX.create(n,...e)}function He(n,e,...t){if(!n)throw cF(e,...t)}function kl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw fS(e),new Error(e)}function dd(n,e){n||kl(e)}function IE(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function uF(){return"http:"===IX()||"https:"===IX()}function IX(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class wE{constructor(e,t){this.shortDelay=e,this.longDelay=t,dd(t>e,"Short delay should be less than long delay!"),this.isMobile=HO()||lQ()}get(){return function VPe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(uF()||function rSe(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dF(n,e){dd(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class wX{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void kl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void kl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void kl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const UPe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},jPe=new wE(3e4,6e4);function Er(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ir(n,e,t,r){return hF.apply(this,arguments)}function hF(){return(hF=(0,k.A)(function*(n,e,t,r,i={}){return CX(n,i,(0,k.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Rg(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return function nSe(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(c.referrerPolicy="no-referrer"),wX.fetch()(TX(n,n.config.apiHost,t,a),c)}))})).apply(this,arguments)}function CX(n,e,t){return fF.apply(this,arguments)}function fF(){return(fF=(0,k.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},UPe),e);try{const i=new HPe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw CE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw CE(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw CE(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw CE(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw lF(n,u,c);Eo(n,u)}}catch(i){if(i instanceof Zu)throw i;Eo(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function pF(){return(pF=(0,k.A)(function*(n,e,t,r,i={}){const s=yield Ir(n,e,t,r,i);return"mfaPendingCredential"in s&&Eo(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function TX(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?dF(n.config,i):`${n.config.apiScheme}://${i}`}class HPe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ea(this.auth,"network-request-failed")),jPe.get())})}}function CE(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ea(n,e,r);return i.customData._tokenResponse=t,i}function _F(){return(_F=(0,k.A)(function*(n,e){return Ir(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function RX(n,e){return vF.apply(this,arguments)}function vF(){return(vF=(0,k.A)(function*(n,e){return Ir(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function TE(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function bF(){return(bF=(0,k.A)(function*(n,e=!1){const t=ya(n),r=yield t.getIdToken(e),i=pS(r);He(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:TE(EF(i.auth_time)),issuedAtTime:TE(EF(i.iat)),expirationTime:TE(EF(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function EF(n){return 1e3*Number(n)}function pS(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return fS("JWT malformed, contained fewer than 3 sections"),null;try{const i=IA(t);return i?JSON.parse(i):(fS("Failed to decode base64 JWT payload"),null)}catch(i){return fS("Caught error parsing JWT payload as JSON",i?.toString()),null}}function PX(n){const e=pS(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Lc(n,e){return IF.apply(this,arguments)}function IF(){return(IF=(0,k.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Zu&&function KPe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class QPe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,k.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,k.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class wF{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=TE(this.lastLoginAt),this.creationTime=TE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function AE(n){return CF.apply(this,arguments)}function CF(){return(CF=(0,k.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Lc(n,RX(t,{idToken:r}));He(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?MX(s.providerUserInfo):[],a=function XPe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wF(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})).apply(this,arguments)}function TF(){return(TF=(0,k.A)(function*(n){const e=ya(n);yield AE(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function MX(n){return n.map(e=>{var{providerId:t}=e,r=(0,Sc.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function AF(){return(AF=(0,k.A)(function*(n,e){const t=yield CX(n,{},(0,k.A)(function*(){const r=Rg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=TX(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wX.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function SF(){return(SF=(0,k.A)(function*(n,e){return Ir(n,"POST","/v2/accounts:revokeToken",Er(n,e))})).apply(this,arguments)}class Kg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PX(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(0!==e.length,"internal-error");const t=PX(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,k.A)(function*(){return t||!r.accessToken||r.isExpired?(He(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,k.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function ZPe(n,e){return AF.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Kg;return r&&(He("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(He("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(He("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kg,this.toJSON())}_performRefresh(){return kl("not implemented")}}function hd(n,e){He("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Vc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Sc.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QPe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wF(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,k.A)(function*(){const r=yield Lc(t,t.stsTokenManager.getToken(t.auth,e));return He(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function qPe(n){return bF.apply(this,arguments)}(this,e)}reload(){return function YPe(n){return TF.apply(this,arguments)}(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,k.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield AE(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,k.A)(function*(){if(Ju(e.auth.app))return Promise.reject(qi(e.auth));const t=yield e.getIdToken();return yield Lc(e,function WPe(n,e){return _F.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,m=null!==(i=t.email)&&void 0!==i?i:void 0,y=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,b=null!==(o=t.photoURL)&&void 0!==o?o:void 0,T=null!==(a=t.tenantId)&&void 0!==a?a:void 0,P=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,B=null!==(c=t.createdAt)&&void 0!==c?c:void 0,V=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:Q,emailVerified:be,isAnonymous:Be,providerData:je,stsTokenManager:H}=t;He(Q&&H,e,"internal-error");const L=Kg.fromJSON(this.name,H);He("string"==typeof Q,e,"internal-error"),hd(d,e.name),hd(m,e.name),He("boolean"==typeof be,e,"internal-error"),He("boolean"==typeof Be,e,"internal-error"),hd(y,e.name),hd(b,e.name),hd(T,e.name),hd(P,e.name),hd(B,e.name),hd(V,e.name);const W=new Vc({uid:Q,auth:e,email:m,emailVerified:be,displayName:d,isAnonymous:Be,photoURL:b,phoneNumber:y,tenantId:T,stsTokenManager:L,createdAt:B,lastLoginAt:V});return je&&Array.isArray(je)&&(W.providerData=je.map(J=>Object.assign({},J))),P&&(W._redirectEventId=P),W}static _fromIdTokenResponse(e,t,r=!1){return(0,k.A)(function*(){const i=new Kg;i.updateFromServerResponse(t);const s=new Vc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield AE(s),s})()}static _fromGetAccountInfoResponse(e,t,r){return(0,k.A)(function*(){const i=t.users[0];He(void 0!==i.localId,"internal-error");const s=void 0!==i.providerUserInfo?MX(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||s?.length),a=new Kg;a.updateFromIdToken(r);const l=new Vc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wF(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||s?.length)};return Object.assign(l,c),l})()}}const NX=new Map;function Bc(n){dd(n instanceof Function,"Expected a class definition");let e=NX.get(n);return e?(dd(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,NX.set(n,e),e)}const kX=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,k.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,k.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,k.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,k.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function mS(n,e,t){return`firebase:${n}:${e}:${t}`}class Qg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mS(this.userKey,i.apiKey,s),this.fullPersistenceKey=mS("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,k.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Vc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,k.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,k.A)(function*(){if(!t.length)return new Qg(Bc(kX),e,r);const i=(yield Promise.all(t.map(function(){var c=(0,k.A)(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Bc(kX);const o=mS(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const d=Vc._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=(0,k.A)(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return c.apply(this,arguments)}}())),new Qg(s,e,r)):new Qg(s,e,r)})()}}function OX(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jX(e))return"Blackberry";if(zX(e))return"Webos";if(LX(e))return"Safari";if((e.includes("chrome/")||VX(e))&&!e.includes("edge/"))return"Chrome";if(UX(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function FX(n=is()){return/firefox\//i.test(n)}function LX(n=is()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VX(n=is()){return/crios\//i.test(n)}function BX(n=is()){return/iemobile/i.test(n)}function UX(n=is()){return/android/i.test(n)}function jX(n=is()){return/blackberry/i.test(n)}function zX(n=is()){return/webos/i.test(n)}function DF(n=is()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function HX(n=is()){return DF(n)||UX(n)||zX(n)||jX(n)||/windows phone/i.test(n)||BX(n)}function $X(n,e=[]){let t;switch(n){case"Browser":t=OX(is());break;case"Worker":t=`${OX(is())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ng}/${r}`}class nMe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,k.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function xF(){return(xF=(0,k.A)(function*(n,e={}){return Ir(n,"GET","/v2/passwordPolicy",Er(n,e))})).apply(this,arguments)}class sMe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=null===(t=l.meetsMinPasswordLength)||void 0===t||t),l.isValid&&(l.isValid=null===(r=l.meetsMaxPasswordLength)||void 0===r||r),l.isValid&&(l.isValid=null===(i=l.containsLowercaseLetter)||void 0===i||i),l.isValid&&(l.isValid=null===(s=l.containsUppercaseLetter)||void 0===s||s),l.isValid&&(l.isValid=null===(o=l.containsNumericCharacter)||void 0===o||o),l.isValid&&(l.isValid=null===(a=l.containsNonAlphanumericCharacter)||void 0===a||a),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class oMe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WX(this),this.idTokenSubscription=new WX(this),this.beforeStateQueue=new nMe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Bc(t)),this._initializationPromise=this.queue((0,k.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Qg.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,k.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,k.A)(function*(){try{const r=yield RX(t,{idToken:e}),i=yield Vc._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,k.A)(function*(){var r;if(Ju(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(l,l))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=s?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return He(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,k.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,k.A)(function*(){try{yield AE(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function BPe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,k.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,k.A)(function*(){if(Ju(t.app))return Promise.reject(qi(t));const r=e?ya(e):null;return r&&He(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,k.A)(function*(){if(!r._deleted)return e&&He(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,k.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,k.A)(function*(){return Ju(e.app)?Promise.reject(qi(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return Ju(this.app)?Promise.reject(qi(this)):this.queue((0,k.A)(function*(){yield t.assertedPersistence.setPersistence(Bc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,k.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,k.A)(function*(){const t=yield function rMe(n){return xF.apply(this,arguments)}(e),r=new sMe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wb("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,k.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function JPe(n,e){return SF.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,k.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,k.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Bc(e)||t._popupRedirectResolver;He(r,t,"argument-error"),t.redirectPersistenceManager=yield Qg.create(t,[Bc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,k.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,k.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,k.A)(function*(){if(e===t.currentUser)return t.queue((0,k.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}{const l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){var t=this;return(0,k.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$X(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,k.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,k.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function LPe(n,...e){hS.logLevel<=Xn.WARN&&hS.warn(`Auth (${Ng}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function pi(n){return ya(n)}class WX{constructor(e){this.auth=e,this.observer=null,this.addObserver=function fSe(n,e){const t=new pSe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let SE={loadJS:()=>(0,k.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GX(n){return`__${n}${Math.floor(1e6*Math.random())}`}function QX(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function YX(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class RE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kl("not implemented")}_getIdTokenResponse(e){return kl("not implemented")}_linkToIdToken(e,t){return kl("not implemented")}_getReauthenticationResolver(e){return kl("not implemented")}}function Uc(n,e){return qF.apply(this,arguments)}function qF(){return(qF=(0,k.A)(function*(n,e){return function Fc(n,e,t,r){return pF.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Er(n,e))})).apply(this,arguments)}class jc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class jMe extends jc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,k.A)(function*(){const s=yield Vc._fromIdTokenResponse(e,r,i),o=tZ(r);return new Ia({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,k.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=tZ(r);return new Ia({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function tZ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class bS extends Zu{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bS.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new bS(e,t,r,i)}}function nZ(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?bS._fromErrorAndOperation(n,s,e,r):s})}function rL(){return(rL=(0,k.A)(function*(n,e,t=!1){const r=yield Lc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ia._forOperation(n,"link",r)})).apply(this,arguments)}function sL(){return(sL=(0,k.A)(function*(n,e,t=!1){const{auth:r}=n;if(Ju(r.app))return Promise.reject(qi(r));const i="reauthenticate";try{const s=yield Lc(n,nZ(r,i,e,n),t);He(s.idToken,r,"internal-error");const o=pS(s.idToken);He(o,r,"internal-error");const{sub:a}=o;return He(n.uid===a,r,"user-mismatch"),Ia._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&Eo(r,"user-mismatch"),s}})).apply(this,arguments)}function oL(){return(oL=(0,k.A)(function*(n,e,t=!1){if(Ju(n.app))return Promise.reject(qi(n));const r="signIn",i=yield nZ(n,r,e),s=yield Ia._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function TL(){return(TL=(0,k.A)(function*(n,e){return Ir(n,"POST","/v1/accounts:createAuthUri",Er(n,e))})).apply(this,arguments)}function AL(){return AL=(0,k.A)(function*(n,e){const r={identifier:e,continueUri:uF()?IE():"http://localhost"},{signinMethods:i}=yield function KMe(n,e){return TL.apply(this,arguments)}(ya(n),r);return i||[]}),AL.apply(this,arguments)}const wS="__sak";class cZ{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wS,"1"),this.storage.removeItem(wS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cNe=(()=>{class n extends cZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HX(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function tMe(){return function iSe(){const n=is();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,k.A)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,k.A)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,k.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),uZ=(()=>{class n extends cZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let dNe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,k.A)(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=(0,k.A)(function*(m){return m(i.origin,a)});return function(m){return d.apply(this,arguments)}}()),u=yield function uNe(n){return Promise.all(n.map(function(){var e=(0,k.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function LL(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class hNe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,k.A)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=LL("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(y.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Ii(){return window}function VL(){return typeof Ii().WorkerGlobalScope<"u"&&"function"==typeof Ii().importScripts}function BL(){return(BL=(0,k.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const dZ="firebaseLocalStorageDb",CS="firebaseLocalStorage",hZ="fbase_key";class OE{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function TS(n,e){return n.transaction([CS],e?"readwrite":"readonly").objectStore(CS)}function UL(){const n=indexedDB.open(dZ,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(CS,{keyPath:hZ})}catch(i){t(i)}}),n.addEventListener("success",(0,k.A)(function*(){const r=n.result;r.objectStoreNames.contains(CS)?e(r):(r.close(),yield function yNe(){const n=indexedDB.deleteDatabase(dZ);return new OE(n).toPromise()}(),e(yield UL()))}))})}function fZ(n,e,t){return jL.apply(this,arguments)}function jL(){return(jL=(0,k.A)(function*(n,e,t){const r=TS(n,!0).put({[hZ]:e,value:t});return new OE(r).toPromise()})).apply(this,arguments)}function zL(){return(zL=(0,k.A)(function*(n,e){const t=TS(n,!1).get(e),r=yield new OE(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function pZ(n,e){const t=TS(n,!0).delete(e);return new OE(t).toPromise()}const INe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,k.A)(function*(){return t.db||(t.db=yield UL()),t.db})()}_withRetries(t){var r=this;return(0,k.A)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,k.A)(function*(){return VL()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,k.A)(function*(){t.receiver=dNe._getInstance(function gNe(){return VL()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,k.A)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,k.A)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,k.A)(function*(){var r,i;if(t.activeServiceWorker=yield function pNe(){return BL.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new hNe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,k.A)(function*(){if(r.sender&&r.activeServiceWorker&&function mNe(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,k.A)(function*(){try{if(!indexedDB)return!1;const t=yield UL();return yield fZ(t,wS,"1"),yield pZ(t,wS),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,k.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,k.A)(function*(){return i._withPendingWrite((0,k.A)(function*(){return yield i._withRetries(s=>fZ(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,k.A)(function*(){const i=yield r._withRetries(s=>function vNe(n,e){return zL.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,k.A)(function*(){return r._withPendingWrite((0,k.A)(function*(){return yield r._withRetries(i=>pZ(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,k.A)(function*(){const r=yield t._withRetries(o=>{const a=TS(o,!1).getAll();return new OE(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;if(0!==r.length)for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,k.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();GX("rcb"),new wE(3e4,6e4);class JL extends RE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Uc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Uc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PNe(n){return function sZ(n,e){return oL.apply(this,arguments)}(n.auth,new JL(n),n.bypassAuthState)}function MNe(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),function iZ(n,e){return sL.apply(this,arguments)}(t,new JL(n),n.bypassAuthState)}function NNe(n){return eV.apply(this,arguments)}function eV(){return(eV=(0,k.A)(function*(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),function nL(n,e){return rL.apply(this,arguments)}(t,new JL(n),n.bypassAuthState)})).apply(this,arguments)}class kNe{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,k.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,k.A)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PNe;case"linkViaPopup":case"linkViaRedirect":return NNe;case"reauthViaPopup":case"reauthViaRedirect":return MNe;default:Eo(this.auth,"internal-error")}}resolve(e){dd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new wE(2e3,1e4);const ONe="pendingRedirect",LE=new Map;class FNe extends kNe{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,k.A)(function*(){let r=LE.get(t.auth._key());if(!r){try{const s=(yield function LNe(n,e){return sV.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}LE.set(t.auth._key(),r)}return t.bypassAuthState||LE.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,k.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,k.A)(function*(){})()}cleanUp(){}}function sV(){return(sV=(0,k.A)(function*(n,e){const t=function _Z(n){return mS(ONe,n.config.apiKey,n.name)}(e),r=function gZ(n){return Bc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function VNe(n,e){LE.set(n._key(),e)}function yZ(n,e){return hV.apply(this,arguments)}function hV(){return(hV=(0,k.A)(function*(n,e,t=!1){if(Ju(n.app))return Promise.reject(qi(n));const r=pi(n),i=function Mf(n,e){return e?Bc(e):(He(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),o=yield new FNe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class HNe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function $Ne(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EZ(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!EZ(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ea(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bZ(e))}saveEventToCache(e){this.cachedEventUids.add(bZ(e)),this.lastProcessedEventTime=Date.now()}}function bZ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function EZ({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function pV(){return(pV=(0,k.A)(function*(n,e={}){return Ir(n,"GET","/v1/projects",e)})).apply(this,arguments)}const GNe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qNe=/^https?/;function mV(){return mV=(0,k.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function WNe(n){return pV.apply(this,arguments)}(n);for(const t of e)try{if(QNe(t))return}catch{}Eo(n,"unauthorized-domain")}),mV.apply(this,arguments)}function QNe(n){const e=IE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!qNe.test(t))return!1;if(GNe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const YNe=new wE(3e4,6e4);function IZ(){const n=Ii().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function XNe(n){return new Promise((e,t)=>{var r,i,s;function o(){IZ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IZ(),t(Ea(n,"network-request-failed"))},timeout:YNe.get()})}if(null!==(i=null===(r=Ii().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Ii().gapi)||void 0===s||!s.load){const a=GX("iframefcb");return Ii()[a]=()=>{gapi.load?o():t(Ea(n,"network-request-failed"))},function RF(n){return SE.loadJS(n)}(`${function uMe(){return SE.gapiScript}()}?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw AS=null,e})}let AS=null;const JNe=new wE(5e3,15e3),eke="__/auth/iframe",tke="emulator/auth/iframe",nke={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rke=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ike(n){const e=n.config;He(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dF(e,tke):`https://${n.config.authDomain}/${eke}`,r={apiKey:e.apiKey,appName:n.name,v:Ng},i=rke.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Rg(r).slice(1)}`}function gV(){return gV=(0,k.A)(function*(n){const e=yield function ZNe(n){return AS=AS||XNe(n),AS}(n),t=Ii().gapi;return He(t,n,"internal-error"),e.open({where:document.body,url:ike(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nke,dontclear:!0},r=>new Promise(function(){var i=(0,k.A)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Ea(n,"network-request-failed"),l=Ii().setTimeout(()=>{o(a)},JNe.get());function c(){Ii().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),gV.apply(this,arguments)}const oke={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wZ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fke="__/auth/handler",pke="emulator/auth/handler",mke=encodeURIComponent("fac");function CZ(n,e,t,r,i,s){return _V.apply(this,arguments)}function _V(){return(_V=(0,k.A)(function*(n,e,t,r,i,s){He(n.config.authDomain,n,"auth-domain-config-required"),He(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ng,eventId:i};if(e instanceof jc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",$O(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof jMe){const u=e.getScopes().filter(d=>""!==d);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield n._getAppCheckToken(),c=l?`#${mke}=${encodeURIComponent(l)}`:"";return`${function gke({config:n}){return n.emulator?dF(n,pke):`https://${n.authDomain}/${fke}`}(n)}?${Rg(a).slice(1)}${c}`})).apply(this,arguments)}const yV="webStorageSupport",yke=class _ke{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uZ,this._completeRedirectFn=yZ,this._overrideRedirectResult=VNe}_openPopup(e,t,r,i){var s=this;return(0,k.A)(function*(){var o;dd(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield CZ(e,t,r,IE(),i);return function dke(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},oke),{width:r.toString(),height:i.toString(),top:s,left:o}),c=is().toLowerCase();t&&(a=VX(c)?"_blank":t),FX(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(function eMe(n=is()){var e;return DF(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function hke(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new wZ(null);const d=window.open(e||"",a,u);He(d,n,"popup-blocked");try{d.focus()}catch{}return new wZ(d)}(e,a,LL())})()}_openRedirect(e,t,r,i){var s=this;return(0,k.A)(function*(){return yield s._originValidation(e),function fNe(n){Ii().location.href=n}(yield CZ(e,t,r,IE(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(dd(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,k.A)(function*(){const r=yield function ske(n){return gV.apply(this,arguments)}(e),i=new HNe(e);return r.register("authEvent",s=>(He(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yV,{type:yV},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[yV];void 0!==o&&t(!!o),Eo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function KNe(n){return mV.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HX()||LX()||DF()}};var DZ="@firebase/auth";class vke{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,k.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const wke=aQ("authIdTokenMaxAge")||300;let RZ=null;const Cke=n=>function(){var e=(0,k.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>wke)return;const s=r?.token;RZ!==s&&(RZ=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Tke(n=pQ()){const e=PA(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function vMe(n,e){const t=PA(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(SA(t.getOptions(),e??{}))return i;Eo(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:yke,persistence:[INe,cNe,uZ]}),r=aQ("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Cke(s.toString());(function rNe(n,e,t){ya(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function nNe(n,e,t,r){ya(n).onIdTokenChanged(e,t,r)}(t,a=>o(a))}}const i=sQ("auth");return i&&function EMe(n,e,t){const r=pi(n);He(r._canInitEmulator,r,"emulator-config-failed"),He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=QX(e),{host:o,port:a}=function IMe(n){const e=QX(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:YX(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:YX(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function wMe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function aMe(n){SE=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ea("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function Ake(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Eke(n){Mg(new yf("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;He(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$X(n)},c=new oMe(r,i,s,l);return function bMe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Bc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mg(new yf("auth-internal",e=>{const t=pi(e.getProvider("auth").getImmediate());return new vke(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ed(DZ,"1.8.1",function bke(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),ed(DZ,"1.8.1","esm2017")}("Browser"),G(5046);var Ol=G(9574);Ol.A.registerVersion("firebase","10.14.1","app-compat");const xke=["ngOnDestroy"];class PZ{constructor(e){return e}}const VE=new ve("angularfire2.app.options"),BE=new ve("angularfire2.app.name");function DS(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Ol.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ol.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Mke("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new PZ(o)}const Mke=(n,...e)=>{},Nke={provide:PZ,useFactory:DS,deps:[VE,_t,[new Ti,BE]]};let kke=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:VE,useValue:t},{provide:BE,useValue:r}]}}constructor(t){Ol.A.registerVersion("angularfire",Yu.full,"core"),Ol.A.registerVersion("angularfire",Yu.full,"app-compat"),Ol.A.registerVersion("angular",P5.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Ae(Bs))};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[Nke]})}return n})();function bV(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Oke(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(MZ("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Fke?" You may need to reload as Firebase is not HMR aware.":""}`),MZ("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Fke=typeof module<"u"&&!!module.hot,MZ=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class Lke extends E{constructor(e=1/0,t=1/0,r=oO){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function EV(n={}){const{connector:e=()=>new E,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=l=void 0,u=d=!1},b=()=>{const T=o;y(),T?.unsubscribe()};return me((T,P)=>{c++,!d&&!u&&m();const B=l=l??e();P.add(()=>{c--,0===c&&!d&&!u&&(a=IV(b,i))}),B.subscribe(P),!o&&c>0&&(o=new Li({next:V=>B.next(V),error:V=>{d=!0,m(),a=IV(y,t,V),B.error(V)},complete:()=>{u=!0,m(),a=IV(y,r),B.complete()}}),$s(T).subscribe(o))})(s)}}function IV(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Li({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function NZ(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,EV({connector:()=>new Lke(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function kZ(n,e){return ft(e)?dn(()=>n,e):dn(()=>n)}const wV=new ve("angularfire2.auth.use-emulator"),CV=new ve("angularfire2.auth.settings"),TV=new ve("angularfire2.auth.tenant-id"),AV=new ve("angularfire2.auth.langugage-code"),SV=new ve("angularfire2.auth.use-device-language"),DV=new ve("angularfire.auth.persistence"),xV=(n,e,t,r,i,s,o,a)=>bV(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let UE=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,u,d,m,y){const b=new E,T=Xe(void 0).pipe(Lu(o.outsideAngular),dn(()=>s.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,5046)))),Ve(()=>DS(t,s,r)),Ve(P=>xV(P,s,a,c,u,d,l,m)),NZ({bufferSize:1,refCount:!1}));if(lT(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{T.pipe($u()).subscribe();const P=T.pipe(dn(Q=>Q.getRedirectResult().then(be=>be,()=>null)),ki,NZ({bufferSize:1,refCount:!1})),B=T.pipe(dn(Q=>new Lt(be=>({unsubscribe:s.runOutsideAngular(()=>Q.onAuthStateChanged(Be=>be.next(Be),Be=>be.error(Be),()=>be.complete()))})))),V=T.pipe(dn(Q=>new Lt(be=>({unsubscribe:s.runOutsideAngular(()=>Q.onIdTokenChanged(Be=>be.next(Be),Be=>be.error(Be),()=>be.complete()))}))));this.authState=P.pipe(kZ(B),Xh(o.outsideAngular),Lu(o.insideAngular)),this.user=P.pipe(kZ(V),Xh(o.outsideAngular),Lu(o.insideAngular)),this.idToken=this.user.pipe(dn(Q=>Q?$n(Q.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(dn(Q=>Q?$n(Q.getIdTokenResult()):Xe(null))),this.credential=qu(P,b,this.authState.pipe(ei(Q=>!Q))).pipe(Ve(Q=>Q?.user?Q:null),Xh(o.outsideAngular),Lu(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(xke.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const d=u?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,d),d})})})}))(this,T,s,{spy:{apply:(P,B,V)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&V.then(Q=>b.next(Q))}}})}static \u0275fac=function(r){return new(r||n)(Ae(VE),Ae(BE,8),Ae(Bs),Ae(_t),Ae(Ag),Ae(wV,8),Ae(CV,8),Ae(TV,8),Ae(AV,8),Ae(SV,8),Ae(DV,8),Ae(vA,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Bke=(()=>{class n{constructor(){Ol.A.registerVersion("angularfire",Yu.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[UE]})}return n})(),OZ=(()=>{class n{constructor(t,r){this.auth=t,this.afAuth=r}get user(){return this.afAuth.authState}login(t,r){return jAe(this.auth,t,r)}register(t,r,i){return VAe(this.auth,t,r).then(s=>{const o=s.user;return o?(HAe(o,{displayName:i}).then(()=>{console.log("\u4f7f\u7528\u8005\u540d\u7a31\u5df2\u66f4\u65b0:",i)}),UO(o).then(()=>{console.log("\u9a57\u8b49\u4fe1\u5df2\u767c\u9001\u81f3:",t)}),o):Promise.reject("\u4f7f\u7528\u8005\u8a3b\u518a\u5931\u6557")})}loginWithGoogle(){const t=new Xu.X;return zAe(this.auth,t)}isLoggedIn(){return this.afAuth.authState.pipe(Ve(t=>null!==t))}getUser(){return new Lt(t=>{UAe(this.auth,r=>{t.next(r)})})}logout(){this.afAuth.signOut()}getAuthState(){return this.afAuth.authState}getUserData(t){return pPe(function fX(n,e){return(n=ya(n))._checkNotDeleted("ref"),void 0!==e?Gg(n._root,e):n._root}(function PPe(n=pQ(),e){const t=PA(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(()=>{const e=sQ("database");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();r&&function MPe(n,e,t,r={}){(n=ya(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&xl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new eE(eE.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:function JAe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[EA(JSON.stringify({alg:"none",type:"JWT"})),EA(JSON.stringify(o)),""].join(".")}(r.mockUserToken,n.app.options.projectId);s=new eE(o)}!function APe(n,e,t,r){n.repoInfo_=new s1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}(),`users/${t}`)).then(s=>s.val())}sendVerificationEmail(t){return UO(t)}resendVerificationEmail(t){const r=Tke();return function QMe(n,e){return AL.apply(this,arguments)}(r,t).then(i=>{if(i.includes("password")){const s=r.currentUser;return s?UO(s):Promise.reject(new Error("\u8acb\u5148\u767b\u5165\u4ee5\u5bc4\u9001\u9a57\u8b49\u4fe1\u3002"))}return Promise.reject(new Error("\u6b64\u96fb\u5b50\u90f5\u4ef6\u672a\u8a3b\u518a\u3002"))})}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{console.log("\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001")}).catch(r=>{throw console.error("\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u767c\u9001\u5931\u6557",r),r})}static{this.\u0275fac=function(r){return new(r||n)(Ae(bA),Ae(UE))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const jke=["mat-icon-button",""],zke=["*"],Hke=new ve("MAT_BUTTON_CONFIG"),$ke=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let Wke=(()=>{class n{_elementRef=O(lr);_platform=O(Gs);_ngZone=O(_t);_animationMode=O(mc,{optional:!0});_focusMonitor=O(lK);_rippleLoader=O(eAe);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){O(hf).load(TK);const t=O(Hke,{optional:!0}),r=this._elementRef.nativeElement,i=r.classList;this.disabledInteractive=t?.disabledInteractive??!1,this.color=t?.color??null,this._rippleLoader?.configureRipple(r,{className:"mat-mdc-button-ripple"});for(const{attribute:s,mdcClasses:o}of $ke)r.hasAttribute(s)&&i.add(...o)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",rs],disabled:[2,"disabled","disabled",rs],ariaDisabled:[2,"aria-disabled","ariaDisabled",rs],disabledInteractive:[2,"disabledInteractive","disabledInteractive",rs]},standalone:!0,features:[Uh]})}return n})(),qke=(()=>{class n extends Wke{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,i){2&r&&(Jr("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),bC(i.color?"mat-"+i.color:""),Es("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[_n,Is],attrs:jke,ngContentSelectors:zke,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Wh(),ln(0,"span",0),da(1),ln(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return n})(),FZ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr,PK,Wr]})}return n})();function Kke(n,e){1&n&&(De(0,"small",19),ut(1,"\u5e33\u865f\u70ba\u5fc5\u586b"),Me())}function Qke(n,e){1&n&&(De(0,"small",19),ut(1,"\u8acb\u8f38\u5165\u6709\u6548\u7684\u96fb\u5b50\u90f5\u4ef6"),Me())}function Yke(n,e){1&n&&(De(0,"small",19),ut(1,"\u5bc6\u78bc\u70ba\u5fc5\u586b"),Me())}function Xke(n,e){1&n&&(De(0,"small",19),ut(1,"\u5bc6\u78bc\u81f3\u5c11\u9700\u89816\u500b\u5b57\u5143"),Me())}function Zke(n,e){1&n&&(De(0,"small",19),ut(1," \u5bc6\u78bc\u8207\u518d\u6b21\u8f38\u5165\u7684\u5bc6\u78bc\u4e0d\u4e00\u81f4 "),Me())}function Jke(n,e){1&n&&(De(0,"small",19),ut(1," \u66b1\u7a31\u70ba\u5fc5\u586b "),Me())}function eOe(n,e){if(1&n&&(De(0,"div")(1,"div")(2,"label",20),ut(3,"\u91cd\u65b0\u8f38\u5165\u5bc6\u78bc"),Me(),ln(4,"input",21),Ut(5,Zke,2,0,"small",8),Me(),De(6,"div")(7,"label",22),ut(8,"\u66b1\u7a31"),Me(),ln(9,"input",23),Ut(10,Jke,2,0,"small",8),Me()()),2&n){const t=gt();Oe(5),rt("ngIf",(null==t.authForm.errors?null:t.authForm.errors.passwordsMismatch)&&t.f.rePassword.touched),Oe(5),rt("ngIf",(null==t.authForm.errors?null:t.authForm.errors.displayNameRequired)&&t.f.displayName.touched)}}function tOe(n,e){if(1&n&&(De(0,"p",24),ut(1),Me()),2&n){const t=gt();Oe(),bl(t.errorMessage)}}function nOe(n,e){if(1&n){const t=vc();De(0,"div")(1,"button",25),Dn("click",function(){return ji(t),zi(gt().resendVerificationEmail())}),ut(2," \u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1 "),Me()()}}function rOe(n,e){if(1&n){const t=vc();De(0,"div",26)(1,"button",27),Dn("click",function(){return ji(t),zi(gt().forgotPassword())}),ut(2," \u5fd8\u8a18\u5bc6\u78bc\uff1f "),Me()()}}let iOe=(()=>{class n{constructor(t,r,i){this.fb=t,this.authService=r,this.dialogRef=i,this.isRegister=!1,this.errorMessage="",this.authForm=this.fb.group({email:["",[yT.required,yT.email]],password:["",[yT.required,yT.minLength(6)]],rePassword:[""],displayName:[""]},{validators:[this.passwordMatchValidator,this.displayNameRequiredValidator.bind(this)]})}passwordMatchValidator(t){const r=t.get("password")?.value,i=t.get("rePassword")?.value;return r&&i&&r!==i?{passwordsMismatch:!0}:null}displayNameRequiredValidator(t){const r=this.isRegister,i=t.get("displayName")?.value;return!r||i&&""!==i.trim()?null:{displayNameRequired:!0}}submitForm(){this.authForm.invalid?this.markFormGroupTouched(this.authForm):this.isRegister?this.register():this.login()}markFormGroupTouched(t){Object.values(t.controls).forEach(r=>{r instanceof tf?this.markFormGroupTouched(r):r.markAsTouched()})}collectErrors(t){const r=[];return Object.keys(t.controls).forEach(i=>{const s=t.get(i);s&&s.errors&&(s.errors.required&&r.push(`${this.getFieldDisplayName(i)} \u70ba\u5fc5\u586b`),s.errors.email&&r.push(`${this.getFieldDisplayName(i)} \u683c\u5f0f\u4e0d\u6b63\u78ba`),s.errors.minlength&&r.push(`${this.getFieldDisplayName(i)} \u81f3\u5c11\u9700\u8981 ${s.errors.minlength.requiredLength} \u500b\u5b57\u5143`))}),t.errors?.passwordsMismatch&&r.push("\u5bc6\u78bc\u8207\u78ba\u8a8d\u5bc6\u78bc\u4e0d\u4e00\u81f4"),r.join("\n")}getFieldDisplayName(t){return{email:"Email",password:"\u5bc6\u78bc",rePassword:"\u78ba\u8a8d\u5bc6\u78bc",displayName:"\u66b1\u7a31"}[t]||t}login(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;console.log(s),!s||s.emailVerified?(console.log("\u4e00\u822c\u767b\u5165\u6210\u529f"),this.close(!0)):this.errorMessage="\u60a8\u7684\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49\uff0c\u8acb\u5148\u81f3\u4fe1\u7bb1\u9ede\u64ca\u9a57\u8b49\u9023\u7d50\u5f8c\u518d\u91cd\u65b0\u767b\u5165\u3002"}).catch(i=>{this.errorMessage="auth/invalid-credential"===i.code?"\u5e33\u865f\u4e0d\u5b58\u5728\u6216\u5bc6\u78bc\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\u3002":"\u56e0\u4e0d\u660e\u539f\u56e0\u767b\u5165\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002",console.error(i.message)})}register(){const{email:t,password:r,displayName:i}=this.authForm.value;this.authService.register(t,r,i).then(()=>{this.errorMessage="\u8a3b\u518a\u6210\u529f\uff0c\u8acb\u81f3\u60a8\u7684\u4fe1\u7bb1\u78ba\u8a8d\u5f8c\u91cd\u65b0\u767b\u5165",this.authForm.reset(),this.isRegister=!1}).catch(s=>{this.errorMessage="auth/email-already-in-use"===s.code?"\u5e33\u865f\u5df2\u5b58\u5728\uff0c\u8acb\u4f7f\u7528Google\u6216\u76f4\u63a5\u767b\u5165":"\u56e0\u4e0d\u660e\u539f\u56e0\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}resendVerificationEmail(){const{email:t,password:r}=this.authForm.value;this.authService.login(t,r).then(i=>{const s=i.user;if(console.log("\u9a57\u8b49\u4fe1\u91cd\u767c\u7d66",s),s)return this.authService.sendVerificationEmail(s),void(this.errorMessage="\u9a57\u8b49\u4fe1\u5df2\u91cd\u65b0\u5bc4\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u96fb\u5b50\u90f5\u4ef6\u4e26\u91cd\u65b0\u767b\u5165")}).catch(i=>{console.error(i.message),this.errorMessage="\u91cd\u65b0\u5bc4\u9001\u9a57\u8b49\u4fe1\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"})}loginWithGoogle(){this.authService.loginWithGoogle().then(()=>{console.log("Google\u767b\u5165\u6210\u529f"),this.close(!0)}).catch(t=>{console.error(t.message),this.errorMessage=t.message})}close(t){this.dialogRef.close(t)}get f(){return this.authForm.controls}forgotPassword(){const{email:t}=this.authForm.value;t?this.authService.forgotPassword(t).then(()=>{this.errorMessage="\u91cd\u8a2d\u5bc6\u78bc\u7684\u90f5\u4ef6\u5df2\u767c\u9001\uff0c\u8acb\u6aa2\u67e5\u60a8\u7684\u4fe1\u7bb1"}).catch(r=>{console.error("\u91cd\u8a2d\u5bc6\u78bc\u932f\u8aa4",r.message),this.errorMessage="\u767c\u9001\u91cd\u8a2d\u5bc6\u78bc\u90f5\u4ef6\u6642\u51fa\u932f\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002"}):this.errorMessage="\u8acb\u8f38\u5165\u5e33\u865f\u4f7f\u7528\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740"}static{this.\u0275fac=function(r){return new(r||n)(Re(_Ie),Re(OZ),Re(Hb))}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-login-page"]],decls:32,vars:12,consts:[[1,"dialog-content"],[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"text-primary-default","text-xl","font-semibold","mb-6"],["mat-icon-button","",1,"text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],[1,"material-icons"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"text-primary-default"],["type","email","id","email","formControlName","email","placeholder","\u8acb\u8f38\u5165\u4fe1\u7bb1\u4f5c\u70ba\u5e33\u865f",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["class","text-red-500",4,"ngIf"],["for","password",1,"text-primary-default"],["type","password","id","password","formControlName","password","placeholder","\u8f38\u5165\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[4,"ngIf"],["type","submit",1,"btn-login","w-full","py-2","px-4","bg-primary-default","text-white","rounded-md","mt-4","hover:bg-gray-400","hover:shadow-lg","transition-all","focus:outline-none"],["class","error-message text-red-500 mb-4",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],[1,"flex","justify-between","items-center","mt-6"],[1,"btn-register","text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"],[1,"btn-google","border","border-gray-300","flex","items-center","py-2","px-4","bg-primary-light","text-gray-700","rounded-md","hover:bg-gray-200","hover:border-gray-400","transition-all","focus:outline-none",3,"click"],["src","assets/google.png","alt","Google Logo",1,"w-5","h-5","mr-2"],[1,"text-red-500"],["for","rePassword",1,"text-primary-default"],["type","password","id","rePassword","formControlName","rePassword","placeholder","\u518d\u6b21\u8f38\u5165\u60a8\u7684\u5bc6\u78bc",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],["for","displayName",1,"text-primary-default"],["type","text","id","displayName","formControlName","displayName","placeholder","\u600e\u9ebc\u7a31\u547c\u60a8",1,"input-field","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-light"],[1,"error-message","text-red-500","mb-4"],[1,"btn-resend","w-full","py-2","px-4","bg-primary-light","border","border-gray-300","text-gray-700","rounded-md","hover:bg-gray-400","hover:text-white","transition-all","focus:outline-none",3,"click"],[1,"mt-4","text-center"],[1,"text-primary-default","underline","hover:text-gray-500","transition-all","focus:outline-none",3,"click"]],template:function(r,i){1&r&&(De(0,"mat-dialog-content",0)(1,"div",1)(2,"h2",2),ut(3),Me(),De(4,"button",3),Dn("click",function(){return i.close(!1)}),De(5,"span",4),ut(6,"close"),Me()()(),De(7,"form",5),Dn("ngSubmit",function(){return i.submitForm()}),De(8,"div")(9,"label",6),ut(10,"\u5e33\u865f"),Me(),ln(11,"input",7),Ut(12,Kke,2,0,"small",8)(13,Qke,2,0,"small",8),Me(),De(14,"div")(15,"label",9),ut(16,"\u5bc6\u78bc"),Me(),ln(17,"input",10),Ut(18,Yke,2,0,"small",8)(19,Xke,2,0,"small",8),Me(),Ut(20,eOe,11,2,"div",11),De(21,"button",12),ut(22),Me(),Ut(23,tOe,2,1,"p",13)(24,nOe,3,0,"div",11),Me(),Ut(25,rOe,3,0,"div",14),De(26,"div",15)(27,"button",16),Dn("click",function(){return i.isRegister=!i.isRegister}),ut(28),Me(),De(29,"button",17),Dn("click",function(){return i.loginWithGoogle()}),ln(30,"img",18),ut(31," Google \u767b\u5165 "),Me()()()),2&r&&(Oe(3),Qn(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),Oe(4),rt("formGroup",i.authForm),Oe(5),rt("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),Oe(),rt("ngIf",(null==i.f.email.errors?null:i.f.email.errors.email)&&i.f.email.touched),Oe(5),rt("ngIf",(null==i.f.email.errors?null:i.f.email.errors.required)&&i.f.email.touched),Oe(),rt("ngIf",(null==i.f.password.errors?null:i.f.password.errors.minlength)&&i.f.password.touched),Oe(),rt("ngIf",i.isRegister),Oe(2),Qn(" ",i.isRegister?"\u8a3b\u518a\u65b0\u5e33\u865f":"\u767b\u5165"," "),Oe(),rt("ngIf",i.errorMessage),Oe(),rt("ngIf",!i.isRegister&&i.errorMessage.includes("\u4fe1\u7bb1\u5c1a\u672a\u9a57\u8b49")),Oe(),rt("ngIf",!i.isRegister),Oe(3),Qn(" ",i.isRegister?"\u5df2\u6709\u5e33\u865f\uff1f\u767b\u5165":"\u8a3b\u518a"," "))},dependencies:[aT,OO,YK,qke,Tk,ab,hk,fk,PT,xk]})}}return n})();const Io_familyMartUrl_icon="https://www.family.com.tw/NewEnterprise/CSR/images/favicon.ico",Io_familyMartUrl_base="https://stamp.family.com.tw/api/maps",Io_familyMartUrl_endpoint={mapClassificationInfo:"/MapClassificationInfo",mapProductInfo:"/MapProductInfo"},Io_sevenElevenUrl_icon="https://www.7-11.com.tw/favicon.ico",Io_sevenElevenUrl_base="https://lovefood.openpoint.com.tw/LoveFood/api/",Io_sevenElevenUrl_endpoint={accessToken:"Auth/FrontendAuth/AccessToken",getList:"Master/FrontendItemCategory/GetList",getStoreByAddress:"Master/FrontendStore/GetStoreByAddress",getNearbyStoreList:"Search/FrontendStoreItemStock/GetNearbyStoreList",getStoreDetail:"Search/FrontendStoreItemStock/GetStoreDetail"},Io_sevenElevenUrl_params={mid_v:"W0_DiF4DlgU5OeQoRswrRcaaNHMWOL7K3ra3389ocJQv-rdOWS6Zu4AtGa7-7pjiccl0C5gm0u5UNONXuVUXcJCidRjIv9dsUd8PocNr5moiuJJ8hZla5iV0H3-8dZfASc7GgEm74679LYK2hBB-Sam6D0LAnYK9Lb0DZjaSctnHS5yYugtrYNdWoWk"},Io_firebaseConfig={apiKey:"AIzaSyA3i_YLXpXuHNrmrHULrqnsIj5Z919aCfw",authDomain:"friendly-cat-for-you.firebaseapp.com",databaseURL:"https://friendly-cat-for-you-default-rtdb.firebaseio.com",projectId:"friendly-cat-for-you",storageBucket:"friendly-cat-for-you.firebasestorage.app",messagingSenderId:"614210455616",appId:"1:614210455616:web:cedabfd68dca95ae4337a5",measurementId:"G-3V3740GPG7"};var pd=G(2541);let sOe=(()=>{class n{constructor(){}getCurrentPosition(){return new Promise((t,r)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>t(i),i=>r(i)):r(new Error("\u700f\u89bd\u5668\u4e0d\u652f\u63f4\u5730\u7406\u4f4d\u7f6e\u529f\u80fd"))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LZ=(()=>{class n{constructor(t){this.http=t}get(t,r={}){let i=new El;for(const s in r)r.hasOwnProperty(s)&&(i=i.set(s,r[s]));return this.http.get(t,{params:i})}post(t,r,i){let s=new El;if(r)for(const o in r)r.hasOwnProperty(o)&&(s=s.set(o,r[o]));return this.http.post(t,i||{},{params:s})}static{this.\u0275fac=function(r){return new(r||n)(Ae(sb))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VZ=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=Io_sevenElevenUrl_base}getAccessToken(){return this.requestService.post(this.baseUrl+Io_sevenElevenUrl_endpoint.accessToken,Io_sevenElevenUrl_params)}getStoreByAddress(t){const r=this.baseUrl+Io_sevenElevenUrl_endpoint.getStoreByAddress,i={token:sessionStorage.getItem("711Token"),keyword:t};return this.requestService.post(r,i)}getNearByStoreList(t){const r=this.baseUrl+Io_sevenElevenUrl_endpoint.getNearbyStoreList,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,t)}getFoodCategory(){const t=this.baseUrl+Io_sevenElevenUrl_endpoint.getList,r={token:sessionStorage.getItem("711Token")};return this.requestService.post(t,r)}getItemsByStoreNo(t){const r=this.baseUrl+Io_sevenElevenUrl_endpoint.getStoreDetail,i={token:sessionStorage.getItem("711Token")};return this.requestService.post(r,i,{storeNo:t,CurrentLocation:{Latitude:25.0375197,Longitude:121.5636704}})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/friendly-time/assets/seven_eleven_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Ae(LZ))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oOe=(()=>{class n{constructor(t){this.requestService=t,this.baseUrl=Io_familyMartUrl_base}getStores(){return this.requestService.get("https://alan-cheng.github.io/friendly-time/assets/family_mart_stores.json")}getNearByStoreList(t){return this.requestService.post(this.baseUrl+Io_familyMartUrl_endpoint.mapProductInfo,null,{ProjectCode:"202106302",OldPKeys:[],PostInfo:"",Latitude:t.Latitude,Longitude:t.Longitude})}getFoodDetails(){return this.requestService.get("https://alan-cheng.github.io/friendly-time/assets/family_mart_products.json")}static{this.\u0275fac=function(r){return new(r||n)(Ae(LZ))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aOe=(()=>{class n{constructor(){this.loadingSubject=new F(!1),this.loading$=this.loadingSubject.asObservable()}show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RV(){return me((n,e)=>{let t,r=!1;n.subscribe(Pe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Nf,jZ,BZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},UZ={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(H,L,W){W||(W=0);var J=Array(16);if("string"==typeof L)for(var ne=0;16>ne;++ne)J[ne]=L.charCodeAt(W++)|L.charCodeAt(W++)<<8|L.charCodeAt(W++)<<16|L.charCodeAt(W++)<<24;else for(ne=0;16>ne;++ne)J[ne]=L[W++]|L[W++]<<8|L[W++]<<16|L[W++]<<24;var re=H.g[3],q=(L=H.g[0])+(re^(W=H.g[1])&((ne=H.g[2])^re))+J[0]+3614090360&4294967295;q=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=(W=(ne=(re=(L=W+(q<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[1]+3905402710&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[2]+606105819&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[3]+3250441966&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[4]+4118548399&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[5]+1200080426&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[6]+2821735955&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[7]+4249261313&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[8]+1770035416&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[9]+2336552879&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[10]+4294925233&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[11]+2304563134&4294967295)<<22&4294967295|q>>>10))+((q=L+(re^W&(ne^re))+J[12]+1804603682&4294967295)<<7&4294967295|q>>>25))+((q=re+(ne^L&(W^ne))+J[13]+4254626195&4294967295)<<12&4294967295|q>>>20))+((q=ne+(W^re&(L^W))+J[14]+2792965006&4294967295)<<17&4294967295|q>>>15))+((q=W+(L^ne&(re^L))+J[15]+1236535329&4294967295)<<22&4294967295|q>>>10))+((q=L+(ne^re&(W^ne))+J[1]+4129170786&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[6]+3225465664&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[11]+643717713&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[0]+3921069994&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[5]+3593408605&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[10]+38016083&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[15]+3634488961&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[4]+3889429448&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[9]+568446438&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[14]+3275163606&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[3]+4107603335&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[8]+1163531501&4294967295)<<20&4294967295|q>>>12))+((q=L+(ne^re&(W^ne))+J[13]+2850285829&4294967295)<<5&4294967295|q>>>27))+((q=re+(W^ne&(L^W))+J[2]+4243563512&4294967295)<<9&4294967295|q>>>23))+((q=ne+(L^W&(re^L))+J[7]+1735328473&4294967295)<<14&4294967295|q>>>18))+((q=W+(re^L&(ne^re))+J[12]+2368359562&4294967295)<<20&4294967295|q>>>12))+((q=L+(W^ne^re)+J[5]+4294588738&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[8]+2272392833&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[11]+1839030562&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[14]+4259657740&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[1]+2763975236&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[4]+1272893353&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[7]+4139469664&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[10]+3200236656&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[13]+681279174&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[0]+3936430074&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[3]+3572445317&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[6]+76029189&4294967295)<<23&4294967295|q>>>9))+((q=L+(W^ne^re)+J[9]+3654602809&4294967295)<<4&4294967295|q>>>28))+((q=re+(L^W^ne)+J[12]+3873151461&4294967295)<<11&4294967295|q>>>21))+((q=ne+(re^L^W)+J[15]+530742520&4294967295)<<16&4294967295|q>>>16))+((q=W+(ne^re^L)+J[2]+3299628645&4294967295)<<23&4294967295|q>>>9))+((q=L+(ne^(W|~re))+J[0]+4096336452&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[7]+1126891415&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[14]+2878612391&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[5]+4237533241&4294967295)<<21&4294967295|q>>>11))+((q=L+(ne^(W|~re))+J[12]+1700485571&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[3]+2399980690&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[10]+4293915773&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[1]+2240044497&4294967295)<<21&4294967295|q>>>11))+((q=L+(ne^(W|~re))+J[8]+1873313359&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[15]+4264355552&4294967295)<<10&4294967295|q>>>22))+((q=ne+(L^(re|~W))+J[6]+2734768916&4294967295)<<15&4294967295|q>>>17))+((q=W+(re^(ne|~L))+J[13]+1309151649&4294967295)<<21&4294967295|q>>>11))+((re=(L=W+((q=L+(ne^(W|~re))+J[4]+4149444226&4294967295)<<6&4294967295|q>>>26))+((q=re+(W^(L|~ne))+J[11]+3174756917&4294967295)<<10&4294967295|q>>>22))^((ne=re+((q=ne+(L^(re|~W))+J[2]+718787259&4294967295)<<15&4294967295|q>>>17))|~L))+J[9]+3951481745&4294967295,H.g[0]=H.g[0]+L&4294967295,H.g[1]=H.g[1]+(ne+(q<<21&4294967295|q>>>11))&4294967295,H.g[2]=H.g[2]+ne&4294967295,H.g[3]=H.g[3]+re&4294967295}function o(H,L){this.h=L;for(var W=[],J=!0,ne=H.length-1;0<=ne;ne--){var re=0|H[ne];J&&re==L||(W[ne]=re,J=!1)}this.g=W}(function e(H,L){function W(){}W.prototype=L.prototype,H.D=L.prototype,H.prototype=new W,H.prototype.constructor=H,H.C=function(J,ne,re){for(var q=Array(arguments.length-2),Vr=2;Vr<arguments.length;Vr++)q[Vr-2]=arguments[Vr];return L.prototype[ne].apply(J,q)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(H,L){void 0===L&&(L=H.length);for(var W=L-this.blockSize,J=this.B,ne=this.h,re=0;re<L;){if(0==ne)for(;re<=W;)i(this,H,re),re+=this.blockSize;if("string"==typeof H){for(;re<L;)if(J[ne++]=H.charCodeAt(re++),ne==this.blockSize){i(this,J),ne=0;break}}else for(;re<L;)if(J[ne++]=H[re++],ne==this.blockSize){i(this,J),ne=0;break}}this.h=ne,this.o+=L},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var L=1;L<H.length-8;++L)H[L]=0;var W=8*this.o;for(L=H.length-8;L<H.length;++L)H[L]=255&W,W/=256;for(this.u(H),H=Array(16),L=W=0;4>L;++L)for(var J=0;32>J;J+=8)H[W++]=this.g[L]>>>J&255;return H};var a={};function l(H){return-128<=H&&128>H?function s(H,L){var W=a;return Object.prototype.hasOwnProperty.call(W,H)?W[H]:W[H]=L(H)}(H,function(L){return new o([0|L],0>L?-1:0)}):new o([0|H],0>H?-1:0)}function c(H){if(isNaN(H)||!isFinite(H))return d;if(0>H)return P(c(-H));for(var L=[],W=1,J=0;H>=W;J++)L[J]=H/W|0,W*=4294967296;return new o(L,0)}var d=l(0),m=l(1),y=l(16777216);function b(H){if(0!=H.h)return!1;for(var L=0;L<H.g.length;L++)if(0!=H.g[L])return!1;return!0}function T(H){return-1==H.h}function P(H){for(var L=H.g.length,W=[],J=0;J<L;J++)W[J]=~H.g[J];return new o(W,~H.h).add(m)}function B(H,L){return H.add(P(L))}function V(H,L){for(;(65535&H[L])!=H[L];)H[L+1]+=H[L]>>>16,H[L]&=65535,L++}function Q(H,L){this.g=H,this.h=L}function be(H,L){if(b(L))throw Error("division by zero");if(b(H))return new Q(d,d);if(T(H))return L=be(P(H),L),new Q(P(L.g),P(L.h));if(T(L))return L=be(H,P(L)),new Q(P(L.g),L.h);if(30<H.g.length){if(T(H)||T(L))throw Error("slowDivide_ only works with positive integers.");for(var W=m,J=L;0>=J.l(H);)W=Be(W),J=Be(J);var ne=je(W,1),re=je(J,1);for(J=je(J,2),W=je(W,2);!b(J);){var q=re.add(J);0>=q.l(H)&&(ne=ne.add(W),re=q),J=je(J,1),W=je(W,1)}return L=B(H,ne.j(L)),new Q(ne,L)}for(ne=d;0<=H.l(L);){for(W=Math.max(1,Math.floor(H.m()/L.m())),J=48>=(J=Math.ceil(Math.log(W)/Math.LN2))?1:Math.pow(2,J-48),q=(re=c(W)).j(L);T(q)||0<q.l(H);)q=(re=c(W-=J)).j(L);b(re)&&(re=m),ne=ne.add(re),H=B(H,q)}return new Q(ne,H)}function Be(H){for(var L=H.g.length+1,W=[],J=0;J<L;J++)W[J]=H.i(J)<<1|H.i(J-1)>>>31;return new o(W,H.h)}function je(H,L){var W=L>>5;L%=32;for(var J=H.g.length-W,ne=[],re=0;re<J;re++)ne[re]=0<L?H.i(re+W)>>>L|H.i(re+W+1)<<32-L:H.i(re+W);return new o(ne,H.h)}(n=o.prototype).m=function(){if(T(this))return-P(this).m();for(var H=0,L=1,W=0;W<this.g.length;W++){var J=this.i(W);H+=(0<=J?J:4294967296+J)*L,L*=4294967296}return H},n.toString=function(H){if(2>(H=H||10)||36<H)throw Error("radix out of range: "+H);if(b(this))return"0";if(T(this))return"-"+P(this).toString(H);for(var L=c(Math.pow(H,6)),W=this,J="";;){var ne=be(W,L).g,re=((0<(W=B(W,ne.j(L))).g.length?W.g[0]:W.h)>>>0).toString(H);if(b(W=ne))return re+J;for(;6>re.length;)re="0"+re;J=re+J}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h},n.l=function(H){return T(H=B(this,H))?-1:b(H)?0:1},n.abs=function(){return T(this)?P(this):this},n.add=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0,ne=0;ne<=L;ne++){var re=J+(65535&this.i(ne))+(65535&H.i(ne)),q=(re>>>16)+(this.i(ne)>>>16)+(H.i(ne)>>>16);J=q>>>16,W[ne]=(q&=65535)<<16|(re&=65535)}return new o(W,-2147483648&W[W.length-1]?-1:0)},n.j=function(H){if(b(this)||b(H))return d;if(T(this))return T(H)?P(this).j(P(H)):P(P(this).j(H));if(T(H))return P(this.j(P(H)));if(0>this.l(y)&&0>H.l(y))return c(this.m()*H.m());for(var L=this.g.length+H.g.length,W=[],J=0;J<2*L;J++)W[J]=0;for(J=0;J<this.g.length;J++)for(var ne=0;ne<H.g.length;ne++){var re=this.i(J)>>>16,q=65535&this.i(J),Vr=H.i(ne)>>>16,ea=65535&H.i(ne);W[2*J+2*ne]+=q*ea,V(W,2*J+2*ne),W[2*J+2*ne+1]+=re*ea,V(W,2*J+2*ne+1),W[2*J+2*ne+1]+=q*Vr,V(W,2*J+2*ne+1),W[2*J+2*ne+2]+=re*Vr,V(W,2*J+2*ne+2)}for(J=0;J<L;J++)W[J]=W[2*J+1]<<16|W[2*J];for(J=L;J<2*L;J++)W[J]=0;return new o(W,0)},n.A=function(H){return be(this,H).h},n.and=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)&H.i(J);return new o(W,this.h&H.h)},n.or=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)|H.i(J);return new o(W,this.h|H.h)},n.xor=function(H){for(var L=Math.max(this.g.length,H.g.length),W=[],J=0;J<L;J++)W[J]=this.i(J)^H.i(J);return new o(W,this.h^H.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jZ=UZ.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(H,L){if(0==H.length)throw Error("number format error: empty string");if(2>(L=L||10)||36<L)throw Error("radix out of range: "+L);if("-"==H.charAt(0))return P(u(H.substring(1),L));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var W=c(Math.pow(L,8)),J=d,ne=0;ne<H.length;ne+=8){var re=Math.min(8,H.length-ne),q=parseInt(H.substring(ne,ne+re),L);8>re?(re=c(Math.pow(L,re)),J=J.j(re).add(c(q))):J=(J=J.j(W)).add(c(q))}return J},Nf=UZ.Integer=o}).apply(typeof BZ<"u"?BZ:typeof self<"u"?self:typeof window<"u"?window:{});var zZ,jE,HZ,RS,PV,$Z,WZ,GZ,xS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,v,I){return p==Array.prototype||p==Object.prototype||(p[v]=I.value),p},r=function t(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof xS&&xS];for(var v=0;v<p.length;++v){var I=p[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(p,v){if(v)e:{var I=r;p=p.split(".");for(var M=0;M<p.length-1;M++){var oe=p[M];if(!(oe in I))break e;I=I[oe]}(v=v(M=I[p=p[p.length-1]]))!=M&&null!=v&&e(I,p,{configurable:!0,writable:!0,value:v})}}("Array.prototype.values",function(p){return p||function(){return function s(p,v){p instanceof String&&(p+="");var I=0,M=!1,oe={next:function(){if(!M&&I<p.length){var Ee=I++;return{value:v(Ee,p[Ee]),done:!1}}return M=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}(this,function(v,I){return I})}});var o=o||{},a=this||self;function l(p){var v=typeof p;return"array"==(v="object"!=v?v:p?Array.isArray(p)?"array":v:"null")||"object"==v&&"number"==typeof p.length}function c(p){var v=typeof p;return"object"==v&&null!=p||"function"==v}function u(p,v,I){return p.call.apply(p.bind,arguments)}function d(p,v,I){if(!p)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,M),p.apply(v,oe)}}return function(){return p.apply(v,arguments)}}function m(p,v,I){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:d).apply(null,arguments)}function y(p,v){var I=Array.prototype.slice.call(arguments,1);return function(){var M=I.slice();return M.push.apply(M,arguments),p.apply(this,M)}}function b(p,v){function I(){}I.prototype=v.prototype,p.aa=v.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function(M,oe,Ee){for(var Ge=Array(arguments.length-2),sr=2;sr<arguments.length;sr++)Ge[sr-2]=arguments[sr];return v.prototype[oe].apply(M,Ge)}}function T(p){const v=p.length;if(0<v){const I=Array(v);for(let M=0;M<v;M++)I[M]=p[M];return I}return[]}function P(p,v){for(let I=1;I<arguments.length;I++){const M=arguments[I];if(l(M)){const oe=p.length||0,Ee=M.length||0;p.length=oe+Ee;for(let Ge=0;Ge<Ee;Ge++)p[oe+Ge]=M[Ge]}else p.push(M)}}function V(p){return/^[\s\xa0]*$/.test(p)}function Q(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function be(p){return be[" "](p),p}be[" "]=function(){};var Be=!(-1==Q().indexOf("Gecko")||-1!=Q().toLowerCase().indexOf("webkit")&&-1==Q().indexOf("Edge")||-1!=Q().indexOf("Trident")||-1!=Q().indexOf("MSIE")||-1!=Q().indexOf("Edge"));function je(p,v,I){for(const M in p)v.call(I,p[M],M,p)}function L(p){const v={};for(const I in p)v[I]=p[I];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(p,v){let I,M;for(let oe=1;oe<arguments.length;oe++){for(I in M=arguments[oe],M)p[I]=M[I];for(let Ee=0;Ee<W.length;Ee++)I=W[Ee],Object.prototype.hasOwnProperty.call(M,I)&&(p[I]=M[I])}}function ne(p){var v=1;p=p.split(":");const I=[];for(;0<v&&p.length;)I.push(p.shift()),v--;return p.length&&I.push(p.join(":")),I}function re(p){a.setTimeout(()=>{throw p},0)}function q(){var p=cn;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}var ea=new class B{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}(()=>new it,p=>p.reset());class it{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ht,bt=!1,cn=new class Vr{constructor(){this.h=this.g=null}add(v,I){const M=ea.get();M.set(v,I),this.h?this.h.next=M:this.g=M,this.h=M}},_i=()=>{const p=a.Promise.resolve(void 0);ht=()=>{p.then(Da)}};var Da=()=>{for(var p;p=q();){try{p.h.call(p.g)}catch(I){re(I)}var v=ea;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}bt=!1};function ri(){this.s=this.s,this.C=this.C}function Ar(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}ri.prototype.s=!1,ri.prototype.ma=function(){this.s||(this.s=!0,this.N())},ri.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ar.prototype.h=function(){this.defaultPrevented=!0};var Sr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};a.addEventListener("test",I,v),a.removeEventListener("test",I,v)}catch{}return p}();function qd(p,v){if(Ar.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,M=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(Be){e:{try{be(v.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(v=null)}}else"mouseover"==I?v=p.fromElement:"mouseout"==I&&(v=p.toElement);this.relatedTarget=v,M?(this.clientX=void 0!==M.clientX?M.clientX:M.pageX,this.clientY=void 0!==M.clientY?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:Qz[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&qd.aa.h.call(this)}}b(qd,Ar);var Qz={2:"touch",3:"pen",4:"mouse"};qd.prototype.h=function(){qd.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ii="closure_listenable_"+(1e6*Math.random()|0),ru=0;function So(p,v,I,M,oe){this.listener=p,this.proxy=null,this.src=v,this.type=I,this.capture=!!M,this.ha=oe,this.key=++ru,this.da=this.fa=!1}function iu(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Kd(p){this.src=p,this.g={},this.h=0}function Yz(p,v){var I=v.type;if(I in p.g){var Ee,M=p.g[I],oe=Array.prototype.indexOf.call(M,v,void 0);(Ee=0<=oe)&&Array.prototype.splice.call(M,oe,1),Ee&&(iu(v),0==p.g[I].length&&(delete p.g[I],p.h--))}}function Xz(p,v,I,M){for(var oe=0;oe<p.length;++oe){var Ee=p[oe];if(!Ee.da&&Ee.listener==v&&Ee.capture==!!I&&Ee.ha==M)return oe}return-1}Kd.prototype.add=function(p,v,I,M,oe){var Ee=p.toString();(p=this.g[Ee])||(p=this.g[Ee]=[],this.h++);var Ge=Xz(p,v,M,oe);return-1<Ge?(v=p[Ge],I||(v.fa=!1)):((v=new So(v,this.src,Ee,!!M,oe)).fa=I,p.push(v)),v};var Zz="closure_lm_"+(1e6*Math.random()|0),Jz={};function Uoe(p,v,I,M,oe){if(M&&M.once)return zoe(p,v,I,M,oe);if(Array.isArray(v)){for(var Ee=0;Ee<v.length;Ee++)Uoe(p,v[Ee],I,M,oe);return null}return I=rH(I),p&&p[ii]?p.K(v,I,c(M)?!!M.capture:!!M,oe):joe(p,v,I,!1,M,oe)}function joe(p,v,I,M,oe,Ee){if(!v)throw Error("Invalid event type");var Ge=c(oe)?!!oe.capture:!!oe,sr=tH(p);if(sr||(p[Zz]=sr=new Kd(p)),(I=sr.add(v,I,M,Ge,Ee)).proxy)return I;if(M=function W3e(){const v=G3e;return function p(I){return v.call(p.src,p.listener,I)}}(),I.proxy=M,M.src=p,M.listener=I,p.addEventListener)Sr||(oe=Ge),void 0===oe&&(oe=!1),p.addEventListener(v.toString(),M,oe);else if(p.attachEvent)p.attachEvent($oe(v.toString()),M);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(M)}return I}function zoe(p,v,I,M,oe){if(Array.isArray(v)){for(var Ee=0;Ee<v.length;Ee++)zoe(p,v[Ee],I,M,oe);return null}return I=rH(I),p&&p[ii]?p.L(v,I,c(M)?!!M.capture:!!M,oe):joe(p,v,I,!0,M,oe)}function Hoe(p,v,I,M,oe){if(Array.isArray(v))for(var Ee=0;Ee<v.length;Ee++)Hoe(p,v[Ee],I,M,oe);else M=c(M)?!!M.capture:!!M,I=rH(I),p&&p[ii]?(p=p.i,(v=String(v).toString())in p.g&&-1<(I=Xz(Ee=p.g[v],I,M,oe))&&(iu(Ee[I]),Array.prototype.splice.call(Ee,I,1),0==Ee.length&&(delete p.g[v],p.h--))):p&&(p=tH(p))&&(v=p.g[v.toString()],p=-1,v&&(p=Xz(v,I,M,oe)),(I=-1<p?v[p]:null)&&eH(I))}function eH(p){if("number"!=typeof p&&p&&!p.da){var v=p.src;if(v&&v[ii])Yz(v.i,p);else{var I=p.type,M=p.proxy;v.removeEventListener?v.removeEventListener(I,M,p.capture):v.detachEvent?v.detachEvent($oe(I),M):v.addListener&&v.removeListener&&v.removeListener(M),(I=tH(v))?(Yz(I,p),0==I.h&&(I.src=null,v[Zz]=null)):iu(p)}}}function $oe(p){return p in Jz?Jz[p]:Jz[p]="on"+p}function G3e(p,v){if(p.da)p=!0;else{v=new qd(v,this);var I=p.listener,M=p.ha||p.src;p.fa&&eH(p),p=I.call(M,v)}return p}function tH(p){return(p=p[Zz])instanceof Kd?p:null}var nH="__closure_events_fn_"+(1e9*Math.random()>>>0);function rH(p){return"function"==typeof p?p:(p[nH]||(p[nH]=function(v){return p.handleEvent(v)}),p[nH])}function Ps(){ri.call(this),this.i=new Kd(this),this.M=this,this.F=null}function Js(p,v){var I,M=p.F;if(M)for(I=[];M;M=M.F)I.push(M);if(p=p.M,M=v.type||v,"string"==typeof v)v=new Ar(v,p);else if(v instanceof Ar)v.target=v.target||p;else{var oe=v;J(v=new Ar(M,p),oe)}if(oe=!0,I)for(var Ee=I.length-1;0<=Ee;Ee--){var Ge=v.g=I[Ee];oe=Mx(Ge,M,!0,v)&&oe}if(oe=Mx(Ge=v.g=p,M,!0,v)&&oe,oe=Mx(Ge,M,!1,v)&&oe,I)for(Ee=0;Ee<I.length;Ee++)oe=Mx(Ge=v.g=I[Ee],M,!1,v)&&oe}function Mx(p,v,I,M){if(!(v=p.i.g[String(v)]))return!0;v=v.concat();for(var oe=!0,Ee=0;Ee<v.length;++Ee){var Ge=v[Ee];if(Ge&&!Ge.da&&Ge.capture==I){var sr=Ge.listener,cs=Ge.ha||Ge.src;Ge.fa&&Yz(p.i,Ge),oe=!1!==sr.call(cs,M)&&oe}}return oe&&!M.defaultPrevented}function Woe(p,v,I){if("function"==typeof p)I&&(p=m(p,I));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=m(p.handleEvent,p)}return 2147483647<Number(v)?-1:a.setTimeout(p,v||0)}function Goe(p){p.g=Woe(()=>{p.g=null,p.i&&(p.i=!1,Goe(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}b(Ps,ri),Ps.prototype[ii]=!0,Ps.prototype.removeEventListener=function(p,v,I,M){Hoe(this,p,v,I,M)},Ps.prototype.N=function(){if(Ps.aa.N.call(this),this.i){var v,p=this.i;for(v in p.g){for(var I=p.g[v],M=0;M<I.length;M++)iu(I[M]);delete p.g[v],p.h--}}this.F=null},Ps.prototype.K=function(p,v,I,M){return this.i.add(String(p),v,!1,I,M)},Ps.prototype.L=function(p,v,I,M){return this.i.add(String(p),v,!0,I,M)};class q3e extends ri{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Goe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fw(p){ri.call(this),this.h=p,this.g={}}b(fw,ri);var qoe=[];function Koe(p){je(p.g,function(v,I){this.g.hasOwnProperty(I)&&eH(v)},p),p.g={}}fw.prototype.N=function(){fw.aa.N.call(this),Koe(this)},fw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var iH=a.JSON.stringify,K3e=a.JSON.parse,Q3e=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function sH(){}function Yoe(){}sH.prototype.h=null;var pw={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oH(){Ar.call(this,"d")}function aH(){Ar.call(this,"c")}b(oH,Ar),b(aH,Ar);var vp={},Xoe=null;function Nx(){return Xoe=Xoe||new Ps}function Zoe(p){Ar.call(this,vp.La,p)}function mw(p){const v=Nx();Js(v,new Zoe(v))}function Joe(p,v){Ar.call(this,vp.STAT_EVENT,p),this.stat=v}function eo(p){const v=Nx();Js(v,new Joe(v,p))}function eae(p,v){Ar.call(this,vp.Ma,p),this.size=v}function gw(p,v){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},v)}function _w(){this.g=!0}function Y_(p,v,I,M){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+function J3e(p,v){if(!p.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I)for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var M=I[p];if(!(2>M.length)){var oe=M[1];if(Array.isArray(oe)&&!(1>oe.length)){var Ee=oe[0];if("noop"!=Ee&&"stop"!=Ee&&"close"!=Ee)for(var Ge=1;Ge<oe.length;Ge++)oe[Ge]=""}}}return iH(I)}catch{return v}}(p,I)+(M?" "+M:"")})}vp.La="serverreachability",b(Zoe,Ar),vp.STAT_EVENT="statevent",b(Joe,Ar),vp.Ma="timingevent",b(eae,Ar),_w.prototype.xa=function(){this.g=!1},_w.prototype.info=function(){};var lH,kx={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ox(){}function Qd(p,v,I,M){this.j=p,this.i=v,this.l=I,this.R=M||1,this.U=new fw(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nae}function nae(){this.i=null,this.g="",this.h=!1}b(Ox,sH),Ox.prototype.g=function(){return new XMLHttpRequest},Ox.prototype.i=function(){return{}},lH=new Ox;var rae={},cH={};function uH(p,v,I){p.L=1,p.v=Bx(su(v)),p.m=I,p.P=!0,iae(p,null)}function iae(p,v){p.F=Date.now(),Fx(p),p.A=su(p.v);var I=p.A,M=p.R;Array.isArray(M)||(M=[String(M)]),yae(I.i,"t",M),p.C=0,I=p.j.J,p.h=new nae,p.g=Fae(p.j,I?v:null,!p.m),0<p.O&&(p.M=new q3e(m(p.Y,p,p.g),p.O)),v=p.U,I=p.g,M=p.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(qoe[0]=oe.toString()),oe=qoe);for(var Ee=0;Ee<oe.length;Ee++){var Ge=Uoe(I,oe[Ee],M||v.handleEvent,!1,v.h||v);if(!Ge)break;v.g[Ge.key]=Ge}v=p.H?L(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),mw(),function Y3e(p,v,I,M,oe,Ee){p.info(function(){if(p.g)if(Ee)for(var Ge="",sr=Ee.split("&"),cs=0;cs<sr.length;cs++){var Pn=sr[cs].split("=");if(1<Pn.length){var Ms=Pn[0];Pn=Pn[1];var Ns=Ms.split("_");Ge=2<=Ns.length&&"type"==Ns[1]?Ge+(Ms+"=")+Pn+"&":Ge+(Ms+"=redacted&")}}else Ge=null;else Ge=Ee;return"XMLHTTP REQ ("+M+") [attempt "+oe+"]: "+v+"\n"+I+"\n"+Ge})}(p.i,p.u,p.A,p.l,p.R,p.m)}function sae(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function eGe(p,v){var I=p.C,M=v.indexOf("\n",I);return-1==M?cH:(I=Number(v.substring(I,M)),isNaN(I)?rae:(M+=1)+I>v.length?cH:(v=v.slice(M,M+I),p.C=M+I,v))}function Fx(p){p.S=Date.now()+p.I,oae(p,p.I)}function oae(p,v){if(null!=p.B)throw Error("WatchDog timer not null");p.B=gw(m(p.ba,p),v)}function dH(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function yw(p){0==p.j.G||p.J||Mae(p.j,p)}function bp(p){dH(p);var v=p.M;v&&"function"==typeof v.ma&&v.ma(),p.M=null,Koe(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function hH(p,v){try{var I=p.j;if(0!=I.G&&(I.g==p||fH(I.h,p)))if(!p.K&&fH(I.h,p)&&3==I.G){try{var M=I.Da.g.parse(v)}catch{M=null}if(Array.isArray(M)&&3==M.length){var oe=M;if(0==oe[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<p.F))break e;$x(I),zx(I)}_H(I),eo(18)}}else I.za=oe[1],0<I.za-I.T&&37500>oe[2]&&I.F&&0==I.v&&!I.C&&(I.C=gw(m(I.Za,I),6e3));if(1>=cae(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Ip(I,11)}else if((p.K||I.g==p)&&$x(I),!V(v))for(oe=I.Da.g.parse(v),v=0;v<oe.length;v++){let Pn=oe[v];if(I.T=Pn[0],Pn=Pn[1],2==I.G)if("c"==Pn[0]){I.K=Pn[1],I.ia=Pn[2];const Ms=Pn[3];null!=Ms&&(I.la=Ms,I.j.info("VER="+I.la));const Ns=Pn[4];null!=Ns&&(I.Aa=Ns,I.j.info("SVER="+I.Aa));const J_=Pn[5];null!=J_&&"number"==typeof J_&&0<J_&&(I.L=M=1.5*J_,I.j.info("backChannelRequestTimeoutMs_="+M)),M=I;const al=p.g;if(al){const Gx=al.g?al.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gx){var Ee=M.h;Ee.g||-1==Gx.indexOf("spdy")&&-1==Gx.indexOf("quic")&&-1==Gx.indexOf("h2")||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(pH(Ee,Ee.h),Ee.h=null))}if(M.D){const vH=al.g?al.g.getResponseHeader("X-HTTP-Session-Id"):null;vH&&(M.ya=vH,Dr(M.I,M.D,vH))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Ge=p;if((M=I).qa=Oae(M,M.J?M.ia:null,M.W),Ge.K){uae(M.h,Ge);var sr=Ge,cs=M.L;cs&&(sr.I=cs),sr.B&&(dH(sr),Fx(sr)),M.g=Ge}else Rae(M);0<I.i.length&&Hx(I)}else"stop"!=Pn[0]&&"close"!=Pn[0]||Ip(I,7);else 3==I.G&&("stop"==Pn[0]||"close"==Pn[0]?"stop"==Pn[0]?Ip(I,7):gH(I):"noop"!=Pn[0]&&I.l&&I.l.ta(Pn),I.v=0)}mw()}catch{}}Qd.prototype.ca=function(p){p=p.target;const v=this.M;v&&3==ou(p)?v.j():this.Y(p)},Qd.prototype.Y=function(p){try{if(p==this.g)e:{const Ns=ou(this.g);var v=this.g.Ba();if(this.g.Z(),!(3>Ns)&&(3!=Ns||this.g&&(this.h.h||this.g.oa()||Tae(this.g)))){this.J||4!=Ns||7==v||mw(),dH(this);var I=this.g.Z();this.X=I;t:if(sae(this)){var M=Tae(this.g);p="";var oe=M.length,Ee=4==ou(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bp(this),yw(this);var Ge="";break t}this.h.i=new a.TextDecoder}for(v=0;v<oe;v++)this.h.h=!0,p+=this.h.i.decode(M[v],{stream:!(Ee&&v==oe-1)});M.length=0,this.h.g+=p,this.C=0,Ge=this.h.g}else Ge=this.g.oa();if(this.o=200==I,function X3e(p,v,I,M,oe,Ee,Ge){p.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+oe+"]: "+v+"\n"+I+"\n"+Ee+" "+Ge})}(this.i,this.u,this.A,this.l,this.R,Ns,I),this.o){if(this.T&&!this.K){t:{if(this.g){var sr,cs=this.g;if((sr=cs.g?cs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(sr)){var Pn=sr;break t}}Pn=null}if(!(I=Pn)){this.o=!1,this.s=3,eo(12),bp(this),yw(this);break e}Y_(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hH(this,I)}if(this.P){let al;for(I=!0;!this.J&&this.C<Ge.length;){if(al=eGe(this,Ge),al==cH){4==Ns&&(this.s=4,eo(14),I=!1),Y_(this.i,this.l,null,"[Incomplete Response]");break}if(al==rae){this.s=4,eo(15),Y_(this.i,this.l,Ge,"[Invalid Chunk]"),I=!1;break}Y_(this.i,this.l,al,null),hH(this,al)}if(sae(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ns||0!=Ge.length||this.h.h||(this.s=1,eo(16),I=!1),this.o=this.o&&I,I){if(0<Ge.length&&!this.W){this.W=!0;var Ms=this.j;Ms.g==this&&Ms.ba&&!Ms.M&&(Ms.j.info("Great, no buffering proxy detected. Bytes received: "+Ge.length),yH(Ms),Ms.M=!0,eo(11))}}else Y_(this.i,this.l,Ge,"[Invalid Chunked Response]"),bp(this),yw(this)}else Y_(this.i,this.l,Ge,null),hH(this,Ge);4==Ns&&bp(this),this.o&&!this.J&&(4==Ns?Mae(this.j,this):(this.o=!1,Fx(this)))}else(function _Ge(p){const v={};p=(p.g&&2<=ou(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let M=0;M<p.length;M++){if(V(p[M]))continue;var I=ne(p[M]);const oe=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const Ee=v[oe]||[];v[oe]=Ee,Ee.push(I)}!function H(p,v){for(const I in p)v.call(void 0,p[I],I,p)}(v,function(M){return M.join(", ")})})(this.g),400==I&&0<Ge.indexOf("Unknown SID")?(this.s=3,eo(12)):(this.s=0,eo(13)),bp(this),yw(this)}}}catch{}},Qd.prototype.cancel=function(){this.J=!0,bp(this)},Qd.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function Z3e(p,v){p.info(function(){return"TIMEOUT: "+v})}(this.i,this.A),2!=this.L&&(mw(),eo(17)),bp(this),this.s=2,yw(this)):oae(this,this.S-p)};var tGe=class{constructor(p,v){this.g=p,this.map=v}};function aae(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lae(p){return!!p.h||!!p.g&&p.g.size>=p.j}function cae(p){return p.h?1:p.g?p.g.size:0}function fH(p,v){return p.h?p.h==v:!!p.g&&p.g.has(v)}function pH(p,v){p.g?p.g.add(v):p.h=v}function uae(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}function dae(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let v=p.i;for(const I of p.g.values())v=v.concat(I.D);return v}return T(p.i)}function hae(p,v){if(p.forEach&&"function"==typeof p.forEach)p.forEach(v,void 0);else if(l(p)||"string"==typeof p)Array.prototype.forEach.call(p,v,void 0);else for(var I=function rGe(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||"string"==typeof p){var v=[];p=p.length;for(var I=0;I<p;I++)v.push(I);return v}v=[],I=0;for(const M in p)v[I++]=M;return v}}}(p),M=function nGe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(l(p)){for(var v=[],I=p.length,M=0;M<I;M++)v.push(p[M]);return v}for(M in v=[],I=0,p)v[I++]=p[M];return v}(p),oe=M.length,Ee=0;Ee<oe;Ee++)v.call(void 0,M[Ee],I&&I[Ee],p)}aae.prototype.cancel=function(){if(this.i=dae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var fae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ep(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ep){this.h=p.h,Lx(this,p.j),this.o=p.o,this.g=p.g,Vx(this,p.s),this.l=p.l;var v=p.i,I=new Ew;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),pae(this,I),this.m=p.m}else p&&(v=String(p).match(fae))?(this.h=!1,Lx(this,v[1]||"",!0),this.o=vw(v[2]||""),this.g=vw(v[3]||"",!0),Vx(this,v[4]),this.l=vw(v[5]||"",!0),pae(this,v[6]||"",!0),this.m=vw(v[7]||"")):(this.h=!1,this.i=new Ew(null,this.h))}function su(p){return new Ep(p)}function Lx(p,v,I){p.j=I?vw(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function Vx(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function pae(p,v,I){v instanceof Ew?(p.i=v,function uGe(p,v){v&&!p.j&&(Yd(p),p.i=null,p.g.forEach(function(I,M){var oe=M.toLowerCase();M!=oe&&(gae(this,M),yae(this,oe,I))},p)),p.j=v}(p.i,p.h)):(I||(v=bw(v,lGe)),p.i=new Ew(v,p.h))}function Dr(p,v,I){p.i.set(v,I)}function Bx(p){return Dr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function vw(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function bw(p,v,I){return"string"==typeof p?(p=encodeURI(p).replace(v,sGe),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function sGe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Ep.prototype.toString=function(){var p=[],v=this.j;v&&p.push(bw(v,mae,!0),":");var I=this.g;return(I||"file"==v)&&(p.push("//"),(v=this.o)&&p.push(bw(v,mae,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&p.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&p.push("/"),p.push(bw(I,"/"==I.charAt(0)?aGe:oGe,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",bw(I,cGe)),p.join("")};var mae=/[#\/\?@]/g,oGe=/[#\?:]/g,aGe=/[#\?]/g,lGe=/[#\?@]/g,cGe=/#/g;function Ew(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function Yd(p){p.g||(p.g=new Map,p.h=0,p.i&&function iGe(p,v){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var M=p[I].indexOf("="),oe=null;if(0<=M){var Ee=p[I].substring(0,M);oe=p[I].substring(M+1)}else Ee=p[I];v(Ee,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}(p.i,function(v,I){p.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}function gae(p,v){Yd(p),v=X_(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function _ae(p,v){return Yd(p),v=X_(p,v),p.g.has(v)}function yae(p,v,I){gae(p,v),0<I.length&&(p.i=null,p.g.set(X_(p,v),T(I)),p.h+=I.length)}function X_(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function Xd(p,v,I,M,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),M(I)}catch{}}function fGe(){this.g=new Q3e}function pGe(p,v,I){const M=I||"";try{hae(p,function(oe,Ee){let Ge=oe;c(oe)&&(Ge=iH(oe)),v.push(M+Ee+"="+encodeURIComponent(Ge))})}catch(oe){throw v.push(M+"type="+encodeURIComponent("_badmap")),oe}}function Iw(p){this.l=p.Ub||null,this.j=p.eb||!1}function Ux(p,v){Ps.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function vae(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function ww(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Cw(p)}function Cw(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function bae(p){let v="";return je(p,function(I,M){v+=M,v+=":",v+=I,v+="\r\n"}),v}function mH(p,v,I){e:{for(M in I){var M=!1;break e}M=!0}M||(I=bae(I),"string"==typeof p?null!=I&&encodeURIComponent(String(I)):Dr(p,v,I))}function si(p){Ps.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ew.prototype).add=function(p,v){Yd(this),this.i=null,p=X_(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(v),this.h+=1,this},n.forEach=function(p,v){Yd(this),this.g.forEach(function(I,M){I.forEach(function(oe){p.call(v,oe,M,this)},this)},this)},n.na=function(){Yd(this);const p=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let M=0;M<v.length;M++){const oe=p[M];for(let Ee=0;Ee<oe.length;Ee++)I.push(v[M])}return I},n.V=function(p){Yd(this);let v=[];if("string"==typeof p)_ae(this,p)&&(v=v.concat(this.g.get(X_(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)v=v.concat(p[I])}return v},n.set=function(p,v){return Yd(this),this.i=null,_ae(this,p=X_(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},n.get=function(p,v){return p&&0<(p=this.V(p)).length?String(p[0]):v},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var M=v[I];const Ee=encodeURIComponent(String(M)),Ge=this.V(M);for(M=0;M<Ge.length;M++){var oe=Ee;""!==Ge[M]&&(oe+="="+encodeURIComponent(String(Ge[M]))),p.push(oe)}}return this.i=p.join("&")},b(Iw,sH),Iw.prototype.g=function(){return new Ux(this.l,this.j)},Iw.prototype.i=function(p){return function(){return p}}({}),b(Ux,Ps),(n=Ux.prototype).open=function(p,v){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,Cw(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ww(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Cw(this)),this.g&&(this.readyState=3,Cw(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vae(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?ww(this):Cw(this),3==this.readyState&&vae(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,ww(this))},n.Qa=function(p){this.g&&(this.response=p,ww(this))},n.ga=function(){this.g&&ww(this)},n.setRequestHeader=function(p,v){this.u.append(p,v)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var I=v.next();!I.done;)p.push((I=I.value)[0]+": "+I[1]),I=v.next();return p.join("\r\n")},Object.defineProperty(Ux.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),b(si,Ps);var mGe=/^https?$/i,gGe=["POST","PUT"];function Eae(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,Iae(p),jx(p)}function Iae(p){p.A||(p.A=!0,Js(p,"complete"),Js(p,"error"))}function wae(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=ou(p)||2!=p.Z()))if(p.u&&4==ou(p))Woe(p.Ea,0,p);else if(Js(p,"readystatechange"),4==ou(p)){p.h=!1;try{const Ge=p.Z();e:switch(Ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var I;if(!(I=v)){var M;if(M=0===Ge){var oe=String(p.D).match(fae)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),M=!mGe.test(oe?oe.toLowerCase():"")}I=M}if(I)Js(p,"complete"),Js(p,"success");else{p.m=6;try{var Ee=2<ou(p)?p.g.statusText:""}catch{Ee=""}p.l=Ee+" ["+p.Z()+"]",Iae(p)}}finally{jx(p)}}}function jx(p,v){if(p.g){Cae(p);const I=p.g,M=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||Js(p,"ready");try{I.onreadystatechange=M}catch{}}}function Cae(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function ou(p){return p.g?p.g.readyState:0}function Tae(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Tw(p,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||v}function Aae(p){this.Aa=0,this.i=[],this.j=new _w,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tw("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tw("baseRetryDelayMs",5e3,p),this.cb=Tw("retryDelaySeedMs",1e4,p),this.Wa=Tw("forwardChannelMaxRetries",2,p),this.wa=Tw("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new aae(p&&p.concurrentRequestLimit),this.Da=new fGe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function gH(p){if(Sae(p),3==p.G){var v=p.U++,I=su(p.I);if(Dr(I,"SID",p.K),Dr(I,"RID",v),Dr(I,"TYPE","terminate"),Aw(p,I),(v=new Qd(p,p.j,v)).L=2,v.v=Bx(su(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=v.v,I=!0),I||(v.g=Fae(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Fx(v)}kae(p)}function zx(p){p.g&&(yH(p),p.g.cancel(),p.g=null)}function Sae(p){zx(p),p.u&&(a.clearTimeout(p.u),p.u=null),$x(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function Hx(p){if(!lae(p.h)&&!p.s){p.s=!0;var v=p.Ga;ht||_i(),bt||(ht(),bt=!0),cn.add(v,p),p.B=0}}function Dae(p,v){var I;I=v?v.l:p.U++;const M=su(p.I);Dr(M,"SID",p.K),Dr(M,"RID",I),Dr(M,"AID",p.T),Aw(p,M),p.m&&p.o&&mH(M,p.m,p.o),I=new Qd(p,p.j,I,p.B+1),null===p.m&&(I.H=p.o),v&&(p.i=v.D.concat(p.i)),v=xae(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),pH(p.h,I),uH(I,M,v)}function Aw(p,v){p.H&&je(p.H,function(I,M){Dr(v,M,I)}),p.l&&hae({},function(I,M){Dr(v,M,I)})}function xae(p,v,I){I=Math.min(p.i.length,I);var M=p.l?m(p.l.Na,p.l,p):null;e:{var oe=p.i;let Ee=-1;for(;;){const Ge=["count="+I];-1==Ee?0<I?(Ee=oe[0].g,Ge.push("ofs="+Ee)):Ee=0:Ge.push("ofs="+Ee);let sr=!0;for(let cs=0;cs<I;cs++){let Pn=oe[cs].g;const Ms=oe[cs].map;if(Pn-=Ee,0>Pn)Ee=Math.max(0,oe[cs].g-100),sr=!1;else try{pGe(Ms,Ge,"req"+Pn+"_")}catch{M&&M(Ms)}}if(sr){M=Ge.join("&");break e}}}return p=p.i.splice(0,I),v.D=p,M}function Rae(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;ht||_i(),bt||(ht(),bt=!0),cn.add(v,p),p.v=0}}function _H(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=gw(m(p.Fa,p),Nae(p,p.v)),p.v++,0))}function yH(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function Pae(p){p.g=new Qd(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var v=su(p.qa);Dr(v,"RID","rpc"),Dr(v,"SID",p.K),Dr(v,"AID",p.T),Dr(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&Dr(v,"TO",p.ja),Dr(v,"TYPE","xmlhttp"),Aw(p,v),p.m&&p.o&&mH(v,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=Bx(su(v)),I.m=null,I.P=!0,iae(I,p)}function $x(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function Mae(p,v){var I=null;if(p.g==v){$x(p),yH(p),p.g=null;var M=2}else{if(!fH(p.h,v))return;I=v.D,uae(p.h,v),M=1}if(0!=p.G)if(v.o)if(1==M){I=v.m?v.m.length:0,v=Date.now()-v.F;var oe=p.B;Js(M=Nx(),new eae(M,I)),Hx(p)}else Rae(p);else if(3==(oe=v.s)||0==oe&&0<v.X||!(1==M&&function yGe(p,v){return!(cae(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=v.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=gw(m(p.Ga,p,v),Nae(p,p.B)),p.B++,0)))}(p,v)||2==M&&_H(p)))switch(I&&0<I.length&&(v=p.h,v.i=v.i.concat(I)),oe){case 1:Ip(p,5);break;case 4:Ip(p,10);break;case 3:Ip(p,6);break;default:Ip(p,2)}}function Nae(p,v){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*v}function Ip(p,v){if(p.j.info("Error code "+v),2==v){var I=m(p.fb,p),M=p.Xa;const oe=!M;M=new Ep(M||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Lx(M,"https"),Bx(M),oe?function dGe(p,v){const I=new _w;if(a.Image){const M=new Image;M.onload=y(Xd,I,"TestLoadImage: loaded",!0,v,M),M.onerror=y(Xd,I,"TestLoadImage: error",!1,v,M),M.onabort=y(Xd,I,"TestLoadImage: abort",!1,v,M),M.ontimeout=y(Xd,I,"TestLoadImage: timeout",!1,v,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=p}else v(!1)}(M.toString(),I):function hGe(p,v){new _w;const M=new AbortController,oe=setTimeout(()=>{M.abort(),Xd(0,0,!1,v)},1e4);fetch(p,{signal:M.signal}).then(Ee=>{clearTimeout(oe),Xd(0,0,!!Ee.ok,v)}).catch(()=>{clearTimeout(oe),Xd(0,0,!1,v)})}(M.toString(),I)}else eo(2);p.G=0,p.l&&p.l.sa(v),kae(p),Sae(p)}function kae(p){if(p.G=0,p.ka=[],p.l){const v=dae(p.h);(0!=v.length||0!=p.i.length)&&(P(p.ka,v),P(p.ka,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.ra()}}function Oae(p,v,I){var M=I instanceof Ep?su(I):new Ep(I);if(""!=M.g)v&&(M.g=v+"."+M.g),Vx(M,M.s);else{var oe=a.location;M=oe.protocol,v=v?v+"."+oe.hostname:oe.hostname,oe=+oe.port;var Ee=new Ep(null);M&&Lx(Ee,M),v&&(Ee.g=v),oe&&Vx(Ee,oe),I&&(Ee.l=I),M=Ee}return v=p.ya,(I=p.D)&&v&&Dr(M,I,v),Dr(M,"VER",p.la),Aw(p,M),M}function Fae(p,v,I){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(v=new si(p.Ca&&!p.pa?new Iw({eb:I}):p.pa)).Ha(p.J),v}function Lae(){}function Wx(){}function ta(p,v){Ps.call(this),this.g=new Aae(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!V(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,null!==(p=this.h)&&v in p&&v in(p=this.h)&&delete p[v]),this.j=new Z_(this)}function Vae(p){oH.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const I in v){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,v=null!==v&&p in v?v[p]:void 0),this.data=v}else this.data=p}function Bae(){aH.call(this),this.status=1}function Z_(p){this.g=p}(n=si.prototype).Ha=function(p){this.J=p},n.ea=function(p,v,I,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lH.g(),this.v=function Qoe(p){return p.h||(p.h=p.i())}(this.o?this.o:lH),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(Ee){return void Eae(this,Ee)}if(p=I||"",I=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var oe in M)I.set(oe,M[oe]);else{if("function"!=typeof M.keys||"function"!=typeof M.get)throw Error("Unknown input type for opt_headers: "+String(M));for(const Ee of M.keys())I.set(Ee,M.get(Ee))}M=Array.from(I.keys()).find(Ee=>"content-type"==Ee.toLowerCase()),oe=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gGe,v,void 0))||M||oe||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Ge]of I)this.g.setRequestHeader(Ee,Ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cae(this),this.u=!0,this.g.send(p),this.u=!1}catch(Ee){Eae(this,Ee)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Js(this,"complete"),Js(this,"abort"),jx(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jx(this,!0)),si.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wae(this):this.bb())},n.bb=function(){wae(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ou(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&0==v.indexOf(p)&&(v=v.substring(p.length)),K3e(v)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Aae.prototype).la=8,n.G=1,n.connect=function(p,v,I,M){eo(0),this.W=p,this.H=v||{},I&&void 0!==M&&(this.H.OSID=I,this.H.OAID=M),this.F=this.X,this.I=Oae(this,null,this.W),Hx(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const oe=new Qd(this,this.j,p);let Ee=this.o;if(this.S&&(Ee?(Ee=L(Ee),J(Ee,this.S)):Ee=this.S),null!==this.m||this.O||(oe.H=Ee,Ee=null),this.P)e:{for(var v=0,I=0;I<this.i.length;I++){var M=this.i[I];if(void 0===(M="__data__"in M.map&&"string"==typeof(M=M.map.__data__)?M.length:void 0))break;if(4096<(v+=M)){v=I;break e}if(4096===v||I===this.i.length-1){v=I+1;break e}}v=1e3}else v=1e3;v=xae(this,oe,v),Dr(I=su(this.I),"RID",p),Dr(I,"CVER",22),this.D&&Dr(I,"X-HTTP-Session-Id",this.D),Aw(this,I),Ee&&(this.O?v="headers="+encodeURIComponent(String(bae(Ee)))+"&"+v:this.m&&mH(I,this.m,Ee)),pH(this.h,oe),this.Ua&&Dr(I,"TYPE","init"),this.P?(Dr(I,"$req",v),Dr(I,"SID","null"),oe.T=!0,uH(oe,I,null)):uH(oe,I,v),this.G=2}}else 3==this.G&&(p?Dae(this,p):0==this.i.length||lae(this.h)||Dae(this))},n.Fa=function(){if(this.u=null,Pae(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=gw(m(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,eo(10),zx(this),Pae(this))},n.Za=function(){null!=this.C&&(this.C=null,zx(this),_H(this),eo(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),eo(2)):(this.j.info("Failed to ping google.com"),eo(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Lae.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Wx.prototype.g=function(p,v){return new ta(p,v)},b(ta,Ps),ta.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ta.prototype.close=function(){gH(this.g)},ta.prototype.o=function(p){var v=this.g;if("string"==typeof p){var I={};I.__data__=p,p=I}else this.u&&((I={}).__data__=iH(p),p=I);v.i.push(new tGe(v.Ya++,p)),3==v.G&&Hx(v)},ta.prototype.N=function(){this.g.l=null,delete this.j,gH(this.g),delete this.g,ta.aa.N.call(this)},b(Vae,oH),b(Bae,aH),b(Z_,Lae),Z_.prototype.ua=function(){Js(this.g,"a")},Z_.prototype.ta=function(p){Js(this.g,new Vae(p))},Z_.prototype.sa=function(p){Js(this.g,new Bae)},Z_.prototype.ra=function(){Js(this.g,"b")},Wx.prototype.createWebChannel=Wx.prototype.g,ta.prototype.send=ta.prototype.o,ta.prototype.open=ta.prototype.m,ta.prototype.close=ta.prototype.close,GZ=zc.createWebChannelTransport=function(){return new Wx},WZ=zc.getStatEventTarget=function(){return Nx()},$Z=zc.Event=vp,PV=zc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kx.NO_ERROR=0,kx.TIMEOUT=8,kx.HTTP_ERROR=6,RS=zc.ErrorCode=kx,tae.COMPLETE="complete",HZ=zc.EventType=tae,Yoe.EventType=pw,pw.OPEN="a",pw.CLOSE="b",pw.ERROR="c",pw.MESSAGE="d",Ps.prototype.listen=Ps.prototype.K,jE=zc.WebChannel=Yoe,zc.FetchXmlHttpFactory=Iw,si.prototype.listenOnce=si.prototype.L,si.prototype.getLastError=si.prototype.Ka,si.prototype.getLastErrorCode=si.prototype.Ba,si.prototype.getStatus=si.prototype.Z,si.prototype.getResponseJson=si.prototype.Oa,si.prototype.getResponseText=si.prototype.oa,si.prototype.send=si.prototype.ea,si.prototype.setWithCredentials=si.prototype.Ha,zZ=zc.XhrIo=si}).apply(typeof xS<"u"?xS:typeof self<"u"?self:typeof window<"u"?window:{});const qZ="@firebase/firestore";class Ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");let Xg="10.14.0";const md=new vo.Vy("@firebase/firestore");function Zg(){return md.logLevel}function ke(n,...e){if(md.logLevel<=vo.$b.DEBUG){const t=e.map(MV);md.debug(`Firestore (${Xg}): ${n}`,...t)}}function mi(n,...e){if(md.logLevel<=vo.$b.ERROR){const t=e.map(MV);md.error(`Firestore (${Xg}): ${n}`,...t)}}function Go(n,...e){if(md.logLevel<=vo.$b.WARN){const t=e.map(MV);md.warn(`Firestore (${Xg}): ${n}`,...t)}}function MV(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Xg}) INTERNAL ASSERTION FAILED: `+n;throw mi(e),new Error(e)}function ot(n,e){n||nt()}function $e(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends N.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class KZ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dOe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class hOe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fOe{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;ot(void 0===this.o);let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,k.A)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot("string"==typeof r.accessToken),new KZ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(null===e||"string"==typeof e),new Ki(e)}}class pOe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mOe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new pOe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QZ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gOe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ot(void 0===this.o);const r=s=>{null!=s.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot("string"==typeof t.token),this.R=t.token,new QZ(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _Oe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class YZ{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=_Oe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function Jg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function XZ(n){return n+"\0"}class Nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nr.fromMillis(Date.now())}static fromDate(e){return Nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dt(e)}static min(){return new dt(new Nr(0,0))}static max(){return new dt(new Nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class zE{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hn extends zE{construct(e,t,r){return new hn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new hn(t)}static emptyPath(){return new hn([])}}const yOe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wr extends zE{construct(e,t,r){return new wr(e,t,r)}static isValidIdentifier(e){return yOe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new xe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new xe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new xe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new xe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wr(t)}static emptyPath(){return new wr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(hn.fromString(e))}static fromName(e){return new qe(hn.fromString(e).popFirst(5))}static empty(){return new qe(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new hn(e.slice()))}}class e_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function NV(n){return n.fields.find(e=>2===e.kind)}function kf(n){return n.fields.filter(e=>2!==e.kind)}e_.UNKNOWN_ID=-1;class Of{constructor(e,t){this.fieldPath=e,this.kind=t}}class t_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new t_(0,qo.min())}}function ZZ(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=dt.fromTimestamp(1e9===r?new Nr(t+1,0):new Nr(t,r));return new qo(i,qe.empty(),e)}function JZ(n){return new qo(n.readTime,n.key,-1)}class qo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qo(dt.min(),qe.empty(),-1)}static max(){return new qo(dt.max(),qe.empty(),-1)}}function kV(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const eJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function gd(n){return OV.apply(this,arguments)}function OV(){return(OV=(0,k.A)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==eJ)throw n;ke("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new le((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class PS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Qi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new HE(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=FV(r.target.error);this.V.reject(new HE(e,i))}}static open(e,t,r,i){try{return new PS(t,e.transaction(i,r))}catch(s){throw new HE(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new IOe(t)}}class Fl{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Fl.S((0,N.ZQ)())&&mi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Ff(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,N.zW)())return!1;if(Fl.v())return!0;const e=(0,N.ZQ)(),t=Fl.S(e),r=0<t&&t<10,i=nJ(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,k.A)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new HE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new xe(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new xe(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new HE(e,a))},s.onupgradeneeded=o=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,k.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=PS.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),le.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(ke("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function nJ(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class EOe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ff(this.B.delete())}}class HE extends xe{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _d(n){return"IndexedDbTransactionError"===n.name}class IOe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ff(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Ff(this.store.add(e))}get(e){return Ff(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Ff(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Ff(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new le((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=s=>{const o=FV(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new EOe(a),c=t(a.primaryKey,a.value,l);if(c instanceof le){const u=c.catch(d=>(l.done(),le.reject(d)));r.push(u)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ff(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=FV(r.target.error);t(i)}})}let rJ=!1;function FV(n){const e=Fl.S((0,N.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rJ||(rJ=!0,setTimeout(()=>{throw r},0)),r}}return n}class wOe{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ke("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,k.A)(function*(){t.task=null;try{ke("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){_d(r)?ke("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield gd(r)}yield t.X(6e4)}))}}class COe{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,k.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return le.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ke("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ke("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=JZ(s);kV(o,r)>0&&(r=o)}),new qo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ko=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function $E(n){return null==n}function WE(n){return 0===n&&1/n==-1/0}function iJ(n){return"number"==typeof n&&Number.isInteger(n)&&!WE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function As(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sJ(e)),e=TOe(n.get(t),e);return sJ(e)}function TOe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function sJ(n){return n+"\x01\x01"}function Ll(n){const e=n.length;if(ot(e>=2),2===e)return ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),hn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&nt(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:nt()}s=o+2}return new hn(r)}const oJ=["userId","batchId"];function MS(n,e){return[n,As(e)]}function aJ(n,e,t){return[n,As(e),t]}const AOe={},SOe=["prefixPath","collectionGroup","readTime","documentId"],DOe=["prefixPath","collectionGroup","documentId"],xOe=["collectionGroup","readTime","prefixPath","documentId"],ROe=["canonicalId","targetId"],POe=["targetId","path"],MOe=["path","targetId"],NOe=["collectionId","parent"],kOe=["indexId","uid"],OOe=["uid","sequenceNumber"],FOe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LOe=["indexId","uid","orderedDocumentKey"],VOe=["userId","collectionPath","documentId"],BOe=["userId","collectionPath","largestBatchId"],UOe=["userId","collectionGroup","largestBatchId"],lJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jOe=[...lJ,"documentOverlays"],cJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uJ=cJ,LV=[...uJ,"indexConfiguration","indexState","indexEntries"],zOe=LV,HOe=[...LV,"globals"];class VV extends tJ{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Fi(n,e){const t=$e(n);return Fl.F(t._e,e)}function dJ(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fJ(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pr{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new NS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new NS(this.root,e,this.comparator,!1)}getReverseIterator(){return new NS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new NS(this.root,e,this.comparator,!0)}}class NS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ss.RED,this.left=i??ss.EMPTY,this.right=s??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ss(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ss.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1,ss.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ss(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pJ(this.data.getIterator())}getIteratorFrom(e){return new pJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zn(this.comparator);return t.data=e,t}}class pJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function n_(n){return n.hasNext()?n.getNext():void 0}class wo{constructor(e){this.fields=e,e.sort(wr.comparator)}static empty(){return new wo([])}unionWith(e){let t=new Zn(wr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new wo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class mJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mJ("Invalid base64 string: "+s):s}}(e);return new ni(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const WOe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hc(n){if(ot(!!n),"string"==typeof n){let e=0;const t=WOe.exec(n);if(ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kr(n.seconds),nanos:kr(n.nanos)}}function kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function $c(n){return"string"==typeof n?ni.fromBase64String(n):ni.fromUint8Array(n)}function kS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function OS(n){const e=n.mapValue.fields.__previous_value__;return kS(e)?OS(e):e}function GE(n){const e=Hc(n.mapValue.fields.__local_write_time__.timestampValue);return new Nr(e.seconds,e.nanos)}class GOe{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class vd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vd&&e.projectId===this.projectId&&e.database===this.database}}const bd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},FS={nullValue:"NULL_VALUE"};function Ed(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kS(n)?4:bJ(n)?9007199254740991:BS(n)?10:11:nt()}function Vl(n,e){if(n===e)return!0;const t=Ed(n);if(t!==Ed(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return GE(n).isEqual(GE(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hc(i.timestampValue),a=Hc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,$c(n.bytesValue).isEqual($c(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return kr(i.geoPointValue.latitude)===kr(s.geoPointValue.latitude)&&kr(i.geoPointValue.longitude)===kr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return kr(i.integerValue)===kr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=kr(i.doubleValue),a=kr(s.doubleValue);return o===a?WE(o)===WE(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Jg(n.arrayValue.values||[],e.arrayValue.values||[],Vl);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(dJ(o)!==dJ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Vl(o[l],a[l])))return!1;return!0}(n,e);default:return nt()}var s}function qE(n,e){return void 0!==(n.values||[]).find(t=>Vl(t,e))}function Id(n,e){if(n===e)return 0;const t=Ed(n),r=Ed(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=kr(s.integerValue||s.doubleValue),l=kr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return gJ(n.timestampValue,e.timestampValue);case 4:return gJ(GE(n),GE(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=$c(s),l=$c(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Mt(a[c],l[c]);if(0!==u)return u}return Mt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Mt(kr(s.latitude),kr(o.latitude));return 0!==a?a:Mt(kr(s.longitude),kr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return _J(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const y=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(l=(o.fields||{}).value)||void 0===l?void 0:l.arrayValue,T=Mt((null===(c=y?.values)||void 0===c?void 0:c.length)||0,(null===(u=b?.values)||void 0===u?void 0:u.length)||0);return 0!==T?T:_J(y,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===bd.mapValue&&o===bd.mapValue)return 0;if(s===bd.mapValue)return 1;if(o===bd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const m=Mt(l[d],u[d]);if(0!==m)return m;const y=Id(a[l[d]],c[u[d]]);if(0!==y)return y}return Mt(l.length,u.length)}(n.mapValue,e.mapValue);default:throw nt()}}function gJ(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Hc(n),r=Hc(e),i=Mt(t.seconds,r.seconds);return 0!==i?i:Mt(t.nanos,r.nanos)}function _J(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Id(t[i],r[i]);if(s)return s}return Mt(t.length,r.length)}function r_(n){return BV(n)}function BV(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Hc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?$c(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=BV(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${BV(t.fields[o])}`;return i+"}"}(n.mapValue):nt()}function Lf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function UV(n){return!!n&&"integerValue"in n}function KE(n){return!!n&&"arrayValue"in n}function yJ(n){return!!n&&"nullValue"in n}function vJ(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function VS(n){return!!n&&"mapValue"in n}function BS(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function QE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return yd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=QE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=QE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bJ(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const EJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function qOe(n){return"nullValue"in n?FS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lf(vd.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?BS(n)?EJ:{mapValue:{}}:nt()}function KOe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lf(vd.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?EJ:"mapValue"in n?BS(n)?{mapValue:{}}:bd:nt()}function IJ(n,e){const t=Id(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function wJ(n,e){const t=Id(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class os{constructor(e){this.value=e}static empty(){return new os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!VS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=QE(t)}setAll(e){let t=wr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=QE(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());VS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];VS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new os(QE(this.value))}}function CJ(n){const e=[];return yd(n.fields,(t,r)=>{const i=new wr([t]);if(VS(r)){const s=CJ(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wo(e)}class Cr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Cr(e,0,dt.min(),dt.min(),dt.min(),os.empty(),0)}static newFoundDocument(e,t,r,i){return new Cr(e,1,t,dt.min(),r,i,0)}static newNoDocument(e,t){return new Cr(e,2,t,dt.min(),dt.min(),os.empty(),0)}static newUnknownDocument(e,t){return new Cr(e,3,t,dt.min(),dt.min(),os.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wd{constructor(e,t){this.position=e,this.inclusive=t}}function TJ(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?qe.comparator(qe.fromName(o.referenceValue),t.key):Id(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function AJ(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vl(n.position[t],e.position[t]))return!1;return!0}class YE{constructor(e,t="asc"){this.field=e,this.dir=t}}function QOe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class SJ{}class fn extends SJ{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new YOe(e,t,r):"array-contains"===t?new JOe(e,r):"in"===t?new NJ(e,r):"not-in"===t?new e1e(e,r):"array-contains-any"===t?new t1e(e,r):new fn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new XOe(e,r):new ZOe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Id(t,this.value)):null!==t&&Ed(this.value)===Ed(t)&&this.matchesComparison(Id(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends SJ{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Wn(e,t)}matches(e){return i_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function i_(n){return"and"===n.op}function jV(n){return"or"===n.op}function zV(n){return DJ(n)&&i_(n)}function DJ(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}function HV(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+r_(n.value);if(zV(n))return n.filters.map(e=>HV(e)).join(",");{const e=n.filters.map(t=>HV(t)).join(",");return`${n.op}(${e})`}}function xJ(n,e){return n instanceof fn?(r=n,(i=e)instanceof fn&&r.op===i.op&&r.field.isEqual(i.field)&&Vl(r.value,i.value)):n instanceof Wn?function(r,i){return i instanceof Wn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&xJ(o,i.filters[a]),!0)}(n,e):void nt();var r,i}function RJ(n,e){const t=n.filters.concat(e);return Wn.create(t,n.op)}function PJ(n){return n instanceof fn?`${(t=n).field.canonicalString()} ${t.op} ${r_(t.value)}`:n instanceof Wn?function(t){return t.op.toString()+" {"+t.getFilters().map(PJ).join(" ,")+"}"}(n):"Filter";var t}class YOe extends fn{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class XOe extends fn{constructor(e,t){super(e,"in",t),this.keys=MJ(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ZOe extends fn{constructor(e,t){super(e,"not-in",t),this.keys=MJ(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MJ(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class JOe extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return KE(t)&&qE(t.arrayValue,this.value)}}class NJ extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qE(this.value.arrayValue,t)}}class e1e extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(qE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qE(this.value.arrayValue,t)}}class t1e extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!KE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qE(this.value.arrayValue,r))}}class n1e{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function $V(n,e=null,t=[],r=[],i=null,s=null,o=null){return new n1e(n,e,t,r,i,s,o)}function Vf(n){const e=$e(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>HV(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),$E(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>r_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>r_(r)).join(",")),e.ue=t}return e.ue}function XE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QOe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xJ(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AJ(n.startAt,e.startAt)&&AJ(n.endAt,e.endAt)}function US(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jS(n,e){return n.filters.filter(t=>t instanceof fn&&t.field.isEqual(e))}function kJ(n,e,t){let r=FS,i=!0;for(const s of jS(n,e)){let o=FS,a=!0;switch(s.op){case"<":case"<=":o=qOe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=FS}IJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];IJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function OJ(n,e,t){let r=bd,i=!0;for(const s of jS(n,e)){let o=bd,a=!0;switch(s.op){case">=":case">":o=KOe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=bd}wJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];wJ({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Wc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function FJ(n,e,t,r,i,s,o,a){return new Wc(n,e,t,r,i,s,o,a)}function s_(n){return new Wc(n)}function LJ(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function WV(n){return null!==n.collectionGroup}function o_(n){const e=$e(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zn(wr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new YE(s,r))}),t.has(wr.keyField().canonicalString())||e.ce.push(new YE(wr.keyField(),r))}return e.ce}function Ss(n){const e=$e(n);return e.le||(e.le=function BJ(n,e){if("F"===n.limitType)return $V(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new YE(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new wd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wd(n.startAt.position,n.startAt.inclusive):null;return $V(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,o_(n))),e.le}function GV(n,e){const t=n.filters.concat([e]);return new Wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zS(n,e,t){return new Wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ZE(n,e){return XE(Ss(n),Ss(e))&&n.limitType===e.limitType}function UJ(n){return`${Vf(Ss(n))}|lt:${n.limitType}`}function a_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>PJ(i)).join(", ")}]`),$E(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>r_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>r_(i)).join(",")),`Target(${r})`}(Ss(n))}; limitType=${n.limitType})`}function JE(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):qe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of o_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=TJ(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,o_(r),i)||r.endAt&&!function(o,a,l){const c=TJ(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,o_(r),i)));var r,i}function jJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zJ(n){return(e,t)=>{let r=!1;for(const i of o_(n)){const s=r1e(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function r1e(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Id(l,c):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}class Gc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fJ(this.inner)}size(){return this.innerSize}}const i1e=new pr(qe.comparator);function Co(){return i1e}const HJ=new pr(qe.comparator);function eI(...n){let e=HJ;for(const t of n)e=e.insert(t.key,t);return e}function $J(n){let e=HJ;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bl(){return tI()}function WJ(){return tI()}function tI(){return new Gc(n=>n.toString(),(n,e)=>n.isEqual(e))}const s1e=new pr(qe.comparator),o1e=new Zn(qe.comparator);function Gt(...n){let e=o1e;for(const t of n)e=e.add(t);return e}const a1e=new Zn(Mt);function qV(){return a1e}function KV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:WE(e)?"-0":e}}function GJ(n){return{integerValue:""+n}}function qJ(n,e){return iJ(e)?GJ(e):KV(n,e)}class HS{constructor(){this._=void 0}}function l1e(n,e,t){return n instanceof l_?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&kS(s)&&(s=OS(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Bf?QJ(n,e):n instanceof Uf?YJ(n,e):function(i,s){const o=KJ(i,s),a=XJ(o)+XJ(i.Pe);return UV(o)&&UV(i.Pe)?GJ(a):KV(i.serializer,a)}(n,e)}function c1e(n,e,t){return n instanceof Bf?QJ(n,e):n instanceof Uf?YJ(n,e):t}function KJ(n,e){return n instanceof c_?UV(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class l_ extends HS{}class Bf extends HS{constructor(e){super(),this.elements=e}}function QJ(n,e){const t=ZJ(e);for(const r of n.elements)t.some(i=>Vl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Uf extends HS{constructor(e){super(),this.elements=e}}function YJ(n,e){let t=ZJ(e);for(const r of n.elements)t=t.filter(i=>!Vl(i,r));return{arrayValue:{values:t}}}class c_ extends HS{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function XJ(n){return kr(n.integerValue||n.doubleValue)}function ZJ(n){return KE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nI{constructor(e,t){this.field=e,this.transform=t}}class d1e{constructor(e,t){this.version=e,this.transformResults=t}}class Or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $S(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class WS{}function JJ(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new d_(n.key,Or.none()):new u_(n.key,n.data,Or.none());{const t=n.data,r=os.empty();let i=new Zn(wr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new qc(n.key,r,new wo(i.toArray()),Or.none())}}function h1e(n,e,t){n instanceof u_?function(i,s,o){const a=i.value.clone(),l=nee(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof qc?function(i,s,o){if(!$S(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=nee(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(tee(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rI(n,e,t,r){return n instanceof u_?function(s,o,a,l){if(!$S(s.precondition,o))return a;const c=s.value.clone(),u=ree(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof qc?function(s,o,a,l){if(!$S(s.precondition,o))return a;const c=ree(s.fieldTransforms,l,o),u=o.data;return u.setAll(tee(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):(a=t,$S(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function f1e(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=KJ(r.transform,i||null);null!=s&&(null===t&&(t=os.empty()),t.set(r.field,s))}return t||null}function eee(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Jg(r,i,(s,o)=>function u1e(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Bf&&i instanceof Bf||r instanceof Uf&&i instanceof Uf?Jg(r.elements,i.elements,Vl):r instanceof c_&&i instanceof c_?Vl(r.Pe,i.Pe):r instanceof l_&&i instanceof l_);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class u_ extends WS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qc extends WS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tee(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nee(n,e,t){const r=new Map;ot(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,c1e(o,a,t[i]))}return r}function ree(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,l1e(s,o,e))}return r}class d_ extends WS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QV extends WS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YV{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&h1e(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WJ();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=JJ(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Jg(this.mutations,e.mutations,(t,r)=>eee(t,r))&&Jg(this.baseMutations,e.baseMutations,(t,r)=>eee(t,r))}}class XV{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ot(e.mutations.length===r.length);let i=function(){return s1e}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new XV(e,t,r,i)}}class ZV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class p1e{constructor(e,t){this.count=e,this.unchangedNames=t}}var wi,En;function see(n){switch(n){default:return nt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function oee(n){if(void 0===n)return mi("GRPC error has no .code"),ye.UNKNOWN;switch(n){case wi.OK:return ye.OK;case wi.CANCELLED:return ye.CANCELLED;case wi.UNKNOWN:return ye.UNKNOWN;case wi.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case wi.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case wi.INTERNAL:return ye.INTERNAL;case wi.UNAVAILABLE:return ye.UNAVAILABLE;case wi.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case wi.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case wi.NOT_FOUND:return ye.NOT_FOUND;case wi.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case wi.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case wi.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case wi.ABORTED:return ye.ABORTED;case wi.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case wi.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case wi.DATA_LOSS:return ye.DATA_LOSS;default:return nt()}}(En=wi||(wi={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";function aee(){return new TextEncoder}const m1e=new Nf([4294967295,4294967295],0);function lee(n){const e=aee().encode(n),t=new jZ;return t.update(e),new Uint8Array(t.digest())}function cee(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Nf([t,r],0),new Nf([i,s],0)]}class JV{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new iI(`Invalid padding: ${t}`);if(r<0)throw new iI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new iI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new iI(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Nf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Nf.fromNumber(r)));return 1===i.compare(m1e)&&(i=new Nf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=lee(e),[r,i]=cee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new JV(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=lee(e),[r,i]=cee(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class iI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sI{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,oI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sI(dt.min(),i,new pr(Mt),Co(),Gt())}}class oI{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new oI(r,t,Gt(),Gt(),Gt())}}class qS{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class uee{constructor(e,t){this.targetId=e,this.me=t}}class dee{constructor(e,t,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class hee{constructor(){this.fe=0,this.ge=pee(),this.pe=ni.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Gt(),t=Gt(),r=Gt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new oI(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=pee()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ot(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class g1e{constructor(e){this.Le=e,this.Be=new Map,this.ke=Co(),this.qe=fee(),this.Qe=new pr(Mt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(US(s))if(0===r){const o=new qe(s.path);this.Ue(t,o,Cr.newNoDocument(o,dt.min()))}else ot(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=$c(r).toUint8Array()}catch(l){if(l instanceof mJ)return Go("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new JV(o,i,s)}catch(l){return Go(l instanceof iI?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&US(a.target)){const l=new qe(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,Cr.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Gt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new sI(e,t,this.Qe,this.ke,r);return this.ke=Co(),this.qe=fee(),this.Qe=new pr(Mt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new hee,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Zn(Mt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hee),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function fee(){return new pr(qe.comparator)}function pee(){return new pr(qe.comparator)}const _1e={asc:"ASCENDING",desc:"DESCENDING"},y1e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v1e={and:"AND",or:"OR"};class b1e{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function e2(n,e){return n.useProto3Json||$E(e)?e:{value:e}}function h_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mee(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function E1e(n,e){return h_(n,e.toTimestamp())}function gi(n){return ot(!!n),dt.fromTimestamp(function(t){const r=Hc(t);return new Nr(r.seconds,r.nanos)}(n))}function t2(n,e){return n2(n,e).canonicalString()}function n2(n,e){const t=(i=n,new hn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function gee(n){const e=hn.fromString(n);return ot(See(e)),e}function aI(n,e){return t2(n.databaseId,e.path)}function Ul(n,e){const t=gee(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(vee(t))}function _ee(n,e){return t2(n.databaseId,e)}function yee(n){const e=gee(n);return 4===e.length?hn.emptyPath():vee(e)}function r2(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vee(n){return ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bee(n,e,t){return{name:aI(n,e),fields:t.value.mapValue.fields}}function Eee(n,e,t){const r=Ul(n,e.name),i=gi(e.updateTime),s=e.createTime?gi(e.createTime):dt.min(),o=new os({mapValue:{fields:e.fields}}),a=Cr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function lI(n,e){let t;if(e instanceof u_)t={update:bee(n,e.key,e.value)};else if(e instanceof d_)t={delete:aI(n,e.key)};else if(e instanceof qc)t={update:bee(n,e.key,e.data),updateMask:x1e(e.fieldMask)};else{if(!(e instanceof QV))return nt();t={verify:aI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof l_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Uf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof c_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:E1e(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:nt()),t;var s}function s2(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Or.updateTime(gi(s.updateTime)):void 0!==s.exists?Or.exists(s.exists):Or.none():Or.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(ot("REQUEST_TIME"===a.setToServerValue),l=new l_):"appendMissingElements"in a?l=new Bf(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Uf(a.removeAllFromArray.values||[]):"increment"in a?l=new c_(o,a.increment):nt();const c=wr.fromServerFormat(a.fieldPath);return new nI(c,l)}(n,i)):[];var s;if(e.update){const i=Ul(n,e.update.name),s=new os({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new wo((e.updateMask.fieldPaths||[]).map(u=>wr.fromServerFormat(u)));return new qc(i,s,o,t,r)}return new u_(i,s,t,r)}if(e.delete){const i=Ul(n,e.delete);return new d_(i,t)}if(e.verify){const i=Ul(n,e.verify);return new QV(i,t)}return nt()}function Iee(n,e){return{documents:[_ee(n,e.path)]}}function KS(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_ee(n,i);const s=function(c){if(0!==c.length)return Aee(Wn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:Cd((m=u).field),direction:A1e(m.dir)};var m})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=e2(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function Cee(n){let e=yee(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ot(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){const m=Tee(d);return m instanceof Wn&&zV(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new YE(f_((b=m).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(d){let m;return m="object"==typeof d?d.value:d,$E(m)?null:m}(t.limit));let l=null;var d;t.startAt&&(l=new wd((d=t.startAt).values||[],!!d.before));let c=null;return t.endAt&&(c=function(d){return new wd(d.values||[],!d.before)}(t.endAt)),FJ(e,i,o,s,a,"F",l,c)}function Tee(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=f_(t.unaryFilter.field);return fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=f_(t.unaryFilter.field);return fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=f_(t.unaryFilter.field);return fn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=f_(t.unaryFilter.field);return fn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}(n):void 0!==n.fieldFilter?fn.create(f_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Wn.create(t.compositeFilter.filters.map(r=>Tee(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return nt()}}(t.compositeFilter.op))}(n):nt();var t}function A1e(n){return _1e[n]}function S1e(n){return y1e[n]}function D1e(n){return v1e[n]}function Cd(n){return{fieldPath:n.canonicalString()}}function f_(n){return wr.fromServerFormat(n.fieldPath)}function Aee(n){return n instanceof fn?function(t){if("=="===t.op){if(vJ(t.value))return{unaryFilter:{field:Cd(t.field),op:"IS_NAN"}};if(yJ(t.value))return{unaryFilter:{field:Cd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(vJ(t.value))return{unaryFilter:{field:Cd(t.field),op:"IS_NOT_NAN"}};if(yJ(t.value))return{unaryFilter:{field:Cd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cd(t.field),op:S1e(t.op),value:t.value}}}(n):n instanceof Wn?function(t){const r=t.getFilters().map(i=>Aee(i));return 1===r.length?r[0]:{compositeFilter:{op:D1e(t.op),filters:r}}}(n):nt()}function x1e(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function See(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Kc{constructor(e,t,r,i,s=dt.min(),o=dt.min(),a=ni.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Kc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Dee{constructor(e){this.ct=e}}function xee(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:QS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:aI(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:h_(s,o.version.toTimestamp()),createTime:h_(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jf(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:jf(e.version)}}var s,o;return r}function QS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zf(n){const e=new Nr(n.seconds,n.nanoseconds);return dt.fromTimestamp(e)}function Hf(n,e){const t=(e.baseMutations||[]).map(s=>s2(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>s2(n.ct,s)),i=Nr.fromMillis(e.localWriteTimeMs);return new YV(e.batchId,i,t,r)}function cI(n){const e=zf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zf(n.lastLimboFreeSnapshotVersion):dt.min();let r;return r=void 0!==n.query.documents?(ot(1===(s=n.query).documents.length),Ss(s_(yee(s.documents[0])))):function(s){return Ss(Cee(s))}(n.query),new Kc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ni.fromBase64String(n.resumeToken));var s}function Ree(n,e){const t=jf(e.snapshotVersion),r=jf(e.lastLimboFreeSnapshotVersion);let i;i=US(e.target)?Iee(n.ct,e.target):KS(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function o2(n){const e=Cee({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?zS(e,e.limit,"L"):e}function a2(n,e){return new ZV(e.largestBatchId,s2(n.ct,e.overlayMutation))}function Pee(n,e){const t=e.path.lastSegment();return[n,As(e.path.popLast()),t]}function Mee(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:jf(r.readTime),documentKey:As(r.documentKey.path),largestBatchId:r.largestBatchId}}class P1e{getBundleMetadata(e,t){return Nee(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:zf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Nee(e).put({bundleId:(i=t).id,createTime:jf(gi(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return kee(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:o2(s.bundledQuery),readTime:zf(s.readTime)};var s})}saveNamedQuery(e,t){return kee(e).put({name:(i=t).name,readTime:jf(gi(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Nee(n){return Fi(n,"bundles")}function kee(n){return Fi(n,"namedQueries")}class YS{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new YS(e,t.uid||"")}getOverlay(e,t){return uI(e).get(Pee(this.userId,t)).next(r=>r?a2(this.serializer,r):null)}getOverlays(e,t){const r=Bl();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new ZV(t,o);i.push(this.ht(e,a))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(As(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(uI(e).j("collectionPathOverlayIndex",a))}),le.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Bl(),s=As(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return uI(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=a2(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Bl();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uI(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=a2(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,t){return uI(e).put(function(i,s,o){const[a,l,c]=Pee(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:lI(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function uI(n){return Fi(n,"documentOverlays")}class M1e{Pt(e){return Fi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?ni.fromUint8Array(r):ni.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class $f{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(kr(e.integerValue));else if("doubleValue"in e){const r=kr(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),WE(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Hc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt($c(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?bJ(e)?this.dt(t,Number.MAX_SAFE_INTEGER):BS(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):nt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(kr(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),qe.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function N1e(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Oee(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=N1e(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}$f.vt=new $f;class k1e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=Oee(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=Oee(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class O1e{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class F1e{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class dI{constructor(){this.jt=new k1e,this.Ht=new O1e(this.jt),this.Jt=new F1e(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Wf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wf(this.indexId,this.documentKey,this.arrayValue,r)}}function Td(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Fee(n.arrayValue,e.arrayValue),0!==t?t:(t=Fee(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function Fee(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Lee{constructor(e){this.Xt=new Zn((t,r)=>wr.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ot(e.collectionGroup===this.collectionId),this.nn)return!1;const t=NV(e);if(void 0!==t&&!this.sn(t))return!1;const r=kf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new Zn(wr.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Of(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Of(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Of(r.field,"asc"===r.dir?0:1)));return new e_(e_.UNKNOWN_ID,this.collectionId,t,t_.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Vee(n){var e,t;if(ot(n instanceof fn||n instanceof Wn),n instanceof fn){if(n instanceof NJ){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>fn.create(n.field,"==",s)))||[];return Wn.create(i,"or")}return n}const r=n.filters.map(i=>Vee(i));return Wn.create(r,n.op)}function L1e(n){if(0===n.getFilters().length)return[];const e=u2(Vee(n));return ot(Bee(e)),l2(e)||c2(e)?[e]:e.getFilters()}function l2(n){return n instanceof fn}function c2(n){return n instanceof Wn&&zV(n)}function Bee(n){return l2(n)||c2(n)||function(t){if(t instanceof Wn&&jV(t)){for(const r of t.getFilters())if(!l2(r)&&!c2(r))return!1;return!0}return!1}(n)}function u2(n){if(ot(n instanceof fn||n instanceof Wn),n instanceof fn)return n;if(1===n.filters.length)return u2(n.filters[0]);const e=n.filters.map(r=>u2(r));let t=Wn.create(e,n.op);return t=XS(t),Bee(t)?t:(ot(t instanceof Wn),ot(i_(t)),ot(t.filters.length>1),t.filters.reduce((r,i)=>d2(r,i)))}function d2(n,e){let t;return ot(n instanceof fn||n instanceof Wn),ot(e instanceof fn||e instanceof Wn),t=n instanceof fn?e instanceof fn?Wn.create([n,e],"and"):Uee(n,e):e instanceof fn?Uee(e,n):function(i,s){if(ot(i.filters.length>0&&s.filters.length>0),i_(i)&&i_(s))return RJ(i,s.getFilters());const o=jV(i)?i:s,a=jV(i)?s:i,l=o.filters.map(c=>d2(c,a));return Wn.create(l,"or")}(n,e),XS(t)}function Uee(n,e){if(i_(e))return RJ(e,n.getFilters());{const t=e.filters.map(r=>d2(n,r));return Wn.create(t,"or")}}function XS(n){if(ot(n instanceof fn||n instanceof Wn),n instanceof fn)return n;const e=n.getFilters();if(1===e.length)return XS(e[0]);if(DJ(n))return n;const t=e.map(i=>XS(i)),r=[];return t.forEach(i=>{i instanceof fn?r.push(i):i instanceof Wn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Wn.create(r,n.op)}class V1e{constructor(){this.un=new h2}addToCollectionParentIndex(e,t){return this.un.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(qo.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(qo.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class h2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Zn(hn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zn(hn.comparator)).toArray()}}const ZS=new Uint8Array(0);class B1e{constructor(e,t){this.databaseId=t,this.cn=new h2,this.ln=new Gc(r=>Vf(r),(r,i)=>XE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:As(i)};return jee(e).put(s)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[XZ(t),""],!1,!0);return jee(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Ll(o.parent))}return r})}addFieldIndex(e,t){const r=hI(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=m_(e);return s.next(a=>{o.put(Mee(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=hI(e),i=m_(e),s=p_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=hI(e),r=p_(e),i=m_(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return le.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Lee(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=p_(e);let i=!0;const s=new Map;return le.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Gt();const a=[];return le.forEach(s,(l,c)=>{var Q;ke("IndexedDbIndexManager",`Using index ${Q=l,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(be=>`${be.fieldPath}:${be.kind}`).join(",")}`} to execute ${Vf(t)}`);const u=function(Q,be){const Be=NV(be);if(void 0===Be)return null;for(const je of jS(Q,Be.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(c,l),d=function(Q,be){const Be=new Map;for(const je of kf(be))for(const H of jS(Q,je.fieldPath))switch(H.op){case"==":case"in":Be.set(je.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return Be.set(je.fieldPath.canonicalString(),H.value),Array.from(Be.values())}return null}(c,l),m=function(Q,be){const Be=[];let je=!0;for(const H of kf(be)){const L=0===H.kind?kJ(Q,H.fieldPath,Q.startAt):OJ(Q,H.fieldPath,Q.startAt);Be.push(L.value),je&&(je=L.inclusive)}return new wd(Be,je)}(c,l),y=function(Q,be){const Be=[];let je=!0;for(const H of kf(be)){const L=0===H.kind?OJ(Q,H.fieldPath,Q.endAt):kJ(Q,H.fieldPath,Q.endAt);Be.push(L.value),je&&(je=L.inclusive)}return new wd(Be,je)}(c,l),b=this.In(l,c,m),T=this.In(l,c,y),P=this.Tn(l,c,d),B=this.En(l.indexId,u,b,m.inclusive,T,y.inclusive,P);return le.forEach(B,V=>r.G(V,t.limit).next(Q=>{Q.forEach(be=>{const Be=qe.fromSegments(be.documentKey);o.has(Be)||(o=o.add(Be),a.push(Be))})}))}).next(()=>a)}return le.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:L1e(Wn.create(e.filters,"and")).map(r=>$V(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let d=0;d<l;++d){const m=t?this.dn(t[d/c]):ZS,y=this.An(e,m,r[d%c],i),b=this.Rn(e,m,s[d%c],o),T=a.map(P=>this.An(e,m,P,!0));u.push(...this.createRange(y,b,T))}return u}An(e,t,r,i){const s=new Wf(e,qe.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Wf(e,qe.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new Lee(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return le.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new Zn(wr.comparator),u=!1;for(const d of l.filters)for(const m of d.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?u=!0:c=c.add(m.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new dI;for(const i of kf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);$f.vt.It(s,o)}return r.zt()}dn(e){const t=new dI;return $f.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new dI;return $f.vt.It(Lf(this.databaseId,t),r.Yt(function(s){const o=kf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new dI);let s=0;for(const o of kf(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&KE(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);$f.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new dI;l.seed(a.zt()),$f.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof fn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=hI(e),i=m_(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return le.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){const m=d?new t_(d.sequenceNumber,new qo(zf(d.readTime),new qe(Ll(d.documentKey)),d.largestBatchId)):t_.empty(),y=u.fields.map(([b,T])=>new Of(wr.fromServerFormat(b),T));return new e_(u.indexId,u.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Mt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=hI(e),s=m_(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>le.forEach(a,l=>s.put(Mee(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?le.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),le.forEach(a,l=>this.wn(e,i,l).next(c=>{const u=this.Sn(s,l);return c.isEqual(u)?le.resolve():this.bn(e,s,l,c,u)}))))})}Dn(e,t,r,i){return p_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return p_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=p_(e);let s=new Zn(Td);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Wf(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Zn(Td);const i=this.Vn(t,e);if(null==i)return r;const s=NV(t);if(null!=s){const o=e.data.field(s.fieldPath);if(KE(o))for(const a of o.arrayValue.values||[])r=r.add(new Wf(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Wf(t.indexId,e.key,ZS,i));return r}bn(e,t,r,i,s){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,u,d,m){const y=l.getIterator(),b=c.getIterator();let T=n_(y),P=n_(b);for(;T||P;){let B=!1,V=!1;if(T&&P){const Q=u(T,P);Q<0?V=!0:Q>0&&(B=!0)}else null!=T?V=!0:B=!0;B?(d(P),P=n_(b)):V?(m(T),T=n_(y)):(T=n_(y),P=n_(b))}}(i,s,Td,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),le.waitFor(o)}yn(e){let t=1;return m_(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Td(o,a)).filter((o,a,l)=>!a||0!==Td(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=Td(o,e),l=Td(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,ZS,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,ZS,[]]))}return s}Cn(e,t){return Td(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zee)}getMinOffset(e,t){return le.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||nt())).next(zee)}}function jee(n){return Fi(n,"collectionParents")}function p_(n){return Fi(n,"indexEntries")}function hI(n){return Fi(n,"indexConfiguration")}function m_(n){return Fi(n,"indexState")}function zee(n){ot(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;kV(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qo(e.readTime,e.documentKey,t)}const Hee={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ds{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ds(e,Ds.DEFAULT_COLLECTION_PERCENTILE,Ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $ee(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(u,d,m)=>(a++,m.delete()));s.push(l.next(()=>{ot(1===a)}));const c=[];for(const u of t.mutations){const d=aJ(e,u.key.path,t.batchId);s.push(i.delete(d)),c.push(u.key)}return le.waitFor(s).next(()=>c)}function JS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Ds.DEFAULT_COLLECTION_PERCENTILE=10,Ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ds.DEFAULT=new Ds(41943040,Ds.DEFAULT_COLLECTION_PERCENTILE,Ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ds.DISABLED=new Ds(-1,0,0);class eD{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ot(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new eD(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ad(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=g_(e),o=Ad(e);return o.add({}).next(a=>{ot("number"==typeof a);const l=new YV(a,t,r,i),c=function(y,b,T){const P=T.baseMutations.map(V=>lI(y.ct,V)),B=T.mutations.map(V=>lI(y.ct,V));return{userId:b,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:P,mutations:B}}(this.serializer,this.userId,l),u=[];let d=new Zn((m,y)=>Mt(m.canonicalString(),y.canonicalString()));for(const m of i){const y=aJ(this.userId,m.key.path,a);d=d.add(m.key.path.popLast()),u.push(o.put(c)),u.push(s.put(y,AOe))}return d.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),le.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return Ad(e).get(t).next(r=>r?(ot(r.userId===this.userId),Hf(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?le.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ad(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ot(a.batchId>=r),s=Hf(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ad(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ad(e).U("userMutationsIndex",t).next(r=>r.map(i=>Hf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=MS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return g_(e).J({range:i},(o,a,l)=>{const[c,u,d]=o,m=Ll(u);if(c===this.userId&&t.path.isEqual(m))return Ad(e).get(d).next(y=>{if(!y)throw nt();ot(y.userId===this.userId),s.push(Hf(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Mt);const i=[];return t.forEach(s=>{const o=MS(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=g_(e).J({range:a},(c,u,d)=>{const[m,y,b]=c,T=Ll(y);m===this.userId&&s.path.isEqual(T)?r=r.add(b):d.done()});i.push(l)}),le.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=MS(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Zn(Mt);return g_(e).J({range:o},(l,c,u)=>{const[d,m,y]=l,b=Ll(m);d===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):u.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ad(e).get(s).next(o=>{if(null===o)throw nt();ot(o.userId===this.userId),r.push(Hf(this.serializer,o))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return $ee(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return g_(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Ll(s[1]);i.push(l)}else a.done()}).next(()=>{ot(0===i.length)})})}containsKey(e,t){return Wee(e,this.userId,t)}Nn(e){return Gee(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Wee(n,e,t){const r=MS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return g_(n).J({range:s,H:!0},(a,l,c)=>{const[u,d,m]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Ad(n){return Fi(n,"mutations")}function g_(n){return Fi(n,"documentMutations")}function Gee(n){return Fi(n,"mutationQueues")}class Gf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gf(0)}static kn(){return new Gf(-1)}}class U1e{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Gf(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>dt.fromTimestamp(new Nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>__(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ot(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return __(e).J((o,a)=>{const l=cI(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>le.waitFor(s)).next(()=>i)}forEachTarget(e,t){return __(e).J((r,i)=>{const s=cI(i);t(s)})}qn(e){return qee(e).get("targetGlobalKey").next(t=>(ot(null!==t),t))}Qn(e,t){return qee(e).put("targetGlobalKey",t)}Kn(e,t){return __(e).put(Ree(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return __(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=cI(a);XE(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Sd(e);return t.forEach(o=>{const a=As(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sd(e);return le.forEach(t,s=>{const o=As(s.path);return le.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Sd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sd(e);let s=Gt();return i.J({range:r,H:!0},(o,a,l)=>{const c=Ll(o[1]),u=new qe(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const r=As(t.path),i=IDBKeyRange.bound([r],[XZ(r)],!1,!0);let s=0;return Sd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return __(e).get(t).next(r=>r?cI(r):null)}}function __(n){return Fi(n,"targets")}function qee(n){return Fi(n,"targetGlobal")}function Sd(n){return Fi(n,"targetDocuments")}function Kee([n,e],[t,r]){const i=Mt(n,t);return 0===i?Mt(e,r):i}class j1e{constructor(e){this.Un=e,this.buffer=new Zn(Kee),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Kee(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qee{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,k.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){_d(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield gd(r)}yield t.Hn(3e5)}))}}class z1e{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Ko.oe);const r=new j1e(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Hee)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hee):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Zg()<=vo.$b.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}class H1e{constructor(e,t){this.db=e,this.garbageCollector=function Yee(n,e){return new z1e(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return tD(e,r)}removeReference(e,t,r){return tD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return tD(e,t)}nr(e,t){return function(i,s){let o=!1;return Gee(i).Y(a=>Wee(i,a,s).next(l=>(l&&(o=!0),le.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,dt.min()),Sd(e).delete([0,As(o.path)])))});i.push(l)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return tD(e,t)}tr(e,t){const r=Sd(e);let i,s=Ko.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==Ko.oe&&t(new qe(Ll(i)),s),s=c,i=l):s=Ko.oe}).next(()=>{s!==Ko.oe&&t(new qe(Ll(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tD(n,e){return Sd(n).put((i=n.currentSequenceNumber,{targetId:0,path:As(e.path),sequenceNumber:i}));var i}class Xee{constructor(){this.changes=new Gc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $1e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qf(e).put(r)}removeEntry(e,t,r){return qf(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],QS(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Cr.newInvalidDocument(t);return qf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fI(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Cr.newInvalidDocument(t)};return qf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fI(t))},(i,s)=>{r={document:this.ir(t,s),size:JS(s)}}).next(()=>r)}getEntries(e,t){let r=Co();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Co(),i=new pr(qe.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,JS(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return le.resolve();let i=new Zn(tte);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(fI(i.first()),fI(i.last())),o=i.getIterator();let a=o.getNext();return qf(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=qe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&tte(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(fI(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),QS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qf(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=Co();for(const d of c){const m=this.ir(qe.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);m.isFoundDocument()&&(JE(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let s=Co();const o=ete(t,r),a=ete(t,qo.max());return qf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.ir(qe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new W1e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Jee(e).get("remoteDocumentGlobalKey").next(t=>(ot(!!t),t))}rr(e,t){return Jee(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function R1e(n,e){let t;if(e.document)t=Eee(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=zf(e.noDocument.readTime);t=Cr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=qe.fromSegments(e.unknownDocument.path),i=zf(e.unknownDocument.version);t=Cr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Nr(i[0],i[1]);return dt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(dt.min()))return r}return Cr.newInvalidDocument(e)}}function Zee(n){return new $1e(n)}class W1e extends Xee{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Gc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Zn((s,o)=>Mt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=xee(this.cr.serializer,o);i=i.add(s.path.popLast());const c=JS(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=xee(this.cr.serializer,o.convertToNoDocument(dt.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Jee(n){return Fi(n,"remoteDocumentGlobal")}function qf(n){return Fi(n,"remoteDocumentsV14")}function fI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ete(n,e){const t=e.documentKey.path.toArray();return[n,QS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tte(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Mt(t[s],r[s]),i)return i;return i=Mt(t.length,r.length),i||(i=Mt(t[t.length-2],r[r.length-2]),i||Mt(t[t.length-1],r[r.length-1]))}class G1e{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nte{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&rI(r.mutation,i,wo.empty(),Nr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=Bl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=eI();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Bl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Co();const o=tI(),a=tI();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof qc)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),rI(u.mutation,c,u.mutation.getFieldMask(),Nr.now())):o.set(c.key,wo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new G1e(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=tI();let i=new pr((o,a)=>o-a),s=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||wo.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||Gt()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=WJ();u.forEach(m=>{if(!s.has(m)){const y=JJ(t.get(m),r.get(m));null!==y&&d.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):WV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):le.resolve(Bl());let a=-1,l=s;return o.next(c=>le.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?le.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Gt())).next(u=>({batchId:a,changes:$J(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=eI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=eI();return this.indexManager.getCollectionParents(e,s).next(a=>le.forEach(a,l=>{const c=(d=t,m=l.child(s),new Wc(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,m;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,Cr.newInvalidDocument(u)))});let a=eI();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&rI(u.mutation,c,wo.empty(),Nr.now()),JE(t,c)&&(a=a.insert(l,c))}),a})}}class q1e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return le.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:gi(i.createTime)}),le.resolve();var i}getNamedQuery(e,t){return le.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:o2(i.bundledQuery),readTime:gi(i.readTime)}),le.resolve();var i}}class K1e{constructor(){this.overlays=new pr(qe.comparator),this.Ir=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Bl();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Bl(),s=t.length+1,o=new qe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new pr((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=Bl(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Bl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return le.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZV(t,r));let s=this.Ir.get(t);void 0===s&&(s=Gt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class Q1e{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}class f2{constructor(){this.Tr=new Zn(Yi.Er),this.dr=new Zn(Yi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Yi(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Yi(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new qe(new hn([])),r=new Yi(t,e),i=new Yi(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new qe(new hn([])),r=new Yi(t,e),i=new Yi(t,e+1);let s=Gt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Yi(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Yi{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return qe.comparator(e.key,t.key)||Mt(e.wr,t.wr)}static Ar(e,t){return Mt(e.wr,t.wr)||qe.comparator(e.key,t.key)}}class Y1e{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Zn(Yi.Er)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new YV(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Yi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,t){return le.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yi(t,0),i=new Yi(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Mt);return t.forEach(i=>{const s=new Yi(i,0),o=new Yi(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),le.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;qe.isDocumentKey(s)||(s=s.child(""));const o=new Yi(new qe(s),0);let a=new Zn(Mt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),le.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ot(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return le.forEach(t.mutations,i=>{const s=new Yi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Yi(t,0),i=this.br.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class X1e{constructor(e){this.Mr=e,this.docs=new pr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Cr.newInvalidDocument(t))}getEntries(e,t){let r=Co();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Co();const o=t.path,a=new qe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kV(JZ(u),r)<=0||(i.has(u.key)||JE(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,t,r,i){nt()}Or(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Z1e(this)}getSize(e){return le.resolve(this.size)}}class Z1e extends Xee{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class J1e{constructor(e){this.persistence=e,this.Nr=new Gc(t=>Vf(t),XE),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new f2,this.targetCount=0,this.kr=Gf.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),le.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Gf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Kn(t),le.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Br.containsKey(t))}}class p2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ko(0),this.Kr=!1,this.Kr=!0,this.$r=new Q1e,this.referenceDelegate=e(this),this.Ur=new J1e(this),this.indexManager=new V1e,this.remoteDocumentCache=new X1e(r=>this.referenceDelegate.Wr(r)),this.serializer=new Dee(t),this.Gr=new q1e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K1e,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Y1e(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new eFe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return le.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class eFe extends tJ{constructor(e){super(),this.currentSequenceNumber=e}}class nD{constructor(e){this.persistence=e,this.Jr=new f2,this.Yr=null}static Zr(e){return new nD(e)}get Xr(){if(this.Yr)return this.Yr;throw nt()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),le.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xr,r=>{const i=qe.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,dt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return le.or([()=>le.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class tFe{constructor(e){this.serializer=e}O(e,t,r,i){const s=new PS("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oJ,{unique:!0}),l.createObjectStore("documentMutations"),rte(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=le.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),rte(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dt.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oJ,{unique:!0});const d=c.store("mutations"),m=u.map(y=>d.put(y));return le.waitFor(m)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:VOe});c.createIndex("collectionPathOverlayIndex",BOe,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",UOe,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:SOe});c.createIndex("documentKeyIndex",DOe),c.createIndex("collectionGroupIndex",xOe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:kOe}).createIndex("sequenceNumberIndex",OOe,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:FOe}).createIndex("documentKeyIndex",LOe,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(l){l.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=JS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>le.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>le.forEach(a,l=>{ot(l.userId===s.userId);const c=Hf(this.serializer,l);return $ee(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new hn(o),c=[0,As(l)];s.push(t.get(c).next(u=>u?le.resolve():t.put({targetId:0,path:As(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:NOe});const r=t.store("collectionParents"),i=new h2,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:As(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new hn(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=Ll(a);return s(u.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=cI(i),o=Ree(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(d=o,d.document?new qe(hn.fromString(d.document.name).popFirst(5)):d.noDocument?qe.fromSegments(d.noDocument.path):d.unknownDocument?qe.fromSegments(d.unknownDocument.path):nt()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var d;i.push(a.put(c))}).next(()=>le.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=Zee(this.serializer),s=new p2(nD.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Gt();Hf(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),le.forEach(a,(l,c)=>{const u=new Ki(c),d=YS.lt(this.serializer,u),m=s.getIndexManager(u),y=eD.lt(u,this.serializer,m,s.referenceDelegate);return new nte(i,y,d,m).recalculateAndSaveOverlaysForDocumentKeys(new VV(t,Ko.oe),l).next()})})}}function rte(n){n.createObjectStore("targetDocuments",{keyPath:POe}).createIndex("documentTargetsIndex",MOe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ROe,{unique:!0}),n.createObjectStore("targetGlobal")}const m2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class g2{constructor(e,t,r,i,s,o,a,l,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!g2.D())throw new xe(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new H1e(this,i),this.Ai=t+"main",this.serializer=new Dee(l),this.Ri=new Fl(this.Ai,this.hi,new tFe(this.serializer)),this.$r=new M1e,this.Ur=new U1e(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Zee(this.serializer),this.Gr=new P1e,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===u&&mi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ye.FAILED_PRECONDITION,m2);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ko(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,k.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,k.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,k.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>iD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(_d(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return pI(e).get("owner").next(t=>le.resolve(this.vi(t)))}Ci(e){return iD(e).delete(this.clientId)}Fi(){var e=this;return(0,k.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Fi(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return le.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?le.resolve(!0):pI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new xe(ye.FAILED_PRECONDITION,m2);return!1}}return!(!this.networkEnabled||!this.inForeground)||iD(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,k.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new VV(t,Ko.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>iD(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return eD.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new B1e(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return YS.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(l=this.hi)?HOe:16===l?zOe:15===l?LV:14===l?uJ:13===l?cJ:12===l?jOe:11===l?lJ:void nt();var l;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new VV(a,this.Qr?this.Qr.next():Ko.oe),"readwrite-primary"===t?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw mi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new xe(ye.FAILED_PRECONDITION,eJ);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return pI(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ye.FAILED_PRECONDITION,m2)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pI(e).put("owner",t)}static D(){return Fl.D()}bi(e){const t=pI(e);return t.get("owner").next(r=>this.vi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(mi(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,N.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){mi("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pI(n){return Fi(n,"owner")}function iD(n){return Fi(n,"clientMetadata")}function _2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class y2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Gt(),i=Gt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new y2(e,t.fromCache,r,i)}}class nFe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ite{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,N.nr)()?8:nJ((0,N.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new nFe;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Zg()<=vo.$b.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",a_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),le.resolve()):(Zg()<=vo.$b.DEBUG&&ke("QueryEngine","Query:",a_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zg()<=vo.$b.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",a_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ss(t))):le.resolve())}Yi(e,t){if(LJ(t))return le.resolve(null);let r=Ss(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=zS(t,null,"F"),r=Ss(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Gt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,zS(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return LJ(t)||i.isEqual(dt.min())?le.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?le.resolve(null):(Zg()<=vo.$b.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),a_(t)),this.rs(e,o,t,ZZ(i,-1)).next(a=>a))})}ts(e,t){let r=new Zn(zJ(e));return t.forEach((i,s)=>{JE(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Zg()<=vo.$b.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",a_(t)),this.Ji.getDocumentsMatchingQuery(e,t,qo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class rFe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new pr(Mt),this._s=new Gc(s=>Vf(s),XE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nte(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function ste(n,e,t,r){return new rFe(n,e,t,r)}function ote(n,e){return v2.apply(this,arguments)}function v2(){return(v2=(0,k.A)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Gt();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function ate(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function lte(n,e,t){let r=Gt(),i=Gt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Co();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(dt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ke("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function oFe(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y_(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Kc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function v_(n,e,t){return b2.apply(this,arguments)}function b2(){return(b2=(0,k.A)(function*(n,e,t){const r=$e(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_d(o))throw o;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function sD(n,e,t){const r=$e(n);let i=dt.min(),s=Gt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=$e(l),m=d._s.get(u);return void 0!==m?le.resolve(d.os.get(m)):d.Ur.getTargetData(c,u)}(r,o,Ss(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:dt.min(),t?s:Gt())).next(a=>(dte(r,jJ(e),a),{documents:a,Ts:s})))}function cte(n,e){const t=$e(n),r=$e(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function ute(n,e){const t=$e(n),r=t.us.get(e)||dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,ZZ(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(dte(t,e,i),i))}function dte(n,e,t){let r=n.us.get(e)||dt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function E2(){return(E2=(0,k.A)(function*(n,e,t,r){const i=$e(n);let s=Gt(),o=Co();for(const c of t){const u=e.Es(c.metadata.name);c.document&&(s=s.add(u));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),o=o.insert(u,d)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=yield y_(i,(u=r,Ss(s_(hn.fromString(`__bundle__/docs/${u}`)))));var u;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>lte(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))})).apply(this,arguments)}function lFe(n,e){return I2.apply(this,arguments)}function I2(){return(I2=(0,k.A)(function*(n,e,t=Gt()){const r=yield y_(n,Ss(o2(e.bundledQuery))),i=$e(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=gi(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(ni.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function hte(n,e){return`firestore_clients_${n}_${e}`}function fte(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function w2(n,e){return`firestore_targets_${n}_${e}`}class oD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new xe(i.error.code,i.error.message))),o?new oD(e,t,i.state,s):(mi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new xe(r.error.code,r.error.message))),s?new mI(e,r.state,i):(mi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class aD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=qV();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=iJ(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new aD(e,s):(mi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class C2{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new C2(t.clientId,t.onlineState):(mi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class T2{constructor(){this.activeTargetIds=qV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A2{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new pr(Mt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=hte(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new T2),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,k.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(hte(e.persistenceKey,i));if(s){const o=aD.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(w2(this.persistenceKey,e));if(i){const s=mI.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(w2(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void mi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,k.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=Ko.oe;if(null!=o)try{const l=JSON.parse(o);ot("number"==typeof l),a=l}catch(l){mi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Ko.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new oD(this.currentUser,e,t,r),s=fte(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=fte(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=w2(this.persistenceKey,e),s=new mI(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return aD.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return oD.Rs(new Ki(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return mI.Rs(i,t)}Ls(e){return C2.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,k.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=qV();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class pte{constructor(){this.so=new T2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new T2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cFe{_o(e){}shutdown(){}}class mte{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lD=null;function S2(){return null===lD?lD=268435456+Math.round(2147483648*Math.random()):lD++,"0x"+lD.toString(16)}const uFe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dFe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const xs="WebChannelConnection";class hFe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=S2(),l=this.xo(t,r.toUriEncodedString());ke("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(u=>(ke("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw Go("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Xg,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${uFe[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=S2();return new Promise((o,a)=>{const l=new zZ;l.setWithCredentials(!0),l.listenOnce(HZ.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case RS.NO_ERROR:const u=l.getResponseJson();ke(xs,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case RS.TIMEOUT:ke(xs,`RPC '${e}' ${s} timed out`),a(new xe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case RS.HTTP_ERROR:const d=l.getStatus();if(ke(xs,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const b=function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(B)>=0?B:ye.UNKNOWN}(y.status);a(new xe(b,y.message))}else a(new xe(ye.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new xe(ye.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{ke(xs,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ke(xs,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=S2(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GZ(),a=WZ(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ke(xs,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let m=!1,y=!1;const b=new dFe({Io:P=>{y?ke(xs,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||(ke(xs,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),ke(xs,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},To:()=>d.close()}),T=(P,B,V)=>{P.listen(B,Q=>{try{V(Q)}catch(be){setTimeout(()=>{throw be},0)}})};return T(d,jE.EventType.OPEN,()=>{y||(ke(xs,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),T(d,jE.EventType.CLOSE,()=>{y||(y=!0,ke(xs,`RPC '${e}' stream ${i} transport closed`),b.So())}),T(d,jE.EventType.ERROR,P=>{y||(y=!0,Go(xs,`RPC '${e}' stream ${i} transport errored:`,P),b.So(new xe(ye.UNAVAILABLE,"The operation could not be completed")))}),T(d,jE.EventType.MESSAGE,P=>{var B;if(!y){const V=P.data[0];ot(!!V);const be=V.error||(null===(B=V[0])||void 0===B?void 0:B.error);if(be){ke(xs,`RPC '${e}' stream ${i} received error:`,be);const Be=be.status;let je=function(W){const J=wi[W];if(void 0!==J)return oee(J)}(Be),H=be.message;void 0===je&&(je=ye.INTERNAL,H="Unknown error status: "+Be+" with message "+be.message),y=!0,b.So(new xe(je,H)),d.close()}else ke(xs,`RPC '${e}' stream ${i} received:`,V),b.bo(V)}}),T(a,$Z.STAT_EVENT,P=>{P.stat===PV.PROXY?ke(xs,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===PV.NOPROXY&&ke(xs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function gte(){return typeof window<"u"?window:null}function cD(){return typeof document<"u"?document:null}function gI(n){return new b1e(n,!0)}class D2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class _te{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new D2(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,k.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,k.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,k.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(mi(t.toString()),mi("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new xe(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,k.A)(function*(){e.state=0,e.start()}))}I_(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fFe extends _te{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function w1e(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:nt(),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(ot(void 0===u||"string"==typeof u),ni.fromBase64String(u||"")):(ot(void 0===u||u instanceof Buffer||u instanceof Uint8Array),ni.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?ye.UNKNOWN:oee(c.code);return new xe(u,c.message||"")}(o);t=new dee(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ul(n,r.document.name),s=gi(r.document.updateTime),o=r.document.createTime?gi(r.document.createTime):dt.min(),a=new os({mapValue:{fields:r.document.fields}}),l=Cr.newFoundDocument(i,s,o,a);t=new qS(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Ul(n,r.document),s=r.readTime?gi(r.readTime):dt.min(),o=Cr.newNoDocument(i,s);t=new qS([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ul(n,r.document);t=new qS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new p1e(i,s);t=new uee(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return dt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dt.min():o.readTime?gi(o.readTime):dt.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=r2(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=US(l)?{documents:Iee(s,l)}:{query:KS(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=mee(s,o.resumeToken);const c=e2(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(dt.min())>0){a.readTime=h_(s,o.snapshotVersion.toTimestamp());const c=e2(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function T1e(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=r2(this.serializer),t.removeTarget=e,this.a_(t)}}class pFe extends _te{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ot(!!e.streamToken),this.lastStreamToken=e.streamToken,ot(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function C1e(n,e){return n&&n.length>0?(ot(void 0!==e),n.map(t=>function(i,s){let o=gi(i.updateTime?i.updateTime:s);return o.isEqual(dt.min())&&(o=gi(s)),new d1e(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=gi(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=r2(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lI(this.serializer,r))};this.a_(t)}}class mFe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new xe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,n2(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(ye.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,n2(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ye.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class gFe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mi(t),this.D_=!1):ke("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class _Fe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,k.A)(function*(){var l;Dd(o)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,k.A)(function*(u){const d=$e(u);d.L_.add(4),yield b_(d),d.q_.set("Unknown"),d.L_.delete(4),yield _I(d)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.q_=new gFe(r,i)}}function _I(n){return x2.apply(this,arguments)}function x2(){return(x2=(0,k.A)(function*(n){if(Dd(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function b_(n){return R2.apply(this,arguments)}function R2(){return(R2=(0,k.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function uD(n,e){const t=$e(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),N2(t)?M2(t):w_(t).r_()&&P2(t,e))}function E_(n,e){const t=$e(n),r=w_(t);t.N_.delete(e),r.r_()&&yte(t,e),0===t.N_.size&&(r.r_()?r.o_():Dd(t)&&t.q_.set("Unknown"))}function P2(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}w_(n).A_(e)}function yte(n,e){n.Q_.xe(e),w_(n).R_(e)}function M2(n){n.Q_=new g1e({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),w_(n).start(),n.q_.v_()}function N2(n){return Dd(n)&&!w_(n).n_()&&n.N_.size>0}function Dd(n){return 0===$e(n).L_.size}function vte(n){n.Q_=void 0}function yFe(n){return k2.apply(this,arguments)}function k2(){return(k2=(0,k.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function vFe(n){return O2.apply(this,arguments)}function O2(){return(O2=(0,k.A)(function*(n){n.N_.forEach((e,t)=>{P2(n,e)})})).apply(this,arguments)}function bFe(n,e){return F2.apply(this,arguments)}function F2(){return(F2=(0,k.A)(function*(n,e){vte(n),N2(n)?(n.q_.M_(e),M2(n)):n.q_.set("Unknown")})).apply(this,arguments)}function EFe(n,e,t){return L2.apply(this,arguments)}function L2(){return L2=(0,k.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof dee&&2===e.state&&e.cause)try{yield(r=(0,k.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dD(n,r)}else if(e instanceof qS?n.Q_.Ke(e):e instanceof uee?n.Q_.He(e):n.Q_.We(e),!t.isEqual(dt.min()))try{const r=yield ate(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(ni.EMPTY_BYTE_STRING,u.snapshotVersion)),yte(s,l);const d=new Kc(u.target,l,c,u.sequenceNumber);P2(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield dD(n,r)}var r}),L2.apply(this,arguments)}function dD(n,e,t){return V2.apply(this,arguments)}function V2(){return(V2=(0,k.A)(function*(n,e,t){if(!_d(e))throw e;n.L_.add(1),yield b_(n),n.q_.set("Offline"),t||(t=()=>ate(n.localStore)),n.asyncQueue.enqueueRetryable((0,k.A)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield _I(n)}))})).apply(this,arguments)}function bte(n,e){return e().catch(t=>dD(n,t,e))}function I_(n){return B2.apply(this,arguments)}function B2(){return(B2=(0,k.A)(function*(n){const e=$e(n),t=xd(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;IFe(e);)try{const i=yield oFe(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,wFe(e,i)}catch(i){yield dD(e,i)}Ete(e)&&Ite(e)})).apply(this,arguments)}function IFe(n){return Dd(n)&&n.O_.length<10}function wFe(n,e){n.O_.push(e);const t=xd(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Ete(n){return Dd(n)&&!xd(n).n_()&&n.O_.length>0}function Ite(n){xd(n).start()}function CFe(n){return U2.apply(this,arguments)}function U2(){return(U2=(0,k.A)(function*(n){xd(n).p_()})).apply(this,arguments)}function TFe(n){return j2.apply(this,arguments)}function j2(){return(j2=(0,k.A)(function*(n){const e=xd(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function AFe(n,e,t){return z2.apply(this,arguments)}function z2(){return(z2=(0,k.A)(function*(n,e,t){const r=n.O_.shift(),i=XV.from(r,e,t);yield bte(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield I_(n)})).apply(this,arguments)}function SFe(n,e){return H2.apply(this,arguments)}function H2(){return H2=(0,k.A)(function*(n,e){var t;e&&xd(n).V_&&(yield(t=(0,k.A)(function*(i,s){if(see(a=s.code)&&a!==ye.ABORTED){const o=i.O_.shift();xd(i).s_(),yield bte(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield I_(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),Ete(n)&&Ite(n)}),H2.apply(this,arguments)}function wte(n,e){return $2.apply(this,arguments)}function $2(){return($2=(0,k.A)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Dd(t);t.L_.add(3),yield b_(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield _I(t)})).apply(this,arguments)}function W2(n,e){return G2.apply(this,arguments)}function G2(){return(G2=(0,k.A)(function*(n,e){const t=$e(n);e?(t.L_.delete(2),yield _I(t)):e||(t.L_.add(2),yield b_(t),t.q_.set("Unknown"))})).apply(this,arguments)}function w_(n){return n.K_||(n.K_=function(t,r,i){const s=$e(t);return s.w_(),new fFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:yFe.bind(null,n),Ro:vFe.bind(null,n),mo:bFe.bind(null,n),d_:EFe.bind(null,n)}),n.B_.push(function(){var e=(0,k.A)(function*(t){t?(n.K_.s_(),N2(n)?M2(n):n.q_.set("Unknown")):(yield n.K_.stop(),vte(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function xd(n){return n.U_||(n.U_=function(t,r,i){const s=$e(t);return s.w_(),new pFe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:CFe.bind(null,n),mo:SFe.bind(null,n),f_:TFe.bind(null,n),g_:AFe.bind(null,n)}),n.B_.push(function(){var e=(0,k.A)(function*(t){t?(n.U_.s_(),yield I_(n)):(yield n.U_.stop(),n.O_.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class q2{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new q2(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C_(n,e){if(mi("AsyncQueue",`${e}: ${n}`),_d(n))return new xe(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class T_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=eI(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new T_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof T_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new T_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Cte{constructor(){this.W_=new pr(qe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):nt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class A_{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new A_(e,t,T_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ZE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class DFe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class xFe{constructor(){this.queries=Tte(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=$e(t),s=i.queries;i.queries=Tte(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})}(this,new xe(ye.ABORTED,"Firestore shutting down"))}}function Tte(){return new Gc(n=>UJ(n),ZE)}function K2(n,e){return Q2.apply(this,arguments)}function Q2(){return(Q2=(0,k.A)(function*(n,e){const t=$e(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new DFe,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=C_(o,`Initialization of query '${a_(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Z2(t)})).apply(this,arguments)}function Y2(n,e){return X2.apply(this,arguments)}function X2(){return(X2=(0,k.A)(function*(n,e){const t=$e(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function RFe(n,e){const t=$e(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Z2(t)}function PFe(n,e,t){const r=$e(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function Z2(n){n.Y_.forEach(e=>{e.next()})}var J2,Ate;(Ate=J2||(J2={})).ea="default",Ate.Cache="cache";class eB{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new A_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=A_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==J2.Cache}}class MFe{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class Ste{constructor(e){this.serializer=e}Es(e){return Ul(this.serializer,e)}ds(e){return e.metadata.exists?Eee(this.serializer,e.document,!1):Cr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return gi(e)}}class NFe{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Dte(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=hn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new Ste(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Gt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,k.A)(function*(){const t=yield function aFe(n,e,t,r){return E2.apply(this,arguments)}(e.localStore,new Ste(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield lFe(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function Dte(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class xte{constructor(e){this.key=e}}class Rte{constructor(e){this.key=e}}class Pte{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Gt(),this.mutatedKeys=Gt(),this.Aa=zJ(e),this.Ra=new T_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Cte,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const m=i.get(u),y=JE(this.query,d)?d:null,b=!!m&&this.mutatedKeys.has(m.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;m&&y?m.data.isEqual(y.data)?b!==T&&(r.track({type:3,doc:y}),P=!0):this.ga(m,y)||(r.track({type:2,doc:y}),P=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),P=!0):m&&!y&&(r.track({type:1,doc:m}),P=!0,(l||c)&&(a=!0)),P&&(y?(o=o.add(y),s=T?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(y,b){const T=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return T(y)-T(b)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],l=0===this.da.size&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,0!==o.length||c?{snapshot:new A_(this.query,e.Ra,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Cte,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Gt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Rte(r))}),this.da.forEach(r=>{e.has(r)||t.push(new xte(r))}),t}ba(e){this.Ta=e.Ts,this.da=Gt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return A_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class kFe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class OFe{constructor(e){this.key=e,this.va=!1}}class FFe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Gc(a=>UJ(a),ZE),this.Ma=new Map,this.xa=new Set,this.Oa=new pr(qe.comparator),this.Na=new Map,this.La=new f2,this.Ba={},this.ka=new Map,this.qa=Gf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function LFe(n,e){return tB.apply(this,arguments)}function tB(){return(tB=(0,k.A)(function*(n,e,t=!0){const r=hD(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Mte(r,e,t,!0),i})).apply(this,arguments)}function VFe(n,e){return nB.apply(this,arguments)}function nB(){return(nB=(0,k.A)(function*(n,e){const t=hD(n);yield Mte(t,e,!0,!1)})).apply(this,arguments)}function Mte(n,e,t,r){return rB.apply(this,arguments)}function rB(){return(rB=(0,k.A)(function*(n,e,t,r){const i=yield y_(n.localStore,Ss(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield iB(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&uD(n.remoteStore,i),a})).apply(this,arguments)}function iB(n,e,t,r,i){return sB.apply(this,arguments)}function sB(){return sB=(0,k.A)(function*(n,e,t,r,i){n.Ka=(d,m,y)=>{return(b=(0,k.A)(function*(P,B,V,Q){let be=B.view.ma(V);be.ns&&(be=yield sD(P.localStore,B.query,!1).then(({documents:L})=>B.view.ma(L,be)));const Be=Q&&Q.targetChanges.get(B.targetId),je=Q&&null!=Q.targetMismatches.get(B.targetId),H=B.view.applyChanges(be,P.isPrimaryClient,Be,je);return gB(P,B.targetId,H.wa),H.snapshot}),function T(P,B,V,Q){return b.apply(this,arguments)})(n,d,m,y);var b};const s=yield sD(n.localStore,e,!0),o=new Pte(e,s.Ts),a=o.ma(s.documents),l=oI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);gB(n,t,c.wa);const u=new kFe(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),sB.apply(this,arguments)}function BFe(n,e,t){return oB.apply(this,arguments)}function oB(){return(oB=(0,k.A)(function*(n,e,t){const r=$e(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ZE(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield v_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&E_(r.remoteStore,i.targetId),S_(r,i.targetId)}).catch(gd))):(S_(r,i.targetId),yield v_(r.localStore,i.targetId,!0))})).apply(this,arguments)}function UFe(n,e){return aB.apply(this,arguments)}function aB(){return(aB=(0,k.A)(function*(n,e){const t=$e(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),E_(t.remoteStore,r.targetId))})).apply(this,arguments)}function lB(){return(lB=(0,k.A)(function*(n,e,t){const r=SB(n);try{const i=yield function(o,a){const l=$e(o),c=Nr.now(),u=a.reduce((y,b)=>y.add(b.key),Gt());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Co(),T=Gt();return l.cs.getEntries(y,u).next(P=>{b=P,b.forEach((B,V)=>{V.isValidDocument()||(T=T.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(P=>{d=P;const B=[];for(const V of a){const Q=f1e(V,d.get(V.key).overlayedDocument);null!=Q&&B.push(new qc(V.key,Q,CJ(Q.value.mapValue),Or.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,B,a)}).next(P=>{m=P;const B=P.applyToLocalDocumentSet(d,T);return l.documentOverlayCache.saveOverlays(y,P.batchId,B)})}).then(()=>({batchId:m.batchId,changes:$J(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new pr(Mt)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),yield Qc(r,i.changes),yield I_(r.remoteStore)}catch(i){const s=C_(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function Nte(n,e){return cB.apply(this,arguments)}function cB(){return(cB=(0,k.A)(function*(n,e){const t=$e(n);try{const r=yield function sFe(n,e){const t=$e(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((u,d)=>{const m=i.get(d);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,d)));let y=m.withSequenceNumber(s.currentSequenceNumber);var T,P,B;null!==e.targetMismatches.get(d)?y=y.withResumeToken(ni.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,r)),i=i.insert(d,y),P=y,B=u,(0===(T=m).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,y))});let l=Co(),c=Gt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(lte(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(dt.min())){const u=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return le.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ot(o.va):i.removedDocuments.size>0&&(ot(o.va),o.va=!1))}),yield Qc(t,r,e)}catch(r){yield gd(r)}})).apply(this,arguments)}function kte(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=$e(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const m of d.j_)m.Z_(a)&&(c=!0)}),c&&Z2(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zFe(n,e,t){return uB.apply(this,arguments)}function uB(){return(uB=(0,k.A)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new pr(qe.comparator);o=o.insert(s,Cr.newNoDocument(s,dt.min()));const a=Gt().add(s),l=new sI(dt.min(),new Map,new pr(Mt),o,a);yield Nte(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),_B(r)}else yield v_(r.localStore,e,!1).then(()=>S_(r,e,t)).catch(gd)})).apply(this,arguments)}function HFe(n,e){return dB.apply(this,arguments)}function dB(){return(dB=(0,k.A)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const i=yield function iFe(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,m=d.keys();let y=le.resolve();return m.forEach(b=>{y=y.next(()=>u.getEntry(l,b)).next(T=>{const P=c.docVersions.get(b);ot(null!==P),T.version.compareTo(P)<0&&(d.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),u.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Gt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);mB(t,r,null),pB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qc(t,i)}catch(i){yield gd(i)}})).apply(this,arguments)}function $Fe(n,e,t){return hB.apply(this,arguments)}function hB(){return(hB=(0,k.A)(function*(n,e,t){const r=$e(n);try{const i=yield function(o,a){const l=$e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ot(null!==d),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);mB(r,e,t),pB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qc(r,i)}catch(i){yield gd(i)}})).apply(this,arguments)}function fB(){return(fB=(0,k.A)(function*(n,e){const t=$e(n);Dd(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=$e(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=C_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function pB(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function mB(n,e,t){const r=$e(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function S_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Ote(n,r)})}function Ote(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(E_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),_B(n))}function gB(n,e,t){for(const r of t)r instanceof xte?(n.La.addReference(r.key,e),GFe(n,r)):r instanceof Rte?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Ote(n,r.key)):nt()}function GFe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.xa.add(r),_B(n))}function _B(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new qe(hn.fromString(e)),r=n.qa.next();n.Na.set(r,new OFe(t)),n.Oa=n.Oa.insert(t,r),uD(n.remoteStore,new Kc(Ss(s_(t.path)),r,"TargetPurposeLimboResolution",Ko.oe))}}function Qc(n,e,t){return yB.apply(this,arguments)}function yB(){return yB=(0,k.A)(function*(n,e,t){const r=$e(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:null===(u=t?.targetChanges.get(l.targetId))||void 0===u?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=y2.Wi(l.targetId,c);s.push(d)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,k.A)(function*(c,u){const d=$e(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>le.forEach(u,y=>le.forEach(y.$i,b=>d.persistence.referenceDelegate.addReference(m,y.targetId,b)).next(()=>le.forEach(y.Ui,b=>d.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))}catch(m){if(!_d(m))throw m;ke("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const y=m.targetId;if(!m.fromCache){const b=d.os.get(y),P=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);d.os=d.os.insert(y,P)}}}),function l(c,u){return a.apply(this,arguments)})(r.localStore,s))}),yB.apply(this,arguments)}function qFe(n,e){return vB.apply(this,arguments)}function vB(){return(vB=(0,k.A)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield ote(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(l=>{l.reject(new xe(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qc(t,r.hs)}var s})).apply(this,arguments)}function KFe(n,e){const t=$e(n),r=t.Na.get(e);if(r&&r.va)return Gt().add(r.key);{let i=Gt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function QFe(n,e){return bB.apply(this,arguments)}function bB(){return(bB=(0,k.A)(function*(n,e){const t=$e(n),r=yield sD(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&gB(t,e.targetId,i.wa),i})).apply(this,arguments)}function YFe(n,e){return EB.apply(this,arguments)}function EB(){return(EB=(0,k.A)(function*(n,e){const t=$e(n);return ute(t.localStore,e).then(r=>Qc(t,r))})).apply(this,arguments)}function XFe(n,e,t,r){return IB.apply(this,arguments)}function IB(){return(IB=(0,k.A)(function*(n,e,t,r){const i=$e(n),s=yield function(a,l){const c=$e(a),u=$e(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Mn(d,l).next(m=>m?c.localDocuments.getDocuments(d,m):le.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield I_(i.remoteStore):"acknowledged"===t||"rejected"===t?(mB(i,e,r||null),pB(i,e),l=e,$e($e(i.localStore).mutationQueue).On(l)):nt(),yield Qc(i,s)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function wB(){return(wB=(0,k.A)(function*(n,e){const t=$e(n);if(hD(t),SB(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Fte(t,r.toArray());t.Qa=!0,yield W2(t.remoteStore,!0);for(const s of i)uD(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(S_(t,o),v_(t.localStore,o,!0))),E_(t.remoteStore,o)}),yield i,yield Fte(t,r),function(o){const a=$e(o);a.Na.forEach((l,c)=>{E_(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new pr(qe.comparator)}(t),t.Qa=!1,yield W2(t.remoteStore,!1)}})).apply(this,arguments)}function Fte(n,e,t){return CB.apply(this,arguments)}function CB(){return(CB=(0,k.A)(function*(n,e,t){const r=$e(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&0!==l.length){a=yield y_(r.localStore,Ss(l[0]));for(const c of l){const u=r.Fa.get(c),d=yield QFe(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=yield cte(r.localStore,o);a=yield y_(r.localStore,c),yield iB(r,Lte(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function Lte(n){return FJ(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function JFe(n){return t=$e(n).localStore,$e($e(t).persistence).Qi();var t}function eLe(n,e,t,r){return TB.apply(this,arguments)}function TB(){return(TB=(0,k.A)(function*(n,e,t,r){const i=$e(n);if(i.Qa)return void ke("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield ute(i.localStore,jJ(s[0])),a=sI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ni.EMPTY_BYTE_STRING);yield Qc(i,o,a);break}case"rejected":yield v_(i.localStore,e,!0),S_(i,e,r);break;default:nt()}})).apply(this,arguments)}function tLe(n,e,t){return AB.apply(this,arguments)}function AB(){return(AB=(0,k.A)(function*(n,e,t){const r=hD(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ke("SyncEngine","Adding an already active target "+i);continue}const s=yield cte(r.localStore,i),o=yield y_(r.localStore,s);yield iB(r,Lte(s),o.targetId,!1,o.resumeToken),uD(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield v_(r.localStore,i,!1).then(()=>{E_(r.remoteStore,i),S_(r,i)}).catch(gd))}})).apply(this,arguments)}function hD(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nte.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KFe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zFe.bind(null,e),e.Ca.d_=RFe.bind(null,e.eventManager),e.Ca.$a=PFe.bind(null,e.eventManager),e}function SB(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HFe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$Fe.bind(null,e),e}let D_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,k.A)(function*(){r.serializer=gI(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return ste(this.persistence,new ite,t.initialUser,this.serializer)}Ga(t){return new p2(nD.Zr,this.serializer)}Wa(t){return new pte}terminate(){var t=this;return(0,k.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class DB extends D_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,k.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield SB(r.Ja.syncEngine),yield I_(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return ste(this.persistence,new ite,e.initialUser,this.serializer)}ja(e,t){return new Qee(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new COe(t,this.persistence);return new wOe(e.asyncQueue,r)}Ga(e){const t=_2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ds.withCacheSize(this.cacheSizeBytes):Ds.DEFAULT;return new g2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,gte(),cD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new pte}}class Vte extends DB{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,k.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof A2&&(r.sharedClientState.syncEngine={no:XFe.bind(null,i),ro:eLe.bind(null,i),io:tLe.bind(null,i),Qi:JFe.bind(null,i),eo:YFe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,k.A)(function*(o){yield function ZFe(n,e){return wB.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=gte();if(!A2.D(t))throw new xe(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new A2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let x_=(()=>{class n{initialize(t,r){var i=this;return(0,k.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>kte(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=qFe.bind(null,i.syncEngine),yield W2(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new xFe}createDatastore(t){const r=gI(t.databaseInfo.databaseId),i=new hFe(t.databaseInfo);return new mFe(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>kte(this.syncEngine,r,0),l=mte.D()?new mte:new cFe,new _Fe(i,s,o,a,l);var i,s,o,a,l}createSyncEngine(t,r){return function(s,o,a,l,c,u,d){const m=new FFe(s,o,a,l,c,u);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,k.A)(function*(){var r,i,s;yield(s=(0,k.A)(function*(a){const l=$e(a);ke("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield b_(l),l.k_.shutdown(),l.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function Bte(n,e=10240){let t=0;return{read:()=>(0,k.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,k.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class fD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):mi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class iLe{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Qi,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,k.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,k.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,k.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new MFe(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,k.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,k.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,k.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sLe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,k.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new xe(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,k.A)(function*(o,a){const l=$e(o),c={documents:a.map(y=>aI(l.serializer,y))},u=yield l.Lo("BatchGetDocuments",l.serializer.databaseId,hn.emptyPath(),c,a.length),d=new Map;u.forEach(y=>{const b=function I1e(n,e){return"found"in e?function(r,i){ot(!!i.found);const s=Ul(r,i.found.name),o=gi(i.found.updateTime),a=i.found.createTime?gi(i.found.createTime):dt.min(),l=new os({mapValue:{fields:i.found.fields}});return Cr.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){ot(!!i.missing),ot(!!i.readTime);const s=Ul(r,i.missing),o=gi(i.readTime);return Cr.newNoDocument(s,o)}(n,e):nt()}(l.serializer,y);d.set(b.key.toString(),b)});const m=[];return a.forEach(y=>{const b=d.get(y.toString());ot(!!b),m.push(b)}),m}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new d_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,k.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=qe.fromPath(i);e.mutations.push(new QV(s,e.precondition(s)))}),yield(r=(0,k.A)(function*(s,o){const a=$e(s),l={writes:o.map(c=>lI(a.serializer,c))};yield a.Mo("Commit",a.serializer.databaseId,hn.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dt.min())?Or.exists(!1):Or.updateTime(t):Or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dt.min()))throw new xe(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Or.updateTime(t)}return Or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oLe{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new D2(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,k.A)(function*(){const t=new sLe(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!$E(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!see(t)}return!1}}class aLe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ki.UNAUTHENTICATED,this.clientId=YZ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,k.A)(function*(l){ke("FirestoreClient","Received user=",l.uid),yield o.authCredentialListener(l),o.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(ke("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,k.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=C_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function xB(n,e){return RB.apply(this,arguments)}function RB(){return RB=(0,k.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,k.A)(function*(s){r.isEqual(s)||(yield ote(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),RB.apply(this,arguments)}function Ute(n,e){return PB.apply(this,arguments)}function PB(){return(PB=(0,k.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield MB(n);ke("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>wte(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>wte(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function MB(n){return NB.apply(this,arguments)}function NB(){return(NB=(0,k.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xB(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Go("Error using user provided cache. Falling back to memory cache: "+e),yield xB(n,new D_)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),yield xB(n,new D_);var i;return n._offlineComponents})).apply(this,arguments)}function pD(n){return kB.apply(this,arguments)}function kB(){return(kB=(0,k.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ute(n,n._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),yield Ute(n,new x_))),n._onlineComponents})).apply(this,arguments)}function jte(n){return MB(n).then(e=>e.persistence)}function R_(n){return MB(n).then(e=>e.localStore)}function zte(n){return pD(n).then(e=>e.remoteStore)}function OB(n){return pD(n).then(e=>e.syncEngine)}function P_(n){return FB.apply(this,arguments)}function FB(){return(FB=(0,k.A)(function*(n){const e=yield pD(n),t=e.eventManager;return t.onListen=LFe.bind(null,e.syncEngine),t.onUnlisten=BFe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VFe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UFe.bind(null,e.syncEngine),t})).apply(this,arguments)}function $te(n,e,t={}){const r=new Qi;return n.asyncQueue.enqueueAndForget((0,k.A)(function*(){return function(s,o,a,l,c){const u=new fD({next:m=>{u.Za(),o.enqueueAndForget(()=>Y2(s,d));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new xe(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&"server"===l.source?c.reject(new xe(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new eB(s_(a.path),u,{includeMetadataChanges:!0,_a:!0});return K2(s,d)}(yield P_(n),n.asyncQueue,e,t,r)})),r.promise}function Wte(n,e,t={}){const r=new Qi;return n.asyncQueue.enqueueAndForget((0,k.A)(function*(){return function(s,o,a,l,c){const u=new fD({next:m=>{u.Za(),o.enqueueAndForget(()=>Y2(s,d)),m.fromCache&&"server"===l.source?c.reject(new xe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new eB(a,u,{includeMetadataChanges:!0,_a:!0});return K2(s,d)}(yield P_(n),n.asyncQueue,e,t,r)})),r.promise}function Gte(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const qte=new Map;function LB(n,e,t){if(!t)throw new xe(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Kte(n,e,t,r){if(!0===e&&!0===r)throw new xe(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qte(n){if(!qe.isDocumentKey(n))throw new xe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yte(n){if(qe.isDocumentKey(n))throw new xe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":nt()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mD(n);throw new xe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xte(n,e){if(e<=0)throw new xe(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Zte{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kte("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Gte(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zte({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zte(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new dOe;switch(r.type){case"firstParty":return new mOe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,k.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=qte.get(t);r&&(ke("ComponentProvider","Removing Datastore"),qte.delete(t),r.terminate())}(this),Promise.resolve()}}class as{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class Tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}}class jl extends as{constructor(e,t,r){super(e,t,s_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new qe(e))}withConverter(e){return new jl(this.firestore,e,this._path)}}function ene(n,e,...t){if(n=(0,N.Ku)(n),LB("collection","path",e),n instanceof yI){const r=hn.fromString(e,...t);return Yte(r),new jl(n,null,r)}{if(!(n instanceof Tr||n instanceof jl))throw new xe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return Yte(r),new jl(n.firestore,null,r)}}function gD(n,e,...t){if(n=(0,N.Ku)(n),1===arguments.length&&(e=YZ.newId()),LB("doc","path",e),n instanceof yI){const r=hn.fromString(e,...t);return Qte(r),new Tr(n,null,new qe(r))}{if(!(n instanceof Tr||n instanceof jl))throw new xe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return Qte(r),new Tr(n.firestore,n instanceof jl?n.converter:null,new qe(r))}}function tne(n,e){return n=(0,N.Ku)(n),e=(0,N.Ku)(e),(n instanceof Tr||n instanceof jl)&&(e instanceof Tr||e instanceof jl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function VB(n,e){return n=(0,N.Ku)(n),e=(0,N.Ku)(e),n instanceof as&&e instanceof as&&n.firestore===e.firestore&&ZE(n._query,e._query)&&n.converter===e.converter}class nne{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new D2(this,"async_queue_retry"),this.Vu=()=>{const r=cD();r&&ke("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=cD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=cD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Qi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,k.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!_d(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,mi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=q2.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&nt()}verifyOperationInProgress(){}wu(){var e=this;return(0,k.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function BB(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class bLe{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends yI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,k.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new nne(t),e._firestoreClient=void 0,yield t}})()}}function Fr(n){if(n._terminated)throw new xe(ye.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rne(n),n._firestoreClient}function rne(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new GOe(n._databaseId,l,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Gte(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new aLe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function UB(){return(UB=(0,k.A)(function*(n){Go("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();ine(n,x_.provider,{build:t=>new Vte(t,e.cacheSizeBytes)})})).apply(this,arguments)}function ine(n,e,t){if((n=on(n,rr))._firestoreClient||n._terminated)throw new xe(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new xe(ye.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},rne(n)}class zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zl(ni.fromBase64String(e))}catch(t){throw new xe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zl(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kf{constructor(e){this._methodName=e}}class _D{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}class yD{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const PLe=/^__.*__$/;class MLe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new qc(e,this.data,this.fieldMask,t,this.fieldTransforms):new u_(e,this.data,t,this.fieldTransforms)}}class sne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function one(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class vD{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ID(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(one(this.Cu)&&PLe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NLe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gI(e)}Qu(e,t,r,i=!1){return new vD({Cu:e,methodName:t,qu:r,path:wr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qf(n){const e=n._freezeSettings(),t=gI(n._databaseId);return new NLe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bD(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);qB("Data must be an object, but it was:",o,r);const a=cne(r,o);let l,c;if(s.merge)l=new wo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const m=EI(e,d,t);if(!o.contains(m))throw new xe(ye.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);dne(u,m)||u.push(m)}l=new wo(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new MLe(new os(a),l,c)}class bI extends Kf{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bI}}function ane(n,e,t){return new vD({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jB extends Kf{_toFieldTransform(e){return new nI(e.path,new l_)}isEqual(e){return e instanceof jB}}class zB extends Kf{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=ane(this,e,!0),r=this.Ku.map(s=>Yf(s,t)),i=new Bf(r);return new nI(e.path,i)}isEqual(e){return e instanceof zB&&(0,N.bD)(this.Ku,e.Ku)}}class HB extends Kf{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=ane(this,e,!0),r=this.Ku.map(s=>Yf(s,t)),i=new Uf(r);return new nI(e.path,i)}isEqual(e){return e instanceof HB&&(0,N.bD)(this.Ku,e.Ku)}}class $B extends Kf{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new c_(e.serializer,qJ(e.serializer,this.$u));return new nI(e.path,t)}isEqual(e){return e instanceof $B&&this.$u===e.$u}}function WB(n,e,t,r){const i=n.Qu(1,e,t);qB("Data must be an object, but it was:",i,r);const s=[],o=os.empty();yd(r,(l,c)=>{const u=ED(e,l,t);c=(0,N.Ku)(c);const d=i.Nu(u);if(c instanceof bI)s.push(u);else{const m=Yf(c,d);null!=m&&(s.push(u),o.set(u,m))}});const a=new wo(s);return new sne(o,a,i.fieldTransforms)}function GB(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[EI(e,r,t)],l=[i];if(s.length%2!=0)throw new xe(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(EI(e,s[m])),l.push(s[m+1]);const c=[],u=os.empty();for(let m=a.length-1;m>=0;--m)if(!dne(c,a[m])){const y=a[m];let b=l[m];b=(0,N.Ku)(b);const T=o.Nu(y);if(b instanceof bI)c.push(y);else{const P=Yf(b,T);null!=P&&(c.push(y),u.set(y,P))}}const d=new wo(c);return new sne(u,d,o.fieldTransforms)}function lne(n,e,t,r=!1){return Yf(t,n.Qu(r?4:3,e))}function Yf(n,e){if(une(n=(0,N.Ku)(n)))return qB("Unsupported field value:",e,n),cne(n,e);if(n instanceof Kf)return function(r,i){if(!one(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Yf(a,i.Lu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,N.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return qJ(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Nr.fromDate(r);return{timestampValue:h_(i.serializer,s)}}if(r instanceof Nr){const s=new Nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:h_(i.serializer,s)}}if(r instanceof _D)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zl)return{bytesValue:mee(i.serializer,r._byteString)};if(r instanceof Tr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:t2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yD)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(l=>{if("number"!=typeof l)throw a.Bu("VectorValues must only contain numeric values.");return KV(a.serializer,l)})}}}}};var a;throw i.Bu(`Unsupported field value: ${mD(r)}`)}(n,e)}function cne(n,e){const t={};return fJ(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yd(n,(r,i)=>{const s=Yf(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function une(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nr||n instanceof _D||n instanceof zl||n instanceof Tr||n instanceof Kf||n instanceof yD)}function qB(n,e,t){if(!une(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=mD(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function EI(n,e,t){if((e=(0,N.Ku)(e))instanceof Yc)return e._internalPath;if("string"==typeof e)return ED(n,e);throw ID("Field path arguments must be of type string or ",n,!1,void 0,t)}const kLe=new RegExp("[~\\*/\\[\\]]");function ED(n,e,t){if(e.search(kLe)>=0)throw ID(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yc(...e.split("."))._internalPath}catch{throw ID(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ID(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new xe(ye.INVALID_ARGUMENT,a+n+l)}function dne(n,e){return n.some(t=>t.isEqual(e))}class II{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OLe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OLe extends II{data(){return super.data()}}function wD(n,e){return"string"==typeof e?ED(n,e):e instanceof Yc?e._internalPath:e._delegate._internalPath}function hne(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KB{}class wI extends KB{}function Rd(n,e,...t){let r=[];e instanceof KB&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof M_).length,a=s.filter(l=>l instanceof CI).length;if(o>1||o>0&&a>0)throw new xe(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class CI extends wI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new CI(e,t,r)}_apply(e){const t=this._parse(e);return gne(e._query,t),new as(e.firestore,e.converter,GV(e._query,t))}_parse(e){const t=Qf(e.firestore);return function(s,o,a,l,c,u,d){let m;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new xe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){mne(d,u);const y=[];for(const b of d)y.push(pne(l,s,b));m={arrayValue:{values:y}}}else m=pne(l,s,d)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||mne(d,u),m=lne(a,"where",d,"in"===u||"not-in"===u);return fn.create(c,u,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class M_ extends KB{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new M_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)gne(o,l),o=GV(o,l)}(e._query,t),new as(e.firestore,e.converter,GV(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class QB extends wI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QB(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new YE(s,o)}(e._query,this._field,this._direction);return new as(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Wc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class CD extends wI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new CD(e,t,r)}_apply(e){return new as(e.firestore,e.converter,zS(e._query,this._limit,this._limitType))}}class TD extends wI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new TD(e,t,r)}_apply(e){const t=fne(e,this.type,this._docOrFields,this._inclusive);return new as(e.firestore,e.converter,(s=t,new Wc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class AD extends wI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new AD(e,t,r)}_apply(e){const t=fne(e,this.type,this._docOrFields,this._inclusive);return new as(e.firestore,e.converter,(s=t,new Wc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function fne(n,e,t,r){if(t[0]=(0,N.Ku)(t[0]),t[0]instanceof II)return function(s,o,a,l,c){if(!l)throw new xe(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const d of o_(s))if(d.field.isKeyField())u.push(Lf(o,l.key));else{const m=l.data.field(d.field);if(kS(m))throw new xe(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=d.field.canonicalString();throw new xe(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}u.push(m)}return new wd(u,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Qf(n.firestore);return function(o,a,l,c,u,d){const m=o.explicitOrderBy;if(u.length>m.length)throw new xe(ye.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let b=0;b<u.length;b++){const T=u[b];if(m[b].field.isKeyField()){if("string"!=typeof T)throw new xe(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!WV(o)&&-1!==T.indexOf("/"))throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const P=o.path.child(hn.fromString(T));if(!qe.isDocumentKey(P))throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const B=new qe(P);y.push(Lf(a,B))}else{const P=lne(l,c,T);y.push(P)}}return new wd(y,d)}(n._query,n.firestore._databaseId,i,e,t,r)}}function pne(n,e,t){if("string"==typeof(t=(0,N.Ku)(t))){if(""===t)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WV(e)&&-1!==t.indexOf("/"))throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(hn.fromString(t));if(!qe.isDocumentKey(r))throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lf(n,new qe(r))}if(t instanceof Tr)return Lf(n,t._key);throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mD(t)}.`)}function mne(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gne(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(ye.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YB{convertValue(e,t="none"){switch(Ed(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($c(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw nt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return yd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>kr(o.doubleValue));return new yD(s)}convertGeoPoint(e){return new _D(kr(e.latitude),kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=OS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(GE(e));default:return null}}convertTimestamp(e){const t=Hc(e);return new Nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=hn.fromString(e);ot(See(r));const i=new vd(r.get(1),r.get(3)),s=new qe(r.popFirst(5));return i.isEqual(t)||mi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function SD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class $Le extends YB{constructor(e){super(),this.firestore=e}convertBytes(e){return new zl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}class Xf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xc extends II{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new TI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class TI extends Xc{data(e={}){return super.data(e)}}class Pd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new TI(this._firestore,this._userDataWriter,r.key,r,new Xf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new TI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new TI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:GLe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function GLe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function yne(n,e){return n instanceof Xc&&e instanceof Xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pd&&e instanceof Pd&&n._firestore===e._firestore&&VB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Md extends YB{constructor(e){super(),this.firestore=e}convertBytes(e){return new zl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}function vne(n,e,t){n=on(n,Tr);const r=on(n.firestore,rr),i=SD(n.converter,e,t);return N_(r,[bD(Qf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Or.none())])}function bne(n,e,t,...r){n=on(n,Tr);const i=on(n.firestore,rr),s=Qf(i);let o;return o="string"==typeof(e=(0,N.Ku)(e))||e instanceof Yc?GB(s,"updateDoc",n._key,e,t,r):WB(s,"updateDoc",n._key,e),N_(i,[o.toMutation(n._key,Or.exists(!0))])}function Ene(n,...e){var t,r,i;n=(0,N.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||BB(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(BB(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let l,c,u;if(n instanceof Tr)c=on(n.firestore,rr),u=s_(n._key.path),l={next:d=>{e[o]&&e[o](XB(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=on(n,as);c=on(d.firestore,rr),u=d._query;const m=new Md(c);l={next:y=>{e[o]&&e[o](new Pd(c,m,d,y))},error:e[o+1],complete:e[o+2]},hne(n._query)}return function(m,y,b,T){const P=new fD(T),B=new eB(y,P,b);return m.asyncQueue.enqueueAndForget((0,k.A)(function*(){return K2(yield P_(m),B)})),()=>{P.Za(),m.asyncQueue.enqueueAndForget((0,k.A)(function*(){return Y2(yield P_(m),B)}))}}(Fr(c),u,a,l)}function N_(n,e){return function(r,i){const s=new Qi;return r.asyncQueue.enqueueAndForget((0,k.A)(function*(){return function jFe(n,e,t){return lB.apply(this,arguments)}(yield OB(r),i,s)})),s.promise}(Fr(n),e)}function XB(n,e,t){const r=t.docs.get(e._key),i=new Md(n);return new Xc(n,i,e._key,r,new Xf(t.hasPendingWrites,t.fromCache),e.converter)}const uVe={maxAttempts:5};class Ine{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qf(e)}set(e,t,r){this._verifyNotCommitted();const i=Nd(e,this._firestore),s=SD(i.converter,t,r),o=bD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Or.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Nd(e,this._firestore);let o;return o="string"==typeof(t=(0,N.Ku)(t))||t instanceof Yc?GB(this._dataReader,"WriteBatch.update",s._key,t,r,i):WB(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nd(e,this._firestore);return this._mutations=this._mutations.concat(new d_(t._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nd(n,e){if((n=(0,N.Ku)(n)).firestore!==e)throw new xe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dVe extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Qf(t)}get(t){const r=Nd(t,this._firestore),i=new $Le(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return nt();const o=s[0];if(o.isFoundDocument())return new II(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new II(this._firestore,i,r._key,null,r.converter);throw nt()})}set(t,r,i){const s=Nd(t,this._firestore),o=SD(s.converter,r,i),a=bD(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Nd(t,this._firestore);let a;return a="string"==typeof(r=(0,N.Ku)(r))||r instanceof Yc?GB(this._dataReader,"Transaction.update",o._key,r,i,s):WB(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Nd(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nd(e,this._firestore),r=new Md(this._firestore);return super.get(e).then(i=>new Xc(this._firestore,r,t._key,i._document,new Xf(!1,!1),t.converter))}}function JB(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ane(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function Sne(){if(!function $Oe(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Xg=Bn.SDK_VERSION,(0,Bn._registerComponent)(new Ho.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new rr(new fOe(r.getProvider("auth-internal")),new gOe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new xe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vd(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Bn.registerVersion)(qZ,"4.7.3",e),(0,Bn.registerVersion)(qZ,"4.7.3","esm2017")}();class AI{constructor(e){this._delegate=e}static fromBase64String(e){return Sne(),new AI(zl.fromBase64String(e))}static fromUint8Array(e){return Ane(),new AI(zl.fromUint8Array(e))}toBase64(){return Sne(),this._delegate.toBase64()}toUint8Array(){return Ane(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eU(n){return function EVe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class IVe{enableIndexedDbPersistence(e,t){return function ILe(n,e){Go("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return ine(n,x_.provider,{build:r=>new DB(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wLe(n){return UB.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function CLe(n){if(n._initialized&&!n._terminated)throw new xe(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,k.A)(function*(){try{yield(t=(0,k.A)(function*(i){if(!Fl.D())return Promise.resolve();const s=i+"main";yield Fl.delete(s)}),function r(i){return t.apply(this,arguments)})(_2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Dne{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Go("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Jte(n,e,t,r={}){var i;const s=(n=on(n,yI))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Ki.MOCK_USER;else{a=(0,N.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new xe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ki(c)}n._authCredentials=new hOe(new KZ(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function ALe(n){return function lLe(n){return n.asyncQueue.enqueue((0,k.A)(function*(){const e=yield jte(n),t=yield zte(n);return e.setNetworkEnabled(!0),function(i){const s=$e(i);return s.L_.delete(0),_I(s)}(t)}))}(Fr(n=on(n,rr)))}(this._delegate)}disableNetwork(){return function SLe(n){return function cLe(n){return n.asyncQueue.enqueue((0,k.A)(function*(){const e=yield jte(n),t=yield zte(n);return e.setNetworkEnabled(!1),(r=(0,k.A)(function*(s){const o=$e(s);o.L_.add(0),yield b_(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Fr(n=on(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Kte("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function TLe(n){return function(t){const r=new Qi;return t.asyncQueue.enqueueAndForget((0,k.A)(function*(){return function WFe(n,e){return fB.apply(this,arguments)}(yield OB(t),r)})),r.promise}(Fr(n=on(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function tVe(n,e){return function fLe(n,e){const t=new fD(e);return n.asyncQueue.enqueueAndForget((0,k.A)(function*(){return i=yield P_(n),s=t,$e(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,k.A)(function*(){return i=yield P_(n),s=t,void $e(i).Y_.delete(s);var i,s}))}}(Fr(n=on(n,rr)),BB(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new k_(this,ene(this._delegate,e))}catch(t){throw Qs(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,gD(this._delegate,e))}catch(t){throw Qs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ys(this,function vLe(n,e){if(n=on(n,yI),LB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new as(n,null,(r=e,new Wc(hn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Qs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hVe(n,e,t){n=on(n,rr);const r=Object.assign(Object.assign({},uVe),t);return function(s){if(s.maxAttempts<1)throw new xe(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Qi;return s.asyncQueue.enqueueAndForget((0,k.A)(function*(){const c=yield function Hte(n){return pD(n).then(e=>e.datastore)}(s);new oLe(s.asyncQueue,c,a,o,l).au()})),l.promise}(Fr(n),i=>e(new dVe(n,i)),r)}(this._delegate,t=>e(new xne(this,t)))}batch(){return Fr(this._delegate),new Rne(new Ine(this._delegate,e=>N_(this._delegate,e)))}loadBundle(e){return function DLe(n,e){const t=Fr(n=on(n,rr)),r=new bLe;return function pLe(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?aee().encode(o):o,u=function(u,d){if(u instanceof Uint8Array)return Bte(u,d);if(u instanceof ArrayBuffer)return Bte(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new iLe(u,a);var u}(t,gI(e));n.asyncQueue.enqueueAndForget((0,k.A)(function*(){!function nLe(n,e,t){const r=$e(n);var i;(i=(0,k.A)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(b,T){const P=$e(b),B=gi(T.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",V=>P.Gr.getBundleMetadata(V,T.id)).then(V=>!!V&&V.createTime.compareTo(B)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(b=c).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);l._updateProgress(Dte(c));const u=new NFe(c,o.localStore,a.serializer);let d=yield a.Ua();for(;d;){const y=yield u.la(d);y&&l._updateProgress(y),d=yield a.Ua()}const m=yield u.complete();return yield Qc(o,m.Ia,void 0),yield function(b,T){const P=$e(b);return P.persistence.runTransaction("Save bundle","readwrite",B=>P.Gr.saveBundleMetadata(B,T))}(o.localStore,c),l._completeWith(m.progress),Promise.resolve(m.Pa)}catch(c){return Go("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var b}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield OB(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function xLe(n,e){return function mLe(n,e){return n.asyncQueue.enqueue((0,k.A)(function*(){return function(r,i){const s=$e(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield R_(n),e)}))}(Fr(n=on(n,rr)),e).then(t=>t?new as(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ys(this,t):null)}}class xD extends YB{constructor(e){super(),this.firestore=e}convertBytes(e){return new AI(new zl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class xne{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xD(e)}get(e){const t=Jf(e);return this._delegate.get(t).then(r=>new SI(this._firestore,new Xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jf(e);return r?(JB("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jf(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jf(e);return this._delegate.delete(t),this}}class Rne{constructor(e){this._delegate=e}set(e,t,r){const i=Jf(e);return r?(JB("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jf(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new TI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new DI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Zf(e,new xD(e),t),i.set(t,s)),s}}Zf.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new Tr(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new wa(t,new Tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new k_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new k_(this.firestore,ene(this._delegate,e))}catch(t){throw Qs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.Ku)(e))instanceof Tr&&tne(this._delegate,e)}set(e,t){t=JB("DocumentReference.set",t);try{return t?vne(this._delegate,e,t):vne(this._delegate,e)}catch(r){throw Qs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?bne(this._delegate,e):bne(this._delegate,e,t,...r)}catch(i){throw Qs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function JLe(n){return N_(on(n.firestore,rr),[new d_(n._key,Or.none())])}(this._delegate)}onSnapshot(...e){const t=Pne(e),r=Mne(e,i=>new SI(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Ene(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function KLe(n){n=on(n,Tr);const e=on(n.firestore,rr),t=Fr(e),r=new Md(e);return function uLe(n,e){const t=new Qi;return n.asyncQueue.enqueueAndForget((0,k.A)(function*(){return(r=(0,k.A)(function*(s,o,a){try{const l=yield function(u,d){const m=$e(u);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,d))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new xe(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=C_(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield R_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Xc(e,r,n._key,i,new Xf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function QLe(n){n=on(n,Tr);const e=on(n.firestore,rr);return $te(Fr(e),n._key,{source:"server"}).then(t=>XB(e,n,t))}(this._delegate):function qLe(n){n=on(n,Tr);const e=on(n.firestore,rr);return $te(Fr(e),n._key).then(t=>XB(e,n,t))}(this._delegate),t.then(r=>new SI(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?Zf.getInstance(this.firestore,e):null))}}function Qs(n,e,t){return n.message=n.message.replace(e,t),n}function Pne(n){for(const e of n)if("object"==typeof e&&!eU(e))return e;return{}}function Mne(n,e){var t,r;let i;return i=eU(n[0])?n[0]:eU(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class SI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yne(this._delegate,e._delegate)}}class DI extends SI{data(e){const t=this._delegate.data(e);return this._delegate._converter||function uOe(n){n||nt()}(void 0!==t),t}}class Ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xD(e)}where(e,t,r){try{return new Ys(this.firestore,Rd(this._delegate,function FLe(n,e,t){const r=e,i=wD("where",n);return CI._create(i,r,t)}(e,t,r)))}catch(i){throw Qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ys(this.firestore,Rd(this._delegate,function LLe(n,e="asc"){const t=e,r=wD("orderBy",n);return QB._create(r,t)}(e,t)))}catch(r){throw Qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ys(this.firestore,Rd(this._delegate,function VLe(n){return Xte("limit",n),CD._create("limit",n,"F")}(e)))}catch(t){throw Qs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ys(this.firestore,Rd(this._delegate,function BLe(n){return Xte("limitToLast",n),CD._create("limitToLast",n,"L")}(e)))}catch(t){throw Qs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ys(this.firestore,Rd(this._delegate,function ULe(...n){return TD._create("startAt",n,!0)}(...e)))}catch(t){throw Qs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ys(this.firestore,Rd(this._delegate,function jLe(...n){return TD._create("startAfter",n,!1)}(...e)))}catch(t){throw Qs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ys(this.firestore,Rd(this._delegate,function zLe(...n){return AD._create("endBefore",n,!1)}(...e)))}catch(t){throw Qs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ys(this.firestore,Rd(this._delegate,function HLe(...n){return AD._create("endAt",n,!0)}(...e)))}catch(t){throw Qs(t,"endAt()","Query.endAt()")}}isEqual(e){return VB(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function XLe(n){n=on(n,as);const e=on(n.firestore,rr),t=Fr(e),r=new Md(e);return function dLe(n,e){const t=new Qi;return n.asyncQueue.enqueueAndForget((0,k.A)(function*(){return(r=(0,k.A)(function*(s,o,a){try{const l=yield sD(s,o,!0),c=new Pte(o,l.Ts),u=c.ma(l.documents),d=c.applyChanges(u,!1);a.resolve(d.snapshot)}catch(l){const c=C_(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield R_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Pd(e,r,n,i))}(this._delegate):"server"===e?.source?function ZLe(n){n=on(n,as);const e=on(n.firestore,rr),t=Fr(e),r=new Md(e);return Wte(t,n._query,{source:"server"}).then(i=>new Pd(e,r,n,i))}(this._delegate):function YLe(n){n=on(n,as);const e=on(n.firestore,rr),t=Fr(e),r=new Md(e);return hne(n._query),Wte(t,n._query).then(i=>new Pd(e,r,n,i))}(this._delegate),t.then(r=>new tU(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Pne(e),r=Mne(e,i=>new tU(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Ene(this._delegate,t,r)}withConverter(e){return new Ys(this.firestore,this._delegate.withConverter(e?Zf.getInstance(this.firestore,e):null))}}class CVe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new DI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tU{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new DI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CVe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new DI(this._firestore,r))})}isEqual(e){return yne(this._delegate,e._delegate)}}class k_ extends Ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?gD(this._delegate):gD(this._delegate,e))}catch(t){throw Qs(t,"doc()","CollectionReference.doc()")}}add(e){return function eVe(n,e){const t=on(n.firestore,rr),r=gD(n),i=SD(n.converter,e);return N_(t,[bD(Qf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Or.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return tne(this._delegate,e._delegate)}withConverter(e){return new k_(this.firestore,this._delegate.withConverter(e?Zf.getInstance(this.firestore,e):null))}}function Jf(n){return on(n,Tr)}class nU{constructor(...e){this._delegate=new Yc(...e)}static documentId(){return new nU(wr.keyField().canonicalString())}isEqual(e){return(e=(0,N.Ku)(e))instanceof Yc&&this._delegate._internalPath.isEqual(e._internalPath)}}class ep{constructor(e){this._delegate=e}static serverTimestamp(){const e=function pVe(){return new jB("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ep(e)}static delete(){const e=function fVe(){return new bI("deleteField")}();return e._methodName="FieldValue.delete",new ep(e)}static arrayUnion(...e){const t=function mVe(...n){return new zB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ep(t)}static arrayRemove(...e){const t=function gVe(...n){return new HB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ep(t)}static increment(e){const t=function _Ve(n){return new $B("increment",n)}(e);return t._methodName="FieldValue.increment",new ep(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const TVe={Firestore:Dne,GeoPoint:_D,Timestamp:Nr,Blob:AI,Transaction:xne,WriteBatch:Rne,DocumentReference:wa,DocumentSnapshot:SI,Query:Ys,QueryDocumentSnapshot:DI,QuerySnapshot:tU,CollectionReference:k_,FieldPath:nU,FieldValue:ep,setLogLevel:function wVe(n){!function cOe(n){md.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Nne(n,e){return function DVe(n,e=uf){return new Lt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function rU(n,e){return Nne(n,e).pipe(Ve(t=>({payload:t,type:"query"})))}!function SVe(n){(function AVe(n,e){n.INTERNAL.registerComponent(new Ho.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},TVe)))})(n,(e,t)=>new Dne(e,t,new IVe)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Ol.A);class kne{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Vne(r,t);return new Lne(i,s,this.afs)}snapshotChanges(){return function xVe(n,e){return Nne(n,e).pipe(Hu(void 0),RV(),Ve(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ki)}valueChanges(e={}){return this.snapshotChanges().pipe(Ve(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return $n(this.ref.get(e)).pipe(ki)}}function RD(n,e){return rU(n,e).pipe(Hu(void 0),RV(),Ve(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(d=>d.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function One(n,e,t){return RD(n,t).pipe(lg((r,i)=>function RVe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PVe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iU(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iU(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iU(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),yO(),Ve(r=>r.map(i=>({type:i.type,payload:i}))))}function iU(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Fne(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Lne{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ve(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Hu(void 0),RV(),ei(([r,i])=>i.length>0||!r),Ve(([,r])=>r),ki)}auditTrail(e){return this.stateChanges(e).pipe(lg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Fne(e);return One(this.query,t,this.afs.schedulers.outsideAngular).pipe(ki)}valueChanges(e={}){return rU(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ki)}get(e){return $n(this.query.get(e)).pipe(ki)}add(e){return this.ref.add(e)}doc(e){return new kne(this.ref.doc(e),this.afs)}}class MVe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RD(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(t=>t.filter(r=>e.indexOf(r.type)>-1)),ei(t=>t.length>0),ki):RD(this.query,this.afs.schedulers.outsideAngular).pipe(ki)}auditTrail(e){return this.stateChanges(e).pipe(lg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Fne(e);return One(this.query,t,this.afs.schedulers.outsideAngular).pipe(ki)}valueChanges(e={}){return rU(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ki)}get(e){return $n(this.query.get(e)).pipe(ki)}}const NVe=new ve("angularfire2.enableFirestorePersistence"),kVe=new ve("angularfire2.firestore.persistenceSettings"),OVe=new ve("angularfire2.firestore.settings"),FVe=new ve("angularfire2.firestore.use-emulator");function Vne(n,e=t=>t){return{query:e(n),ref:n}}let LVe=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,u,d,m,y,b,T,P,B,V){this.schedulers=l;const Q=DS(t,a,r),be=u;d&&xV(Q,a,m,b,T,P,y,B),[this.firestore,this.persistenceEnabled$]=bV(`${Q.name}.firestore`,"AngularFirestore",Q.name,()=>{const Be=a.runOutsideAngular(()=>Q.firestore());if(s&&Be.settings(s),be&&Be.useEmulator(...be),i&&!lT(o)){const je=()=>{try{return $n(Be.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(H){return typeof console<"u"&&console.warn(H),Xe(!1)}};return[Be,a.runOutsideAngular(je)]}return[Be,Xe(!1)]},[s,be,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Vne(i,r),a=this.schedulers.ngZone.run(()=>s);return new Lne(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new MVe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new kne(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Ae(VE),Ae(BE,8),Ae(NVe,8),Ae(OVe,8),Ae(Bs),Ae(_t),Ae(Ag),Ae(kVe,8),Ae(FVe,8),Ae(UE,8),Ae(wV,8),Ae(CV,8),Ae(TV,8),Ae(AV,8),Ae(SV,8),Ae(DV,8),Ae(vA,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const VVe=["determinateSpinner"];function BVe(n,e){if(1&n&&(la(),De(0,"svg",11),ln(1,"circle",12),Me()),2&n){const t=gt();Jr("viewBox",t._viewBox()),Oe(),Nv("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Jr("r",t._circleRadius())}}const UVe=new ve("mat-progress-spinner-default-options",{providedIn:"root",factory:function jVe(){return{diameter:Bne}}}),Bne=100;let HVe=(()=>{class n{_elementRef=O(lr);_noopAnimations;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";_determinateCircle;constructor(){const t=O(mc,{optional:!0}),r=O(UVe);this._noopAnimations="NoopAnimations"===t&&!!r&&!r._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}_value=0;get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}_diameter=Bne;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,i){if(1&r&&Qm(VVe,5),2&r){let s;bc(s=Ec())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,i){2&r&&(Jr("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),bC("mat-"+i.color),Nv("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),Es("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",wN],diameter:[2,"diameter","diameter",wN],strokeWidth:[2,"strokeWidth","strokeWidth",wN]},exportAs:["matProgressSpinner"],standalone:!0,features:[Uh,Is],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,i){if(1&r&&(Ut(0,BVe,2,8,"ng-template",null,0,m5),De(2,"div",2,1),la(),De(4,"svg",3),ln(5,"circle",4),Me()(),Ah(),De(6,"div",5)(7,"div",6)(8,"div",7),Ov(9,8),Me(),De(10,"div",9),Ov(11,8),Me(),De(12,"div",10),Ov(13,8),Me()()()),2&r){const s=QM(1);Oe(4),Jr("viewBox",i._viewBox()),Oe(),Nv("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),Jr("r",i._circleRadius()),Oe(4),rt("ngTemplateOutlet",s),Oe(2),rt("ngTemplateOutlet",s),Oe(2),rt("ngTemplateOutlet",s)}},dependencies:[t6],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return n})(),Une=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr]})}return n})();const YVe=new ve("MatFormField");let xI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr,W9,Wr]})}return n})();function jne(n,e){return e?t=>fb(e.pipe(Cs(1),function XVe(){return me((n,e)=>{n.subscribe(Pe(e,us))})}()),t.pipe(jne(n))):$i((t,r)=>n(t,r).pipe(Cs(1),C8(t)))}const JVe=["panel"],e2e=["*"];function t2e(n,e){if(1&n){const t=vc();De(0,"div",1,0),Dn("@panelAnimation.done",function(i){return ji(t),zi(gt()._animationDone.next(i))}),da(2),Me()}if(2&n){const t=e.id,r=gt();bC(r._classList),Es("mat-mdc-autocomplete-visible",r.showPanel)("mat-mdc-autocomplete-hidden",!r.showPanel)("mat-primary","primary"===r._color)("mat-accent","accent"===r._color)("mat-warn","warn"===r._color),rt("id",r.id)("@panelAnimation",r.isOpen?"visible":"hidden"),Jr("aria-label",r.ariaLabel||null)("aria-labelledby",r._getPanelAriaLabelledby(t))}}const n2e=Ub("panelAnimation",[jb("void, hidden",qs({opacity:0,transform:"scaleY(0.8)"})),Qu(":enter, hidden => visible",[RO([Ku("0.03s linear",qs({opacity:1})),Ku("0.12s cubic-bezier(0, 0, 0.2, 1)",qs({transform:"scaleY(1)"}))])]),Qu(":leave, visible => hidden",[Ku("0.075s linear",qs({opacity:0}))])]);class r2e{source;option;constructor(e,t){this.source=e,this.option=t}}const zne=new ve("mat-autocomplete-default-options",{providedIn:"root",factory:function i2e(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let s2e=(()=>{class n{_changeDetectorRef=O(wc);_elementRef=O(lr);_defaults=O(zne);_activeOptionChanges=kt.EMPTY;_animationDone=new Fn;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(t){this._color=t,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new Fn;opened=new Fn;closed=new Fn;optionActivated=new Fn;set classList(t){this._classList=t,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}id=O(Ig).getId("mat-autocomplete-");inertGroups;constructor(){const t=O(Gs);this.inertGroups=t?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new GCe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const r=new r2e(this,t);this.optionSelected.emit(r)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_skipPredicate(){return!1}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(r,i,s){if(1&r&&(DC(s,OK,5),DC(s,NK,5)),2&r){let o;bc(o=Ec())&&(i.options=o),bc(o=Ec())&&(i.optionGroups=o)}},viewQuery:function(r,i){if(1&r&&(Qm(Ba,7),Qm(JVe,5)),2&r){let s;bc(s=Ec())&&(i.template=s.first),bc(s=Ec())&&(i.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",rs],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",rs],requireSelection:[2,"requireSelection","requireSelection",rs],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",rs],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",rs]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[ur([{provide:MK,useExisting:n}]),Uh,Is],ngContentSelectors:e2e,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(r,i){1&r&&(Wh(),Ut(0,t2e,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[n2e]},changeDetection:0})}return n})();const o2e={provide:Ka,useExisting:Hn(()=>$ne),multi:!0},Hne=new ve("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const n=O(yo);return()=>n.scrollStrategies.reposition()}}),l2e={provide:Hne,deps:[yo],useFactory:function a2e(n){return()=>n.scrollStrategies.reposition()}};let $ne=(()=>{class n{_injector=O(Sn);_element=O(lr);_overlay=O(yo);_viewContainerRef=O(Bo);_zone=O(_t);_changeDetectorRef=O(wc);_dir=O(Ob,{optional:!0});_formField=O(YVe,{optional:!0,host:!0});_document=O(bn);_viewportRuler=O(dO);_scrollStrategy=O(Hne);_renderer=O(Ua);_defaults=O(zne,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new E;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=kt.EMPTY;_breakpointObserver=O(q9);_handsetLandscapeSubscription=kt.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new E;_windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&vO(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return qu(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(ei(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(ei(()=>this._overlayAttached)):Xe()).pipe(Ve(t=>t instanceof kK?t:null))}optionSelections=pb(()=>{const t=this.autocomplete?this.autocomplete.options:null;return t?t.changes.pipe(Hu(t),dn(()=>qu(...t.map(r=>r.onSelectionChange)))):this._initialized.pipe(dn(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Lt(t=>{const r=s=>{const o=Sl(s),a=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,l=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&o!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!a||!a.contains(o))&&(!l||!l.contains(o))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(o)&&t.next(s)},i=[this._renderer.listen("document","click",r),this._renderer.listen("document","auxclick",r),this._renderer.listen("document","touchend",r)];return()=>{i.forEach(s=>s())}})}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const r=t.keyCode,i=ff(t);if(27===r&&!i&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===r&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===r||40===r;9===r||o&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let r=t.target,i=r.value;if("number"===r.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),i){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&i!==this._getDisplayValue(s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===t.target){const s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const t=new Lt(i=>{Mu(()=>{i.next()},{injector:this._injector})}),r=this.autocomplete.options.changes.pipe(ti(()=>this._positionStrategy.reapplyLastPosition()),function ZVe(n,e=uf){const t=P9(n,e);return jne(()=>t)}(0));return qu(t,r).pipe(dn(()=>this._zone.run(()=>{const i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Cs(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(t){const r=this.autocomplete;return r&&r.displayWith?r.displayWith(t):t}_assignOptionValue(t){const r=this._getDisplayValue(t);null==t&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(r??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const r=this.autocomplete,i=t?t.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),r._emitSelectEvent(i),this._element.nativeElement.focus()):r.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),r._animationDone?r._animationDone.pipe(Cs(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,r){this.autocomplete?.options?.forEach(i=>{i!==t&&i.selected&&i.deselect(r)})}_openPanelInternal(t=this._element.nativeElement.value){this._attachOverlay(t),this._floatLabel(),this._trackedModal&&Y9(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(t){let r=this._overlayRef;r?(this._positionStrategy.setOrigin(this._getConnectedElement()),r.updateSize({width:this._getPanelWidth()})):(this._portal=new pO(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),r=this._overlay.create(this._getOverlayConfig()),this._overlayRef=r,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&r&&r.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe("(max-width: 959.98px) and (orientation: landscape)").subscribe(s=>{s.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),r&&!r.hasAttached()&&(r.attach(this._portal),this._valueOnAttach=t,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=t=>{(27===t.keyCode&&!ff(t)||38===t.keyCode&&ff(t,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),t.stopPropagation(),t.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new wO({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const r=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}];let o;o="above"===this.position?s:"below"===this.position?r:[...r,...s],t.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let r=-1;for(let i=0;i<t.options.length;i++)if(!t.options.get(i).disabled){r=i;break}t._keyManager.setActiveItem(r)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_scrollToOption(t){const r=this.autocomplete,i=function ZTe(n,e,t){if(t.length){let r=e.toArray(),i=t.toArray(),s=0;for(let o=0;o<n+1;o++)r[o].group&&r[o].group===i[s]&&s++;return s}return 0}(t,r.options,r.optionGroups);if(0===t&&1===i)r._setScrollTop(0);else if(r.panel){const s=r.options.toArray()[t];if(s){const o=s._getHostElement(),a=function JTe(n,e,t,r){return n<t?n:n+e>t+r?Math.max(0,n-r+e):t}(o.offsetTop,o.offsetHeight,r._getScrollTop(),r.panel.nativeElement.offsetHeight);r._setScrollTop(a)}}}_trackedModal=null;_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const r=this.autocomplete.id;this._trackedModal&&vO(this._trackedModal,"aria-owns",r),Y9(t,"aria-owns",r),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(vO(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(r,i){1&r&&Dn("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(o){return i._handleInput(o)})("keydown",function(o){return i._handleKeydown(o)})("click",function(){return i._handleClick()}),2&r&&Jr("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",rs]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[ur([o2e]),Uh,ts]})}return n})(),c2e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[l2e],imports:[pA,Cg,Wr,lA,Cg,Wr]})}return n})();function Zc(n){return Array.isArray?Array.isArray(n):"[object Array]"===qne(n)}function Hl(n){return"string"==typeof n}function Wne(n){return"number"==typeof n}function Gne(n){return"object"==typeof n}function Qo(n){return null!=n}function sU(n){return!n.trim().length}function qne(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const y2e=n=>`Missing ${n} property in key`,v2e=n=>`Property 'weight' in key '${n}' must be a positive integer`,Kne=Object.prototype.hasOwnProperty;class b2e{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=Qne(r);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Qne(n){let e=null,t=null,r=null,i=1,s=null;if(Hl(n)||Zc(n))r=n,e=Yne(n),t=oU(n);else{if(!Kne.call(n,"name"))throw new Error(y2e("name"));const o=n.name;if(r=o,Kne.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(v2e(o));e=Yne(o),t=oU(o),s=n.getFn}return{path:e,id:t,weight:i,src:r,getFn:s}}function Yne(n){return Zc(n)?n:n.split(".")}function oU(n){return Zc(n)?n.join("."):n}var Ft={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function E2e(n,e){let t=[],r=!1;const i=(s,o,a)=>{if(Qo(s))if(o[a]){const c=s[o[a]];if(!Qo(c))return;if(a===o.length-1&&(Hl(c)||Wne(c)||function f2e(n){return!0===n||!1===n||function p2e(n){return Gne(n)&&null!==n}(n)&&"[object Boolean]"==qne(n)}(c)))t.push(function h2e(n){return null==n?"":function d2e(n){if("string"==typeof n)return n;let e=n+"";return"0"==e&&1/n==-1/0?"-0":e}(n)}(c));else if(Zc(c)){r=!0;for(let u=0,d=c.length;u<d;u+=1)i(c[u],o,a+1)}else o.length&&i(c,o,a+1)}else t.push(s)};return i(n,Hl(e)?e.split("."):e,0),r?t:t[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const I2e=/[^ ]+/g;class aU{constructor({getFn:e=Ft.getFn,fieldNormWeight:t=Ft.fieldNormWeight}={}){this.norm=function w2e(n=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(I2e).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*n),a=parseFloat(Math.round(o*r)/r);return t.set(s,a),a},clear(){t.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Hl(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Hl(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Qo(e)||sU(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Qo(o))if(Zc(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(Qo(u))if(Hl(u)&&!sU(u)){let d={v:u,i:c,n:this.norm.get(u)};a.push(d)}else Zc(u)&&u.forEach((d,m)=>{l.push({nestedArrIndex:m,value:d})})}r.$[s]=a}else if(Hl(o)&&!sU(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Xne(n,e,{getFn:t=Ft.getFn,fieldNormWeight:r=Ft.fieldNormWeight}={}){const i=new aU({getFn:t,fieldNormWeight:r});return i.setKeys(n.map(Qne)),i.setSources(e),i.create(),i}function C2e(n,{getFn:e=Ft.getFn,fieldNormWeight:t=Ft.fieldNormWeight}={}){const{keys:r,records:i}=n,s=new aU({getFn:e,fieldNormWeight:t});return s.setKeys(r),s.setIndexRecords(i),s}function PD(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=Ft.distance,ignoreLocation:s=Ft.ignoreLocation}={}){const o=e/n.length;if(s)return o;const a=Math.abs(r-t);return i?o+a/i:a?1:o}function S2e(n){let e={};for(let t=0,r=n.length;t<r;t+=1){const i=n.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}class Zne{constructor(e,{location:t=Ft.location,threshold:r=Ft.threshold,distance:i=Ft.distance,includeMatches:s=Ft.includeMatches,findAllMatches:o=Ft.findAllMatches,minMatchCharLength:a=Ft.minMatchCharLength,isCaseSensitive:l=Ft.isCaseSensitive,ignoreLocation:c=Ft.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(m,y)=>{this.chunks.push({pattern:m,alphabet:S2e(m),startIndex:y})},d=this.pattern.length;if(d>32){let m=0;const y=d%32,b=d-y;for(;m<b;)u(this.pattern.substr(m,32),m),m+=32;if(y){const T=d-32;u(this.pattern.substr(T),T)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let b={isMatch:!0,score:0};return r&&(b.indices=[[0,e.length-1]]),b}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:T,startIndex:P})=>{const{isMatch:B,score:V,indices:Q}=function A2e(n,e,t,{location:r=Ft.location,distance:i=Ft.distance,threshold:s=Ft.threshold,findAllMatches:o=Ft.findAllMatches,minMatchCharLength:a=Ft.minMatchCharLength,includeMatches:l=Ft.includeMatches,ignoreLocation:c=Ft.ignoreLocation}={}){if(e.length>32)throw new Error("Pattern length exceeds max of 32.");const u=e.length,d=n.length,m=Math.max(0,Math.min(r,d));let y=s,b=m;const T=a>1||l,P=T?Array(d):[];let B;for(;(B=n.indexOf(e,b))>-1;){let H=PD(e,{currentLocation:B,expectedLocation:m,distance:i,ignoreLocation:c});if(y=Math.min(H,y),b=B+u,T){let L=0;for(;L<u;)P[B+L]=1,L+=1}}b=-1;let V=[],Q=1,be=u+d;const Be=1<<u-1;for(let H=0;H<u;H+=1){let L=0,W=be;for(;L<W;)PD(e,{errors:H,currentLocation:m+W,expectedLocation:m,distance:i,ignoreLocation:c})<=y?L=W:be=W,W=Math.floor((be-L)/2+L);be=W;let J=Math.max(1,m-W+1),ne=o?d:Math.min(m+W,d)+u,re=Array(ne+2);re[ne+1]=(1<<H)-1;for(let Vr=ne;Vr>=J;Vr-=1){let ea=Vr-1,it=t[n.charAt(ea)];if(T&&(P[ea]=+!!it),re[Vr]=(re[Vr+1]<<1|1)&it,H&&(re[Vr]|=(V[Vr+1]|V[Vr])<<1|1|V[Vr+1]),re[Vr]&Be&&(Q=PD(e,{errors:H,currentLocation:ea,expectedLocation:m,distance:i,ignoreLocation:c}),Q<=y)){if(y=Q,b=ea,b<=m)break;J=Math.max(1,2*m-b)}}if(PD(e,{errors:H+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:c})>y)break;V=re}const je={isMatch:b>=0,score:Math.max(.001,Q)};if(T){const H=function T2e(n=[],e=Ft.minMatchCharLength){let t=[],r=-1,i=-1,s=0;for(let o=n.length;s<o;s+=1){let a=n[s];a&&-1===r?r=s:!a&&-1!==r&&(i=s-1,i-r+1>=e&&t.push([r,i]),r=-1)}return n[s-1]&&s-r>=e&&t.push([r,s-1]),t}(P,a);H.length?l&&(je.indices=H):je.isMatch=!1}return je}(e,b,T,{location:i+P,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});B&&(m=!0),d+=V,B&&Q&&(u=[...u,...Q])});let y={isMatch:m,score:m?d/this.chunks.length:1};return m&&r&&(y.indices=u),y}}class kd{constructor(e){this.pattern=e}static isMultiMatch(e){return Jne(e,this.multiRegex)}static isSingleMatch(e){return Jne(e,this.singleRegex)}search(){}}function Jne(n,e){const t=n.match(e);return t?t[1]:null}class ere extends kd{constructor(e,{location:t=Ft.location,threshold:r=Ft.threshold,distance:i=Ft.distance,includeMatches:s=Ft.includeMatches,findAllMatches:o=Ft.findAllMatches,minMatchCharLength:a=Ft.minMatchCharLength,isCaseSensitive:l=Ft.isCaseSensitive,ignoreLocation:c=Ft.ignoreLocation}={}){super(e),this._bitapSearch=new Zne(e,{location:t,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class tre extends kd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r,t=0;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+s,i.push([r,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const lU=[class D2e extends kd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},tre,class R2e extends kd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class P2e extends kd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class N2e extends kd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class M2e extends kd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class x2e extends kd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=-1===e.indexOf(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},ere],nre=lU.length,k2e=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,L2e=new Set([ere.type,tre.type]),cU=[];function uU(n,e){for(let t=0,r=cU.length;t<r;t+=1){let i=cU[t];if(i.condition(n,e))return new i(n,e)}return new Zne(n,e)}const MD_AND="$and",hU=n=>!(!n.$and&&!n.$or),rre=n=>({[MD_AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function ire(n,e,{auto:t=!0}={}){const r=i=>{let s=Object.keys(i);const o=(n=>!!n.$path)(i);if(!o&&s.length>1&&!hU(i))return r(rre(i));if((n=>!Zc(n)&&Gne(n)&&!hU(n))(i)){const l=o?i.$path:s[0],c=o?i.$val:i[l];if(!Hl(c))throw new Error((n=>`Invalid value for key ${n}`)(l));const u={keyId:oU(l),pattern:c};return t&&(u.searcher=uU(c,e)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=i[l];Zc(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return hU(n)||(n=rre(n)),r(n)}function H2e(n,e){const t=n.matches;e.matches=[],Qo(t)&&t.forEach(r=>{if(!Qo(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function $2e(n,e){e.score=n.score}let fU=(()=>{class n{constructor(t,r={},i){this.options={...Ft,...r},this._keyStore=new b2e(this.options.keys),this.setCollection(t,i)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof aU))throw new Error("Incorrect 'index' type");this._myIndex=r||Xne(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Qo(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let i=0,s=this._docs.length;i<s;i+=1){const o=this._docs[i];t(o,i)&&(this.removeAt(i),i-=1,s-=1,r.push(o))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options;let c=Hl(t)?Hl(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function z2e(n,{ignoreFieldNorm:e=Ft.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=r})}(c,{ignoreFieldNorm:l}),o&&c.sort(a),Wne(r)&&r>-1&&(c=c.slice(0,r)),function W2e(n,e,{includeMatches:t=Ft.includeMatches,includeScore:r=Ft.includeScore}={}){const i=[];return t&&i.push(H2e),r&&i.push($2e),n.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}(c,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(t){const r=uU(t,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:o,i:a,n:l})=>{if(!Qo(o))return;const{isMatch:c,score:u,indices:d}=r.searchIn(o);c&&s.push({item:o,idx:a,matches:[{score:u,value:o,norm:l,indices:d}]})}),s}_searchLogical(t){const r=ire(t,this.options),i=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:y}=l,b=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:y});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}const d=[];for(let m=0,y=l.children.length;m<y;m+=1){const T=i(l.children[m],c,u);if(T.length)d.push(...T);else if("$and"===l.operator)return[]}return d},o={},a=[];return this._myIndex.records.forEach(({$:l,i:c})=>{if(Qo(l)){let u=i(r,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},a.push(o[c])),u.forEach(({matches:d})=>{o[c].matches.push(...d)}))}}),a}_searchObjectList(t){const r=uU(t,this.options),{keys:i,records:s}=this._myIndex,o=[];return s.forEach(({$:a,i:l})=>{if(!Qo(a))return;let c=[];i.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:a[d],searcher:r}))}),c.length&&o.push({idx:l,item:a,matches:c})}),o}_findMatches({key:t,value:r,searcher:i}){if(!Qo(r))return[];let s=[];if(Zc(r))r.forEach(({v:o,i:a,n:l})=>{if(!Qo(o))return;const{isMatch:c,score:u,indices:d}=i.searchIn(o);c&&s.push({score:u,key:t,value:o,idx:a,norm:l,indices:d})});else{const{v:o,n:a}=r,{isMatch:l,score:c,indices:u}=i.searchIn(o);l&&s.push({score:c,key:t,value:o,norm:a,indices:u})}return s}}return n.version="7.0.0",n.createIndex=Xne,n.parseIndex=C2e,n.config=Ft,n})();fU.parseQuery=ire,function B2e(...n){cU.push(...n)}(class V2e{constructor(e,{isCaseSensitive:t=Ft.isCaseSensitive,includeMatches:r=Ft.includeMatches,minMatchCharLength:i=Ft.minMatchCharLength,ignoreLocation:s=Ft.ignoreLocation,findAllMatches:o=Ft.findAllMatches,location:a=Ft.location,threshold:l=Ft.threshold,distance:c=Ft.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function F2e(n,e={}){return n.split("|").map(t=>{let r=t.trim().split(k2e).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,c=-1;for(;!l&&++c<nre;){const u=lU[c];let d=u.isMultiMatch(a);d&&(i.push(new u(d,e)),l=!0)}if(!l)for(c=-1;++c<nre;){const u=lU[c];let d=u.isSingleMatch(a);if(d){i.push(new u(d,e));break}}}return i})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const u=t[l];o.length=0,s=0;for(let d=0,m=u.length;d<m;d+=1){const y=u[d],{isMatch:b,indices:T,score:P}=y.search(e);if(!b){a=0,s=0,o.length=0;break}s+=1,a+=P,r&&(L2e.has(y.constructor.type)?o=[...o,...T]:o.push(T))}if(s){let d={isMatch:!0,score:a/s};return r&&(d.indices=o),d}}return{isMatch:!1,score:1}}});let sre=(()=>{class n{transform(t,r=0){const i=parseFloat(t);return isNaN(i)?t:-1===r?`${i.toFixed(0)} \u5143`:i<1e3?`${i.toFixed(r)} \u516c\u5c3a`:`${(i/1e3).toFixed(r)} \u516c\u91cc`}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Si({name:"round",type:n,pure:!0})}}return n})(),G2e=(()=>{class n{transform(t){return null==t||""===t?"\u66ab\u7121\u8cc7\u8a0a":t.toString()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Si({name:"emptyInfo",type:n,pure:!0})}}return n})();function q2e(n,e){1&n&&(De(0,"div",17),ut(1," \u65b0\u54c1 "),Me())}function K2e(n,e){1&n&&(De(0,"div",18),ut(1," \u7279\u50f9\u4e2d "),Me())}function Q2e(n,e){if(1&n&&(De(0,"div")(1,"div",19)(2,"span",20),ut(3,"\u50f9\u683c(NT$): "),Me(),De(4,"span",21),ut(5),Me(),De(6,"span",22),ut(7,"\u2192"),Me(),De(8,"span",23),ut(9),ha(10,"round"),Me()(),De(11,"p",24),ut(12),ha(13,"emptyInfo"),Me(),De(14,"p",24),ut(15),ha(16,"emptyInfo"),Me()()),2&n){const t=gt().$implicit,r=gt(5);Oe(5),bl(r.getFoodDetail711(t).originalPrice),Oe(4),Qn(" ",PC(10,4,r.getFoodDetail711(t).discountedPrice,-1)," "),Oe(3),Qn("\u5546\u54c1\u63cf\u8ff0: ",Gh(13,7,r.getFoodDetail711(t).content),""),Oe(3),Qn("\u5361\u8def\u91cc(kcal): ",Gh(16,9,r.getFoodDetail711(t).kcal),"")}}function Y2e(n,e){1&n&&(De(0,"div")(1,"div",19)(2,"p",24),ut(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),Me()()())}function X2e(n,e){if(1&n&&(De(0,"li")(1,"div",8),ln(2,"img",9),De(3,"div",10)(4,"div",11)(5,"h3",12),ut(6),Me(),De(7,"div",13),ut(8),Me()(),De(9,"div",14),Ut(10,q2e,2,0,"div",15)(11,K2e,2,0,"div",16),Me(),Ut(12,Q2e,17,11,"div",0)(13,Y2e,4,0,"div",0),Me()()()),2&n){const t=e.$implicit,r=gt(5);Oe(2),rt("src",r.getFoodDetail711(t).image,Fo)("alt",r.getFoodDetail711(t).name),Oe(4),Qn(" ",t.ItemName," "),Oe(2),Qn(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),Oe(2),rt("ngIf","True"===r.getFoodDetail711(t).new),Oe(),rt("ngIf","True"===r.getFoodDetail711(t).special_sale),Oe(),rt("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetail711(t).image),Oe(),rt("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetail711(t).image)}}function Z2e(n,e){if(1&n&&(De(0,"div",4)(1,"div",5)(2,"h3",6),ut(3),Me()(),De(4,"ul",7),Ut(5,X2e,14,8,"li",2),Me()()),2&n){const t=gt().$implicit,r=gt(3);Oe(3),Qn(" ",t.Name," "),Oe(2),rt("ngForOf",r.itemsBySubCategory[t.Name])}}function J2e(n,e){if(1&n&&(Ha(0),Ut(1,Z2e,6,2,"div",3),$a()),2&n){const t=e.$implicit,r=gt(3);Oe(),rt("ngIf",r.itemsBySubCategory[t.Name]&&r.itemsBySubCategory[t.Name].length>0)}}function eBe(n,e){if(1&n&&(Ha(0),De(1,"h2",1),ut(2),Me(),Ut(3,J2e,2,1,"ng-container",2),$a()),2&n){const t=gt(2);Oe(2),bl(t.category.Name),Oe(),rt("ngForOf",t.subCategories)}}function tBe(n,e){if(1&n&&(De(0,"div")(1,"p",24),ut(2),ha(3,"emptyInfo"),Me(),De(4,"p",24),ut(5),ha(6,"emptyInfo"),Me()()),2&n){const t=gt().$implicit,r=gt(5);Oe(2),Qn("\u5546\u54c1\u63cf\u8ff0: ",Gh(3,2,r.getFoodDetailFamilyMart(t).Description),""),Oe(3),Qn("\u5361\u8def\u91cc(kcal): ",Gh(6,4,r.getFoodDetailFamilyMart(t).Calories),"")}}function nBe(n,e){1&n&&(De(0,"div")(1,"div",19)(2,"p",24),ut(3,"\u5546\u54c1\u63cf\u8ff0: \u66ab\u7121\u6b64\u5546\u54c1\u8cc7\u8a0a"),Me()()())}function rBe(n,e){if(1&n&&(De(0,"li")(1,"div",26),ln(2,"img",9),De(3,"div",10)(4,"div",11)(5,"h3",12),ut(6),Me(),De(7,"div",27),ut(8),Me()(),Ut(9,tBe,7,6,"div",0)(10,nBe,4,0,"div",0),Me()()()),2&n){const t=e.$implicit,r=gt(5);Oe(2),rt("src",r.getFoodDetailFamilyMart(t).picture_url,Fo)("alt",r.getFoodDetailFamilyMart(t).title),Oe(4),Qn(" ",t.ItemName," "),Oe(2),Qn(" \u5269\u9918\u6578\u91cf: ",t.RemainingQty," "),Oe(),rt("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"!==r.getFoodDetailFamilyMart(t).picture_url),Oe(),rt("ngIf","assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png"===r.getFoodDetailFamilyMart(t).picture_url)}}function iBe(n,e){if(1&n&&(De(0,"div",4)(1,"div",5)(2,"h3",25),ut(3),Me()(),De(4,"ul",7),Ut(5,rBe,11,6,"li",2),Me()()),2&n){const t=gt().$implicit,r=gt(3);Oe(3),Qn(" ",t.name," "),Oe(2),rt("ngForOf",r.itemsBySubCategory[t.name])}}function sBe(n,e){if(1&n&&(Ha(0),Ut(1,iBe,6,2,"div",3),$a()),2&n){const t=e.$implicit,r=gt(3);Oe(),rt("ngIf",r.itemsBySubCategory[t.name]&&r.itemsBySubCategory[t.name].length>0)}}function oBe(n,e){if(1&n&&(Ha(0),De(1,"h2",1),ut(2),Me(),Ut(3,sBe,2,1,"ng-container",2),$a()),2&n){const t=gt(2);Oe(2),bl(t.category.name),Oe(),rt("ngForOf",t.subCategories)}}function aBe(n,e){if(1&n&&(De(0,"div"),Ut(1,eBe,4,2,"ng-container",0)(2,oBe,4,2,"ng-container",0),Me()),2&n){const t=gt();Oe(),rt("ngIf",t.category.Name),Oe(),rt("ngIf",t.category.name)}}let lBe=(()=>{class n{constructor(t){this.sevenElevenRequestService=t,this.subCategories=[],this.itemsBySubCategory={}}ngOnInit(){}ngOnChanges(t){(t.category||t.store)&&this.loadSubCategories()}loadSubCategories(){if(this.store&&this.category)if(this.store.StoreName)this.subCategories=this.category.Children,this.loadItemsBySubCategory();else if(this.store.name){this.subCategories=this.category.categories;var t=[];this.subCategories.forEach(r=>{t.push(...r.products.map(i=>({ItemName:i.name,RemainingQty:i.qty}))),this.itemsBySubCategory[r.name]=t||[],t=[]})}}loadItemsBySubCategory(){this.store&&this.sevenElevenRequestService.getItemsByStoreNo(this.store.StoreNo).subscribe(t=>{if(t.isSuccess&&t.element.StoreStockItem){const r=t.element.StoreStockItem.CategoryStockItems;this.subCategories.forEach(i=>{const s=[];r.forEach(o=>{o.Name===i.Name&&s.push(...o.ItemList)}),this.itemsBySubCategory[i.Name]=s||[]})}})}getDiscountedPrice(t){const r=parseFloat(t.replace("NT$","").trim()),s=(new Date).getHours();let o=r;return o*=s>=19&&s<20?.8:s>=10&&s<18||s>=20||s<3?.65:.8,o.toString()}getFoodDetail711(t){const s=new fU(this.foodDetails,{includeScore:!0,threshold:.3,keys:["name"]}).search(t.ItemName),o=s.length>0?s[0].item:{category:"",content:"",image:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png",kcal:"",name:"",new:"False",price:"",special_sale:"False"},a=this.getDiscountedPrice(o.price);return o.discountedPrice=a,o.originalPrice=o.price,o}getFoodDetailFamilyMart(t){const s=new fU(this.foodDetails,{includeScore:!0,threshold:.2,keys:["title"]}).search(t.ItemName);return s.length>0?s[0].item:{category:"",title:"",picture_url:"assets/\u6b64\u5546\u54c1\u66ab\u7121\u5716\u7247.png","Protein (g)":"","Carb (g)":"","Calories (kcal)":"","Fat (g)":"",Description:""}}static{this.\u0275fac=function(r){return new(r||n)(Re(VZ))}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-display"]],inputs:{store:"store",category:"category",foodDetails:"foodDetails"},features:[ts],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-2xl","font-bold","mb-4","text-primary-default"],[4,"ngFor","ngForOf"],["class","sub-category-item bg-white border border-gray-100 p-6 mb-8 rounded-lg shadow-lg",4,"ngIf"],[1,"sub-category-item","bg-white","border","border-gray-100","p-6","mb-8","rounded-lg","shadow-lg"],[1,"mb-4"],[1,"text-2xl","font-bold","text-primary-default","text-primary-light"],[1,"space-y-6","sm:space-y-4"],[1,"border","border-gray-300","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"object-contain","rounded-lg","mb-4","sm:mb-0","sm:mr-6","shadow-md","w-24","h-24","sm:w-32","sm:h-32",3,"src","alt"],[1,"flex-1"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-2"],[1,"text-sm","sm:text-lg","font-semibold","text-gray-600"],[1,"text-center","inline-block","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"flex","space-x-2","mb-2"],["class","inline-block bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],["class","inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[1,"inline-block","bg-red-100","text-red-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"inline-block","bg-yellow-100","text-yellow-800","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"text-sm","sm:text-base","font-semibold","text-gray-800","mb-2"],[1,"text-gray-800"],[1,"line-through","text-gray-500"],[1,"text-red-600","mx-2"],[1,"text-red-600"],[1,"text-xs","sm:text-sm","text-gray-500","mb-1"],[1,"text-2xl","font-bold","text-primary-default"],[1,"border","border-gray-300","food-item","flex","flex-col","sm:flex-row","items-start","p-4","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow"],[1,"text-center","bg-green-100","text-green-800","text-xs","sm:text-sm","font-semibold","px-4","py-2","rounded-full"]],template:function(r,i){1&r&&Ut(0,aBe,3,2,"div",0),2&r&&rt("ngIf",i.subCategories.length>0)},dependencies:[FN,aT,sre,G2e]})}}return n})();const ore=n=>({opacity:n});function cBe(n,e){1&n&&(De(0,"div"),ut(1," \u770b\u770b\u9644\u8fd1\u6709\u5565\u597d\u5403\u7684\u5427\uff01 "),Me())}function uBe(n,e){1&n&&ln(0,"mat-progress-spinner",27)}function dBe(n,e){if(1&n&&(De(0,"div",30),ln(1,"img",31),De(2,"div",32)(3,"span"),ut(4),Me(),De(5,"span",33),ut(6),Me()()()),2&n){const t=gt().$implicit,r=gt();Oe(),Km("src",r.sevenElevenIconUrl,Fo),Oe(3),Qn("",t.name,"\u9580\u5e02"),Oe(2),bl(t.addr)}}function hBe(n,e){if(1&n&&(De(0,"div",30),ln(1,"img",34),De(2,"div",32)(3,"span"),ut(4),Me(),De(5,"span",33),ut(6),Me()()()),2&n){const t=gt().$implicit,r=gt();Oe(),Km("src",r.familyMartIconUrl,Fo),Oe(3),Qn("",t.name.replace("\u5e97",""),"\u9580\u5e02"),Oe(2),bl(t.addr)}}function fBe(n,e){if(1&n&&(De(0,"mat-option",28),Ut(1,dBe,7,3,"div",29)(2,hBe,7,3,"div",29),Me()),2&n){const t=e.$implicit;rt("value",t),Oe(),rt("ngIf","7-11"===t.label),Oe(),rt("ngIf","\u5168\u5bb6"===t.label)}}function pBe(n,e){if(1&n&&(De(0,"p",56),ut(1),ha(2,"round"),Me()),2&n){const t=gt(4).$implicit;Oe(),Qn(" \u8ddd\u96e2\u60a8: ",PC(2,1,t.distance,1)," ")}}function mBe(n,e){1&n&&(la(),De(0,"svg",57),ln(1,"path",58),Me())}function gBe(n,e){1&n&&(la(),De(0,"svg",59),ln(1,"path",58),Me())}function _Be(n,e){if(1&n){const t=vc();De(0,"div",61),Dn("click",function(){ji(t);const i=gt().$implicit,s=gt(4).$implicit;return zi(gt().toggleSubCategoryDetails(s,i))}),ln(1,"img",62),De(2,"div")(3,"span",63),ut(4),Me(),De(5,"div",64),ut(6),Me()()()}if(2&n){const t=gt().$implicit,r=gt(4).$implicit,i=gt();jM("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n                      ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Es("pointer-events-none",0===i.getSubCategoryTotalQty(r,t)),Oe(),Km("alt",t.Name),rt("src",t.ImageUrl,Fo)("ngStyle",nN(10,ore,0===i.getSubCategoryTotalQty(r,t)?.3:1)),Oe(3),bl(t.Name),Oe(2),Qn(" ",i.getSubCategoryTotalQty(r,t)," ")}}function yBe(n,e){if(1&n&&(Ha(0),Ut(1,_Be,7,12,"div",60),$a()),2&n){const t=e.$implicit,r=gt(4).$implicit,i=gt();Oe(),rt("ngIf",i.getSubCategoryTotalQty(r,t)>0)}}function vBe(n,e){if(1&n&&(De(0,"div",65),ln(1,"app-display",66),Me()),2&n){const t=gt(5);Oe(),rt("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetails711)}}function bBe(n,e){if(1&n){const t=vc();Ha(0),De(1,"div",40)(2,"div",41)(3,"div",42),ln(4,"img",43),Me(),De(5,"div",44)(6,"p",45),ut(7),De(8,"a",46),ln(9,"img",47),Me()(),Ut(10,pBe,3,4,"p",48),Me()(),De(11,"div",49)(12,"button",50),Dn("click",function(){ji(t);const i=gt(3).$implicit;return zi(gt().toggleFavorite(i))}),Ut(13,mBe,2,0,"svg",51)(14,gBe,2,0,"svg",52),Me()()(),De(15,"div",53)(16,"div",54),Ut(17,yBe,2,1,"ng-container",26),ha(18,"slice"),Me(),Ut(19,vBe,2,3,"div",55),Me(),$a()}if(2&n){const t=gt(3).$implicit,r=gt();Oe(4),rt("src",r.sevenElevenIconUrl,Fo),Oe(3),Qn(" 7-11",t.StoreName,"\u9580\u5e02 "),Oe(),zv("href","https://www.google.com/maps/search/7-ELEVEN",t.StoreName,"\u9580\u5e02",Fo),Oe(2),rt("ngIf",t.distance>=1),Oe(3),rt("ngIf",r.isFavorite(t)&&r.user),Oe(),rt("ngIf",!r.isFavorite(t)&&r.user),Oe(3),rt("ngForOf",rN(18,9,r.foodCategories,0,10)),Oe(2),rt("ngIf",r.selectedCategory&&r.selectedStore===t)}}function EBe(n,e){if(1&n&&(De(0,"div",39),Ut(1,bBe,20,13,"ng-container",6),Me()),2&n){const t=gt(2).$implicit;Oe(),rt("ngIf","7-11"===t.label&&t.RemainingQty>0)}}function IBe(n,e){if(1&n&&(De(0,"p",56),ut(1),ha(2,"round"),Me()),2&n){const t=gt(3).$implicit;Oe(),Qn(" \u8ddd\u96e2\u60a8: ",PC(2,1,t.distance,1)," ")}}function wBe(n,e){1&n&&(la(),De(0,"svg",57),ln(1,"path",58),Me())}function CBe(n,e){1&n&&(la(),De(0,"svg",59),ln(1,"path",58),Me())}function TBe(n,e){if(1&n){const t=vc();De(0,"div",61),Dn("click",function(){const i=ji(t).$implicit,s=gt(3).$implicit;return zi(gt().toggleSubCategoryDetails(s,i))}),ln(1,"img",62),De(2,"div")(3,"span",63),ut(4),Me(),De(5,"div",64),ut(6),Me()()()}if(2&n){const t=e.$implicit,r=gt(3).$implicit,i=gt();jM("border border-primary-light p-2 sm:p-3 md:p-4 rounded-lg text-center cursor-pointer w-full sm:w-full md:w-full\n            ",i.selectedCategory===t&&i.selectedStore===r?"bg-primary-light":"",""),Es("pointer-events-none",0===i.getFSubCategoryQty(r,t)),Oe(),Km("alt",i.getFCatName(t)),rt("src",i.getFUrl(t),Fo)("ngStyle",nN(10,ore,0===i.getFSubCategoryQty(r,t)?.3:1)),Oe(3),bl(i.getFCatName(t)),Oe(2),Qn(" ",i.getFSubCategoryQty(r,t)," ")}}function ABe(n,e){if(1&n&&(De(0,"div",69),ln(1,"app-display",70),Me()),2&n){const t=gt(4);Oe(),rt("store",t.selectedStore)("category",t.selectedCategory)("foodDetails",t.foodDetailsFamilyMart)}}function SBe(n,e){if(1&n){const t=vc();De(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",42),ln(4,"img",43),Me(),De(5,"div",44)(6,"p",45),ut(7),De(8,"a",46),ln(9,"img",47),Me()(),Ut(10,IBe,3,4,"p",48),Me()(),De(11,"div",49)(12,"button",50),Dn("click",function(){ji(t);const i=gt(2).$implicit;return zi(gt().toggleFavorite(i))}),Ut(13,wBe,2,0,"svg",51)(14,CBe,2,0,"svg",52),Me()()(),De(15,"div",54),Ut(16,TBe,7,12,"div",67),ha(17,"slice"),Me(),Ut(18,ABe,2,3,"div",68),Me()}if(2&n){const t=gt(2).$implicit,r=gt();Oe(4),rt("src",r.familyMartIconUrl,Fo),Oe(3),Qn(" ",t.name," "),Oe(),zv("href","https://www.google.com/maps/search/\u5168\u5bb6\u4fbf\u5229\u5546\u5e97",r.fStoreName(t.name),"",Fo),Oe(2),rt("ngIf",t.distance>=1),Oe(3),rt("ngIf",r.isFavorite(t)&&r.user),Oe(),rt("ngIf",!r.isFavorite(t)&&r.user),Oe(2),rt("ngForOf",rN(17,9,t.info,0,10)),Oe(2),rt("ngIf",r.selectedCategory&&r.selectedStore===t)}}function DBe(n,e){if(1&n&&(De(0,"div",36)(1,"div",37),Ut(2,EBe,2,1,"div",38)(3,SBe,19,13,"div",38),Me()()),2&n){const t=gt().$implicit;Oe(2),rt("ngIf",t.RemainingQty>0),Oe(),rt("ngIf","\u5168\u5bb6"===t.label)}}function xBe(n,e){if(1&n&&(Ha(0),Ut(1,DBe,4,2,"div",35),$a()),2&n){const t=gt();Oe(),rt("ngIf",t.totalStoresShowList.length>0)}}const RBe=[{path:"**",component:(()=>{class n{constructor(t,r,i,s,o,a,l,c){this.http=t,this.geolocationService=r,this.sevenElevenService=i,this.familyMartService=s,this.authService=o,this.loadingService=a,this.dialog=l,this.firestore=c,this.user=null,this.searchTerm="",this.searchSelectedStore=null,this.selectedStoreName="",this.foodDetails711=[],this.foodDetailsFamilyMart=[],this.storeFilter="all",this.dropDown711List=[],this.dropDownFamilyMartList=[],this.unifiedDropDownList=[],this.sevenElevenIconUrl=Io_sevenElevenUrl_icon,this.familyMartIconUrl=Io_familyMartUrl_icon,this.zipcodes=[],this.cities=[],this.filteredDistricts=[],this.zipcodeList=[],this.selectedCity=null,this.selectedDistrict=null,this.selectedZipcode=null,this.foodCategories=[],this.nearby711Stores=[],this.nearbyFamilyMartStores=[],this.totalStoresShowList=[],this.filteredStoresList=[],this.favoriteStores=[],this.searchForm=new tf({selectedStoreName:new og("")})}ngOnInit(){this.init()}getCityName(){return this.http.get("https://demeter.5fpro.com/tw/zipcodes.json").pipe(ti(r=>{this.zipcodes=r,this.cities=[...new Set(r.map(i=>i.city_name))],this.zipcodeList=[...new Set(r.map(i=>i.zipcode))]}))}onCityChange(t){this.filteredDistricts=this.zipcodes.filter(r=>r.city_name===t),this.selectedDistrict=null,this.selectedZipcode=null}onDistrictChange(t){this.selectedZipcode=t}handleError(t){switch(t.code){case 1:return"\u4f7f\u7528\u8005\u62d2\u7d55\u4f4d\u7f6e\u5b58\u53d6";case 2:return"\u7121\u6cd5\u53d6\u5f97\u4f4d\u7f6e\u8cc7\u8a0a";case 3:return"\u4f4d\u7f6e\u8acb\u6c42\u903e\u6642";default:return"\u672a\u77e5\u932f\u8aa4"}}init(){this.authService.getUser().subscribe(t=>{t&&t.emailVerified&&(this.user=t,this.loadFavoriteStores())}),this.loadingService.show(),this.sevenElevenService.getFoodDetails().subscribe(t=>{this.foodDetails711=t}),this.familyMartService.getFoodDetails().subscribe(t=>{this.foodDetailsFamilyMart=t}),this.getFamilyMartAllStore(),Xe(!0).pipe(dn(()=>this.sevenElevenService.getAccessToken()),dn(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Xe([])),Wu(t=>(console.error("Error:",t),Xe([])))).subscribe(t=>{t&&t.element?(this.foodCategories=t.element,this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}getFamilyMartAllStore(){this.familyMartService.getStores().subscribe(t=>{t.length>0&&(this.dropDownFamilyMartList=t)})}getFoodSubCategoryImage(t){for(let r of this.foodCategories)if(r.Children.find(s=>s.ID===t))return r.ImageUrl;return null}getSubCategoryTotalQty(t,r){let i=0;for(const s of t.CategoryStockItems)for(const o of r.Children)s.NodeID===o.ID&&(i+=s.RemainingQty);return i}toggleSubCategoryDetails(t,r){this.selectedCategory=r,this.selectedStore=t}onInput(t){const r=t.target.value;r.length>=2?(this.loadingService.show(),this.unifiedDropDownList=[],this.latitude||this.longitude?Xe(!0).pipe(dn(()=>this.sevenElevenService.getAccessToken()),dn(i=>i&&i.element?(sessionStorage.setItem("711Token",i.element),this.sevenElevenService.getStoreByAddress(r)):Xe([]))).subscribe(i=>{if(i&&i.isSuccess){this.dropDown711List=i.element;const s=this.dropDownFamilyMartList.map(d=>({...d,Name:d.Name.replace("\u5168\u5bb6","")})).filter(d=>d.Name.includes(r)||d.addr.includes(r)),o=this.dropDown711List.map(d=>({...d,Name:d.StoreName.replace("711","")})).filter(d=>d.Name.includes(r)||d.Address.includes(r)),a=s.map(d=>({name:d.Name,addr:d.addr,label:"\u5168\u5bb6",longitude:d.px_wgs84,latitude:d.py_wgs84}));o.map(d=>({name:d.StoreName,addr:d.Address,label:"7-11",longitude:d.Longitude,latitude:d.Latitude})).forEach(d=>{this.unifiedDropDownList.some(m=>m.name===d.name&&m.addr===d.addr)||this.unifiedDropDownList.push(d)}),a.forEach(d=>{this.unifiedDropDownList.some(m=>m.name===d.name&&m.addr===d.addr)||this.unifiedDropDownList.push(d)});const c=this.unifiedDropDownList.filter(d=>d.name.includes(r)).sort((d,m)=>(0,pd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:d.latitude,longitude:d.longitude})-(0,pd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:m.latitude,longitude:m.longitude})),u=this.unifiedDropDownList.filter(d=>d.addr.includes(r)&&!c.includes(d)).sort((d,m)=>(0,pd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:d.latitude,longitude:d.longitude})-(0,pd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:m.latitude,longitude:m.longitude}));this.unifiedDropDownList=[...c,...u],this.loadingService.hide()}},i=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",i),this.loadingService.hide()}):$n(this.geolocationService.getCurrentPosition()).pipe(dn(i=>{const o=i.coords.longitude;return this.latitude=i.coords.latitude,this.longitude=o,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Xe([])}),dn(()=>this.sevenElevenService.getAccessToken()),dn(i=>i&&i.element?(sessionStorage.setItem("711Token",i.element),this.sevenElevenService.getStoreByAddress(r)):[])).subscribe(i=>{if(i&&i.isSuccess){this.dropDown711List=i.element;const s=this.dropDownFamilyMartList.map(d=>({...d,Name:d.Name.replace("\u5168\u5bb6","")})).filter(d=>d.Name.includes(r)||d.addr.includes(r)),o=this.dropDown711List.map(d=>({...d,Name:d.StoreName.replace("711","")})).filter(d=>d.Name.includes(r)||d.Address.includes(r)),a=s.map(d=>({name:d.Name,addr:d.addr,label:"\u5168\u5bb6",longitude:d.px_wgs84,latitude:d.py_wgs84}));o.map(d=>({name:d.StoreName,addr:d.Address,label:"7-11",longitude:d.Longitude,latitude:d.Latitude})).forEach(d=>{this.unifiedDropDownList.some(m=>m.name===d.name&&m.addr===d.addr)||this.unifiedDropDownList.push(d)}),a.forEach(d=>{this.unifiedDropDownList.some(m=>m.name===d.name&&m.addr===d.addr)||this.unifiedDropDownList.push(d)});const c=this.unifiedDropDownList.filter(d=>d.name.includes(r)).sort((d,m)=>(0,pd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:d.latitude,longitude:d.longitude})-(0,pd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:m.latitude,longitude:m.longitude})),u=this.unifiedDropDownList.filter(d=>d.addr.includes(r)&&!c.includes(d)).sort((d,m)=>(0,pd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:d.latitude,longitude:d.longitude})-(0,pd.getDistance)({latitude:this.latitude,longitude:this.longitude},{latitude:m.latitude,longitude:m.longitude}));this.unifiedDropDownList=[...c,...u],this.loadingService.hide()}},i=>{console.error("API \u8acb\u6c42\u932f\u8aa4:",i),this.loadingService.hide()})):this.unifiedDropDownList=[]}onOptionSelect(t){this.searchSelectedStore=t.option.value.name,this.searchTerm=t.option.value.label+t.option.value.name.replace("\u5e97","")+"\u9580\u5e02";const s=Number(t.option.value.longitude),o=Number(t.option.value.latitude);this.loadingService.show(),$n(this.geolocationService.getCurrentPosition()).pipe(dn(a=>{const c=a.coords.longitude;return this.latitude=a.coords.latitude,this.longitude=c,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Xe([])}),dn(a=>a?this.sevenElevenService.getAccessToken():[]),dn(a=>a&&a.element?(sessionStorage.setItem("711Token",a.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Xe([]))).subscribe(a=>{a?(this.searchCombineAndTransformStores(o,s),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}onSubmit(){console.log("\u8f38\u5165\u7684\u641c\u5c0b\u95dc\u9375\u5b57:",this.searchSelectedStore)}onUseCurrentLocation(){this.unifiedDropDownList=[],this.searchTerm="",this.loadingService.show(),$n(this.geolocationService.getCurrentPosition()).pipe(dn(t=>{const i=t.coords.longitude;return this.latitude=t.coords.latitude,this.longitude=i,console.log("\u5df2\u53d6\u5f97\u4f4d\u7f6e"),Xe([])}),dn(t=>t?this.sevenElevenService.getAccessToken():[]),dn(t=>t&&t.element?(sessionStorage.setItem("711Token",t.element),console.log("Stored 711Token"),this.sevenElevenService.getFoodCategory()):Xe([]))).subscribe(t=>{t?(this.searchCombineAndTransformStores(),this.loadingService.hide()):(console.error("Failed to fetch food categories"),this.loadingService.hide())})}combineStoreList(t,r){if(this.totalStoresShowList=[],this.nearby711Stores.forEach(i=>{const s={...i,storeName:`7-11${i.StoreName}\u9580\u5e02`,label:"7-11",distance:i.Distance,remainingQty:i.RemainingQty,showDistance:!0};this.totalStoresShowList.push(s)}),this.nearbyFamilyMartStores.forEach(i=>{const s={...i,storeName:i.name,label:"\u5168\u5bb6",distance:i.distance,showDistance:!0};this.totalStoresShowList.push(s)}),t&&r){if(this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),this.totalStoresShowList[0].distance>1||0===this.totalStoresShowList[0].remainingQty)return this.dialog.open(pAe,{data:{message:"\u8a72\u9580\u5e02\u7121\u5eab\u5b58\uff0c\u8acb\u91cd\u65b0\u641c\u5c0b\u3002",imgPath:"assets/NoResult.jpg"}}).afterClosed().subscribe(s=>{this.totalStoresShowList=[],this.searchTerm=""}),void(this.totalStoresShowList=[]);this.totalStoresShowList=[{...this.totalStoresShowList[0],showDistance:!1}]}else this.totalStoresShowList.sort((i,s)=>i.distance-s.distance),console.log("\u6700\u8fd1\u7684\u5546\u5e97:",this.totalStoresShowList)}searchCombineAndTransformStores(t,r){const i=t||this.latitude,s=r||this.longitude,a={Latitude:i,Longitude:s};lk({sevenEleven:this.sevenElevenService.getNearByStoreList({CurrentLocation:{Latitude:i,Longitude:s},SearchLocation:{Latitude:i,Longitude:s}}),familyMart:this.familyMartService.getNearByStoreList(a)}).subscribe(({sevenEleven:l,familyMart:c})=>{l&&l.element&&l.element.StoreStockItemList&&(this.nearby711Stores=l.element.StoreStockItemList.sort((u,d)=>u.Distance-d.Distance)),c&&1===c.code&&(this.nearbyFamilyMartStores=c.data.sort((u,d)=>u.distance-d.distance)),t&&r?this.combineStoreList(t,r):this.combineStoreList()},l=>{console.error("Error fetching store data:",l)})}getFStoreQty(t){var r=0;return t.info.forEach(i=>{r+=i.qty}),r}getFUrl(t){return t.iconURL}getFCatName(t){return t.name}getFSubCategoryQty(t,r){return r.qty}fStoreName(t){return t?t.replace("\u5168\u5bb6",""):""}loginOrlogout(){this.user?(this.authService.logout(),this.user=null,window.location.reload()):this.dialog.open(iOe,{data:{}}).afterClosed().subscribe(r=>{r&&this.authService.getUser().subscribe(i=>{i&&i.emailVerified&&(this.user=i,this.loadFavoriteStores())})})}loadFavoriteStores(){this.user.emailVerified&&(this.firestore.collection("users").doc(this.user.uid).collection("favorites").valueChanges().subscribe(r=>{this.favoriteStores=r.map(i=>i.storeName)}),console.log("favoriteStores",this.favoriteStores))}toggleFavorite(t){if(this.user.emailVerified){const i=this.firestore.collection("users").doc(this.user.uid).collection("favorites").doc(t.storeName);this.isFavorite(t)?i.delete():i.set({storeName:t.storeName})}else console.log("\u7528\u6236\u5c1a\u672a\u767b\u5165\u6216\u4fe1\u7bb1\u672a\u9a57\u8b49")}isFavorite(t){return this.favoriteStores.includes(t.storeName)}static{this.\u0275fac=function(r){return new(r||n)(Re(sb),Re(sOe),Re(VZ),Re(oOe),Re(OZ),Re(aOe),Re(yA),Re(LVe))}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-new-search"]],decls:34,vars:11,consts:[["auto","matAutocomplete"],[1,"fixed","top-4","right-4","px-6","py-3","text-white","bg-primary-default","rounded-full","shadow-md",3,"click"],[1,"container","mx-auto","my-3","p-6","bg-primary-white","max-w-4xl"],[1,"flex","items-center","bg-primary-white","justify-center","mb-6","h-24"],["src","assets/S__222224406.jpg","alt","Friendly Superhero",1,"w-24","h-24","sm:w-16","sm:h-16","md:w-24","md:h-24"],[1,"text-primary-default","sm:text-xl","font-bold","ml-4","py-1","px-3","border-2","border-primary-default","rounded-full","bg-primary-light","inline-block"],[4,"ngIf"],["mode","indeterminate","diameter","20","class","text-primary-default",4,"ngIf"],[1,"text-xs","sm:text-sm","text-success","mb-4","text-center"],[1,"w-full",3,"ngSubmit"],[1,"flex","justify-center","w-full"],[1,"w-full","px-4","py-3"],[1,"flex","flex-col","h-12","w-full"],[1,"flex","w-full","items-stretch","rounded-lg","h-full"],["data-icon","MagnifyingGlass","data-size","24px","data-weight","regular",1,"text-primary-default","flex","border-none","bg-primary-light","items-center","justify-center","pl-4","rounded-l-lg","border-r-0"],["xmlns","http://www.w3.org/2000/svg","width","24px","height","24px","fill","currentColor","viewBox","0 0 256 256"],["d","M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"],["mat-input","","placeholder","\u8f38\u5165\u5e97\u540d\u6216\u5730\u5740\u641c\u5c0b","name","first",1,"flex","w-full","flex-1","resize-none","overflow-hidden","rounded-lg","text-primary-default","focus:outline-none","focus:ring-0","border-none","bg-primary-light","focus:border-transparent","focus:bg-inherit","h-full","placeholder:text-primary-default","px-4","rounded-l-none","border-l-3","pl-2","text-base","font-normal","leading-normal",3,"ngModelChange","input","matAutocomplete","ngModel"],[3,"optionSelected"],["class","p-2 hover:bg-primary-light focus:bg-primary-default",3,"value",4,"ngFor","ngForOf"],[1,"flex","px-4","py-3","justify-center","items-center"],["type","button",1,"flex","min-w-[84px]","max-w-[480px]","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","h-10","px-4","bg-success","text-white","gap-2","pl-4","text-sm","font-bold","leading-normal","tracking-[0.015em]","text-xs","sm:text-sm","md:text-base",3,"click"],["data-icon","MapPin","data-size","20px","data-weight","regular",1,"text-white"],["xmlns","http://www.w3.org/2000/svg","width","20px","height","20px","fill","currentColor","viewBox","0 0 256 256"],["d","M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z"],[1,"truncate"],[4,"ngFor","ngForOf"],["mode","indeterminate","diameter","20",1,"text-primary-default"],[1,"p-2","hover:bg-primary-light","focus:bg-primary-default",3,"value"],["class","flex items-center gap-2",4,"ngIf"],[1,"flex","items-center","gap-2"],["alt","7-Eleven Icon",1,"w-4","h-4",3,"src"],[1,"flex","flex-col"],[1,"text-xs","sm:text-sm","text-gray-500"],["alt","FamilyMart Icon",1,"w-4","h-4",3,"src"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],[1,"w-full","lg:w-4/5","max-w-screen-lg"],["class","store p-4 border border-gray-300 rounded-lg shadow-md mb-6",4,"ngIf"],[1,"store","p-4","border","border-gray-300","rounded-lg","shadow-md","mb-6"],[1,"flex","items-center","gap-4","bg-primary-white","px-4","min-h-[72px]","py-2","justify-between"],[1,"flex","items-center","gap-4"],["data-icon","Storefront","data-size","24px","data-weight","regular",1,"text-dark","border","border-gray-200","flex","items-center","justify-center","rounded-lg","bg-primary-light","shrink-0","size-12",2,"padding","16px"],["alt","Store Icon","width","24px","height","24px","fill","currentColor",3,"src"],[1,"flex","flex-col","justify-center","text-lg","sm:text-xl","font-semibold"],[1,"text-dark","text-base","font-medium","leading-normal","line-clamp-1"],["target","_blank",1,"ml-2",3,"href"],["src","assets/GoogleMap_icon.png","alt","Google Maps",1,"w-6","h-6","inline-block"],["class","text-success text-sm font-normal leading-normal line-clamp-2",4,"ngIf"],[1,"flex","items-start","justify-end"],[1,"text-red-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"food-categories","mt-4"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-4","gap-0"],["class","sub-category-details mt-4",4,"ngIf"],[1,"text-success","text-sm","font-normal","leading-normal","line-clamp-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[3,"class","pointer-events-none","click",4,"ngIf"],[3,"click"],[1,"w-12","h-12","sm:w-14","sm:h-14","md:w-16","md:h-16","lg:w-20","lg:h-20","mx-auto","mb-2","object-cover",3,"src","alt","ngStyle"],[1,"block","text-sm","sm:text-base","font-semibold"],[1,"inline-block","text-xs","bg-orange-200","text-orange-900","sm:text-sm","font-semibold","px-4","py-2","rounded-full"],[1,"sub-category-details","mt-4"],[3,"store","category","foodDetails"],[3,"class","pointer-events-none","click",4,"ngFor","ngForOf"],["class","sub-category-details mt-4 border-gray-700",4,"ngIf"],[1,"sub-category-details","mt-4","border-gray-700"],[1,"border-gray-700",3,"store","category","foodDetails"]],template:function(r,i){if(1&r){const s=vc();De(0,"button",1),Dn("click",function(){return ji(s),zi(i.loginOrlogout())}),ut(1),Me(),De(2,"div",2),Ha(3),De(4,"div",3),ln(5,"img",4),De(6,"h5",5),Ut(7,cBe,2,0,"div",6),ha(8,"async"),Ut(9,uBe,1,0,"mat-progress-spinner",7),ha(10,"async"),Me()(),De(11,"div",8)(12,"p"),ut(13,"* \u8cc7\u8a0a\u50c5\u4f9b\u53c3\u8003\uff0c\u8acb\u4ee5\u5e97\u5167\u5546\u54c1\u70ba\u6e96"),Me()(),De(14,"form",9),Dn("ngSubmit",function(){return ji(s),zi(i.onSubmit())}),De(15,"div",10)(16,"div",11)(17,"label",12)(18,"div",13)(19,"div",14),la(),De(20,"svg",15),ln(21,"path",16),Me()(),Ah(),De(22,"input",17),XM("ngModelChange",function(a){return ji(s),function i5(n,e){const t=jW(n);return t&&n.set(e),t}(i.searchTerm,a)||(i.searchTerm=a),zi(a)}),Dn("input",function(a){return ji(s),zi(i.onInput(a))}),Me()()()()(),De(23,"mat-autocomplete",18,0),Dn("optionSelected",function(a){return ji(s),zi(i.onOptionSelect(a))}),Ut(25,fBe,3,3,"mat-option",19),Me(),De(26,"div",20)(27,"button",21),Dn("click",function(){return ji(s),zi(i.onUseCurrentLocation())}),De(28,"div",22),la(),De(29,"svg",23),ln(30,"path",24),Me()(),Ah(),De(31,"span",25),ut(32,"\u4f7f\u7528\u76ee\u524d\u4f4d\u7f6e"),Me()()()(),$a(),Me(),Ut(33,xBe,2,1,"ng-container",26)}if(2&r){const s=QM(24);Oe(),Qn(" ",i.user?i.user.displayName+" \u767b\u51fa":" \u767b\u5165","\n"),Oe(6),rt("ngIf",!1===Gh(8,7,i.loadingService.loading$)),Oe(2),rt("ngIf",Gh(10,9,i.loadingService.loading$)),Oe(13),rt("matAutocomplete",s),YM("ngModel",i.searchTerm),Oe(3),rt("ngForOf",i.unifiedDropDownList),Oe(8),rt("ngForOf",i.totalStoresShowList)}},dependencies:[FN,aT,e6,Tk,ab,hk,fk,Ck,RT,OK,HVe,s2e,$ne,lBe,n6,i6,sre]})}}return n})()}];let PBe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({imports:[A9.forRoot(RBe),A9]})}}return n})(),MBe=(()=>{class n{constructor(){this.title="friendly-time"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&ln(0,"router-outlet")},dependencies:[Kk]})}}return n})();const LBe={provide:new ve("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const n=O(yo);return()=>n.scrollStrategies.reposition()}}),deps:[yo],useFactory:function FBe(n){return()=>n.scrollStrategies.reposition()}};let are=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[LBe],imports:[pA,Cg,Wr,lA,xI,Cg,Wr]})}return n})(),VBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr,Wr]})}return n})(),lre=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr,Wr]})}return n})(),WBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({})}return n})(),GBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr,xI,xI,WBe,Wr]})}return n})(),ZBe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({imports:[Wr,Wr]})}return n})(),JBe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({imports:[s6,v8,xI,are,Cg,GBe,Une,b8,c2e,FZ,ZBe,lre]})}}return n})();function fre(n){return new K(3e3,!1)}function Od(n){switch(n.length){case 0:return new zb;case 1:return n[0];default:return new BK(n)}}function pre(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((m,y)=>{let b=y,T=m;if("offset"!==y)switch(b=n.normalizePropertyName(b,i),T){case"!":T=t.get(y);break;case Rc:T=r.get(y);break;default:T=n.normalizeStyleValue(y,b,T,i)}d.set(b,T)}),u||s.push(d),a=d,o=c}),i.length)throw function IUe(){return new K(3502,!1)}();return s}function mU(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&gU(t,"start",n)));break;case"done":n.onDone(()=>r(t&&gU(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&gU(t,"destroy",n)))}}function gU(n,e,t){const s=_U(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function _U(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Yo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function mre(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const kUe=typeof document>"u"?null:document.documentElement;function yU(n){const e=n.parentNode||n.host||null;return e===kUe?null:e}let rp=null,gre=!1;function _re(n,e){for(;e;){if(e===n)return!0;e=yU(e)}return!1}function yre(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let vU=(()=>{class n{validateStyleProperty(t){return function FUe(n){rp||(rp=function LUe(){return typeof document<"u"?document.body:null}()||{},gre=!!rp.style&&"WebkitAppearance"in rp.style);let e=!0;return rp.style&&!function OUe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in rp.style,!e&&gre&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in rp.style)),e}(t)}containsElement(t,r){return _re(t,r)}getParentElement(t){return yU(t)}query(t,r,i){return yre(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new zb(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class bU{static{this.NOOP=new vU}}class EU{}const BUe=1e3,IU="ng-enter",OD="ng-leave",FD="ng-trigger",LD=".ng-trigger",bre="ng-animating",wU=".ng-animating";function Jc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:CU(parseFloat(e[1]),e[2])}function CU(n,e){return"s"===e?n*BUe:n}function VD(n,e,t){return n.hasOwnProperty("duration")?n:function jUe(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(fre()),{duration:0,delay:0,easing:""};i=CU(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=CU(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function eUe(){return new K(3100,!1)}()),a=!0),s<0&&(e.push(function tUe(){return new K(3101,!1)}()),a=!0),a&&e.splice(l,0,fre())}return{duration:i,delay:s,easing:o}}(n,e,t)}function $l(n,e,t){e.forEach((r,i)=>{const s=AU(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function ip(n,e){e.forEach((t,r)=>{const i=AU(r);n.style[i]=""})}function PI(n){return Array.isArray(n)?1==n.length?n[0]:function tAe(n,e=null){return{type:Rt.Sequence,steps:n,options:e}}(n):n}const TU=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ire(n){let e=[];if("string"==typeof n){let t;for(;t=TU.exec(n);)e.push(t[1]);TU.lastIndex=0}return e}function MI(n,e,t){const r=`${n}`,i=r.replace(TU,(s,o)=>{let a=e[o];return null==a&&(t.push(function rUe(){return new K(3003,!1)}()),a=""),a.toString()});return i==r?n:i}const $Ue=/-+([a-z0-9])/g;function AU(n){return n.replace($Ue,(...e)=>e[1].toUpperCase())}function Xo(n,e,t){switch(e.type){case Rt.Trigger:return n.visitTrigger(e,t);case Rt.State:return n.visitState(e,t);case Rt.Transition:return n.visitTransition(e,t);case Rt.Sequence:return n.visitSequence(e,t);case Rt.Group:return n.visitGroup(e,t);case Rt.Animate:return n.visitAnimate(e,t);case Rt.Keyframes:return n.visitKeyframes(e,t);case Rt.Style:return n.visitStyle(e,t);case Rt.Reference:return n.visitReference(e,t);case Rt.AnimateChild:return n.visitAnimateChild(e,t);case Rt.AnimateRef:return n.visitAnimateRef(e,t);case Rt.Query:return n.visitQuery(e,t);case Rt.Stagger:return n.visitStagger(e,t);default:throw function iUe(){return new K(3004,!1)}()}}function SU(n,e){return window.getComputedStyle(n)[e]}const qUe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wre extends EU{normalizePropertyName(e,t){return AU(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(qUe.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function sUe(){return new K(3005,!1)}())}return o+s}}const BD="*";const UD=new Set(["true","1"]),jD=new Set(["false","0"]);function Cre(n,e){const t=UD.has(n)||jD.has(n),r=UD.has(e)||jD.has(e);return(i,s)=>{let o=n==BD||n==i,a=e==BD||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?UD.has(n):jD.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?UD.has(e):jD.has(e)),o&&a}}const XUe=new RegExp("s*:selfs*,?","g");function DU(n,e,t,r){return new ZUe(n).build(e,t,r)}class ZUe{constructor(e){this._driver=e}build(e,t,r){const i=new tje(t);return this._resetContextStyleTimingState(i),Xo(this,PI(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function oUe(){return new K(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Rt.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==Rt.Transition){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function aUe(){return new K(3007,!1)}())}),{type:Rt.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Ire(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(function lUe(){return new K(3008,!1)}(0,s.values()))}return{type:Rt.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Xo(this,PI(e.animation),t),i=function KUe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function QUe(n,e,t){if(":"==n[0]){const l=function YUe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function yUe(){return new K(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function _Ue(){return new K(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(Cre(i,o)),"<"==s[0]&&(i!=BD||o!=BD)&&e.push(Cre(o,i))}(r,t,e)):t.push(n),t}(e.expr,t.errors);return{type:Rt.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:sp(e.options)}}visitSequence(e,t){return{type:Rt.Sequence,steps:e.steps.map(r=>Xo(this,r,t)),options:sp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Xo(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Rt.Group,steps:s,options:sp(e.options)}}visitAnimate(e,t){const r=function rje(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return xU(VD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=xU(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=VD(t,e);return xU(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:qs({});if(s.type==Rt.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=qs(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:Rt.Animate,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Rc?r.push(a):t.errors.push(new K(3002,!1)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:Rt.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(function uUe(){return new K(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:i}),t.options&&function HUe(n,e,t){const r=e.params||{},i=Ire(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function nUe(){return new K(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:Rt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function dUe(){return new K(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(B=>{const V=this._makeStyleAst(B,t);let Q=null!=V.offset?V.offset:function nje(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),be=0;return null!=Q&&(s++,be=V.offset=Q),l=l||be<0||be>1,a=a||be<c,c=be,o.push(be),V});l&&t.errors.push(function hUe(){return new K(3012,!1)}()),a&&t.errors.push(function fUe(){return new K(3200,!1)}());const d=e.steps.length;let m=0;s>0&&s<d?t.errors.push(function pUe(){return new K(3202,!1)}()):0==s&&(m=1/(d-1));const y=d-1,b=t.currentTime,T=t.currentAnimateTimings,P=T.duration;return u.forEach((B,V)=>{const Q=m>0?V==y?1:m*V:o[V],be=Q*P;t.currentTime=b+T.delay+be,T.duration=be,this._validateStyleAst(B,t),B.offset=Q,r.styles.push(B)}),r}visitReference(e,t){return{type:Rt.Reference,animation:Xo(this,PI(e.animation),t),options:sp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Rt.AnimateChild,options:sp(e.options)}}visitAnimateRef(e,t){return{type:Rt.AnimateRef,animation:this.visitReference(e.animation,t),options:sp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function JUe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(XUe,"")),n=n.replace(/@\*/g,LD).replace(/@\w+/g,t=>LD+"-"+t.slice(1)).replace(/:animating/g,wU),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Yo(t.collectedStyles,t.currentQuerySelector,new Map);const a=Xo(this,PI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Rt.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:sp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function mUe(){return new K(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:VD(e.timings,t.errors,!0);return{type:Rt.Stagger,animation:Xo(this,PI(e.animation),t),timings:r,options:null}}}class tje{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function sp(n){return n?(n={...n}).params&&(n.params=function eje(n){return n?{...n}:null}(n.params)):n={},n}function xU(n,e,t){return{duration:n,delay:e,easing:t}}function RU(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class zD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const oje=new RegExp(":enter","g"),lje=new RegExp(":leave","g");function PU(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new cje).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class cje{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new zD;const d=new MU(e,t,c,i,s,u,[]);d.options=l;const m=l.delay?Jc(l.delay):0;d.currentTimeline.delayNextStep(m),d.currentTimeline.setStyles([o],null,d.errors,l),Xo(this,r,d);const y=d.timelines.filter(b=>b.containsAnimation());if(y.length&&a.size){let b;for(let T=y.length-1;T>=0;T--){const P=y[T];if(P.element===t){b=P;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,d.errors,l)}return y.length?y.map(b=>b.buildKeyframes()):[RU(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Jc(MI(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Jc(r.duration):null,a=null!=r.delay?Jc(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Xo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){i.previousNode.type==Rt.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=HD);const o=Jc(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Xo(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Jc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Xo(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return VD(t.params?MI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;s.type==Rt.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Jc(i.delay):0;s&&(t.previousNode.type===Rt.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=HD);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Xo(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Xo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const HD={};class MU{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=HD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new $D(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Jc(r.duration)),null!=r.delay&&(i.delay=Jc(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=MI(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new MU(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=HD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new uje(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(oje,"."+this._enterClassName)).replace(lje,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function gUe(){return new K(3014,!1)}()),a}}class $D{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new $D(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Rc),this._currentKeyframe.set(t,Rc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function dje(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r??=e.keys();for(let s of r)t.set(s,Rc)}else for(let[s,o]of i)t.set(s,o)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=MI(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Rc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{"!"===u?e.add(d):u===Rc&&t.add(d)}),r||c.set("offset",l/this.duration),i.push(c)});const s=[...e.values()],o=[...t.values()];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return RU(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class uje extends $D{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);const c=new Map(e[0]);c.set("offset",Sre(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let m=new Map(e[d]);const y=m.get("offset");m.set("offset",Sre((t+y*r)/o)),s.push(m)}r=o,t=0,i="",e=s}return RU(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Sre(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function Dre(n,e,t,r,i,s,o,a,l,c,u,d,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:m}}const NU={};class xre{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function hje(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,u){const d=[],m=this.ast.options&&this.ast.options.params||NU,b=this.buildStyles(r,a&&a.params||NU,d),T=l&&l.params||NU,P=this.buildStyles(i,T,d),B=new Set,V=new Map,Q=new Map,be="void"===i,Be={params:Rre(T,m),delay:this.ast.options?.delay},je=u?[]:PU(e,t,this.ast.animation,s,o,b,P,Be,c,d);let H=0;return je.forEach(L=>{H=Math.max(L.duration+L.delay,H)}),d.length?Dre(t,this._triggerName,r,i,be,b,P,[],[],V,Q,H,d):(je.forEach(L=>{const W=L.element,J=Yo(V,W,new Set);L.preStyleProps.forEach(re=>J.add(re));const ne=Yo(Q,W,new Set);L.postStyleProps.forEach(re=>ne.add(re)),W!==t&&B.add(W)}),Dre(t,this._triggerName,r,i,be,b,P,je,[...B.values()],V,Q,H))}}function Rre(n,e){const t={...e};return Object.entries(n).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class fje{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Rre(e,this.defaultParams);return this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=MI(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class mje{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new fje(i.style,i.options&&i.options.params||{},r))}),Pre(this.states,"true","1"),Pre(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new xre(e,i,this.states))}),this.fallbackTransition=function gje(n,e){return new xre(n,{type:Rt.Transition,animation:{type:Rt.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Pre(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const _je=new zD;class yje{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=DU(this._driver,t,r,[]);if(r.length)throw function wUe(){return new K(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=pre(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=PU(this._driver,t,s,IU,OD,new Map,new Map,r,_je,i),o.forEach(u=>{const d=Yo(a,u.element,new Map);u.postStyleProps.forEach(m=>d.set(m,null))})):(i.push(function CUe(){return new K(3300,!1)}()),o=[]),i.length)throw function TUe(){return new K(3504,!1)}();a.forEach((u,d)=>{u.forEach((m,y)=>{u.set(y,this._driver.computeStyle(d,y,Rc))})});const c=Od(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function AUe(){return new K(3301,!1)}();return t}listen(e,t,r,i){const s=_U(t,"","","");return mU(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Mre="ng-animate-queued",kU="ng-animate-disabled",wje=[],Nre={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Cje={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},nl="__ng_removed";class OU{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Dje(n){return n??null}(r?e.value:e),r){const{value:s,...o}=e;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const NI="void",FU=new OU(NI);class Tje{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ca(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function SUe(){return new K(3302,!1)}();if(null==r||0==r.length)throw function DUe(){return new K(3303,!1)}();if(!function xje(n){return"start"==n||"done"==n}(r))throw function xUe(){return new K(3400,!1)}();const s=Yo(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Yo(this._engine.statesByElement,e,new Map);return a.has(t)||(Ca(e,FD),Ca(e,FD+"-"+t),a.set(t,FU)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function RUe(){return new K(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new LU(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ca(e,FD),Ca(e,FD+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new OU(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=FU),c.value!==NI&&l.value===c.value){if(!function Mje(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const T=[],P=s.matchStyles(l.value,l.params,T),B=s.matchStyles(c.value,c.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{ip(e,P),$l(e,B)})}return}const m=Yo(this._engine.playersByElement,e,[]);m.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let y=s.matchTransition(l.value,c.value,e,c.params),b=!1;if(!y){if(!i)return;y=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:b}),b||(Ca(e,Mre),o.onStart(()=>{O_(e,Mre)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const P=this._engine.playersByElement.get(e);if(P){let B=P.indexOf(o);B>=0&&P.splice(B,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,LD,!0);r.forEach(i=>{if(i[nl])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,NI,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Od(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||FU,u=new OU(NI),d=new LU(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[nl];(!s||s===Nre)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ca(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=_U(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,mU(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Aje{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Tje(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(WD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!WD(t))return;const s=t[nl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ca(e,kU)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),O_(e,kU))}removeNode(e,t,r){if(WD(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[nl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return WD(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,LD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,wU,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Od(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[nl];if(t&&t.setForRemoval){if(e[nl]=Nre,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(kU)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ca(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Od(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function PUe(){return new K(3402,!1)}()}_flushAnimations(e,t){const r=new zD,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(it=>{u.add(it);const ht=this.driver.query(it,".ng-animate-queued",!0);for(let bt=0;bt<ht.length;bt++)u.add(ht[bt])});const d=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=Fre(m,this.collectedEnterElements),b=new Map;let T=0;y.forEach((it,ht)=>{const bt=IU+T++;b.set(ht,bt),it.forEach(cn=>Ca(cn,bt))});const P=[],B=new Set,V=new Set;for(let it=0;it<this.collectedLeaveElements.length;it++){const ht=this.collectedLeaveElements[it],bt=ht[nl];bt&&bt.setForRemoval&&(P.push(ht),B.add(ht),bt.hasAnimation?this.driver.query(ht,".ng-star-inserted",!0).forEach(cn=>B.add(cn)):V.add(ht))}const Q=new Map,be=Fre(m,Array.from(B));be.forEach((it,ht)=>{const bt=OD+T++;Q.set(ht,bt),it.forEach(cn=>Ca(cn,bt))}),e.push(()=>{y.forEach((it,ht)=>{const bt=b.get(ht);it.forEach(cn=>O_(cn,bt))}),be.forEach((it,ht)=>{const bt=Q.get(ht);it.forEach(cn=>O_(cn,bt))}),P.forEach(it=>{this.processLeaveNode(it)})});const Be=[],je=[];for(let it=this._namespaceList.length-1;it>=0;it--)this._namespaceList[it].drainQueuedTransitions(t).forEach(bt=>{const cn=bt.player,_i=bt.element;if(Be.push(cn),this.collectedEnterElements.length){const ii=_i[nl];if(ii&&ii.setForMove){if(ii.previousTriggersValues&&ii.previousTriggersValues.has(bt.triggerName)){const ru=ii.previousTriggersValues.get(bt.triggerName),So=this.statesByElement.get(bt.element);if(So&&So.has(bt.triggerName)){const iu=So.get(bt.triggerName);iu.value=ru,So.set(bt.triggerName,iu)}}return void cn.destroy()}}const Da=!d||!this.driver.containsElement(d,_i),ri=Q.get(_i),Ar=b.get(_i),Sr=this._buildInstruction(bt,r,Ar,ri,Da);if(Sr.errors&&Sr.errors.length)return void je.push(Sr);if(Da)return cn.onStart(()=>ip(_i,Sr.fromStyles)),cn.onDestroy(()=>$l(_i,Sr.toStyles)),void i.push(cn);if(bt.isFallbackTransition)return cn.onStart(()=>ip(_i,Sr.fromStyles)),cn.onDestroy(()=>$l(_i,Sr.toStyles)),void i.push(cn);const qd=[];Sr.timelines.forEach(ii=>{ii.stretchStartingKeyframe=!0,this.disabledNodes.has(ii.element)||qd.push(ii)}),Sr.timelines=qd,r.append(_i,Sr.timelines),o.push({instruction:Sr,player:cn,element:_i}),Sr.queriedElements.forEach(ii=>Yo(a,ii,[]).push(cn)),Sr.preStyleProps.forEach((ii,ru)=>{if(ii.size){let So=l.get(ru);So||l.set(ru,So=new Set),ii.forEach((iu,Kd)=>So.add(Kd))}}),Sr.postStyleProps.forEach((ii,ru)=>{let So=c.get(ru);So||c.set(ru,So=new Set),ii.forEach((iu,Kd)=>So.add(Kd))})});if(je.length){const it=[];je.forEach(ht=>{it.push(function MUe(){return new K(3505,!1)}())}),Be.forEach(ht=>ht.destroy()),this.reportError(it)}const H=new Map,L=new Map;o.forEach(it=>{const ht=it.element;r.has(ht)&&(L.set(ht,ht),this._beforeAnimationBuild(it.player.namespaceId,it.instruction,H))}),i.forEach(it=>{const ht=it.element;this._getPreviousPlayers(ht,!1,it.namespaceId,it.triggerName,null).forEach(cn=>{Yo(H,ht,[]).push(cn),cn.destroy()})});const W=P.filter(it=>Vre(it,l,c)),J=new Map;Ore(J,this.driver,V,c,Rc).forEach(it=>{Vre(it,l,c)&&W.push(it)});const re=new Map;y.forEach((it,ht)=>{Ore(re,this.driver,new Set(it),l,"!")}),W.forEach(it=>{const ht=J.get(it),bt=re.get(it);J.set(it,new Map([...ht?.entries()??[],...bt?.entries()??[]]))});const q=[],Vr=[],ea={};o.forEach(it=>{const{element:ht,player:bt,instruction:cn}=it;if(r.has(ht)){if(u.has(ht))return bt.onDestroy(()=>$l(ht,cn.toStyles)),bt.disabled=!0,bt.overrideTotalTime(cn.totalTime),void i.push(bt);let _i=ea;if(L.size>1){let ri=ht;const Ar=[];for(;ri=ri.parentNode;){const Sr=L.get(ri);if(Sr){_i=Sr;break}Ar.push(ri)}Ar.forEach(Sr=>L.set(Sr,_i))}const Da=this._buildAnimation(bt.namespaceId,cn,H,s,re,J);if(bt.setRealPlayer(Da),_i===ea)q.push(bt);else{const ri=this.playersByElement.get(_i);ri&&ri.length&&(bt.parentPlayer=Od(ri)),i.push(bt)}}else ip(ht,cn.fromStyles),bt.onDestroy(()=>$l(ht,cn.toStyles)),Vr.push(bt),u.has(ht)&&i.push(bt)}),Vr.forEach(it=>{const ht=s.get(it.element);if(ht&&ht.length){const bt=Od(ht);it.setRealPlayer(bt)}}),i.forEach(it=>{it.parentPlayer?it.syncPlayerEvents(it.parentPlayer):it.destroy()});for(let it=0;it<P.length;it++){const ht=P[it],bt=ht[nl];if(O_(ht,OD),bt&&bt.hasAnimation)continue;let cn=[];if(a.size){let Da=a.get(ht);Da&&Da.length&&cn.push(...Da);let ri=this.driver.query(ht,wU,!0);for(let Ar=0;Ar<ri.length;Ar++){let Sr=a.get(ri[Ar]);Sr&&Sr.length&&cn.push(...Sr)}}const _i=cn.filter(Da=>!Da.destroyed);_i.length?Rje(this,ht,_i):this.processLeaveNode(ht)}return P.length=0,q.forEach(it=>{this.players.push(it),it.onDone(()=>{it.destroy();const ht=this.players.indexOf(it);this.players.splice(ht,1)}),it.play()}),q}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==NI;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Yo(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(y=>{const b=y.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),y.destroy(),d.push(y)})}ip(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,m=t.timelines.map(b=>{const T=b.element;u.add(T);const P=T[nl];if(P&&P.removedBeforeQueried)return new zb(b.duration,b.delay);const B=T!==l,V=function Pje(n){const e=[];return Lre(n,e),e}((r.get(T)||wje).map(H=>H.getRealPlayer())).filter(H=>!!H.element&&H.element===T),Q=s.get(T),be=o.get(T),Be=pre(this._normalizer,b.keyframes,Q,be),je=this._buildPlayer(b,Be,V);if(b.subTimeline&&i&&d.add(T),B){const H=new LU(e,a,T);H.setRealPlayer(je),c.push(H)}return je});c.forEach(b=>{Yo(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function Sje(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),u.forEach(b=>Ca(b,bre));const y=Od(m);return y.onDestroy(()=>{u.forEach(b=>O_(b,bre)),$l(l,t.toStyles)}),d.forEach(b=>{Yo(i,b,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new zb(e.duration,e.delay)}}class LU{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new zb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>mU(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Yo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function WD(n){return n&&1===n.nodeType}function kre(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Ore(n,e,t,r,i){const s=[];t.forEach(l=>s.push(kre(l)));const o=[];r.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const m=e.computeStyle(c,d,i);u.set(d,m),(!m||0==m.length)&&(c[nl]=Cje,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>kre(l,s[a++])),o}function Fre(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Ca(n,e){n.classList?.add(e)}function O_(n,e){n.classList?.remove(e)}function Rje(n,e,t){Od(t).onDone(()=>n.processLeaveNode(e))}function Lre(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof BK?Lre(r.players,e):e.push(r)}}function Vre(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class kI{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Aje(e.body,t,r),this._timelineEngine=new yje(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=DU(this._driver,s,l,[]);if(l.length)throw function EUe(){return new K(3404,!1)}();a=function pje(n,e,t){return new mje(n,e,t)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=mre(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=mre(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class OI{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=OI.initialStylesByElement.get(e);i||OI.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&$l(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($l(this._element,this._initialStyles),this._endStyles&&($l(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(OI.initialStylesByElement.delete(this._element),this._startStyles&&(ip(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ip(this._element,this._endStyles),this._endStyles=null),$l(this._element,this._initialStyles),this._state=3)}}function VU(n){let e=null;return n.forEach((t,r)=>{(function kje(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Bre{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:SU(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ure{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return _re(e,t)}getParentElement(e){return yU(e)}query(e,t,r){return yre(e,t,r)}computeStyle(e,t,r){return SU(e,t)}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(y=>y instanceof Bre);(function WUe(n,e){return 0===n||0===e})(r,i)&&u.forEach(y=>{y.currentSnapshot.forEach((b,T)=>c.set(T,b))});let d=function zUe(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(y=>new Map(y));d=function GUe(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,SU(n,a)))}}return e}(e,d,c);const m=function Nje(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=VU(e[0]),e.length>1&&(r=VU(e[e.length-1]))):e instanceof Map&&(t=VU(e)),t||r?new OI(n,t,r):null}(e,d);return new Bre(e,d,l,m)}}const jre="@.disabled";class zre{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==jre?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Oje extends zre{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==jre?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Fje(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Lje(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}class Vje{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const c=this._rendererCache;let u=c.get(i);return u||(u=new zre("",i,this.engine,()=>c.delete(i)),c.set(i,u)),u}const s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new Oje(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const Hre=[{provide:EU,useFactory:function Uje(){return new wre}},{provide:kI,useClass:(()=>{class n extends kI{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(Ae(bn),Ae(bU),Ae(EU))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})()},{provide:Vh,useFactory:function jje(n,e,t){return new Vje(n,e,t)},deps:[QN,kI,_t]}],BU=[{provide:bU,useFactory:()=>new Ure},{provide:mc,useValue:"BrowserAnimations"},...Hre],$re=[{provide:bU,useClass:vU},{provide:mc,useValue:"NoopAnimations"},...Hre];let zje=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?$re:BU}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$t({type:n})}static{this.\u0275inj=qt({providers:BU,imports:[P6]})}}return n})();const Wre="@firebase/installations",UU="0.6.9",Gre=1e4,qre=`w:${UU}`,Kre="FIS_v2",Hje="https://firebaseinstallations.googleapis.com/v1",$je=36e5,eu=new N.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qre(n){return n instanceof N.g&&n.code.includes("request-failed")}function jU({projectId:n}){return`${Hje}/projects/${n}/installations`}function Yre(n){return{token:n.token,requestStatus:2,expiresIn:Kje(n.expiresIn),creationTime:Date.now()}}function zU(n,e){return HU.apply(this,arguments)}function HU(){return(HU=(0,k.A)(function*(n,e){const r=(yield e.json()).error;return eu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function Xre({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function $U(n){return WU.apply(this,arguments)}function WU(){return(WU=(0,k.A)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Kje(n){return Number(n.replace("s","000"))}function GU(){return(GU=(0,k.A)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=jU(n),i=Xre(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Kre,appId:n.appId,sdkVersion:qre})},l=yield $U(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:Yre(c.authToken)}}throw yield zU("Create Installation",l)})).apply(this,arguments)}function Jre(n){return new Promise(e=>{setTimeout(e,n)})}const Zje=/^[cdef][\w-]{21}$/,qU="";function Jje(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function eze(n){return function Xje(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Zje.test(t)?t:qU}catch{return qU}}function F_(n){return`${n.appName}!${n.appId}`}const L_=new Map;function eie(n,e){const t=F_(n);tie(t,e),function rze(n,e){const t=function nie(){return!op&&"BroadcastChannel"in self&&(op=new BroadcastChannel("[Firebase] FID Change"),op.onmessage=n=>{tie(n.data.key,n.data.fid)}),op}();t&&t.postMessage({key:n,fid:e}),function rie(){0===L_.size&&op&&(op.close(),op=null)}()}(t,e)}function tie(n,e){const t=L_.get(n);if(t)for(const r of t)r(e)}let op=null;const ize="firebase-installations-database",sze=1,ap="firebase-installations-store";let KU=null;function QU(){return KU||(KU=(0,dQ.P2)(ize,sze,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ap)}})),KU}function qD(n,e){return YU.apply(this,arguments)}function YU(){return(YU=(0,k.A)(function*(n,e){const t=F_(n),i=(yield QU()).transaction(ap,"readwrite"),s=i.objectStore(ap),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&eie(n,e.fid),e})).apply(this,arguments)}function XU(n){return ZU.apply(this,arguments)}function ZU(){return(ZU=(0,k.A)(function*(n){const e=F_(n),r=(yield QU()).transaction(ap,"readwrite");yield r.objectStore(ap).delete(e),yield r.done})).apply(this,arguments)}function FI(n,e){return JU.apply(this,arguments)}function JU(){return(JU=(0,k.A)(function*(n,e){const t=F_(n),i=(yield QU()).transaction(ap,"readwrite"),s=i.objectStore(ap),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&eie(n,a.fid),a})).apply(this,arguments)}function ej(n){return tj.apply(this,arguments)}function tj(){return tj=(0,k.A)(function*(n){let e;const t=yield FI(n.appConfig,r=>{const i=function oze(n){return sie(n||{fid:Jje(),registrationStatus:0})}(r),s=function aze(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(eu.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function lze(n,e){return nj.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:cze(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===qU?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),tj.apply(this,arguments)}function nj(){return nj=(0,k.A)(function*(n,e){try{const t=yield function Yje(n,e){return GU.apply(this,arguments)}(n,e);return qD(n.appConfig,t)}catch(t){throw Qre(t)&&409===t.customData.serverCode?yield XU(n.appConfig):yield qD(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),nj.apply(this,arguments)}function cze(n){return rj.apply(this,arguments)}function rj(){return(rj=(0,k.A)(function*(n){let e=yield iie(n.appConfig);for(;1===e.registrationStatus;)yield Jre(100),e=yield iie(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield ej(n);return r||t}return e})).apply(this,arguments)}function iie(n){return FI(n,e=>{if(!e)throw eu.create("installation-not-found");return sie(e)})}function sie(n){return function uze(n){return 1===n.registrationStatus&&n.registrationTime+Gre<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function ij(){return(ij=(0,k.A)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function hze(n,{fid:e}){return`${jU(n)}/${e}/authTokens:generate`}(n,t),i=function Zre(n,{refreshToken:e}){const t=Xre(n);return t.append("Authorization",function Qje(n){return`${Kre} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:qre,appId:n.appId}})},l=yield $U(()=>fetch(r,a));if(l.ok)return Yre(yield l.json());throw yield zU("Generate Auth Token",l)})).apply(this,arguments)}function sj(n){return oj.apply(this,arguments)}function oj(){return oj=(0,k.A)(function*(n,e=!1){let t;const r=yield FI(n.appConfig,s=>{if(!aie(s))throw eu.create("not-registered");const o=s.authToken;if(!e&&function mze(n){return 2===n.requestStatus&&!function gze(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+$je}(n)}(o))return s;if(1===o.requestStatus)return t=function fze(n,e){return aj.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw eu.create("app-offline");const a=function _ze(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function pze(n,e){return lj.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),oj.apply(this,arguments)}function aj(){return(aj=(0,k.A)(function*(n,e){let t=yield oie(n.appConfig);for(;1===t.authToken.requestStatus;)yield Jre(100),t=yield oie(n.appConfig);const r=t.authToken;return 0===r.requestStatus?sj(n,e):r})).apply(this,arguments)}function oie(n){return FI(n,e=>{if(!aie(e))throw eu.create("not-registered");return function yze(n){return 1===n.requestStatus&&n.requestTime+Gre<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function lj(){return lj=(0,k.A)(function*(n,e){try{const t=yield function dze(n,e){return ij.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield qD(n.appConfig,r),t}catch(t){if(!Qre(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield qD(n.appConfig,r)}else yield XU(n.appConfig);throw t}}),lj.apply(this,arguments)}function aie(n){return void 0!==n&&2===n.registrationStatus}function cj(){return(cj=(0,k.A)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield ej(e);return r?r.catch(console.error):sj(e).catch(console.error),t.fid})).apply(this,arguments)}function uj(){return uj=(0,k.A)(function*(n,e=!1){const t=n;return yield function Eze(n){return dj.apply(this,arguments)}(t),(yield sj(t,e)).token}),uj.apply(this,arguments)}function dj(){return(dj=(0,k.A)(function*(n){const{registrationPromise:e}=yield ej(n);e&&(yield e)})).apply(this,arguments)}function pj(n){return eu.create("missing-app-config-values",{valueName:n})}const lie="installations",Aze=n=>{const e=n.getProvider("app").getImmediate(),t=function Cze(n){if(!n||!n.options)throw pj("App Configuration");if(!n.name)throw pj("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw pj(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,Bn._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},Sze=n=>{const e=n.getProvider("app").getImmediate(),t=(0,Bn._getProvider)(e,lie).getImmediate();return{getId:()=>function vze(n){return cj.apply(this,arguments)}(t),getToken:i=>function bze(n){return uj.apply(this,arguments)}(t,i)}};(function Dze(){(0,Bn._registerComponent)(new Ho.uA(lie,Aze,"PUBLIC")),(0,Bn._registerComponent)(new Ho.uA("installations-internal",Sze,"PRIVATE"))})(),(0,Bn.registerVersion)(Wre,UU),(0,Bn.registerVersion)(Wre,UU,"esm2017");const KD="analytics",xze="firebase_id",Rze="origin",Pze=6e4,Mze="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mj="https://www.googletagmanager.com/gtag/js",Xi=new vo.Vy("@firebase/analytics"),Xs=new N.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function kze(n){if(!n.startsWith(mj)){const e=Xs.create("invalid-gtag-resource",{gtagURL:n});return Xi.warn(e.message),""}return n}function cie(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function gj(){return(gj=(0,k.A)(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield cie(t)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){Xi.error(a)}n("config",i,s)})).apply(this,arguments)}function _j(){return(_j=(0,k.A)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield cie(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){Xi.error(s)}})).apply(this,arguments)}const Hze=30,uie=new class Wze{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Gze(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function yj(){return(yj=(0,k.A)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Gze(r)},s=Mze.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw Xs.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function vj(){return(vj=(0,k.A)(function*(n,e=uie,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Xs.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Xs.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Xze;return setTimeout((0,k.A)(function*(){a.abort()}),void 0!==t?t:Pze),die({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function die(n,e,t){return bj.apply(this,arguments)}function bj(){return bj=(0,k.A)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=uie){var s;const{appId:o,measurementId:a}=n;try{yield function Qze(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Xs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(l){if(a)return Xi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield function qze(n){return yj.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!function Yze(n){if(!(n instanceof N.g&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return Xi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?(0,N.p9)(t,i.intervalMillis,Hze):(0,N.p9)(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,d),Xi.debug(`Calling attemptFetch again in ${u} millis`),die(n,d,r,i)}}),bj.apply(this,arguments)}class Xze{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Ej,Dj;function Ij(){return(Ij=(0,k.A)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function xj(){return(xj=(0,k.A)(function*(){if(!(0,N.zW)())return Xi.warn(Xs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,N.eX)()}catch(n){return Xi.warn(Xs.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function Rj(){return Rj=(0,k.A)(function*(n,e,t,r,i,s,o){var a;const l=function Kze(n){return vj.apply(this,arguments)}(n);l.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&Xi.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Xi.error(y)),e.push(l);const c=function iHe(){return xj.apply(this,arguments)}().then(y=>{if(y)return r.getId()}),[u,d]=yield Promise.all([l,c]);(function zze(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(mj)&&t.src.includes(n))return t;return null})(s)||function Fze(n,e){const t=function Oze(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:kze}),r=document.createElement("script"),i=`${mj}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),Dj&&(i("consent","default",Dj),function hie(n){Dj=n}(void 0)),i("js",new Date);const m=null!==(a=o?.config)&&void 0!==a?a:{};return m[Rze]="firebase",m.update=!0,null!=d&&(m[xze]=d),i("config",u.measurementId,m),Ej&&(i("set",Ej),function fie(n){Ej=n}(void 0)),u.measurementId}),Rj.apply(this,arguments)}class oHe{constructor(e){this.app=e}_delete(){return delete Wl[this.app.options.appId],Promise.resolve()}}let Wl={},pie=[];const mie={};let _ie,Gl,QD="dataLayer",Pj=!1;function lHe(n,e,t){!function aHe(){const n=[];if((0,N.sr)()&&n.push("This is a browser extension environment."),(0,N.dM)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Xs.create("invalid-analytics-context",{errorInfo:e});Xi.warn(t.message)}}();const r=n.options.appId;if(!r)throw Xs.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Xs.create("no-api-key");Xi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wl[r])throw Xs.create("already-exists",{id:r});if(!Pj){!function Lze(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(QD);const{wrappedGtag:s,gtagCore:o}=function jze(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Uze(n,e,t,r){function s(){return s=(0,k.A)(function*(o,...a){try{if("event"===o){const[l,c]=a;yield function Bze(n,e,t,r,i){return _j.apply(this,arguments)}(n,e,t,l,c)}else if("config"===o){const[l,c]=a;yield function Vze(n,e,t,r,i,s){return gj.apply(this,arguments)}(n,e,t,r,l,c)}else if("consent"===o){const[l,c]=a;n("consent",l,c)}else if("get"===o){const[l,c,u]=a;n("get",l,c,u)}else if("set"===o){const[l]=a;n("set",l)}else n(o,...a)}catch(l){Xi.error(l)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(Wl,pie,mie,QD,"gtag");Gl=s,_ie=o,Pj=!0}return Wl[r]=function sHe(n,e,t,r,i,s,o){return Rj.apply(this,arguments)}(n,pie,mie,e,_ie,QD,t),new oHe(n)}function cHe(n=(0,Bn.getApp)()){n=(0,N.Ku)(n);const e=(0,Bn._getProvider)(n,KD);return e.isInitialized()?e.getImmediate():function uHe(n,e={}){const t=(0,Bn._getProvider)(n,KD);if(t.isInitialized()){const i=t.getImmediate();if((0,N.bD)(e,t.getOptions()))return i;throw Xs.create("already-initialized")}return t.initialize({options:e})}(n)}function dHe(){return Mj.apply(this,arguments)}function Mj(){return(Mj=(0,k.A)(function*(){if((0,N.sr)()||!(0,N.dM)()||!(0,N.zW)())return!1;try{return yield(0,N.eX)()}catch{return!1}})).apply(this,arguments)}const yie="@firebase/analytics";!function fHe(){(0,Bn._registerComponent)(new Ho.uA(KD,(e,{options:t})=>lHe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,Bn._registerComponent)(new Ho.uA("analytics-internal",function n(e){try{const t=e.getProvider(KD).getImmediate();return{logEvent:(r,i,s)=>function hHe(n,e,t,r){n=(0,N.Ku)(n),function Zze(n,e,t,r,i){return Ij.apply(this,arguments)}(Gl,Wl[n.app.options.appId],e,t,r).catch(i=>Xi.error(i))}(t,r,i,s)}}catch(t){throw Xs.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,Bn.registerVersion)(yie,"0.10.8"),(0,Bn.registerVersion)(yie,"0.10.8","esm2017")}();class kj{constructor(e){return e}}const Oj="__angularfire_symbol__analyticsIsSupportedValue",Eie="__angularfire_symbol__analyticsIsSupported";globalThis[Eie]||=dHe().then(n=>globalThis[Oj]=n).catch(()=>globalThis[Oj]=!1);const YD={async:()=>globalThis[Eie],sync:()=>{const n=globalThis[Oj];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Analytics"));return n}},mHe=Pc(cHe,!0),Vj=new ve("angularfire2.analytics-instances");function xHe(n){return(e,t)=>{if(!YD.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new kj(r)}}const RHe={provide:class pHe{constructor(){return FO("analytics")}},deps:[[new Ti,Vj]]},PHe={provide:kj,useFactory:function DHe(n,e){if(!YD.sync())return null;const t=JK("analytics",n,e);return t&&new kj(t)},deps:[[new Ti,Vj],$b]};function MHe(n,...e){return(0,Bn.registerVersion)("angularfire",Yu.full,"analytics"),dl([PHe,RHe,{provide:OC,useValue:YD.async,multi:!0},{provide:Vj,useFactory:xHe(n),multi:!0,deps:[_t,Sn,Ag,LO,...e]}])}const Cie="@firebase/database";let Bj="";function Uj(n){Bj=n}class OHe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class FHe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Aie=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new OHe(e)}}catch{}return new FHe},lp=Aie("localStorage"),jj=Aie("sessionStorage"),V_=new vo.Vy("@firebase/database"),Sie=function(){let n=1;return function(){return n++}}(),Die=function(n){const e=(0,N.kj)(n),t=new N.gz;t.update(e);const r=t.digest();return N.K3.encodeByteArray(r)},VI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=VI.apply(null,r):e+="object"==typeof r?(0,N.As)(r):r,e+=" "}return e};let cp=null,xie=!0;const Rie=function(n,e){(0,N.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(V_.logLevel=vo.$b.VERBOSE,cp=V_.log.bind(V_),e&&jj.set("logging_enabled",!0)):"function"==typeof n?cp=n:(cp=null,jj.remove("logging_enabled"))},Zi=function(...n){if(!0===xie&&(xie=!1,null===cp&&!0===jj.get("logging_enabled")&&Rie(!0)),cp){const e=VI.apply(null,n);cp(e)}},BI=function(n){return function(...e){Zi(n,...e)}},zj=function(...n){const e="FIREBASE INTERNAL ERROR: "+VI(...n);V_.error(e)},ql=function(...n){const e=`FIREBASE FATAL ERROR: ${VI(...n)}`;throw V_.error(e),new Error(e)},Rs=function(...n){const e="FIREBASE WARNING: "+VI(...n);V_.warn(e)},XD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Fd="[MIN_NAME]",tu="[MAX_NAME]",up=function(n,e){if(n===e)return 0;if(n===Fd||e===tu)return-1;if(e===Fd||n===tu)return 1;{const t=Nie(n),r=Nie(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},BHe=function(n,e){return n===e?0:n<e?-1:1},UI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.As)(e))},Hj=function(n){if("object"!=typeof n||null===n)return(0,N.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.As)(e[r]),t+=":",t+=Hj(n[e[r]]);return t+="}",t},Pie=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Mie=function(n){(0,N.vA)(!XD(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),d+=m}return d.toLowerCase()},HHe=new RegExp("^-?(0*)\\d{1,10}$"),Nie=function(n){if(HHe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},B_=function(n){try{n()}catch(e){setTimeout(()=>{throw Rs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},jI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class qHe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class KHe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Zi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rs(e)}}let zI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Vie=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zie="long_polling";class Wj{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Hie(n,e,t){let r;if((0,N.vA)("string"==typeof e,"typeof type must == string"),(0,N.vA)("object"==typeof t,"typeof params must == object"),"websocket"===e)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==zie)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function QHe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ji(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class YHe{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.A4)(this.counters_)}}const Gj={},qj={};function Kj(n){const e=n.toString();return Gj[e]||(Gj[e]=new YHe),Gj[e]}class ZHe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&B_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ld{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=BI(e),this.stats_=Kj(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),Hie(t,zie,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ZHe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qj((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Vie.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ld.forceAllow_=!0}static forceDisallow(){Ld.forceDisallow_=!0}static isAvailable(){return!((0,N.$g)()||!Ld.forceAllow_&&(Ld.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.KA)(t),i=Pie(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Qj{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Sie(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Qj.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Zi("frame writing exception"),a.stack&&Zi(a.stack),Zi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Zi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Zi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let JD=null;typeof MozWebSocket<"u"?JD=MozWebSocket:typeof WebSocket<"u"&&(JD=WebSocket);let U_=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=BI(this.connId),this.stats_=Kj(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,N.$g)()&&typeof location<"u"&&location.hostname&&Vie.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),Hie(t,"websocket",a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lp.set("previous_websocket_failure",!0);try{let i;if((0,N.$g)()){i={headers:{"User-Agent":`Firebase/5/${Bj}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new JD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==JD&&!n.forceDisallow_}static previouslyFailed(){return lp.isInMemoryStorage||!0===lp.get("previous_websocket_failure")}markConnectionHealthy(){lp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Pie(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Yie=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ld,U_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=U_&&U_.isAvailable();let i=r&&!U_.previouslyFailed();if(t.webSocketOnly&&(r||Rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[U_];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class rse{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=BI("c:"+this.id+":"),this.transportManager_=new Yie(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=jI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=UI("t",e),r=UI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=UI("t",e),r=UI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=UI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?zj("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zj("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),jI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ise{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class sse{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,N.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ex extends sse{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ex}getInitialEvent(e){return(0,N.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class jn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Rn(){return new jn("")}function nn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vd(n){return n.pieces_.length-n.pieceNum_}function ir(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new jn(n.pieces_,e)}function Xj(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function HI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lse(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new jn(e,0)}function Lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof jn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new jn(t,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function Zs(n,e){const t=nn(n),r=nn(e);if(null===t)return e;if(t===r)return Zs(ir(n),ir(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function b4e(n,e){const t=HI(n,0),r=HI(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=up(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Zj(n,e){if(Vd(n)!==Vd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ta(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Vd(n)>Vd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class E4e{constructor(e,t){this.errorPrefix_=t,this.parts_=HI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.OE)(this.parts_[r]);cse(this)}}function cse(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+dp(n))}function dp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Jj extends sse{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Jj}getInitialEvent(e){return(0,N.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const $I=1e3;let nx,hp=(()=>{class n extends ise{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=BI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$I,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,N.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jj.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ex.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,N.As)(o)),(0,N.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new N.cY,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,N.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.vA)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.gR)(t,"w")){const i=(0,N.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,N.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):zj("Unrecognized action received from server: "+(0,N.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$I,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$I,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$I),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,k.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(y){(0,N.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,b]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?Zi("getToken() completed but was canceled"):(Zi("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=b&&b.token,c=new rse(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{Rs(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&Rs(y),u())}}})()}interrupt(t){Zi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.Im)(this.interruptReasons_)&&(this.reconnectDelay_=$I,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>Hj(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new jn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Zi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Zi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Bj.replace(/\./g,"-")]=1,(0,N.jZ)()?t["framework.cordova"]=1:(0,N.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ex.getInstance().currentlyOnline();return(0,N.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class tx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new an(Fd,e),i=new an(Fd,t);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class hse extends tx{static get __EMPTY_NODE(){return nx}static set __EMPTY_NODE(e){nx=e}compare(e,t){return up(e.name,t.name)}isDefinedOn(e){throw(0,N.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(tu,nx)}makePost(e,t){return(0,N.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,nx)}toString(){return".key"}}const Kl=new hse;class rx{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let tz,rl=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??To.EMPTY_NODE,this.right=o??To.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return To.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return To.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class To{constructor(e,t=To.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new To(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,rl.BLACK,null,null))}remove(e){return new To(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rx(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rx(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rx(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rx(this.root_,null,this.comparator_,!0,e)}}function x4e(n,e){return up(n.name,e.name)}function ez(n,e){return up(n,e)}To.EMPTY_NODE=new class D4e{copy(e,t,r,i,s){return this}insert(e,t,r){return new rl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fse=function(n){return"number"==typeof n?"number:"+Mie(n):"string:"+n},pse=function(n){if(n.isLeafNode()){const e=n.val();(0,N.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.gR)(e,".sv"),"Priority must be a string or number.")}else(0,N.vA)(n===tz||n.isEmpty(),"priority of unexpected type.");(0,N.vA)(n===tz||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mse,gse,_se,j_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),pse(this.priorityNode_)}static set __childrenNodeConstructor(t){mse=t}static get __childrenNodeConstructor(){return mse}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return rn(t)?this:".priority"===nn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=nn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.vA)(".priority"!==i||1===Vd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ir(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fse(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Mie(this.value_):this.value_,this.lazyHash_=Die(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.vA)(s>=0,"Unknown leaf type: "+r),(0,N.vA)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const mr=new class N4e extends tx{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?up(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(tu,new j_("[PRIORITY-POST]",_se))}makePost(e,t){const r=gse(e);return new an(t,new j_("[PRIORITY-POST]",r))}toString(){return".priority"}},k4e=Math.log(2);class O4e{constructor(e){this.count=parseInt(Math.log(e+1)/k4e,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ix=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let d,m;if(0===u)return null;if(1===u)return d=n[l],m=t?t(d):d,new rl(m,d.node,rl.BLACK,null,null);{const y=parseInt(u/2,10)+l,b=i(l,y),T=i(y+1,c);return d=n[y],m=t?t(d):d,new rl(m,d.node,rl.BLACK,b,T)}},a=function(l){let c=null,u=null,d=n.length;const m=function(b,T){const P=d-b,B=d;d-=b;const V=i(P+1,B),Q=n[P],be=t?t(Q):Q;y(new rl(be,Q.node,T,null,V))},y=function(b){c?(c.left=b,c=b):(u=b,c=b)};for(let b=0;b<l.count;++b){const T=l.nextBitIsOne(),P=Math.pow(2,l.count-(b+1));T?m(P,rl.BLACK):(m(P,rl.BLACK),m(P,rl.RED))}return u}(new O4e(n.length));return new To(r||e,a)};let nz;const z_={};class nu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.vA)(z_&&mr,"ChildrenNode.ts has not been loaded"),nz=nz||new nu({".priority":z_},{".priority":mr}),nz}get(e){const t=(0,N.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof To?t:null}hasIndex(e){return(0,N.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.vA)(e!==Kl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(an.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?ix(r,e.getCompare()):z_;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new nu(u,c)}addToIndexes(e,t){const r=(0,N.kH)(this.indexes_,(i,s)=>{const o=(0,N.yw)(this.indexSet_,s);if((0,N.vA)(o,"Missing index implementation for "+s),i===z_){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(an.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),ix(a,o.getCompare())}return z_}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new an(e.name,a))),l.insert(e,e.node)}});return new nu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.kH)(this.indexes_,i=>{if(i===z_)return i;{const s=t.get(e.name);return s?i.remove(new an(e.name,s)):i}});return new nu(r,this.indexSet_)}}let WI,zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pse(this.priorityNode_),this.children_.isEmpty()&&(0,N.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return WI||(WI=new n(new To(ez),null,nu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||WI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?WI:r}}getChild(t){const r=nn(t);return null===r?this:this.getImmediateChild(r).getChild(ir(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new an(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?WI:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=nn(t);if(null===i)return r;{(0,N.vA)(".priority"!==nn(t)||1===Vd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ir(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(mr,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+fse(this.getPriority().val())+":"),this.forEachChild(mr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Die(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new an(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new an(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new an(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,an.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===GI?-1:0}withIndex(t){if(t===Kl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Kl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(mr),s=r.getIterator(mr);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Kl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const GI=new class F4e extends zt{constructor(){super(new To(ez),zt.EMPTY_NODE,nu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return zt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(an,{MIN:{value:new an(Fd,zt.EMPTY_NODE)},MAX:{value:new an(tu,GI)}}),hse.__EMPTY_NODE=zt.EMPTY_NODE,j_.__childrenNodeConstructor=zt,function R4e(n){tz=n}(GI),function M4e(n){_se=n}(GI);const L4e=!0;function qr(n,e=null){if(null===n)return zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new j_(n,qr(e));if(n instanceof Array||!L4e){let t=zt.EMPTY_NODE;return Ji(n,(r,i)=>{if((0,N.gR)(n,r)&&"."!==r.substring(0,1)){const s=qr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(qr(e))}{const t=[];let r=!1;if(Ji(n,(o,a)=>{if("."!==o.substring(0,1)){const l=qr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new an(o,l)))}}),0===t.length)return zt.EMPTY_NODE;const s=ix(t,x4e,o=>o.name,ez);if(r){const o=ix(t,mr.getCompare());return new zt(s,qr(e),new nu({".priority":o},{".priority":mr}))}return new zt(s,qr(e),nu.Default)}}!function P4e(n){gse=n}(qr);class rz extends tx{constructor(e){super(),this.indexPath_=e,(0,N.vA)(!rn(e)&&".priority"!==nn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?up(e.name,t.name):s}makePost(e,t){const r=qr(e),i=zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(t,i)}maxPost(){const e=zt.EMPTY_NODE.updateChild(this.indexPath_,GI);return new an(tu,e)}toString(){return HI(this.indexPath_,0).join("/")}}const iz=new class V4e extends tx{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?up(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const r=qr(e);return new an(t,r)}toString(){return".value"}};function yse(n){return{type:"value",snapshotNode:n}}function H_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function qI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function KI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class sz{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,N.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(qI(t,a)):(0,N.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(H_(t,r)):o.trackChildChange(KI(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(mr,(i,s)=>{t.hasChild(i)||r.trackChildChange(qI(i,s))}),t.isLeafNode()||t.forEachChild(mr,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(KI(i,s,o))}else r.trackChildChange(H_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class QI{constructor(e){this.indexedFilter_=new sz(e.getIndex()),this.index_=e.getIndex(),this.startPost_=QI.getStartPost_(e),this.endPost_=QI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new an(t,r))||(r=zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(zt.EMPTY_NODE);const s=this;return t.forEachChild(mr,(o,a)=>{s.matches(new an(o,a))||(i=i.updateImmediateChild(o,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class U4e{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new QI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new an(t,r))||(r=zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=zt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(zt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(m,y)=>d(y,m)}else o=this.index_.getCompare();const a=e;(0,N.vA)(a.numChildren()===this.limit_,"");const l=new an(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!r.isEmpty()&&y>=0)return s?.trackChildChange(KI(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(qI(t,d));const T=a.updateImmediateChild(t,zt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(H_(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(qI(c.name,c.node)),s.trackChildChange(H_(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,zt.EMPTY_NODE)):e}}class sx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mr}copy(){const e=new sx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oz(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function az(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ox(n,e){const t=n.copy();return t.index_=e,t}function vse(n){const e={};if(n.isDefault())return e;let t;if(n.index_===mr?t="$priority":n.index_===iz?t="$value":n.index_===Kl?t="$key":((0,N.vA)(n.index_ instanceof rz,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,N.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,N.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,N.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,N.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function bse(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==mr&&(e.i=n.index_.toString()),e}class ax extends ise{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=BI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=ax.getListenId_(e,r),a={};this.listens_[o]=a;const l=vse(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),(0,N.yw)(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=ax.getListenId_(e,t);delete this.listens_[r]}get(e){const t=vse(e._queryParams),r=e._path.toString(),i=new N.cY;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.Am)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,N.$L)(a.responseText)}catch{Rs("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Rs("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class G4e{constructor(){this.rootNode_=zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function lx(){return{value:null,children:new Map}}function $_(n,e,t){if(rn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=nn(e);n.children.has(r)||n.children.set(r,lx()),$_(n.children.get(r),e=ir(e),t)}}function lz(n,e){if(rn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(mr,(r,i)=>{$_(n,new jn(r),i)}),lz(n,e)}}if(n.children.size>0){const t=nn(e);return e=ir(e),n.children.has(t)&&lz(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function cz(n,e,t){null!==n.value?t(e,n.value):function q4e(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{cz(i,new jn(e.toString()+"/"+r),t)})}class K4e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ji(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class X4e{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new K4e(e);const r=1e4+2e4*Math.random();jI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ji(e,(i,s)=>{s>0&&(0,N.gR)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),jI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ql=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ql||{});function hz(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class cx{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ql.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,N.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new jn(e));return new cx(Rn(),t,this.revert)}}return(0,N.vA)(nn(this.path)===e,"operationForChild called for unrelated child."),new cx(ir(this.path),this.affectedTree,this.revert)}}class YI{constructor(e,t){this.source=e,this.path=t,this.type=Ql.LISTEN_COMPLETE}operationForChild(e){return rn(this.path)?new YI(this.source,Rn()):new YI(this.source,ir(this.path))}}class fp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ql.OVERWRITE}operationForChild(e){return rn(this.path)?new fp(this.source,Rn(),this.snap.getImmediateChild(e)):new fp(this.source,ir(this.path),this.snap)}}class W_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ql.MERGE}operationForChild(e){if(rn(this.path)){const t=this.children.subtree(new jn(e));return t.isEmpty()?null:t.value?new fp(this.source,Rn(),t.value):new W_(this.source,Rn(),t)}return(0,N.vA)(nn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new W_(this.source,ir(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rn(e))return this.isFullyInitialized()&&!this.filtered_;const t=nn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Z4e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function XI(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function t$e(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.Hk)("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function e$e(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function ux(n,e){return{eventCache:n,serverCache:e}}function ZI(n,e,t,r){return ux(new Bd(e,t,r),n.serverCache)}function Ise(n,e,t,r){return ux(n.eventCache,new Bd(e,t,r))}function dx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function pp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let fz;class gr{constructor(e,t=(()=>(fz||(fz=new To(BHe)),fz))()){this.value=e,this.children=t}static fromObject(e){let t=new gr(null);return Ji(e,(r,i)=>{t=t.set(new jn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Rn(),value:this.value};if(rn(e))return null;{const r=nn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(ir(e),t);return null!=s?{path:Lr(new jn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rn(e))return this;{const t=nn(e),r=this.children.get(t);return null!==r?r.subtree(ir(e)):new gr(null)}}set(e,t){if(rn(e))return new gr(t,this.children);{const r=nn(e),s=(this.children.get(r)||new gr(null)).set(ir(e),t),o=this.children.insert(r,s);return new gr(this.value,o)}}remove(e){if(rn(e))return this.children.isEmpty()?new gr(null):new gr(null,this.children);{const t=nn(e),r=this.children.get(t);if(r){const i=r.remove(ir(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new gr(null):new gr(this.value,s)}return this}}get(e){if(rn(e))return this.value;{const t=nn(e),r=this.children.get(t);return r?r.get(ir(e)):null}}setTree(e,t){if(rn(e))return t;{const r=nn(e),s=(this.children.get(r)||new gr(null)).setTree(ir(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new gr(this.value,o)}}fold(e){return this.fold_(Rn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Rn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(rn(e))return null;{const s=nn(e),o=this.children.get(s);return o?o.findOnPath_(ir(e),Lr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Rn(),t)}foreachOnPath_(e,t,r){if(rn(e))return this;{this.value&&r(t,this.value);const i=nn(e),s=this.children.get(i);return s?s.foreachOnPath_(ir(e),Lr(t,i),r):new gr(null)}}foreach(e){this.foreach_(Rn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class il{constructor(e){this.writeTree_=e}static empty(){return new il(new gr(null))}}function JI(n,e,t){if(rn(e))return new il(new gr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Zs(i,e);return s=s.updateChild(o,t),new il(n.writeTree_.set(i,s))}{const i=new gr(t),s=n.writeTree_.setTree(e,i);return new il(s)}}}function pz(n,e,t){let r=n;return Ji(t,(i,s)=>{r=JI(r,Lr(e,i),s)}),r}function wse(n,e){if(rn(e))return il.empty();{const t=n.writeTree_.setTree(e,new gr(null));return new il(t)}}function mz(n,e){return null!=mp(n,e)}function mp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Zs(t.path,e)):null}function Cse(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(mr,(r,i)=>{e.push(new an(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function Ud(n,e){if(rn(e))return n;{const t=mp(n,e);return new il(null!=t?new gr(t):n.writeTree_.subtree(e))}}function gz(n){return n.writeTree_.isEmpty()}function G_(n,e){return Tse(Rn(),n.writeTree_,e)}function Tse(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,N.vA)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=Tse(Lr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Lr(n,".priority"),r)),t}}function hx(n,e){return Rse(e,n)}function a$e(n,e){if(n.snap)return Ta(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ta(Lr(n.path,t),e))return!0;return!1}function c$e(n){return n.visible}function Ase(n,e,t){let r=il.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Ta(t,o)?(a=Zs(t,o),r=JI(r,a,s.snap)):Ta(o,t)&&(a=Zs(o,t),r=JI(r,Rn(),s.snap.getChild(a)));else{if(!s.children)throw(0,N.Hk)("WriteRecord should have .snap or .children");if(Ta(t,o))a=Zs(t,o),r=pz(r,a,s.children);else if(Ta(o,t))if(a=Zs(o,t),rn(a))r=pz(r,Rn(),s.children);else{const l=(0,N.yw)(s.children,nn(a));if(l){const c=l.getChild(ir(a));r=JI(r,Rn(),c)}}}}}return r}function Sse(n,e,t,r,i){if(r||i){const s=Ud(n.visibleWrites,e);return!i&&gz(s)?t:i||null!=t||mz(s,Rn())?G_(Ase(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Ta(c.path,e)||Ta(e,c.path))},e),t||zt.EMPTY_NODE):null}{const s=mp(n.visibleWrites,e);if(null!=s)return s;{const o=Ud(n.visibleWrites,e);return gz(o)?t:null!=t||mz(o,Rn())?G_(o,t||zt.EMPTY_NODE):null}}}function fx(n,e,t,r){return Sse(n.writeTree,n.treePath,e,t,r)}function _z(n,e){return function u$e(n,e,t){let r=zt.EMPTY_NODE;const i=mp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Ud(n.visibleWrites,e);return t.forEachChild(mr,(o,a)=>{const l=G_(Ud(s,new jn(o)),a);r=r.updateImmediateChild(o,l)}),Cse(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return Cse(Ud(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function Dse(n,e,t,r){return function d$e(n,e,t,r,i){(0,N.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Lr(e,t);if(mz(n.visibleWrites,s))return null;{const o=Ud(n.visibleWrites,s);return gz(o)?i.getChild(t):G_(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function px(n,e){return function f$e(n,e){return mp(n.visibleWrites,e)}(n.writeTree,Lr(n.treePath,e))}function yz(n,e,t){return function h$e(n,e,t,r){const i=Lr(e,t),s=mp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?G_(Ud(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function xse(n,e){return Rse(Lr(n.treePath,e),n.writeTree)}function Rse(n,e){return{treePath:n,writeTree:e}}class _$e{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,KI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,qI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,H_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,KI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Pse=new class y$e{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class vz{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Bd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yz(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pp(this.viewCache_),s=function g$e(n,e,t,r,i,s){return function p$e(n,e,t,r,i,s,o){let a;const l=Ud(n.visibleWrites,e),c=mp(l,Rn());if(null!=c)a=c;else{if(null==t)return[];a=G_(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&u.length<i;)0!==d(y,r)&&u.push(y),y=m.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Mse(n,e,t,r,i,s){const o=e.eventCache;if(null!=px(r,t))return e;{let a,l;if(rn(t))if((0,N.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=pp(e),d=_z(r,c instanceof zt?c:zt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=fx(r,pp(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=nn(t);if(".priority"===c){(0,N.vA)(1===Vd(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=Dse(r,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=ir(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=Dse(r,t,o.getNode(),l);d=null!=m?o.getNode().getImmediateChild(c).updateChild(u,m):o.getNode().getImmediateChild(c)}else d=yz(r,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return ZI(e,a,o.isFullyInitialized()||rn(t),n.filter.filtersNodes())}}function mx(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(rn(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),y,null)}else{const y=nn(t);if(!l.isCompleteForPath(t)&&Vd(t)>1)return e;const b=ir(t),P=l.getNode().getImmediateChild(y).updateChild(b,r);c=".priority"===y?u.updatePriority(l.getNode(),P):u.updateChild(l.getNode(),y,P,b,Pse,null)}const d=Ise(e,c,l.isFullyInitialized()||rn(t),u.filtersNodes());return Mse(n,d,t,i,new vz(i,d,s),a)}function bz(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new vz(i,e,s);if(rn(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ZI(e,c,!0,n.filter.filtersNodes());else{const d=nn(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=ZI(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=ir(t),y=a.getNode().getImmediateChild(d);let b;if(rn(m))b=r;else{const T=u.getCompleteChild(d);b=null!=T?".priority"===Xj(m)&&T.getChild(lse(m)).isEmpty()?T:T.updateChild(m,r):zt.EMPTY_NODE}l=y.equals(b)?e:ZI(e,n.filter.updateChild(a.getNode(),d,b,m,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function Nse(n,e){return n.eventCache.isCompleteForChild(e)}function kse(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ez(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=rn(t)?r:new gr(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,m)=>{if(u.hasChild(d)){const b=kse(0,e.serverCache.getNode().getImmediateChild(d),m);l=mx(n,l,new jn(d),b,i,s,o,a)}}),c.children.inorderTraversal((d,m)=>{const y=!e.serverCache.isCompleteForChild(d)&&null===m.value;if(!u.hasChild(d)&&!y){const T=kse(0,e.serverCache.getNode().getImmediateChild(d),m);l=mx(n,l,new jn(d),T,i,s,o,a)}}),l}class S$e{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new sz(r.getIndex()),s=function j4e(n){return n.loadsAllData()?new sz(n.getIndex()):n.hasLimit()?new U4e(n):new QI(n)}(r);this.processor_=function v$e(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(zt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(zt.EMPTY_NODE,a.getNode(),null),u=new Bd(l,o.isFullyInitialized(),i.filtersNodes()),d=new Bd(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=ux(d,u),this.eventGenerator_=new Z4e(this.query_)}get query(){return this.query_}}function R$e(n,e){const t=pp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rn(e)&&!t.getImmediateChild(nn(e)).isEmpty())?t.getChild(e):null}function Ose(n){return 0===n.eventRegistrations_.length}function Fse(n,e,t){const r=[];if(t){(0,N.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Lse(n,e,t,r){e.type===Ql.MERGE&&null!==e.source.queryId&&((0,N.vA)(pp(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.vA)(dx(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function E$e(n,e,t,r,i){const s=new _$e;let o,a;if(t.type===Ql.OVERWRITE){const c=t;c.source.fromUser?o=bz(n,e,c.path,c.snap,r,i,s):((0,N.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!rn(c.path),o=mx(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Ql.MERGE){const c=t;c.source.fromUser?o=function w$e(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Lr(t,l);Nse(e,nn(u))&&(a=bz(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Lr(t,l);Nse(e,nn(u))||(a=bz(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,N.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Ez(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Ql.ACK_USER_WRITE){const c=t;o=c.revert?function A$e(n,e,t,r,i,s){let o;if(null!=px(r,t))return e;{const a=new vz(r,e,i),l=e.eventCache.getNode();let c;if(rn(t)||".priority"===nn(t)){let u;if(e.serverCache.isFullyInitialized())u=fx(r,pp(e));else{const d=e.serverCache.getNode();(0,N.vA)(d instanceof zt,"serverChildren would be complete if leaf node"),u=_z(r,d)}c=n.filter.updateFullNode(l,u,s)}else{const u=nn(t);let d=yz(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,ir(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,zt.EMPTY_NODE,ir(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=fx(r,pp(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=px(r,Rn()),ZI(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function C$e(n,e,t,r,i,s,o){if(null!=px(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(rn(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return mx(n,e,t,l.getNode().getChild(t),i,s,a,o);if(rn(t)){let c=new gr(null);return l.getNode().forEachChild(Kl,(u,d)=>{c=c.set(new jn(u),d)}),Ez(n,e,t,c,i,s,a,o)}return e}{let c=new gr(null);return r.foreach((u,d)=>{const m=Lr(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),Ez(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==Ql.LISTEN_COMPLETE)throw(0,N.Hk)("Unknown operation type: "+t.type);o=function T$e(n,e,t,r,i){const s=e.serverCache;return Mse(n,Ise(e,s.getNode(),s.isFullyInitialized()||rn(t),s.isFiltered()),t,r,Pse,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function I$e(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=dx(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(yse(dx(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function b$e(n,e){(0,N.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Vse(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Vse(n,e,t,r){return function J4e(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function B4e(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),XI(n,i,"child_removed",e,r,t),XI(n,i,"child_added",e,r,t),XI(n,i,"child_moved",s,r,t),XI(n,i,"child_changed",e,r,t),XI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let gx,yx;class Bse{constructor(){this.views=new Map}}function Iz(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,N.vA)(null!=s,"SyncTree gave us an op for an invalid query."),Lse(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(Lse(o,e,t,r));return s}}function Use(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=fx(t,i?r:null),l=!1;a?l=!0:r instanceof zt?(a=_z(t,r),l=!1):(a=zt.EMPTY_NODE,l=!1);const c=ux(new Bd(a,l,!1),new Bd(r,i,!1));return new S$e(e,c)}return o}function jse(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function jd(n,e){let t=null;for(const r of n.views.values())t=t||R$e(r,e);return t}function zse(n,e){return e._queryParams.loadsAllData()?_x(n):n.views.get(e._queryIdentifier)}function Hse(n,e){return null!=zse(n,e)}function zd(n){return null!=_x(n)}function _x(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let U$e=1;class $se{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gr(null),this.pendingWriteTree_=function m$e(){return{visibleWrites:il.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wz(n,e,t,r,i){return function r$e(n,e,t,r,i){(0,N.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=JI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?q_(n,new fp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Hd(n,e,t=!1){const r=function s$e(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function o$e(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,N.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&a$e(a,r.path)?i=!1:Ta(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function l$e(n){n.visibleWrites=Ase(n.allWrites,c$e,Rn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=wse(n.visibleWrites,r.path):Ji(r.children,l=>{n.visibleWrites=wse(n.visibleWrites,Lr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new gr(null);return null!=r.snap?s=s.set(Rn(),!0):Ji(r.children,o=>{s=s.set(new jn(o),!0)}),q_(n,new cx(r.path,s,t))}return[]}function ew(n,e,t){return q_(n,new fp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function vx(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||Hse(o,e))){const l=function L$e(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=zd(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(Fse(c,t,r)),Ose(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(Fse(l,t,r)),Ose(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!zd(n)&&s.push(new(function k$e(){return(0,N.vA)(gx,"Reference.ts has not been loaded"),gx}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function O$e(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(m,y)=>zd(y));if(u&&!d){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function q$e(n){return n.fold((e,t,r)=>{if(t&&zd(t))return[_x(t)];{let i=[];return t&&(i=jse(t)),Ji(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let b=0;b<y.length;++b){const T=y[b],P=T.query,B=Kse(n,T);n.listenProvider_.startListening(nw(P),tw(n,P),B.hashFn,B.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(nw(e),null):c.forEach(m=>{const y=n.queryToTagMap.get(Ex(m));n.listenProvider_.stopListening(nw(m),y)}))}!function K$e(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Ex(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function Wse(n,e,t,r){const i=Tz(n,r);if(null!=i){const s=Az(i),o=s.path,a=s.queryId,l=Zs(o,e);return Sz(n,o,new fp(hz(a),l,t))}return[]}function Cz(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,y)=>{const b=Zs(m,i);s=s||jd(y,b),o=o||zd(y)});let l,a=n.syncPointTree_.get(i);a?(o=o||zd(a),s=s||jd(a,Rn())):(a=new Bse,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,b)=>{const T=jd(b,Rn());T&&(s=s.updateImmediateChild(y,T))}));const c=Hse(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=Ex(e);(0,N.vA)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function Q$e(){return U$e++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let d=function F$e(n,e,t,r,i,s){const o=Use(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function P$e(n,e){n.eventRegistrations_.push(e)}(o,t),function M$e(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(mr,(s,o)=>{r.push(H_(s,o))}),t.isFullyInitialized()&&r.push(yse(t.getNode())),Vse(n,r,t.getNode(),e)}(o,t)}(a,e,t,hx(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const m=zse(a,e);d=d.concat(function Y$e(n,e,t){const r=e._path,i=tw(n,e),s=Kse(n,t),o=n.listenProvider_.startListening(nw(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,N.vA)(!zd(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!rn(c)&&u&&zd(u))return[_x(u).query];{let m=[];return u&&(m=m.concat(jse(u).map(y=>y.query))),Ji(d,(y,b)=>{m=m.concat(b)}),m}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(nw(u),tw(n,u))}}return o}(n,e,m))}return d}function bx(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=jd(a,Zs(o,e));if(c)return c});return Sse(i,e,s,t,!0)}function q_(n,e){return Gse(e,n.syncPointTree_,null,hx(n.pendingWriteTree_,Rn()))}function Gse(n,e,t,r){if(rn(n.path))return qse(n,e,t,r);{const i=e.get(Rn());null==t&&null!=i&&(t=jd(i,Rn()));let s=[];const o=nn(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=xse(r,o);s=s.concat(Gse(a,l,c,u))}return i&&(s=s.concat(Iz(i,n,r,t))),s}}function qse(n,e,t,r){const i=e.get(Rn());null==t&&null!=i&&(t=jd(i,Rn()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=xse(r,o),u=n.operationForChild(o);u&&(s=s.concat(qse(u,a,l,c)))}),i&&(s=s.concat(Iz(i,n,r,t))),s}function Kse(n,e){const t=e.query,r=tw(n,t);return{hashFn:()=>(function D$e(n){return n.viewCache_.serverCache.getNode()}(e)||zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function $$e(n,e,t){const r=Tz(n,t);if(r){const i=Az(r),s=i.path,o=i.queryId,a=Zs(s,e);return Sz(n,s,new YI(hz(o),a))}return[]}(n,t._path,r):function H$e(n,e){return q_(n,new YI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function zHe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return vx(n,t,null,s)}}}}function tw(n,e){const t=Ex(e);return n.queryToTagMap.get(t)}function Ex(n){return n._path.toString()+"$"+n._queryIdentifier}function Tz(n,e){return n.tagToQueryMap.get(e)}function Az(n){const e=n.indexOf("$");return(0,N.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new jn(n.substr(0,e))}}function Sz(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.vA)(r,"Missing sync point for query tag that we're tracking"),Iz(r,t,hx(n.pendingWriteTree_,e),null)}function nw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function B$e(){return(0,N.vA)(yx,"Reference.ts has not been loaded"),yx}())(n._repo,n._path):n}class Dz{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Dz(t)}node(){return this.node_}}class xz{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Lr(this.path_,e);return new xz(this.syncTree_,t)}node(){return bx(this.syncTree_,this.path_)}}const X$e=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Qse=function(n,e,t){return n&&"object"==typeof n?((0,N.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Z$e(n[".sv"],e,t):"object"==typeof n[".sv"]?J$e(n[".sv"],e):void(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Z$e=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.vA)(!1,"Unexpected server value: "+n)},J$e=function(n,e,t){n.hasOwnProperty("increment")||(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},Yse=function(n,e,t,r){return Pz(e,new xz(t,n),r)},Rz=function(n,e,t){return Pz(n,new Dz(e),t)};function Pz(n,e,t){const r=n.getPriority().val(),i=Qse(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=Qse(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new j_(a,qr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new j_(i))),o.forEachChild(mr,(a,l)=>{const c=Pz(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class Mz{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Ix(n,e){let t=e instanceof jn?e:new jn(e),r=n,i=nn(t);for(;null!==i;){const s=(0,N.yw)(r.node.children,i)||{children:{},childCount:0};r=new Mz(i,r,s),t=ir(t),i=nn(t)}return r}function gp(n){return n.node.value}function Nz(n,e){n.node.value=e,kz(n)}function Xse(n){return n.node.childCount>0}function wx(n,e){Ji(n.node.children,(t,r)=>{e(new Mz(t,n,r))})}function Zse(n,e,t,r){t&&!r&&e(n),wx(n,i=>{Zse(i,e,!0,r)}),t&&r&&e(n)}function rw(n){return new jn(null===n.parent?n.name:rw(n.parent)+"/"+n.name)}function kz(n){null!==n.parent&&function nWe(n,e,t){const r=function eWe(n){return void 0===gp(n)&&!Xse(n)}(t),i=(0,N.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,kz(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,kz(n))}(n.parent,n.name,n)}const rWe=/[\[\].#$\/\u0000-\u001F\u007F]/,iWe=/[\[\].#$\u0000-\u001F\u007F]/,Oz=10485760,Cx=function(n){return"string"==typeof n&&0!==n.length&&!rWe.test(n)},Jse=function(n){return"string"==typeof n&&0!==n.length&&!iWe.test(n)},iw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!XD(n)||n&&"object"==typeof n&&(0,N.gR)(n,".sv")},Yl=function(n,e,t,r){r&&void 0===e||sw((0,N.dI)(n,"value"),e,t)},sw=function(n,e,t){const r=t instanceof jn?new E4e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+dp(r));if("function"==typeof e)throw new Error(n+"contains a function "+dp(r)+" with contents = "+e.toString());if(XD(e))throw new Error(n+"contains "+e.toString()+" "+dp(r));if("string"==typeof e&&e.length>Oz/3&&(0,N.OE)(e)>Oz)throw new Error(n+"contains a string greater than "+Oz+" utf8 bytes "+dp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Ji(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Cx(o)))throw new Error(n+" contains an invalid key ("+o+") "+dp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function I4e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.OE)(e),cse(n)})(r,o),sw(n,a,r),function w4e(n){const e=n.parts_.pop();n.byteLength_-=(0,N.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+dp(r)+" in addition to actual children.")}},eoe=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Ji(e,(o,a)=>{const l=new jn(o);if(sw(i,a,Lr(t,l)),".priority"===Xj(l)&&!iw(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=HI(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!Cx(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(b4e);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ta(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Fz=function(n,e,t){if(!t||void 0!==e){if(XD(e))throw new Error((0,N.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!iw(e))throw new Error((0,N.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ow=function(n,e,t,r){if(!(r&&void 0===t||Cx(t)))throw new Error((0,N.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},aw=function(n,e,t,r){if(!(r&&void 0===t||Jse(t)))throw new Error((0,N.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},aWe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),aw(n,e,t,r)},Aa=function(n,e){if(".info"===nn(e))throw new Error(n+" failed = Can't modify data under /.info/")},toe=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Cx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Jse(n)}(t))throw new Error((0,N.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class lWe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Tx(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!Zj(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function noe(n,e,t){Tx(n,t),roe(n,r=>Zj(r,e))}function Zo(n,e,t){Tx(n,t),roe(n,r=>Ta(r,e)||Ta(e,r))}function roe(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(cWe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function cWe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();cp&&Zi("event: "+t.toString()),B_(r)}}}const ioe="repo_interrupt",uWe=25;class dWe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lWe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lx(),this.transactionQueueTree_=new Mz,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function soe(n){const t=n.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function lw(n){return X$e({timestamp:soe(n)})}function ooe(n,e,t,r,i){n.dataUpdateCount++;const s=new jn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,N.kH)(t,c=>qr(c));o=function W$e(n,e,t,r){const i=Tz(n,r);if(i){const s=Az(i),o=s.path,a=s.queryId,l=Zs(o,e),c=gr.fromObject(t);return Sz(n,o,new W_(hz(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=qr(t);o=Wse(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,N.kH)(t,c=>qr(c));o=function z$e(n,e,t){const r=gr.fromObject(t);return q_(n,new W_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=qr(t);o=ew(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Q_(n,s)),Zo(n.eventQueue_,a,o)}function aoe(n,e){Lz(n,"connected",e),!1===e&&function gWe(n){K_(n,"onDisconnectEvents");const e=lw(n),t=lx();cz(n.onDisconnect_,Rn(),(i,s)=>{const o=Yse(i,s,n.serverSyncTree_,e);$_(t,i,o)});let r=[];cz(t,Rn(),(i,s)=>{r=r.concat(ew(n.serverSyncTree_,i,s));const o=jz(n,i);Q_(n,o)}),n.onDisconnect_=lx(),Zo(n.eventQueue_,Rn(),r)}(n)}function Lz(n,e,t){const r=new jn("/.info/"+e),i=qr(t);n.infoData_.updateSnapshot(r,i);const s=ew(n.infoSyncTree_,r,i);Zo(n.eventQueue_,r,s)}function Ax(n){return n.nextWriteId_++}function Vz(n,e,t,r,i){K_(n,"set",{path:e.toString(),value:t,priority:r});const s=lw(n),o=qr(t,r),a=bx(n.serverSyncTree_,e),l=Rz(o,a,s),c=Ax(n),u=wz(n.serverSyncTree_,e,l,c,!0);Tx(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(m,y)=>{const b="ok"===m;b||Rs("set at "+e+" failed: "+m);const T=Hd(n.serverSyncTree_,c,!b);Zo(n.eventQueue_,e,T),$d(0,i,m,y)});const d=jz(n,e);Q_(n,d),Zo(n.eventQueue_,d,[])}function _We(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&lz(n.onDisconnect_,e),$d(0,t,r,i)})}function loe(n,e,t,r){const i=qr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&$_(n.onDisconnect_,e,i),$d(0,r,s,o)})}function Bz(n,e,t){let r;r=".info"===nn(e._path)?vx(n.infoSyncTree_,e,t):vx(n.serverSyncTree_,e,t),noe(n.eventQueue_,e._path,r)}function coe(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ioe)}function K_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Zi(t,...e)}function $d(n,e,t,r){e&&B_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Uz(n,e,t){return bx(n.serverSyncTree_,e,t)||zt.EMPTY_NODE}function Sx(n,e=n.transactionQueueTree_){if(e||Dx(n,e),gp(e)){const t=doe(n,e);(0,N.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function wWe(n,e,t){const r=t.map(c=>c.currentWriteId),i=Uz(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];(0,N.vA)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Zs(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{K_(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(Hd(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&d.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Dx(n,Ix(n.transactionQueueTree_,e)),Sx(n,n.transactionQueueTree_),Zo(n.eventQueue_,e,u);for(let m=0;m<d.length;m++)B_(d[m])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Rs("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Q_(n,e)}},o)}(n,rw(e),t)}else Xse(e)&&wx(e,t=>{Sx(n,t)})}function Q_(n,e){const t=uoe(n,e),r=rw(t);return function CWe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Zs(t,l.path);let d,u=!1;if((0,N.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,i=i.concat(Hd(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=uWe)u=!0,d="maxretry",i=i.concat(Hd(n.serverSyncTree_,l.currentWriteId,!0));else{const m=Uz(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){sw("transaction failed: Data returned ",y,l.path);let b=qr(y);"object"==typeof y&&null!=y&&(0,N.gR)(y,".priority")||(b=b.updatePriority(m.getPriority()));const P=l.currentWriteId,B=lw(n),V=Rz(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=Ax(n),o.splice(o.indexOf(P),1),i=i.concat(wz(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(Hd(n.serverSyncTree_,P,!0))}else u=!0,d="nodata",i=i.concat(Hd(n.serverSyncTree_,l.currentWriteId,!0))}Zo(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Dx(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)B_(r[a]);Sx(n,n.transactionQueueTree_)}(n,doe(n,t),r),r}function uoe(n,e){let t,r=n.transactionQueueTree_;for(t=nn(e);null!==t&&void 0===gp(r);)r=Ix(r,t),t=nn(e=ir(e));return r}function doe(n,e){const t=[];return hoe(n,e,t),t.sort((r,i)=>r.order-i.order),t}function hoe(n,e,t){const r=gp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);wx(e,i=>{hoe(n,i,t)})}function Dx(n,e){const t=gp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Nz(e,t.length>0?t:void 0)}wx(e,r=>{Dx(n,r)})}function jz(n,e){const t=rw(uoe(n,e)),r=Ix(n.transactionQueueTree_,e);return function tWe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{zz(n,i)}),zz(n,r),Zse(r,i=>{zz(n,i)}),t}function zz(n,e){const t=gp(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,N.vA)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,N.vA)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Hd(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Nz(e,void 0):t.length=s+1,Zo(n.eventQueue_,rw(e),i);for(let o=0;o<r.length;o++)B_(r[o])}}const Hz=function(n,e){const t=SWe(n),r=t.namespace;return"firebase.com"===t.domain&&ql(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ql("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Wj(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new jn(t.pathString)}},SWe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=function TWe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,d)));const m=function AWe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},foe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",DWe=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=foe.charAt(t%64),t=Math.floor(t/64);(0,N.vA)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=foe.charAt(e[i]);return(0,N.vA)(20===o.length,"nextPushId: Length should be 20."),o}}();class poe{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.As)(this.snapshot.exportVal())}}class moe{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class $z{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class goe{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.cY;return _We(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Aa("OnDisconnect.remove",this._path);const e=new N.cY;return loe(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Aa("OnDisconnect.set",this._path),Yl("OnDisconnect.set",e,this._path,!1);const t=new N.cY;return loe(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Aa("OnDisconnect.setWithPriority",this._path),Yl("OnDisconnect.setWithPriority",e,this._path,!1),Fz("OnDisconnect.setWithPriority",t,!1);const r=new N.cY;return function yWe(n,e,t,r,i){const s=qr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&$_(n.onDisconnect_,e,s),$d(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Aa("OnDisconnect.update",this._path),eoe("OnDisconnect.update",e,this._path,!1);const t=new N.cY;return function vWe(n,e,t,r){if((0,N.Im)(t))return Zi("onDisconnect().update() called with empty data.  Don't do anything."),void $d(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Ji(t,(o,a)=>{const l=qr(a);$_(n.onDisconnect_,Lr(e,o),l)}),$d(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ao{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return rn(this._path)?null:Xj(this._path)}get ref(){return new Sa(this._repo,this._path)}get _queryIdentifier(){const e=bse(this._queryParams),t=Hj(e);return"{}"===t?"default":t}get _queryObject(){return bse(this._queryParams)}isEqual(e){if(!((e=(0,N.Ku)(e))instanceof Ao))return!1;const t=this._repo===e._repo,r=Zj(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function v4e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function xx(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Wd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Kl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Fd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==tu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===mr){if(null!=e&&!iw(e)||null!=t&&!iw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.vA)(n.getIndex()instanceof rz||n.getIndex()===iz,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Rx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Sa extends Ao{constructor(e,t){super(e,t,new sx,!1)}get parent(){const e=lse(this._path);return null===e?null:new Sa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class _p{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new jn(e),r=yp(this.ref,e);return new _p(this._node.getChild(t),r,mr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new _p(i,yp(this.ref,r),mr)))}hasChild(e){const t=new jn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _oe(n,e){return(n=(0,N.Ku)(n))._checkNotDeleted("ref"),void 0!==e?yp(n._root,e):n._root}function yoe(n,e){(n=(0,N.Ku)(n))._checkNotDeleted("refFromURL");const t=Hz(e,n._repo.repoInfo_.nodeAdmin);toe("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ql("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),_oe(n,t.path.toString())}function yp(n,e){return null===nn((n=(0,N.Ku)(n))._path)?aWe("child","path",e,!1):aw("child","path",e,!1),new Sa(n._repo,Lr(n._path,e))}function Wz(n,e){n=(0,N.Ku)(n),Aa("set",n._path),Yl("set",e,n._path,!1);const t=new N.cY;return Vz(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function NWe(n,e){eoe("update",e,n._path,!1);const t=new N.cY;return function mWe(n,e,t,r){K_(n,"update",{path:e.toString(),value:t});let i=!0;const s=lw(n),o={};if(Ji(t,(a,l)=>{i=!1,o[a]=Yse(Lr(e,a),qr(l),n.serverSyncTree_,s)}),i)Zi("update() called with empty data.  Don't do anything."),$d(0,r,"ok",void 0);else{const a=Ax(n),l=function j$e(n,e,t,r){!function i$e(n,e,t,r){(0,N.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=pz(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=gr.fromObject(t);return q_(n,new W_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);Tx(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{const d="ok"===c;d||Rs("update at "+e+" failed: "+c);const m=Hd(n.serverSyncTree_,a,!d),y=m.length>0?Q_(n,e):e;Zo(n.eventQueue_,y,m),$d(0,r,c,u)}),Ji(t,c=>{const u=jz(n,Lr(e,c));Q_(n,u)}),Zo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function kWe(n){n=(0,N.Ku)(n);const e=new $z(()=>{}),t=new cw(e);return function pWe(n,e,t){const r=function G$e(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=Zs(c,t);r=r||jd(u,d)});let i=n.syncPointTree_.get(t);i?r=r||jd(i,Rn()):(i=new Bse,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Bd(r,!0,!1):null;return function x$e(n){return dx(n.viewCache_)}(Use(i,e,hx(n.pendingWriteTree_,e._path),s?o.getNode():zt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=qr(i).withIndex(e._queryParams.getIndex());let o;if(Cz(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=ew(n.serverSyncTree_,e._path,s);else{const a=tw(n.serverSyncTree_,e);o=Wse(n.serverSyncTree_,e._path,s,a)}return Zo(n.eventQueue_,e._path,o),vx(n.serverSyncTree_,e,t,null,!0),s},i=>(K_(n,"get for query "+(0,N.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new _p(r,new Sa(n._repo,n._path),n._queryParams.getIndex()))}class cw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new poe("value",this,new _p(e.snapshotNode,new Sa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new moe(this,e,t):null}matches(e){return e instanceof cw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Px{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new moe(this,e,t):null}createEvent(e,t){(0,N.vA)(null!=e.childName,"Child events should have a childName.");const r=yp(new Sa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new poe(e.type,this,new _p(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Px&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uw(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(u,d)=>{Bz(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new $z(t,s||void 0),a="value"===e?new cw(o):new Px(e,o);return function bWe(n,e,t){let r;r=".info"===nn(e._path)?Cz(n.infoSyncTree_,e,t):Cz(n.serverSyncTree_,e,t),noe(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>Bz(n._repo,n,a)}function Gz(n,e,t,r){return uw(n,"value",e,t,r)}function voe(n,e,t,r){return uw(n,"child_added",e,t,r)}function boe(n,e,t,r){return uw(n,"child_changed",e,t,r)}function Eoe(n,e,t,r){return uw(n,"child_moved",e,t,r)}function Ioe(n,e,t,r){return uw(n,"child_removed",e,t,r)}function woe(n,e,t){let r=null;const i=t?new $z(t):null;"value"===e?r=new cw(i):e&&(r=new Px(e,i)),Bz(n._repo,n,r)}class sl{}class Coe extends sl{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Yl("endAt",this._value,e._path,!0);const t=az(e._queryParams,this._value,this._key);if(Rx(t),Wd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class FWe extends sl{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Yl("endBefore",this._value,e._path,!1);const t=function W4e(n,e,t){let r;return r=az(n,e,n.index_===Kl||t?t:Fd),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Rx(t),Wd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class Toe extends sl{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Yl("startAt",this._value,e._path,!0);const t=oz(e._queryParams,this._value,this._key);if(Rx(t),Wd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class BWe extends sl{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Yl("startAfter",this._value,e._path,!1);const t=function $4e(n,e,t){let r;return r=oz(n,e,n.index_===Kl||t?t:tu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Rx(t),Wd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class jWe extends sl{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function z4e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class HWe extends sl{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function H4e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class WWe extends sl{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){xx(e,"orderByChild");const t=new jn(this._path);if(rn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new rz(t),i=ox(e._queryParams,r);return Wd(i),new Ao(e._repo,e._path,i,!0)}}class qWe extends sl{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){xx(e,"orderByKey");const t=ox(e._queryParams,Kl);return Wd(t),new Ao(e._repo,e._path,t,!0)}}class QWe extends sl{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){xx(e,"orderByPriority");const t=ox(e._queryParams,mr);return Wd(t),new Ao(e._repo,e._path,t,!0)}}class XWe extends sl{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){xx(e,"orderByValue");const t=ox(e._queryParams,iz);return Wd(t),new Ao(e._repo,e._path,t,!0)}}class JWe extends sl{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Yl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Coe(this._value,this._key)._apply(new Toe(this._value,this._key)._apply(e))}}function ol(n,...e){let t=(0,N.Ku)(n);for(const r of e)t=r._apply(t);return t}(function N$e(n){(0,N.vA)(!gx,"__referenceConstructor has already been defined"),gx=n})(Sa),function V$e(n){(0,N.vA)(!yx,"__referenceConstructor has already been defined"),yx=n}(Sa);const qz={};function Kz(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ql("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=Hz(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=Hz(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new zI(zI.OWNER):new KHe(n.name,n.options,e);toe("Invalid Firebase Database URL",o),rn(o.path)||ql("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function i3e(n,e,t,r){let i=qz[e.name];i||(i={},qz[e.name]=i);let s=i[n.toURLString()];return s&&ql("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new dWe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new qHe(n.name,t));return new o3e(d,n)}class o3e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function hWe(n,e,t){if(n.stats_=Kj(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ax(n.repoInfo_,(r,i,s,o)=>{ooe(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>aoe(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new hp(n.repoInfo_,e,(r,i,s,o)=>{ooe(n,r,i,s,o)},r=>{aoe(n,r)},r=>{!function fWe(n,e){Ji(e,(t,r)=>{Lz(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function XHe(n,e){const t=n.toString();return qj[t]||(qj[t]=e()),qj[t]}(n.repoInfo_,()=>new X4e(n.stats_,n.server_)),n.infoData_=new G4e,n.infoSyncTree_=new $se({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=ew(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Lz(n,"connected",!1),n.serverSyncTree_=new $se({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Zo(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sa(this._repo,Rn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function r3e(n,e){const t=qz[e];(!t||t[n.key]!==n)&&ql(`Database ${e}(${n.repoInfo_}) has already been deleted.`),coe(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ql("Cannot call "+e+" on a deleted database.")}}function Soe(){Yie.IS_TRANSPORT_INITIALIZED&&Rs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function a3e(){Soe(),Ld.forceDisallow()}function l3e(){Soe(),U_.forceDisallow(),Ld.forceAllow()}function d3e(n,e){Rie(n,e)}const f3e={".sv":"timestamp"};class g3e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}hp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},hp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function h3e(n){Uj(Bn.SDK_VERSION),(0,Bn._registerComponent)(new Ho.uA("database",(e,{instanceIdentifier:t})=>Kz(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Bn.registerVersion)(Cie,"1.0.8",n),(0,Bn.registerVersion)(Cie,"1.0.8","esm2017")}();const b3e=new vo.Vy("@firebase/database-compat"),xoe=function(n){b3e.warn("FIREBASE WARNING: "+n)};class w3e{constructor(e){this._delegate=e}cancel(e){(0,N.od)("OnDisconnect.cancel",0,1,arguments.length),(0,N.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.od)("OnDisconnect.remove",0,1,arguments.length),(0,N.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.od)("OnDisconnect.set",1,2,arguments.length),(0,N.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,N.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,xoe("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class C3e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Gd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),aw("DataSnapshot.child","path",e,!1),new Gd(this._database,this._delegate.child(e))}hasChild(e){return(0,N.od)("DataSnapshot.hasChild",1,1,arguments.length),aw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.od)("DataSnapshot.forEach",1,1,arguments.length),(0,N.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Gd(this._database,t)))}hasChildren(){return(0,N.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.od)("DataSnapshot.ref",0,0,arguments.length),new Jo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ls{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,N.od)("Query.on",2,4,arguments.length),(0,N.oD)("Query.on","callback",t,!1);const o=ls.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{t.call(o.context,new Gd(this.database,c),u)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return Gz(this._delegate,a,l),t;case"child_added":return voe(this._delegate,a,l),t;case"child_removed":return Ioe(this._delegate,a,l),t;case"child_changed":return boe(this._delegate,a,l),t;case"child_moved":return Eoe(this._delegate,a,l),t;default:throw new Error((0,N.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.od)("Query.off",0,3,arguments.length),function(n,e){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.oD)("Query.off","callback",t,!0),(0,N.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,woe(this._delegate,e,i)}else woe(this._delegate,e)}get(){return kWe(this._delegate).then(e=>new Gd(this.database,e))}once(e,t,r,i){(0,N.od)("Query.once",1,4,arguments.length),(0,N.oD)("Query.once","callback",t,!0);const s=ls.getCancelAndContextArgs_("Query.once",r,i),o=new N.cY,a=(c,u)=>{const d=new Gd(this.database,c);t&&t.call(s.context,d,u),o.resolve(d)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":Gz(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":voe(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Ioe(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":boe(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Eoe(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,N.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,N.od)("Query.limitToFirst",1,1,arguments.length),new ls(this.database,ol(this._delegate,function zWe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new jWe(n)}(e)))}limitToLast(e){return(0,N.od)("Query.limitToLast",1,1,arguments.length),new ls(this.database,ol(this._delegate,function $We(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new HWe(n)}(e)))}orderByChild(e){return(0,N.od)("Query.orderByChild",1,1,arguments.length),new ls(this.database,ol(this._delegate,function GWe(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return aw("orderByChild","path",n,!1),new WWe(n)}(e)))}orderByKey(){return(0,N.od)("Query.orderByKey",0,0,arguments.length),new ls(this.database,ol(this._delegate,function KWe(){return new qWe}()))}orderByPriority(){return(0,N.od)("Query.orderByPriority",0,0,arguments.length),new ls(this.database,ol(this._delegate,function YWe(){return new QWe}()))}orderByValue(){return(0,N.od)("Query.orderByValue",0,0,arguments.length),new ls(this.database,ol(this._delegate,function ZWe(){return new XWe}()))}startAt(e=null,t){return(0,N.od)("Query.startAt",0,2,arguments.length),new ls(this.database,ol(this._delegate,function VWe(n=null,e){return ow("startAt","key",e,!0),new Toe(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.od)("Query.startAfter",0,2,arguments.length),new ls(this.database,ol(this._delegate,function UWe(n,e){return ow("startAfter","key",e,!0),new BWe(n,e)}(e,t)))}endAt(e=null,t){return(0,N.od)("Query.endAt",0,2,arguments.length),new ls(this.database,ol(this._delegate,function OWe(n,e){return ow("endAt","key",e,!0),new Coe(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.od)("Query.endBefore",0,2,arguments.length),new ls(this.database,ol(this._delegate,function LWe(n,e){return ow("endBefore","key",e,!0),new FWe(n,e)}(e,t)))}equalTo(e,t){return(0,N.od)("Query.equalTo",1,2,arguments.length),new ls(this.database,ol(this._delegate,function e3e(n,e){return ow("equalTo","key",e,!0),new JWe(n,e)}(e,t)))}toString(){return(0,N.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.od)("Query.isEqual",1,1,arguments.length),!(e instanceof ls))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,N.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Jo(this.database,new Sa(this._delegate._repo,this._delegate._path))}}class Jo extends ls{constructor(e,t){super(e,new Ao(t._repo,t._path,new sx,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Jo(this.database,yp(this._delegate,e))}getParent(){(0,N.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Jo(this.database,e):null}getRoot(){return(0,N.od)("Reference.root",0,0,arguments.length),new Jo(this.database,this._delegate.root)}set(e,t){(0,N.od)("Reference.set",1,2,arguments.length),(0,N.oD)("Reference.set","onComplete",t,!0);const r=Wz(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,xoe("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Aa("Reference.update",this._delegate._path),(0,N.oD)("Reference.update","onComplete",t,!0);const r=NWe(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.od)("Reference.setWithPriority",2,3,arguments.length),(0,N.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function MWe(n,e,t){if(Aa("setWithPriority",n._path),Yl("setWithPriority",e,n._path,!1),Fz("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.cY;return Vz(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,N.od)("Reference.remove",0,1,arguments.length),(0,N.oD)("Reference.remove","onComplete",e,!0);const t=function RWe(n){return Aa("remove",n._path),Wz(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.od)("Reference.transaction",1,3,arguments.length),(0,N.oD)("Reference.transaction","transactionUpdate",e,!1),(0,N.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function _3e(n,e,t){var r;if(n=(0,N.Ku)(n),Aa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new N.cY,a=Gz(n,()=>{});return function IWe(n,e,t,r,i,s){K_(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:Sie(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Uz(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{sw("transaction failed: Data returned ",l,o.path),o.status=0;const c=Ix(n.transactionQueueTree_,e),u=gp(c)||[];let d;u.push(o),Nz(c,u),"object"==typeof l&&null!==l&&(0,N.gR)(l,".priority")?(d=(0,N.yw)(l,".priority"),(0,N.vA)(iw(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(bx(n.serverSyncTree_,e)||zt.EMPTY_NODE).getPriority().val();const m=lw(n),y=qr(l,d),b=Rz(y,a,m);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=b,o.currentWriteId=Ax(n);const T=wz(n.serverSyncTree_,e,b,o.currentWriteId,o.applyLocally);Zo(n.eventQueue_,e,T),Sx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,u)=>{let d=null;l?s.reject(l):(d=new _p(u,new Sa(n._repo,n._path),mr),s.resolve(new g3e(c,d)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new C3e(s.committed,new Gd(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,N.od)("Reference.setPriority",1,2,arguments.length),(0,N.oD)("Reference.setPriority","onComplete",t,!0);const r=function PWe(n,e){n=(0,N.Ku)(n),Aa("setPriority",n._path),Fz("setPriority",e,!1);const t=new N.cY;return Vz(n._repo,Lr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.od)("Reference.push",0,2,arguments.length),(0,N.oD)("Reference.push","onComplete",t,!0);const r=function xWe(n,e){n=(0,N.Ku)(n),Aa("push",n._path),Yl("push",e,n._path,!0);const t=soe(n._repo),r=DWe(t),i=yp(n,r),s=yp(n,r);let o;return o=null!=e?Wz(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new Jo(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new Jo(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Aa("Reference.onDisconnect",this._delegate._path),new w3e(new goe(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class dw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:a3e,forceLongPolling:l3e}}useEmulator(e,t,r={}){!function Doe(n,e,t,r={}){(n=(0,N.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ql("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ql('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new zI(zI.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Fy)(r.mockUserToken,n.app.options.projectId);s=new zI(o)}!function n3e(n,e,t,r){n.repoInfo_=new Wj(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,N.od)("database.ref",0,1,arguments.length),e instanceof Jo){const t=yoe(this._delegate,e.toString());return new Jo(this,t)}{const t=_oe(this._delegate,e);return new Jo(this,t)}}refFromURL(e){(0,N.od)("database.refFromURL",1,1,arguments.length);const r=yoe(this._delegate,e);return new Jo(this,r)}goOffline(){return(0,N.od)("database.goOffline",0,0,arguments.length),function c3e(n){(n=(0,N.Ku)(n))._checkNotDeleted("goOffline"),coe(n._repo)}(this._delegate)}goOnline(){return(0,N.od)("database.goOnline",0,0,arguments.length),function u3e(n){(n=(0,N.Ku)(n))._checkNotDeleted("goOnline"),function EWe(n){n.persistentConnection_&&n.persistentConnection_.resume(ioe)}(n._repo)}(this._delegate)}}dw.ServerValue={TIMESTAMP:function p3e(){return f3e}(),increment:n=>function m3e(n){return{".sv":{increment:n}}}(n)};var A3e=Object.freeze({__proto__:null,initStandalone:function T3e({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){Uj(t);const a=new Ho.h1("database-standalone"),l=new Ho.Kq("auth-internal",a);let c;return l.setComponent(new Ho.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new Ho.Kq("app-check-internal",a),c.setComponent(new Ho.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new dw(Kz(n,l,c,e,o),n),namespace:s}}});const S3e=dw.ServerValue;function hw(n,e,t="on",r=uf){return new Lt(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(Ve(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),EV())}function Roe(n){return null==n}function Poe(n){return"function"==typeof n.set}function Moe(n,e){return Poe(e)?e:n.ref(e)}function Noe(n,e){if(function x3e(n){return"string"==typeof n}(n))return e.stringCase();if(Poe(n))return e.firebaseCase();if(function R3e(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function koe(n){return(Roe(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Ooe(n,e,t){return qu(...(e=koe(e)).map(i=>hw(n,i,"on",t)))}function Foe(n,e){return function(r,i){return Noe(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function k3e(n){return function(t){return t?Noe(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Loe(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function L3e(n,e){const{payload:t,prevKey:r,key:i}=e,s=Loe(n,i),o=function F3e(n,e){if(Roe(e))return 0;{const t=Loe(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function Voe(n,e,t){return function O3e(n,e,t){return hw(n,"value","once",t).pipe(dn(r=>{const i=[Xe(r)];return e.forEach(s=>i.push(hw(n,s,"on",t))),qu(...i).pipe(lg(L3e,[]))}),yO())}(n,e=koe(e),t)}function Boe(n,e){return function(){return hw(n,"value","on",e)}}!function D3e(n){n.INTERNAL.registerComponent(new Ho.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new dw(i,r)},"PUBLIC").setServiceProps({Reference:Jo,Query:ls,Database:dw,DataSnapshot:Gd,enableLogging:d3e,INTERNAL:A3e,ServerValue:S3e}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.8")}(Ol.A);const U3e=new ve("angularfire2.realtimeDatabaseURL"),j3e=new ve("angularfire2.database.use-emulator");let z3e=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,c,u,d,m,y,b,T,P){this.schedulers=a;const B=l,V=DS(t,o,r);c&&xV(V,o,u,m,y,b,d,T),this.database=bV(`${V.name}.database.${i}`,"AngularFireDatabase",V.name,()=>{const Q=o.runOutsideAngular(()=>V.database(i||void 0));return B&&Q.useEmulator(...B),Q},[B])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Moe(this.database,t));let s=i;return r&&(s=r(i)),function V3e(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Foe(r,"update"),set:Foe(r,"set"),push:i=>r.push(i),remove:k3e(r),snapshotChanges:i=>Voe(n,i,t).pipe(ki),stateChanges:i=>Ooe(n,i,t).pipe(ki),auditTrail:i=>function P3e(n,e,t){return function N3e(n,e,t){return function M3e(n,e){return hw(n,"value","on",e).pipe(Ve(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function NHe(...n){const e=ek(n);return me((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)$s(n[l]).subscribe(Pe(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Ci))&&(o=null))},us));t.subscribe(Pe(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}(e),Ve(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function kHe(n){return me((e,t)=>{let r=!1,i=0;e.subscribe(Pe(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),Ve(i=>i.actions))}(n,Ooe(n,e).pipe(lg((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(ki),valueChanges:(i,s)=>Voe(n,i,t).pipe(Ve(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),ki)}}(s,this)}object(t){return function B3e(n,e){return{query:n,snapshotChanges:()=>Boe(n,e.schedulers.outsideAngular)().pipe(ki),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Boe(n,e.schedulers.outsideAngular)().pipe(ki,Ve(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Moe(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(Ae(VE),Ae(BE,8),Ae(U3e,8),Ae(Bs),Ae(_t),Ae(Ag),Ae(j3e,8),Ae(UE,8),Ae(wV,8),Ae(CV,8),Ae(TV,8),Ae(AV,8),Ae(SV,8),Ae(DV,8),Ae(vA,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),H3e=(()=>{class n{constructor(){Ol.A.registerVersion("angularfire",Yu.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[z3e]})}return n})(),$3e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$t({type:n,bootstrap:[MBe]})}static{this.\u0275inj=qt({providers:[sEe(Jh(Bu.LegacyInterceptors,[{provide:oq,useFactory:Kbe},{provide:ob,useExisting:oq,multi:!0}])),RAe(()=>PAe(Io_firebaseConfig)),LAe(()=>BAe()),MHe(()=>mHe())],imports:[P6,PBe,JBe,zje,xI,are,Cg,Une,fAe,FZ,v8,b8,kke.initializeApp(Io_firebaseConfig),Bke,H3e,VBe,lre]})}}return n})();ube().bootstrapModule($3e).catch(n=>console.error(n))},443:(yt,U,G)=>{G.d(U,{$:()=>Lw,A:()=>$,G:()=>Fe,K:()=>Xx,L:()=>Jd,N:()=>so,P:()=>Mo,R:()=>at,U:()=>pt,V:()=>Rp,W:()=>RH,X:()=>rh,Y:()=>hy,Z:()=>Pp,_:()=>Np,a:()=>xy,a0:()=>Ae,a1:()=>Lp,a2:()=>ic,a3:()=>oh,a4:()=>zw,a5:()=>gn,a6:()=>$w,a7:()=>Up,a8:()=>lo,a9:()=>sR,aA:()=>au,aB:()=>Tt,aC:()=>ie,aD:()=>Ui,aE:()=>me,aF:()=>Ve,aG:()=>rm,aH:()=>xR,aI:()=>BH,aJ:()=>vr,aN:()=>gs,aQ:()=>pu,aa:()=>Ww,ab:()=>uh,ac:()=>Gw,ad:()=>oR,ae:()=>vy,af:()=>lR,ag:()=>cR,ah:()=>uR,ak:()=>dR,al:()=>Ur,am:()=>hR,ap:()=>sh,aq:()=>Bi,as:()=>Zw,at:()=>xi,au:()=>vt,av:()=>io,aw:()=>Sw,ax:()=>Ct,ay:()=>ji,az:()=>ys,b:()=>oc,c:()=>NH,d:()=>OH,e:()=>kH,f:()=>h0,g:()=>f0,h:()=>PR,i:()=>ac,j:()=>kR,k:()=>fo,l:()=>wu,m:()=>b0,o:()=>$R,p:()=>ee,r:()=>Qp,s:()=>aa,u:()=>uc,y:()=>gR});var x=G(467),Z=G(1631),D=G(1401),he=G(5398),ce=G(1635),te=G(8779);const ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Je=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ke=new D.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new he.Vy("@firebase/auth");function Yt(g,...h){Ye.logLevel<=he.$b.ERROR&&Ye.error(`Auth (${Z.SDK_VERSION}): ${g}`,...h)}function Ct(g,...h){throw Le(g,...h)}function Tt(g,...h){return Le(g,...h)}function Nt(g,h,f){const _=Object.assign(Object.assign({},Je()),{[h]:f});return new D.FA("auth","Firebase",_).create(h,{appName:g.name})}function mt(g){return Nt(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Et(g,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Ct(g,"argument-error"),Nt(g,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(g,...h){if("string"!=typeof g){const f=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return Ke.create(g,...h)}function ie(g,h,...f){if(!g)throw Le(h,...f)}function tt(g){const h="INTERNAL ASSERTION FAILED: "+g;throw Yt(h),new Error(h)}function vt(g,h){g||tt(h)}function Bt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function In(){return"http:"===wn()||"https:"===wn()}function wn(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Jn{constructor(h,f){this.shortDelay=h,this.longDelay=f,vt(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,D.jZ)()||(0,D.lV)()}get(){return function _r(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(In()||(0,D.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function or(g,h){vt(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Br{static initialize(h,f,_){this.fetchImpl=h,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const de={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_e=new Jn(3e4,6e4);function se(g,h){return g.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:g.tenantId}):h}function ae(g,h,f,_){return ge.apply(this,arguments)}function ge(){return(ge=(0,x.A)(function*(g,h,f,_,w={}){return pe(g,w,(0,x.A)(function*(){let R={},Y={};_&&("GET"===h?Y=_:R={body:JSON.stringify(_)});const fe=(0,D.Am)(Object.assign({key:g.config.apiKey},Y)).slice(1),Se=yield g._getAdditionalHeaders();Se["Content-Type"]="application/json",g.languageCode&&(Se["X-Firebase-Locale"]=g.languageCode);const et=Object.assign({method:h,headers:Se},R);return(0,D.c1)()||(et.referrerPolicy="no-referrer"),Br.fetch()(It(g,g.config.apiHost,f,fe),et)}))})).apply(this,arguments)}function pe(g,h,f){return st.apply(this,arguments)}function st(){return(st=(0,x.A)(function*(g,h,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},de),h);try{const w=new ft(g),R=yield Promise.race([f(),w.promise]);w.clearNetworkTimeout();const Y=yield R.json();if("needConfirmation"in Y)throw Kr(g,"account-exists-with-different-credential",Y);if(R.ok&&!("errorMessage"in Y))return Y;{const fe=R.ok?Y.errorMessage:Y.error.message,[Se,et]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Se)throw Kr(g,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Se)throw Kr(g,"email-already-in-use",Y);if("USER_DISABLED"===Se)throw Kr(g,"user-disabled",Y);const lt=_[Se]||Se.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Nt(g,lt,et);Ct(g,lt)}}catch(w){if(w instanceof D.g)throw w;Ct(g,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function xt(g,h,f,_){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,x.A)(function*(g,h,f,_,w={}){const R=yield ae(g,h,f,_,w);return"mfaPendingCredential"in R&&Ct(g,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function It(g,h,f,_){const w=`${h}${f}?${_}`;return g.config.emulator?or(g.config,w):`${g.config.apiScheme}://${w}`}function vn(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ft{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(Tt(this.auth,"network-request-failed")),_e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kr(g,h,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const w=Tt(g,h,_);return w.customData._tokenResponse=f,w}function Xt(g){return void 0!==g&&void 0!==g.getResponse}function Zt(g){return void 0!==g&&void 0!==g.enterprise}class kt{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return vn(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function yi(){return(yi=(0,x.A)(function*(g){return(yield ae(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xr(g,h){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,x.A)(function*(g,h){return ae(g,"GET","/v2/recaptchaConfig",se(g,h))})).apply(this,arguments)}function xa(){return(xa=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function ks(){return(ks=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function no(g,h){return na.apply(this,arguments)}function na(){return(na=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Os(g){if(g)try{const h=new Date(Number(g));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Fs(){return(Fs=(0,x.A)(function*(g,h=!1){const f=(0,D.Ku)(g),_=yield f.getIdToken(h),w=Do(_);ie(w&&w.exp&&w.auth_time&&w.iat,f.auth,"internal-error");const R="object"==typeof w.firebase?w.firebase:void 0,Y=R?.sign_in_provider;return{claims:w,token:_,authTime:Os(es(w.auth_time)),issuedAtTime:Os(es(w.iat)),expirationTime:Os(es(w.exp)),signInProvider:Y||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function es(g){return 1e3*Number(g)}function Do(g){const[h,f,_]=g.split(".");if(void 0===h||void 0===f||void 0===_)return Yt("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,D.u)(f);return w?JSON.parse(w):(Yt("Failed to decode base64 JWT payload"),null)}catch(w){return Yt("Caught error parsing JWT payload as JSON",w?.toString()),null}}function ds(g){const h=Do(g);return ie(h,"internal-error"),ie(typeof h.exp<"u","internal-error"),ie(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function Mn(g,h){return Li.apply(this,arguments)}function Li(){return(Li=(0,x.A)(function*(g,h,f=!1){if(f)return h;try{return yield h}catch(_){throw _ instanceof D.g&&function hs({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class ll{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const w=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,x.A)(function*(){yield f.iteration()}),_)}iteration(){var h=this;return(0,x.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class ai{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Os(this.lastLoginAt),this.creationTime=Os(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fs(g){return ro.apply(this,arguments)}function ro(){return(ro=(0,x.A)(function*(g){var h;const f=g.auth,_=yield g.getIdToken(),w=yield Mn(g,no(f,{idToken:_}));ie(w?.users.length,f,"internal-error");const R=w.users[0];g._notifyReloadListener(R);const Y=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?Lt(R.providerUserInfo):[],fe=function ia(g,h){return[...g.filter(_=>!h.some(w=>w.providerId===_.providerId)),...h]}(g.providerData,Y),lt=!!g.isAnonymous&&!(g.email&&R.passwordHash||fe?.length),Jt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:fe,metadata:new ai(R.createdAt,R.lastLoginAt),isAnonymous:lt};Object.assign(g,Jt)})).apply(this,arguments)}function Ra(){return(Ra=(0,x.A)(function*(g){const h=(0,D.Ku)(g);yield fs(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Lt(g){return g.map(h=>{var{providerId:f}=h,_=(0,ce.Tt)(h,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function We(){return(We=(0,x.A)(function*(g,h){const f=yield pe(g,{},(0,x.A)(function*(){const _=(0,D.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:w,apiKey:R}=g.config,Y=It(g,w,"/v1/token",`key=${R}`),fe=yield g._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",Br.fetch()(Y,{method:"POST",headers:fe,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,x.A)(function*(g,h){return ae(g,"POST","/v2/accounts:revokeToken",se(g,h))})).apply(this,arguments)}class E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ie(h.idToken,"internal-error"),ie(typeof h.idToken<"u","internal-error"),ie(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):ds(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){ie(0!==h.length,"internal-error");const f=ds(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var _=this;return(0,x.A)(function*(){return f||!_.accessToken||_.isExpired?(ie(_.refreshToken,h,"user-token-expired"),_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null):_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var _=this;return(0,x.A)(function*(){const{accessToken:w,refreshToken:R,expiresIn:Y}=yield function Xl(g,h){return We.apply(this,arguments)}(h,f);_.updateTokensAndExpiration(w,R,Number(Y))})()}updateTokensAndExpiration(h,f,_){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,f){const{refreshToken:_,accessToken:w,expirationTime:R}=f,Y=new E;return _&&(ie("string"==typeof _,"internal-error",{appName:h}),Y.refreshToken=_),w&&(ie("string"==typeof w,"internal-error",{appName:h}),Y.accessToken=w),R&&(ie("number"==typeof R,"internal-error",{appName:h}),Y.expirationTime=R),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new E,this.toJSON())}_performRefresh(){return tt("not implemented")}}function S(g,h){ie("string"==typeof g||typeof g>"u","internal-error",{appName:h})}class F{constructor(h){var{uid:f,auth:_,stsTokenManager:w}=h,R=(0,ce.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ll(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ai(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,x.A)(function*(){const _=yield Mn(f,f.stsTokenManager.getToken(f.auth,h));return ie(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(h){return function ra(g){return Fs.apply(this,arguments)}(this,h)}reload(){return function Ci(g){return Ra.apply(this,arguments)}(this)}_assign(h){this!==h&&(ie(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new F(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var _=this;return(0,x.A)(function*(){let w=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),w=!0),f&&(yield fs(_)),yield _.auth._persistUserIfCurrent(_),w&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,x.A)(function*(){if((0,Z._isFirebaseServerApp)(h.auth.app))return Promise.reject(mt(h.auth));const f=yield h.getIdToken();return yield Mn(h,function to(g,h){return xa.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var _,w,R,Y,fe,Se,et,lt;const Jt=null!==(_=f.displayName)&&void 0!==_?_:void 0,An=null!==(w=f.email)&&void 0!==w?w:void 0,vs=null!==(R=f.phoneNumber)&&void 0!==R?R:void 0,On=null!==(Y=f.photoURL)&&void 0!==Y?Y:void 0,la=null!==(fe=f.tenantId)&&void 0!==fe?fe:void 0,Wy=null!==(Se=f._redirectEventId)&&void 0!==Se?Se:void 0,Ah=null!==(et=f.createdAt)&&void 0!==et?et:void 0,w0=null!==(lt=f.lastLoginAt)&&void 0!==lt?lt:void 0,{uid:um,emailVerified:Gy,isAnonymous:Au,providerData:po,stsTokenManager:C0}=f;ie(um&&C0,h,"internal-error");const dm=E.fromJSON(this.name,C0);ie("string"==typeof um,h,"internal-error"),S(Jt,h.name),S(An,h.name),ie("boolean"==typeof Gy,h,"internal-error"),ie("boolean"==typeof Au,h,"internal-error"),S(vs,h.name),S(On,h.name),S(la,h.name),S(Wy,h.name),S(Ah,h.name),S(w0,h.name);const Su=new F({uid:um,auth:h,email:An,emailVerified:Gy,displayName:Jt,isAnonymous:Au,photoURL:On,phoneNumber:vs,tenantId:la,stsTokenManager:dm,createdAt:Ah,lastLoginAt:w0});return po&&Array.isArray(po)&&(Su.providerData=po.map(hm=>Object.assign({},hm))),Wy&&(Su._redirectEventId=Wy),Su}static _fromIdTokenResponse(h,f,_=!1){return(0,x.A)(function*(){const w=new E;w.updateFromServerResponse(f);const R=new F({uid:f.localId,auth:h,stsTokenManager:w,isAnonymous:_});return yield fs(R),R})()}static _fromGetAccountInfoResponse(h,f,_){return(0,x.A)(function*(){const w=f.users[0];ie(void 0!==w.localId,"internal-error");const R=void 0!==w.providerUserInfo?Lt(w.providerUserInfo):[],Y=!(w.email&&w.passwordHash||R?.length),fe=new E;fe.updateFromIdToken(_);const Se=new F({uid:w.localId,auth:h,stsTokenManager:fe,isAnonymous:Y}),et={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:R,metadata:new ai(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||R?.length)};return Object.assign(Se,et),Se})()}}const j=new Map;function me(g){vt(g instanceof Function,"Expected a class definition");let h=j.get(g);return h?(vt(h instanceof g,"Instance stored in cache mismatched with class"),h):(h=new g,j.set(g,h),h)}const pt=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,x.A)(function*(){return!0})()}_set(f,_){var w=this;return(0,x.A)(function*(){w.storage[f]=_})()}_get(f){var _=this;return(0,x.A)(function*(){const w=_.storage[f];return void 0===w?null:w})()}_remove(f){var _=this;return(0,x.A)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function Ve(g,h,f){return`firebase:${g}:${h}:${f}`}class pn{constructor(h,f,_){this.persistence=h,this.auth=f,this.userKey=_;const{config:w,name:R}=this.auth;this.fullUserKey=Ve(this.userKey,w.apiKey,R),this.fullPersistenceKey=Ve("persistence",w.apiKey,R),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,x.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?F._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,x.A)(function*(){if(f.persistence===h)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,_="authUser"){return(0,x.A)(function*(){if(!f.length)return new pn(me(pt),h,_);const w=(yield Promise.all(f.map(function(){var et=(0,x.A)(function*(lt){if(yield lt._isAvailable())return lt});return function(lt){return et.apply(this,arguments)}}()))).filter(et=>et);let R=w[0]||me(pt);const Y=Ve(_,h.config.apiKey,h.name);let fe=null;for(const et of f)try{const lt=yield et._get(Y);if(lt){const Jt=F._fromJSON(h,lt);et!==R&&(fe=Jt),R=et;break}}catch{}const Se=w.filter(et=>et._shouldAllowMigration);return R._shouldAllowMigration&&Se.length?(R=Se[0],fe&&(yield R._set(Y,fe.toJSON())),yield Promise.all(f.map(function(){var et=(0,x.A)(function*(lt){if(lt!==R)try{yield lt._remove(Y)}catch{}});return function(lt){return et.apply(this,arguments)}}())),new pn(R,h,_)):new pn(R,h,_)})()}}function yr(g){const h=g.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Zd(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(K(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(qx(h))return"Blackberry";if(ey(h))return"Webos";if(Gn(h))return"Safari";if((h.includes("chrome/")||Ls(h))&&!h.includes("edge/"))return"Chrome";if(Sw(h))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function K(g=(0,D.ZQ)()){return/firefox\//i.test(g)}function Gn(g=(0,D.ZQ)()){const h=g.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ls(g=(0,D.ZQ)()){return/crios\//i.test(g)}function Zd(g=(0,D.ZQ)()){return/iemobile/i.test(g)}function Sw(g=(0,D.ZQ)()){return/android/i.test(g)}function qx(g=(0,D.ZQ)()){return/blackberry/i.test(g)}function ey(g=(0,D.ZQ)()){return/webos/i.test(g)}function io(g=(0,D.ZQ)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function au(g=(0,D.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}function ty(g=(0,D.ZQ)()){return io(g)||Sw(g)||ey(g)||qx(g)||/windows phone/i.test(g)||Zd(g)}function wp(g,h=[]){let f;switch(g){case"Browser":f=yr((0,D.ZQ)());break;case"Worker":f=`${yr((0,D.ZQ)())}-${g}`;break;default:f=g}const _=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${Z.SDK_VERSION}/${_}`}class uu{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const _=R=>new Promise((Y,fe)=>{try{Y(h(R))}catch(Se){fe(Se)}});_.onAbort=f,this.queue.push(_);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,x.A)(function*(){if(f.auth.currentUser===h)return;const _=[];try{for(const w of f.queue)yield w(h),w.onAbort&&_.push(w.onAbort)}catch(w){_.reverse();for(const R of _)try{R()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function zn(){return(zn=(0,x.A)(function*(g,h={}){return ae(g,"GET","/v2/passwordPolicy",se(g,h))})).apply(this,arguments)}class IH{constructor(h){var f,_,w,R;const Y=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Y.minPasswordLength)&&void 0!==f?f:6,Y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Y.maxPasswordLength),void 0!==Y.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Y.containsLowercaseCharacter),void 0!==Y.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Y.containsUppercaseCharacter),void 0!==Y.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Y.containsNumericCharacter),void 0!==Y.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Y.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(_=h.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(R=h.forceUpgradeOnSignin)&&void 0!==R&&R,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,_,w,R,Y,fe;const Se={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Se),this.validatePasswordCharacterOptions(h,Se),Se.isValid&&(Se.isValid=null===(f=Se.meetsMinPasswordLength)||void 0===f||f),Se.isValid&&(Se.isValid=null===(_=Se.meetsMaxPasswordLength)||void 0===_||_),Se.isValid&&(Se.isValid=null===(w=Se.containsLowercaseLetter)||void 0===w||w),Se.isValid&&(Se.isValid=null===(R=Se.containsUppercaseLetter)||void 0===R||R),Se.isValid&&(Se.isValid=null===(Y=Se.containsNumericCharacter)||void 0===Y||Y),Se.isValid&&(Se.isValid=null===(fe=Se.containsNonAlphanumericCharacter)||void 0===fe||fe),Se}validatePasswordLengthOptions(h,f){const _=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;_&&(f.meetsMinPasswordLength=h.length>=_),w&&(f.meetsMaxPasswordLength=h.length<=w)}validatePasswordCharacterOptions(h,f){let _;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let w=0;w<h.length;w++)_=h.charAt(w),this.updatePasswordCharacterOptionsStatuses(f,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(h,f,_,w,R){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=R))}}class Nn{constructor(h,f,_,w){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xr(this),this.idTokenSubscription=new Xr(this),this.beforeStateQueue=new uu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,f){var _=this;return f&&(this._popupRedirectResolver=me(f)),this._initializationPromise=this.queue((0,x.A)(function*(){var w,R;if(!_._deleted&&(_.persistenceManager=yield pn.create(_,h),!_._deleted)){if(null!==(w=_._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,x.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,x.A)(function*(){try{const _=yield no(f,{idToken:h}),w=yield F._fromGetAccountInfoResponse(f,_,h);yield f.directlySetCurrentUser(w)}catch(_){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",_),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,x.A)(function*(){var _;if((0,Z._isFirebaseServerApp)(f.app)){const fe=f.app.settings.authIdToken;return fe?new Promise(Se=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(fe).then(Se,Se))}):f.directlySetCurrentUser(null)}const w=yield f.assertedPersistence.getCurrentUser();let R=w,Y=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const fe=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Se=R?._redirectEventId,et=yield f.tryRedirectSignIn(h);(!fe||fe===Se)&&et?.user&&(R=et.user,Y=!0)}if(!R)return f.directlySetCurrentUser(null);if(!R._redirectEventId){if(Y)try{yield f.beforeStateQueue.runMiddleware(R)}catch(fe){R=w,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(fe))}return R?f.reloadAndSetCurrentUserOrClear(R):f.directlySetCurrentUser(null)}return ie(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===R._redirectEventId?f.directlySetCurrentUser(R):f.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var f=this;return(0,x.A)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,x.A)(function*(){try{yield fs(h)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Cn(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var h=this;return(0,x.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,x.A)(function*(){if((0,Z._isFirebaseServerApp)(f.app))return Promise.reject(mt(f));const _=h?(0,D.Ku)(h):null;return _&&ie(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(h,f=!1){var _=this;return(0,x.A)(function*(){if(!_._deleted)return h&&ie(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,x.A)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,x.A)(function*(){return(0,Z._isFirebaseServerApp)(h.app)?Promise.reject(mt(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,Z._isFirebaseServerApp)(this.app)?Promise.reject(mt(this)):this.queue((0,x.A)(function*(){yield f.assertedPersistence.setPersistence(me(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,x.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const _=f._getPasswordPolicyInternal();return _.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,x.A)(function*(){const f=yield function bH(g){return zn.apply(this,arguments)}(h),_=new IH(f);null===h.tenantId?h._projectPasswordPolicy=_:h._tenantPasswordPolicies[h.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new D.FA("auth","Firebase",h())}onAuthStateChanged(h,f,_){return this.registerStateListener(this.authStateSubscription,h,f,_)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,_){return this.registerStateListener(this.idTokenSubscription,h,f,_)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const _=this.onAuthStateChanged(()=>{_(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,x.A)(function*(){if(f.currentUser){const _=yield f.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:_};null!=f.tenantId&&(w.tenantId=f.tenantId),yield function Ce(g,h){return C.apply(this,arguments)}(f,w)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var _=this;return(0,x.A)(function*(){const w=yield _.getOrInitRedirectPersistenceManager(f);return null===h?w.removeCurrentUser():w.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,x.A)(function*(){if(!f.redirectPersistenceManager){const _=h&&me(h)||f._popupRedirectResolver;ie(_,f,"argument-error"),f.redirectPersistenceManager=yield pn.create(f,[me(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,x.A)(function*(){var _,w;return f._isInitialized&&(yield f.queue((0,x.A)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===h?f._currentUser:(null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,x.A)(function*(){if(h===f.currentUser)return f.queue((0,x.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,_,w){if(this._deleted)return()=>{};const R="function"==typeof f?f:f.next.bind(f);let Y=!1;const fe=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(fe,this,"internal-error"),fe.then(()=>{Y||R(this.currentUser)}),"function"==typeof f){const Se=h.addObserver(f,_,w);return()=>{Y=!0,Se()}}{const Se=h.addObserver(f);return()=>{Y=!0,Se()}}}directlySetCurrentUser(h){var f=this;return(0,x.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=wp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,x.A)(function*(){var f;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const w=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();w&&(_["X-Firebase-Client"]=w);const R=yield h._getAppCheckToken();return R&&(_["X-Firebase-AppCheck"]=R),_})()}_getAppCheckToken(){var h=this;return(0,x.A)(function*(){var f;const _=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function Ht(g,...h){Ye.logLevel<=he.$b.WARN&&Ye.warn(`Auth (${Z.SDK_VERSION}): ${g}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function vr(g){return(0,D.Ku)(g)}class Xr{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,D.tD)(f=>this.observer=f)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zl={loadJS:()=>(0,x.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ny(g){return Zl.loadJS(g)}function ps(g){return`__${g}${Math.floor(1e6*Math.random())}`}class Qx{constructor(h){this.type="recaptcha-enterprise",this.auth=vr(h)}verify(h="verify",f=!1){var _=this;return(0,x.A)(function*(){function R(){return R=(0,x.A)(function*(fe){if(!f){if(null==fe.tenantId&&null!=fe._agentRecaptchaConfig)return fe._agentRecaptchaConfig.siteKey;if(null!=fe.tenantId&&void 0!==fe._tenantRecaptchaConfigs[fe.tenantId])return fe._tenantRecaptchaConfigs[fe.tenantId].siteKey}return new Promise(function(){var Se=(0,x.A)(function*(et,lt){xr(fe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Jt=>{if(void 0!==Jt.recaptchaKey){const An=new kt(Jt);return null==fe.tenantId?fe._agentRecaptchaConfig=An:fe._tenantRecaptchaConfigs[fe.tenantId]=An,et(An.siteKey)}lt(new Error("recaptcha Enterprise site key undefined"))}).catch(Jt=>{lt(Jt)})});return function(et,lt){return Se.apply(this,arguments)}}())}),R.apply(this,arguments)}function Y(fe,Se,et){const lt=window.grecaptcha;Zt(lt)?lt.enterprise.ready(()=>{lt.enterprise.execute(fe,{action:h}).then(Jt=>{Se(Jt)}).catch(()=>{Se("NO_RECAPTCHA")})}):et(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((fe,Se)=>{(function w(fe){return R.apply(this,arguments)})(_.auth).then(et=>{if(!f&&Zt(window.grecaptcha))Y(et,fe,Se);else{if(typeof window>"u")return void Se(new Error("RecaptchaVerifier is only supported in browser"));let lt=function At(){return Zl.recaptchaEnterpriseScript}();0!==lt.length&&(lt+=et),ny(lt).then(()=>{Y(et,fe,Se)}).catch(Jt=>{Se(Jt)})}}).catch(et=>{Se(et)})})})()}}function Pa(g,h,f){return Dw.apply(this,arguments)}function Dw(){return(Dw=(0,x.A)(function*(g,h,f,_=!1){const w=new Qx(g);let R;try{R=yield w.verify(f)}catch{R=yield w.verify(f,!0)}const Y=Object.assign({},h);return Object.assign(Y,_?{captchaResp:R}:{captchaResponse:R}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}function Tp(g,h,f,_){return xw.apply(this,arguments)}function xw(){return xw=(0,x.A)(function*(g,h,f,_){var w;if(null!==(w=g._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const R=yield Pa(g,h,f,"getOobCode"===f);return _(g,R)}return _(g,h).catch(function(){var R=(0,x.A)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const fe=yield Pa(g,h,f,"getOobCode"===f);return _(g,fe)}return Promise.reject(Y)});return function(Y){return R.apply(this,arguments)}}())}),xw.apply(this,arguments)}function Xx(g,h,f){const _=vr(g);ie(_._canInitEmulator,_,"emulator-config-failed"),ie(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const w=!!f?.disableWarnings,R=ms(h),{host:Y,port:fe}=function wt(g){const h=ms(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(h.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(_);if(w){const R=w[1];return{host:R,port:Zx(_.substr(R.length+1))}}{const[R,Y]=_.split(":");return{host:R,port:Zx(Y)}}}(h);_.config.emulator={url:`${R}//${Y}${null===fe?"":`:${fe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:Y,port:fe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function SH(){function g(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}function ms(g){const h=g.indexOf(":");return h<0?"":g.substr(0,h+1)}function Zx(g){if(!g)return null;const h=Number(g);return isNaN(h)?null:h}class Jd{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return tt("not implemented")}_getIdTokenResponse(h){return tt("not implemented")}_linkToIdToken(h,f){return tt("not implemented")}_getReauthenticationResolver(h){return tt("not implemented")}}function Jx(g,h){return Rw.apply(this,arguments)}function Rw(){return(Rw=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:resetPassword",se(g,h))})).apply(this,arguments)}function Pw(){return(Pw=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qt(g,h){return du.apply(this,arguments)}function du(){return(du=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Ap(){return(Ap=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:update",se(g,h))})).apply(this,arguments)}function tR(g,h){return hu.apply(this,arguments)}function hu(){return(hu=(0,x.A)(function*(g,h){return xt(g,"POST","/v1/accounts:signInWithPassword",se(g,h))})).apply(this,arguments)}function Jl(g,h){return eh.apply(this,arguments)}function eh(){return(eh=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:sendOobCode",se(g,h))})).apply(this,arguments)}function iy(){return(iy=(0,x.A)(function*(g,h){return Jl(g,h)})).apply(this,arguments)}function ve(g,h){return th.apply(this,arguments)}function th(){return(th=(0,x.A)(function*(g,h){return Jl(g,h)})).apply(this,arguments)}function sy(g,h){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,x.A)(function*(g,h){return Jl(g,h)})).apply(this,arguments)}function ay(){return(ay=(0,x.A)(function*(g,h){return Jl(g,h)})).apply(this,arguments)}function Nw(){return(Nw=(0,x.A)(function*(g,h){return xt(g,"POST","/v1/accounts:signInWithEmailLink",se(g,h))})).apply(this,arguments)}function kw(){return(kw=(0,x.A)(function*(g,h){return xt(g,"POST","/v1/accounts:signInWithEmailLink",se(g,h))})).apply(this,arguments)}class Dp extends Jd{constructor(h,f,_,w=null){super("password",_),this._email=h,this._password=f,this._tenantId=w}static _fromEmailAndPassword(h,f){return new Dp(h,f,"password")}static _fromEmailAndCode(h,f,_=null){return new Dp(h,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,x.A)(function*(){switch(f.signInMethod){case"password":return Tp(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tR);case"emailLink":return function ly(g,h){return Nw.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Ct(h,"internal-error")}})()}_linkToIdToken(h,f){var _=this;return(0,x.A)(function*(){switch(_.signInMethod){case"password":return Tp(h,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qt);case"emailLink":return function DH(g,h){return kw.apply(this,arguments)}(h,{idToken:f,email:_._email,oobCode:_._password});default:Ct(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function xo(g,h){return ec.apply(this,arguments)}function ec(){return(ec=(0,x.A)(function*(g,h){return xt(g,"POST","/v1/accounts:signInWithIdp",se(g,h))})).apply(this,arguments)}class so extends Jd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new so(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Ct("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:w}=f,R=(0,ce.Tt)(f,["providerId","signInMethod"]);if(!_||!w)return null;const Y=new so(_,w);return Y.idToken=R.idToken||void 0,Y.accessToken=R.accessToken||void 0,Y.secret=R.secret,Y.nonce=R.nonce,Y.pendingToken=R.pendingToken||null,Y}_getIdTokenResponse(h){return xo(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,xo(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,xo(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,D.Am)(f)}return h}}function Ro(){return(Ro=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:sendVerificationCode",se(g,h))})).apply(this,arguments)}function xp(){return(xp=(0,x.A)(function*(g,h){return xt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,h))})).apply(this,arguments)}function mn(){return(mn=(0,x.A)(function*(g,h){const f=yield xt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,h));if(f.temporaryProof)throw Kr(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const xH={USER_NOT_FOUND:"user-not-found"};function uy(){return(uy=(0,x.A)(function*(g,h){return xt(g,"POST","/v1/accounts:signInWithPhoneNumber",se(g,Object.assign(Object.assign({},h),{operation:"REAUTH"})),xH)})).apply(this,arguments)}class fu extends Jd{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new fu({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new fu({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function nh(g,h){return xp.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function Pt(g,h){return mn.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function nR(g,h){return uy.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:_,verificationCode:w}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:_,code:w}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}=h;return _||f||w||R?new fu({verificationId:f,verificationCode:_,phoneNumber:w,temporaryProof:R}):null}}class Vt{constructor(h){var f,_,w,R,Y,fe;const Se=(0,D.I9)((0,D.hp)(h)),et=null!==(f=Se.apiKey)&&void 0!==f?f:null,lt=null!==(_=Se.oobCode)&&void 0!==_?_:null,Jt=function rR(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=Se.mode)&&void 0!==w?w:null);ie(et&&lt&&Jt,"argument-error"),this.apiKey=et,this.operation=Jt,this.code=lt,this.continueUrl=null!==(R=Se.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(Y=Se.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(fe=Se.tenantId)&&void 0!==fe?fe:null}static parseLink(h){const f=function dy(g){const h=(0,D.I9)((0,D.hp)(g)).link,f=h?(0,D.I9)((0,D.hp)(h)).deep_link_id:null,_=(0,D.I9)((0,D.hp)(g)).deep_link_id;return(_?(0,D.I9)((0,D.hp)(_)).link:null)||_||f||h||g}(h);try{return new Vt(f)}catch{return null}}}let Rp=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return Dp._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const w=Vt.parseLink(_);return ie(w,"argument-error"),Dp._fromEmailAndCode(f,w.code,w.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Rr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class tc extends Rr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Pp extends tc{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return ie("providerId"in f&&"signInMethod"in f,"argument-error"),so._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ie(h.idToken||h.accessToken,"argument-error"),so._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Pp.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Pp.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:w,pendingToken:R,nonce:Y,providerId:fe}=h;if(!_&&!w&&!f&&!R||!fe)return null;try{return new Pp(fe)._credential({idToken:f,accessToken:_,nonce:Y,pendingToken:R})}catch{return null}}}let RH=(()=>{class g extends tc{constructor(){super("facebook.com")}static credential(f){return so._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),rh=(()=>{class g extends tc{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return so._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:w}=f;if(!_&&!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),hy=(()=>{class g extends tc{constructor(){super("github.com")}static credential(f){return so._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class pu extends Jd{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return xo(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,xo(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,xo(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:w,pendingToken:R}=f;return _&&w&&R&&_===w?new pu(_,R):null}static _create(h,f){return new pu(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Np extends Rr{constructor(h){ie(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Np.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Np.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=pu.fromJSON(h);return ie(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:_}=h;if(!f||!_)return null;try{return pu._create(_,f)}catch{return null}}}let Lw=(()=>{class g extends tc{constructor(){super("twitter.com")}static credential(f,_){return so._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:w}=f;if(!_||!w)return null;try{return g.credential(_,w)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function nc(g,h){return fy.apply(this,arguments)}function fy(){return(fy=(0,x.A)(function*(g,h){return xt(g,"POST","/v1/accounts:signUp",se(g,h))})).apply(this,arguments)}class li{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,_,w=!1){return(0,x.A)(function*(){const R=yield F._fromIdTokenResponse(h,_,w),Y=Vw(_);return new li({user:R,providerId:Y,_tokenResponse:_,operationType:f})})()}static _forOperation(h,f,_){return(0,x.A)(function*(){yield h._updateTokensIfNecessary(_,!0);const w=Vw(_);return new li({user:h,providerId:w,_tokenResponse:_,operationType:f})})()}}function Vw(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Ae(g){return kp.apply(this,arguments)}function kp(){return(kp=(0,x.A)(function*(g){var h;if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const f=vr(g);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new li({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield nc(f,{returnSecureToken:!0}),w=yield li._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(w.user),w})).apply(this,arguments)}class O extends D.g{constructor(h,f,_,w){var R;super(f.code,f.message),this.operationType=_,this.user=w,Object.setPrototypeOf(this,O.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,f,_,w){return new O(h,f,_,w)}}function ih(g,h,f,_){return("reauthenticate"===h?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?O._fromErrorAndOperation(g,R,h,_):R})}function Op(g){return new Set(g.map(({providerId:h})=>h).filter(h=>!!h))}function sh(g,h){return py.apply(this,arguments)}function py(){return py=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g);yield Fp(!0,f,h);const{providerUserInfo:_}=yield function us(g,h){return ks.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),w=Op(_||[]);return f.providerData=f.providerData.filter(R=>w.has(R.providerId)),w.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),py.apply(this,arguments)}function my(g,h){return gy.apply(this,arguments)}function gy(){return(gy=(0,x.A)(function*(g,h,f=!1){const _=yield Mn(g,h._linkToIdToken(g.auth,yield g.getIdToken()),f);return li._forOperation(g,"link",_)})).apply(this,arguments)}function Fp(g,h,f){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,x.A)(function*(g,h,f){yield fs(h);const w=!1===g?"provider-already-linked":"no-such-provider";ie(Op(h.providerData).has(f)===g,h.auth,w)})).apply(this,arguments)}function Bw(g,h){return rc.apply(this,arguments)}function rc(){return(rc=(0,x.A)(function*(g,h,f=!1){const{auth:_}=g;if((0,Z._isFirebaseServerApp)(_.app))return Promise.reject(mt(_));const w="reauthenticate";try{const R=yield Mn(g,ih(_,w,h,g),f);ie(R.idToken,_,"internal-error");const Y=Do(R.idToken);ie(Y,_,"internal-error");const{sub:fe}=Y;return ie(g.uid===fe,_,"user-mismatch"),li._forOperation(g,w,R)}catch(R){throw"auth/user-not-found"===R?.code&&Ct(_,"user-mismatch"),R}})).apply(this,arguments)}function Uw(g,h){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,x.A)(function*(g,h,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const _="signIn",w=yield ih(g,_,h),R=yield li._fromIdTokenResponse(g,_,w);return f||(yield g._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Lp(g,h){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,x.A)(function*(g,h){return Uw(vr(g),h)})).apply(this,arguments)}function ic(g,h){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g);return yield Fp(!1,f,h.providerId),my(f,h)})).apply(this,arguments)}function oh(g,h){return mu.apply(this,arguments)}function mu(){return(mu=(0,x.A)(function*(g,h){return Bw((0,D.Ku)(g),h)})).apply(this,arguments)}function jw(){return(jw=(0,x.A)(function*(g,h){return xt(g,"POST","/v1/accounts:signInWithCustomToken",se(g,h))})).apply(this,arguments)}function zw(g,h){return Hw.apply(this,arguments)}function Hw(){return Hw=(0,x.A)(function*(g,h){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const f=vr(g),_=yield function _y(g,h){return jw.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),w=yield li._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(w.user),w}),Hw.apply(this,arguments)}class Ai{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?ah._fromServerResponse(h,f):"totpInfo"in f?cl._fromServerResponse(h,f):Ct(h,"internal-error")}}class ah extends Ai{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new ah(f)}}class cl extends Ai{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new cl(f)}}function yy(g,h,f){var _;ie((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),ie(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ie(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(ie(f.android.packageName.length>0,g,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Bp(g){return oo.apply(this,arguments)}function oo(){return(oo=(0,x.A)(function*(g){const h=vr(g);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function gn(g,h,f){return ao.apply(this,arguments)}function ao(){return(ao=(0,x.A)(function*(g,h,f){const _=vr(g),w={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&yy(_,w,f),yield Tp(_,w,"getOobCode",ve)})).apply(this,arguments)}function $w(g,h,f){return lh.apply(this,arguments)}function lh(){return lh=(0,x.A)(function*(g,h,f){yield Jx((0,D.Ku)(g),{oobCode:h,newPassword:f}).catch(function(){var _=(0,x.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Bp(g),w});return function(w){return _.apply(this,arguments)}}())}),lh.apply(this,arguments)}function Up(g,h){return gu.apply(this,arguments)}function gu(){return gu=(0,x.A)(function*(g,h){yield function eR(g,h){return Ap.apply(this,arguments)}((0,D.Ku)(g),{oobCode:h})}),gu.apply(this,arguments)}function lo(g,h){return sa.apply(this,arguments)}function sa(){return(sa=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g),_=yield Jx(f,{oobCode:h}),w=_.requestType;switch(ie(w,f,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(_.mfaInfo,f,"internal-error");default:ie(_.email,f,"internal-error")}let R=null;return _.mfaInfo&&(R=Ai._fromServerResponse(vr(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:w}})).apply(this,arguments)}function sR(g,h){return ch.apply(this,arguments)}function ch(){return(ch=(0,x.A)(function*(g,h){const{data:f}=yield lo((0,D.Ku)(g),h);return f.email})).apply(this,arguments)}function Ww(g,h,f){return jp.apply(this,arguments)}function jp(){return(jp=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const _=vr(g),Y=yield Tp(_,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nc).catch(Se=>{throw"auth/password-does-not-meet-requirements"===Se.code&&Bp(g),Se}),fe=yield li._fromIdTokenResponse(_,"signIn",Y);return yield _._updateCurrentUser(fe.user),fe})).apply(this,arguments)}function uh(g,h,f){return(0,Z._isFirebaseServerApp)(g.app)?Promise.reject(mt(g)):Lp((0,D.Ku)(g),Rp.credential(h,f)).catch(function(){var _=(0,x.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Bp(g),w});return function(w){return _.apply(this,arguments)}}())}function Gw(g,h,f){return zp.apply(this,arguments)}function zp(){return(zp=(0,x.A)(function*(g,h,f){const _=vr(g),w={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function R(Y,fe){ie(fe.handleCodeInApp,_,"argument-error"),fe&&yy(_,Y,fe)})(w,f),yield Tp(_,w,"getOobCode",sy)})).apply(this,arguments)}function oR(g,h){const f=Vt.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}function vy(g,h,f){return by.apply(this,arguments)}function by(){return(by=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const _=(0,D.Ku)(g),w=Rp.credentialWithLink(h,f||Bt());return ie(w._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Lp(_,w)})).apply(this,arguments)}function Vs(){return(Vs=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:createAuthUri",se(g,h))})).apply(this,arguments)}function lR(g,h){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,x.A)(function*(g,h){const _={identifier:h,continueUri:In()?Bt():"http://localhost"},{signinMethods:w}=yield function aR(g,h){return Vs.apply(this,arguments)}((0,D.Ku)(g),_);return w||[]}),Hp.apply(this,arguments)}function cR(g,h){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g),w={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};h&&yy(f.auth,w,h);const{email:R}=yield function Mw(g,h){return iy.apply(this,arguments)}(f.auth,w);R!==g.email&&(yield g.reload())}),Ey.apply(this,arguments)}function uR(g,h,f){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:h};f&&yy(_.auth,R,f);const{email:Y}=yield function oy(g,h){return ay.apply(this,arguments)}(_.auth,R);Y!==g.email&&(yield g.reload())}),Iy.apply(this,arguments)}function wy(){return(wy=(0,x.A)(function*(g,h){return ae(g,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function dR(g,h){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,x.A)(function*(g,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const _=(0,D.Ku)(g),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},Y=yield Mn(_,function qw(g,h){return wy.apply(this,arguments)}(_.auth,R));_.displayName=Y.displayName||null,_.photoURL=Y.photoUrl||null;const fe=_.providerData.find(({providerId:Se})=>"password"===Se);fe&&(fe.displayName=_.displayName,fe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(Y)}),Cy.apply(this,arguments)}function Ur(g,h){const f=(0,D.Ku)(g);return(0,Z._isFirebaseServerApp)(f.auth.app)?Promise.reject(mt(f.auth)):Kw(f,h,null)}function hR(g,h){return Kw((0,D.Ku)(g),null,h)}function Kw(g,h,f){return $t.apply(this,arguments)}function $t(){return $t=(0,x.A)(function*(g,h,f){const{auth:_}=g,R={idToken:yield g.getIdToken(),returnSecureToken:!0};h&&(R.email=h),f&&(R.password=f);const Y=yield Mn(g,function Ne(g,h){return Pw.apply(this,arguments)}(_,R));yield g._updateTokensIfNecessary(Y,!0)}),$t.apply(this,arguments)}class Ze{constructor(h,f,_={}){this.isNewUser=h,this.providerId=f,this.profile=_}}class Si extends Ze{constructor(h,f,_,w){super(h,f,_),this.username=w}}class Kt extends Ze{constructor(h,f){super(h,"facebook.com",f)}}class ci extends Si{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Di extends Ze{constructor(h,f){super(h,"google.com",f)}}class ul extends Si{constructor(h,f,_){super(h,"twitter.com",f,_)}}function Bi(g){const{user:h,_tokenResponse:f}=g;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Qw(g){var h,f;if(!g)return null;const{providerId:_}=g,w=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},R=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const Y=null===(f=null===(h=Do(g.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(Y)return new Ze(R,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!_)return null;switch(_){case"facebook.com":return new Kt(R,w);case"github.com":return new ci(R,w);case"google.com":return new Di(R,w);case"twitter.com":return new ul(R,w,g.screenName||null);case"custom":case"anonymous":return new Ze(R,null);default:return new Ze(R,_,w)}}(f)}function gR(g,h,f,_){return(0,D.Ku)(g).onAuthStateChanged(h,f,_)}class Na{constructor(h,f,_){this.type=h,this.credential=f,this.user=_}static _fromIdtoken(h,f){return new Na("enroll",h,f)}static _fromMfaPendingCredential(h){return new Na("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,_;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Na._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Na._fromIdtoken(h.multiFactorSession.idToken)}return null}}class $p{constructor(h,f,_){this.session=h,this.hints=f,this.signInResolver=_}static _fromError(h,f){const _=vr(h),w=f.customData._serverResponse,R=(w.mfaInfo||[]).map(fe=>Ai._fromServerResponse(_,fe));ie(w.mfaPendingCredential,_,"internal-error");const Y=Na._fromMfaPendingCredential(w.mfaPendingCredential);return new $p(Y,R,function(){var fe=(0,x.A)(function*(Se){const et=yield Se._process(_,Y);delete w.mfaInfo,delete w.mfaPendingCredential;const lt=Object.assign(Object.assign({},w),{idToken:et.idToken,refreshToken:et.refreshToken});switch(f.operationType){case"signIn":const Jt=yield li._fromIdTokenResponse(_,f.operationType,lt);return yield _._updateCurrentUser(Jt.user),Jt;case"reauthenticate":return ie(f.user,_,"internal-error"),li._forOperation(f.user,f.operationType,lt);default:Ct(_,"internal-error")}});return function(Se){return fe.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,x.A)(function*(){return f.signInResolver(h)})()}}function Zw(g,h){var f;const _=(0,D.Ku)(g),w=h;return ie(h.customData.operationType,_,"argument-error"),ie(null===(f=w.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),$p._fromError(_,w)}class dh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>Ai._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new dh(h)}getSession(){var h=this;return(0,x.A)(function*(){return Na._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var _=this;return(0,x.A)(function*(){const w=h,R=yield _.getSession(),Y=yield Mn(_.user,w._process(_.user.auth,R,f));return yield _.user._updateTokensIfNecessary(Y),_.user.reload()})()}unenroll(h){var f=this;return(0,x.A)(function*(){const _="string"==typeof h?h:h.uid,w=yield f.user.getIdToken();try{const R=yield Mn(f.user,function vR(g,h){return ae(g,"POST","/v2/accounts/mfaEnrollment:withdraw",se(g,h))}(f.user.auth,{idToken:w,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Y})=>Y!==_),yield f.user._updateTokensIfNecessary(R),yield f.user.reload()}catch(R){throw R}})()}}const _u=new WeakMap;function xi(g){const h=(0,D.Ku)(g);return _u.has(h)||_u.set(h,dh._fromUser(h)),_u.get(h)}const ka="__sak";class Gp{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ka,"1"),this.storage.removeItem(ka),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const oc=(()=>{class g extends Gp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ty(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const w=this.storage.getItem(_),R=this.localCache[_];w!==R&&f(_,R,w)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((fe,Se,et)=>{this.notifyListeners(fe,et)});const w=f.key;_?this.detachListener():this.stopPolling();const R=()=>{const fe=this.storage.getItem(w);!_&&this.localCache[w]===fe||this.notifyListeners(w,fe)},Y=this.storage.getItem(w);!function cu(){return(0,D.lT)()&&10===document.documentMode}()||Y===f.newValue||f.newValue===f.oldValue?R():setTimeout(R,10)}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var w=()=>super._set,R=this;return(0,x.A)(function*(){yield w().call(R,f,_),R.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,w=this;return(0,x.A)(function*(){const R=yield _().call(w,f);return w.localCache[f]=JSON.stringify(R),R})()}_remove(f){var _=()=>super._remove,w=this;return(0,x.A)(function*(){yield _().call(w,f),delete w.localCache[f]})()}}return g.type="LOCAL",g})(),xy=(()=>{class g extends Gp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let Ry=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(R=>R.isListeningto(f));if(_)return _;const w=new g(f);return this.receivers.push(w),w}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,x.A)(function*(){const w=f,{eventId:R,eventType:Y,data:fe}=w.data,Se=_.handlersMap[Y];if(!Se?.size)return;w.ports[0].postMessage({status:"ack",eventId:R,eventType:Y});const et=Array.from(Se).map(function(){var Jt=(0,x.A)(function*(An){return An(w.origin,fe)});return function(An){return Jt.apply(this,arguments)}}()),lt=yield function wR(g){return Promise.all(g.map(function(){var h=(0,x.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return h.apply(this,arguments)}}()))}(et);w.ports[0].postMessage({status:"done",eventId:R,eventType:Y,response:lt})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function gs(g="",h=10){let f="";for(let _=0;_<h;_++)f+=Math.floor(10*Math.random());return g+f}class e0{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,_=50){var w=this;return(0,x.A)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let Y,fe;return new Promise((Se,et)=>{const lt=gs("",20);R.port1.start();const Jt=setTimeout(()=>{et(new Error("unsupported_event"))},_);fe={messageChannel:R,onMessage(An){const vs=An;if(vs.data.eventId===lt)switch(vs.data.status){case"ack":clearTimeout(Jt),Y=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Se(vs.data.response);break;default:clearTimeout(Jt),clearTimeout(Y),et(new Error("invalid_response"))}}},w.handlers.add(fe),R.port1.addEventListener("message",fe.onMessage),w.target.postMessage({eventType:h,eventId:lt,data:f},[R.port2])}).finally(()=>{fe&&w.removeMessageHandler(fe)})})()}}function Pr(){return window}function Py(){return typeof Pr().WorkerGlobalScope<"u"&&"function"==typeof Pr().importScripts}function jr(){return(jr=(0,x.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const vu="firebaseLocalStorageDb",qp="firebaseLocalStorage",n0="fbase_key";class hh{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Kp(g,h){return g.transaction([qp],h?"readwrite":"readonly").objectStore(qp)}function fh(){const g=indexedDB.open(vu,1);return new Promise((h,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(qp,{keyPath:n0})}catch(w){f(w)}}),g.addEventListener("success",(0,x.A)(function*(){const _=g.result;_.objectStoreNames.contains(qp)?h(_):(_.close(),yield function SR(){const g=indexedDB.deleteDatabase(vu);return new hh(g).toPromise()}(),h(yield fh()))}))})}function ph(g,h,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,x.A)(function*(g,h,f){const _=Kp(g,!0).put({[n0]:h,value:f});return new hh(_).toPromise()})).apply(this,arguments)}function ct(){return(ct=(0,x.A)(function*(g,h){const f=Kp(g,!1).get(h),_=yield new hh(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function zr(g,h){const f=Kp(g,!0).delete(h);return new hh(f).toPromise()}const ac=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,x.A)(function*(){return f.db||(f.db=yield fh()),f.db})()}_withRetries(f){var _=this;return(0,x.A)(function*(){let w=0;for(;;)try{const R=yield _._openDb();return yield f(R)}catch(R){if(w++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,x.A)(function*(){return Py()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,x.A)(function*(){f.receiver=Ry._getInstance(function TR(){return Py()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,x.A)(function*(w,R){return{keyProcessed:(yield f._poll()).includes(R.key)}});return function(w,R){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,x.A)(function*(w,R){return["keyChanged"]});return function(w,R){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,x.A)(function*(){var _,w;if(f.activeServiceWorker=yield function CR(){return jr.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new e0(f.activeServiceWorker);const R=yield f.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(w=R[0])&&void 0!==w&&w.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,x.A)(function*(){if(_.sender&&_.activeServiceWorker&&function t0(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,x.A)(function*(){try{if(!indexedDB)return!1;const f=yield fh();return yield ph(f,ka,"1"),yield zr(f,ka),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,x.A)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var w=this;return(0,x.A)(function*(){return w._withPendingWrite((0,x.A)(function*(){return yield w._withRetries(R=>ph(R,f,_)),w.localCache[f]=_,w.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,x.A)(function*(){const w=yield _._withRetries(R=>function Ue(g,h){return ct.apply(this,arguments)}(R,f));return _.localCache[f]=w,w})()}_remove(f){var _=this;return(0,x.A)(function*(){return _._withPendingWrite((0,x.A)(function*(){return yield _._withRetries(w=>zr(w,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,x.A)(function*(){const _=yield f._withRetries(Y=>{const fe=Kp(Y,!1).getAll();return new hh(fe).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const w=[],R=new Set;if(0!==_.length)for(const{fbase_key:Y,value:fe}of _)R.add(Y),JSON.stringify(f.localCache[Y])!==JSON.stringify(fe)&&(f.notifyListeners(Y,fe),w.push(Y));for(const Y of Object.keys(f.localCache))f.localCache[Y]&&!R.has(Y)&&(f.notifyListeners(Y,null),w.push(Y));return w})()}notifyListeners(f,_){this.localCache[f]=_;const w=this.listeners[f];if(w)for(const R of Array.from(w))R(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,x.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),gh=1e12;class bu{constructor(h){this.auth=h,this.counter=gh,this._widgets=new Map}render(h,f){const _=this.counter;return this._widgets.set(_,new ar(h,this.auth.name,f||{})),this.counter++,_}reset(h){var f;const _=h||gh;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(h){var f;return(null===(f=this._widgets.get(h||gh))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,x.A)(function*(){var _;return null===(_=f._widgets.get(h||gh))||void 0===_||_.execute(),""})()}}class ar{constructor(h,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof h?document.getElementById(h):h;ie(w,"argument-error",{appName:f}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function lc(g){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hl=ps("rcb"),Oa=new Jn(3e4,6e4);class Eu{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Pr().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return ie(function r0(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Xt(Pr().grecaptcha)?Promise.resolve(Pr().grecaptcha):new Promise((_,w)=>{const R=Pr().setTimeout(()=>{w(Tt(h,"network-request-failed"))},Oa.get());Pr()[hl]=()=>{Pr().clearTimeout(R),delete Pr()[hl];const fe=Pr().grecaptcha;if(!fe||!Xt(fe))return void w(Tt(h,"internal-error"));const Se=fe.render;fe.render=(et,lt)=>{const Jt=Se(et,lt);return this.counter++,Jt},this.hostLanguage=f,_(fe)},ny(`${function Hn(){return Zl.recaptchaV2Script}()}?${(0,D.Am)({onload:hl,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(R),w(Tt(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=Pr().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fl{load(h){return(0,x.A)(function*(){return new bu(h)})()}clearedOneInstance(){}}const _h="recaptcha",co={theme:"light",type:"image"};class at{constructor(h,f,_=Object.assign({},co)){this.parameters=_,this.type=_h,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vr(h),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof f?document.getElementById(f):f;ie(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fl:new Eu,this.validateStartingState()}verify(){var h=this;return(0,x.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(f)||new Promise(R=>{const Y=fe=>{fe&&(h.tokenChangeListeners.delete(Y),R(fe))};h.tokenChangeListeners.add(Y),h.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof h)h(f);else if("string"==typeof h){const _=Pr()[h];"function"==typeof _&&_(f)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,x.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,x.A)(function*(){ie(In()&&!Py(),h.auth,"internal-error"),yield function My(){let g=null;return new Promise(h=>{"complete"!==document.readyState?(g=()=>h(),window.addEventListener("load",g)):h()}).catch(h=>{throw g&&window.removeEventListener("load",g),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function Qr(g){return yi.apply(this,arguments)}(h.auth);ie(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cc{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=fu._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function aa(g,h,f){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const _=vr(g),w=yield ui(_,h,(0,D.Ku)(f));return new cc(w,R=>Lp(_,R))})).apply(this,arguments)}function wu(g,h,f){return br.apply(this,arguments)}function br(){return(br=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);yield Fp(!1,_,"phone");const w=yield ui(_.auth,h,(0,D.Ku)(f));return new cc(w,R=>ic(_,R))})).apply(this,arguments)}function Qp(g,h,f){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(mt(_.auth));const w=yield ui(_.auth,h,(0,D.Ku)(f));return new cc(w,R=>oh(_,R))})).apply(this,arguments)}function ui(g,h,f){return yh.apply(this,arguments)}function yh(){return yh=(0,x.A)(function*(g,h,f){var _;const w=yield f.verify();try{let R;if(ie("string"==typeof w,g,"argument-error"),ie(f.type===_h,g,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const Y=R.session;if("phoneNumber"in R)return ie("enroll"===Y.type,g,"internal-error"),(yield function sc(g,h){return ae(g,"POST","/v2/accounts/mfaEnrollment:start",se(g,h))}(g,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{ie("signin"===Y.type,g,"internal-error");const fe=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return ie(fe,g,"missing-multi-factor-info"),(yield function Kn(g,h){return ae(g,"POST","/v2/accounts/mfaSignIn:start",se(g,h))}(g,{mfaPendingCredential:Y.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Ow(g,h){return Ro.apply(this,arguments)}(g,{phoneNumber:R.phoneNumber,recaptchaToken:w});return Y}}finally{f._reset()}}),yh.apply(this,arguments)}function uc(g,h){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,x.A)(function*(g,h){const f=(0,D.Ku)(g);if((0,Z._isFirebaseServerApp)(f.auth.app))return Promise.reject(mt(f.auth));yield my(f,h)})).apply(this,arguments)}let Mo=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=vr(f)}verifyPhoneNumber(f,_){return ui(this.auth,f,(0,D.Ku)(_))}static credential(f,_){return fu._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:w}=f;return _&&w?fu._fromTokenResponse(_,w):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function No(g,h){return h?me(h):(ie(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Yp extends Jd{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return xo(h,this._buildIdpRequest())}_linkToIdToken(h,f){return xo(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return xo(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function DR(g){return Uw(g.auth,new Yp(g),g.bypassAuthState)}function Ny(g){const{auth:h,user:f}=g;return ie(f,h,"internal-error"),Bw(f,new Yp(g),g.bypassAuthState)}function s0(g){return ky.apply(this,arguments)}function ky(){return(ky=(0,x.A)(function*(g){const{auth:h,user:f}=g;return ie(f,h,"internal-error"),my(f,new Yp(g),g.bypassAuthState)})).apply(this,arguments)}class Xp{constructor(h,f,_,w,R=!1){this.auth=h,this.resolver=_,this.user=w,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,x.A)(function*(_,w){h.pendingPromise={resolve:_,reject:w};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,w){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,x.A)(function*(){const{urlResponse:_,sessionId:w,postBody:R,tenantId:Y,error:fe,type:Se}=h;if(fe)return void f.reject(fe);const et={auth:f.auth,requestUri:_,sessionId:w,tenantId:Y||void 0,postBody:R||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Se)(et))}catch(lt){f.reject(lt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return DR;case"linkViaPopup":case"linkViaRedirect":return s0;case"reauthViaPopup":case"reauthViaRedirect":return Ny;default:Ct(this.auth,"internal-error")}}resolve(h){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const MH=new Jn(2e3,1e4);function NH(g,h,f){return o0.apply(this,arguments)}function o0(){return(o0=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(Tt(g,"operation-not-supported-in-this-environment"));const _=vr(g);Et(g,h,Rr);const w=No(_,f);return new c0(_,"signInViaPopup",h,w).executeNotNull()})).apply(this,arguments)}function kH(g,h,f){return a0.apply(this,arguments)}function a0(){return(a0=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(Tt(_.auth,"operation-not-supported-in-this-environment"));Et(_.auth,h,Rr);const w=No(_.auth,f);return new c0(_.auth,"reauthViaPopup",h,w,_).executeNotNull()})).apply(this,arguments)}function OH(g,h,f){return l0.apply(this,arguments)}function l0(){return(l0=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);Et(_.auth,h,Rr);const w=No(_.auth,f);return new c0(_.auth,"linkViaPopup",h,w,_).executeNotNull()})).apply(this,arguments)}let c0=(()=>{class g extends Xp{constructor(f,_,w,R,Y){super(f,_,R,Y),this.provider=w,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,x.A)(function*(){const _=yield f.execute();return ie(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,x.A)(function*(){vt(1===f.filter.length,"Popup operations only handle one event");const _=gs();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(w=>{f.reject(w)}),f.resolver._isIframeWebStorageSupported(f.auth,w=>{w||f.reject(Tt(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,w;this.pollId=null!==(w=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Tt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,MH.get())};f()}}return g.currentPopupAction=null,g})();const FH="pendingRedirect",Zp=new Map;class LH extends Xp{constructor(h,f,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,x.A)(function*(){let _=Zp.get(f.auth._key());if(!_){try{const R=(yield function VH(g,h){return Jp.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;_=()=>Promise.resolve(R)}catch(w){_=()=>Promise.reject(w)}Zp.set(f.auth._key(),_)}return f.bypassAuthState||Zp.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,_=this;return(0,x.A)(function*(){if("signInViaRedirect"===h.type)return f().call(_,h);if("unknown"!==h.type){if(h.eventId){const w=yield _.auth._redirectUserForId(h.eventId);if(w)return _.user=w,f().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,x.A)(function*(){})()}cleanUp(){}}function Jp(){return(Jp=(0,x.A)(function*(g,h){const f=d0(h),_=RR(g);if(!(yield _._isAvailable()))return!1;const w="true"===(yield _._get(f));return yield _._remove(f),w})).apply(this,arguments)}function em(g,h){return u0.apply(this,arguments)}function u0(){return(u0=(0,x.A)(function*(g,h){return RR(g)._set(d0(h),"true")})).apply(this,arguments)}function BH(){Zp.clear()}function xR(g,h){Zp.set(g._key(),h)}function RR(g){return me(g._redirectPersistence)}function d0(g){return Ve(FH,g.config.apiKey,g.name)}function h0(g,h,f){return function ts(g,h,f){return tm.apply(this,arguments)}(g,h,f)}function tm(){return(tm=(0,x.A)(function*(g,h,f){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const _=vr(g);Et(g,h,Rr),yield _._initializationPromise;const w=No(_,f);return yield em(w,_),w._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function PR(g,h,f){return function MR(g,h,f){return nm.apply(this,arguments)}(g,h,f)}function nm(){return(nm=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);if(Et(_.auth,h,Rr),(0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(mt(_.auth));yield _.auth._initializationPromise;const w=No(_.auth,f);yield em(w,_.auth);const R=yield un(_);return w._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function f0(g,h,f){return function NR(g,h,f){return vh.apply(this,arguments)}(g,h,f)}function vh(){return(vh=(0,x.A)(function*(g,h,f){const _=(0,D.Ku)(g);Et(_.auth,h,Rr),yield _.auth._initializationPromise;const w=No(_.auth,f);yield Fp(!1,_,h.providerId),yield em(w,_.auth);const R=yield un(_);return w._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function kR(g,h){return uo.apply(this,arguments)}function uo(){return(uo=(0,x.A)(function*(g,h){return yield vr(g)._initializationPromise,rm(g,h,!1)})).apply(this,arguments)}function rm(g,h){return im.apply(this,arguments)}function im(){return(im=(0,x.A)(function*(g,h,f=!1){if((0,Z._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const _=vr(g),w=No(_,h),Y=yield new LH(_,w,f).execute();return Y&&!f&&(delete Y.user._redirectEventId,yield _._persistUserIfCurrent(Y.user),yield _._setRedirectUser(null,h)),Y})).apply(this,arguments)}function un(g){return bh.apply(this,arguments)}function bh(){return(bh=(0,x.A)(function*(g){const h=gs(`${g.uid}:::`);return g._redirectEventId=h,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),h})).apply(this,arguments)}class Ui{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(f=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function dc(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tu(g);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var _;if(h.error&&!Tu(h)){const w=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(Tt(this.auth,w))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const _=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(p0(h))}saveEventToCache(h){this.cachedEventUids.add(p0(h)),this.lastProcessedEventTime=Date.now()}}function p0(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(h=>h).join("-")}function Tu({type:g,error:h}){return"unknown"===g&&"auth/no-auth-event"===h?.code}function ys(g){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,x.A)(function*(g,h={}){return ae(g,"GET","/v1/projects",h)})).apply(this,arguments)}const Fy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OR=/^https?/;function sm(){return(sm=(0,x.A)(function*(g){if(g.config.emulator)return;const{authorizedDomains:h}=yield ys(g);for(const f of h)try{if(m0(f))return}catch{}Ct(g,"unauthorized-domain")})).apply(this,arguments)}function m0(g){const h=Bt(),{protocol:f,hostname:_}=new URL(h);if(g.startsWith("chrome-extension://")){const Y=new URL(g);return""===Y.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&Y.hostname===_}if(!OR.test(f))return!1;if(Fy.test(g))return _===g;const w=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(_)}const g0=new Jn(3e4,6e4);function Ih(){const g=Pr().___jsl;if(g?.H)for(const h of Object.keys(g.H))if(g.H[h].r=g.H[h].r||[],g.H[h].L=g.H[h].L||[],g.H[h].r=[...g.H[h].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let hc=null;const Vy=new Jn(5e3,15e3),Fa="__/auth/iframe",Dt="emulator/auth/iframe",am={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},By=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _0(g){const h=g.config;ie(h.authDomain,g,"auth-domain-config-required");const f=h.emulator?or(h,Dt):`https://${g.config.authDomain}/${Fa}`,_={apiKey:h.apiKey,appName:g.name,v:Z.SDK_VERSION},w=By.get(g.config.apiHost);w&&(_.eid=w);const R=g._getFrameworks();return R.length&&(_.fw=R.join(",")),`${f}?${(0,D.Am)(_).slice(1)}`}function Uy(){return Uy=(0,x.A)(function*(g){const h=yield function om(g){return hc=hc||function Ly(g){return new Promise((h,f)=>{var _,w,R;function Y(){Ih(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ih(),f(Tt(g,"network-request-failed"))},timeout:g0.get()})}if(null!==(w=null===(_=Pr().gapi)||void 0===_?void 0:_.iframes)&&void 0!==w&&w.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Pr().gapi)||void 0===R||!R.load){const fe=ps("iframefcb");return Pr()[fe]=()=>{gapi.load?Y():f(Tt(g,"network-request-failed"))},ny(`${function Cp(){return Zl.gapiScript}()}?onload=${fe}`).catch(Se=>f(Se))}Y()}}).catch(h=>{throw hc=null,h})}(g),hc}(g),f=Pr().gapi;return ie(f,g,"internal-error"),h.open({where:document.body,url:_0(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:am,dontclear:!0},_=>new Promise(function(){var w=(0,x.A)(function*(R,Y){yield _.restyle({setHideOnLeave:!1});const fe=Tt(g,"network-request-failed"),Se=Pr().setTimeout(()=>{Y(fe)},Vy.get());function et(){Pr().clearTimeout(Se),R(_)}_.ping(et).then(et,()=>{Y(fe)})});return function(R,Y){return w.apply(this,arguments)}}()))}),Uy.apply(this,arguments)}const FR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class v0{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const jR="__/auth/handler",Ie="emulator/auth/handler",Wt=encodeURIComponent("fac");function ji(g,h,f,_,w,R){return zi.apply(this,arguments)}function zi(){return(zi=(0,x.A)(function*(g,h,f,_,w,R){ie(g.config.authDomain,g,"auth-domain-config-required"),ie(g.config.apiKey,g,"invalid-api-key");const Y={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:Z.SDK_VERSION,eventId:w};if(h instanceof Rr){h.setDefaultLanguage(g.languageCode),Y.providerId=h.providerId||"",(0,D.Im)(h.getCustomParameters())||(Y.customParameters=JSON.stringify(h.getCustomParameters()));for(const[lt,Jt]of Object.entries(R||{}))Y[lt]=Jt}if(h instanceof tc){const lt=h.getScopes().filter(Jt=>""!==Jt);lt.length>0&&(Y.scopes=lt.join(","))}g.tenantId&&(Y.tid=g.tenantId);const fe=Y;for(const lt of Object.keys(fe))void 0===fe[lt]&&delete fe[lt];const Se=yield g._getAppCheckToken(),et=Se?`#${Wt}=${encodeURIComponent(Se)}`:"";return`${function kn({config:g}){return g.emulator?or(g,Ie):`https://${g.authDomain}/${jR}`}(g)}?${(0,D.Am)(fe).slice(1)}${et}`})).apply(this,arguments)}const lm="webStorageSupport",fo=class wh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xy,this._completeRedirectFn=rm,this._overrideRedirectResult=xR}_openPopup(h,f,_,w){var R=this;return(0,x.A)(function*(){var Y;vt(null===(Y=R.eventManagers[h._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const fe=yield ji(h,f,_,Bt(),w);return function BR(g,h,f,_=500,w=600){const R=Math.max((window.screen.availHeight-w)/2,0).toString(),Y=Math.max((window.screen.availWidth-_)/2,0).toString();let fe="";const Se=Object.assign(Object.assign({},FR),{width:_.toString(),height:w.toString(),top:R,left:Y}),et=(0,D.ZQ)().toLowerCase();f&&(fe=Ls(et)?"_blank":f),K(et)&&(h=h||"http://localhost",Se.scrollbars="yes");const lt=Object.entries(Se).reduce((An,[vs,On])=>`${An}${vs}=${On},`,"");if(function lu(g=(0,D.ZQ)()){var h;return io(g)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(et)&&"_self"!==fe)return function UR(g,h){const f=document.createElement("a");f.href=g,f.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(h||"",fe),new v0(null);const Jt=window.open(h||"",fe,lt);ie(Jt,g,"popup-blocked");try{Jt.focus()}catch{}return new v0(Jt)}(h,fe,gs())})()}_openRedirect(h,f,_,w){var R=this;return(0,x.A)(function*(){return yield R._originValidation(h),function yu(g){Pr().location.href=g}(yield ji(h,f,_,Bt(),w)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:w,promise:R}=this.eventManagers[f];return w?Promise.resolve(w):(vt(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(h){var f=this;return(0,x.A)(function*(){const _=yield function UH(g){return Uy.apply(this,arguments)}(h),w=new Ui(h);return _.register("authEvent",R=>(ie(R?.authEvent,h,"invalid-auth-event"),{status:w.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:w},f.iframes[h._key()]=_,w})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(lm,{type:lm},w=>{var R;const Y=null===(R=w?.[0])||void 0===R?void 0:R[lm];void 0!==Y&&f(!!Y),Ct(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ho(g){return sm.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return ty()||Gn()||io()}};class cm{constructor(h){this.factorId=h}_process(h,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,_);case"signin":return this._finalizeSignIn(h,f.credential);default:return tt("unexpected MultiFactorSessionType")}}}class Ch extends cm{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ch(h)}_finalizeEnroll(h,f,_){return function yR(g,h){return ae(g,"POST","/v2/accounts/mfaEnrollment:finalize",se(g,h))}(h,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function Zr(g,h){return ae(g,"POST","/v2/accounts/mfaSignIn:finalize",se(g,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let b0=(()=>{class g{constructor(){}static assertion(f){return Ch._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var zy="@firebase/auth";class La{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,x.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const zR=(0,D.XA)("authIdTokenMaxAge")||300;let Hy=null;const HR=g=>function(){var h=(0,x.A)(function*(f){const _=f&&(yield f.getIdTokenResult()),w=_&&((new Date).getTime()-Date.parse(_.issuedAtTime))/1e3;if(w&&w>zR)return;const R=_?.token;Hy!==R&&(Hy=R,yield fetch(g,{method:R?"POST":"DELETE",headers:R?{Authorization:`Bearer ${R}`}:{}}))});return function(f){return h.apply(this,arguments)}}();function $R(g=(0,Z.getApp)()){const h=(0,Z._getProvider)(g,"auth");if(h.isInitialized())return h.getImmediate();const f=function AH(g,h){const f=(0,Z._getProvider)(g,"auth");if(f.isInitialized()){const w=f.getImmediate(),R=f.getOptions();if((0,D.bD)(R,h??{}))return w;Ct(w,"already-initialized")}return f.initialize({options:h})}(g,{popupRedirectResolver:fo,persistence:[ac,oc,xy]}),_=(0,D.XA)("authTokenSyncURL");if(_&&"boolean"==typeof isSecureContext&&isSecureContext){const R=new URL(_,location.origin);if(location.origin===R.origin){const Y=HR(R.toString());(function dl(g,h,f){(0,D.Ku)(g).beforeAuthStateChanged(h,f)})(f,Y,()=>Y(f.currentUser)),function mR(g,h,f,_){(0,D.Ku)(g).onIdTokenChanged(h,f,_)}(f,fe=>Y(fe))}}const w=(0,D.Tj)("auth");return w&&Xx(f,`http://${w}`),f}(function wH(g){Zl=g})({loadJS:g=>new Promise((h,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=h,_.onerror=w=>{const R=Tt("internal-error");R.customData=w,f(R)},_.type="text/javascript",_.charset="UTF-8",function $y(){var g,h;return null!==(h=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==h?h:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function ko(g){(0,Z._registerComponent)(new te.uA("auth",(h,{options:f})=>{const _=h.getProvider("app").getImmediate(),w=h.getProvider("heartbeat"),R=h.getProvider("app-check-internal"),{apiKey:Y,authDomain:fe}=_.options;ie(Y&&!Y.includes(":"),"invalid-api-key",{appName:_.name});const Se={apiKey:Y,authDomain:fe,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wp(g)},et=new Nn(_,w,R,Se);return function Yx(g,h){const f=h?.persistence||[],_=(Array.isArray(f)?f:[f]).map(me);h?.errorMap&&g._updateErrorMap(h.errorMap),g._initializeWithPersistence(_,h?.popupRedirectResolver)}(et,f),et},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,_)=>{h.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new te.uA("auth-internal",h=>{const f=vr(h.getProvider("auth").getImmediate());return new La(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(zy,"1.7.9",function I0(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Z.registerVersion)(zy,"1.7.9","esm2017")}("Browser")},1401:(yt,U,G)=>{G.d(U,{$L:()=>Tn,$g:()=>or,A4:()=>$,Am:()=>us,As:()=>It,Bd:()=>tt,Cv:()=>Xt,FA:()=>pe,Fy:()=>mt,HN:()=>hs,Hk:()=>D,I9:()=>ks,Im:()=>yi,K3:()=>te,KA:()=>ee,Ku:()=>Ce,Ll:()=>ie,OE:()=>ai,T9:()=>Ct,Tj:()=>Ht,Uj:()=>X,XA:()=>Tt,ZQ:()=>Et,bD:()=>Yr,c1:()=>Bt,cY:()=>Nt,dI:()=>ds,dM:()=>se,eX:()=>_e,g:()=>ge,gR:()=>kt,gz:()=>na,hp:()=>no,jZ:()=>Le,kH:()=>xr,kj:()=>ll,lT:()=>Cn,lV:()=>wn,mS:()=>Fe,nr:()=>Br,oD:()=>Li,od:()=>Do,p7:()=>vt,p9:()=>Lt,qc:()=>Zt,sr:()=>In,tD:()=>Os,u:()=>z,vA:()=>Z,yw:()=>Qr,zW:()=>de,zw:()=>ue});const x={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(C,E){if(!C)throw D(E)},D=function(C){return new Error("Firebase Database ("+x.SDK_VERSION+") INTERNAL ASSERT FAILED: "+C)},he=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):55296==(64512&j)&&F+1<C.length&&56320==(64512&C.charCodeAt(F+1))?(j=65536+((1023&j)<<10)+(1023&C.charCodeAt(++F)),E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,E){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=E?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let j=0;j<C.length;j+=3){const me=C[j],Pe=j+1<C.length,pt=Pe?C[j+1]:0,Ve=j+2<C.length,pn=Ve?C[j+2]:0;let Gn=(15&pt)<<2|pn>>6,Ls=63&pn;Ve||(Ls=64,Pe||(Gn=64)),F.push(S[me>>2],S[(3&me)<<4|pt>>4],S[Gn],S[Ls])}return F.join("")},encodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?btoa(C):this.encodeByteArray(he(C),E)},decodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?atob(C):function(C){const E=[];let S=0,F=0;for(;S<C.length;){const j=C[S++];if(j<128)E[F++]=String.fromCharCode(j);else if(j>191&&j<224){const me=C[S++];E[F++]=String.fromCharCode((31&j)<<6|63&me)}else if(j>239&&j<365){const Ve=((7&j)<<18|(63&C[S++])<<12|(63&C[S++])<<6|63&C[S++])-65536;E[F++]=String.fromCharCode(55296+(Ve>>10)),E[F++]=String.fromCharCode(56320+(1023&Ve))}else{const me=C[S++],Pe=C[S++];E[F++]=String.fromCharCode((15&j)<<12|(63&me)<<6|63&Pe)}}return E.join("")}(this.decodeStringToByteArray(C,E))},decodeStringToByteArray(C,E){this.init_();const S=E?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let j=0;j<C.length;){const me=S[C.charAt(j++)],pt=j<C.length?S[C.charAt(j)]:0;++j;const pn=j<C.length?S[C.charAt(j)]:64;++j;const K=j<C.length?S[C.charAt(j)]:64;if(++j,null==me||null==pt||null==pn||null==K)throw new we;F.push(me<<2|pt>>4),64!==pn&&(F.push(pt<<4&240|pn>>2),64!==K&&F.push(pn<<6&192|K))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ee=function(C){const E=he(C);return te.encodeByteArray(E,!0)},X=function(C){return ee(C).replace(/\./g,"")},z=function(C){try{return te.decodeString(C,!0)}catch(E){console.error("base64Decode failed: ",E)}return null};function $(C){return ue(void 0,C)}function ue(C,E){if(!(E instanceof Object))return E;switch(E.constructor){case Date:return new Date(E.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return E}for(const S in E)!E.hasOwnProperty(S)||!Te(S)||(C[S]=ue(C[S],E[S]));return C}function Te(C){return"__proto__"!==C}function Fe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ye=()=>{try{return Fe().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const E=C&&z(C[1]);return E&&JSON.parse(E)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},Ht=C=>{var E,S;return null===(S=null===(E=Ye())||void 0===E?void 0:E.emulatorHosts)||void 0===S?void 0:S[C]},Ct=()=>{var C;return null===(C=Ye())||void 0===C?void 0:C.config},Tt=C=>{var E;return null===(E=Ye())||void 0===E?void 0:E[`_${C}`]};class Nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((E,S)=>{this.resolve=E,this.reject=S})}wrapCallback(E){return(S,F)=>{S?this.reject(S):this.resolve(F),"function"==typeof E&&(this.promise.catch(()=>{}),1===E.length?E(S):E(S,F))}}}function mt(C,E){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=E||"demo-project",j=C.iat||0,me=C.sub||C.user_id;if(!me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:j,exp:j+3600,auth_time:j,sub:me,user_id:me,firebase:{sign_in_provider:"custom",identities:{}}},C);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(Pe)),""].join(".")}function Et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function ie(){var C;const E=null===(C=Ye())||void 0===C?void 0:C.forceEnvironment;if("node"===E)return!0;if("browser"===E)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return typeof window<"u"||vt()}function vt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Bt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function In(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function wn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Cn(){const C=Et();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function or(){return!0===x.NODE_CLIENT||!0===x.NODE_ADMIN}function Br(){return!ie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){try{return"object"==typeof indexedDB}catch{return!1}}function _e(){return new Promise((C,E)=>{try{let S=!0;const F="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(F);j.onsuccess=()=>{j.result.close(),S||self.indexedDB.deleteDatabase(F),C(!0)},j.onupgradeneeded=()=>{S=!1},j.onerror=()=>{var me;E((null===(me=j.error)||void 0===me?void 0:me.message)||"")}}catch(S){E(S)}})}function se(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ge extends Error{constructor(E,S,F){super(S),this.code=E,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}}class pe{constructor(E,S,F){this.service=E,this.serviceName=S,this.errors=F}create(E,...S){const F=S[0]||{},j=`${this.service}/${E}`,me=this.errors[E],Pe=me?function st(C,E){return C.replace(xt,(S,F)=>{const j=E[F];return null!=j?String(j):`<${F}?>`})}(me,F):"Error";return new ge(j,`${this.serviceName}: ${Pe} (${j}).`,F)}}const xt=/\{\$([^}]+)}/g;function Tn(C){return JSON.parse(C)}function It(C){return JSON.stringify(C)}const vn=function(C){let E={},S={},F={},j="";try{const me=C.split(".");E=Tn(z(me[0])||""),S=Tn(z(me[1])||""),j=me[2],F=S.d||{},delete S.d}catch{}return{header:E,claims:S,data:F,signature:j}},Xt=function(C){const S=vn(C).claims;return!!S&&"object"==typeof S&&S.hasOwnProperty("iat")},Zt=function(C){const E=vn(C).claims;return"object"==typeof E&&!0===E.admin};function kt(C,E){return Object.prototype.hasOwnProperty.call(C,E)}function Qr(C,E){if(Object.prototype.hasOwnProperty.call(C,E))return C[E]}function yi(C){for(const E in C)if(Object.prototype.hasOwnProperty.call(C,E))return!1;return!0}function xr(C,E,S){const F={};for(const j in C)Object.prototype.hasOwnProperty.call(C,j)&&(F[j]=E.call(S,C[j],j,C));return F}function Yr(C,E){if(C===E)return!0;const S=Object.keys(C),F=Object.keys(E);for(const j of S){if(!F.includes(j))return!1;const me=C[j],Pe=E[j];if(to(me)&&to(Pe)){if(!Yr(me,Pe))return!1}else if(me!==Pe)return!1}for(const j of F)if(!S.includes(j))return!1;return!0}function to(C){return null!==C&&"object"==typeof C}function us(C){const E=[];for(const[S,F]of Object.entries(C))Array.isArray(F)?F.forEach(j=>{E.push(encodeURIComponent(S)+"="+encodeURIComponent(j))}):E.push(encodeURIComponent(S)+"="+encodeURIComponent(F));return E.length?"&"+E.join("&"):""}function ks(C){const E={};return C.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[j,me]=F.split("=");E[decodeURIComponent(j)]=decodeURIComponent(me)}}),E}function no(C){const E=C.indexOf("?");if(!E)return"";const S=C.indexOf("#",E);return C.substring(E,S>0?S:void 0)}class na{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let E=1;E<this.blockSize;++E)this.pad_[E]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(E,S){S||(S=0);const F=this.W_;if("string"==typeof E)for(let K=0;K<16;K++)F[K]=E.charCodeAt(S)<<24|E.charCodeAt(S+1)<<16|E.charCodeAt(S+2)<<8|E.charCodeAt(S+3),S+=4;else for(let K=0;K<16;K++)F[K]=E[S]<<24|E[S+1]<<16|E[S+2]<<8|E[S+3],S+=4;for(let K=16;K<80;K++){const Gn=F[K-3]^F[K-8]^F[K-14]^F[K-16];F[K]=4294967295&(Gn<<1|Gn>>>31)}let pn,yr,j=this.chain_[0],me=this.chain_[1],Pe=this.chain_[2],pt=this.chain_[3],Ve=this.chain_[4];for(let K=0;K<80;K++){K<40?K<20?(pn=pt^me&(Pe^pt),yr=1518500249):(pn=me^Pe^pt,yr=1859775393):K<60?(pn=me&Pe|pt&(me|Pe),yr=2400959708):(pn=me^Pe^pt,yr=3395469782);const Gn=(j<<5|j>>>27)+pn+Ve+yr+F[K]&4294967295;Ve=pt,pt=Pe,Pe=4294967295&(me<<30|me>>>2),me=j,j=Gn}this.chain_[0]=this.chain_[0]+j&4294967295,this.chain_[1]=this.chain_[1]+me&4294967295,this.chain_[2]=this.chain_[2]+Pe&4294967295,this.chain_[3]=this.chain_[3]+pt&4294967295,this.chain_[4]=this.chain_[4]+Ve&4294967295}update(E,S){if(null==E)return;void 0===S&&(S=E.length);const F=S-this.blockSize;let j=0;const me=this.buf_;let Pe=this.inbuf_;for(;j<S;){if(0===Pe)for(;j<=F;)this.compress_(E,j),j+=this.blockSize;if("string"==typeof E){for(;j<S;)if(me[Pe]=E.charCodeAt(j),++Pe,++j,Pe===this.blockSize){this.compress_(me),Pe=0;break}}else for(;j<S;)if(me[Pe]=E[j],++Pe,++j,Pe===this.blockSize){this.compress_(me),Pe=0;break}}this.inbuf_=Pe,this.total_+=S}digest(){const E=[];let S=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let j=this.blockSize-1;j>=56;j--)this.buf_[j]=255&S,S/=256;this.compress_(this.buf_);let F=0;for(let j=0;j<5;j++)for(let me=24;me>=0;me-=8)E[F]=this.chain_[j]>>me&255,++F;return E}}function Os(C,E){const S=new oi(C,E);return S.subscribe.bind(S)}class oi{constructor(E,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{E(this)}).catch(F=>{this.error(F)})}next(E){this.forEachObserver(S=>{S.next(E)})}error(E){this.forEachObserver(S=>{S.error(E)}),this.close(E)}complete(){this.forEachObserver(E=>{E.complete()}),this.close()}subscribe(E,S,F){let j;if(void 0===E&&void 0===S&&void 0===F)throw new Error("Missing Observer.");j=function Fs(C,E){if("object"!=typeof C||null===C)return!1;for(const S of E)if(S in C&&"function"==typeof C[S])return!0;return!1}(E,["next","error","complete"])?E:{next:E,error:S,complete:F},void 0===j.next&&(j.next=es),void 0===j.error&&(j.error=es),void 0===j.complete&&(j.complete=es);const me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?j.error(this.finalError):j.complete()}catch{}}),this.observers.push(j),me}unsubscribeOne(E){void 0===this.observers||void 0===this.observers[E]||(delete this.observers[E],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(E){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,E)}sendOne(E,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[E])try{S(this.observers[E])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(E){this.finalized||(this.finalized=!0,void 0!==E&&(this.finalError=E),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function es(){}const Do=function(C,E,S,F){let j;if(F<E?j="at least "+E:F>S&&(j=0===S?"none":"no more than "+S),j)throw new Error(C+" failed: Was called with "+F+(1===F?" argument.":" arguments.")+" Expects "+j+".")};function ds(C,E){return`${C} failed: ${E} argument `}function Li(C,E,S,F){if((!F||S)&&"function"!=typeof S)throw new Error(ds(C,E)+"must be a valid function.")}function hs(C,E,S,F){if((!F||S)&&("object"!=typeof S||null===S))throw new Error(ds(C,E)+"must be a valid context object.")}const ll=function(C){const E=[];let S=0;for(let F=0;F<C.length;F++){let j=C.charCodeAt(F);if(j>=55296&&j<=56319){const me=j-55296;F++,Z(F<C.length,"Surrogate pair missing trail surrogate."),j=65536+(me<<10)+(C.charCodeAt(F)-56320)}j<128?E[S++]=j:j<2048?(E[S++]=j>>6|192,E[S++]=63&j|128):j<65536?(E[S++]=j>>12|224,E[S++]=j>>6&63|128,E[S++]=63&j|128):(E[S++]=j>>18|240,E[S++]=j>>12&63|128,E[S++]=j>>6&63|128,E[S++]=63&j|128)}return E},ai=function(C){let E=0;for(let S=0;S<C.length;S++){const F=C.charCodeAt(S);F<128?E++:F<2048?E+=2:F>=55296&&F<=56319?(E+=4,S++):E+=3}return E},ro=1e3,Ci=2,Ra=144e5,ia=.5;function Lt(C,E=ro,S=Ci){const F=E*Math.pow(S,C),j=Math.round(ia*F*(Math.random()-.5)*2);return Math.min(Ra,F+j)}function Ce(C){return C&&C._delegate?C._delegate:C}},2222:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=te(G(7029)),Z=te(G(3100)),D=te(G(5705)),he=te(G(942)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$,ue){var Te=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,Fe=(0,x.default)(z),Je=(0,Z.default)(z),Ke=$/Te,Qe=(0,D.default)(ue),Ye=(0,D.default)(Fe),Ht=(0,D.default)(Je),Yt=Math.asin(Math.sin(Ye)*Math.cos(Ke)+Math.cos(Ye)*Math.sin(Ke)*Math.cos(Qe)),Ct=Ht+Math.atan2(Math.sin(Qe)*Math.sin(Ke)*Math.cos(Ye),Math.cos(Ke)-Math.sin(Ye)*Math.sin(Yt)),Tt=(0,he.default)(Ct);return(Tt<ce.MINLON||Tt>ce.MAXLON)&&(Ct=(Ct+3*Math.PI)%(2*Math.PI)-Math.PI,Tt=(0,he.default)(Ct)),{latitude:(0,he.default)(Yt),longitude:Tt}}},7636:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.areaConversion=U.timeConversion=U.distanceConversion=U.altitudeKeys=U.latitudeKeys=U.longitudeKeys=U.MAXLON=U.MINLON=U.MAXLAT=U.MINLAT=U.earthRadius=U.sexagesimalPattern=void 0,U.sexagesimalPattern=/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['\u2032]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["\u2033]\s*)?([NEOSW]?)$/,U.earthRadius=6378137,U.MINLAT=-90,U.MAXLAT=90,U.MINLON=-180,U.MAXLON=180,U.longitudeKeys=["lng","lon","longitude",0],U.latitudeKeys=["lat","latitude",1],U.altitudeKeys=["alt","altitude","elevation","elev",2],U.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},U.timeConversion={m:60,h:3600,d:86400};var $={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};U.areaConversion=$,$.sqm=$.m2,$.sqkm=$.km2,$.sqft=$.ft2,$.sqyd=$.yd2,$.sqin=$.in2},179:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){var we=x.areaConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(we)return ce*we;throw new Error("Invalid unit used for area conversion.")}},917:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){var we=x.distanceConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(we)return ce*we;throw new Error("Invalid unit used for distance conversion.")}},1167:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh"){case"kmh":return ce*x.timeConversion.h*x.distanceConversion.km;case"mph":return ce*x.timeConversion.h*x.distanceConversion.mi;default:return ce}}},8948:(yt,U)=>{function G(X,z){return function ce(X){if(Array.isArray(X))return X}(X)||function he(X,z){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(X)){var $=[],ue=!0,Te=!1,Fe=void 0;try{for(var Ke,Je=X[Symbol.iterator]();!(ue=(Ke=Je.next()).done)&&($.push(Ke.value),!z||$.length!==z);ue=!0);}catch(Qe){Te=!0,Fe=Qe}finally{try{!ue&&null!=Je.return&&Je.return()}finally{if(Te)throw Fe}}return $}}(X,z)||function Z(X,z){if(X){if("string"==typeof X)return D(X,z);var $=Object.prototype.toString.call(X).slice(8,-1);if("Object"===$&&X.constructor&&($=X.constructor.name),"Map"===$||"Set"===$)return Array.from(X);if("Arguments"===$||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return D(X,z)}}(X,z)||function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(X,z){(null==z||z>X.length)&&(z=X.length);for(var $=0,ue=new Array(z);$<z;$++)ue[$]=X[$];return ue}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(z){var ue=G(z.toString().split("."),2),Fe=ue[1],Je=Math.abs(Number(ue[0])),Ke=60*+("0."+(Fe||0)),Qe=Ke.toString().split("."),Ye=Math.floor(Ke),Ht=function(z){var ue=Math.pow(10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:4);return Math.round(z*ue)/ue}(60*+("0."+(Qe[1]||0))).toString(),Ct=G(Ht.split("."),2),Tt=Ct[0],Nt=Ct[1],mt=void 0===Nt?"0":Nt;return Je+"\xb0 "+Ye.toString().padStart(2,"0")+"' "+Tt.padStart(2,"0")+"."+mt.padEnd(1,"0")+'"'}},1118:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(2447));U.default=function(te,we){return(0,x.default)(te,we)[0]}},1691:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(5705)),Z=ce(G(7029)),D=ce(G(3100)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){var z=0;if(X.length>2){for(var $,ue,Te,Fe=0;Fe<X.length;Fe++){Fe===X.length-2?($=X.length-2,ue=X.length-1,Te=0):Fe===X.length-1?($=X.length-1,ue=0,Te=1):($=Fe,ue=Fe+1,Te=Fe+2);var Je=(0,D.default)(X[$]),Ke=(0,Z.default)(X[ue]),Qe=(0,D.default)(X[Te]);z+=((0,x.default)(Qe)-(0,x.default)(Je))*Math.sin((0,x.default)(Ke))}z=z*he.earthRadius*he.earthRadius/2}return Math.abs(z)}},9144:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=D(G(7029)),Z=D(G(3100));function D(te){return te&&te.__esModule?te:{default:te}}U.default=function(we){if(!1===Array.isArray(we)||0===we.length)throw new Error("No points were given.");return we.reduce(function(ee,X){var z=(0,x.default)(X),$=(0,Z.default)(X);return{maxLat:Math.max(z,ee.maxLat),minLat:Math.min(z,ee.minLat),maxLng:Math.max($,ee.maxLng),minLng:Math.min($,ee.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}},190:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=te(G(7029)),Z=te(G(3100)),D=te(G(5705)),he=te(G(942)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var Nt,mt,ue=(0,x.default)(z),Te=(0,Z.default)(z),Fe=(0,D.default)(ue),Je=(0,D.default)(Te),Ke=$/ce.earthRadius,Qe=Fe-Ke,Ye=Fe+Ke,Ht=(0,D.default)(ce.MAXLAT),Yt=(0,D.default)(ce.MINLAT),Ct=(0,D.default)(ce.MAXLON),Tt=(0,D.default)(ce.MINLON);if(Qe>Yt&&Ye<Ht){var Et=Math.asin(Math.sin(Ke)/Math.cos(Fe));(Nt=Je-Et)<Tt&&(Nt+=2*Math.PI),(mt=Je+Et)>Ct&&(mt-=2*Math.PI)}else Qe=Math.max(Qe,Yt),Ye=Math.min(Ye,Ht),Nt=Tt,mt=Ct;return[{latitude:(0,he.default)(Qe),longitude:(0,he.default)(Nt)},{latitude:(0,he.default)(Ye),longitude:(0,he.default)(mt)}]}},5524:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(7029)),Z=ce(G(3100)),D=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X){if(!1===Array.isArray(X)||0===X.length)return!1;var z=X.length,$=X.reduce(function(Je,Ke){var Qe=(0,D.default)((0,x.default)(Ke)),Ye=(0,D.default)((0,Z.default)(Ke));return{X:Je.X+Math.cos(Qe)*Math.cos(Ye),Y:Je.Y+Math.cos(Qe)*Math.sin(Ye),Z:Je.Z+Math.sin(Qe)}},{X:0,Y:0,Z:0}),ue=$.X/z,Te=$.Y/z,Fe=$.Z/z;return{longitude:(0,he.default)(Math.atan2(Te,ue)),latitude:(0,he.default)(Math.atan2(Fe,Math.sqrt(ue*ue+Te*Te)))}}},7088:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(9144));U.default=function(te){var we=(0,x.default)(te),X=we.minLng+(we.maxLng-we.minLng)/2;return{latitude:parseFloat((we.minLat+(we.maxLat-we.minLat)/2).toFixed(6)),longitude:parseFloat(X.toFixed(6))}}},9952:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(939));U.default=function(te,we){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.default,X="function"==typeof ee?ee(te,we):(0,x.default)(te,we);if(isNaN(X))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(X/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}},8744:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D,he){return he.reduce(function(ce,te){if(typeof D>"u"||null===D)throw new Error("'".concat(D,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(D,te)&&typeof te<"u"&&typeof ce>"u"?(ce=te,te):ce},void 0)}},4695:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636),Z=function D(X){return X&&X.__esModule?X:{default:X}}(G(8744));function he(X,z){var $=Object.keys(X);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(X);z&&(ue=ue.filter(function(Te){return Object.getOwnPropertyDescriptor(X,Te).enumerable})),$.push.apply($,ue)}return $}function te(X,z,$){return z in X?Object.defineProperty(X,z,{value:$,enumerable:!0,configurable:!0,writable:!0}):X[z]=$,X}U.default=function(z){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:x.longitudeKeys,latitude:x.latitudeKeys,altitude:x.altitudeKeys},ue=(0,Z.default)(z,$.longitude),Te=(0,Z.default)(z,$.latitude),Fe=(0,Z.default)(z,$.altitude);return function ce(X){for(var z=1;z<arguments.length;z++){var $=null!=arguments[z]?arguments[z]:{};z%2?he(Object($),!0).forEach(function(ue){te(X,ue,$[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors($)):he(Object($)).forEach(function(ue){Object.defineProperty(X,ue,Object.getOwnPropertyDescriptor($,ue))})}return X}({latitude:Te,longitude:ue},Fe?{altitude:Fe}:{})}},8674:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=te(G(7029)),Z=te(G(3100)),D=te(G(5705)),he=te(G(6522)),ce=G(7636);function te(X){return X&&X.__esModule?X:{default:X}}U.default=function(z,$){var ue=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ue=typeof ue<"u"&&!isNaN(ue)?ue:1;var Te=(0,x.default)(z),Fe=(0,Z.default)(z),Je=(0,x.default)($),Ke=(0,Z.default)($),Qe=Math.acos((0,he.default)(Math.sin((0,D.default)(Je))*Math.sin((0,D.default)(Te))+Math.cos((0,D.default)(Je))*Math.cos((0,D.default)(Te))*Math.cos((0,D.default)(Fe)-(0,D.default)(Ke))))*ce.earthRadius;return Math.round(Qe/ue)*ue}},7504:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=D(G(8674)),Z=D(G(6522));function D(te){return te&&te.__esModule?te:{default:te}}U.default=function(we,ee,X){var z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,$=(0,x.default)(ee,we,z),ue=(0,x.default)(we,X,z),Te=(0,x.default)(ee,X,z),Fe=Math.acos((0,Z.default)(($*$+Te*Te-ue*ue)/(2*$*Te))),Je=Math.acos((0,Z.default)((ue*ue+Te*Te-$*$)/(2*ue*Te)));return Fe>Math.PI/2?$:Je>Math.PI/2?ue:Math.sin(Fe)*$}},884:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(7029)),Z=ce(G(3100)),D=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,x.default)(z),ue=(0,Z.default)(z),Te=(0,x.default)(X),Fe=(0,Z.default)(X);return((0,he.default)(Math.atan2(Math.sin((0,D.default)(ue)-(0,D.default)(Fe))*Math.cos((0,D.default)($)),Math.cos((0,D.default)(Te))*Math.sin((0,D.default)($))-Math.sin((0,D.default)(Te))*Math.cos((0,D.default)($))*Math.cos((0,D.default)(ue)-(0,D.default)(Fe))))+360)%360}},7029:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636),Z=he(G(8744)),D=he(G(5101));function he(we){return we&&we.__esModule?we:{default:we}}U.default=function(ee,X){var z=(0,Z.default)(ee,x.latitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,D.default)($)}}},3100:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636),Z=he(G(8744)),D=he(G(5101));function he(we){return we&&we.__esModule?we:{default:we}}U.default=function(ee,X){var z=(0,Z.default)(ee,x.longitudeKeys);if(!(typeof z>"u"||null===z)){var $=ee[z];return!0===X?$:(0,D.default)($)}}},5378:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(te){return te&&te.__esModule?te:{default:te}}(G(8674));function D(te){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(te)}U.default=function(we){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.default;return we.reduce(function(X,z){return"object"===D(X)&&null!==X.last&&(X.distance+=ee(z,X.last)),X.last=z,X},{last:null,distance:0}).distance}},2671:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(7029)),Z=ce(G(3100)),D=ce(G(5705)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;$=typeof $<"u"&&!isNaN($)?$:1;var Ht,Yt,Ct,Tt,Nt,mt,wn,ue=(0,x.default)(X),Te=(0,Z.default)(X),Fe=(0,x.default)(z),Je=(0,Z.default)(z),Ke=6356752.314245,Qe=1/298.257223563,Ye=(0,D.default)(Je-Te),Et=Math.atan((1-Qe)*Math.tan((0,D.default)(parseFloat(ue)))),Le=Math.atan((1-Qe)*Math.tan((0,D.default)(parseFloat(Fe)))),ie=Math.sin(Et),tt=Math.cos(Et),vt=Math.sin(Le),Bt=Math.cos(Le),In=Ye,_r=100;do{var Cn=Math.sin(In),Jn=Math.cos(In);if(0===(mt=Math.sqrt(Bt*Cn*(Bt*Cn)+(tt*vt-ie*Bt*Jn)*(tt*vt-ie*Bt*Jn))))return 0;Ht=ie*vt+tt*Bt*Jn,Yt=Math.atan2(mt,Ht),Nt=Ht-2*ie*vt/(Tt=1-(Ct=tt*Bt*Cn/mt)*Ct),isNaN(Nt)&&(Nt=0);var or=Qe/16*Tt*(4+Qe*(4-3*Tt));wn=In,In=Ye+(1-or)*Qe*Ct*(Yt+or*mt*(Nt+or*Ht*(2*Nt*Nt-1)))}while(Math.abs(In-wn)>1e-12&&--_r>0);if(0===_r)return NaN;var Br=Tt*(he.earthRadius*he.earthRadius-Ke*Ke)/(Ke*Ke),_e=Br/1024*(256+Br*(Br*(74-47*Br)-128));return Math.round(Ke*(1+Br/16384*(4096+Br*(Br*(320-175*Br)-768)))*(Yt-_e*mt*(Nt+_e/4*(Ht*(2*Nt*Nt-1)-_e/6*Nt*(4*mt*mt-3)*(4*Nt*Nt-3))))/$)*$}},939:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(7029)),Z=ce(G(3100)),D=ce(G(5705)),he=ce(G(942));function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function(X,z){var $=(0,D.default)((0,Z.default)(z))-(0,D.default)((0,Z.default)(X)),ue=Math.log(Math.tan((0,D.default)((0,x.default)(z))/2+Math.PI/4)/Math.tan((0,D.default)((0,x.default)(X))/2+Math.PI/4));return Math.abs($)>Math.PI&&($=$>0?-1*(2*Math.PI-$):2*Math.PI+$),((0,he.default)(Math.atan2($,ue))+360)%360}},2845:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){return/^(NNE|NE|NNW|N)$/.test(D)?"N":/^(ENE|E|ESE|SE)$/.test(D)?"E":/^(SSE|S|SSW|SW)$/.test(D)?"S":/^(WSW|W|WNW|NW)$/.test(D)?"W":void 0}},8950:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,we){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.default)(te,we)/(Number(we.time)-Number(te.time))*1e3}},2541:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0});var x={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(U,"computeDestinationPoint",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(U,"convertArea",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(U,"convertDistance",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(U,"convertSpeed",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(U,"decimalToSexagesimal",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(U,"findNearest",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(U,"getAreaOfPolygon",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(U,"getBounds",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(U,"getBoundsOfDistance",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(U,"getCenter",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(U,"getCenterOfBounds",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(U,"getCompassDirection",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(U,"getCoordinateKey",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(U,"getCoordinateKeys",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(U,"getDistance",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(U,"getDistanceFromLine",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(U,"getGreatCircleBearing",{enumerable:!0,get:function(){return Ye.default}}),Object.defineProperty(U,"getLatitude",{enumerable:!0,get:function(){return Ht.default}}),Object.defineProperty(U,"getLongitude",{enumerable:!0,get:function(){return Yt.default}}),Object.defineProperty(U,"getPathLength",{enumerable:!0,get:function(){return Ct.default}}),Object.defineProperty(U,"getPreciseDistance",{enumerable:!0,get:function(){return Tt.default}}),Object.defineProperty(U,"getRhumbLineBearing",{enumerable:!0,get:function(){return Nt.default}}),Object.defineProperty(U,"getRoughCompassDirection",{enumerable:!0,get:function(){return mt.default}}),Object.defineProperty(U,"getSpeed",{enumerable:!0,get:function(){return Et.default}}),Object.defineProperty(U,"isDecimal",{enumerable:!0,get:function(){return Le.default}}),Object.defineProperty(U,"isPointInLine",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(U,"isPointInPolygon",{enumerable:!0,get:function(){return tt.default}}),Object.defineProperty(U,"isPointNearLine",{enumerable:!0,get:function(){return vt.default}}),Object.defineProperty(U,"isPointWithinRadius",{enumerable:!0,get:function(){return Bt.default}}),Object.defineProperty(U,"isSexagesimal",{enumerable:!0,get:function(){return In.default}}),Object.defineProperty(U,"isValidCoordinate",{enumerable:!0,get:function(){return wn.default}}),Object.defineProperty(U,"isValidLatitude",{enumerable:!0,get:function(){return _r.default}}),Object.defineProperty(U,"isValidLongitude",{enumerable:!0,get:function(){return Cn.default}}),Object.defineProperty(U,"orderByDistance",{enumerable:!0,get:function(){return Jn.default}}),Object.defineProperty(U,"sexagesimalToDecimal",{enumerable:!0,get:function(){return or.default}}),Object.defineProperty(U,"toDecimal",{enumerable:!0,get:function(){return Br.default}}),Object.defineProperty(U,"toRad",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(U,"toDeg",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(U,"wktToPolygon",{enumerable:!0,get:function(){return se.default}});var Z=ge(G(2222)),D=ge(G(179)),he=ge(G(917)),ce=ge(G(1167)),te=ge(G(8948)),we=ge(G(1118)),ee=ge(G(1691)),X=ge(G(9144)),z=ge(G(190)),$=ge(G(5524)),ue=ge(G(7088)),Te=ge(G(9952)),Fe=ge(G(8744)),Je=ge(G(4695)),Ke=ge(G(8674)),Qe=ge(G(7504)),Ye=ge(G(884)),Ht=ge(G(7029)),Yt=ge(G(3100)),Ct=ge(G(5378)),Tt=ge(G(2671)),Nt=ge(G(939)),mt=ge(G(2845)),Et=ge(G(8950)),Le=ge(G(3026)),ie=ge(G(4194)),tt=ge(G(3536)),vt=ge(G(2787)),Bt=ge(G(202)),In=ge(G(4902)),wn=ge(G(7637)),_r=ge(G(6563)),Cn=ge(G(266)),Jn=ge(G(2447)),or=ge(G(1532)),Br=ge(G(5101)),de=ge(G(5705)),_e=ge(G(942)),se=ge(G(354)),ae=G(7636);function ge(pe){return pe&&pe.__esModule?pe:{default:pe}}Object.keys(ae).forEach(function(pe){"default"===pe||"__esModule"===pe||Object.prototype.hasOwnProperty.call(x,pe)||Object.defineProperty(U,pe,{enumerable:!0,get:function(){return ae[pe]}})})},3026:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){var he=D.toString().trim();return!isNaN(parseFloat(he))&&parseFloat(he)===Number(he)}},4194:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,we,ee){return(0,x.default)(we,te)+(0,x.default)(te,ee)===(0,x.default)(we,ee)}},3536:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=D(G(7029)),Z=D(G(3100));function D(te){return te&&te.__esModule?te:{default:te}}U.default=function(we,ee){for(var X=!1,z=ee.length,$=-1,ue=z-1;++$<z;ue=$)((0,Z.default)(ee[$])<=(0,Z.default)(we)&&(0,Z.default)(we)<(0,Z.default)(ee[ue])||(0,Z.default)(ee[ue])<=(0,Z.default)(we)&&(0,Z.default)(we)<(0,Z.default)(ee[$]))&&(0,x.default)(we)<((0,x.default)(ee[ue])-(0,x.default)(ee[$]))*((0,Z.default)(we)-(0,Z.default)(ee[$]))/((0,Z.default)(ee[ue])-(0,Z.default)(ee[$]))+(0,x.default)(ee[$])&&(X=!X);return X}},2787:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(7504));U.default=function(te,we,ee,X){return(0,x.default)(te,we,ee)<X}},202:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,we,ee){return(0,x.default)(te,we,.01)<ee}},4902:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){return x.sexagesimalPattern.test(ce.toString().trim())}},7637:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=he(G(4695)),Z=he(G(6563)),D=he(G(266));function he(we){return we&&we.__esModule?we:{default:we}}U.default=function(ee){var X=(0,x.default)(ee),z=X.latitude,$=X.longitude;if(Array.isArray(ee)&&ee.length>=2)return(0,D.default)(ee[0])&&(0,Z.default)(ee[1]);if(typeof z>"u"||typeof $>"u")return!1;var ue=ee[$],Te=ee[z];return!(typeof Te>"u"||typeof ue>"u"||!1===(0,Z.default)(Te)||!1===(0,D.default)(ue))}},6563:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(3026)),Z=ce(G(4902)),D=ce(G(1532)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,x.default)(X)?!(parseFloat(X)>he.MAXLAT||X<he.MINLAT):!!(0,Z.default)(X)&&ee((0,D.default)(X))}},266:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=ce(G(3026)),Z=ce(G(4902)),D=ce(G(1532)),he=G(7636);function ce(ee){return ee&&ee.__esModule?ee:{default:ee}}U.default=function ee(X){return(0,x.default)(X)?!(parseFloat(X)>he.MAXLON||X<he.MINLON):!!(0,Z.default)(X)&&ee((0,D.default)(X))}},2447:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=function Z(ce){return ce&&ce.__esModule?ce:{default:ce}}(G(8674));U.default=function(te,we){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.default;return ee="function"==typeof ee?ee:x.default,we.slice().sort(function(X,z){return ee(te,X)-ee(te,z)})}},6522:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){return D>1?1:D<-1?-1:D}},1532:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=G(7636);U.default=function(ce){var te=new RegExp(x.sexagesimalPattern).exec(ce.toString().trim());if(typeof te>"u"||null===te)throw new Error("Given value is not in sexagesimal format");var we=Number(te[2])/60||0,ee=Number(te[4])/3600||0,X=parseFloat(te[1])+we+ee;return["S","W"].includes(te[7])?-X:X}},5101:(yt,U,G)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var x=te(G(3026)),Z=te(G(4902)),D=te(G(1532)),he=te(G(7637)),ce=te(G(4695));function te(ue){return ue&&ue.__esModule?ue:{default:ue}}function we(ue,Te){var Fe=Object.keys(ue);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(ue);Te&&(Je=Je.filter(function(Ke){return Object.getOwnPropertyDescriptor(ue,Ke).enumerable})),Fe.push.apply(Fe,Je)}return Fe}function ee(ue){for(var Te=1;Te<arguments.length;Te++){var Fe=null!=arguments[Te]?arguments[Te]:{};Te%2?we(Object(Fe),!0).forEach(function(Je){X(ue,Je,Fe[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(Fe)):we(Object(Fe)).forEach(function(Je){Object.defineProperty(ue,Je,Object.getOwnPropertyDescriptor(Fe,Je))})}return ue}function X(ue,Te,Fe){return Te in ue?Object.defineProperty(ue,Te,{value:Fe,enumerable:!0,configurable:!0,writable:!0}):ue[Te]=Fe,ue}U.default=function ue(Te){if((0,x.default)(Te))return Number(Te);if((0,Z.default)(Te))return(0,D.default)(Te);if((0,he.default)(Te)){var Fe=(0,ce.default)(Te);return Array.isArray(Te)?Te.map(function(Je,Ke){return[0,1].includes(Ke)?ue(Je):Je}):ee(ee(ee({},Te),Fe.latitude&&X({},Fe.latitude,ue(Te[Fe.latitude]))),Fe.longitude&&X({},Fe.longitude,ue(Te[Fe.longitude])))}return Array.isArray(Te)?Te.map(function(Je){return(0,he.default)(Je)?ue(Je):Je}):Te}},942:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){return 180*D/Math.PI}},5705:(yt,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(D){return D*Math.PI/180}},354:(yt,U)=>{function D(ee,X){(null==X||X>ee.length)&&(X=ee.length);for(var z=0,$=new Array(X);z<X;z++)$[z]=ee[z];return $}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(X){if(!X.startsWith("POLYGON"))throw new Error("Invalid wkt.");return X.slice(X.indexOf("(")+2,X.indexOf(")")).split(", ").map(function(ue){var Fe=function G(ee,X){return function ce(ee){if(Array.isArray(ee))return ee}(ee)||function he(ee,X){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(ee)){var z=[],$=!0,ue=!1,Te=void 0;try{for(var Je,Fe=ee[Symbol.iterator]();!($=(Je=Fe.next()).done)&&(z.push(Je.value),!X||z.length!==X);$=!0);}catch(Ke){ue=!0,Te=Ke}finally{try{!$&&null!=Fe.return&&Fe.return()}finally{if(ue)throw Te}}return z}}(ee,X)||function Z(ee,X){if(ee){if("string"==typeof ee)return D(ee,X);var z=Object.prototype.toString.call(ee).slice(8,-1);if("Object"===z&&ee.constructor&&(z=ee.constructor.name),"Map"===z||"Set"===z)return Array.from(ee);if("Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return D(ee,X)}}(ee,X)||function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ue.split(" "),2),Ke=Fe[1];return{longitude:parseFloat(Fe[0]),latitude:parseFloat(Ke)}})}},9574:(yt,U,G)=>{G.d(U,{A:()=>Je});var x=G(1401),Z=G(8779),D=G(1631),he=G(5398);class ce{constructor(Qe,Ye){this._delegate=Qe,this.firebase=Ye,(0,D._addComponent)(Qe,new Z.uA("app-compat",()=>this,"PUBLIC")),this.container=Qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this._delegate.automaticDataCollectionEnabled=Qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Qe=>{this._delegate.checkDestroyed(),Qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,D.deleteApp)(this._delegate)))}_getService(Qe,Ye=D._DEFAULT_ENTRY_NAME){var Ht;this._delegate.checkDestroyed();const Yt=this._delegate.container.getProvider(Qe);return!Yt.isInitialized()&&"EXPLICIT"===(null===(Ht=Yt.getComponent())||void 0===Ht?void 0:Ht.instantiationMode)&&Yt.initialize(),Yt.getImmediate({identifier:Ye})}_removeServiceInstance(Qe,Ye=D._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Qe).clearInstance(Ye)}_addComponent(Qe){(0,D._addComponent)(this._delegate,Qe)}_addOrOverwriteComponent(Qe){(0,D._addOrOverwriteComponent)(this._delegate,Qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new x.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function X(){const Ke=function ee(Ke){const Qe={},Ye={__esModule:!0,initializeApp:function Ct(Et,Le={}){const ie=D.initializeApp(Et,Le);if((0,x.gR)(Qe,ie.name))return Qe[ie.name];const tt=new Ke(ie,Ye);return Qe[ie.name]=tt,tt},app:Yt,registerVersion:D.registerVersion,setLogLevel:D.setLogLevel,onLog:D.onLog,apps:null,SDK_VERSION:D.SDK_VERSION,INTERNAL:{registerComponent:function Nt(Et){const Le=Et.name,ie=Le.replace("-compat","");if(D._registerComponent(Et)&&"PUBLIC"===Et.type){const tt=(vt=Yt())=>{if("function"!=typeof vt[ie])throw we.create("invalid-app-argument",{appName:Le});return vt[ie]()};void 0!==Et.serviceProps&&(0,x.zw)(tt,Et.serviceProps),Ye[ie]=tt,Ke.prototype[ie]=function(...vt){return this._getService.bind(this,Le).apply(this,Et.multipleInstances?vt:[])}}return"PUBLIC"===Et.type?Ye[ie]:null},removeApp:function Ht(Et){delete Qe[Et]},useAsService:function mt(Et,Le){return"serverAuth"===Le?null:Le},modularAPIs:D}};function Yt(Et){if(!(0,x.gR)(Qe,Et=Et||D._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Et});return Qe[Et]}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function Tt(){return Object.keys(Qe).map(Et=>Qe[Et])}}),Yt.App=Ke,Ye}(ce);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function Qe(Ye){(0,x.zw)(Ke,Ye)},createSubscribe:x.tD,ErrorFactory:x.FA,deepExtend:x.zw}),Ke}(),$=new he.Vy("@firebase/app-compat");try{const Ke=(0,x.mS)();if(void 0!==Ke.firebase){$.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Qe=Ke.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&$.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Je=z;!function Fe(Ke){(0,D.registerVersion)("@firebase/app-compat","0.2.43",Ke)}()},1631:(yt,U,G)=>{G.r(U),G.d(U,{FirebaseError:()=>he.g,SDK_VERSION:()=>yi,_DEFAULT_ENTRY_NAME:()=>de,_addComponent:()=>pe,_addOrOverwriteComponent:()=>st,_apps:()=>se,_clearComponents:()=>Kr,_components:()=>ge,_getProvider:()=>Tn,_isFirebaseApp:()=>vn,_isFirebaseServerApp:()=>ft,_registerComponent:()=>xt,_removeServiceInstance:()=>It,_serverApps:()=>ae,deleteApp:()=>us,getApp:()=>to,getApps:()=>xa,initializeApp:()=>xr,initializeServerApp:()=>Yr,onLog:()=>na,registerVersion:()=>no,setLogLevel:()=>Os});var x=G(467),Z=G(8779),D=G(5398),he=G(1401),ce=G(6749);class te{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(C=>{if(function we(We){const Ce=We.getComponent();return"VERSION"===Ce?.type}(C)){const E=C.getImmediate();return`${E.library}/${E.version}`}return null}).filter(C=>C).join(" ")}}const ee="@firebase/app",X="0.10.13",z=new D.Vy("@firebase/app"),$="@firebase/app-compat",ue="@firebase/analytics-compat",Te="@firebase/analytics",Fe="@firebase/app-check-compat",Je="@firebase/app-check",Ke="@firebase/auth",Qe="@firebase/auth-compat",Ye="@firebase/database",Ht="@firebase/data-connect",Yt="@firebase/database-compat",Ct="@firebase/functions",Tt="@firebase/functions-compat",Nt="@firebase/installations",mt="@firebase/installations-compat",Et="@firebase/messaging",Le="@firebase/messaging-compat",ie="@firebase/performance",tt="@firebase/performance-compat",vt="@firebase/remote-config",Bt="@firebase/remote-config-compat",In="@firebase/storage",wn="@firebase/storage-compat",_r="@firebase/firestore",Cn="@firebase/vertexai-preview",Jn="@firebase/firestore-compat",or="firebase",de="[DEFAULT]",_e={[ee]:"fire-core",[$]:"fire-core-compat",[Te]:"fire-analytics",[ue]:"fire-analytics-compat",[Je]:"fire-app-check",[Fe]:"fire-app-check-compat",[Ke]:"fire-auth",[Qe]:"fire-auth-compat",[Ye]:"fire-rtdb",[Ht]:"fire-data-connect",[Yt]:"fire-rtdb-compat",[Ct]:"fire-fn",[Tt]:"fire-fn-compat",[Nt]:"fire-iid",[mt]:"fire-iid-compat",[Et]:"fire-fcm",[Le]:"fire-fcm-compat",[ie]:"fire-perf",[tt]:"fire-perf-compat",[vt]:"fire-rc",[Bt]:"fire-rc-compat",[In]:"fire-gcs",[wn]:"fire-gcs-compat",[_r]:"fire-fst",[Jn]:"fire-fst-compat",[Cn]:"fire-vertex","fire-js":"fire-js",[or]:"fire-js-all"},se=new Map,ae=new Map,ge=new Map;function pe(We,Ce){try{We.container.addComponent(Ce)}catch(C){z.debug(`Component ${Ce.name} failed to register with FirebaseApp ${We.name}`,C)}}function st(We,Ce){We.container.addOrOverwriteComponent(Ce)}function xt(We){const Ce=We.name;if(ge.has(Ce))return z.debug(`There were multiple attempts to register component ${Ce}.`),!1;ge.set(Ce,We);for(const C of se.values())pe(C,We);for(const C of ae.values())pe(C,We);return!0}function Tn(We,Ce){const C=We.container.getProvider("heartbeat").getImmediate({optional:!0});return C&&C.triggerHeartbeat(),We.container.getProvider(Ce)}function It(We,Ce,C=de){Tn(We,Ce).clearInstance(C)}function vn(We){return void 0!==We.options}function ft(We){return void 0!==We.settings}function Kr(){ge.clear()}const Zt=new he.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class kt{constructor(Ce,C,E){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},C),this._name=C.name,this._automaticDataCollectionEnabled=C.automaticDataCollectionEnabled,this._container=E,this.container.addComponent(new Z.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}class Qr extends kt{constructor(Ce,C,E,S){const F=void 0!==C.automaticDataCollectionEnabled&&C.automaticDataCollectionEnabled,j={name:E,automaticDataCollectionEnabled:F};super(void 0!==Ce.apiKey?Ce:Ce.options,j,S),this._serverConfig=Object.assign({automaticDataCollectionEnabled:F},C),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,C.releaseOnDeref=void 0,no(ee,X,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ce){this.isDeleted||(this._refCount++,void 0!==Ce&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ce,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){us(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Zt.create("server-app-deleted")}}const yi="10.14.1";function xr(We,Ce={}){let C=We;"object"!=typeof Ce&&(Ce={name:Ce});const E=Object.assign({name:de,automaticDataCollectionEnabled:!1},Ce),S=E.name;if("string"!=typeof S||!S)throw Zt.create("bad-app-name",{appName:String(S)});if(C||(C=(0,he.T9)()),!C)throw Zt.create("no-options");const F=se.get(S);if(F){if((0,he.bD)(C,F.options)&&(0,he.bD)(E,F.config))return F;throw Zt.create("duplicate-app",{appName:S})}const j=new Z.h1(S);for(const Pe of ge.values())j.addComponent(Pe);const me=new kt(C,E,j);return se.set(S,me),me}function Yr(We,Ce){if((0,he.Bd)()&&!(0,he.p7)())throw Zt.create("invalid-server-app-environment");let C;void 0===Ce.automaticDataCollectionEnabled&&(Ce.automaticDataCollectionEnabled=!1),C=vn(We)?We.options:We;const E=Object.assign(Object.assign({},Ce),C);if(void 0!==E.releaseOnDeref&&delete E.releaseOnDeref,void 0!==Ce.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Zt.create("finalization-registry-not-supported",{});const F=""+(pt=JSON.stringify(E),[...pt].reduce((Ve,pn)=>Math.imul(31,Ve)+pn.charCodeAt(0)|0,0)),j=ae.get(F);var pt;if(j)return j.incRefCount(Ce.releaseOnDeref),j;const me=new Z.h1(F);for(const pt of ge.values())me.addComponent(pt);const Pe=new Qr(C,Ce,F,me);return ae.set(F,Pe),Pe}function to(We=de){const Ce=se.get(We);if(!Ce&&We===de&&(0,he.T9)())return xr();if(!Ce)throw Zt.create("no-app",{appName:We});return Ce}function xa(){return Array.from(se.values())}function us(We){return ks.apply(this,arguments)}function ks(){return(ks=(0,x.A)(function*(We){let Ce=!1;const C=We.name;se.has(C)?(Ce=!0,se.delete(C)):ae.has(C)&&We.decRefCount()<=0&&(ae.delete(C),Ce=!0),Ce&&(yield Promise.all(We.container.getProviders().map(E=>E.delete())),We.isDeleted=!0)})).apply(this,arguments)}function no(We,Ce,C){var E;let S=null!==(E=_e[We])&&void 0!==E?E:We;C&&(S+=`-${C}`);const F=S.match(/\s|\//),j=Ce.match(/\s|\//);if(F||j){const me=[`Unable to register library "${S}" with version "${Ce}":`];return F&&me.push(`library name "${S}" contains illegal characters (whitespace or "/")`),F&&j&&me.push("and"),j&&me.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void z.warn(me.join(" "))}xt(new Z.uA(`${S}-version`,()=>({library:S,version:Ce}),"VERSION"))}function na(We,Ce){if(null!==We&&"function"!=typeof We)throw Zt.create("invalid-log-argument");(0,D.Ey)(We,Ce)}function Os(We){(0,D.He)(We)}const oi="firebase-heartbeat-database",ra=1,Fs="firebase-heartbeat-store";let es=null;function Do(){return es||(es=(0,ce.P2)(oi,ra,{upgrade:(We,Ce)=>{if(0===Ce)try{We.createObjectStore(Fs)}catch(C){console.warn(C)}}}).catch(We=>{throw Zt.create("idb-open",{originalErrorMessage:We.message})})),es}function Mn(){return(Mn=(0,x.A)(function*(We){try{const C=(yield Do()).transaction(Fs),E=yield C.objectStore(Fs).get(ll(We));return yield C.done,E}catch(Ce){if(Ce instanceof he.g)z.warn(Ce.message);else{const C=Zt.create("idb-get",{originalErrorMessage:Ce?.message});z.warn(C.message)}}})).apply(this,arguments)}function Li(We,Ce){return hs.apply(this,arguments)}function hs(){return(hs=(0,x.A)(function*(We,Ce){try{const E=(yield Do()).transaction(Fs,"readwrite");yield E.objectStore(Fs).put(Ce,ll(We)),yield E.done}catch(C){if(C instanceof he.g)z.warn(C.message);else{const E=Zt.create("idb-set",{originalErrorMessage:C?.message});z.warn(E.message)}}})).apply(this,arguments)}function ll(We){return`${We.name}!${We.options.appId}`}class ro{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const C=this.container.getProvider("app").getImmediate();this._storage=new ia(C),this._heartbeatsCachePromise=this._storage.read().then(E=>(this._heartbeatsCache=E,E))}triggerHeartbeat(){var Ce=this;return(0,x.A)(function*(){var C,E;try{const F=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),j=Ci();return null==(null===(C=Ce._heartbeatsCache)||void 0===C?void 0:C.heartbeats)&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise,null==(null===(E=Ce._heartbeatsCache)||void 0===E?void 0:E.heartbeats))||Ce._heartbeatsCache.lastSentHeartbeatDate===j||Ce._heartbeatsCache.heartbeats.some(me=>me.date===j)?void 0:(Ce._heartbeatsCache.heartbeats.push({date:j,agent:F}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(me=>{const Pe=new Date(me.date).valueOf();return Date.now()-Pe<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache))}catch(S){z.warn(S)}})()}getHeartbeatsHeader(){var Ce=this;return(0,x.A)(function*(){var C;try{if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null==(null===(C=Ce._heartbeatsCache)||void 0===C?void 0:C.heartbeats)||0===Ce._heartbeatsCache.heartbeats.length)return"";const E=Ci(),{heartbeatsToSend:S,unsentEntries:F}=function Ra(We,Ce=1024){const C=[];let E=We.slice();for(const S of We){const F=C.find(j=>j.agent===S.agent);if(F){if(F.dates.push(S.date),Lt(C)>Ce){F.dates.pop();break}}else if(C.push({agent:S.agent,dates:[S.date]}),Lt(C)>Ce){C.pop();break}E=E.slice(1)}return{heartbeatsToSend:C,unsentEntries:E}}(Ce._heartbeatsCache.heartbeats),j=(0,he.Uj)(JSON.stringify({version:2,heartbeats:S}));return Ce._heartbeatsCache.lastSentHeartbeatDate=E,F.length>0?(Ce._heartbeatsCache.heartbeats=F,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),j}catch(E){return z.warn(E),""}})()}}function Ci(){return(new Date).toISOString().substring(0,10)}class ia{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,x.A)(function*(){return!!(0,he.zW)()&&(0,he.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,x.A)(function*(){if(yield Ce._canUseIndexedDBPromise){const E=yield function ds(We){return Mn.apply(this,arguments)}(Ce.app);return E?.heartbeats?E:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ce){var C=this;return(0,x.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return Li(C.app,{lastSentHeartbeatDate:null!==(E=Ce.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var C=this;return(0,x.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const F=yield C.read();return Li(C.app,{lastSentHeartbeatDate:null!==(E=Ce.lastSentHeartbeatDate)&&void 0!==E?E:F.lastSentHeartbeatDate,heartbeats:[...F.heartbeats,...Ce.heartbeats]})}})()}}function Lt(We){return(0,he.Uj)(JSON.stringify({version:2,heartbeats:We})).length}!function Xl(We){xt(new Z.uA("platform-logger",Ce=>new te(Ce),"PRIVATE")),xt(new Z.uA("heartbeat",Ce=>new ro(Ce),"PRIVATE")),no(ee,X,We),no(ee,X,"esm2017"),no("fire-js","")}("")},8779:(yt,U,G)=>{G.d(U,{Kq:()=>ce,h1:()=>ee,uA:()=>D});var x=G(467),Z=G(1401);class D{constructor(z,$,ue){this.name=z,this.instanceFactory=$,this.type=ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const he="[DEFAULT]";class ce{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const ue=new Z.cY;if(this.instancesDeferred.set($,ue),this.isInitialized($)||this.shouldAutoInitialize())try{const Te=this.getOrInitializeService({instanceIdentifier:$});Te&&ue.resolve(Te)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const ue=this.normalizeInstanceIdentifier(z?.identifier),Te=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(ue)&&!this.shouldAutoInitialize()){if(Te)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ue})}catch(Fe){if(Te)return null;throw Fe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function we(X){return"EAGER"===X.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[$,ue]of this.instancesDeferred.entries()){const Te=this.normalizeInstanceIdentifier($);try{const Fe=this.getOrInitializeService({instanceIdentifier:Te});ue.resolve(Fe)}catch{}}}}clearInstance(z=he){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,x.A)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(ue=>"INTERNAL"in ue).map(ue=>ue.INTERNAL.delete()),...$.filter(ue=>"_delete"in ue).map(ue=>ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=he){return this.instances.has(z)}getOptions(z=he){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,ue=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ue))throw Error(`${this.name}(${ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Te=this.getOrInitializeService({instanceIdentifier:ue,options:$});for(const[Fe,Je]of this.instancesDeferred.entries())ue===this.normalizeInstanceIdentifier(Fe)&&Je.resolve(Te);return Te}onInit(z,$){var ue;const Te=this.normalizeInstanceIdentifier($),Fe=null!==(ue=this.onInitCallbacks.get(Te))&&void 0!==ue?ue:new Set;Fe.add(z),this.onInitCallbacks.set(Te,Fe);const Je=this.instances.get(Te);return Je&&z(Je,Te),()=>{Fe.delete(z)}}invokeOnInitCallbacks(z,$){const ue=this.onInitCallbacks.get($);if(ue)for(const Te of ue)try{Te(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let ue=this.instances.get(z);if(!ue&&this.component&&(ue=this.component.instanceFactory(this.container,{instanceIdentifier:(X=z,X===he?void 0:X),options:$}),this.instances.set(z,ue),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(ue,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ue)}catch{}var X;return ue||null}normalizeInstanceIdentifier(z=he){return this.component?this.component.multipleInstances?z:he:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new ce(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},5398:(yt,U,G)=>{G.d(U,{$b:()=>Z,Ey:()=>X,He:()=>ee,Vy:()=>we});const x=[];var Z=function(z){return z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",z}(Z||{});const D={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},he=Z.INFO,ce={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},te=(z,$,...ue)=>{if($<z.logLevel)return;const Te=(new Date).toISOString(),Fe=ce[$];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Fe](`[${Te}]  ${z.name}:`,...ue)};class we{constructor($){this.name=$,this._logLevel=he,this._logHandler=te,this._userLogHandler=null,x.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Z))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?D[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...$),this._logHandler(this,Z.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...$),this._logHandler(this,Z.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...$),this._logHandler(this,Z.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...$),this._logHandler(this,Z.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...$),this._logHandler(this,Z.ERROR,...$)}}function ee(z){x.forEach($=>{$.setLogLevel(z)})}function X(z,$){for(const ue of x){let Te=null;$&&$.level&&(Te=D[$.level]),ue.userLogHandler=null===z?null:(Fe,Je,...Ke)=>{const Qe=Ke.map(Ye=>{if(null==Ye)return null;if("string"==typeof Ye)return Ye;if("number"==typeof Ye||"boolean"==typeof Ye)return Ye.toString();if(Ye instanceof Error)return Ye.message;try{return JSON.stringify(Ye)}catch{return null}}).filter(Ye=>Ye).join(" ");Je>=(Te??Fe.logLevel)&&z({level:Z[Je].toLowerCase(),message:Qe,args:Ke,type:Fe.name})}}}},5046:(yt,U,G)=>{var x=G(467),Z=G(9574),D=G(443),he=G(1401),we=(G(1631),G(5398),G(8779));function ee(){return window}function $(){return $=(0,x.A)(function*(C,E,S){var F;const{BuildInfo:j}=ee();(0,D.au)(E.sessionId,"AuthEvent did not contain a session ID");const me=yield function Ye(C){return Ht.apply(this,arguments)}(E.sessionId),Pe={};return(0,D.av)()?Pe.ibi=j.packageName:(0,D.aw)()?Pe.apn=j.packageName:(0,D.ax)(C,"operation-not-supported-in-this-environment"),j.displayName&&(Pe.appDisplayName=j.displayName),Pe.sessionId=me,(0,D.ay)(C,S,E.type,void 0,null!==(F=E.eventId)&&void 0!==F?F:void 0,Pe)}),$.apply(this,arguments)}function Te(){return(Te=(0,x.A)(function*(C){const{BuildInfo:E}=ee(),S={};(0,D.av)()?S.iosBundleId=E.packageName:(0,D.aw)()?S.androidPackageName=E.packageName:(0,D.ax)(C,"operation-not-supported-in-this-environment"),yield(0,D.az)(C,S)})).apply(this,arguments)}function Ke(){return(Ke=(0,x.A)(function*(C,E,S){const{cordova:F}=ee();let j=()=>{};try{yield new Promise((me,Pe)=>{let pt=null;function Ve(){var K;me();const Gn=null===(K=F.plugins.browsertab)||void 0===K?void 0:K.close;"function"==typeof Gn&&Gn(),"function"==typeof S?.close&&S.close()}function pn(){pt||(pt=window.setTimeout(()=>{Pe((0,D.aB)(C,"redirect-cancelled-by-user"))},2e3))}function yr(){"visible"===document?.visibilityState&&pn()}E.addPassiveListener(Ve),document.addEventListener("resume",pn,!1),(0,D.aw)()&&document.addEventListener("visibilitychange",yr,!1),j=()=>{E.removePassiveListener(Ve),document.removeEventListener("resume",pn,!1),document.removeEventListener("visibilitychange",yr,!1),pt&&window.clearTimeout(pt)}})}finally{j()}})).apply(this,arguments)}function Ht(){return(Ht=(0,x.A)(function*(C){const E=function Yt(C){if((0,D.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const E=new ArrayBuffer(C.length),S=new Uint8Array(E);for(let F=0;F<C.length;F++)S[F]=C.charCodeAt(F);return S}(C),S=yield crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(S)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Tt extends D.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(E=>{this.resolveInitialized=E})}addPassiveListener(E){this.passiveListeners.add(E)}removePassiveListener(E){this.passiveListeners.delete(E)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(E){return this.resolveInitialized(),this.passiveListeners.forEach(S=>S(E)),super.onEvent(E)}initialized(){var E=this;return(0,x.A)(function*(){yield E.initPromise})()}}function Et(C){return Le.apply(this,arguments)}function Le(){return(Le=(0,x.A)(function*(C){const E=yield vt()._get(Bt(C));return E&&(yield vt()._remove(Bt(C))),E})).apply(this,arguments)}function tt(){const C=[];for(let S=0;S<20;S++){const F=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(F))}return C.join("")}function vt(){return(0,D.aE)(D.b)}function Bt(C){return(0,D.aF)("authEvent",C.config.apiKey,C.name)}function _r(C){if(!C?.includes("?"))return{};const[E,...S]=C.split("?");return(0,he.I9)(S.join("?"))}const or=class Jn{constructor(){this._redirectPersistence=D.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=D.aG,this._overrideRedirectResult=D.aH}_initialize(E){var S=this;return(0,x.A)(function*(){const F=E._key();let j=S.eventManagers.get(F);return j||(j=new Tt(E),S.eventManagers.set(F,j),S.attachCallbackListeners(E,j)),j})()}_openPopup(E){(0,D.ax)(E,"operation-not-supported-in-this-environment")}_openRedirect(E,S,F,j){var me=this;return(0,x.A)(function*(){!function Qe(C){var E,S,F,j,me,Pe,pt,Ve,pn,yr;const K=ee();(0,D.aC)("function"==typeof(null===(E=K?.universalLinks)||void 0===E?void 0:E.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,D.aC)(typeof(null===(S=K?.BuildInfo)||void 0===S?void 0:S.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,D.aC)("function"==typeof(null===(me=null===(j=null===(F=K?.cordova)||void 0===F?void 0:F.plugins)||void 0===j?void 0:j.browsertab)||void 0===me?void 0:me.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,D.aC)("function"==typeof(null===(Ve=null===(pt=null===(Pe=K?.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===pt?void 0:pt.browsertab)||void 0===Ve?void 0:Ve.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,D.aC)("function"==typeof(null===(yr=null===(pn=K?.cordova)||void 0===pn?void 0:pn.InAppBrowser)||void 0===yr?void 0:yr.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(E);const Pe=yield me._initialize(E);yield Pe.initialized(),Pe.resetRedirect(),(0,D.aI)(),yield me._originValidation(E);const pt=function Nt(C,E,S=null){return{type:E,eventId:S,urlResponse:null,sessionId:tt(),postBody:null,tenantId:C.tenantId,error:(0,D.aB)(C,"no-auth-event")}}(E,F,j);yield function mt(C,E){return vt()._set(Bt(C),E)}(E,pt);const Ve=yield function z(C,E,S){return $.apply(this,arguments)}(E,pt,S),pn=yield function Fe(C){const{cordova:E}=ee();return new Promise(S=>{E.plugins.browsertab.isAvailable(F=>{let j=null;F?E.plugins.browsertab.openUrl(C):j=E.InAppBrowser.open(C,(0,D.aA)()?"_blank":"_system","location=yes"),S(j)})})}(Ve);return function Je(C,E,S){return Ke.apply(this,arguments)}(E,Pe,pn)})()}_isIframeWebStorageSupported(E,S){throw new Error("Method not implemented.")}_originValidation(E){const S=E._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function ue(C){return Te.apply(this,arguments)}(E)),this.originValidationPromises[S]}attachCallbackListeners(E,S){const{universalLinks:F,handleOpenURL:j,BuildInfo:me}=ee(),Pe=setTimeout((0,x.A)(function*(){yield Et(E),S.onEvent(Br())}),500),pt=function(){var yr=(0,x.A)(function*(K){clearTimeout(Pe);const Gn=yield Et(E);let Ls=null;Gn&&K?.url&&(Ls=function ie(C,E){var S,F;const j=function wn(C){const E=_r(C),S=E.link?decodeURIComponent(E.link):void 0,F=_r(S).link,j=E.deep_link_id?decodeURIComponent(E.deep_link_id):void 0;return _r(j).link||j||F||S||C}(E);if(j.includes("/__/auth/callback")){const me=_r(j),Pe=me.firebaseError?function In(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(me.firebaseError)):null,pt=null===(F=null===(S=Pe?.code)||void 0===S?void 0:S.split("auth/"))||void 0===F?void 0:F[1],Ve=pt?(0,D.aB)(pt):null;return Ve?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:j,postBody:null}}return null}(Gn,K.url)),S.onEvent(Ls||Br())});return function(Gn){return yr.apply(this,arguments)}}();typeof F<"u"&&"function"==typeof F.subscribe&&F.subscribe(null,pt);const Ve=j,pn=`${me.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var yr=(0,x.A)(function*(K){if(K.toLowerCase().startsWith(pn)&&pt({url:K}),"function"==typeof Ve)try{Ve(K)}catch(Gn){console.error(Gn)}});return function(K){return yr.apply(this,arguments)}}()}};function Br(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,D.aB)("no-auth-event")}}function ge(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function st(C=(0,he.ZQ)()){return!("file:"!==ge()&&"ionic:"!==ge()&&"capacitor:"!==ge()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function ft(){try{const C=self.localStorage,E=D.aN();if(C)return C.setItem(E,"1"),C.removeItem(E),!function vn(C=(0,he.ZQ)()){return function Tn(){return(0,he.lT)()&&11===document?.documentMode}()||function It(C=(0,he.ZQ)()){return/Edge\/\d+/.test(C)}(C)}()||(0,he.zW)()}catch{return Kr()&&(0,he.zW)()}return!1}function Kr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xt(){return(function pe(){return"http:"===ge()||"https:"===ge()}()||(0,he.sr)()||st())&&!function xt(){return(0,he.lV)()||(0,he.Ll)()}()&&ft()&&!Kr()}function Zt(){return st()&&typeof document<"u"}function Qr(){return(Qr=(0,x.A)(function*(){return!!Zt()&&new Promise(C=>{const E=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(E),C(!0)})})})).apply(this,arguments)}const xr={LOCAL:"local",NONE:"none",SESSION:"session"},Yr=D.aC,to="persistence";function us(C){return ks.apply(this,arguments)}function ks(){return(ks=(0,x.A)(function*(C){yield C._initializationPromise;const E=na(),S=D.aF(to,C.config.apiKey,C.name);E&&E.setItem(S,C._getPersistence())})).apply(this,arguments)}function na(){var C;try{return(null===(C=function yi(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const Os=D.aC;class oi{constructor(){this.browserResolver=D.aE(D.k),this.cordovaResolver=D.aE(or),this.underlyingResolver=null,this._redirectPersistence=D.a,this._completeRedirectFn=D.aG,this._overrideRedirectResult=D.aH}_initialize(E){var S=this;return(0,x.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._initialize(E)})()}_openPopup(E,S,F,j){var me=this;return(0,x.A)(function*(){return yield me.selectUnderlyingResolver(),me.assertedUnderlyingResolver._openPopup(E,S,F,j)})()}_openRedirect(E,S,F,j){var me=this;return(0,x.A)(function*(){return yield me.selectUnderlyingResolver(),me.assertedUnderlyingResolver._openRedirect(E,S,F,j)})()}_isIframeWebStorageSupported(E,S){this.assertedUnderlyingResolver._isIframeWebStorageSupported(E,S)}_originValidation(E){return this.assertedUnderlyingResolver._originValidation(E)}get _shouldInitProactively(){return Zt()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Os(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var E=this;return(0,x.A)(function*(){if(E.underlyingResolver)return;const S=yield function kt(){return Qr.apply(this,arguments)}();E.underlyingResolver=S?E.cordovaResolver:E.browserResolver})()}}function ra(C){return C.unwrap()}function es(C){return ds(C)}function ds(C){const{_tokenResponse:E}=C instanceof he.g?C.customData:C;if(!E)return null;if(!(C instanceof he.g)&&"temporaryProof"in E&&"phoneNumber"in E)return D.P.credentialFromResult(C);const S=E.providerId;if(!S||S===D.p.PASSWORD)return null;let F;switch(S){case D.p.GOOGLE:F=D.X;break;case D.p.FACEBOOK:F=D.W;break;case D.p.GITHUB:F=D.Y;break;case D.p.TWITTER:F=D.$;break;default:const{oauthIdToken:j,oauthAccessToken:me,oauthTokenSecret:Pe,pendingToken:pt,nonce:Ve}=E;return me||Pe||j||pt?pt?S.startsWith("saml.")?D.aQ._create(S,pt):D.N._fromParams({providerId:S,signInMethod:S,pendingToken:pt,idToken:j,accessToken:me}):new D.Z(S).credential({idToken:j,accessToken:me,rawNonce:Ve}):null}return C instanceof he.g?F.credentialFromError(C):F.credentialFromResult(C)}function Mn(C,E){return E.catch(S=>{throw S instanceof he.g&&function Do(C,E){var S;const F=null===(S=E.customData)||void 0===S?void 0:S._tokenResponse;if("auth/multi-factor-auth-required"===E?.code)E.resolver=new ll(C,D.as(C,E));else if(F){const j=ds(E),me=E;j&&(me.credential=j,me.tenantId=F.tenantId||void 0,me.email=F.email||void 0,me.phoneNumber=F.phoneNumber||void 0)}}(C,S),S}).then(S=>{const j=S.user;return{operationType:S.operationType,credential:es(S),additionalUserInfo:D.aq(S),user:ai.getOrCreate(j)}})}function Li(C,E){return hs.apply(this,arguments)}function hs(){return(hs=(0,x.A)(function*(C,E){const S=yield E;return{verificationId:S.verificationId,confirm:F=>Mn(C,S.confirm(F))}})).apply(this,arguments)}class ll{constructor(E,S){this.resolver=S,this.auth=function Fs(C){return C.wrapped()}(E)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(E){return Mn(ra(this.auth),this.resolver.resolveSignIn(E))}}class ai{constructor(E){this._delegate=E,this.multiFactor=D.at(E)}static getOrCreate(E){return ai.USER_MAP.has(E)||ai.USER_MAP.set(E,new ai(E)),ai.USER_MAP.get(E)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(E){return this._delegate.getIdTokenResult(E)}getIdToken(E){return this._delegate.getIdToken(E)}linkAndRetrieveDataWithCredential(E){return this.linkWithCredential(E)}linkWithCredential(E){var S=this;return(0,x.A)(function*(){return Mn(S.auth,D.a2(S._delegate,E))})()}linkWithPhoneNumber(E,S){var F=this;return(0,x.A)(function*(){return Li(F.auth,D.l(F._delegate,E,S))})()}linkWithPopup(E){var S=this;return(0,x.A)(function*(){return Mn(S.auth,D.d(S._delegate,E,oi))})()}linkWithRedirect(E){var S=this;return(0,x.A)(function*(){return yield us(D.aJ(S.auth)),D.g(S._delegate,E,oi)})()}reauthenticateAndRetrieveDataWithCredential(E){return this.reauthenticateWithCredential(E)}reauthenticateWithCredential(E){var S=this;return(0,x.A)(function*(){return Mn(S.auth,D.a3(S._delegate,E))})()}reauthenticateWithPhoneNumber(E,S){return Li(this.auth,D.r(this._delegate,E,S))}reauthenticateWithPopup(E){return Mn(this.auth,D.e(this._delegate,E,oi))}reauthenticateWithRedirect(E){var S=this;return(0,x.A)(function*(){return yield us(D.aJ(S.auth)),D.h(S._delegate,E,oi)})()}sendEmailVerification(E){return D.ag(this._delegate,E)}unlink(E){var S=this;return(0,x.A)(function*(){return yield D.ap(S._delegate,E),S})()}updateEmail(E){return D.al(this._delegate,E)}updatePassword(E){return D.am(this._delegate,E)}updatePhoneNumber(E){return D.u(this._delegate,E)}updateProfile(E){return D.ak(this._delegate,E)}verifyBeforeUpdateEmail(E,S){return D.ah(this._delegate,E,S)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ai.USER_MAP=new WeakMap;const fs=D.aC;let ro=(()=>{class C{constructor(S,F){if(this.app=S,F.isInitialized())return this._delegate=F.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=S.options;fs(j,"invalid-api-key",{appName:S.name}),fs(j,"invalid-api-key",{appName:S.name});const me=typeof window<"u"?oi:void 0;this._delegate=F.initialize({options:{persistence:Ra(j,S.name),popupRedirectResolver:me}}),this._delegate._updateErrorMap(D.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ai.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(S){this._delegate.languageCode=S}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(S){this._delegate.tenantId=S}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(S,F){D.K(this._delegate,S,F)}applyActionCode(S){return D.a7(this._delegate,S)}checkActionCode(S){return D.a8(this._delegate,S)}confirmPasswordReset(S,F){return D.a6(this._delegate,S,F)}createUserWithEmailAndPassword(S,F){var j=this;return(0,x.A)(function*(){return Mn(j._delegate,D.aa(j._delegate,S,F))})()}fetchProvidersForEmail(S){return this.fetchSignInMethodsForEmail(S)}fetchSignInMethodsForEmail(S){return D.af(this._delegate,S)}isSignInWithEmailLink(S){return D.ad(this._delegate,S)}getRedirectResult(){var S=this;return(0,x.A)(function*(){fs(Xt(),S._delegate,"operation-not-supported-in-this-environment");const F=yield D.j(S._delegate,oi);return F?Mn(S._delegate,Promise.resolve(F)):{credential:null,user:null}})()}addFrameworkForLogging(S){!function de(C,E){(0,D.aJ)(C)._logFramework(E)}(this._delegate,S)}onAuthStateChanged(S,F,j){const{next:me,error:Pe,complete:pt}=Ci(S,F,j);return this._delegate.onAuthStateChanged(me,Pe,pt)}onIdTokenChanged(S,F,j){const{next:me,error:Pe,complete:pt}=Ci(S,F,j);return this._delegate.onIdTokenChanged(me,Pe,pt)}sendSignInLinkToEmail(S,F){return D.ac(this._delegate,S,F)}sendPasswordResetEmail(S,F){return D.a5(this._delegate,S,F||void 0)}setPersistence(S){var F=this;return(0,x.A)(function*(){let j;switch(function xa(C,E){Yr(Object.values(xr).includes(E),C,"invalid-persistence-type"),(0,he.lV)()?Yr(E!==xr.SESSION,C,"unsupported-persistence-type"):(0,he.Ll)()?Yr(E===xr.NONE,C,"unsupported-persistence-type"):Kr()?Yr(E===xr.NONE||E===xr.LOCAL&&(0,he.zW)(),C,"unsupported-persistence-type"):Yr(E===xr.NONE||ft(),C,"unsupported-persistence-type")}(F._delegate,S),S){case xr.SESSION:j=D.a;break;case xr.LOCAL:j=(yield D.aE(D.i)._isAvailable())?D.i:D.b;break;case xr.NONE:j=D.U;break;default:return D.ax("argument-error",{appName:F._delegate.name})}return F._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(S){return this.signInWithCredential(S)}signInAnonymously(){return Mn(this._delegate,D.a0(this._delegate))}signInWithCredential(S){return Mn(this._delegate,D.a1(this._delegate,S))}signInWithCustomToken(S){return Mn(this._delegate,D.a4(this._delegate,S))}signInWithEmailAndPassword(S,F){return Mn(this._delegate,D.ab(this._delegate,S,F))}signInWithEmailLink(S,F){return Mn(this._delegate,D.ae(this._delegate,S,F))}signInWithPhoneNumber(S,F){return Li(this._delegate,D.s(this._delegate,S,F))}signInWithPopup(S){var F=this;return(0,x.A)(function*(){return fs(Xt(),F._delegate,"operation-not-supported-in-this-environment"),Mn(F._delegate,D.c(F._delegate,S,oi))})()}signInWithRedirect(S){var F=this;return(0,x.A)(function*(){return fs(Xt(),F._delegate,"operation-not-supported-in-this-environment"),yield us(F._delegate),D.f(F._delegate,S,oi)})()}updateCurrentUser(S){return this._delegate.updateCurrentUser(S)}verifyPasswordResetCode(S){return D.a9(this._delegate,S)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=xr,C})();function Ci(C,E,S){let F=C;"function"!=typeof C&&({next:F,error:E,complete:S}=C);const j=F;return{next:Pe=>j(Pe&&ai.getOrCreate(Pe)),error:E,complete:S}}function Ra(C,E){const S=function no(C,E){const S=na();if(!S)return[];const F=D.aF(to,C,E);switch(S.getItem(F)){case xr.NONE:return[D.U];case xr.LOCAL:return[D.i,D.a];case xr.SESSION:return[D.a];default:return[]}}(C,E);if(typeof self<"u"&&!S.includes(D.i)&&S.push(D.i),typeof window<"u")for(const F of[D.b,D.a])S.includes(F)||S.push(F);return S.includes(D.U)||S.push(D.U),S}class ia{constructor(){this.providerId="phone",this._delegate=new D.P(ra(Z.A.auth()))}static credential(E,S){return D.P.credential(E,S)}verifyPhoneNumber(E,S){return this._delegate.verifyPhoneNumber(E,S)}unwrap(){return this._delegate}}ia.PHONE_SIGN_IN_METHOD=D.P.PHONE_SIGN_IN_METHOD,ia.PROVIDER_ID=D.P.PROVIDER_ID;const Lt=D.aC;class Xl{constructor(E,S,F=Z.A.app()){var j;Lt(null===(j=F.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:F.name}),this._delegate=new D.R(F.auth(),E,S),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ce(C){C.INTERNAL.registerComponent(new we.uA("auth-compat",E=>{const S=E.getProvider("app-compat").getImmediate(),F=E.getProvider("auth");return new ro(S,F)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:D.A.EMAIL_SIGNIN,PASSWORD_RESET:D.A.PASSWORD_RESET,RECOVER_EMAIL:D.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:D.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:D.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:D.A.VERIFY_EMAIL}},EmailAuthProvider:D.V,FacebookAuthProvider:D.W,GithubAuthProvider:D.Y,GoogleAuthProvider:D.X,OAuthProvider:D.Z,SAMLAuthProvider:D._,PhoneAuthProvider:ia,PhoneMultiFactorGenerator:D.m,RecaptchaVerifier:Xl,TwitterAuthProvider:D.$,Auth:ro,AuthCredential:D.L,Error:he.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.14")}(Z.A)},6749:(yt,U,G)=>{G.d(U,{P2:()=>Yt});var x=G(467);const Z=(Le,ie)=>ie.some(tt=>Le instanceof tt);let D,he;const we=new WeakMap,ee=new WeakMap,X=new WeakMap,z=new WeakMap,$=new WeakMap;let Fe={get(Le,ie,tt){if(Le instanceof IDBTransaction){if("done"===ie)return ee.get(Le);if("objectStoreNames"===ie)return Le.objectStoreNames||X.get(Le);if("store"===ie)return tt.objectStoreNames[1]?void 0:tt.objectStore(tt.objectStoreNames[0])}return Ye(Le[ie])},set:(Le,ie,tt)=>(Le[ie]=tt,!0),has:(Le,ie)=>Le instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in Le};function Qe(Le){return"function"==typeof Le?function Ke(Le){return Le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Le)?function(...ie){return Le.apply(Ht(this),ie),Ye(we.get(this))}:function(...ie){return Ye(Le.apply(Ht(this),ie))}:function(ie,...tt){const vt=Le.call(Ht(this),ie,...tt);return X.set(vt,ie.sort?ie.sort():[ie]),Ye(vt)}}(Le):(Le instanceof IDBTransaction&&function Te(Le){if(ee.has(Le))return;const ie=new Promise((tt,vt)=>{const Bt=()=>{Le.removeEventListener("complete",In),Le.removeEventListener("error",wn),Le.removeEventListener("abort",wn)},In=()=>{tt(),Bt()},wn=()=>{vt(Le.error||new DOMException("AbortError","AbortError")),Bt()};Le.addEventListener("complete",In),Le.addEventListener("error",wn),Le.addEventListener("abort",wn)});ee.set(Le,ie)}(Le),Z(Le,function ce(){return D||(D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Le,Fe):Le)}function Ye(Le){if(Le instanceof IDBRequest)return function ue(Le){const ie=new Promise((tt,vt)=>{const Bt=()=>{Le.removeEventListener("success",In),Le.removeEventListener("error",wn)},In=()=>{tt(Ye(Le.result)),Bt()},wn=()=>{vt(Le.error),Bt()};Le.addEventListener("success",In),Le.addEventListener("error",wn)});return ie.then(tt=>{tt instanceof IDBCursor&&we.set(tt,Le)}).catch(()=>{}),$.set(ie,Le),ie}(Le);if(z.has(Le))return z.get(Le);const ie=Qe(Le);return ie!==Le&&(z.set(Le,ie),$.set(ie,Le)),ie}const Ht=Le=>$.get(Le);function Yt(Le,ie,{blocked:tt,upgrade:vt,blocking:Bt,terminated:In}={}){const wn=indexedDB.open(Le,ie),_r=Ye(wn);return vt&&wn.addEventListener("upgradeneeded",Cn=>{vt(Ye(wn.result),Cn.oldVersion,Cn.newVersion,Ye(wn.transaction),Cn)}),tt&&wn.addEventListener("blocked",Cn=>tt(Cn.oldVersion,Cn.newVersion,Cn)),_r.then(Cn=>{In&&Cn.addEventListener("close",()=>In()),Bt&&Cn.addEventListener("versionchange",Jn=>Bt(Jn.oldVersion,Jn.newVersion,Jn))}).catch(()=>{}),_r}const Tt=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],mt=new Map;function Et(Le,ie){if(!(Le instanceof IDBDatabase)||ie in Le||"string"!=typeof ie)return;if(mt.get(ie))return mt.get(ie);const tt=ie.replace(/FromIndex$/,""),vt=ie!==tt,Bt=Nt.includes(tt);if(!(tt in(vt?IDBIndex:IDBObjectStore).prototype)||!Bt&&!Tt.includes(tt))return;const In=function(){var wn=(0,x.A)(function*(_r,...Cn){const Jn=this.transaction(_r,Bt?"readwrite":"readonly");let or=Jn.store;return vt&&(or=or.index(Cn.shift())),(yield Promise.all([or[tt](...Cn),Bt&&Jn.done]))[0]});return function(Cn){return wn.apply(this,arguments)}}();return mt.set(ie,In),In}!function Je(Le){Fe=Le(Fe)}(Le=>({...Le,get:(ie,tt,vt)=>Et(ie,tt)||Le.get(ie,tt,vt),has:(ie,tt)=>!!Et(ie,tt)||Le.has(ie,tt)}))},467:(yt,U,G)=>{function x(D,he,ce,te,we,ee,X){try{var z=D[ee](X),$=z.value}catch(ue){return void ce(ue)}z.done?he($):Promise.resolve($).then(te,we)}function Z(D){return function(){var he=this,ce=arguments;return new Promise(function(te,we){var ee=D.apply(he,ce);function X($){x(ee,te,we,X,z,"next",$)}function z($){x(ee,te,we,X,z,"throw",$)}X(void 0)})}}G.d(U,{A:()=>Z})},1635:(yt,U,G)=>{function he(de,_e){var se={};for(var ae in de)Object.prototype.hasOwnProperty.call(de,ae)&&_e.indexOf(ae)<0&&(se[ae]=de[ae]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(ae=Object.getOwnPropertySymbols(de);ge<ae.length;ge++)_e.indexOf(ae[ge])<0&&Object.prototype.propertyIsEnumerable.call(de,ae[ge])&&(se[ae[ge]]=de[ae[ge]])}return se}function ue(de,_e,se,ae){return new(se||(se=Promise))(function(pe,st){function xt(vn){try{It(ae.next(vn))}catch(ft){st(ft)}}function Tn(vn){try{It(ae.throw(vn))}catch(ft){st(ft)}}function It(vn){vn.done?pe(vn.value):function ge(pe){return pe instanceof se?pe:new se(function(st){st(pe)})}(vn.value).then(xt,Tn)}It((ae=ae.apply(de,_e||[])).next())})}function Ct(de){return this instanceof Ct?(this.v=de,this):new Ct(de)}function Tt(de,_e,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ae=se.apply(de,_e||[]),pe=[];return ge=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),xt("next"),xt("throw"),xt("return",function st(Xt){return function(Zt){return Promise.resolve(Zt).then(Xt,ft)}}),ge[Symbol.asyncIterator]=function(){return this},ge;function xt(Xt,Zt){ae[Xt]&&(ge[Xt]=function(kt){return new Promise(function(Qr,yi){pe.push([Xt,kt,Qr,yi])>1||Tn(Xt,kt)})},Zt&&(ge[Xt]=Zt(ge[Xt])))}function Tn(Xt,Zt){try{!function It(Xt){Xt.value instanceof Ct?Promise.resolve(Xt.value.v).then(vn,ft):Kr(pe[0][2],Xt)}(ae[Xt](Zt))}catch(kt){Kr(pe[0][3],kt)}}function vn(Xt){Tn("next",Xt)}function ft(Xt){Tn("throw",Xt)}function Kr(Xt,Zt){Xt(Zt),pe.shift(),pe.length&&Tn(pe[0][0],pe[0][1])}}function mt(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,_e=de[Symbol.asyncIterator];return _e?_e.call(de):(de=function Ke(de){var _e="function"==typeof Symbol&&Symbol.iterator,se=_e&&de[_e],ae=0;if(se)return se.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&ae>=de.length&&(de=void 0),{value:de&&de[ae++],done:!de}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),se={},ae("next"),ae("throw"),ae("return"),se[Symbol.asyncIterator]=function(){return this},se);function ae(pe){se[pe]=de[pe]&&function(st){return new Promise(function(xt,Tn){!function ge(pe,st,xt,Tn){Promise.resolve(Tn).then(function(It){pe({value:It,done:xt})},st)}(xt,Tn,(st=de[pe](st)).done,st.value)})}}}G.d(U,{AQ:()=>Tt,N3:()=>Ct,Tt:()=>he,sH:()=>ue,xN:()=>mt}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=2602)}]);